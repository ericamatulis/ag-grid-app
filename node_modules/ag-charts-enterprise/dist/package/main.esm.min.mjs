var l0=Object.defineProperty,c0=Object.getOwnPropertyDescriptor,p=(t,e,i,o)=>{for(var s=o>1?void 0:o?c0(e,i):e,a=t.length-1,n;a>=0;a--)(n=t[a])&&(s=(o?n(e,i,s):n(s))||s);return o&&s&&l0(e,i,s),s};import{AgCharts as Tl,VERSION as h0,_Scene as p0,_Theme as d0,_Util as u0,setupCommunityModules as g0}from"ag-charts-community";var f0=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],o=t[1],s=t[2],a=t[3];i=this.ff(i,o,s,a,e[0],7,-680876936),a=this.ff(a,i,o,s,e[1],12,-389564586),s=this.ff(s,a,i,o,e[2],17,606105819),o=this.ff(o,s,a,i,e[3],22,-1044525330),i=this.ff(i,o,s,a,e[4],7,-176418897),a=this.ff(a,i,o,s,e[5],12,1200080426),s=this.ff(s,a,i,o,e[6],17,-1473231341),o=this.ff(o,s,a,i,e[7],22,-45705983),i=this.ff(i,o,s,a,e[8],7,1770035416),a=this.ff(a,i,o,s,e[9],12,-1958414417),s=this.ff(s,a,i,o,e[10],17,-42063),o=this.ff(o,s,a,i,e[11],22,-1990404162),i=this.ff(i,o,s,a,e[12],7,1804603682),a=this.ff(a,i,o,s,e[13],12,-40341101),s=this.ff(s,a,i,o,e[14],17,-1502002290),o=this.ff(o,s,a,i,e[15],22,1236535329),i=this.gg(i,o,s,a,e[1],5,-165796510),a=this.gg(a,i,o,s,e[6],9,-1069501632),s=this.gg(s,a,i,o,e[11],14,643717713),o=this.gg(o,s,a,i,e[0],20,-373897302),i=this.gg(i,o,s,a,e[5],5,-701558691),a=this.gg(a,i,o,s,e[10],9,38016083),s=this.gg(s,a,i,o,e[15],14,-660478335),o=this.gg(o,s,a,i,e[4],20,-405537848),i=this.gg(i,o,s,a,e[9],5,568446438),a=this.gg(a,i,o,s,e[14],9,-1019803690),s=this.gg(s,a,i,o,e[3],14,-187363961),o=this.gg(o,s,a,i,e[8],20,1163531501),i=this.gg(i,o,s,a,e[13],5,-1444681467),a=this.gg(a,i,o,s,e[2],9,-51403784),s=this.gg(s,a,i,o,e[7],14,1735328473),o=this.gg(o,s,a,i,e[12],20,-1926607734),i=this.hh(i,o,s,a,e[5],4,-378558),a=this.hh(a,i,o,s,e[8],11,-2022574463),s=this.hh(s,a,i,o,e[11],16,1839030562),o=this.hh(o,s,a,i,e[14],23,-35309556),i=this.hh(i,o,s,a,e[1],4,-1530992060),a=this.hh(a,i,o,s,e[4],11,1272893353),s=this.hh(s,a,i,o,e[7],16,-155497632),o=this.hh(o,s,a,i,e[10],23,-1094730640),i=this.hh(i,o,s,a,e[13],4,681279174),a=this.hh(a,i,o,s,e[0],11,-358537222),s=this.hh(s,a,i,o,e[3],16,-722521979),o=this.hh(o,s,a,i,e[6],23,76029189),i=this.hh(i,o,s,a,e[9],4,-640364487),a=this.hh(a,i,o,s,e[12],11,-421815835),s=this.hh(s,a,i,o,e[15],16,530742520),o=this.hh(o,s,a,i,e[2],23,-995338651),i=this.ii(i,o,s,a,e[0],6,-198630844),a=this.ii(a,i,o,s,e[7],10,1126891415),s=this.ii(s,a,i,o,e[14],15,-1416354905),o=this.ii(o,s,a,i,e[5],21,-57434055),i=this.ii(i,o,s,a,e[12],6,1700485571),a=this.ii(a,i,o,s,e[3],10,-1894986606),s=this.ii(s,a,i,o,e[10],15,-1051523),o=this.ii(o,s,a,i,e[1],21,-2054922799),i=this.ii(i,o,s,a,e[8],6,1873313359),a=this.ii(a,i,o,s,e[15],10,-30611744),s=this.ii(s,a,i,o,e[6],15,-1560198380),o=this.ii(o,s,a,i,e[13],21,1309151649),i=this.ii(i,o,s,a,e[4],6,-145523070),a=this.ii(a,i,o,s,e[11],10,-1120210379),s=this.ii(s,a,i,o,e[2],15,718787259),o=this.ii(o,s,a,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(o,t[1]),t[2]=this.add32(s,t[2]),t[3]=this.add32(a,t[3])}cmn(t,e,i,o,s,a){return e=this.add32(this.add32(e,t),this.add32(o,a)),this.add32(e<<s|e>>>32-s,i)}ff(t,e,i,o,s,a,n){return this.cmn(e&i|~e&o,t,e,s,a,n)}gg(t,e,i,o,s,a,n){return this.cmn(e&o|i&~o,t,e,s,a,n)}hh(t,e,i,o,s,a,n){return this.cmn(e^i^o,t,e,s,a,n)}ii(t,e,i,o,s,a,n){return this.cmn(i^(e|~o),t,e,s,a,n)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let o;for(o=64;o<=t.length;o+=64)this.md5cycle(i,this.md5blk(t.substring(o-64,o)));t=t.substring(o-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<t.length;o++)s[o>>2]|=t.charCodeAt(o)<<(o%4<<3);if(s[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(i,s),o=0;o<16;o++)s[o]=0;return s[14]=e*8,this.md5cycle(i,s),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",o=0;for(;o<4;o++)i+=e[t>>o*8+4&15]+e[t>>o*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function rd(t){return t==null||t.length===0}var Al={"01":"GRID","02":"CHARTS","0102":"BOTH"},tm="https://www.ag-grid.com/charts/licensing/",ld=class $t{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new f0,this.md5.init()}validateLicense(){const e=this.getLicenseDetails($t.licenseKey,$t.gridContext),i=`AG ${e.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`;let o="";if(e.suppliedLicenseType==="BOTH"?o="AG Grid and AG Charts Enterprise":e.suppliedLicenseType==="GRID"?o="AG Grid Enterprise":e.suppliedLicenseType!==void 0&&(o="AG Charts Enterprise"),e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const s=$t.getChartsReleaseDate(),a=$t.formatDate(s);this.outputExpiredKey(e.expiry,a,o)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,o):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,o)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt($t.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const o=i.length-32,s=i.substring(o),a=i.substring(0,o),[n,r,l]=$t.extractBracketedInformation(i);return{md5:s,license:a,version:n,isTrial:r,type:l}}getLicenseDetails(e,i=!1){const o="CHARTS";if(rd(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:o};const s=$t.getChartsReleaseDate(),{md5:a,license:n,version:r,isTrial:l,type:c}=$t.extractLicenseComponents(e);let h=a===this.md5.md5(n)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,d,u,g=null,f=!1,y;function m(){d=g<new Date,u=void 0}if(h&&(g=$t.extractExpiry(n),h=!isNaN(g.getTime()),h))switch(u=s>g,r){case"legacy":case"2":{h=!1;break}case"3":rd(c)?h=!1:(y=c,c!==Al["02"]&&c!==Al["0102"]?(h=!1,f=!0):l&&m())}return h?{licenseKey:e,valid:h,expiry:$t.formatDate(g),expired:u,version:r,isTrial:l,trialExpired:d,invalidLicenseTypeForCombo:i?y!=="BOTH":void 0,incorrectLicenseType:f,currentLicenseType:o,suppliedLicenseType:y}:{licenseKey:e,valid:h,incorrectLicenseType:f,currentLicenseType:o,suppliedLicenseType:y}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!rd(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage??""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView??window;if(!e)return"localhost";const i=e.location,{hostname:o=""}=i;return o}isForceWatermark(){if(!this.document)return!1;const e=this.document?.defaultView??typeof window<"u"?window:void 0;if(!e)return!1;const{pathname:i}=e.location;return i?i.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){const e=this.getHostname();return/^((?:[\w-]+\.)?ag-grid\.com)$/.exec(e)!==null}isLocalhost(){const e=this.getHostname();return/^(?:127\.0\.0\.1|localhost)$/.exec(e)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=e.getDate(),s=e.getMonth(),a=e.getFullYear();return o+" "+i[s]+" "+a}static getChartsReleaseDate(){return new Date(parseInt($t.decode($t.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o="",s,a,n,r,l,c,h,d=0;const u=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;d<u.length;)r=i.indexOf(u.charAt(d++)),l=i.indexOf(u.charAt(d++)),c=i.indexOf(u.charAt(d++)),h=i.indexOf(u.charAt(d++)),s=r<<2|l>>4,a=(l&15)<<4|c>>2,n=(c&3)<<6|h,o=o+String.fromCharCode(s),c!=64&&(o=o+String.fromCharCode(a)),h!=64&&(o=o+String.fromCharCode(n));return o=$t.utf8_decode(o),o}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let o=0;o<e.length;o++){const s=e.charCodeAt(o);s<128?i+=String.fromCharCode(s):s>127&&s<2048?(i+=String.fromCharCode(s>>6|192),i+=String.fromCharCode(s&63|128)):(i+=String.fromCharCode(s>>12|224),i+=String.fromCharCode(s>>6&63|128),i+=String.fromCharCode(s&63|128))}return i}static setGridContext(e=!1){$t.gridContext=e}static setLicenseKey(e){$t.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(r=>r.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const o=i.filter(r=>r==="TRIAL").length===1,s=i.filter(r=>r.startsWith("v"))[0],a=s?s.replace("v",""):"legacy",n=Al[i.filter(r=>Al[r])[0]];return[a,o,n]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",o=""){console.error(e.padEnd(this.totalMessageLength-o.length,i)+o)}outputInvalidLicenseKey(e,i,o){$t.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${o} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${tm}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${tm}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,o){$t.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${o} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){$t.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,o){$t.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${o} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${o} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};ld.RELEASE_INFORMATION="MTc0MjgzMzc1OTQxMA==",ld.gridContext=!1;var Wa=ld;import{_ModuleSupport as Ha}from"ag-charts-community";import{_ModuleSupport as y0}from"ag-charts-community";import{isNumberEqual as em}from"ag-charts-core";function cd(t,e,i){const o=(a,n,r,l)=>{let c=t[0];for(let h=a;r>0?h<=n:h>n;h+=r){const d=t[h];if(l(c,d))return!0;c=d}return!1},s=Math.floor(t.length/2);return o(e,s,e,i)?!0:o(t.length-e,s,-e,i)}import{_ModuleSupport as m0}from"ag-charts-community";var{OR:x0,POSITIVE_NUMBER:S0,NAN:b0,AxisInterval:v0,TempValidate:D0}=m0,hd=class extends v0{};p([D0(x0(S0,b0))],hd.prototype,"minSpacing",2);import{_ModuleSupport as pd}from"ag-charts-community";import{countFractionDigits as M0,isNumberEqual as Ka}from"ag-charts-core";import{_ModuleSupport as im}from"ag-charts-community";import{isArray as k0,isNumberEqual as om}from"ag-charts-core";import{_ModuleSupport as O0}from"ag-charts-community";var{BaseProperties:sm,ChartAxisDirection:T0,ARRAY:A0,BOOLEAN:dd,COLOR_STRING:ud,FONT_STYLE:I0,FONT_WEIGHT:N0,LINE_DASH:C0,NUMBER:am,OBJECT:L0,POSITIVE_NUMBER:R0,RATIO:nm,STRING:rm,UNION:lm,AND:w0,COLOR_STRING_ARRAY:P0,TempValidate:Ct,MATCHING_CROSSLINE_TYPE:cm,createId:E0,Group:gd}=O0,Ii=class extends sm{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};p([Ct(dd,{optional:!0})],Ii.prototype,"enabled",2),p([Ct(rm,{optional:!0})],Ii.prototype,"text",2),p([Ct(I0,{optional:!0})],Ii.prototype,"fontStyle",2),p([Ct(N0,{optional:!0})],Ii.prototype,"fontWeight",2),p([Ct(R0)],Ii.prototype,"fontSize",2),p([Ct(rm)],Ii.prototype,"fontFamily",2),p([Ct(am)],Ii.prototype,"padding",2),p([Ct(ud,{optional:!0})],Ii.prototype,"color",2),p([Ct(dd,{optional:!0})],Ii.prototype,"parallel",2);var De=class extends sm{constructor(){super(...arguments),this.id=E0(this),this.defaultColorRange=[],this.shape="polygon",this.label=new Ii,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=T0.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new gd({name:this.id}),this.rangeGroup=new gd({name:this.id}),this.labelGroup=new gd({name:this.id}),this._isRange=void 0}assignCrossLineGroup(t,e){t!==this._isRange&&(t?this.rangeGroup.appendChild(e):this.lineGroup.appendChild(e)),this._isRange=t}setSectorNodeProps(t){t.fill=this.fill,t.fillOpacity=this.fillOpacity??1,t.stroke=this.stroke,t.strokeOpacity=this.strokeOpacity??1,t.strokeWidth=this.strokeWidth??1,t.lineDash=this.lineDash}setLabelNodeProps(t,e,i,o,s){const{label:a}=this;t.x=e,t.y=i,t.text=a.text,t.textAlign="center",t.textBaseline=o,t.rotation=s,t.rotationCenterX=e,t.rotationCenterY=i,t.fill=a.color,t.fontFamily=a.fontFamily,t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.visible=!0}};p([Ct(dd,{optional:!0})],De.prototype,"enabled",2),p([Ct(lm(["range","line"],"a crossLine type"))],De.prototype,"type",2),p([Ct(w0(cm("range"),A0.restrict({length:2})),{optional:!0})],De.prototype,"range",2),p([Ct(cm("value"),{optional:!0})],De.prototype,"value",2),p([Ct(P0)],De.prototype,"defaultColorRange",2),p([Ct(ud,{optional:!0})],De.prototype,"fill",2),p([Ct(nm,{optional:!0})],De.prototype,"fillOpacity",2),p([Ct(ud,{optional:!0})],De.prototype,"stroke",2),p([Ct(am,{optional:!0})],De.prototype,"strokeWidth",2),p([Ct(nm,{optional:!0})],De.prototype,"strokeOpacity",2),p([Ct(C0,{optional:!0})],De.prototype,"lineDash",2),p([Ct(lm(["polygon","circle"],"a shape"))],De.prototype,"shape",2),p([Ct(L0)],De.prototype,"label",2);var{ChartAxisDirection:_0,getCrossLineValue:hm,validateCrossLineValue:B0,normalizeAngle360:fd,Group:z0,Path:pm,Sector:F0,RotatableText:V0,ContinuousScale:G0}=im,yd=class extends De{constructor(){super(),this.direction=_0.X,this.polygonNode=new pm,this.sectorNode=new F0,this.lineNode=new pm,this.crossLineRange=new z0,this.labelNode=new V0,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!G0.is(this.scale))return!0;const[t,e]=this.scale.domain,i=hm(this);if(k0(i)){const[o,s]=i;return o>=t&&o<=e&&s>=o&&s<=e}else return i>=t&&i<=e}update(t){const{scale:e}=this;if(!e||!this.isValid()||!B0(hm(this),e)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updateLineNode(t),this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t)}updateLineNode(t){const{scale:e,type:i,value:o,lineNode:s}=this;if(!t||i!=="line"||!e){s.visible=!1;return}const a=e.convert(o);if(isNaN(a)){s.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:r}=this;s.visible=!0,s.stroke=this.stroke,s.strokeOpacity=this.strokeOpacity??1,s.strokeWidth=this.strokeWidth??1,s.fill=void 0,s.lineDash=this.lineDash;const l=r*Math.cos(a),c=r*Math.sin(a),h=n*Math.cos(a),d=n*Math.sin(a);s.path.clear(!0),s.path.moveTo(h,d),s.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(t){const{polygonNode:e,range:i,scale:o,shape:s,type:a,ticks:n}=this;if(!t||a!=="range"||s!=="polygon"||!o||!i){e.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:l}=this,c=n.indexOf(i[0]),h=n.indexOf(i[1]),u=(c<=h?n.slice(c,h+1):n.slice(c).concat(n.slice(0,h+1))).map(f=>o.convert(f));e.visible=!0,this.setSectorNodeProps(e);const{path:g}=e;g.clear(!0),u.forEach((f,y)=>{const m=l*Math.cos(f),x=l*Math.sin(f);y===0?g.moveTo(m,x):g.lineTo(m,x)}),r===0?g.lineTo(0,0):u.slice().reverse().forEach(f=>{const y=r*Math.cos(f),m=r*Math.sin(f);g.lineTo(y,m)}),e.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(t){const{sectorNode:e,range:i,scale:o,shape:s,type:a}=this;if(!t||a!=="range"||s!=="circle"||!o||!i){e.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:r}=this,l=i.map(d=>o.convert(d)),c=o.step??0,h=o instanceof im.BandScale?c/2:0;e.visible=!0,this.setSectorNodeProps(e),e.centerX=0,e.centerY=0,e.innerRadius=n,e.outerRadius=r,e.startAngle=l[0]-h,e.endAngle=l[1]+h,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(t){const{label:e,labelNode:i,range:o,scale:s,type:a,ticks:n}=this;if(!t||e.enabled===!1||!e.text||!s||a==="range"&&!o){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:r,axisOuterRadius:l}=this;let c,h,d,u;if(a==="line"){const g=fd(s.convert(this.value)),f=1.5*Math.PI,y=om(g,f)||g>f||g<Math.PI/2,m=(r+l)/2*Math.cos(g),x=(r+l)/2*Math.sin(g);c=m+e.padding*Math.cos(g+Math.PI/2),h=x+e.padding*Math.sin(g+Math.PI/2),u=y?"top":"bottom",d=y?g:g-Math.PI}else{const[g,f]=o.map(v=>fd(s.convert(v)));let y=(g+f)/2;g>f&&(y-=Math.PI),y=fd(y);const m=(om(y,0)||y>0)&&y<Math.PI;let x;this.shape==="circle"||n.length<3?x=l-e.padding:x=l*Math.cos(Math.PI/n.length)-e.padding,c=x*Math.cos(y),h=x*Math.sin(y),u=m?"bottom":"top",d=m?y-Math.PI/2:y+Math.PI/2}this.setLabelNodeProps(i,c,h,u,d)}};yd.className="AngleCrossLine";var{ChartAxisDirection:W0,NUMBER:dm,UNION:H0,ProxyOnWrite:K0,TextWrapper:U0,TextUtils:Y0,TempValidate:md,toRadians:Il,normalizeAngle360:Ua,normalizeAngle360Inclusive:j0,Path:$0,RotatableText:X0,Transformable:Z0,BBox:q0}=pd,xd=class extends pd.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};p([md(H0(["fixed","parallel","perpendicular"],"a label orientation"))],xd.prototype,"orientation",2);var jn=class extends pd.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new $0),this.includeInvisibleDomains=!0}get direction(){return W0.X}createLabel(){return new xd}calculateTickLayout(t){const{nice:e,scale:i}=this,o={nice:e,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},s=e?i.niceDomain(o,t):t,a=this.generateAngleTicks(s);this.tickData=a;const n=a.map(l=>l.value),r=n.reduce((l,c)=>Math.max(typeof c=="number"?M0(c):0,l),0);return{niceDomain:s,primaryTickCount:void 0,tickDomain:s,ticks:n,fractionDigits:r,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine()}normalizedAngles(){const t=Ua(-Math.PI/2+Il(this.startAngle)),e=this.endAngle!=null?j0(Il(this.endAngle)-Il(this.startAngle)):2*Math.PI,i=t+e;return[t,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const t=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?t:[]),this.tickLineGroupSelection.update(this.tick.enabled?t:[]),this.tickLabelGroupSelection.update(this.label.enabled?t:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){const{translation:t,axisGroup:e,gridGroup:i,crossLineRangeGroup:o,crossLineLineGroup:s,crossLineLabelGroup:a}=this,n=Math.floor(t.x),r=Math.floor(t.y);e.translationX=n,e.translationY=r,i.translationX=n,i.translationY=r,o.translationX=n,o.translationY=r,s.translationX=n,s.translationY=r,a.translationX=n,a.translationY=r}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear(!0);const{points:i,closePath:o}=this.getAxisLinePoints();i.forEach(({x:s,y:a,moveTo:n,arc:r,radius:l=0,startAngle:c=0,endAngle:h=0})=>{r?e.arc(s,a,l,c,h):n?e.moveTo(s,a):e.lineTo(s,a)}),o&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.stroke,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){const{scale:t,shape:e,gridLength:i}=this,[o,s]=this.range,a=Ka(s-o,2*Math.PI),n=[];if(e==="circle")a?n.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):n.push({x:i*Math.cos(o),y:i*Math.sin(o),moveTo:!0},{x:0,y:0,radius:i,startAngle:Ua(o),endAngle:Ua(s),arc:!0,moveTo:!1});else if(e==="polygon"){const r=t.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.map(l=>t.convert(l));r&&r.length>2&&r.forEach((l,c)=>{const h=i*Math.cos(l),d=i*Math.sin(l),u=c===0;n.push({x:h,y:d,moveTo:u})})}return{points:n,closePath:a}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{style:i,width:o},innerRadiusRatio:s}=this;if(!(i&&e>0))return;const a=e*s,n=i.length;this.gridLineGroupSelection.each((r,l,c)=>{const{value:h}=l,{stroke:d,lineDash:u}=i[c%n],g=t.convert(h);r.x1=a*Math.cos(g),r.y1=a*Math.sin(g),r.x2=e*Math.cos(g),r.y2=e*Math.sin(g),r.stroke=d,r.strokeWidth=o,r.lineDash=u,r.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this;e.each((i,o,s)=>{const a=this.labelData[s];if(!a||a.hidden){i.visible=!1;return}i.text=a.text,i.setFont(t),i.fill=t.color,i.x=a.x,i.y=a.y,i.textAlign=a.textAlign,i.textBaseline=a.textBaseline,i.visible=!0,a.rotation?(i.rotation=a.rotation,i.rotationCenterX=a.x,i.rotationCenterY=a.y):i.rotation=0})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:o}=this;o.each((s,a)=>{const{value:n}=a,r=t.convert(n),l=Math.cos(r),c=Math.sin(r);s.x1=e*l,s.y1=e*c,s.x2=(e+i.size)*l,s.y2=(e+i.size)*c,s.stroke=i.stroke,s.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:o,gridLength:s,scale:a,tick:n}=this;if(!o.enabled)return[];const r=new X0,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,h=t.map((d,u)=>{const{value:g}=d,f=s+o.spacing+n.size,y=a.convert(g),m=Math.cos(y),x=Math.sin(y),v=f*m,S=f*x,{textAlign:b,textBaseline:D}=this.getLabelAlign(y),I=u===t.length-1&&g!==t[0]&&Ka(Ua(y),Ua(a.convert(t[0]))),M=this.getLabelRotation(y);let k=this.formatTick(g,u,a.domain);r.text=k,r.x=v,r.y=S,r.setFont(o),r.textAlign=b,r.textBaseline=D,r.rotation=M,M&&(r.rotationCenterX=v,r.rotationCenterY=S);let A=M?Z0.toCanvas(r):r.getBBox();if(A&&e.hideWhenNecessary&&!M){const O=l-A.x,N=A.x+A.width-c,T=1;if(O>T||N>T){const L=A.width-Math.max(O,N);k=U0.wrapText(k,{maxWidth:L,font:o,textWrap:"never"}),k===Y0.EllipsisChar&&(k=""),r.text=k,A=r.getBBox()}}return{text:k,x:v,y:S,textAlign:b,textBaseline:D,hidden:k===""||d.hidden||I,rotation:M,box:A}});return o.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(t,e){this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:o})=>o).filter(o=>o!=null);return!this.label.enabled||i.length===0?null:q0.merge(i)}getLabelOrientation(){const{label:t}=this;return t instanceof xd?t.orientation:"fixed"}getLabelRotation(t){let e=Il(this.label.rotation??0);t=Ua(t);const i=this.getLabelOrientation();return i==="parallel"?(e+=t,t>=0&&t<Math.PI?e-=Math.PI/2:e+=Math.PI/2):i==="perpendicular"&&(e+=t,t>=Math.PI/2&&t<1.5*Math.PI&&(e+=Math.PI)),e}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let o,s;const a=this.getLabelOrientation(),n=Ka(e,0),r=Ka(i,0),l=Ka(e,1),c=Ka(i,-1),h=e>0&&!n,d=i>0&&!r;return a==="parallel"?(o="center",s=l&&r||d?"top":"bottom"):a==="perpendicular"?(o=c||h?"left":"right",s="middle"):(o="right",n?o="center":h&&(o="left"),s="bottom",r?s="middle":d&&(s="top")),{textAlign:o,textBaseline:s}}updateCrossLines(){const{shape:t,gridLength:e,innerRadiusRatio:i}=this;this.crossLines.forEach(o=>{o instanceof yd&&(o.ticks=this.tickData.map(s=>s.value),o.shape=t,o.axisOuterRadius=e,o.axisInnerRadius=e*i)}),super.updateCrossLines()}};jn.CrossLineConstructor=yd,p([K0("rotation"),md(dm)],jn.prototype,"startAngle",2),p([md(dm,{optional:!0})],jn.prototype,"endAngle",2);var{RATIO:um,OBJECT:Q0,TempValidate:Sd,CategoryScale:J0}=y0,$o=class extends jn{constructor(t){super(t,new J0),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new hd}generateAngleTicks(){const{scale:t,gridLength:e}=this,{values:i,minSpacing:o}=this.interval,s=i??t.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})??[];if(s.length<2||o==null)return s.map(c=>({value:c,visible:!0}));const a=s[0],n=t.convert(a),r=e*Math.cos(n),l=e*Math.sin(n);for(let c=1;c<s.length-1;c++){const h=s[c],d=t.convert(h);if(d-n>Math.PI)break;const u=e*Math.cos(d),g=e*Math.sin(d);if(Math.sqrt((u-r)**2+(g-l)**2)>o){const y=new Set([a]);return cd(s,c,(m,x)=>{y.add(x)}),s.map(m=>{const x=y.has(m);return{value:m,visible:x}})}}return[{value:a,visible:!0}]}avoidLabelCollisions(t){const{minSpacing:e}=this.label;if(t.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(e==null)return l.box.collidesBBox(c.box);const h=l.box.clone().grow(e/2),d=c.box.clone().grow(e/2);return h.collidesBBox(d)},o=t[0],s=t.at(-1),a=new Set([o]),n=em(o.x,s.x)&&em(o.y,s.y),r=Math.floor(t.length/2);for(let l=1;l<=r;l++){const c=n?t.slice(0,-1):t;if(!cd(c,l,i)){cd(c,l,(d,u)=>{a.add(u)});break}}t.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};$o.className="AngleCategoryAxis",$o.type="angle-category",p([Sd(um)],$o.prototype,"groupPaddingInner",2),p([Sd(um)],$o.prototype,"paddingInner",2),p([Sd(Q0)],$o.prototype,"interval",2);var t2={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",moduleFactory:t=>new $o(t)};import{_ModuleSupport as e2}from"ag-charts-community";import{isNumberEqual as gm}from"ag-charts-core";import{_ModuleSupport as i2}from"ag-charts-community";import{isNumberEqual as o2}from"ag-charts-core";var{range:fm,isDenseInterval:s2,LinearScale:bd}=i2,ym=class Qy extends bd{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(e,i){const[o,s]=i;let a=bd.getTickStep(o,s,e);const n=isNaN(e.maxTickCount)?1/0:e.maxTickCount,r=Math.abs(s-o)/a;let l=Math.pow(2,Math.ceil(Math.log(r)/Math.log(2)));return l>n&&(l/=2,a*=2),{count:l,step:a}}ticks(e,i=this.domain){const{arcLength:o}=this;if(!i||i.length<2||i.some(c=>!isFinite(c))||o<=0)return[];const{nice:s,interval:a}=e,[n,r]=i;if(a){const c=Math.abs(a),h=this.getPixelRange();if(!s2((r-n)/c,h))return fm(n,r,c)}let l;if(s&&this.hasNiceRange()){const c=super.niceDomain(e,i);l=Qy.getNiceStepAndTickCount(e,c).step}else l=bd.getTickStep(n,r,e);return fm(n,r,l)}hasNiceRange(){const e=this.range.slice().sort((o,s)=>o-s);return[Math.PI,2*Math.PI].some(o=>o2(o,e[1]-e[0]))}niceDomain(e,i=this.domain){const o=super.niceDomain(e,i);if(!this.hasNiceRange())return o;const s=o[0]>o[1],a=s?o[1]:o[0],{step:n,count:r}=Qy.getNiceStepAndTickCount(e,o),l=1/n,c=n>=1?Math.ceil(a/n+r)*n:Math.ceil((a+r*n)*l)/l;return s?[c,a]:[a,c]}getPixelRange(){return this.arcLength}},{AND:mm,GREATER_THAN:a2,LESS_THAN:n2,NUMBER_OR_NAN:xm,OBJECT:r2,TempValidate:vd,angleBetween:l2,normalisedExtentWithMetadata:c2,findMinMax:h2}=e2,Ps=class extends jn{constructor(t){super(t,new ym),this.shape="circle",this.interval=new hd}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=c2(t,e,i);return{domain:o,clipped:s}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),o=l2(e,i)||2*Math.PI,s=this.gridLength;return o*s}generateAngleTicks(t){const{scale:e,range:i,nice:o}=this,{values:s,step:a,minSpacing:n,maxSpacing:r}=this.interval;let l;if(s==null){const{arcLength:c}=e,h=r?Math.floor(c/r):1,d=n?Math.floor(c/n):1/0,u=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),g=Math.max(h,Math.min(d,u)),f={nice:o,interval:a,tickCount:g,minTickCount:h,maxTickCount:d};l=e.ticks(f,t)}else{const[c,h]=h2(t.map(Number));l=s.filter(d=>d>=c&&d<=h).sort((d,u)=>d-u)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(t){const{minSpacing:e}=this.label,i=(a,n)=>{if(a.hidden||n.hidden)return!1;if(e==null)return a.box.collidesBBox(n.box);const r=a.box.clone().grow(e/2),l=n.box.clone().grow(e/2);return r.collidesBBox(l)},o=t[0],s=t.at(-1);o!==s&&gm(o.x,s.x)&&gm(o.y,s.y)&&(s.hidden=!0);for(let a=1;a<t.length;a*=2){let n=!1;for(let r=a;r<t.length;r+=a){const l=t[r],c=t[r-a];if(i(c,l)){n=!0;break}}if(!n){t.forEach((r,l)=>{l%a>0&&(r.hidden=!0,r.box=void 0)});return}}t.forEach((a,n)=>{n>0&&(a.hidden=!0,a.box=void 0)})}};Ps.className="AngleNumberAxis",Ps.type="angle-number",p([vd(mm(xm,n2("max")),{optional:!0})],Ps.prototype,"min",2),p([vd(mm(xm,a2("min")),{optional:!0})],Ps.prototype,"max",2),p([vd(r2)],Ps.prototype,"interval",2);var p2={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",moduleFactory:t=>new Ps(t)};import{_ModuleSupport as Sm}from"ag-charts-community";var{OrdinalTimeScale:d2}=Sm,Nl=class extends Sm.CategoryAxis{constructor(t){super(t,new d2)}};Nl.className="OrdinalTimeAxis",Nl.type="ordinal-time";var u2={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",moduleFactory:t=>new Nl(t)};import{_ModuleSupport as g2}from"ag-charts-community";import{_ModuleSupport as Cl}from"ag-charts-community";import{isNumberEqual as f2}from"ag-charts-core";import{_ModuleSupport as bm}from"ag-charts-community";import{clamp as vm,isNumberEqual as y2}from"ag-charts-core";var{ChartAxisDirection:m2,TempValidate:x2,NUMBER:S2,getCrossLineValue:b2,validateCrossLineValue:v2,normalizeAngle360:D2,toRadians:M2,Group:k2,Path:O2,Sector:T2,RotatableText:A2}=bm,Dm=class extends Ii{constructor(){super(...arguments),this.positionAngle=void 0}};p([x2(S2,{optional:!0})],Dm.prototype,"positionAngle",2);var Dd=class extends De{constructor(){super(),this.direction=m2.Y,this.label=new Dm,this.polygonNode=new O2,this.sectorNode=new T2,this.crossLineRange=new k2,this.labelNode=new A2,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e}=this;if(!e||!this.isValid()||!v2(b2(this),e)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:o}=this;t&&(t=i>=this.axisInnerRadius&&o<=this.axisOuterRadius),this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:t,scale:e,type:i,axisInnerRadius:o,axisOuterRadius:s}=this;if(!e)return{innerRadius:0,outerRadius:0};const a=l=>s+o-l;let n,r;if(i==="line")n=a(e.convert(this.value)),r=n;else{const l=Math.abs(e?.bandwidth??0),c=t.map(h=>e.convert(h));n=a(Math.max(...c)),r=a(Math.min(...c))+l}this.outerRadius=n,this.innerRadius=r}drawPolygon(t,e,i){e.forEach((o,s)=>{const a=t*Math.cos(o),n=t*Math.sin(o);s===0?i.path.moveTo(a,n):i.path.lineTo(a,n)}),i.path.closePath()}updatePolygonNode(t){const{gridAngles:e,polygonNode:i,scale:o,shape:s,type:a,innerRadius:n,outerRadius:r}=this;if(!t||s!=="polygon"||!o||!e){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(r-l,e,i);const c=e.slice().reverse(),h=a==="line"?r-l:n+l;this.drawPolygon(h,c,i),this.setSectorNodeProps(i)}updateSectorNode(t){const{axisInnerRadius:e,axisOuterRadius:i,scale:o,sectorNode:s,shape:a,innerRadius:n,outerRadius:r}=this;if(!t||a!=="circle"||!o){s.visible=!1;return}s.visible=!0,s.startAngle=0,s.endAngle=2*Math.PI;const l=this.getPadding(),c=vm(e,n+l,i),h=vm(e,r-l,i);s.innerRadius=Math.min(c,h),s.outerRadius=Math.max(c,h),this.setSectorNodeProps(s)}updateLabelNode(t){const{innerRadius:e,label:i,labelNode:o,scale:s,shape:a,type:n}=this;if(!t||i.enabled===!1||!i.text||!s){o.visible=!1;return}const r=D2(M2((i.positionAngle??0)-90)),l=(y2(r,0)||r>0)&&r<Math.PI,c=l?r-Math.PI/2:r+Math.PI/2;let h;const d=this.gridAngles??[];n==="line"?h=e+i.padding:a==="circle"||d.length<3?h=e-i.padding:h=e*Math.cos(Math.PI/d.length)-i.padding;const u=h*Math.cos(r),g=h*Math.sin(r);let f;n==="line"?f=l?"top":"bottom":f=l?"bottom":"top",this.setLabelNodeProps(o,u,g,f,c)}getPadding(){const{scale:t}=this;if(!t)return 0;const e=Math.abs(t.bandwidth??0),i=Math.abs(t.step??0);return t instanceof bm.BandScale?(i-e)/2:0}};Dd.className="RadiusCrossLine";var{ChartAxisDirection:I2,ZIndexMap:N2,NUMBER:Mm,BOOLEAN:C2,TempValidate:Md,normalizeAngle360:km,toRadians:L2,Caption:R2,Group:w2,Path:P2,Line:E2,Selection:_2,AxisTickGenerator:B2,AxisGroupZIndexMap:z2}=Cl,kd=class extends Cl.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};p([Md(C2,{optional:!0})],kd.prototype,"autoRotate",2),p([Md(Mm)],kd.prototype,"autoRotateAngle",2);var Ll=class extends Cl.PolarAxis{constructor(t,e){super(t,e),this.positionAngle=0,this.tickGenerator=new B2(this),this.generatedTicks=void 0,this.lineNode=this.axisGroup.appendChild(new E2({name:`${this.id}-Axis-line`,zIndex:z2.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new w2({name:`${this.id}-gridPaths`,zIndex:N2.AXIS_GRID})),this.gridPathSelection=_2.select(this.gridPathGroup,P2),this.axisGroup.appendChild(this.title.caption.node),this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return I2.Y}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:o}=this,s=t*o,a=L2(i);return{translationX:e.x,translationY:e.y-t-s,rotation:a,rotationCenterX:0,rotationCenterY:t+s}}update(){super.update(),this.updateTitle();const{enabled:t,stroke:e,width:i}=this.line;this.lineNode.setProperties({stroke:e,strokeWidth:t?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}calculateTickLayout(t,e,i,o){const{parallelFlipRotation:s,regularFlipRotation:a}=this.calculateRotations(),n=[0,1],r=this.label.getSideFlag(),l=r*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),c=this.tickGenerator.generateTicks({domain:t,niceMode:e,visibleRange:n,primaryTickCount:o,parallelFlipRotation:s,regularFlipRotation:a,labelX:l,sideFlag:r}),{tickData:h,primaryTickCount:d=o}=c,{ticks:u,rawTicks:g,tickDomain:f,fractionDigits:y,niceDomain:m=t}=h,x=u.map(v=>this.getTickLabelProps(v,c));return this.generatedTicks={ticks:u,labels:x},{ticks:g,tickDomain:f,niceDomain:m,primaryTickCount:d,fractionDigits:y}}updateSelections(){const{generatedTicks:t}=this;if(!t)return;const{ticks:e,labels:i}=t;this.gridLineGroupSelection.update(this.gridLength?e:[]),this.tickLineGroupSelection.update(e),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(e):[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const t=Cl.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((e,i)=>{e.fill=i.fill,e.fontFamily=i.fontFamily,e.fontSize=i.fontSize,e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.text=i.text,e.textBaseline=i.textBaseline,e.textAlign=i.textAlign??"center",e.setProperties(t(e,i))})}updateGridLines(){super.updateGridLines();const{gridLine:{style:t,width:e},shape:i,generatedTicks:o}=this;if(!t||!o)return;const s=t.length,a=(u,g)=>{const{stroke:f,lineDash:y}=t[g%s];u.stroke=f,u.strokeWidth=e,u.lineDash=y,u.fill=void 0},[n,r]=this.gridRange??[0,2*Math.PI],l=f2(r-n,2*Math.PI),d=i==="circle"?(u,g)=>{const{path:f}=u;f.clear(!0);const y=this.getTickRadius(g);l?(f.moveTo(y,0),f.arc(0,0,y,0,2*Math.PI)):(f.moveTo(y*Math.cos(n),y*Math.sin(n)),f.arc(0,0,y,km(n),km(r))),l&&f.closePath()}:(u,g)=>{const{path:f}=u,y=this.gridAngles;if(f.clear(!0),!y||y.length<3)return;const m=this.getTickRadius(g);y.forEach((x,v)=>{const S=m*Math.cos(x),b=m*Math.sin(x);v===0?f.moveTo(S,b):f.lineTo(S,b),y.forEach((D,I)=>{const M=m*Math.cos(D),k=m*Math.sin(D);I===0?f.moveTo(M,k):f.lineTo(M,k)}),f.closePath()}),f.closePath()};this.gridPathSelection.each((u,g,f)=>{a(u,f),d(u,g)})}updateTitle(){const t=r=>r.defaultValue,{title:e,range:i,moduleCtx:{callbackCache:o}}=this,{formatter:s=t}=this.title;e.caption.enabled=e.enabled,e.caption.fontFamily=e.fontFamily,e.caption.fontSize=e.fontSize,e.caption.fontStyle=e.fontStyle,e.caption.fontWeight=e.fontWeight,e.caption.color=e.color,e.caption.wrapping=e.wrapping;let a=!1;const n=e.caption.node;e.enabled&&(a=!0,n.rotation=Math.PI/2,n.x=Math.floor((i[0]+i[1])/2),n.y=-R2.SMALL_PADDING,n.textAlign="center",n.textBaseline="bottom",n.text=o.call(this,s,this.getTitleFormatterParams(this.scale.domain))),n.visible=a}updateCrossLines(){this.crossLines.forEach(t=>{if(t instanceof Dd){const{shape:e,gridAngles:i,range:o,innerRadiusRatio:s}=this,a=o[0];t.shape=e,t.gridAngles=i,t.axisOuterRadius=a,t.axisInnerRadius=a*s}}),super.updateCrossLines()}createLabel(){return new kd}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:o,textBaseline:s,textAlign:a}=e,n=this.scale.range,r=t.tickLabel,c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),h=r!==""&&r!=null;return{...this.getLabelStyles({value:t.tickLabel}),tickId:t.tickId,rotation:o,rotationCenterX:c,translationY:t.translationY,text:r,textAlign:a,textBaseline:s,visible:h,x:c,y:0,range:n}}};Ll.CrossLineConstructor=Dd,p([Md(Mm)],Ll.prototype,"positionAngle",2);var{RATIO:Od,ProxyPropertyOnWrite:Om,TempValidate:Td,CategoryScale:Tm}=g2,Xo=class extends Ll{constructor(t){super(t,new Tm),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}normaliseDataDomain(t){return{domain:t,clipped:!1}}prepareGridPathTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e,innerRadiusRatio:i}=this,o=e.range[0],s=o*i;if(Tm.is(e)){const a=e.domain,n=a.length-1-a.indexOf(t.tick);return n===0?s:e.inset+e.step*(n-.5)+e.bandwidth/2}else{const a=(o-s)/e.domain.length;return o-t.translationY+s-a/2}}};Xo.className="RadiusCategoryAxis",Xo.type="radius-category",p([Td(Od)],Xo.prototype,"groupPaddingInner",2),p([Om("scale","paddingInner"),Td(Od)],Xo.prototype,"paddingInner",2),p([Om("scale","paddingOuter"),Td(Od)],Xo.prototype,"paddingOuter",2);var F2={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",moduleFactory:t=>new Xo(t)};import{_ModuleSupport as V2}from"ag-charts-community";var{AND:Am,GREATER_THAN:G2,LESS_THAN:W2,NUMBER_OR_NAN:Im,TempValidate:Nm,normalisedExtentWithMetadata:H2,LinearScale:K2}=V2,Ya=class extends Ll{constructor(t){super(t,new K2),this.shape="polygon"}prepareGridPathTickData(t){const{scale:e}=this,i=e.domain[1];return t.filter(({tick:o})=>o!==i).sort((o,s)=>s.tick-o.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],o=i*this.innerRadiusRatio;return i-t.translationY+o}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=H2(t,e,i);return{domain:o,clipped:s}}};Ya.className="RadiusNumberAxis",Ya.type="radius-number",p([Nm(Am(Im,W2("max")),{optional:!0})],Ya.prototype,"min",2),p([Nm(Am(Im,G2("min")),{optional:!0})],Ya.prototype,"max",2);var U2={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",moduleFactory:t=>new Ya(t)};import{_ModuleSupport as Cm}from"ag-charts-community";var{BOOLEAN:Y2,POSITIVE_NUMBER:j2,ObserveChanges:Lm,TempValidate:Rm}=Cm,Ad=class extends Cm.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,t.animationManager.skip(!1),this.destroyFns.push(()=>{t.animationManager.skip(!0)})}};p([Lm((t,e)=>{t.ctx.animationManager.skip(!e)}),Rm(Y2)],Ad.prototype,"enabled",2),p([Lm((t,e)=>{t.ctx.animationManager.defaultDuration=e}),Rm(j2,{optional:!0})],Ad.prototype,"duration",2);var $2={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Ad(t),themeTemplate:{animation:{enabled:!0}}};import{_ModuleSupport as Rl}from"ag-charts-community";import{isValidDate as Id}from"ag-charts-core";import{_ModuleSupport as wl}from"ag-charts-community";var X2='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>',{focusCursorAtEnd:Z2}=wl,wm="text-input",Pm="canvas-overlay",q2=class extends wl.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1,this.element=t.domManager.addChild(Pm,wm),this.element.classList.add("ag-charts-text-input"),this.destroyFns.push(()=>t.domManager.removeChild(Pm,wm))}setKeyDownHandler(t){this.element.addEventListener("keydown",t),this.destroyFns.push(()=>this.element.removeEventListener("keydown",t))}show(t){this.element.innerHTML=X2;const e=this.element.firstElementChild;wl.setAttribute(e,"data-preventdefault",!1),e.isContentEditable||(e.contentEditable="true"),e.setAttribute("placeholder",this.ctx.localeManager.t(t.placeholderText??"inputTextareaPlaceholder")),t.styles?.placeholderColor&&e.style.setProperty("--placeholder-text-color",t.styles?.placeholderColor),e.innerText=t.text??"",e.style.color=t.styles?.color??"inherit",e.style.fontFamily=t.styles?.fontFamily??"inherit",e.style.fontSize=t.styles?.fontSize?`${t.styles.fontSize}px`:"inherit",e.style.fontStyle=t.styles?.fontStyle??"inherit",e.style.fontWeight=typeof t.styles?.fontWeight=="number"?`${t.styles.fontWeight}`:t.styles?.fontWeight??"inherit",Z2(e),e.addEventListener("input",()=>{this.updatePosition(),t.onChange?.(this.getValue(),this.getBBox())}),e.addEventListener("click",i=>{i.stopPropagation()}),t.layout&&(this.layout=t.layout,this.updatePosition()),t.onChange?.(this.getValue(),this.getBBox()),this.visible=!0}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1}isVisible(){return this.visible}updateColor(t){this.element.firstElementChild&&(this.element.firstElementChild.style.color=t)}updateFontSize(t){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize=`${t}px`,this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:t}=this,e=t.firstElementChild;if(!e)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:o,getTextInputCoords:s,getTextPosition:a,alignment:n,textAlign:r}=this.layout;t.style.setProperty("width",o?`${o}px`:"unset");const l=e.getBoundingClientRect(),c=s(l.height);let h=c.x;n==="center"?h-=(o??l.width)/2:n==="right"&&(h-=o??l.width);const d=a();let u=c.y;d==="center"?u-=l.height/2:d==="bottom"&&(u-=l.height),t.style.setProperty("top",`${u}px`),t.style.setProperty("left",`${h}px`),t.style.setProperty("max-width",`${i.width-h}px`),t.style.setProperty("text-align",n),e.style.setProperty("text-align",r)}getBBox(){const{left:t,top:e,width:i,height:o}=this.element.getBoundingClientRect();return new wl.BBox(t,e,i,o)}};import{_ModuleSupport as Q2}from"ag-charts-community";var{BOOLEAN:J2,BaseProperties:tI,TempValidate:Em,UNION:eI}=Q2,iI=eI(["x","y","xy"],"an axis type"),Nd=class extends tI{constructor(){super(...arguments),this.enabled=!1,this.axes="y"}};p([Em(J2)],Nd.prototype,"enabled",2),p([Em(iI,{optional:!0})],Nd.prototype,"axes",2);import{_ModuleSupport as oI}from"ag-charts-community";var Cd=(t=>(t.Line="line",t.HorizontalLine="horizontal-line",t.VerticalLine="vertical-line",t.DisjointChannel="disjoint-channel",t.ParallelChannel="parallel-channel",t.FibonacciRetracement="fibonacci-retracement",t.FibonacciRetracementTrendBased="fibonacci-retracement-trend-based",t.Callout="callout",t.Comment="comment",t.Note="note",t.Text="text",t.Arrow="arrow",t.ArrowUp="arrow-up",t.ArrowDown="arrow-down",t.DateRange="date-range",t.PriceRange="price-range",t.DatePriceRange="date-price-range",t.QuickDatePriceRange="quick-date-price-range",t))(Cd||{}),sI=Object.values(Cd);function aI(t){for(const e of sI)if(e===t)return e}import{isObject as nI}from"ag-charts-core";import{_ModuleSupport as rI}from"ag-charts-community";import{isObject as lI}from"ag-charts-core";import{_ModuleSupport as cI}from"ag-charts-community";import{isObject as hI}from"ag-charts-core";var{BOOLEAN:$n,COLOR_STRING:Ld,DATE:Xn,FONT_STYLE:pI,FONT_WEIGHT:dI,FUNCTION:uI,LINE_DASH:gI,LINE_STYLE:fI,NUMBER:Es,OBJECT:Zn,OR:qn,POSITIVE_NUMBER:Rd,RATIO:_m,STRING:Zo,TEXT_ALIGN:yI,UNION:Pl,BaseProperties:qo,TempValidate:it,predicateWithMessage:mI,generateUUID:xI}=cI,SI=["value","groupPercentage"],Qn=mI(t=>hI(t)&&Object.keys(t).every(e=>SI.includes(e)),"objects with grouping value properties such as 'value' or 'groupPercentage'"),Jn=class extends qo{};p([it(qn(Zo,Es,Xn,Qn))],Jn.prototype,"x",2),p([it(qn(Zo,Es,Xn,Qn))],Jn.prototype,"y",2);var bI=class extends ue(vo(Vm(qo))){},wd=class extends ue(vo(Qi(_d(zs(qo))))){constructor(){super(...arguments),this.cornerRadius=2}};p([it($n)],wd.prototype,"enabled",2),p([it(Rd)],wd.prototype,"cornerRadius",2);var vI=class extends Qi(qo){},DI=class extends ue(vo(Qi(qo))){},_s=class extends zs(qo){constructor(){super(...arguments),this.label="",this.position="top",this.alignment="left"}};p([it(Zo)],_s.prototype,"label",2),p([it(Pl(["top","center","bottom"]),{optional:!0})],_s.prototype,"position",2),p([it(Pl(["left","center","right"]),{optional:!0})],_s.prototype,"alignment",2);var MI=class extends zs(qo){},tr=class extends zs(qo){constructor(){super(...arguments),this.label=""}};p([it(Zo)],tr.prototype,"label",2),p([it(Pl(["top","inside","bottom"]),{optional:!0})],tr.prototype,"position",2),p([it(Pl(["left","center","right"]),{optional:!0})],tr.prototype,"alignment",2);function Bs(t){class e extends OI(Vm(t)){constructor(){super(...arguments),this.id=xI()}isValidWithContext(o,s){return super.isValid(s)}}return e}function Pd(t){class e extends t{constructor(){super(...arguments),this.start=new Jn,this.end=new Jn}}return p([it(Zn)],e.prototype,"start",2),p([it(Zn)],e.prototype,"end",2),e}function Bm(t){class e extends t{}return p([it(qn(Zo,Es,Xn,Qn))],e.prototype,"x",2),p([it(qn(Zo,Es,Xn,Qn))],e.prototype,"y",2),e}function zm(t){class e extends t{}return p([it(qn(Zo,Es,Xn,Qn))],e.prototype,"value",2),e}function Ed(t){class e extends t{constructor(){super(...arguments),this.background=new vI}}return p([it(Zn,{optional:!0})],e.prototype,"background",2),e}function Qo(t){class e extends t{constructor(){super(...arguments),this.handle=new DI}}return p([it(Zn,{optional:!0})],e.prototype,"handle",2),e}function Fm(t){class e extends t{constructor(){super(...arguments),this.axisLabel=new wd}}return p([it(Zn,{optional:!0})],e.prototype,"axisLabel",2),e}function _d(t){class e extends t{constructor(){super(...arguments),this.padding=void 0,this.textAlign="center",this.formatter=void 0}}return p([it(Rd,{optional:!0})],e.prototype,"padding",2),p([it(yI,{optional:!0})],e.prototype,"textAlign",2),p([it(uI,{optional:!0})],e.prototype,"formatter",2),e}function kI(t){class e extends t{}return e}function Bd(t){class e extends t{}return p([it($n,{optional:!0})],e.prototype,"extendStart",2),p([it($n,{optional:!0})],e.prototype,"extendEnd",2),e}function OI(t){class e extends t{}return p([it($n,{optional:!0})],e.prototype,"locked",2),e}function zd(t){class e extends t{setLocaleManager(o){this.localeManager??(this.localeManager=o)}}return e}function Vm(t){class e extends t{}return p([it($n,{optional:!0})],e.prototype,"visible",2),e}function Qi(t){class e extends t{}return p([it(Ld,{optional:!0})],e.prototype,"fill",2),p([it(_m,{optional:!0})],e.prototype,"fillOpacity",2),e}function ue(t){class e extends t{}return p([it(Ld,{optional:!0})],e.prototype,"stroke",2),p([it(_m,{optional:!0})],e.prototype,"strokeOpacity",2),p([it(Es,{optional:!0})],e.prototype,"strokeWidth",2),e}function vo(t){class e extends t{constructor(){super(...arguments),this.lineCap=void 0,this.computedLineDash=void 0}}return p([it(gI,{optional:!0})],e.prototype,"lineDash",2),p([it(Es,{optional:!0})],e.prototype,"lineDashOffset",2),p([it(fI,{optional:!0})],e.prototype,"lineStyle",2),e}function zs(t){class e extends t{constructor(){super(...arguments),this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}return p([it(pI,{optional:!0})],e.prototype,"fontStyle",2),p([it(dI,{optional:!0})],e.prototype,"fontWeight",2),p([it(Rd)],e.prototype,"fontSize",2),p([it(Zo)],e.prototype,"fontFamily",2),p([it(Ld,{optional:!0})],e.prototype,"color",2),e}import{_ModuleSupport as TI}from"ag-charts-community";import{_ModuleSupport as AI}from"ag-charts-community";import{isDate as II,isNumber as NI,isString as CI}from"ag-charts-core";function Gm(t){return NI(t)||CI(t)||II(t)?{value:t,groupPercentage:0}:t??{value:void 0,groupPercentage:0}}function _t(t){return Gm(t)?.value}var{clampArray:LI}=AI;function Me(t,e){if(t.start==null||t.end==null)return;const i=Mt(t.start,e),o=Mt(t.end,e);if(!(i==null||o==null))return{x1:i.x,y1:i.y,x2:o.x,y2:o.y}}function Mt(t,e){const i=Do(t.x,e.xAxis),o=Do(t.y,e.yAxis);return{x:i,y:o}}function Do(t,e){if(t==null)return 0;const{value:i,groupPercentage:o}=Gm(t),{scale:s,snapToGroup:a}=e,n=s.bandwidth===0?s.step??0:s.bandwidth??0,r=a?n/2:n*o;return s.convert(i)+r}function ke(t,e){const i=El(t.x,e.xAxis),o=El(t.y,e.yAxis);return{x:i,y:o}}function El(t,e){const{scale:i}=e;if(e.continuous&&i.step==null)return e.scaleInvert(t);const o=e.scaleInvertNearest(t),s=i.bandwidth===0?i.step:i.bandwidth??0,a=i.convert(o),n=a+s,r=LI(t,i.range),l=a===n?0:(r-a)/(n-a);return{value:o,groupPercentage:l}}import{_ModuleSupport as RI}from"ag-charts-community";var{BaseProperties:wI}=RI,Fd=class extends Bs(Pd(Qo(wI))){constructor(){super(...arguments),this.snapToAngle=45}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){}getDefaultOpacity(t){}},{STRING:PI,TempValidate:EI}=TI,Wm=class extends zd(_d(zs(Fd))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;let e=this.text;return t&&(e=this.placeholderText??"",this.localeManager&&(e=this.localeManager.t(e))),{text:e,isPlaceholder:t}}getTextInputCoords(t,e){return Mt(this.end,t)}getTextPosition(){return this.position}};p([EI(PI)],Wm.prototype,"text",2);var{STRING:_I,TempValidate:BI,Color:Hm}=rI,zI={top:6,right:12,bottom:9,left:12},Ni=class extends Qi(ue(Wm)){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(t){return lI(t)&&t.type==="callout"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=Hm.fromString(this.color??"#888888");return new Hm(t,e,i,.66).toString()}getPadding(){const{padding:t}=this;return t==null?{...zI}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),o=this.getPadding(),s=o.left??0,a=o.bottom??0;return{x:i.x+s,y:i.y-a}}};p([BI(_I)],Ni.prototype,"type",2);import{_ModuleSupport as FI}from"ag-charts-community";import{isObject as VI}from"ag-charts-core";import{_ModuleSupport as GI}from"ag-charts-community";var{STRING:WI,BaseProperties:HI,TempValidate:KI}=GI,_l=class extends Bs(Bm(Qo(_d(zs(HI))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;return{text:t?this.placeholderText??"":this.text,isPlaceholder:t}}getTextInputCoords(t,e){return Mt(this,t)}getTextPosition(){return this.position}};p([KI(WI)],_l.prototype,"text",2);var{STRING:UI,TempValidate:YI,Color:Km}=FI,Bl={top:8,right:14,bottom:8,left:14},Ji=class extends Qi(ue(_l)){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(t){return VI(t)&&t.type==="comment"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=Km.fromString(this.color??"#888888");return new Km(t,e,i,.66).toString()}getPadding(){const{padding:t,fontSize:e}=this;return t==null?{top:Math.max(e*.4,Bl.top),bottom:Math.max(e*.4,Bl.bottom),left:Math.max(e*.8,Bl.left),right:Math.max(e*.8,Bl.right)}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),o=this.getPadding();return{x:i.x+o.left,y:i.y-o.bottom}}};p([YI(UI)],Ji.prototype,"type",2);import{_ModuleSupport as jI}from"ag-charts-community";import{isObject as zl}from"ag-charts-core";import{_ModuleSupport as $I}from"ag-charts-community";var{Vec2:Fs}=$I;function er(t,e){return t?"dashed":e??"solid"}function Um(t,e){switch(e){case"solid":return[];case"dashed":return[t*4,t*2];case"dotted":return[0,t*2]}}function ja(t,e,i,o){const s=er(t,i);return e??t??Um(o??1,s)}function $a(t,e,i){const o=er(e,i);return t??o==="dotted"?"round":void 0}function XI(t,e){const[i,o]=Fs.from(t),s=e.height,a=Fs.gradient(o,i,s),n=Fs.intercept(o,a,s),r=[{x:i.x,y:s??0},{x:i.x,y:s==null?e.height:s-e.height}];if(a===1/0)return r;let l=[Fs.intersectAtY(a,n,0,s),Fs.intersectAtY(a,n,e.height,s),Fs.intersectAtX(a,n,0,s),Fs.intersectAtX(a,n,e.width,s)];return l=l.filter(c=>c.x>=e.x&&c.x<=e.width&&c.y>=e.y&&c.y<=e.height).sort((c,h)=>c.x===h.x?0:c.x<h.x?-1:1),l.length!==2?r:l}var{BOOLEAN:Fl,OBJECT:Xa,STRING:Vl,BaseProperties:Vd,TempValidate:Re}=jI,ZI=class extends ue(Vd){},Gd=class extends zs(Qi(ue(Vd))){constructor(){super(...arguments),this.divider=new ZI}};p([Re(Xa,{optional:!0})],Gd.prototype,"divider",2);var Wd=class extends Qi(ue(Qo(Vd))){constructor(){super(...arguments),this.statistics=new Gd}};p([Re(Xa,{optional:!0})],Wd.prototype,"statistics",2);var Za=class extends zd(Ed(ue(vo(Fd)))){constructor(){super(...arguments),this.direction="both",this.hasDateRange=!1,this.hasPriceRange=!1,this.statistics=new Gd,this.getVolume=()=>{},this.text=new _s}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return ja(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return $a(this.lineCap,this.lineDash,this.lineStyle)}};p([Re(Xa,{optional:!0})],Za.prototype,"statistics",2),p([Re(Xa,{optional:!0})],Za.prototype,"text",2);function Hd(t){class e extends t{constructor(){super(...arguments),this.hasDateRange=!0}}return e}function Kd(t){class e extends t{constructor(){super(...arguments),this.hasPriceRange=!0}}return e}var li=class extends Hd(Za){constructor(){super(...arguments),this.type="date-range",this.direction="horizontal"}static is(t){return zl(t)&&t.type==="date-range"}};p([Re(Vl)],li.prototype,"type",2),p([Re(Fl,{optional:!0})],li.prototype,"extendAbove",2),p([Re(Fl,{optional:!0})],li.prototype,"extendBelow",2);var ci=class extends Kd(Za){constructor(){super(...arguments),this.type="price-range",this.direction="vertical"}static is(t){return zl(t)&&t.type==="price-range"}};p([Re(Vl)],ci.prototype,"type",2),p([Re(Fl,{optional:!0})],ci.prototype,"extendLeft",2),p([Re(Fl,{optional:!0})],ci.prototype,"extendRight",2);var Mo=class extends Hd(Kd(Za)){constructor(){super(...arguments),this.type="date-price-range",this.direction="both"}static is(t){return zl(t)&&t.type==="date-price-range"}};p([Re(Vl)],Mo.prototype,"type",2);var je=class extends Hd(Kd(Za)){constructor(){super(...arguments),this.type="quick-date-price-range",this.up=new Wd,this.down=new Wd,this.direction="both"}static is(t){return zl(t)&&t.type==="quick-date-price-range"}};p([Re(Vl)],je.prototype,"type",2),p([Re(Xa,{optional:!0})],je.prototype,"up",2),p([Re(Xa,{optional:!0})],je.prototype,"down",2);import{_ModuleSupport as qI}from"ag-charts-community";import{clamp as QI,isObject as JI}from"ag-charts-core";import{_ModuleSupport as tN}from"ag-charts-community";var{TextWrapper:eN,CachedTextMeasurerPool:iN,BBox:oN}=tN,ir=1.38;function Ym(t){return{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},textAlign:t.textAlign,textBaseline:t.position=="center"?"middle":t.position,lineHeight:ir,avoidOrphans:!1,textWrap:"always"}}function Gl(t,e,i){return i?eN.wrapText(e,{...Ym(t),maxWidth:i}):e}function sN(t,e){const i=Ym(t),{lineMetrics:o,width:s}=iN.measureLines(e,i),a=o.length*(t.fontSize??14)*ir;return{width:s,height:a}}function Ud(t,e,i,o){let s=o?.width??0,a=o?.height??0;if(!o){const n=t.width!=null?Gl(t,e,t.width):e;({width:s,height:a}=sN(t,n))}return new oN(i.x,i.y,s,a)}function jm(t,e,i,o,{x:s,y:a},n){const{visible:r=!0,fontFamily:l,fontSize:c=14,fontStyle:h,fontWeight:d,textAlign:u}=o,g=c*ir;n??(n=o.position=="center"?"middle":o.position);const f=i?o.getPlaceholderColor():o.color;t.setProperties({x:s,y:a,visible:r,text:e,fill:f,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:d,textAlign:u,lineHeight:g,textBaseline:n})}var{OBJECT:aN,STRING:nN,BaseProperties:rN,TempValidate:$m}=qI,lN=10,cN=11,Xm=20,hN=22,pN=10,Zm=Xm+pN,qm=34,dN=class extends Qi(ue(rN)){},we=class extends Qi(ue(_l)){constructor(){super(...arguments),this.type="note",this.background=new dN,this.position="bottom",this.alignment="center",this.width=200}static is(t){return JI(t)&&t.type==="note"}getDefaultColor(t){switch(t){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(t){switch(t){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){const t=this.padding??lN;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const{width:i,text:o}=this,s=super.getTextInputCoords(t,e),a=this.getPadding().top,n=Ud(this,o,s);n.x=QI(i/2,n.x,t.seriesRect.width-i/2);const r=n.y-Zm-a*2,l=n.y+cN+a*2,c=Math.max(n.height,e);return r-c-qm<0?(n.y=l,this.position="top"):(n.y=r+a,this.position="bottom"),{x:n.x,y:n.y}}};p([$m(nN)],we.prototype,"type",2),p([$m(aN,{optional:!0})],we.prototype,"background",2);import{_ModuleSupport as uN}from"ag-charts-community";var{BaseProperties:gN}=uN,fN=class extends Bs(Bm(Qo(gN))){isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){}getDefaultOpacity(t){}},Yd=class s0 extends Qi(fN){constructor(){super(...arguments),this.size=32}static is(e){return e instanceof s0}getDefaultColor(e){return e==="fill-color"?this.fill:void 0}getDefaultOpacity(e){return e==="fill-color"?this.fillOpacity:void 0}};import{_ModuleSupport as yN}from"ag-charts-community";import{isObject as Qm}from"ag-charts-core";import{_ModuleSupport as mN}from"ag-charts-community";import{Logger as jd}from"ag-charts-core";var{ContinuousScale:Jm}=mN;function Vs(t,e,i={overflowContinuous:!1},o){let s=!0;return s&&(s=qa(t,e.start,i,o&&`${o}[start] `)),s&&(s=qa(t,e.end,i,o&&`${o}[end] `)),s}function tx(t,e,i){const o=e.direction==="horizontal"?t.yAxis:t.xAxis,s=$d(e.value,o);if(!s&&i){const a=_t(e.value);jd.warnOnce(`${i}is outside the axis domain, ignoring. - value: [${a}]]`)}return s}function qa(t,e,i={overflowContinuous:!1},o){if(e.x==null||e.y==null)return o&&jd.warnOnce(`${o}requires both an [x] and [y] property, ignoring.`),!1;const{xAxis:s,yAxis:a}=t,n=i.overflowContinuous&&Jm.is(s.scale),r=i.overflowContinuous&&Jm.is(a.scale),l=n||$d(e.x,s),c=r||$d(e.y,a);if(l&&c)return!0;if(o){let h="x & y domains";l&&(h="y domain"),c&&(h="x domain");const d=_t(e.x),u=_t(e.y);jd.warnOnce(`${o}is outside the ${h}, ignoring. - x: [${d}], y: ${u}]`)}return!1}function $d(t,e){const{domain:i}=e.scale,o=_t(t);return i&&o!=null&&e.continuous?o>=i[0]&&o<=i.at(-1):!0}var{OBJECT:ex,STRING:ix,BaseProperties:ox,TempValidate:Wl}=yN,ge=class extends Bs(zm(Qo(Fm(ue(vo(ox)))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line",this.text=new _s}static is(t){return Qm(t)&&t.type==="horizontal-line"}isValidWithContext(t,e){return super.isValid(e)&&tx(t,this,e)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return ja(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return $a(this.lineCap,this.lineDash,this.lineStyle)}};p([Wl(ix)],ge.prototype,"type",2),p([Wl(ex,{optional:!0})],ge.prototype,"text",2);var to=class extends Bs(zm(Qo(Fm(ue(vo(ox)))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line",this.text=new _s}static is(t){return Qm(t)&&t.type==="vertical-line"}isValidWithContext(t,e){return super.isValid(e)&&tx(t,this,e)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return ja(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return $a(this.lineCap,this.lineDash,this.lineStyle)}};p([Wl(ix)],to.prototype,"type",2),p([Wl(ex,{optional:!0})],to.prototype,"text",2);import{_ModuleSupport as xN}from"ag-charts-community";import{Logger as SN,isObject as bN}from"ag-charts-core";var{NUMBER:sx,OBJECT:vN,STRING:DN,BaseProperties:MN,TempValidate:Hl}=xN,hi=class extends Bs(Ed(Pd(Qo(Bd(ue(vo(MN))))))){constructor(){super(...arguments),this.type="disjoint-channel",this.text=new tr,this.snapToAngle=45}static is(t){return bN(t)&&t.type==="disjoint-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.startHeight,t.end.y-=this.endHeight):SN.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&Vs(t,this,{overflowContinuous:!0},e)&&Vs(t,this.bottom,{overflowContinuous:!0},e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return ja(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return $a(this.lineCap,this.lineDash,this.lineStyle)}};p([Hl(DN)],hi.prototype,"type",2),p([Hl(sx)],hi.prototype,"startHeight",2),p([Hl(sx)],hi.prototype,"endHeight",2),p([Hl(vN,{optional:!0})],hi.prototype,"text",2);import{_ModuleSupport as kN}from"ag-charts-community";import{isObject as ON}from"ag-charts-core";import{_ModuleSupport as TN}from"ag-charts-community";import{isFiniteNumber as AN}from"ag-charts-core";import{_ModuleSupport as IN}from"ag-charts-community";import{isObject as ax}from"ag-charts-core";var{OBJECT:NN,STRING:nx,TempValidate:Xd}=IN,Kl=class extends zd(kI(Bd(ue(vo(Fd))))){constructor(){super(...arguments),this.text=new _s}isValidWithContext(t,e){return super.isValid(e)&&Vs(t,this,void 0,e)}getDefaultColor(t){switch(t){case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return ja(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return $a(this.lineCap,this.lineDash,this.lineStyle)}};p([Xd(NN,{optional:!0})],Kl.prototype,"text",2);var ko=class extends Kl{constructor(){super(...arguments),this.type="arrow",this.endCap="arrow"}static is(t){return ax(t)&&t.type==="arrow"}};p([Xd(nx)],ko.prototype,"type",2);var Oo=class extends Kl{constructor(){super(...arguments),this.type="line"}static is(t){return ax(t)&&t.type==="line"}};p([Xd(nx)],Oo.prototype,"type",2);var{OBJECT:CN,BOOLEAN:Zd,COLOR_STRING:LN,COLOR_STRING_ARRAY:RN,TempValidate:Gs,predicateWithMessage:wN}=TN,PN=[10,6,4],EN=wN(t=>AN(t)&&PN.includes(t),"Number of fibonacci ranges, 10, 6 or 4"),To=class extends Kl{constructor(){super(...arguments),this.label=new MI,this.reverse=!1,this.showFill=!0,this.isMultiColor=!0,this.strokes=[],this.bands=10}getDefaultColor(t){switch(t){case"line-color":return this.rangeStroke??this.stroke;case"text-color":return this.text.color}}};p([Gs(CN,{optional:!0})],To.prototype,"label",2),p([Gs(Zd,{optional:!0})],To.prototype,"reverse",2),p([Gs(Zd,{optional:!0})],To.prototype,"showFill",2),p([Gs(Zd,{optional:!0})],To.prototype,"isMultiColor",2),p([Gs(RN,{optional:!0})],To.prototype,"strokes",2),p([Gs(LN,{optional:!0})],To.prototype,"rangeStroke",2),p([Gs(EN,{optional:!0})],To.prototype,"bands",2);var{STRING:_N,OBJECT:BN,TempValidate:rx}=kN,eo=class extends To{constructor(){super(...arguments),this.type="fibonacci-retracement-trend-based",this.endRetracement=new Jn}static is(t){return ON(t)&&t.type==="fibonacci-retracement-trend-based"}isValidWithContext(t,e){return Vs(t,this,{overflowContinuous:!0},e)}};p([rx(_N)],eo.prototype,"type",2),p([rx(BN)],eo.prototype,"endRetracement",2);import{_ModuleSupport as zN}from"ag-charts-community";import{isObject as FN}from"ag-charts-core";var{STRING:VN,TempValidate:GN}=zN,Ao=class extends To{constructor(){super(...arguments),this.type="fibonacci-retracement"}static is(t){return FN(t)&&t.type==="fibonacci-retracement"}isValidWithContext(t,e){return Vs(t,this,{overflowContinuous:!0},e)}};p([GN(VN)],Ao.prototype,"type",2);import{_ModuleSupport as WN}from"ag-charts-community";import{Logger as HN,isObject as KN}from"ag-charts-core";var{NUMBER:UN,STRING:YN,OBJECT:lx,BaseProperties:jN,TempValidate:Ul}=WN,pi=class extends Bs(Ed(Pd(Qo(Bd(ue(vo(jN))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new bI,this.text=new tr,this.snapToAngle=45}static is(t){return KN(t)&&t.type==="parallel-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.height,t.end.y-=this.height):HN.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&Vs(t,this,{overflowContinuous:!0},e)&&Vs(t,this.bottom,{overflowContinuous:!0},e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return ja(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return $a(this.lineCap,this.lineDash,this.lineStyle)}};p([Ul(YN)],pi.prototype,"type",2),p([Ul(UN)],pi.prototype,"height",2),p([Ul(lx,{optional:!0})],pi.prototype,"middle",2),p([Ul(lx,{optional:!0})],pi.prototype,"text",2);import{_ModuleSupport as $N}from"ag-charts-community";import{isObject as XN}from"ag-charts-core";var{STRING:ZN,TempValidate:qN}=$N,Io=class extends _l{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(t){return XN(t)&&t.type==="text"}};p([qN(ZN)],Io.prototype,"type",2);function Jo(t){return je.is(t)}function Yl(t){return Oo.is(t)||ge.is(t)||to.is(t)||ko.is(t)||cx(t)}function No(t){return hi.is(t)||pi.is(t)}function cx(t){return Ao.is(t)||eo.is(t)}function io(t){return Ni.is(t)||Ji.is(t)||we.is(t)||Io.is(t)}function or(t){return li.is(t)||ci.is(t)||Mo.is(t)||je.is(t)}function qd(t){return io(t)&&!we.is(t)}function ts(t){return Yl(t)||No(t)||or(t)&&!je.is(t)}function QN(t){return Yl(t)||No(t)||or(t)||Ni.is(t)||we.is(t)}function JN(t){return we.is(t)}function tC(t){return No(t)||or(t)||Ni.is(t)||Ji.is(t)||Yd.is(t)}function eC(t){return io(t)&&!we.is(t)}function Qa(t){return(Yl(t)||No(t)||or(t))&&!Jo(t)&&nI(t.text)}function iC(t,e){"fontSize"in t&&(t.fontSize=e),Qa(t)&&(t.text.fontSize=e)}function hx(t,e){const i=e?.strokeWidth??t.strokeWidth??1,o=e?.type??t.lineStyle,s=o??er(t.lineDash,o),a=Um(i,s);t.strokeWidth=i,t.computedLineDash=a,t.lineStyle=s,t.lineCap=s==="dotted"?"round":void 0}function jl(t,e,i,o,s,a){switch(e){case"fill-color":{"fill"in t&&(t.fill=o),"fillOpacity"in t&&(t.fillOpacity=s),"background"in t&&(t.background.fill=o,t.background.fillOpacity=s);break}case"line-color":{"axisLabel"in t&&(t.axisLabel.fill=o,t.axisLabel.fillOpacity=s,t.axisLabel.stroke=o,t.axisLabel.strokeOpacity=s),"fill"in t&&"fillOpacity"in t&&JN(t)?(t.fill=o,t.fillOpacity=s):("strokeOpacity"in t&&(t.strokeOpacity=s),"isMultiColor"in t&&"rangeStroke"in t?(t.isMultiColor=a,t.rangeStroke=o):"stroke"in t&&(t.stroke=o));break}case"text-color":{"color"in t&&(t.color=i),Qa(t)&&(t.text.color=o);break}}}var{deepClone:di}=oI,oC=class{constructor(){this.mementoOriginatorKey="annotation-defaults",this.colors=new Map(Object.values(Cd).map(t=>[t,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])])),this.fontSizes=new Map([["callout",void 0],["comment",void 0],["text",void 0],["arrow",void 0],["line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineStyles=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextAlignments=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextPositions=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.fibonacciOptions=new Map([["fibonacci-retracement",{bands:void 0,reverse:void 0,showFill:void 0}],["fibonacci-retracement-trend-based",{bands:void 0,reverse:void 0,showFill:void 0}]])}createMemento(){return{colors:di(this.colors),fontSizes:di(this.fontSizes),lineStyles:di(this.lineStyles),lineTextAlignments:di(this.lineTextAlignments),lineTextPositions:di(this.lineTextPositions),fibonacciOptions:di(this.fibonacciOptions)}}guardMemento(t){return!0}restoreMemento(t,e,i){this.colors=di(i.colors),this.fontSizes=di(i.fontSizes),this.lineStyles=di(i.lineStyles),this.lineTextAlignments=di(i.lineTextAlignments),this.lineTextPositions=di(i.lineTextPositions),this.fibonacciOptions=di(i.fibonacciOptions)}setDefaultColor(t,e,i,o,s,a){this.colors.get(t)?.set(e,[i,o,s,a])}setDefaultFontSize(t,e){this.fontSizes.set(t,e)}setDefaultLineStyleType(t,e){const i=this.lineStyles.get(t);i?i.type=e:this.lineStyles.set(t,{type:e})}setDefaultLineStyleWidth(t,e){const i=this.lineStyles.get(t);i?i.strokeWidth=e:this.lineStyles.set(t,{strokeWidth:e})}setDefaultLineTextAlignment(t,e){this.lineTextAlignments.set(t,e)}setDefaultLineTextPosition(t,e){this.lineTextPositions.set(t,e)}setDefaultFibonacciOptions(t,e,i){if(t!="fibonacci-retracement"&&t!="fibonacci-retracement-trend-based")return;const o=this.fibonacciOptions.get(t);o[e]=i,this.fibonacciOptions.set(t,o)}applyDefaults(t){for(const[e,i]of this.colors)if(t.type===e)for(const[o,[s,a,n,r]=[]]of i)s&&a&&n!=null&&r!=null&&jl(t,o,s,a,n,r);for(const[e,i]of this.fontSizes)t.type!==e||i==null||iC(t,i);for(const[e,i]of this.lineStyles)t.type!==e||i==null||hx(t,i);for(const[e,i]of this.lineTextPositions)t.type!==e||i==null||(t.text.position=i);for(const[e,i]of this.lineTextAlignments)t.type!==e||i==null||(t.text.alignment=i);for(const[e,i]of this.fibonacciOptions)t.type!==e||i==null||Object.keys(i).forEach(o=>{const s=i[o];s!=null&&t.set({[o]:s})})}};import{_ModuleSupport as px}from"ag-charts-community";import{_ModuleSupport as dx}from"ag-charts-community";import{clamp as $l,createElement as sC}from"ag-charts-core";var aC='<div class="ag-charts-color-picker__palette" tabindex="0"></div><div class="ag-charts-color-picker__color-row"><button class="ag-charts-color-picker__multi-color-button" tabindex="0" type="button"></button> <input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"></div><input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field"><span class="ag-charts-color-picker__color-label">Color</span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label>',{Color:Qd}=dx,ux=t=>{try{const e=Qd.fromString(t),[i,o,s]=e.toHSB();return[i,o,s,e.a]}catch{return}},gx=class extends dx.AnchoredPopover{constructor(t,e){super(t,"color-picker",e),this.hasChanged=!1,this.hideFns.push(()=>{this.hasChanged&&this.onChangeHide?.()})}show(t){this.hasChanged=!1,this.onChangeHide=t.onChangeHide;const{element:e,initialFocus:i}=this.createColorPicker(t),o=this.showWithChildren([e],{initialFocus:i,...t});o.classList.add("ag-charts-color-picker"),o.setAttribute("role","dialog")}createColorPicker(t){let e=t.isMultiColor??!1,[i,o,s,a]=ux(t.color??"#f00")??[0,1,.5,1];a=t.opacity??a;const n=sC("div","ag-charts-color-picker__content");n.innerHTML=aC,n.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const r=n.querySelector(".ag-charts-color-picker__palette"),l=n.querySelector(".ag-charts-color-picker__hue-input"),c=n.querySelector(".ag-charts-color-picker__multi-color-button"),h=n.querySelector(".ag-charts-color-picker__alpha-input"),d=n.querySelector(".ag-charts-color-picker__color-input"),u=n.querySelector(".ag-charts-color-picker__color-label");c.classList.toggle("ag-charts-color-picker__multi-color-button--hidden",!t.hasMultiColorOption);const g=(x=!0)=>{const S=Qd.fromHSB(i,o,s,a).toHexString();if(n.style.setProperty("--h",`${i}`),n.style.setProperty("--s",`${o}`),n.style.setProperty("--v",`${s}`),n.style.setProperty("--a",`${a}`),n.style.setProperty("--color",S.slice(0,7)),n.style.setProperty("--color-a",S),l.value=`${i}`,h.value=`${a}`,h.classList.toggle("ag-charts-color-picker__alpha-input--opaque",a===1),c.classList.toggle("ag-charts-color-picker__multi-color-button--active",e),u.classList.toggle("ag-charts-color-picker__color-label--multi-color",e),document.activeElement!==d&&(d.value=e?"Multi Colour":S.toUpperCase()),x||t.color==null){const b=Qd.fromHSB(i,o,s,1).toHexString();t.onChange?.(S,b,a,e)}x&&(this.hasChanged=!0)};g(!1);const f=x=>x.preventDefault(),y=x=>x.stopPropagation(),m=x=>{x.preventDefault();const v=x.currentTarget;v.focus();const S=v.getBoundingClientRect(),b=({clientX:I,clientY:M})=>{e=!1,o=Math.min(Math.max((I-S.left)/S.width,0),1),s=1-Math.min(Math.max((M-S.top)/S.height,0),1),g()},D=()=>{window.removeEventListener("pointermove",b)};b(x),window.addEventListener("pointermove",b),window.addEventListener("pointerup",D,{once:!0})};return n.addEventListener("mousedown",y),n.addEventListener("touchstart",y),n.addEventListener("touchmove",y),n.addEventListener("keydown",x=>{switch(x.stopPropagation(),x.key){case"Enter":case"Escape":this.hide();break;default:return}x.preventDefault()}),r.addEventListener("pointerdown",m),r.addEventListener("touchstart",f,{passive:!1}),r.addEventListener("touchmove",f,{passive:!1}),r.addEventListener("keydown",x=>{if(x.key==="ArrowLeft")o=$l(0,o-.01,1);else if(x.key==="ArrowRight")o=$l(0,o+.01,1);else if(x.key==="ArrowUp")s=$l(0,s+.01,1);else if(x.key==="ArrowDown")s=$l(0,s-.01,1);else return;x.preventDefault(),g()}),c.addEventListener("click",()=>{e=!e,g()}),l.addEventListener("input",x=>{e=!1,i=x.currentTarget.valueAsNumber??0,g()}),h.addEventListener("input",x=>{e=!1,a=x.currentTarget.valueAsNumber??0,g()}),d.addEventListener("input",x=>{e=!1;const v=ux(x.currentTarget.value);v!=null&&([i,o,s,a]=v,g())}),d.addEventListener("blur",()=>g()),d.addEventListener("keydown",x=>{x.key==="Enter"&&(x.currentTarget.blur(),g())}),{element:n,initialFocus:r}}};import{_ModuleSupport as fx}from"ag-charts-community";function yx(t){return!(t instanceof fx.LogScale)&&!(t instanceof fx.BandScale)}var nC=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel",visible:yx},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel",visible:yx}],rC=[{label:"toolbarAnnotationsFibonacciRetracement",icon:"fibonacci-retracement-drawing",value:"fibonacci-retracement"},{label:"toolbarAnnotationsFibonacciRetracementTrendBased",icon:"fibonacci-retracement-trend-based-drawing",value:"fibonacci-retracement-trend-based"}],lC=[{label:"Fibonacci - Extended",value:10},{label:"Fibonacci - 6 Band",value:6},{label:"Fibonacci - 4 Band",value:4}],cC=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],hC=[{label:"toolbarAnnotationsArrow",icon:"arrow-drawing",value:"arrow"},{label:"toolbarAnnotationsArrowUp",icon:"arrow-up-drawing",value:"arrow-up"},{label:"toolbarAnnotationsArrowDown",icon:"arrow-down-drawing",value:"arrow-down"}],pC=[{label:"toolbarAnnotationsQuickDatePriceRange",icon:"measurer-drawing",value:"quick-date-price-range"},{label:"toolbarAnnotationsDateRange",icon:"date-range-drawing",value:"date-range"},{label:"toolbarAnnotationsPriceRange",icon:"price-range-drawing",value:"price-range"},{label:"toolbarAnnotationsDatePriceRange",icon:"date-price-range-drawing",value:"date-price-range"}],mx=[{strokeWidth:1,label:"1",value:1},{strokeWidth:2,label:"2",value:2},{strokeWidth:3,label:"3",value:3},{strokeWidth:4,label:"4",value:4},{strokeWidth:8,label:"8",value:8}],sr=[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],xx=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],{ARRAY:dC,BOOLEAN:uC,NUMBER:gC,OBJECT:fC,STRING:yC,UNION:mC,Color:Sx,FloatingToolbar:xC,Listeners:SC,Menu:Jd,PropertiesArray:bC,ToolbarButtonProperties:bx,ToolbarButtonWidget:vC,TempValidate:Ws}=px,Ja=class extends bx{constructor(){super(...arguments),this.checkedOverrides=new bx}};p([Ws(mC(["line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings","lock"]))],Ja.prototype,"value",2),p([Ws(fC,{optional:!0})],Ja.prototype,"checkedOverrides",2),p([Ws(yC,{optional:!0})],Ja.prototype,"color",2),p([Ws(gC,{optional:!0})],Ja.prototype,"strokeWidth",2),p([Ws(Boolean,{optional:!0})],Ja.prototype,"isMultiColor",2);var DC=class extends vC{update(t){super.update(t),t.value==="line-stroke-width"&&this.updateLineStrokeWidth(t),(t.value==="fill-color"||t.value==="line-color"||t.value==="text-color")&&this.updateFillColor(t)}updateFillColor(t){const e=this.getElement();e.classList.add("ag-charts-annotations__color-picker-button"),e.classList.toggle("ag-charts-annotations__color-picker-button--multi-color",t.isMultiColor),e.style.setProperty("--color",t.color??null)}updateLineStrokeWidth(t){const e=this.getElement();e.classList.add("ag-charts-annotations__stroke-width-button"),e.style.setProperty("--stroke-width",`${t.strokeWidth}px`)}},MC=class extends xC{createButtonWidget(){return new DC(this.localeManager)}},tu=class extends px.BaseProperties{constructor(t,e){super(),this.ctx=t,this.getActiveDatum=e,this.enabled=!0,this.buttons=new bC(Ja),this.destroyFns=[],this.events=new SC,this.visibleButtons=[],this.toolbar=new MC(this.ctx,"annotation-options"),this.colorPicker=new gx(this.ctx),this.textSizeMenu=new Jd(this.ctx,"text-size"),this.lineStyleTypeMenu=new Jd(this.ctx,"annotations-line-style-type"),this.lineStrokeWidthMenu=new Jd(this.ctx,"annotations-line-stroke-width"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("toolbar-moved",this.onToolbarMoved.bind(this)),t.widgets.seriesWidget.addListener("drag-start",this.onDragStart.bind(this)),t.widgets.seriesWidget.addListener("drag-end",this.onDragEnd.bind(this)),()=>this.colorPicker.destroy())}onDragStart(){this.toolbar.ignorePointerEvents()}onDragEnd(){this.toolbar.capturePointerEvents()}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}show(){this.enabled&&this.toolbar.show()}hide(){this.toolbar.hide()}updateButtons(t){if(!this.enabled)return;const e={"line-style-type":ts(t),"line-stroke-width":ts(t),"line-color":QN(t),"text-color":eC(t),"fill-color":tC(t),"text-size":qd(t),settings:Qa(t),lock:!0,delete:!0};this.visibleButtons=this.buttons.filter(i=>e[i.value]),this.toolbar.clearButtons(),this.toolbar.updateButtons(this.visibleButtons),this.refreshButtons(t)}setAnchorScene(t){this.toolbar.hasBeenDragged()||this.toolbar.setAnchor(t.getAnchor())}hideOverlays(){this.toolbar.clearActiveButton(),this.colorPicker.hide({lastFocus:null}),this.textSizeMenu.hide(),this.lineStyleTypeMenu.hide(),this.lineStrokeWidthMenu.hide(),this.dispatch("hid-overlays")}clearActiveButton(){this.toolbar.clearActiveButton()}updateColors(t){this.updateColorPickerColor("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("text-color",t.getDefaultColor("text-color"),t.getDefaultOpacity("text-color"),"isMultiColor"in t&&t?.isMultiColor)}updateColorPickerColor(t,e,i,o){if(e!=null&&i!=null){const{r:s,g:a,b:n}=Sx.fromString(e);e=Sx.fromArray([s,a,n,i]).toHexString()}this.updateButtonByValue(t,{color:e,isMultiColor:o})}updateFontSize(t){this.updateButtonByValue("text-size",{label:t!=null?String(t):void 0})}updateLineStyleType(t){this.updateButtonByValue("line-style-type",{icon:t.icon})}updateStrokeWidth(t){this.updateButtonByValue("line-stroke-width",{label:t.label,strokeWidth:t.value})}dispatch(t,e){this.events.dispatch(t,e)}onButtonPress({event:t,button:e}){const i=this.getActiveDatum();if(i)switch(this.hideOverlays(),e.value){case"line-style-type":{const o=ts(i)?er(i.lineDash,i.lineStyle):void 0;this.lineStyleTypeMenu.show({items:sr,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStyle"),value:o,sourceEvent:t.sourceEvent,onPress:s=>this.onLineStyleTypeMenuPress(s,i),class:"ag-charts-annotations__line-style-type-menu"});break}case"line-stroke-width":{const o=ts(i)?i.strokeWidth:void 0;this.lineStrokeWidthMenu.show({items:mx,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStrokeWidth"),value:o,sourceEvent:t.sourceEvent,onPress:s=>this.onLineStrokeWidthMenuPress(s,i),class:"ag-charts-annotations__line-stroke-width-menu"});break}case"line-color":case"fill-color":case"text-color":{this.toolbar.toggleActiveButtonByIndex(e.index),this.colorPicker.show({color:i?.getDefaultColor(e.value),opacity:i?.getDefaultOpacity(e.value),sourceEvent:t.sourceEvent,hasMultiColorOption:"isMultiColor"in i,isMultiColor:"isMultiColor"in i&&i?.isMultiColor,onChange:i!=null?this.onColorPickerChange.bind(this,e.value,i):void 0,onChangeHide:(o=>{this.dispatch("saved-color",{type:i.type,colorPickerType:e.value,color:i.getDefaultColor(o)})}).bind(this,e.value)});break}case"text-size":{const o=io(i)?i.fontSize:void 0;this.textSizeMenu.show({items:xx,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsTextSize"),value:o,sourceEvent:t.sourceEvent,onPress:s=>this.onTextSizeMenuPress(s,i),class:"ag-charts-annotations__text-size-menu"});break}case"delete":{this.dispatch("pressed-delete");break}case"lock":{i.locked=!i.locked,this.refreshButtons(i),this.dispatch("pressed-lock");break}case"settings":{this.toolbar.toggleActiveButtonByIndex(e.index),this.dispatch("pressed-settings",t);break}}}onToolbarMoved(t){const{buttonBounds:e,popoverBounds:i}=t,o={x:i.x,y:i.y+i.height+4},s={y:i.y-4};this.colorPicker.setAnchor(o,s);for(const[a,n]of e.entries()){const r=this.visibleButtons.at(a);if(!r)continue;const l={x:n.x,y:n.y+n.height-1},c={y:n.y};switch(r.value){case"line-stroke-width":this.lineStrokeWidthMenu.setAnchor(l,c);break;case"line-style-type":this.lineStyleTypeMenu.setAnchor(l,c);break;case"text-size":this.textSizeMenu.setAnchor(l,c);break}}}onColorPickerChange(t,e,i,o,s,a){this.dispatch("updated-color",{type:e.type,colorPickerType:t,colorOpacity:i,color:o,opacity:s,isMultiColor:a}),this.updateColorPickerColor(t,i,s,a)}onTextSizeMenuPress(t,e){if(!qd(e))return;const i=t.value;this.dispatch("updated-font-size",{type:e.type,fontSize:i}),this.textSizeMenu.hide(),this.updateFontSize(i)}onLineStyleTypeMenuPress(t,e){if(!ts(e))return;const i=t.value;this.dispatch("updated-line-style",{type:e.type,lineStyleType:i}),this.lineStyleTypeMenu.hide(),this.updateLineStyleType(t)}onLineStrokeWidthMenuPress(t,e){if(!ts(e))return;const i=t.value;this.dispatch("updated-line-width",{type:e.type,strokeWidth:i}),this.lineStrokeWidthMenu.hide(),this.updateStrokeWidth(t)}refreshButtons(t){const e=t.locked??!1;for(const[i,o]of this.visibleButtons.entries())o&&(o.value==="lock"?(this.toolbar.toggleSwitchCheckedByIndex(i,e),this.updateButtonByIndex(i,e?o.checkedOverrides.toJson():o.toJson())):this.toolbar.toggleButtonEnabledByIndex(i,!e));qd(t)&&this.updateFontSize(t.fontSize),this.updateColors(t),this.updateLineStyles(t)}updateLineStyles(t){if(!ts(t))return;const e=t.strokeWidth??1,i=er(t.lineDash,t.lineStyle);this.updateStrokeWidth({strokeWidth:e,value:e,label:String(e)}),this.updateLineStyleType(sr.find(o=>o.value===i)??sr[0])}updateButtonByValue(t,e){const i=this.visibleButtons.findIndex(o=>o.value===t);i!==-1&&this.updateButtonByIndex(i,e)}updateButtonByIndex(t,e){const i=this.visibleButtons.at(t);i&&this.toolbar.updateButtonByIndex(t,{...i.toJson(),...e,value:e.value??i.value})}};p([Ws(uC)],tu.prototype,"enabled",2),p([Ws(dC)],tu.prototype,"buttons",2);import{_ModuleSupport as kC}from"ag-charts-community";var{StateMachine:vx,StateMachineProperty:eu,Vec2:Dx,Debug:OC}=kC,Bt=class extends vx{constructor(t){const e=({context:i})=>{this.node?.drag(this.datum,this.offset,i,this.snapping),t.update()};super("idle",{idle:{dragStart:{target:"dragging",action:({offset:i,context:o})=>{this.hasMoved=!1,this.dragStart=i,this.offset=i,this.node?.dragStart(this.datum,i,o)}}},dragging:{keyDown:e,keyUp:e,drag:({offset:i,context:o})=>{this.hasMoved=Dx.lengthSquared(Dx.sub(i,this.dragStart))>0,this.offset=i,this.node?.drag(this.datum,i,o,this.snapping),t.update()},dragEnd:{target:vx.parent,action:()=>{this.node?.stopDragging(),this.hasMoved&&t.recordAction("Move annotation"),t.update()}}}}),this.debug=OC.create(!0,"annotations"),this.hasMoved=!1,this.snapping=!1}};p([eu()],Bt.prototype,"snapping",2),p([eu()],Bt.prototype,"datum",2),p([eu()],Bt.prototype,"node",2);import{_ModuleSupport as TC}from"ag-charts-community";import{isObject as AC}from"ag-charts-core";var{STRING:IC,TempValidate:NC}=TC,es=class extends Yd{constructor(){super(...arguments),this.type="arrow-down"}static is(t){return AC(t)&&t.type==="arrow-down"}};p([NC(IC)],es.prototype,"type",2);import{_ModuleSupport as Mx}from"ag-charts-community";import{_ModuleSupport as kx}from"ag-charts-community";import{_ModuleSupport as Xl}from"ag-charts-community";import{isObject as CC}from"ag-charts-core";import{_ModuleSupport as Hs}from"ag-charts-community";var Ox=class a0 extends Hs.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(e){const{handle:i,locked:o}=this;return o?{point:{x:i.x,y:i.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-i.x,y:e.y-i.y}}}toggleActive(e){this.active=e,e||(this.handle.strokeWidth=a0.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){}containsPoint(e,i){return this.handle.containsPoint(e,i)}};Ox.INACTIVE_STROKE_WIDTH=2;var is=Ox,iu=class n0 extends is{constructor(){super(),this.handle=new Hs.Marker({shape:"circle"}),this.glow=new Hs.Marker({shape:"circle"}),this.append([this.handle]),this.handle.size=n0.HANDLE_SIZE,this.handle.strokeWidth=is.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties({...e,strokeWidth:is.INACTIVE_STROKE_WIDTH})}drag(e){return{point:e,offset:{x:0,y:0}}}};iu.HANDLE_SIZE=7,iu.GLOW_SIZE=9;var os=iu,Zl=class Ue extends is{constructor(){super(),this.handle=new Hs.Rect,this.glow=new Hs.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=Ue.CORNER_RADIUS,this.handle.width=Ue.HANDLE_SIZE,this.handle.height=Ue.HANDLE_SIZE,this.handle.strokeWidth=is.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=Ue.CORNER_RADIUS,this.glow.width=Ue.GLOW_SIZE,this.glow.height=Ue.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){if(super.toggleLocked(e),e){const i=(Ue.HANDLE_SIZE-os.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=i,this.handle.y+=i,this.handle.width=os.HANDLE_SIZE,this.handle.height=os.HANDLE_SIZE,this.glow.width=os.GLOW_SIZE,this.glow.height=os.GLOW_SIZE}else this.handle.cornerRadius=Ue.CORNER_RADIUS,this.handle.width=Ue.HANDLE_SIZE,this.handle.height=Ue.HANDLE_SIZE,this.glow.width=Ue.GLOW_SIZE,this.glow.height=Ue.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(e){if(this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked){delete e.fill,delete e.strokeWidth;const i=(Ue.HANDLE_SIZE-os.HANDLE_SIZE)/2;e.x-=i,e.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(e),this.glow.setProperties({...e,x:(e.x??this.glow.x)-2,y:(e.y??this.glow.y)-2,strokeWidth:0,fill:e.stroke})}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:this.gradient==="vertical"?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){if(!this.locked)return this.gradient==="vertical"?"col-resize":"row-resize"}};Zl.HANDLE_SIZE=12,Zl.GLOW_SIZE=16,Zl.CORNER_RADIUS=4;var tn=Zl,ou=class Ml extends is{constructor(){super(),this.handle=new Hs.Marker({shape:"circle"}),this.glow=new Hs.Marker({shape:"circle"}),this.append([this.glow,this.handle]),this.handle.size=Ml.HANDLE_SIZE,this.handle.strokeWidth=is.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=Ml.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){super.toggleLocked(e),e?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=os.HANDLE_SIZE,this.glow.size=os.GLOW_SIZE):(this.handle.size=Ml.HANDLE_SIZE,this.glow.size=Ml.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties({...e,strokeWidth:0,fill:e.stroke})}getCursor(){return"pointer"}};ou.HANDLE_SIZE=11,ou.GLOW_SIZE=17;var kt=ou,{ZIndexMap:LC}=Xl,Jt=class extends Xl.Group{constructor(){super(...arguments),this.name="AnnotationScene",this.zIndex=LC.CHART_ANNOTATION}static isCheck(t,e){return CC(t)&&Object.hasOwn(t,"type")&&t.type===e}toggleHovered(t){this.toggleHandles(t)}*nonHandleChildren(){for(const t of this.children())t instanceof is||(yield t)}computeBBoxWithoutHandles(){return Xl.Transformable.toCanvas(this,Xl.Group.computeChildrenBBox(this.nonHandleChildren()))}updateNode(t,e,i){if(!i&&e){this.removeChild(e);return}return i&&e==null&&(e=new t,this.appendChild(e)),e}};import{_ModuleSupport as RC}from"ag-charts-community";import{_ModuleSupport as wC}from"ag-charts-community";import{entries as PC}from"ag-charts-core";var{ContinuousScale:EC,Vec2:ui,toRadians:_C}=wC;function ar(t,e,i=!1,o,s=1){if(!i)return ke(t,e);const a=o?Mt(o,e):ui.origin();return ke(ql(t,a,s),e)}function ql(t,e,i){const o=ui.sub(t,e),s=_C(i),a=Math.round(ui.angle(o)/s)*s;return ui.rotate(o,a,e)}function Ql(t,e){const i={};for(const[o,s]of PC(t))i[o]=Mt(s,e);return i}function Co(t,e,i,o={overflowContinuous:0,translateVectors:void 0,invertYVectors:void 0,snap:void 0}){const{xAxis:s,yAxis:a}=i,n=Object.keys(t),r=[],l=[],c=new Set(o.translateVectors??n),h=new Set(o.invertYVectors??[]),d=new Set([...c,...h]),u=ui.multiply(e,ui.from(1,-1));for(const x of n)d.has(x)&&(t[x]=ui.add(t[x],h.has(x)?u:e),o.snap&&(t[x]=ql(t[x],o.snap.vectors[x],o.snap.angle))),r.push(s.getRangeOverflow(t[x].x)),l.push(a.getRangeOverflow(t[x].y));const g=(x,v)=>Math.abs(x)-Math.abs(v),f=(x,v,S)=>o.overflowContinuous===0||!EC.is(x)?S.toSorted(g).at(-1)??0:n.length===d.size?S.toSorted(g).at(-o.overflowContinuous-1)??0:S.filter(D=>D!==0).length<=o.overflowContinuous?0:S.filter((D,I)=>D!==0&&Math.abs(D)<=Math.abs(v)&&d.has(n[I])).toSorted(g).at(-1)??0,y=ui.from(f(s.scale,e.x,r),f(a.scale,e.y,l));if(!ui.equal(y,ui.origin()))for(const x of n)d.has(x)&&(t[x]=ui.round(ui.sub(t[x],y),4));const m={};for(const x of n)m[x]=ke(t[x],i);return m}var{Vec2:BC}=RC,Tx=class extends Jt{constructor(){super(...arguments),this.handle=new kt,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=Mt(t,e);this.updateHandle(t,i),this.anchor=this.updateAnchor(t,i,e)}dragStart(t,e,i){this.dragState={offset:e,...Ql({handle:t},i)}}drag(t,e,i){const{dragState:o}=this;if(t.locked||!o)return;const{point:s}=Co({point:o.handle},BC.sub(e,o.offset),i);t.x=s.x,t.y=s.y}translate(t,e,i){if(t.locked)return;const{point:o}=Co({point:Mt(t,i)},e,i);t.x=o.x,t.y=o.y}toggleHandles(t){this.handle.visible=!!t,this.handle.toggleHovered(this.activeHandle==="handle")}toggleActive(t){this.toggleHandles(t),this.handle.toggleActive(t)}stopDragging(){this.handle.toggleDragging(!1)}copy(t,e,i){const o=Mt(t,i),s=ke({x:o.x-30,y:o.y-30},i);return e.x=s.x,e.y=s.y,e}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{handle:i}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="handle",!0):!1}getNodeAtCoords(t,e){if(this.handle.containsPoint(t,e))return"handle"}updateHandle(t,e,i){const{x:o,y:s}=this.getHandleCoords(t,e,i),a=this.getHandleStyles(t);this.handle.update({...a,x:o,y:s}),this.handle.toggleLocked(t.locked??!1)}updateAnchor(t,e,i){const o=this.getHandleCoords(t,e);return{x:o.x+i.seriesRect.x,y:o.y+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i){return{x:e.x,y:e.y}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},Ax=class extends Tx{constructor(){super(),this.append([this.handle])}update(t,e){super.update(t,e);const i=Mt(t,e);this.updateShape(t,i)}updateShape(t,e){this.updateShapeStyles(t),this.updateShapePath(t,e)}updateShapeStyles(t){const{shape:e}=this;e.fill=t.fill,e.fillOpacity=t.fillOpacity??1}updateShapePath(t,e){const{shape:i}=this;i.x=e.x,i.y=e.y,i.size=t.size}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}getNodeAtCoords(t,e){return this.shape.containsPoint(t,e)?"shape":super.getNodeAtCoords(t,e)}},Ix=[[.5,0],[1,.5],[.75,.5],[.75,1],[.25,1],[.25,.5],[0,.5]];function Nx(t){kx.drawMarkerUnitPolygon(t,Ix)}Nx.anchor={x:.5,y:0};var Jl=class extends Ax{constructor(){super(),this.type="arrow-up",this.shape=new kx.Marker({shape:Nx}),this.append([this.shape])}static is(t){return Jt.isCheck(t,"arrow-up")}getHandleCoords(t,e){const i=kt.HANDLE_SIZE/2,o=super.getHandleCoords(t,e);return o.y-=i,o}},zC=Ix.map(([t,e])=>[t,1-e]);function Cx(t){Mx.drawMarkerUnitPolygon(t,zC)}Cx.anchor={x:.5,y:1};var tc=class extends Ax{constructor(){super(),this.type="arrow-down",this.shape=new Mx.Marker({shape:Cx}),this.append([this.shape])}static is(t){return Jt.isCheck(t,"arrow-down")}updateAnchor(t,e,i){const o=super.updateAnchor(t,e,i);return o.y-=t.size,o}getHandleCoords(t,e){const i=kt.HANDLE_SIZE/2,o=super.getHandleCoords(t,e);return o.y+=i,o}};import{_ModuleSupport as FC}from"ag-charts-community";var{StateMachine:ec,StateMachineProperty:VC,Debug:GC}=FC,su=class extends ec{constructor(t){const e=({point:o})=>{const s=this.createDatum();s.set({x:o.x,y:o.y}),t.create(s)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},cancel:ec.parent,reset:ec.parent},"waiting-first-render":{render:{target:ec.parent,action:i}}}),this.debug=GC.create(!0,"annotations")}};p([VC()],su.prototype,"node",2);var WC=class extends su{createDatum(){return new es}},Lx={type:"arrow-down",datum:es,scene:tc,isDatum:es.is,translate:(t,e,i,o)=>{es.is(e)&&tc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(es.is(e)&&es.is(i)&&tc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{es.is(e)&&tc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new WC({...t,create:e("arrow-down")}),dragState:t=>new Bt(t)};import{_ModuleSupport as HC}from"ag-charts-community";import{isObject as KC}from"ag-charts-core";var{STRING:UC,TempValidate:YC}=HC,ss=class extends Yd{constructor(){super(...arguments),this.type="arrow-up"}static is(t){return KC(t)&&t.type==="arrow-up"}};p([YC(UC)],ss.prototype,"type",2);var jC=class extends su{createDatum(){return new ss}},Rx={type:"arrow-up",datum:ss,scene:Jl,isDatum:ss.is,translate:(t,e,i,o)=>{ss.is(e)&&Jl.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ss.is(e)&&ss.is(i)&&Jl.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ss.is(e)&&Jl.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new jC({...t,create:e("arrow-up")}),dragState:t=>new Bt(t)};import{_ModuleSupport as $C}from"ag-charts-community";import{_ModuleSupport as wx}from"ag-charts-community";import{_ModuleSupport as XC}from"ag-charts-community";import{entries as ZC}from"ag-charts-core";import{_ModuleSupport as qC}from"ag-charts-community";var{Vec2:QC,Vec4:Px}=qC,Ex=class extends Jt{constructor(){super(...arguments),this.overflowContinuous=0}extendLine({x1:t,y1:e,x2:i,y2:o},s,a){const n={x1:t,y1:e,x2:i,y2:o};if(!s.extendStart&&!s.extendEnd)return n;const[r,l]=XI(n,a.yAxis.bounds),c=n.x2<n.x1,h=n.y1>=n.y2,d=n.x2===n.x1;return s.extendEnd&&(d?n.y2=h?l.y:r.y:(n.x2=c?r.x:l.x,n.y2=c?r.y:l.y)),s.extendStart&&(d?n.y1=h?r.y:l.y:(n.x1=c?l.x:r.x,n.y1=c?l.y:r.y)),n}dragStart(t,e,i){this.dragState={offset:e,...Ql({start:t.start,end:t.end},i)}}drag(t,e,i,o){t.locked||(this.activeHandle?this.dragHandle(t,e,i,o):this.dragAll(t,e,i))}dragAll(t,e,i){const{dragState:o}=this;o&&this.translatePoints(t,o.start,o.end,QC.sub(e,o.offset),i)}translate(t,e,i){t.locked||this.translatePoints(t,Mt(t.start,i),Mt(t.end,i),e,i)}copy(t,e,i){const o=Me(t,i);if(!o)return;const s=this.computeBBoxWithoutHandles(),a={x:-s.width/2,y:-s.height/2};return this.translatePoints(e,Px.start(o),Px.end(o),a,i),e}translatePoints(t,e,i,o,s){const a=this.getTranslatePointsVectors(e,i),n=Co(a,o,s,{overflowContinuous:this.overflowContinuous});t.start.x=n.start.x,t.end.x=n.end.x,t.start.y=n.start.y,t.end.y=n.end.y}getTranslatePointsVectors(t,e){return{start:t,end:e}}},{Vec2:JC,Vec4:_x}=XC,au=class extends Ex{constructor(){super(...arguments),this.start=new kt,this.end=new kt,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=Me(t,e);i!=null&&(this.updateHandles(t,i),this.updateAnchor(t,i,e))}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of ZC(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}dragHandle(t,e,i,o){const{activeHandle:s,dragState:a}=this;if(!s||!a)return;this[s].toggleDragging(!0);const n=s==="start"?"end":"start",r=o?{vectors:{[s]:Mt(t[n],i)},angle:t.snapToAngle}:void 0,{[s]:l}=Co({[s]:a[s]},JC.sub(e,a.offset),i,{overflowContinuous:0,snap:r});t[s].x=l.x,t[s].y=l.y}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{start:i,end:o}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):o.containsPoint(t,e)?(this.activeHandle="end",!0):!1}getNodeAtCoords(t,e){if(this.start.containsPoint(t,e)||this.end.containsPoint(t,e))return"handle"}updateHandles(t,e,i){this.start.update({...this.getHandleStyles(t,"start"),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t,"end"),...this.getHandleCoords(t,e,"end",i)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}updateAnchor(t,e,i,o){this.anchor={x:e.x1+i.seriesRect.x,y:e.y1+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i,o){return i==="start"?_x.start(e):_x.end(e)}getHandleStyles(t,e){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},{Vec4:Bx}=wx,tL=class extends au{constructor(){super(...arguments),this.label=new wx.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty("TextualStartEndScene")}update(t,e){const i=Me(t,e);if(i==null)return;const o=this.getTextBBox(t,i);this.updateLabel(t,o,i),this.updateHandles(t,i,o),this.updateShape(t,o,i),this.updateAnchor(t,i,e,o)}containsPoint(t,e){return super.containsPoint(t,e)||this.label.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e){const{text:i}=t.getText();return Ud(t,i,Bx.end(e),this.textInputBBox)}updateLabel(t,e,i){const{text:o,isPlaceholder:s}=t.getText();jm(this.label,o,s,t,this.getLabelCoords(t,e,i))}updateShape(t,e,i){}getLabelCoords(t,e,i){return Bx.end(i)}getHandleStyles(t,e){return{...super.getHandleStyles(t,e),stroke:t.handle.stroke??t.color}}},{drawCorner:eL,Path:iL}=$C,ic=class extends tL{constructor(){super(),this.type="callout",this.shape=new iL,this.append([this.shape,this.label,this.start,this.end])}static is(t){return Jt.isCheck(t,"callout")}drag(t,e,i,o){t.locked||(this.activeHandle==="end"?this.dragHandle(t,e,i,o):this.dragAll(t,e,i))}getLabelCoords(t,e,i){const o=t.getPadding(),{bodyBounds:s={x:0,y:0,width:0,height:0}}=this.getDimensions(t,e,i)??{};return{x:s.x+o.left,y:s.y-o.bottom}}getHandleStyles(t,e){return e==="start"?{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(t,e,i,o){const{bodyBounds:s}=this.getDimensions(t,o,e)??{},a=s??o;this.anchor={x:a.x+i.seriesRect.x,y:a.y+i.seriesRect.y-a.height,position:this.anchor.position}}updateShape(t,e,i){const{shape:o}=this;o.fill=t.fill,o.fillOpacity=t.fillOpacity??1,o.stroke=t.stroke,o.strokeWidth=t.strokeWidth??1,o.strokeOpacity=t.strokeOpacity??1;const{tailPoint:s,bodyBounds:a}=this.getDimensions(t,e,i)??{};!s||!a||this.updatePath(s,a)}updatePath(t,e){const{x:i,y:o}=t,{x:s,y:a,width:n,height:r}=e,l=a-r,c=s+n,h=this.calculateCalloutPlacement({x:i,y:o},e),d=8,u=[{coordinates:{x0:s,x1:s+d,y0:l+d,y1:l,cx:h==="topLeft"?i:s+d,cy:h==="topLeft"?o:l+d},type:h==="topLeft"?"calloutCorner":"corner"},{coordinates:{x0:s+d,x1:c-d,y0:l,y1:l,cx:i,cy:o},type:h==="top"?"calloutSide":"side"},{coordinates:{x0:c-d,x1:c,y0:l,y1:l+d,cx:h==="topRight"?i:c-d,cy:h==="topRight"?o:l+d},type:h==="topRight"?"calloutCorner":"corner"},{coordinates:{x0:c,x1:c,y0:l+d,y1:a-d,cx:i,cy:o},type:h==="right"?"calloutSide":"side"},{coordinates:{x0:c,x1:c-d,y0:a-d,y1:a,cx:h==="bottomRight"?i:c-d,cy:h==="bottomRight"?o:a-d},type:h==="bottomRight"?"calloutCorner":"corner"},{coordinates:{x0:c-d,x1:s+d,y0:a,y1:a,cx:i,cy:o},type:h==="bottom"?"calloutSide":"side"},{coordinates:{x0:s+d,x1:s,y0:a,y1:a-d,cx:h==="bottomLeft"?i:s+d,cy:h==="bottomLeft"?o:a-d},type:h==="bottomLeft"?"calloutCorner":"corner"},{coordinates:{x0:s,x1:s,y0:a-d,y1:l+d,cx:i,cy:o},type:h==="left"?"calloutSide":"side"}],{path:g}=this.shape;g.clear(),g.moveTo(s,l+d),u.forEach(({coordinates:f,type:y})=>{this.drawPath(g,f,d,y)}),g.closePath()}drawPath(t,{x0:e,y0:i,x1:o,y1:s,cx:a,cy:n},r,l){switch(l){case"calloutCorner":{t.lineTo(a,n),t.lineTo(o,s);break}case"corner":{eL(t,{x0:e,x1:o,y0:i,y1:s,cx:a,cy:n},r,!1);break}case"calloutSide":{if(e!==o){const h=e>o?-1:1,d=Math.min(e,o)+Math.abs(o-e)/2;t.lineTo(d-6*h,i),t.lineTo(a,n),t.lineTo(d+6*h,i),t.lineTo(o,s)}else{const h=i>s?-1:1,d=Math.min(i,s)+Math.abs(i-s)/2;t.lineTo(e,d-6*h),t.lineTo(a,n),t.lineTo(e,d+6*h),t.lineTo(o,s)}break}case"side":default:{t.lineTo(o,s);break}}}calculateCalloutPlacement(t,e){const i=e.x+e.width,o=e.y-e.height;let s,a;return t.x>i?s="right":t.x<e.x&&(s="left"),t.y>e.y?a="bottom":t.y<o&&(a="top"),s&&a?`${a}${s[0].toUpperCase()}${s.substring(1)}`:a??s}getDimensions(t,e,i){const{fontSize:o}=t,s=t.getPadding(),a=s.left+s.right,n=s.top+s.bottom,r=e.width+a,l=Math.max(e.height+n,o+n);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:e.x,y:e.y,width:r,height:l}}}containsPoint(t,e){const{start:i,end:o,shape:s}=this;if(this.activeHandle=void 0,i.containsPoint(t,e))return this.activeHandle="start",!0;const a=o.containsPoint(t,e)||s.containsPoint(t,e);return a&&(this.activeHandle="end"),a}};import{_ModuleSupport as oL}from"ag-charts-community";function nu({key:t}){return t==="Escape"}function ru({key:t,shiftKey:e}){return!e&&t==="Enter"}var{StateMachine:Ci,StateMachineProperty:zx,Debug:sL}=oL,lu=class extends Ci{constructor(t){const e=({point:u})=>{const g=this.createDatum();g.set({start:u,end:u,visible:!0}),t.create(g)},i=()=>{const{node:u}=this;u?.toggleActive(!0),u?.toggleHandles({start:!0})},o=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},s=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},a=u=>{this.node?.setTextInputBBox(u),t.update()},n=({point:u})=>{const{datum:g,node:f}=this;g?.set({end:u}),f?.toggleActive(!0),f?.toggleHandles({end:!1}),t.update()},r=()=>{t.showAnnotationOptions(),this.node?.toggleHandles({end:!0})},l=({colorPickerType:u,colorOpacity:g,color:f,opacity:y,isMultiColor:m})=>{const{datum:x}=this;x&&(u==="text-color"&&t.updateTextInputColor(f),jl(x,u,g,f,y,m),t.update())},c=u=>{const{datum:g,node:f}=this;!g||!f||!io(g)||(g.fontSize=u,t.updateTextInputFontSize(u),t.update())},h=()=>{t.delete()},d=({textInputValue:u,bbox:g})=>{const{datum:f}=this;if(g!=null&&u!=null&&u.length>0){if(!io(f))return;const y=Gl(f,u,g.width);f?.set({text:y}),t.update(),t.recordAction(`Create ${f?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:Ci.parent,reset:Ci.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:n,drag:n,click:{target:"edit",action:r},dragEnd:{target:"edit",action:r},reset:{target:Ci.parent,action:h},cancel:{target:Ci.parent,action:h}},edit:{onEnter:o,updateTextInputBBox:a,color:l,fontSize:c,textInput:[{guard:nu,target:Ci.parent,action:h},{guard:ru,target:Ci.parent,action:d}],click:{target:Ci.parent,action:d},dragStart:{target:Ci.parent,action:d},resize:{target:Ci.parent,action:d},onExit:s,cancel:{target:Ci.parent,action:h}}}),this.debug=sL.create(!0,"annotations")}};p([zx()],lu.prototype,"datum",2),p([zx()],lu.prototype,"node",2);var aL=class extends lu{createDatum(){return new Ni}},Fx={type:"callout",datum:Ni,scene:ic,isDatum:Ni.is,translate:(t,e,i,o)=>{if(Ni.is(e)&&ic.is(t))return t.translate(e,i,o)},copy:(t,e,i,o)=>{if(Ni.is(e)&&Ni.is(i)&&ic.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{Ni.is(e)&&ic.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new aL({...t,create:e("callout")}),dragState:t=>new Bt(t)};import{_ModuleSupport as Vx}from"ag-charts-community";import{_ModuleSupport as nL}from"ag-charts-community";var cu=class extends Tx{constructor(){super(...arguments),this.label=new nL.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty("TextualPointScene")}update(t,e){const i=Mt(t,e),o=this.getTextBBox(t,i,e);this.updateLabel(t,o),this.updateHandle(t,i,o),this.updateShape(t,o),this.anchor=this.updateAnchor(t,o,e)}copy(t,e,i){const o=Mt(t,i),s=this.getTextBBox(t,o,i),a=t.getPadding(),n=a.left+a.right,r=a.top+a.bottom,l=(s.width+n)/2,c=s.height+r,h=ke({x:o.x-l,y:o.y-c},i);return e.x=h.x,e.y=h.y,e}containsPoint(t,e){const{label:i}=this;return super.containsPoint(t,e)||i.visible&&i.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.visible&&this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e,i){const{text:o}=t.getText();return Ud(t,o,{x:e.x,y:e.y},this.textInputBBox)}updateLabel(t,e){const{text:i,isPlaceholder:o}=t.getText();jm(this.label,i,o,t,this.getLabelCoords(t,e),this.getTextBaseline(t))}updateShape(t,e){}updateAnchor(t,e,i){return{x:e.x+i.seriesRect.x,y:e.y+i.seriesRect.y-e.height,position:this.anchor.position}}getLabelCoords(t,e){return e}getTextBaseline(t){return t.position=="center"?"middle":t.position}getHandleCoords(t,e,i){return i}getHandleStyles(t){const e=super.getHandleStyles(t);return e.stroke=t.handle.stroke??t.color,e}},{drawCorner:hu}=Vx,oc=class extends cu{constructor(){super(),this.type="comment",this.shape=new Vx.Path,this.append([this.shape,this.label,this.handle])}static is(t){return Jt.isCheck(t,"comment")}updateShape(t,e){const{shape:i}=this;i.fill=t.fill,i.fillOpacity=t.fillOpacity??1,i.stroke=t.stroke??"transparent",i.strokeWidth=t.strokeWidth??1,i.strokeOpacity=t.strokeOpacity??1,this.updatePath(t,e)}getLabelCoords(t,e){const i=t.getPadding();return{x:e.x+i.left,y:e.y-i.bottom}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}updateAnchor(t,e,i){const o=super.updateAnchor(t,e,i),s=t.getPadding();return o.y-=s.bottom+s.top,o}updatePath(t,e){const i=t.getPadding(),{x:o,y:s}=e;let{width:a,height:n}=e;const{fontSize:r}=t,l=i.left+i.right,c=i.top+i.bottom;a=a+l,n=Math.max(n+c,r+c);const h=s-n,d=o+a,u=(r*ir+c)/2,{path:g}=this.shape;g.clear(),g.moveTo(o,s),g.lineTo(o,h+u),hu(g,{x0:o,x1:o+u,y0:h+u,y1:h,cx:o+u,cy:h+u},u,!1),g.lineTo(d-u,h),hu(g,{x0:d-u,x1:d,y0:h,y1:h+u,cx:d-u,cy:h+u},u,!1),g.lineTo(d,s-u),hu(g,{x0:d,x1:d-u,y0:s-u,y1:s,cx:d-u,cy:s-u},u,!1),g.closePath()}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}};import{_ModuleSupport as rL}from"ag-charts-community";var{StateMachine:Lo,StateMachineProperty:Gx,Debug:lL}=rL,nr=class extends Lo{constructor(t){const e=({point:h})=>{const d=this.createDatum();d.set({x:h.x,y:h.y}),t.create(d)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()},o=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},s=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},a=h=>{this.node?.setTextInputBBox(h),t.update()},n=({colorPickerType:h,colorOpacity:d,color:u,opacity:g,isMultiColor:f})=>{this.datum&&(h==="text-color"&&t.updateTextInputColor(u),jl(this.datum,h,d,u,g,f),t.update())},r=h=>{const{datum:d,node:u}=this;!d||!u||!io(d)||(d.fontSize=h,t.updateTextInputFontSize(h),t.update())},l=()=>{t.delete()},c=({textInputValue:h,bbox:d})=>{if(d!=null&&h!=null&&h.length>0){const{datum:u}=this;if(!io(u))return;const g=Gl(u,h,d.width);u?.set({text:g}),t.update(),t.recordAction(`Create ${u?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:Lo.parent,reset:Lo.parent},"waiting-first-render":{render:{target:"edit",action:i}},edit:{onEnter:o,updateTextInputBBox:a,color:n,fontSize:r,textInput:[{guard:nu,target:Lo.parent,action:l},{guard:ru,target:Lo.parent,action:c}],click:{target:Lo.parent,action:c},dragStart:{target:Lo.parent,action:c},resize:{target:Lo.parent,action:c},onExit:s,cancel:{target:Lo.parent,action:l}}}),this.debug=lL.create(!0,"annotations")}};p([Gx()],nr.prototype,"datum",2),p([Gx()],nr.prototype,"node",2);var cL=class extends nr{createDatum(){return new Ji}},Wx={type:"comment",datum:Ji,scene:oc,isDatum:Ji.is,translate:(t,e,i,o)=>{Ji.is(e)&&oc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(Ji.is(e)&&Ji.is(i)&&oc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{Ji.is(e)&&oc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new cL({...t,create:e("comment")}),dragState:t=>new Bt(t)};import{_ModuleSupport as hL}from"ag-charts-community";import{_ModuleSupport as sc}from"ag-charts-community";var{calculateLabelTranslation:pL,ChartAxisDirection:dL}=sc,Hx=class extends sc.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new sc.Text({zIndex:1}),this.rect=new sc.Rect;const{label:t}=this;t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.textBaseline="middle",t.textAlign="center",this.append([this.rect,this.label])}update(t){this.updateLabel(t),this.updateRect(t),this.updatePosition(t)}updateLabel({value:t,styles:e,context:i}){const{fontWeight:o,fontSize:s,fontStyle:a,fontFamily:n,textAlign:r,color:l="white",formatter:c}=e,h=c?c({value:t}):i.scaleValueFormatter()(t);this.label.setProperties({fontWeight:o,fontSize:s,fontStyle:a,fontFamily:n,textAlign:r,fill:l,text:h})}updateRect({styles:t}){const{rect:e}=this,{cornerRadius:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:n}=t;e.setProperties({cornerRadius:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:n})}updatePosition({x:t,y:e,context:i,styles:{padding:o}}){const{label:s,rect:a}=this,n=s.getBBox()?.clone(),r=o??8,l=o??5;n.grow(r,"horizontal"),n.grow(l,"vertical");const c=i.direction===dL.X?Math.round(l/2):r,{xTranslation:h,yTranslation:d}=pL({yDirection:!0,padding:i.labelPadding-c,position:i.position??"left",bbox:n}),u=t+h,g=e+d;s.x=u,s.y=g,a.y=g-Math.round(n.height/2),a.x=u-Math.round(n.width/2),a.height=n.height,a.width=n.width}};Hx.className="AxisLabel";import{_ModuleSupport as ac}from"ag-charts-community";var{Vec2:oo}=ac,Pe=class extends ac.Line{constructor(){super(...arguments),this.growCollisionBox=9,this.clipMask=new Map}setProperties(t,e){return super.setProperties(t,e),this.updateCollisionBBox(),this}updateCollisionBBox(){const{growCollisionBox:t,strokeWidth:e,x1:i,y1:o,x2:s,y2:a}=this;let n=e+t;n%2===0&&(n+=1);const r=oo.from(i,o-Math.floor(n/2)),l=oo.from(s,a),c=oo.distance(r,l);this.collisionBBox=new ac.BBox(r.x,r.y,c,n)}isPointInPath(t,e){const{collisionBBox:i,x1:o,y1:s,x2:a,y2:n}=this;if(!i)return!1;const r=oo.from(o,s),l=oo.from(a,n),c=oo.sub(oo.from(t,e),r),h=oo.sub(l,r),d=oo.rotate(c,oo.angle(c,h),r);return i.containsPoint(d.x,d.y)??!1}render(t){this.applyClipMask(t.ctx),super.render(t),this.closeClipMask(t.ctx)}setClipMask(t,e){const i=this.clipMask.get(t);ac.jsonDiff(i,e)!=null&&this.markDirty("CollidableLine"),e?this.clipMask.set(t,e):this.clipMask.delete(t)}applyClipMask(t){const{clipMask:e}=this;e.size!==0&&this.clipMask.forEach(i=>{const{x:o,y:s,radius:a}=i;t.save(),t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.ellipse(o,s,a,a,0,Math.PI*2,0,!0),t.clip()})}closeClipMask(t){this.clipMask.size!==0&&t.restore()}};import{_ModuleSupport as uL}from"ag-charts-community";var Ks=class extends uL.TransformableText{constructor(){super(...arguments),this.growCollisionBox={top:4,right:4,bottom:4,left:4}}isPointInPath(t,e){const i=this.fromParentPoint(t,e),o=this.computeBBoxWithoutTransforms();return o?o.grow(this.growCollisionBox).containsPoint(i.x,i.y):!1}};import{_ModuleSupport as gL}from"ag-charts-community";var{Vec2:fe}=gL;function en(t,e,i,o,s,a,n){if(!a||!s||!o){e.setClipMask(t);return}const{alignment:r,position:l}=o,c=Ux(i,o.fontSize,n),{point:h,textBaseline:d}=Yx(c,l,r);jx(s,a,o,h,c.angle,d);const{x:u,y:g,width:f,height:y}=s.getBBox(),m=fe.length(fe.from(f,y)),x={x:u+f/2,y:g+y/2,radius:m/2+fe.length(c.offset)};return l==="center"?e.setClipMask(t,x):e.setClipMask(t),{clipMask:x,numbers:c}}function Kx(t,e,i,o,s,a,n){if(!n||!a)return;const{alignment:r,position:l}=o,[c,h]=e.y1<=i.y1?[e,i]:[i,e];let d=c;l==="bottom"?d=h:l==="inside"&&(d={x1:(c.x1+h.x1)/2,y1:(c.y1+h.y1)/2,x2:(c.x2+h.x2)/2,y2:(c.y2+h.y2)/2});const u=Ux(d,o.fontSize,s),{point:g,textBaseline:f}=Yx(u,l==="inside"?"center":l,r,t);jx(a,n,o,g,u.angle,f)}function Ux(t,e,i){let[o,s]=fe.from(t);o.x>s.x&&([o,s]=[s,o]);const a=fe.normalized(fe.sub(s,o)),n=fe.angle(a),r=fe.multiply(a,kt.HANDLE_SIZE/2+(e??14)/2),l=fe.multiply(a,(i??2)/2+(e??14)/3);return{left:o,right:s,normal:a,angle:n,inset:r,offset:l}}function Yx({left:t,right:e,normal:i,angle:o,inset:s,offset:a},n,r,l){let c;r==="right"?c=fe.sub(e,s):r==="center"?c=fe.add(t,fe.multiply(i,fe.distance(t,e)/2)):c=fe.add(t,s);let h="bottom";return n==="bottom"?(c=fe.rotate(a,o+Math.PI/2,c),h="top"):n==="center"&&!l?h="middle":c=fe.rotate(a,o-Math.PI/2,c),{point:c,textBaseline:h}}function jx(t,e,i,o,s,a){t.setProperties({text:e,x:o.x,y:o.y,rotation:s,rotationCenterX:o.x,rotationCenterY:o.y,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textAlign:i.alignment,textBaseline:a})}var{ChartAxisDirection:fL,Vec2:Us,Vec4:pu}=hL,as=class extends Jt{constructor(){super(),this.type="cross-line",this.line=new Pe,this.middle=new tn,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(t){return Jt.isCheck(t,"cross-line")}update(t,e){const{seriesRect:i}=e;this.seriesRect=i,this.isHorizontal=ge.is(t);const o=this.isHorizontal?e.yAxis:e.xAxis,s=this.convertCrossLine(t,o);if(s==null){this.visible=!1;return}this.visible=t.visible??!0,this.visible&&(this.updateLine(t,s),this.updateHandle(t,s),this.updateText(t,s),this.updateAxisLabel(t,o,s))}updateLine(t,e){const{line:i}=this,{lineDashOffset:o,stroke:s,strokeWidth:a,strokeOpacity:n}=t,{x1:r,y1:l,x2:c,y2:h}=e;i.setProperties({x1:r,y1:l,x2:c,y2:h,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:o,stroke:s,strokeWidth:a,strokeOpacity:n,fillOpacity:0})}updateHandle(t,e){const{middle:i}=this,{locked:o,stroke:s,strokeWidth:a,strokeOpacity:n}=t,r={fill:t.handle.fill,stroke:t.handle.stroke??s,strokeOpacity:t.handle.strokeOpacity??n,strokeWidth:t.handle.strokeWidth??a},l=Us.sub(pu.center(e),Us.from(i.handle.width/2,i.handle.height/2));i.gradient=this.isHorizontal?"horizontal":"vertical",i.update({...r,...l}),i.toggleLocked(o??!1)}updateText(t,e){this.text=this.updateNode(Ks,this.text,!!t.text.label),en(this.line.id,this.line,e,t.text,this.text,t.text.label,t.strokeWidth)}createAxisLabel(t){const e=new Hx;return t.attachLabel(e),e}updateAxisLabel(t,e,i){this.axisLabel||(this.axisLabel=this.createAxisLabel(e));const{axisLabel:o,seriesRect:s}=this,{direction:a,position:n}=e;if(t.axisLabel.enabled){o.visible=this.visible;const r=n==="left"||n==="top"?pu.start(i):pu.end(i),l=a===fL.X?r.x:r.y;if(!e.inRange(l)){o.visible=!1;return}const c=_t(t.value);o.update({...Us.add(r,Us.required(s)),value:c,styles:t.axisLabel,context:e})}else o.visible=!1}setAxisLabelOpacity(t){this.axisLabel&&(this.axisLabel.opacity=t)}setAxisLabelVisible(t){this.axisLabel&&(this.axisLabel.visible=t)}toggleHandles(t){this.middle.visible=t,this.middle.toggleHovered(this.activeHandle==="middle")}destroy(){super.destroy(),this.axisLabel?.destroy()}toggleActive(t){this.toggleHandles(t),this.middle.toggleActive(t)}dragStart(t,e,i){const o=ge.is(t)?{x:e.x,y:Do(t.value,i.yAxis)}:{x:Do(t.value,i.xAxis),y:e.y};this.dragState={offset:e,middle:o}}drag(t,e,i){const{activeHandle:o,dragState:s}=this;t.locked||!s||(o&&this[o].toggleDragging(!0),this.translatePoint(t,s.middle,Us.sub(e,s.offset),i))}translate(t,e,i){if(t.locked)return;const o=ge.is(t)?Us.from(0,Do(t.value,i.yAxis)):Us.from(Do(t.value,i.xAxis),0);this.translatePoint(t,o,e,i)}translatePoint(t,e,i,o){const s=ge.is(t);s?i.x=0:i.y=0;const{point:a}=Co({point:e},i,o);t.value=s?a.y:a.x}stopDragging(){this.middle.toggleDragging(!1)}copy(t,e,i){const o=ge.is(t),s=this.isHorizontal?i.yAxis:i.xAxis,a=this.convertCrossLine(t,s);if(!a)return;const n=o?-30:0,r=o?0:-30,l=ke({x:a.x1+r,y:a.y1+n},i);return e.set({value:o?l.y:l.x}),e}getCursor(){return this.activeHandle==null?"pointer":this[this.activeHandle].getCursor()}containsPoint(t,e){const{middle:i,line:o,text:s}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="middle",!0):o.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.line.isPointInPath(t,e))return"line";if(this.middle.containsPoint(t,e))return"handle"}getAnchor(){const t=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:t.x+t.width/2,y:t.y}:{x:t.x+t.width,y:t.y+t.height/2,position:"right"}}convertCrossLine(t,e){if(t.value==null)return;let i=0,o=0,s,a;const{bounds:n}=e,r=Do(t.value,e);return ge.is(t)?(s=n.width,o=r,a=r):(i=r,s=r,a=n.height),{x1:i,y1:o,x2:s,y2:a}}};import{_ModuleSupport as yL}from"ag-charts-community";var{StateMachine:nc,StateMachineProperty:mL,Debug:xL}=yL,du=class extends nc{constructor(t,e){const i=({point:s})=>{const a=t==="horizontal",n=a?new ge:new to;n.set({value:a?s.y:s.x}),e.create(n),e.recordAction(`Create ${a?"horizontal-line":"vertical-line"} annotation`)},o=()=>{this.node?.toggleActive(!0),e.showAnnotationOptions(),e.update()};super("start",{start:{click:{target:"waiting-first-render",action:i},drag:{target:"waiting-first-render",action:i},reset:nc.parent,cancel:nc.parent},"waiting-first-render":{render:{target:nc.parent,action:o}}}),this.debug=xL.create(!0,"annotations")}};p([mL()],du.prototype,"node",2);var $x={type:"horizontal-line",datum:ge,scene:as,isDatum:ge.is,translate:(t,e,i,o)=>{ge.is(e)&&as.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ge.is(e)&&ge.is(i)&&as.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ge.is(e)&&as.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new du("horizontal",{...t,create:e("horizontal-line")}),dragState:t=>new Bt(t)},Xx={type:"vertical-line",datum:to,scene:as,isDatum:to.is,translate:(t,e,i,o)=>{to.is(e)&&as.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(to.is(e)&&to.is(i)&&as.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{to.is(e)&&as.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new du("vertical",{...t,create:e("vertical-line")}),dragState:t=>new Bt(t)};import{_ModuleSupport as SL}from"ag-charts-community";import{_ModuleSupport as Zx}from"ag-charts-community";import{_ModuleSupport as bL}from"ag-charts-community";var{Vec4:vL}=bL,qx=class{static updateBackground(t,e,i,o){const{background:s}=this,{seriesRect:a}=o;s.path.clear(!0);const n=vL.from(0,0,a.width,a.height),r=this.getBackgroundPoints(t,e,i,n);for(let c=0;c<r.length;c++){const h=r[c];c===0?s.path.moveTo(h.x,h.y):s.path.lineTo(h.x,h.y)}s.path.closePath(),s.checkPathDirty();const l=this.getBackgroundStyles?.(t)??t.background;s.setProperties({fill:l.fill,fillOpacity:l.fillOpacity})}},Qx=class extends Ex{constructor(){super(...arguments),this.handles={},this.overflowContinuous=2,this.topLine=new Pe,this.bottomLine=new Pe,this.background=new Zx.Path({zIndex:-1}),this.anchor={x:0,y:0},this.updateBackground=qx.updateBackground.bind(this)}update(t,e){const{locked:i,visible:o}=t,s=Me(t,e),a=Me(t.bottom,e);if(s==null||a==null){this.visible=!1;return}else this.visible=o??!0;const n=this.extendLine(s,t,e),r=this.extendLine(a,t,e);this.updateLines(t,n,r,e,s,a),this.updateHandles(t,s,a),this.updateText(t,s,a),this.updateBackground(t,n,r,e),this.updateAnchor(s,a);for(const l of Object.values(this.handles))l.toggleLocked(i??!1)}toggleHandles(t){const{handles:e}=this;if(typeof t=="boolean"){for(const[i,o]of Object.entries(e))o.visible=t,o.toggleHovered(this.activeHandle===i);return}for(const[i,o]of Object.entries(t)){const s=e[i];s.visible=o??!0,s.toggleHovered(this.activeHandle===i)}}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}stopDragging(){const{activeHandle:t,handles:e}=this;t!=null&&e[t].toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(t,e){const{handles:i,topLine:o,bottomLine:s,text:a}=this;this.activeHandle=void 0;for(const[n,r]of Object.entries(i))if(r.containsPoint(t,e))return this.activeHandle=n,!0;return o.containsPoint(t,e)||s.containsPoint(t,e)||!!a?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.topLine.containsPoint(t,e)||this.bottomLine.containsPoint(t,e))return"line";for(const[i,o]of Object.entries(this.handles))if(o.containsPoint(t,e))return"handle"}updateAnchor(t,e){const{x:i,y:o}=Zx.Transformable.toCanvasPoint(this.topLine,(t.x1+t.x2)/2,Math.min(t.y1,t.y2,e.y1,e.y2));this.anchor.x=i,this.anchor.y=o}},{Vec2:gi,Vec4:ns}=SL,rc=class extends Qx{constructor(){super(),this.type="disjoint-channel",this.handles={topLeft:new kt,topRight:new kt,bottomLeft:new kt,bottomRight:new tn},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return Jt.isCheck(t,"disjoint-channel")}dragHandle(t,e,i,o){const{activeHandle:s,handles:a}=this;if(s==null)return;const{offset:n}=a[s].drag(e);a[s].toggleDragging(!0),s==="bottomRight"&&(n.x=0);let r=[],l=[],c=o;switch(s){case"topLeft":r=["topLeft"],l=["bottomLeft"];break;case"bottomLeft":r=["bottomLeft"],l=["topLeft"];break;case"topRight":r=["topRight"],l=["bottomRight"];break;case"bottomRight":r=["bottomLeft","bottomRight"],c=!1;break}const h=Me(t,i),d=Me(t.bottom,i);if(!h||!d)return;const u={topLeft:ns.start(h),topRight:ns.end(h),bottomLeft:ns.start(d),bottomRight:ns.end(d)},g={vectors:{topLeft:u.topRight,bottomLeft:u.bottomRight,topRight:u.topLeft,bottomRight:u.bottomLeft},angle:t.snapToAngle},f=Co(u,n,i,{overflowContinuous:this.overflowContinuous,translateVectors:r,invertYVectors:l,snap:c?g:void 0});t.start.x=f.topLeft.x,t.start.y=f.topLeft.y,t.end.x=f.topRight.x,t.end.y=f.topRight.y,t.startHeight=f.topLeft.y-f.bottomLeft.y,t.endHeight=f.topRight.y-f.bottomRight.y}getTranslatePointsVectors(t,e){const{bottomLeft:i,bottomRight:o,topLeft:s,topRight:a}=this.handles,n=i.getBBox().y-s.getBBox().y,r=o.getBBox().y-a.getBBox().y,l=gi.add(t,gi.from(0,n)),c=gi.add(e,gi.from(0,r));return{start:t,end:e,bottomStart:l,bottomEnd:c}}updateLines(t,e,i){const{topLine:o,bottomLine:s}=this,{lineDashOffset:a,stroke:n,strokeOpacity:r,strokeWidth:l}=t,c={lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:a,stroke:n,strokeOpacity:r,strokeWidth:l};o.setProperties({...e,...c}),s.setProperties({...i,...c})}updateHandles(t,e,i){const{handles:{topLeft:o,topRight:s,bottomLeft:a,bottomRight:n}}=this,r={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};o.update({...r,...ns.start(e)}),s.update({...r,...ns.end(e)}),a.update({...r,...ns.start(i)}),n.update({...r,...gi.sub(ns.end(i),gi.from(n.handle.width/2,n.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(Ks,this.text,!!t.text.label),Kx(!1,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,o){const s=e.x1>e.x2,a=e.y1>e.y2,n=a?o.y2:o.y1,r=a?o.y1:o.y2,l=gi.from(e);return t.extendEnd&&e.y2===r&&l.push(gi.from(s?o.x1:o.x2,a?o.y1:o.y2)),t.extendEnd&&i.y2===n&&l.push(gi.from(s?o.x1:o.x2,a?o.y2:o.y1)),l.push(...gi.from(i).reverse()),t.extendStart&&i.y1===r&&l.push(gi.from(s?o.x2:o.x1,a?o.y1:o.y2)),t.extendStart&&e.y1===n&&l.push(gi.from(s?o.x2:o.x1,a?o.y2:o.y1)),l}};import{_ModuleSupport as DL}from"ag-charts-community";import{isNumber as on}from"ag-charts-core";var{StateMachine:rs,StateMachineProperty:uu,Debug:ML}=DL,lc=class extends rs{constructor(t){const e=({point:l})=>{const c=new hi;c.set({start:l,end:l,startHeight:0,endHeight:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topRight:!1,bottomLeft:!1,bottomRight:!1})},o=({offset:l,context:c})=>{const{datum:h,snapping:d}=this;h&&(h.set({end:ar(l,c,d,h.start,h.snapToAngle)}),t.update())},s=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},a=({point:l})=>{const{datum:c,node:h}=this,d=_t(c?.end.y),u=_t(c?.start.y),{y:g}=l;if(c==null||!on(u)||!on(d)||!on(g))return;const f=d-(g??0),y=(u-d)*2+f,m={x:c?.start.x,y:u-y},x={x:c?.end.x,y:l.y};h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint(m,{overflowContinuous:!0})||!t.validatePoint(x,{overflowContinuous:!0}))&&(c.set({startHeight:y,endHeight:f}),t.update())},n=({point:l})=>{const{datum:c,node:h}=this,d=_t(c?.end.y),u=_t(c?.start.y),{y:g}=l;if(c==null||!on(u)||!on(d)||!on(g))return;const f=d-(g??0),y=(u-d)*2+f,m={x:c.start.x,y:u-f},x={x:c.end.x,y:l.y};h?.toggleHandles(!0),!(!t.validatePoint(m,{overflowContinuous:!0})||!t.validatePoint(x,{overflowContinuous:!0}))&&(c.set({startHeight:y,endHeight:f}),t.recordAction("Create disjoint-channel annotation"),t.showAnnotationOptions(),t.update())},r=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:rs.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,drag:o,click:{target:"height",action:s},dragEnd:{target:"height",action:s},reset:{target:rs.parent,action:r},cancel:{target:rs.parent,action:r}},height:{hover:a,click:{target:rs.parent,action:n},drag:{target:rs.parent,action:n},reset:{target:rs.parent,action:r},cancel:{target:rs.parent,action:r}}}),this.debug=ML.create(!0,"annotations"),this.snapping=!1}};p([uu()],lc.prototype,"datum",2),p([uu()],lc.prototype,"node",2),p([uu()],lc.prototype,"snapping",2);var Jx={type:"disjoint-channel",datum:hi,scene:rc,isDatum:hi.is,translate:(t,e,i,o)=>{hi.is(e)&&rc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(hi.is(e)&&hi.is(i)&&rc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{hi.is(e)&&rc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new lc({...t,create:e("disjoint-channel")}),dragState:t=>new Bt(t)};import{_ModuleSupport as kL}from"ag-charts-community";import{entries as OL}from"ag-charts-core";import{_ModuleSupport as Ro}from"ag-charts-community";var gu=[0,23.6,38.2,50,61.8,78.6,100],TL=[161.8,261.8,361.8,423.6],AL=[...gu,...TL],IL={10:AL,6:gu,4:gu.filter(t=>t!==78.6&&t!==23.6)},NL=10;function CL(t,e){const{x2:i,y1:o,y2:s}=t,a=o-s;return e==null?{x1:i,x2:i,y1:s-a,y2:s}:{x1:e.x1,x2:e.x2,y1:e.y2-a,y2:e.y2}}function tS({x1:t,y1:e,x2:i,y2:o},s,a,n,r=10){const l=e-o,c=a?-1:1;let h=n;const d=[];return IL[r].forEach((u,g)=>{const f=n+l*(u/100)*c,y=s.yAxis.scaleInvert(f);d.push({id:g,x1:t,x2:i,y1:h,y2:f,tag:u==100?0:1,label:{x1:Math.min(t,i)-NL,x2:i,y1:f,y2:f,text:`${(u/100).toFixed(3)} (${y.toFixed(2)})`}}),h=f}),d}var{Vec2:LL,Vec4:eS}=Ro,iS=class extends Jt{constructor(){super(),this.trendLine=new Pe,this.rangeFillsGroup=new Ro.Group({name:`${this.id}-range-fills`}),this.rangeFillsGroupSelection=Ro.Selection.select(this.rangeFillsGroup,Ro.Range),this.rangeStrokesGroup=new Ro.Group({name:`${this.id}-range-strokes`}),this.rangeStrokesGroupSelection=Ro.Selection.select(this.rangeStrokesGroup,Pe),this.labelsGroup=new Ro.Group({name:`${this.id}-ranges-labels`}),this.labelsGroupSelection=Ro.Selection.select(this.labelsGroup,Ks),this.anchor={x:0,y:0,position:"above"},this.append([this.trendLine,this.rangeFillsGroup,this.rangeStrokesGroup,this.labelsGroup])}update(t,e){let i=Me(t,e);if(i==null){this.visible=!1;return}if(i=eS.round(i),this.visible=t.visible??!0,!this.visible)return;this.updateLine(t,i,this.trendLine),this.updateHandles(t,i),this.updateAnchor(t,i,e);const{reverse:o}=t,s=this.extendLine(i,t,e),a=o?s.y1:s.y2,n=o?s.y2:s.y1,r=tS(s,e,t.reverse,a,t.bands);this.updateRanges(t,r,e);const l={...s,y1:n,y2:n};this.updateText(t,l)}extendLine({x1:t,y1:e,x2:i,y2:o},s,a){const n={x1:t,y1:e,x2:i,y2:o};if(!s.extendStart&&!s.extendEnd)return n;const{x:r,width:l}=a.xAxis.bounds;return s.extendEnd&&(n[t>i?"x1":"x2"]=r+l),s.extendStart&&(n[t>i?"x2":"x1"]=r),n}updateLine(t,e,i){if(!e||!i)return;const{lineDashOffset:o,strokeWidth:s,strokeOpacity:a,stroke:n}=t;i.setProperties({...e,lineCap:t.getLineCap(),lineDash:[3,4],lineDashOffset:o,strokeWidth:s,strokeOpacity:a,fillOpacity:0,stroke:n})}updateRangeStrokes(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:o,strokes:s,rangeStroke:a,isMultiColor:n}=t;this.rangeStrokesGroupSelection.each((r,{x1:l,x2:c,y2:h,tag:d},u)=>{const g=h,f=n?s[u%s.length]:a;r.setProperties({x1:l,x2:c,y1:g,y2:g,stroke:f,strokeOpacity:o,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,tag:d})})}updateRanges(t,e,i){const o=s=>s.id;this.rangeFillsGroupSelection.update(e,void 0,o),this.rangeStrokesGroupSelection.update(e,void 0,o),this.labelsGroupSelection.update(e,void 0,o),this.updateRangeFills(t),this.updateRangeStrokes(t),this.updateRangeLabels(t,i)}updateRangeFills(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:o,strokes:s,rangeStroke:a,showFill:n,isMultiColor:r}=t;this.rangeFillsGroupSelection.each((l,{x1:c,x2:h,y1:d,y2:u},g)=>{const f=r?s[g%s.length]:a;if(!n){l.visible=!1;return}l.setProperties({x1:c,x2:h,y1:d,y2:u,startLine:!1,endLine:!1,isRange:!0,stroke:f,strokeOpacity:o,fill:f,fillOpacity:(o??1)*.15,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,visible:!0})})}updateRangeLabels(t,{xAxis:e}){const{rangeStrokesGroupSelection:i}=this,{strokes:o,strokeWidth:s,rangeStroke:a,isMultiColor:n,label:{fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h,color:d}}=t,u={fontFamily:r,fontSize:l,fontStyle:c,fontWeight:h},g=this.checkWithinBounds(e,u,this.labelsGroupSelection.at(0));this.labelsGroupSelection.each((f,y,m)=>{const x=d??(n?o[m%o.length]:a),v=i.at(m);if(!v)return;const{text:S,...b}=y.label;if(g)f.setProperties({...u,text:S,x:b.x1,y:b.y1,textBaseline:"middle",textAlign:"end",fill:x}),en(f.id,v,b);else{const D={...u,label:S,position:"center",alignment:"left",color:x};en(f.id,v,b,D,f,S,s)}})}checkWithinBounds(t,e,i){if(!i)return!1;const{text:o,...s}=i.datum.label;i.setProperties({...e,text:o,x:s.x1,y:s.y1,textBaseline:"middle",textAlign:"end"});const{x:a}=i.getBBox();return a>=t.bounds.x&&a<=t.bounds.x+t.bounds.width}updateText(t,e){const i=this.rangeStrokesGroupSelection.selectByTag(0)[0];if(!i)return;const{text:o,strokeWidth:s}=t;this.text=this.updateNode(Ks,this.text,!!o.label),en(i.id,i,e,o,this.text,o.label,s)}updateAnchor(t,e,i,o){const s=eS.topCenter(e);LL.apply(this.anchor,Ro.Transformable.toCanvasPoint(this.trendLine,s.x,s.y))}containsPoint(t,e){const{trendLine:i,rangeStrokesGroupSelection:o,text:s}=this;let a=!1;return o.each(n=>a||(a=n.isPointInPath(t,e))),a||i.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.trendLine.isPointInPath(t,e))return"line"}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}drag(t,e,i,o){t.locked||(this.activeHandle?this.dragHandle(t,e,i,o):this.dragAll(t,e,i))}getAnchor(){return this.anchor}getCursor(){return"pointer"}},{Vec2:RL,Vec4:Ys}=kL,cc=class extends iS{constructor(){super(),this.type="fibonacci-retracement-trend-based",this.endRetracementLine=new Pe,this.start=new kt,this.end=new kt,this.endRetracement=new kt,this.append([this.endRetracementLine,this.start,this.end,this.endRetracement])}static is(t){return Jt.isCheck(t,"fibonacci-retracement-trend-based")}update(t,e){let{coords1:i,coords2:o}=this.getCoords(t,e);if(i==null||o==null){this.visible=!1;return}if(i=Ys.round(i),o=Ys.round(o),this.visible=t.visible??!0,!this.visible)return;(t.endRetracement.x==null||t.endRetracement.y==null)&&(o=void 0),this.updateLine(t,i,this.trendLine),this.updateLine(t,o,this.endRetracementLine),this.updateHandles(t,i,o),this.updateAnchor(t,o??i,e);const{reverse:s,bands:a}=t,n=CL(i,o),r=this.extendLine(n,t,e),l=r.y2,c=r.y1,h=o?tS(r,e,s,l,a):[];this.updateRanges(t,h,e);const d={...r,y1:c,y2:c};this.updateText(t,d)}containsPoint(t,e){const{start:i,end:o,endRetracement:s,endRetracementLine:a}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):o.containsPoint(t,e)?(this.activeHandle="end",!0):s.containsPoint(t,e)?(this.activeHandle="endRetracement",!0):a.isPointInPath(t,e)||super.containsPoint(t,e)}getNodeAtCoords(t,e){return this.start.containsPoint(t,e)||this.end.containsPoint(t,e)||this.endRetracement.containsPoint(t,e)?"handle":this.endRetracementLine.isPointInPath(t,e)?"line":super.getNodeAtCoords(t,e)}dragStart(t,e,i){this.dragState={offset:e,...Ql({start:t.start,end:t.end,endRetracement:t.endRetracement},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1),this.endRetracement.toggleDragging(!1)}dragAll(t,e,i){const{dragState:o}=this;o&&this.translatePoints({datum:t,start:o.start,end:o.end,endRetracement:o.endRetracement,translation:RL.sub(e,o.offset),context:i})}dragHandle(t,e,i,o){const{activeHandle:s,dragState:a}=this;if(!s||!a)return;this[s].toggleDragging(!0);const n=o?this.snapToAngle(t,e,i):ke(this[s].drag(e).point,i);!n||!qa(i,n)||(t[s].x=n.x,t[s].y=n.y)}snapToAngle(t,e,i){const{activeHandle:o}=this,s=["start","end","endRetracement"];if(!o)return;const a=(s.indexOf(o)+1)%s.length,n=s[a];this[o].toggleDragging(!0);const r=Mt(t[n],i);return ke(ql(e,r,t.snapToAngle),i)}translatePoints({datum:t,start:e,end:i,endRetracement:o,translation:s,context:a}){const n=Co({start:e,end:i,endRetracement:o},s,a,{overflowContinuous:2});t.start.x=n.start.x,t.end.x=n.end.x,t.endRetracement.x=n.endRetracement.x,t.start.y=n.start.y,t.end.y=n.end.y,t.endRetracement.y=n.endRetracement.y}translate(t,e,i){this.translatePoints({datum:t,start:Mt(t.start,i),end:Mt(t.end,i),endRetracement:Mt(t.endRetracement,i),translation:e,context:i})}copy(t,e,i){const{coords1:o,coords2:s}=this.getCoords(t,i);if(!o||!s)return;const a=this.computeBBoxWithoutHandles();return this.translatePoints({datum:e,start:Ys.start(o),end:Ys.end(o),endRetracement:Ys.end(s),translation:{x:-a.width/2,y:-a.height/2},context:i}),e}getCoords(t,e){return{coords1:Me(t,e),coords2:Me({start:t.end,end:t.endRetracement},e)}}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t,this.endRetracement.visible=t;else for(const[e,i]of OL(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end"),this.endRetracement.toggleHovered(this.activeHandle==="endRetracement")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t),this.endRetracement.toggleActive(t)}updateHandles(t,e,i,o){this.start.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"end",o)}),i&&this.endRetracement.update({...this.getHandleStyles(t),...this.getHandleCoords(t,i,"endRetracement",o)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1),this.endRetracement.toggleLocked(t.locked??!1)}getHandleCoords(t,e,i,o){return i==="start"?Ys.start(e):Ys.end(e)}};import{_ModuleSupport as wL}from"ag-charts-community";var{StateMachine:ls,StateMachineProperty:fu,Debug:PL}=wL,hc=class extends ls{constructor(t){const e=({point:c})=>{const h=this.createDatum();h.set({start:c,end:c}),t.create(h)},i=()=>{const{node:c}=this;c?.toggleActive(!0),c?.toggleHandles({start:!0,end:!1,endRetracement:!1})},o=({offset:c,context:h})=>{const{datum:d,snapping:u}=this;d&&(d.set({end:ar(c,h,u,d.start,d.snapToAngle)}),t.update())},s=()=>{const{datum:c}=this;c&&(c.endRetracement.x=c.end.x,c.endRetracement.y=c.end.y,this.node?.toggleHandles({end:!0}),t.update())},a=({offset:c,context:h})=>{const{datum:d,snapping:u}=this;d&&(d.set({endRetracement:ar(c,h,u,d.end,d.snapToAngle)}),t.update())},n=()=>{this.node?.toggleHandles({endRetracement:!0}),t.update()},r=()=>t.delete(),l=()=>{t.showAnnotationOptions(),t.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:ls.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,click:{target:"endRetracement",action:s},drag:o,dragEnd:{target:"endRetracement",action:s},reset:{target:ls.parent,action:r},cancel:{target:ls.parent,action:r},onExit:l},endRetracement:{hover:a,click:{target:ls.parent,action:n},drag:{target:ls.parent,action:n},reset:{target:ls.parent,action:r},cancel:{target:ls.parent,action:r}}}),this.debug=PL.create(!0,"annotations"),this.snapping=!1}createDatum(){return new eo}};p([fu()],hc.prototype,"datum",2),p([fu()],hc.prototype,"node",2),p([fu()],hc.prototype,"snapping",2);var oS={type:"fibonacci-retracement-trend-based",datum:eo,scene:cc,isDatum:eo.is,translate:(t,e,i,o)=>{eo.is(e)&&cc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(eo.is(e)&&eo.is(i)&&cc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{eo.is(e)&&cc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new hc({...t,create:e("fibonacci-retracement-trend-based")}),dragState:t=>new Bt(t)};import{_ModuleSupport as EL}from"ag-charts-community";import{entries as _L}from"ag-charts-core";var{Vec2:BL,Vec4:sS}=EL,pc=class extends iS{constructor(){super(),this.type="fibonacci-retracement",this.start=new kt,this.end=new kt,this.append([this.start,this.end])}static is(t){return Jt.isCheck(t,"fibonacci-retracement")}containsPoint(t,e){const{start:i,end:o}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):o.containsPoint(t,e)?(this.activeHandle="end",!0):super.containsPoint(t,e)}getNodeAtCoords(t,e){return this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":super.getNodeAtCoords(t,e)}dragStart(t,e,i){this.dragState={offset:e,...Ql({start:t.start,end:t.end},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}dragAll(t,e,i){const{dragState:o}=this;o&&this.translatePoints({datum:t,start:o.start,end:o.end,translation:BL.sub(e,o.offset),context:i})}dragHandle(t,e,i,o){const{activeHandle:s,dragState:a}=this;if(!s||!a)return;this[s].toggleDragging(!0);const n=o?this.snapToAngle(t,e,i):ke(this[s].drag(e).point,i);!n||!qa(i,n)||(t[s].x=n.x,t[s].y=n.y)}snapToAngle(t,e,i){const{activeHandle:o}=this,a=["start","end"].find(r=>r!==o);if(!o||!a)return;this[o].toggleDragging(!0);const n=Mt(t[a],i);return ke(ql(e,n,t.snapToAngle),i)}translatePoints({datum:t,start:e,end:i,translation:o,context:s}){const a=Co({start:e,end:i},o,s,{overflowContinuous:1});t.start.x=a.start.x,t.end.x=a.end.x,t.start.y=a.start.y,t.end.y=a.end.y}translate(t,e,i){this.translatePoints({datum:t,start:Mt(t.start,i),end:Mt(t.end,i),translation:e,context:i})}copy(t,e,i){const o=Me(t,i);if(!o)return;const s=this.computeBBoxWithoutHandles();return this.translatePoints({datum:e,start:{x:o.x1,y:o.y1},end:{x:o.x2,y:o.y2},translation:{x:-s.width/2,y:-s.height/2},context:i}),e}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of _L(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}updateHandles(t,e,i,o){this.start.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"end",o)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}getHandleCoords(t,e,i,o){return i==="start"?sS.start(e):sS.end(e)}};import{_ModuleSupport as zL}from"ag-charts-community";var{StateMachine:sn,StateMachineProperty:yu,Debug:FL}=zL,an=class extends sn{constructor(t){const e=({point:r})=>{const l=this.createDatum();l.set({start:r,end:r}),t.create(l)},i=()=>{const{node:r}=this;r?.toggleActive(!0),r?.toggleHandles({start:!0,end:!1})},o=({offset:r,context:l})=>{const{datum:c,snapping:h}=this;c&&(c.set({end:ar(r,l,h,c.start,c.snapToAngle)}),t.update())},s=()=>{this.node?.toggleHandles({end:!0}),t.update()},a=()=>t.delete(),n=()=>{t.showAnnotationOptions(),t.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:sn.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,click:{target:sn.parent,action:s},drag:o,dragEnd:{target:sn.parent,action:s},reset:{target:sn.parent,action:a},cancel:{target:sn.parent,action:a},onExit:n}}),this.debug=FL.create(!0,"annotations"),this.snapping=!1}};p([yu()],an.prototype,"datum",2),p([yu()],an.prototype,"node",2),p([yu()],an.prototype,"snapping",2);var VL=class extends an{createDatum(){return new ko}},GL=class extends an{createDatum(){return new Oo}},WL=class extends an{createDatum(){return new Ao}},aS={type:"fibonacci-retracement",datum:Ao,scene:pc,isDatum:Ao.is,translate:(t,e,i,o)=>{Ao.is(e)&&pc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(Ao.is(e)&&Ao.is(i)&&pc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{Ao.is(e)&&pc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new WL({...t,create:e("fibonacci-retracement")}),dragState:t=>new Bt(t)};import{_ModuleSupport as nS}from"ag-charts-community";import{_ModuleSupport as mu}from"ag-charts-community";var{Vec2:rr}=mu,HL=class extends mu.Group{},dc=class extends HL{constructor(){super(),this.type="arrow",this.path=new mu.Path,this.armLength=6,this.append([this.path])}update(t){const{path:e}=this,{x:i,y:o,angle:s,...a}=t,n=rr.from(i,o),r=3*Math.PI/4,l=this.armLength+(t.strokeWidth??0)*2,c=rr.rotate(rr.from(0,l),s+r,n),h=rr.rotate(rr.from(l,0),s-r,n);e.setProperties(a),e.fillOpacity=0,e.path.clear(),e.path.moveTo(c.x,c.y),e.path.lineTo(n.x,n.y),e.path.lineTo(h.x,h.y)}},{Vec2:Li,Vec4:rS}=nS,cs=class extends au{constructor(){super(),this.type="line",this.line=new Pe,this.append([this.line,this.start,this.end])}static is(t){return Jt.isCheck(t,"line")}update(t,e){let i=Me(t,e);if(i==null){this.visible=!1;return}i=rS.round(i),this.visible=t.visible??!0,this.visible&&(this.updateLine(t,i,e),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateAnchor(t,i,e))}updateLine(t,e,i){const{line:o}=this,{lineDashOffset:s,stroke:a,strokeWidth:n,strokeOpacity:r}=t,l=this.extendLine(e,t,i);o.setProperties({...l,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:s,stroke:a,strokeWidth:n,strokeOpacity:r,fillOpacity:0})}updateText(t,e){this.text=this.updateNode(Ks,this.text,!!t.text.label),en(this.line.id,this.line,e,t.text,this.text,t.text.label,t.strokeWidth)}updateCaps(t,e){if(!t.startCap&&this.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),!t.endCap&&this.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),!t.startCap&&!t.endCap)return;const{stroke:i,strokeWidth:o,strokeOpacity:s}=t,[a,n]=Li.from(e),r=Li.angle(Li.sub(n,a));t.startCap&&(this.startCap&&this.startCap.type!==t.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),this.startCap==null&&(this.startCap=new dc,this.append([this.startCap])),this.startCap.update({x:a.x,y:a.y,angle:r-Math.PI,stroke:i,strokeWidth:o,strokeOpacity:s})),t.endCap&&(this.endCap&&this.endCap.type!==t.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),this.endCap==null&&(this.endCap=new dc,this.append([this.endCap])),this.endCap.update({x:n.x,y:n.y,angle:r,stroke:i,strokeWidth:o,strokeOpacity:s}))}updateAnchor(t,e,i,o){const s=rS.topCenter(e);Li.apply(this.anchor,nS.Transformable.toCanvasPoint(this.line,s.x,s.y))}containsPoint(t,e){const{line:i,text:o}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||!!o?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.line.isPointInPath(t,e)?"line":super.getNodeAtCoords(t,e)}getHandleCoords(t,e,i,o){const{startCap:s,endCap:a}=this;let[n,r]=Li.from(e);const l=Li.angle(Li.sub(r,n));return s&&(n=Li.rotate(Li.from(0,-kt.HANDLE_SIZE/2),l,n)),a&&(r=Li.rotate(Li.from(0,kt.HANDLE_SIZE/2),l,r)),i==="start"?n:r}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}},lS={type:"line",datum:Oo,scene:cs,isDatum:Oo.is,translate:(t,e,i,o)=>{Oo.is(e)&&cs.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(Oo.is(e)&&Oo.is(i)&&cs.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{Oo.is(e)&&cs.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new GL({...t,create:e("line")}),dragState:t=>new Bt(t)},cS={type:"arrow",datum:ko,scene:cs,isDatum:ko.is,translate:(t,e,i,o)=>{ko.is(e)&&cs.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ko.is(e)&&ko.is(i)&&cs.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ko.is(e)&&cs.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new VL({...t,create:e("arrow")}),dragState:t=>new Bt(t)};import{_ModuleSupport as xu}from"ag-charts-community";import{isDate as hS,isNumber as uc}from"ag-charts-core";import{_ModuleSupport as $e}from"ag-charts-community";import{_ModuleSupport as pS}from"ag-charts-community";function dS(t,e=0,i=0){let o=e;for(const s of t)if(Array.isArray(s)){for(const a of s)uS(a,o);o+=pS.Group.computeChildrenBBox(s).width+i}else uS(s,o),o+=s.getBBox().width+i}function KL(t,e=0,i=0){let o=e;for(const s of t)if(Array.isArray(s)){for(const a of s)gS(a,o);o+=pS.Group.computeChildrenBBox(s).height+i}else gS(s,o),o+=s.getBBox().height+i}function uS(t,e){"x1"in t?(t.x2=e+(t.x2-t.x1),t.x1=e):t.x=e}function gS(t,e){"y1"in t?(t.y2=e+(t.y2-t.y1),t.y1=e):t.y=e}function fS(t,e){"x1"in t?(t.x1+=e,t.x2+=e):t.x+=e}function yS(t,e){"y1"in t?(t.y1+=e,t.y2+=e):t.y+=e}var{Vec4:Su}=$e,mS=class extends $e.Group{constructor(){super(),this.name="MeasurerStatisticsScene",this.background=new $e.Rect,this.dateRangeBarsText=new $e.Text,this.dateRangeDivider=new $e.Line,this.dateRangeValueText=new $e.Text,this.priceRangeValueText=new $e.Text,this.priceRangeDivider=new $e.Line,this.priceRangePercentageText=new $e.Text,this.volumeText=new $e.Text,this.volumeFormatter=new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}),this.append([this.background,this.dateRangeBarsText,this.dateRangeDivider,this.dateRangeValueText,this.priceRangeValueText,this.priceRangeDivider,this.priceRangePercentageText,this.volumeText])}update(t,e,i,o,s,a,n){this.verticalDirection=a;const r=this.updateStatistics(t,e,i,n),l=$e.Group.computeChildrenBBox(r.flat()),c=10;l.grow(c),this.updateBackground(t,l,c),this.reposition(r,c,s),this.checkVisibility(t,s,o)}checkVisibility(t,e,i){const o=Su.from(new $e.BBox(0,0,e.seriesRect.width,e.seriesRect.height));Su.collides(i,o)?this.visible=t.visible??!0:this.visible=!1}updateStatistics(t,e,i,o){const{dateRangeBarsText:s,dateRangeDivider:a,dateRangeValueText:n,priceRangeValueText:r,priceRangeDivider:l,priceRangePercentageText:c,volumeText:h}=this,d=8,u=6,g=t.statistics.fontSize+3,f=-2,y=this.getTextStyles(t),m={...this.getDividerStyles(t),x1:0,y1:0,x2:0,y2:g},x=[s,a,n],v=[r,l,c],S=[];return e.priceRange&&(r.setProperties({...y,text:this.formatPriceRangeValue(e.priceRange.value,o)}),l.setProperties(m),c.setProperties({...y,text:this.formatPriceRangePercentage(e.priceRange.percentage,o)}),dS(v,i.x,d),S.push(v)),e.dateRange&&(s.setProperties({...y,text:this.formatDateRangeBars(e.dateRange.bars,o)}),a.setProperties(m),n.setProperties({...y,text:this.formatDateRangeValue(e.dateRange.value)}),dS(x,i.x,d),S.push(x)),e.volume!=null?(h.setProperties({...y,x:i.x,text:this.formatVolume(e.volume,o),visible:!0}),S.push(h)):h.visible=!1,KL(S,i.y,u),l.y1+=f,l.y2+=f,a.y1+=f,a.y2+=f,S}updateBackground(t,e,i){const o=this.getBackgroundStyles(t);this.background.setProperties({...o,...e,x:e.x-e.width/2+i,y:e.y})}reposition(t,e,i){const{width:o,height:s}=i.seriesRect,a=Su.from(this.background.getBBox());let n=0;a.x1<0&&(n=-a.x1),a.x2>o&&(n=o-a.x2);const r=Math.min(e,s-a.y2);for(const l of t)if(Array.isArray(l)){const c=$e.Group.computeChildrenBBox(l).width;for(const h of l)fS(h,n-c/2),yS(h,r)}else fS(l,n-l.getBBox().width/2),yS(l,r);this.background.x+=n,this.background.y+=r}getTextStyles(t){return{fill:t.statistics.color,fontFamily:t.statistics.fontFamily,fontSize:t.statistics.fontSize,fontStyle:t.statistics.fontStyle,fontWeight:t.statistics.fontWeight,textBaseline:"top"}}getDividerStyles(t){return{stroke:t.statistics.divider.stroke,strokeOpacity:t.statistics.divider.strokeOpacity,strokeWidth:t.statistics.divider.strokeWidth}}getBackgroundStyles(t){return{fill:t.statistics.fill,stroke:t.statistics.stroke,strokeOpacity:t.statistics.strokeOpacity,strokeWidth:t.statistics.strokeWidth,cornerRadius:4}}formatDateRangeBars(t,e){return e?.t("measurerDateRangeBars",{value:t})??`${t}`}formatDateRangeValue(t){const e=[],i=t>=0?"":"-";t=Math.abs(t);const o=1e3*60,s=o*60,a=s*24,n=Math.floor(t/o),r=Math.floor(t/s),l=Math.floor(t/a),c=r%(a/s),h=n%(s/o);return l>=1&&e.push(`${l}d`),r>=1&&(t<a||c!==0)&&e.push(`${c}h`),(t<s||h!==0)&&e.push(`${h}m`),e[0]=`${i}${e[0]}`,e.join(" ")}formatPriceRangeValue(t,e){return e?.t("measurerPriceRangeValue",{value:Number(t.toFixed(2))})??`${t}`}formatPriceRangePercentage(t,e){return e?.t("measurerPriceRangePercent",{value:t})??`${t}`}formatVolume(t,e){const i=isNaN(t)?"":this.volumeFormatter.format(t);return e?.t("measurerVolume",{value:i})??i}},UL=class extends mS{getDirectionStyles(t){return this.verticalDirection==="down"?t.down.statistics:t.up.statistics}getTextStyles(t){const e=this.getDirectionStyles(t);return{...super.getTextStyles(t),fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight}}getDividerStyles(t){const e=this.getDirectionStyles(t);return{stroke:e.divider.stroke,strokeOpacity:e.divider.strokeOpacity,strokeWidth:e.divider.strokeWidth}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{...super.getBackgroundStyles(t),fill:e.fill,stroke:e.stroke,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth}}},{Vec2:so,Vec4:js}=xu,Xe=class extends au{constructor(){super(),this.type="measurer",this.horizontalLine=new Pe,this.verticalLine=new Pe,this.horizontalStartLine=new Pe,this.horizontalEndLine=new Pe,this.verticalStartLine=new Pe,this.verticalEndLine=new Pe,this.horizontalEndCap=new dc,this.verticalEndCap=new dc,this.background=new xu.Path({zIndex:-1}),this.updateBackground=qx.updateBackground.bind(this),this.statistics=this.createStatisticsScene(),this.statistics.zIndex=1,this.append([this.background,this.verticalStartLine,this.verticalEndLine,this.horizontalStartLine,this.horizontalEndLine,this.horizontalLine,this.verticalLine,this.horizontalEndCap,this.verticalEndCap,this.start,this.end,this.statistics])}static is(t){return Jt.isCheck(t,"measurer")}createStatisticsScene(){return new mS}update(t,e){const i=Me(t,e);if(i==null){this.visible=!1;return}if(this.visible=t.visible??!0,!this.visible)return;const o=this.extendPerpendicular(i,t,e),s={...o,y2:o.y1},a={...o,y1:o.y2};this.verticalDirection=i.y1<i.y2?"down":"up",this.updateVisibilities(t),this.updateLines(t,i),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateBoundingLines(t,o),this.updateBackground(t,s,a,e),this.updateStatistics(t,i,e),this.updateAnchor(t,i,e)}extendPerpendicular(t,e,i){const o={x1:Math.min(t.x1,t.x2),x2:Math.max(t.x1,t.x2),y1:Math.min(t.y1,t.y2),y2:Math.max(t.y1,t.y2)},[s,a]=so.from(i.yAxis.bounds);return li.is(e)?(e.extendAbove&&(o.y1=s.y),e.extendBelow&&(o.y2=a.y)):ci.is(e)&&(e.extendLeft&&(o.x1=s.x),e.extendRight&&(o.x2=a.x)),o}updateVisibilities(t){const{horizontalStartLine:e,horizontalEndLine:i,horizontalEndCap:o,verticalStartLine:s,verticalEndLine:a,verticalEndCap:n}=this,{direction:r}=t;s.visible=r!=="vertical",a.visible=r!=="vertical",o.visible=r!=="vertical",e.visible=r!=="horizontal",i.visible=r!=="horizontal",n.visible=r!=="horizontal"}updateLines(t,e){const{horizontalLine:i,verticalLine:o}=this,{direction:s}=t,{x1:a,y1:n,x2:r,y2:l}=e,c=so.round(js.center(e),0),h=this.getLineStyles(t);s!=="vertical"&&i.setProperties({...h,x1:a,x2:r,y1:c.y,y2:c.y}),s!=="horizontal"&&o.setProperties({...h,x1:c.x,x2:c.x,y1:n,y2:l})}updateText(t,e){const{direction:i}=t,o=so.round(js.center(e),0);let s;const a={...e};i==="vertical"?(s=this.verticalLine,a.x1=o.x,a.x2=o.x):(s=this.horizontalLine,a.y1=o.y,a.y2=o.y),this.text=this.updateNode(Ks,this.text,!!t.text.label);const{id:n}=s,r=en(n,s,a,t.text,this.text,t.text.label,t.strokeWidth);let l;if(i==="both"&&r&&this.text){const c=js.from(this.text.getBBox()),{offset:h}=r.numbers;c.x1<=o.x+h.x&&c.x2>=o.x-h.x&&(l={x:o.x,y:r.clipMask.y,radius:this.text.getBBox().height/2+so.length(h)})}this.verticalLine.setClipMask(n,l)}updateCaps(t,e){const{horizontalEndCap:i,verticalEndCap:o}=this,{direction:s}=t,{x1:a,y1:n,x2:r,y2:l}=e,c=so.round(js.center(e),0),{stroke:h,strokeWidth:d,strokeOpacity:u}=this.getLineStyles(t),g={stroke:h,strokeWidth:d,strokeOpacity:u};if(s!=="vertical"){const f=a<=r?0:Math.PI;let y=r;s==="horizontal"&&(y+=a<=r?-2:2),i.update({...g,x:y,y:c.y,angle:f})}if(s!=="horizontal"){const f=n<=l?Math.PI/2:Math.PI/-2;let y=l;s==="vertical"&&(y+=n<=l?-2:2),o.update({...g,x:c.x,y,angle:f})}}updateBoundingLines(t,e){const{verticalStartLine:i,verticalEndLine:o,horizontalStartLine:s,horizontalEndLine:a}=this,{direction:n}=t,{x1:r,y1:l,x2:c,y2:h}=e,d=this.getLineStyles(t);n==="horizontal"&&(i.setProperties({...d,x1:r,y1:l,x2:r,y2:h}),o.setProperties({...d,x1:c,y1:l,x2:c,y2:h})),n==="vertical"&&(s.setProperties({...d,x1:r,y1:l,x2:c,y2:l}),a.setProperties({...d,x1:r,y1:h,x2:c,y2:h}))}updateStatistics(t,e,i){const o=so.add(js.bottomCenter(e),so.from(0,10)),s={volume:this.getVolume(t)};t.hasPriceRange&&(s.priceRange={percentage:this.getPriceRangePercentage(t),value:this.getPriceRangeValue(t)}),t.hasDateRange&&(s.dateRange={bars:this.getDateRangeBars(e,i),value:this.getDateRangeValue(t)}),this.statistics.update(t,s,o,e,i,this.verticalDirection,t.localeManager)}updateAnchor(t,e,i,o){const s=js.topCenter(e);so.apply(this.anchor,xu.Transformable.toCanvasPoint(this.horizontalLine,s.x,s.y))}getBackgroundPoints(t,e,i,o){const[s,a]=so.from(e),[n,r]=so.from(i);return[s,a,r,n]}getLineStyles(t){const{lineDashOffset:e,stroke:i,strokeWidth:o,strokeOpacity:s}=t;return{lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,stroke:i,strokeWidth:o,strokeOpacity:s,fillOpacity:0}}getBackgroundStyles(t){const{background:e}=t;return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}containsPoint(t,e){const{horizontalLine:i,text:o,verticalLine:s,horizontalStartLine:a,horizontalEndLine:n,verticalStartLine:r,verticalEndLine:l}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||s.isPointInPath(t,e)||a.visible&&a.isPointInPath(t,e)||n.visible&&n.isPointInPath(t,e)||r.visible&&r.isPointInPath(t,e)||l.visible&&l.isPointInPath(t,e)||!!o?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":"line"}getDateRangeBars(t,e){const{step:i}=e.xAxis.scale,o=t.x1<=t.x2?1:-1;return i?Math.round(js.width(t)/i)*o:0}getDateRangeValue(t){const e=_t(t.start.x),i=_t(t.end.x);if(!hS(e)||!hS(i))throw new Error("Can not create a date range measurement of non-date x-axis.");return i.getTime()-e.getTime()}getPriceRangePercentage(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const e=_t(t.end.y),i=_t(t.start.y);if(!uc(e)||!uc(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return(e-i)/i}getPriceRangeValue(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const e=_t(t.end.y),i=_t(t.start.y);if(!uc(e)||!uc(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return e-i}getVolume(t){return t.getVolume(t.start.x,t.end.x)}},gc=class extends Xe{constructor(){super(...arguments),this.type="quick-measurer"}static is(t){return Jt.isCheck(t,"quick-measurer")}createStatisticsScene(){return new UL}getDirectionStyles(t){return this.verticalDirection==="down"?t.down:t.up}getLineStyles(t){const e=this.getDirectionStyles(t);return{...super.getLineStyles(t),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){const e=this.getDirectionStyles(t);return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth}}};import{_ModuleSupport as YL}from"ag-charts-community";var{StateMachine:nn,StateMachineProperty:xS,Debug:jL}=YL,rn=class extends nn{constructor(t){const e=({point:n})=>{const r=this.createDatum();r.set({start:n,end:n}),t.create(r)},i=({point:n})=>{const{datum:r,node:l}=this;r?.set({end:n}),l?.toggleActive(!0),l?.toggleHandles({end:!1}),t.update()},o=()=>{this.node?.toggleHandles({end:!0})},s=()=>t.delete(),a=()=>{t.showAnnotationOptions(),!Jo(this.datum)&&t.recordAction(`Create ${this.node?.type} annotation`)};super("start",{start:{reset:nn.parent,click:{target:"end",action:e},drag:{target:"end",action:e}},end:{hover:i,drag:i,click:{target:nn.parent,action:o},dragEnd:{target:nn.parent,action:o},reset:{target:nn.parent,action:s},cancel:{target:nn.parent,action:s},onExit:a}}),this.debug=jL.create(!0,"annotations")}};p([xS()],rn.prototype,"datum",2),p([xS()],rn.prototype,"node",2);var $L=class extends rn{createDatum(){return new li}},XL=class extends rn{createDatum(){return new ci}},ZL=class extends rn{createDatum(){return new Mo}},qL=class extends rn{createDatum(){return new je}},SS={type:"date-range",datum:li,scene:Xe,isDatum:li.is,translate:(t,e,i,o)=>{li.is(e)&&Xe.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(li.is(e)&&li.is(i)&&Xe.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{li.is(e)&&Xe.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new $L({...t,create:e("date-range")}),dragState:t=>new Bt(t)},bS={type:"price-range",datum:ci,scene:Xe,isDatum:ci.is,translate:(t,e,i,o)=>{ci.is(e)&&Xe.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ci.is(e)&&ci.is(i)&&Xe.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ci.is(e)&&Xe.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new XL({...t,create:e("date-range")}),dragState:t=>new Bt(t)},vS={type:"date-price-range",datum:Mo,scene:Xe,isDatum:Mo.is,translate:(t,e,i,o)=>{Mo.is(e)&&Xe.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(Mo.is(e)&&Mo.is(i)&&Xe.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{Mo.is(e)&&Xe.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new ZL({...t,create:e("date-range")}),dragState:t=>new Bt(t)},DS={type:"quick-date-price-range",datum:je,scene:gc,isDatum:je.is,translate:(t,e,i,o)=>{je.is(e)&&gc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(je.is(e)&&je.is(i)&&gc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{je.is(e)&&gc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new qL({...t,create:e("quick-date-price-range")}),dragState:t=>new Bt(t)};import{_ModuleSupport as lr}from"ag-charts-community";import{clamp as QL}from"ag-charts-core";var{ZIndexMap:MS,TextWrapper:JL}=lr,fc=class extends cu{constructor(){super(),this.type="note",this.shape=new lr.Rect,this.iconBackground=new lr.SvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new lr.SvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new lr.DropShadow,this.append([this.shape,this.label,this.iconBackground,this.iconLines,this.handle])}static is(t){return Jt.isCheck(t,"note")}update(t,e){this.updateIcon(t,e),super.update(t,e)}getTextBBox(t,e,i){const o=super.getTextBBox(t,e,i);o.x-=t.width/2,o.x=QL(0,o.x,i.seriesRect.width-t.width);const s=t.getPadding().top,a=o.y-Zm-s*2,n=o.y+kt.HANDLE_SIZE+s*2;return a-o.height-qm<0?(o.y=n,t.position="top"):(o.y=a+s,t.position="bottom"),o}updateLabel(t,e){const i=t.visible===!1?!1:this.label.visible;super.updateLabel(t,e),this.label.visible=i,this.label.text=JL.wrapText(t.text,{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},avoidOrphans:!1,textAlign:t.textAlign,textBaseline:"hanging",textWrap:"always",maxWidth:200})}updateShape(t,e){const{shape:i}=this;i.fill=t.background.fill,i.fillOpacity=t.background.fillOpacity??1,i.stroke=t.background.stroke,i.strokeOpacity=t.background.strokeOpacity??1,i.strokeWidth=t.background.strokeWidth??1,i.cornerRadius=4;const o=t.getPadding().top,s=t.position==="top";i.x=e.x-o,i.width=t.width+o*2,i.height=e.height+o*2,i.y=e.y+(s?0:-e.height)-o}updateIcon(t,e){const{active:i,iconBackground:o,iconLines:s}=this,{x:a,y:n}=Mt(t,e);o.x=a-hN/2,o.y=n-Xm,s.x=o.x,s.y=o.y,o.fill=t.fill,o.fillOpacity=t.fillOpacity??1,o.stroke=t.stroke,o.strokeOpacity=t.strokeOpacity??1,o.strokeWidth=t.strokeWidth??1,s.fill=t.stroke,i?o.fillShadow.color=t.fill??"rgba(0, 0, 0, 0.22)":o.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(t,e,i){const o=t.getPadding().top,s=t.position==="top",a=s?1:-1;return{x:e.x+i.seriesRect.x+t.width/2,y:e.y+i.seriesRect.y+a*(e.height+o),position:s?"below":"above"}}getLabelCoords(t,e){const i=t.position==="top",o=t.getPadding().top+t.fontSize*ir/2;return{x:e.x,y:e.y+(i?o/2:0)}}getTextBaseline(t){return t.position==="top"?"middle":t.position}getHandleCoords(t,e,i){return{x:e.x,y:e.y+kt.HANDLE_SIZE/2+4}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}toggleHovered(t){super.toggleHovered(t),this.label.visible=t,this.shape.visible=t,this.zIndex=t?MS.CHART_ANNOTATION_FOCUSED:MS.CHART_ANNOTATION}toggleActive(t){super.toggleActive(t),this.label.visible=t,this.shape.visible=t,this.active=t}containsPoint(t,e){return this.shape.visible&&this.shape.containsPoint(t,e)||this.iconBackground.containsPoint(t,e)?!0:super.containsPoint(t,e)}},tR=class extends nr{createDatum(){return new we}},kS={type:"note",datum:we,scene:fc,isDatum:we.is,translate:(t,e,i,o)=>{we.is(e)&&fc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(we.is(e)&&we.is(i)&&fc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{we.is(e)&&fc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new tR({...t,create:e("note")}),dragState:t=>new Bt(t)};import{_ModuleSupport as eR}from"ag-charts-community";var{Vec2:fi,Vec4:ao}=eR,yc=class extends Qx{constructor(){super(),this.type="parallel-channel",this.handles={topLeft:new kt,topMiddle:new tn,topRight:new kt,bottomLeft:new kt,bottomMiddle:new tn,bottomRight:new kt},this.middleLine=new Pe,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return Jt.isCheck(t,"parallel-channel")}dragHandle(t,e,i,o){const{activeHandle:s,handles:a}=this;if(s==null)return;const{offset:n}=a[s].drag(e);a[s].toggleDragging(!0),(s==="topMiddle"||s==="bottomMiddle")&&(n.x=0);let r=[],l=o;switch(s){case"topLeft":case"bottomLeft":r=["topLeft","bottomLeft"];break;case"topMiddle":r=["topLeft","topRight"],n.y-=tn.HANDLE_SIZE/2,l=!1;break;case"topRight":case"bottomRight":r=["topRight","bottomRight"];break;case"bottomMiddle":r=["bottomLeft","bottomRight"],n.y-=tn.HANDLE_SIZE/2,l=!1;break}const c=Me(t,i),h=Me(t.bottom,i);if(!c||!h)return;const d={topLeft:ao.start(c),topRight:ao.end(c),bottomLeft:ao.start(h),bottomRight:ao.end(h)},u={vectors:{topLeft:d.topRight,bottomLeft:d.bottomRight,topRight:d.topLeft,bottomRight:d.bottomLeft},angle:t.snapToAngle},g=Co(d,n,i,{overflowContinuous:this.overflowContinuous,translateVectors:r,snap:l?u:void 0});t.start.x=g.topLeft.x,t.start.y=g.topLeft.y,t.end.x=g.topRight.x,t.end.y=g.topRight.y,t.height=g.topLeft.y-g.bottomLeft.y}getTranslatePointsVectors(t,e){const{bottomLeft:i,topLeft:o}=this.handles,s=i.getBBox().y-o.getBBox().y,a=fi.add(t,fi.from(0,s)),n=fi.add(e,fi.from(0,s));return{start:t,end:e,bottomStart:a,bottomEnd:n}}containsPoint(t,e){return super.containsPoint(t,e)||this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)}getNodeAtCoords(t,e){return this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)?"line":super.getNodeAtCoords(t,e)}updateLines(t,e,i,o,s,a){const{topLine:n,middleLine:r,bottomLine:l}=this,{lineDashOffset:c,stroke:h,strokeOpacity:d,strokeWidth:u}=t,g=t.getLineDash(),f={lineCap:t.getLineCap(),lineDash:g,lineDashOffset:c,stroke:h,strokeOpacity:d,strokeWidth:u};n.setProperties({...e,...f}),l.setProperties({...i,...f});const y=this.extendLine({x1:s.x1,y1:a.y1+(s.y1-a.y1)/2,x2:s.x2,y2:a.y2+(s.y2-a.y2)/2},t,o);r.setProperties({...y,lineDash:t.middle.lineDash??g,lineDashOffset:t.middle.lineDashOffset??c,stroke:t.middle.stroke??h,strokeOpacity:t.middle.strokeOpacity??d,strokeWidth:t.middle.strokeWidth??u,visible:t.middle.visible??!0})}updateHandles(t,e,i){const{handles:{topLeft:o,topMiddle:s,topRight:a,bottomLeft:n,bottomMiddle:r,bottomRight:l}}=this,c={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};o.update({...c,...ao.start(e)}),a.update({...c,...ao.end(e)}),n.update({...c,...ao.start(i)}),l.update({...c,...ao.end(i)}),s.update({...c,...fi.sub(ao.center(e),fi.from(s.handle.width/2,s.handle.height/2))}),r.update({...c,...fi.sub(ao.center(i),fi.from(r.handle.width/2,r.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(Ks,this.text,!!t.text.label),Kx(!0,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,o){const s=e.x1>e.x2,a=e.y1>e.y2,n=e.x1!==i.x1&&e.y1!==i.y1,r=e.x2!==i.x2&&e.y2!==i.y2,l=fi.from(e);return t.extendEnd&&r&&l.push(fi.from(s?o.x1:o.x2,a?o.y1:o.y2)),l.push(...fi.from(i).reverse()),t.extendStart&&n&&l.push(fi.from(s?o.x2:o.x1,a?o.y2:o.y1)),l}};import{_ModuleSupport as iR}from"ag-charts-community";import{isNumber as ln}from"ag-charts-core";var{StateMachine:hs,StateMachineProperty:bu,Debug:oR}=iR,mc=class extends hs{constructor(t){const e=({point:l})=>{const c=new pi;c.set({start:l,end:l,height:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})},o=({offset:l,context:c})=>{const{datum:h,snapping:d}=this;h&&(h.set({end:ar(l,c,d,h.start,h.snapToAngle)}),t.update())},s=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},a=({point:l})=>{const{datum:c,node:h}=this,d=_t(c?.end.y),u=_t(c?.start.y),{y:g}=l;if(c==null||!ln(u)||!ln(d)||!ln(g))return;const f=d-(g??0),y=u-f;h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint({x:c.start.x,y},{overflowContinuous:!0})||!t.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:f}),t.update())},n=({point:l})=>{const{datum:c,node:h}=this,d=_t(c?.end.y),u=_t(c?.start.y),{y:g}=l;if(c==null||!ln(u)||!ln(d)||!ln(g))return;const f=d-(g??0),y=u-f;h?.toggleHandles(!0),!(!t.validatePoint({x:c.start.x,y},{overflowContinuous:!0})||!t.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:f}),t.recordAction("Create parallel-channel annotation"),t.showAnnotationOptions(),t.update())},r=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:hs.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,drag:o,click:{target:"height",action:s},dragEnd:{target:"height",action:s},reset:{target:hs.parent,action:r},cancel:{target:hs.parent,action:r}},height:{hover:a,click:{target:hs.parent,action:n},drag:{target:hs.parent,action:n},reset:{target:hs.parent,action:r},cancel:{target:hs.parent,action:r}}}),this.debug=oR.create(!0,"annotations"),this.snapping=!1}};p([bu()],mc.prototype,"datum",2),p([bu()],mc.prototype,"node",2),p([bu()],mc.prototype,"snapping",2);var OS={type:"parallel-channel",datum:pi,scene:yc,isDatum:pi.is,translate:(t,e,i,o)=>{pi.is(e)&&yc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(pi.is(e)&&pi.is(i)&&yc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{pi.is(e)&&yc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new mc({...t,create:e("parallel-channel")}),dragState:t=>new Bt(t)},xc=class extends cu{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(t){return Jt.isCheck(t,"text")}getHandleCoords(t,e){const i=kt.HANDLE_SIZE/2;return{x:e.x+i,y:e.y+2+i}}},sR=class extends nr{createDatum(){return new Io}},TS={type:"text",datum:Io,scene:xc,isDatum:Io.is,translate:(t,e,i,o)=>{Io.is(e)&&xc.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(Io.is(e)&&Io.is(i)&&xc.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{Io.is(e)&&xc.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new sR({...t,create:e("text")}),dragState:t=>new Bt(t)},Ze={[lS.type]:lS,[$x.type]:$x,[Xx.type]:Xx,[OS.type]:OS,[Jx.type]:Jx,[aS.type]:aS,[oS.type]:oS,[Fx.type]:Fx,[Wx.type]:Wx,[kS.type]:kS,[TS.type]:TS,[cS.type]:cS,[Rx.type]:Rx,[Lx.type]:Lx,[SS.type]:SS,[bS.type]:bS,[vS.type]:vS,[DS.type]:DS};function $s(t){for(const{isDatum:e}of Object.values(Ze))if(e(t))return t}import{_ModuleSupport as aR}from"ag-charts-community";var{ActionOnSet:nR,ParallelStateMachine:rR,StateMachine:vu,StateMachineProperty:no,Debug:lR}=aR,Sc=class extends rR{constructor(t){super(new cR(e=>{this.snapping=e}),new hR(()=>{this.node=this.active==null?void 0:t.node(this.active)}),new ps(t,e=>{this.active=e,this.datum=this.active==null?void 0:t.datum(this.active),this.node=this.active==null?void 0:t.node(this.active)})),this.snapping=!1}getActive(){return this.active}isActive(t){return t===this.active}};p([no()],Sc.prototype,"snapping",2),p([no()],Sc.prototype,"datum",2),p([no()],Sc.prototype,"node",2);var cR=class extends vu{constructor(t){super("idle",{idle:{hover:({shiftKey:e})=>t(e),keyDown:({shiftKey:e})=>t(e),keyUp:({shiftKey:e})=>t(e),click:({shiftKey:e})=>t(e),drag:({shiftKey:e})=>t(e)},dragging:{},translating:{},"text-input":{}})}},hR=class extends vu{constructor(t){super("idle",{idle:{onEnter:t,render:t},dragging:{onEnter:t,render:t},translating:{onEnter:t,render:t},"text-input":{render:t}})}},ps=class extends vu{constructor(t,e){const i=S=>b=>{t.create(S,b),this.active=t.selectLast()},o=()=>{this.active!=null&&t.delete(this.active),this.active=void 0,t.select()},s={createDatum:i},a={...t,delete:o,showTextInput:()=>{this.active!=null&&t.showTextInput(this.active)},deselect:()=>{const S=this.active;this.active=void 0,this.hovered=void 0,t.select(this.active,S)},showAnnotationOptions:()=>{this.active!=null&&t.showAnnotationOptions(this.active)}},n=Object.fromEntries(Object.entries(Ze).map(([S,b])=>[S,b.createState(a,s)])),r=Object.fromEntries(Object.entries(Ze).map(([S,b])=>[S,b.dragState(t,s)])),l=({colorPickerType:S,colorOpacity:b,color:D,opacity:I,isMultiColor:M})=>{this.datum&&(S==="text-color"&&t.updateTextInputColor(D),jl(this.datum,S,b,D,I,M),t.update())},c=S=>{const{datum:b,node:D}=this;!b||!D||(io(b)?(b.fontSize=S,t.updateTextInputFontSize(S)):Qa(b)&&(b.text.fontSize=S),t.update())},h=S=>{const{datum:b,node:D}=this;!b||!D||!ts(b)||(hx(b,S),t.update())},d=S=>{const{node:b}=this;!b||!("setTextInputBBox"in b)||(b.setTextInputBBox(S),t.update())},u=({textInputValue:S,bbox:b})=>{const{datum:D}=this;if(b!=null&&S!=null&&S.length>0){if(!io(D))return;const I=Gl(D,S,b.width);D.set({text:I}),t.update(),t.recordAction(`Change ${D.type} annotation text`)}else t.delete(this.active),t.recordAction(`Delete ${D?.type} annotation`)},g=()=>{t.updateTextInputBBox(void 0)},f=()=>this.active!=null,y=()=>this.copied!=null,m=()=>{const{active:S,datum:b}=this;return S==null||!b?!1:Qa(b)&&!b.locked},x=()=>this.active!=null&&!Jo(this.datum),v=()=>this.hovered!=null;super("idle",{idle:{onEnter:()=>{t.select(this.active,this.active),this.hoverCoords&&(this.hovered=t.hoverAtCoords(this.hoverCoords,this.active,this.hovered))},hover:({offset:S})=>{this.hovered=t.hoverAtCoords(S,this.active,this.hovered),this.hoverCoords=S},translate:{guard:f,target:"translating",action:({translation:S})=>{t.startInteracting(),t.translate(this.active,S),t.update()}},copy:{guard:x,action:()=>{this.copied=t.copy(this.active)}},cut:{guard:x,action:()=>{this.copied=t.copy(this.active),o()}},paste:{guard:y,action:()=>{t.paste(this.copied)}},selectLast:()=>{const S=this.active;this.active=t.selectLast(),t.select(this.active,S)},click:[{guard:()=>{const{active:S,hovered:b,datum:D}=this;return S==null||b!==S||!D?!1:io(D)&&!D.locked},target:"text-input"},{action:()=>{const S=this.active;this.active=this.hovered,t.select(this.active,S)}}],dblclick:{guard:m,action:({offset:S})=>{const b=t.getNodeAtCoords(S,this.active)==="text"?"text":"line";t.showAnnotationSettings(this.active,void 0,b)}},dragStart:[{guard:v,target:"dragging",action:()=>{const S=this.active;this.active=this.hovered,t.select(this.active,S),t.startInteracting()}},{action:()=>{const S=this.active;this.active=this.hovered,t.select(this.active,S)}}],color:{guard:f,action:l},fontSize:{guard:f,action:c},lineProps:{guard:f,action:S=>{const b=$s(this.datum);b?.set(S),t.update(),t.recordAction(`Change ${b?.type} ${Object.entries(S).map(([D,I])=>`${D} to ${I}`).join(", ")}`)}},lineStyle:{guard:f,action:h},lineText:{guard:f,action:S=>{const b=$s(this.datum);Qa(b)&&(No(b)&&S.position==="center"&&(S.position="inside"),b.text.set(S),t.update())}},updateTextInputBBox:{guard:f,action:d},toolbarPressSettings:{guard:m,action:S=>{t.showAnnotationSettings(this.active,S)}},reset:()=>{this.active!=null&&this.node?.toggleActive(!1),this.hovered=void 0,this.active=void 0,t.select(this.active,this.active),t.resetToIdle()},delete:()=>{this.active!=null&&(t.delete(this.active),!Jo(this.datum)&&t.recordAction(`Delete ${this.datum?.type} annotation`))},deleteAll:()=>{t.deleteAll()},...n},dragging:{onEnter:(S,b)=>{if(this.active==null)return;const D=t.getAnnotationType(this.active);D&&(this.transitionRoot(D),this.transitionRoot("dragStart",b))},...r},translating:{onEnter:()=>{},translate:{guard:f,target:"translating",action:({translation:S})=>{t.startInteracting(),t.translate(this.active,S),t.update()}},translateEnd:{guard:f,target:"idle"},onExit:()=>{t.stopInteracting(),t.update(),t.recordAction("Translate annotation")}},"text-input":{onEnter:()=>{if(this.active==null)return;const S=$s(this.datum);!S||!("getTextInputCoords"in S)||(t.startInteracting(),t.showTextInput(this.active),S.visible=!1,t.update())},updateTextInputBBox:{guard:f,action:d},resize:{target:"idle",action:u},click:{target:"idle",action:u},drag:{target:"idle",action:u},textInput:[{guard:nu,target:"idle",action:g},{guard:ru,target:"idle",action:u}],color:{guard:f,action:l},fontSize:{guard:f,action:c},cancel:{target:"idle",action:g},onExit:()=>{t.stopInteracting(),t.hideTextInput();const S=this.active;if(this.active=this.hovered=void 0,t.select(this.active,S),S==null)return;const b=t.datum(S),D=t.node(S);!b||!D||(b.visible=!0)}}}),this.setActive=e,this.debug=lR.create(!0,"annotations"),this.snapping=!1}};p([nR({changeValue(t){this.setActive(t)}}),no()],ps.prototype,"active",2),p([no()],ps.prototype,"hovered",2),p([no()],ps.prototype,"hoverCoords",2),p([no()],ps.prototype,"copied",2),p([no()],ps.prototype,"snapping",2),p([no()],ps.prototype,"datum",2),p([no()],ps.prototype,"node",2);import{_ModuleSupport as Du}from"ag-charts-community";var{ARRAY:pR,BOOLEAN:dR,UNION:uR,POSITIVE_NUMBER:gR,ActionOnSet:fR,LayoutElement:yR,Menu:mR,PropertiesArray:xR,ToolbarButtonProperties:SR,TempValidate:bc,ChartAxisDirection:bR}=Du,AS=class extends SR{};p([bc(uR(["line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","clear"]))],AS.prototype,"value",2);var vc=class extends Du.BaseProperties{constructor(t){super(),this.ctx=t,this.enabled=!0,this.padding=20,this.buttons=new xR(AS),this.events=new Du.Listeners,this.annotationMenu=new mR(this.ctx,"annotations"),this.destroyFns=[],this.toolbar=t.sharedToolbar.getSharedToolbar("annotations");const e=this.onKeyDown.bind(this);this.toolbar.addListener("keydown",e),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onToolbarButtonPress.bind(this)),t.layoutManager.registerElement(yR.ToolbarLeft,this.onLayoutStart.bind(this)),()=>{this.toolbar.removeListener("keydown",e),this.toolbar.destroy()})}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}toggleVisibility(t){this.toolbar.setHidden(!t)}toggleClearButtonEnabled(t){const e=this.buttons.findIndex(i=>i.value==="clear");this.toolbar.toggleButtonEnabledByIndex(e,t)}resetButtonIcons(){for(const[t,e]of this.buttons.entries())switch(e.value){case"line-menu":this.updateButtonByIndex(t,{icon:"trend-line-drawing",value:"line-menu"});break;case"fibonacci-menu":this.updateButtonByIndex(t,{icon:"fibonacci-retracement-drawing",value:"fibonacci-menu"});break;case"text-menu":this.updateButtonByIndex(t,{icon:"text-annotation",value:"text-menu"});break;case"shape-menu":this.updateButtonByIndex(t,{icon:"arrow-drawing",value:"shape-menu"});break;case"measurer-menu":this.updateButtonByIndex(t,{icon:"measurer-drawing",value:"measurer-menu"});break}}hideOverlays(){this.annotationMenu.hide()}clearActiveButton(){this.toolbar.clearActiveButton()}dispatch(t,e){this.events.dispatch(t,e)}onLayoutStart(t){this.enabled&&(this.toolbar.updateButtons(this.buttons),this.toolbar.layout(t.layoutBox,this.padding))}refreshButtonsEnabled(t){for(const[e,i]of this.buttons.entries())i&&this.toolbar.toggleButtonEnabledByIndex(e,t)}onToolbarButtonPress({event:t,button:e,buttonBounds:i}){const o=this.ctx.axisManager.getAxisContext(bR.Y)[0].scale;switch(e.value){case"clear":this.dispatch("pressed-clear");break;case"line-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsLineAnnotations",nC.filter(s=>s.visible?s.visible(o):!0));break;case"fibonacci-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsFibonacciAnnotations",rC);break;case"text-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsTextAnnotations",cC);break;case"shape-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsShapeAnnotations",hC);break;case"measurer-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsMeasurerAnnotations",pC);break}}onToolbarButtonPressShowMenu(t,e,i,o,s){this.dispatch("pressed-show-menu");const a=this.buttons.findIndex(n=>n.value===i);this.toolbar.toggleActiveButtonByIndex(a),this.annotationMenu.setAnchor({x:e.x+e.width+6,y:e.y}),this.annotationMenu.show({items:s,ariaLabel:this.ctx.localeManager.t(o),class:"ag-charts-annotations__toolbar-menu",sourceEvent:t.sourceEvent,onPress:this.onButtonPressMenuCreateAnnotation.bind(this,i)})}onButtonPressMenuCreateAnnotation(t,e){const i=this.buttons.findIndex(o=>o.value===t);this.updateButtonByIndex(i,{icon:e.icon}),this.dispatch("pressed-create-annotation",{annotation:e.value}),this.annotationMenu.hide()}onKeyDown({sourceEvent:t}){t.key==="Escape"&&this.dispatch("cancel-create-annotation")}updateButtonByIndex(t,e){const i=this.buttons.at(t);i&&(i.set({...i.toJson(),...e,value:e.value??i.value}),this.toolbar.updateButtonByIndex(t,{...i.toJson()}))}};p([bc(dR),fR({changeValue(t){this.toolbar?.setHidden(!t)}})],vc.prototype,"enabled",2),p([bc(gR)],vc.prototype,"padding",2),p([bc(pR)],vc.prototype,"buttons",2);import{_ModuleSupport as vR,_Widget as DR}from"ag-charts-community";var{BaseModuleInstance:MR,InteractionState:cr,TempValidate:kR,BOOLEAN:OR,ChartAxisDirection:TR,getIconClassNames:AR}=vR,hr="ag-charts-annotations__axis-button",IS=class extends MR{constructor(t,e,i,o){super(),this.ctx=t,this.axisCtx=e,this.onButtonClick=i,this.seriesRect=o,this.enabled=!0,this.snap=!1,this.padding=0,this.button=this.setup(),this.toggleVisibility(!1),this.updateButtonElement(),this.snap=!!e.scale.bandwidth,t.domManager.addEventListener("focusin",({target:s})=>{const a=s instanceof HTMLElement?s:void 0;!(a&&t.domManager.contains(a,"series-area"))&&a!==this.button.getElement()&&this.hide()}),this.destroyFns.push(t.widgets.seriesWidget.addListener("drag-move",s=>this.onMouseDrag(s)),t.widgets.seriesWidget.addListener("mousemove",s=>this.onMouseMove(s)),t.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseLeave()),t.widgets.seriesDragInterpreter.addListener("click",s=>this.onClick(s)),t.chartEventManager.addListener("series-focus-change",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.hide()),t.zoomManager.addListener("zoom-change",()=>this.hide()),()=>this.destroyElements(),()=>this.button.destroy())}update(t,e){this.seriesRect=t,this.padding=e}setup(){const t=new DR.ButtonWidget;return t.addClass(hr),t.setTabIndex(-1),t.setAriaLabel(this.ctx.localeManager.t("ariaLabelAddHorizontalLine")),this.ctx.widgets.seriesWidget.getElement().appendChild(t.getElement()),t}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",hr)}onMouseMove(t){this.ctx.interactionManager.isState(cr.Clickable)&&this.show(t)}onMouseDrag(t){this.ctx.interactionManager.isState(cr.AnnotationsMoveable)&&this.show(t)}onMouseLeave(){this.ctx.interactionManager.isState(cr.Clickable)&&this.hide()}onClick(t){this.ctx.interactionManager.isState(cr.Clickable)&&t.device==="touch"&&this.show(t)}show(t){const{sourceEvent:e,currentX:i,currentY:o}=t;if(!(this.enabled&&this.ctx.widgets.seriesWidget.getElement().contains(e.target))){this.hide();return}this.toggleVisibility(!0);const s=this.getButtonCoordinates({x:i,y:o});this.coords={x:s.x+this.button.clientWidth/2,y:s.y+this.button.clientHeight/2},this.updatePosition(s)}hide(){this.toggleVisibility(!1)}onKeyPress(){this.snap&&this.ctx.interactionManager.isState(cr.Default)||this.hide()}getButtonCoordinates({x:t,y:e}){const{axisCtx:{direction:i,position:o},seriesRect:s,snap:a,axisCtx:n,padding:r}=this,{clientWidth:l,clientHeight:c}=this.button,[h,d]=[0,s.height],[u,g]=[0,s.width];if(a&&(t=Do(El(t-s.x,n),n)+s.x,e=Do(El(e-s.y,n),n)+s.y),i===TR.X){const y=c-Math.max(0,r-5);t=t-l/2,e=o==="top"?h-c+y:d-y}else{const y=l-Math.max(0,r-9);t=o==="left"?u-l+y:g-y,e=e-c/2}return{x:t,y:e}}toggleVisibility(t){const{button:e}=this;if(e==null)return;const i=this.enabled&&t;this.toggleClass("-hidden",!i)}toggleClass(t,e){this.button.toggleClass(`${hr}-${t}`,e)}updatePosition({x:t,y:e}){this.button.getElement().style.transform=`translate(${Math.round(t)}px, ${Math.round(e)}px)`}updateButtonElement(){const{button:t}=this;t.addListener("click",()=>this.onButtonClick(this.coords)),t.addListener("touchend",()=>this.onButtonClick(this.coords)),t.addListener("drag-start",()=>{}),t.setInnerHTML(`<span class="${AR("zoom-in")} ${hr}-icon"></span>`)}};p([kR(OR)],IS.prototype,"enabled",2);import{_ModuleSupport as IR}from"ag-charts-community";import{_ModuleSupport as NR}from"ag-charts-community";import{createElement as wo,entries as NS,getWindow as CR}from"ag-charts-core";var{Color:CS,DraggablePopover:LR,NativeWidget:Mu,Vec2:Kt,createButton:Dc,createCheckbox:RR,createElementId:LS,createSelect:wR,createTextArea:PR,initRovingTabIndex:RS,getIconClassNames:ER,mapValues:ku,setAttribute:_R,setAttributes:Ou}=NR,wS=class Jy extends LR{constructor(e,i){super(e,i),this.dragHandleDraggingClass="ag-charts-dialog__drag-handle--dragging",this.colorPicker=new gx(this.ctx,{detached:!0}),this.destroyFns.push(e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)))}showWithChildren(e,i){const o=super.showWithChildren(e,i);return o.classList.add("ag-charts-dialog"),o.setAttribute("role","dialog"),o.addEventListener("mousedown",s=>{s.target.classList?.contains("ag-charts-dialog__color-picker-button")||this.colorPicker.hide()}),o.addEventListener("keydown",this.onKeyDown.bind(this)),CR().requestAnimationFrame(()=>this.reposition()),this.colorPicker.attachTo(this),o}updatePosition(e){super.updatePosition(e);const{anchor:i,fallbackAnchor:o}=this.getColorPickerAnchors()??{};i&&this.colorPicker.setAnchor(i,o)}createTabs(e,i,o){const s=wo("div","ag-charts-dialog__tabs"),a=ku(o,()=>LS("ag-charts-dialog__tab")),n=ku(o,()=>LS("ag-charts-dialog__tab-panel"));for(const[g,f]of NS(o))Ou(f.panel,{id:n[g],role:"tabpanel","aria-labelledby":a[g]});const r=g=>{for(const[f,y]of NS(o))y.panel.classList.toggle("ag-charts-dialog__tab-panel--active",f===g),h[f].classList.toggle("ag-charts-dialog__tab-button--active",f===g),_R(h[f],"aria-selected",f===g),f===g&&y.onShow?.()},l=new Mu(wo("div","ag-charts-dialog__header"));l.addListener("drag-start",g=>{const{sourceEvent:f}=g;f.target instanceof Element&&f.target.classList.contains("ag-charts-dialog__header")&&this.onDragStart(g)}),l.addListener("drag-move",g=>this.onDragMove(g)),l.addListener("drag-end",()=>this.onDragEnd());const c=new zR;this.setDragHandle(c);const h=ku(o,(g,f)=>Dc({label:this.ctx.localeManager.t(g.label),onPress:()=>r(f)},{id:a[f],class:"ag-charts-dialog__tab-button",role:"tab","aria-controls":n[f]})),d=wo("div","ag-charts-dialog__tab-list");Ou(d,{role:"tablist","aria-label":this.ctx.localeManager.t(e)}),d.append(...Object.values(h));const u=this.createHeaderCloseButton();return l.getElement().append(c.getElement(),d,u),s.append(l.getElement(),...Object.values(o).map(g=>g.panel)),r(i),RS({orientation:"horizontal",buttons:Object.values(h)}),{tabs:s,initialFocus:h[i]}}createTabPanel(){return wo("div","ag-charts-dialog__tab-panel")}createInputGroupLine(){return wo("div","ag-charts-dialog__input-group-line")}createRadioGroup({label:e,options:i,value:o,onChange:s}){const a=this.createInputGroup(e);Ou(a,{role:"radiogroup",tabindex:-1,"aria-label":this.ctx.localeManager.t(e)});const n="ag-charts-dialog__button--active",r=[];for(const l of i){const{icon:c,altText:h}=l,d=this.ctx.localeManager.t(h),u=Dc({icon:c,altText:d,onPress:()=>{for(const g of Array.from(a.children))g.classList.remove(n),g.ariaChecked="false";u.classList.add(n),u.ariaChecked="true",s(l.value)}},{"aria-checked":l.value===o,class:"ag-charts-dialog__button",role:"radio",title:d});l.value===o&&u.classList.add(n),a.appendChild(u),r.push(u)}return RS({orientation:"horizontal",buttons:r}),a}createSelect({altText:e,label:i,options:o,value:s,onChange:a}){const n=this.createInputGroup(i),r=this.ctx.localeManager.t(e),l=wR({value:s,options:o,onChange:a},{class:"ag-charts-dialog__select","aria-label":r,title:r});return n.append(l),n}createTextArea({placeholder:e,value:i,onChange:o}){const s=e?this.ctx.localeManager.t(e):void 0;return PR({value:i,onChange:o},{placeholder:s})}createCheckbox({label:e,checked:i,onChange:o}){const s=`ag-charts__${e}`,a=this.createInputGroup(e,{for:s}),n=RR({checked:i,onChange:o},{class:"ag-charts-dialog__checkbox",role:"switch",id:s});return a.append(n),a}createColorPicker({color:e,opacity:i,label:o,altText:s,onChange:a,onChangeHide:n,isMultiColor:r,hasMultiColorOption:l}){const c=this.createInputGroup(o),h=this.ctx.localeManager.t(s),d=Dc({label:h,onPress:u=>{const{anchor:g,fallbackAnchor:f}=this.getColorPickerAnchors(d)??{};this.colorPicker.show({anchor:g,fallbackAnchor:f,color:e,opacity:i,isMultiColor:r,hasMultiColorOption:l,sourceEvent:u,onChange:(y,m,x,v)=>{d.style.setProperty("--color",y),d.classList.toggle("ag-charts-dialog__color-picker-button--multi-color",v),a(y,m,x,v)},onChangeHide:n})}},{"aria-label":h,tabindex:0,class:"ag-charts-dialog__color-picker-button",title:h});if(r)d.classList.toggle("ag-charts-dialog__color-picker-button--multi-color");else if(e){const u=CS.fromString(e),g=new CS(u.r,u.g,u.b,i);d.style.setProperty("--color",g.toHexString())}return c.append(d),this.hideFns.push(()=>{this.colorPicker.hide()}),c}createHeaderCloseButton(){return Dc({icon:"close",altText:this.ctx.localeManager.t("iconAltTextClose"),onPress:()=>this.hide()},{class:"ag-charts-dialog__close-button"})}createInputGroup(e,i){const o=wo("div","ag-charts-dialog__input-group"),s=wo("label","ag-charts-dialog__input-group-label");return s.innerText=this.ctx.localeManager.t(e),i?.for&&s.setAttribute("for",i.for),o.appendChild(s),o}onLayoutComplete(e){this.seriesRect=e.series.paddedRect,this.reposition()}onKeyDown(e){e.altKey||e.ctrlKey||e.metaKey||e.isComposing||e.key!=="Escape"||this.hide()}reposition(){const{seriesRect:e,ctx:i}=this,o=i.domManager.getBoundingClientRect(),s=this.getPopoverElement();if(!e||!s)return;const a=Kt.from(0,e.y),n=Kt.from(o.width,e.height),r=Kt.from(s),l=Kt.from(.5,1);let c;if(e.width>1e3){const h=Kt.sub(Kt.add(a,Kt.multiply(n,l)),Kt.multiply(r,l));c=Kt.sub(h,Kt.from(0,Jy.offset))}else{const h=Kt.sub(Kt.add(a,n),r);c=Kt.sub(h,Jy.offset)}this.updatePosition(c)}getColorPickerAnchors(e){if(e&&(this.colorPickerAnchorElement=e),!this.colorPickerAnchorElement)return;const i=this.colorPickerAnchorElement.getBoundingClientRect(),o=this.ctx.domManager.getBoundingClientRect(),s=Kt.sub(Kt.from(i.x,i.y),Kt.from(o.left,o.top)),a=Kt.add(s,Kt.from(0,i.height+5)),n=Kt.sub(s,Kt.from(0,5));return{anchor:a,fallbackAnchor:n}}};wS.offset=60;var BR=wS,zR=class extends Mu{constructor(){super(wo("div","ag-charts-dialog__drag-handle"));const t=new Mu(wo("span",ER("drag-handle")));t.setAriaHidden(!0),this.addChild(t)}},{Listeners:FR,focusCursorAtEnd:VR}=IR,GR=class extends BR{constructor(t){super(t,"settings"),this.events=new FR,this.hideFns.push(()=>this.events.dispatch("hidden"))}addListener(t,e){return this.events.addListener(t,e)}show(t,e){const i=this.createLinearLineTab(t,e),o=this.createLinearTextTab(t,e);let s="dialogHeaderLine";No(t)?s="dialogHeaderChannel":cx(t)?s="dialogHeaderFibonacciRange":t.type==="date-range"?s="dialogHeaderDateRange":t.type==="price-range"?s="dialogHeaderPriceRange":t.type==="date-price-range"&&(s="dialogHeaderDatePriceRange");const{tabs:a,initialFocus:n}=this.createTabs("ariaLabelSettingsTabBar",e.initialSelectedTab,{line:{label:s,panel:i},text:{label:"dialogHeaderText",panel:o.panel,onShow:o.onShow}});e.initialFocus=n,this.showWithChildren([a],e).classList.add("ag-charts-dialog--annotation-settings")}createLinearLineTab(t,e){const i=this.createTabPanel(),o=this.createInputGroupLine(),s=this.createInputGroupLine(),a="isMultiColor"in t,n=this.createColorPickerInput("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),a?t.isMultiColor:!1,a,e.onChangeLineColor,e.onChangeHideLineColor),r=this.createStrokeWidthSelect(t.strokeWidth??2,e.onChangeLineStyleWidth),l=this.createLineStyleRadioGroup(t.lineStyle??"solid",e.onChangeLineStyleType);if(o.append(n),"background"in t){const c=this.createColorPickerInput("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),!1,!1,e.onChangeFillColor,e.onChangeHideFillColor);o.append(c),s.append(r)}else"showFill"in t?(o.append(this.createCheckbox({label:"dialogInputShowFill",checked:t.showFill??!0,onChange:c=>e.onChangeLine({showFill:c})})),s.append(r)):o.append(r);return s.append(l),i.append(o,s),"bands"in t&&i.append(this.createFibonacciRatioSelect(t.bands??10,c=>e.onChangeLine({bands:c}))),"extendStart"in t&&"extendEnd"in t&&i.append(this.createCheckbox({label:No(t)?"dialogInputExtendChannelStart":"dialogInputExtendLineStart",checked:t.extendStart??!1,onChange:c=>e.onChangeLine({extendStart:c})}),this.createCheckbox({label:No(t)?"dialogInputExtendChannelEnd":"dialogInputExtendLineEnd",checked:t.extendEnd??!1,onChange:c=>e.onChangeLine({extendEnd:c})})),"extendAbove"in t&&"extendBelow"in t&&i.append(this.createCheckbox({label:"dialogInputExtendAbove",checked:t.extendAbove??!1,onChange:c=>e.onChangeLine({extendAbove:c})}),this.createCheckbox({label:"dialogInputExtendBelow",checked:t.extendBelow??!1,onChange:c=>e.onChangeLine({extendBelow:c})})),"extendLeft"in t&&"extendRight"in t&&i.append(this.createCheckbox({label:"dialogInputExtendLeft",checked:t.extendLeft??!1,onChange:c=>e.onChangeLine({extendLeft:c})}),this.createCheckbox({label:"dialogInputExtendRight",checked:t.extendRight??!1,onChange:c=>e.onChangeLine({extendRight:c})})),"reverse"in t&&"showFill"in t&&i.append(this.createCheckbox({label:"dialogInputReverse",checked:t.reverse??!1,onChange:c=>e.onChangeLine({reverse:c})})),i}createLinearTextTab(t,e){const i=this.createTabPanel(),o=this.createTextArea({placeholder:"inputTextareaPlaceholder",value:t.text.label,onChange:h=>e.onChangeText({label:h})}),s=this.createFontSizeSelect(t.text.fontSize,e.onChangeTextFontSize),a=this.createColorPickerInput("text-color",t.text.color,1,!1,!1,e.onChangeTextColor,e.onChangeHideTextColor),n=t.text.position==="inside"?"center":t.text.position,r=this.createPositionRadioGroup(n??"top",h=>e.onChangeText({position:h})),l=this.createAlignmentRadioGroup(t.text.alignment??"center",h=>e.onChangeText({alignment:h})),c=this.createInputGroupLine();return c.append(s,a,r,l),i.append(o,c),{panel:i,onShow:()=>VR(o)}}createColorPickerInput(t,e,i,o,s,a,n){const r=t==="fill-color"?"dialogInputFillColorPicker":"dialogInputColorPicker",l=t==="fill-color"?"dialogInputFillColorPickerAltText":"dialogInputColorPickerAltText";return this.createColorPicker({label:r,altText:l,color:e,opacity:i,isMultiColor:o,hasMultiColorOption:s,onChange:a,onChangeHide:n})}createStrokeWidthSelect(t,e){return this.createSelect({label:"dialogInputStrokeWidth",altText:"dialogInputStrokeWidthAltText",options:mx.map(({label:i,value:o})=>({label:i,value:`${o}`})),value:String(t),onChange:i=>e(Number(i))})}createFibonacciRatioSelect(t,e){return this.createSelect({label:"dialogInputFibonacciBands",altText:"dialogInputFibonacciBandsAltText",options:lC.map(({label:i,value:o})=>({label:i,value:`${o}`})),value:String(t),onChange:i=>e(Number(i))})}createLineStyleRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputLineStyle",options:[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],value:t,onChange:e})}createFontSizeSelect(t,e){return this.createSelect({label:"dialogInputFontSize",altText:"dialogInputFontSizeAltText",options:xx.map(({label:i,value:o})=>({label:i,value:String(o)})),value:String(t),onChange:i=>e(Number(i))})}createPositionRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputPosition",options:[{icon:"position-top",altText:"iconAltTextPositionTop",value:"top"},{icon:"position-center",altText:"iconAltTextPositionCenter",value:"center"},{icon:"position-bottom",altText:"iconAltTextPositionBottom",value:"bottom"}],value:t,onChange:e})}createAlignmentRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputAlign",options:[{icon:"align-left",altText:"iconAltTextAlignLeft",value:"left"},{icon:"align-center",altText:"iconAltTextAlignCenter",value:"center"},{icon:"align-right",altText:"iconAltTextAlignRight",value:"right"}],value:t,onChange:e})}};function Tu(t){return t.gridPadding+t.seriesAreaPadding+t.tickSize+t.label.spacing}function WR(t,e,i){for(const{update:o}of Object.values(Ze))o(t,e,i)}var{BOOLEAN:PS,OBJECT:Au,ChartUpdateType:HR,InteractionState:Ee,ObserveChanges:KR,PropertiesArray:UR,TempValidate:pr,ChartAxisDirection:YR,Vec2:Xs,keyProperty:jR,valueProperty:$R,Selection:XR,BBox:ZR}=Rl,cn=class r0 extends Rl.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.toolbar=new vc(this.ctx),this.optionsToolbar=new tu(this.ctx,()=>{const i=this.state.getActive();if(i!=null)return $s(this.annotationData.at(i))}),this.axesButtons=new Nd,this.snap=!1,this.data=void 0,this.xKey=void 0,this.volumeKey=void 0,this.annotationData=new UR(r0.createAnnotationDatum),this.defaults=new oC,this.container=new Rl.Group({name:"static-annotations"}),this.annotations=new XR(this.container,this.createAnnotationScene.bind(this)),this.settingsDialog=new GR(this.ctx),this.textInput=new q2(this.ctx),this.isRestoringAnnotations=!0,this.postUpdateFns=[],this.state=this.setupStateMachine(),this.setupListeners(),this.setupDOM(),this.ctx.historyManager.addMementoOriginator(e.annotationManager),this.ctx.historyManager.addMementoOriginator(this.defaults),this.textInput.setKeyDownHandler(this.onTextInput.bind(this))}setupStateMachine(){const{ctx:e}=this;return new Sc({resetToIdle:()=>{e.domManager.updateCursor("annotations"),this.popAnnotationState(Ee.Annotations),this.hideOverlays(),this.optionsToolbar.hide(),this.deleteEphemeralAnnotations(),this.update()},hoverAtCoords:(i,o,s)=>{let a;return this.annotations.each((n,r,l)=>{const c=n.containsPoint(i.x,i.y);c&&(a??(a=l)),n.toggleHovered(c||o===l)}),a!=null?e.tooltipManager.suppressTooltip("annotations"):this.isAnnotationState()||e.tooltipManager.unsuppressTooltip("annotations"),this.ctx.domManager.updateCursor("annotations",a==null?void 0:this.annotations.at(a)?.getCursor()),a!==s&&this.update(),a},getNodeAtCoords:(i,o)=>{const s=this.annotations.at(o);if(s)return s.getNodeAtCoords(i.x,i.y)},translate:(i,o)=>{const s=this.annotations.at(i),a=$s(this.annotationData.at(i));if(!(!s||!a))return this.translateNode(s,a,o)},copy:i=>{const o=this.annotations.at(i),s=$s(this.annotationData.at(i));if(!(!o||!s))return this.createAnnotationDatumCopy(o,s)},paste:i=>{this.createAnnotation(i.type,i,!1),this.postUpdateFns.push(()=>{this.state.transitionAsync("selectLast"),this.state.transitionAsync("copy")})},select:(i,o)=>{const{annotations:s,optionsToolbar:a,toolbar:n}=this;this.hideOverlays(),n.clearActiveButton(),n.resetButtonIcons();const r=i!=null?s.at(i):null,l=o!=null?s.at(o):null;l===r&&r!=null||(l?.toggleActive(!1),a.hide(),r?(this.pushAnnotationState(Ee.AnnotationsSelected),r.toggleActive(!0),a.updateButtons(this.annotationData.at(i)),this.postUpdateFns.push(()=>{a.show(),a.setAnchorScene(r)})):(this.popAnnotationState(Ee.AnnotationsSelected),this.popAnnotationState(Ee.Annotations)),this.deleteEphemeralAnnotations(),this.update())},selectLast:()=>(this.pushAnnotationState(Ee.AnnotationsSelected),this.annotationData.length-1),startInteracting:()=>{this.pushAnnotationState(Ee.Annotations)},stopInteracting:()=>{this.popAnnotationState(Ee.Annotations)},create:(i,o)=>{this.createAnnotation(i,o)},delete:i=>{this.annotationData.splice(i,1)},deleteAll:()=>{this.annotationData.splice(0,this.annotationData.length)},validatePoint:(i,o)=>{const s=this.getAnnotationContext();return s?qa(s,i,o):!0},getAnnotationType:i=>aI(this.annotationData[i].type),datum:i=>this.annotationData.at(i),node:i=>this.annotations.at(i),recordAction:i=>{this.recordActionAfterNextUpdate(i)},update:()=>{this.postUpdateFns.push(()=>{const i=this.state.getActive(),o=i!=null?this.annotations.at(i):null;o!=null&&this.optionsToolbar.setAnchorScene(o)}),this.update()},showTextInput:i=>{const o=$s(this.annotationData.at(i));if(!this.annotations.at(i)||!o||!("getTextInputCoords"in o)||!("getTextPosition"in o))return;const a={color:o.color,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,placeholderColor:o.getPlaceholderColor()},n=this.getAnnotationContext(),r=c=>Xs.add(o.getTextInputCoords(n,c),Xs.required(this.seriesRect)),l=()=>o.getTextPosition();this.textInput.show({styles:a,layout:{getTextInputCoords:r,getTextPosition:l,alignment:o.alignment,textAlign:o.textAlign,width:o.width},text:o.text,placeholderText:o.placeholderText,onChange:(c,h)=>{this.state.transition("updateTextInputBBox",h)}}),this.ctx.domManager.updateCursor("annotations")},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:i=>{this.textInput.updateColor(i)},updateTextInputFontSize:i=>{const o=this.textInput.updateFontSize(i);this.state.transition("updateTextInputBBox",o)},updateTextInputBBox:i=>{this.state.transition("updateTextInputBBox",i)},showAnnotationOptions:i=>{const o=this.annotations.at(i);!o||Jo(this.annotationData.at(i))||(this.optionsToolbar.updateButtons(this.annotationData.at(i)),this.optionsToolbar.show(),this.optionsToolbar.setAnchorScene(o))},showAnnotationSettings:(i,o,s="line")=>{const a=this.annotationData.at(i);if(!Yl(a)&&!No(a)&&!or(a)||Jo(a))return;const n=c=>(h,d,u,g)=>{this.setColorAndDefault(a.type,c,h,d,u,g),this.optionsToolbar.updateColorPickerColor(c,d,u,g)},r=c=>()=>{this.recordActionAfterNextUpdate(`Change ${a.type} ${c} to ${a.getDefaultColor(c)}`,["annotations","defaults"]),this.update()},l={initialSelectedTab:s,ariaLabel:this.ctx.localeManager.t("ariaLabelAnnotationSettingsDialog"),sourceEvent:o,onChangeLine:c=>{this.state.transition("lineProps",c),c.bands!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"bands",c.bands),c.reverse!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"reverse",c.reverse),c.showFill!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"showFill",c.showFill)},onChangeText:c=>{this.state.transition("lineText",c),c.alignment&&this.defaults.setDefaultLineTextAlignment(a.type,c.alignment),c.position&&this.defaults.setDefaultLineTextPosition(a.type,c.position),this.recordActionAfterNextUpdate(`Change ${a.type} text ${Object.keys(c).map(h=>`${h} to ${c[h]}`).join(", ")}`)},onChangeFillColor:n("fill-color"),onChangeHideFillColor:r("fill-color"),onChangeLineColor:n("line-color"),onChangeHideLineColor:r("line-color"),onChangeLineStyleType:c=>{this.setLineStyleTypeAndDefault(a.type,c),this.optionsToolbar.updateLineStyleType(sr.find(h=>h.value===c)??sr[0])},onChangeLineStyleWidth:c=>{this.setLineStyleWidthAndDefault(a.type,c),this.optionsToolbar.updateStrokeWidth({strokeWidth:c,value:c,label:String(c)})},onChangeTextColor:n("text-color"),onChangeHideTextColor:r("text-color"),onChangeTextFontSize:c=>{this.setFontSizeAndDefault(a.type,c)}};this.settingsDialog.show(a,l)}})}setupListeners(){const{ctx:e,optionsToolbar:i,settingsDialog:o,toolbar:s}=this,{seriesWidget:a,seriesDragInterpreter:n,chartWidget:r}=e.widgets;this.destroyFns.push(n.addListener("click",this.hoverTouchPreHandler.bind(this)),n.addListener("drag-start",this.hoverTouchPreHandler.bind(this)),n.addListener("drag-move",this.dragMoveTouchPreHandler.bind(this)),n.addListener("mousemove",this.onHover.bind(this)),n.addListener("click",this.onClick.bind(this)),n.addListener("dblclick",this.onDoubleClick.bind(this)),n.addListener("drag-start",this.onDragStart.bind(this)),n.addListener("drag-move",this.onDrag.bind(this)),n.addListener("drag-end",this.onDragEnd.bind(this)),a.addListener("keydown",this.onKeyDown.bind(this)),a.addListener("keyup",this.onKeyUp.bind(this)),r.addListener("click",this.onCancel.bind(this)),e.annotationManager.addListener("restore-annotations",this.onRestoreAnnotations.bind(this)),e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),e.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),e.zoomManager.addListener("zoom-change",()=>this.onResize()),e.domManager.addListener("resize",()=>this.onResize()),s.addListener("cancel-create-annotation",()=>{this.cancel(),this.reset(),this.update()}),s.addListener("pressed-create-annotation",({annotation:l})=>{this.cancel(),this.pushAnnotationState(Ee.Annotations),this.state.transition(l),this.update()}),s.addListener("pressed-clear",()=>{this.clear(),this.recordActionAfterNextUpdate("Clear all")}),s.addListener("pressed-show-menu",()=>{this.cancel(),this.reset()}),s.addListener("pressed-unrelated",()=>{this.reset()}),i.addListener("pressed-delete",()=>{this.cancel(),this.delete(),this.reset()}),i.addListener("pressed-settings",({sourceEvent:l})=>{this.state.transition("toolbarPressSettings",l)}),i.addListener("pressed-lock",()=>{this.update()}),i.addListener("hid-overlays",()=>{this.settingsDialog.hide()}),i.addListener("saved-color",({type:l,colorPickerType:c,color:h})=>{this.recordActionAfterNextUpdate(`Change ${l} ${c} to ${h}`,["annotations","defaults"])}),i.addListener("updated-color",({type:l,colorPickerType:c,colorOpacity:h,color:d,opacity:u,isMultiColor:g})=>{this.setColorAndDefault(l,c,h,d,u,g)}),i.addListener("updated-font-size",({type:l,fontSize:c})=>{this.setFontSizeAndDefault(l,c)}),i.addListener("updated-line-style",({type:l,lineStyleType:c})=>{this.setLineStyleTypeAndDefault(l,c)}),i.addListener("updated-line-width",({type:l,strokeWidth:c})=>{this.setLineStyleWidthAndDefault(l,c)}),o.addListener("hidden",()=>{this.optionsToolbar.clearActiveButton()}))}setupDOM(){const{ctx:e,toolbar:i}=this;this.destroyFns.push(e.annotationManager.attachNode(this.container),()=>e.domManager.removeStyles(hr),()=>i.destroy())}async processData(e){if(!this.enabled||this.data==null||this.xKey==null||this.volumeKey==null)return;const i=[jR(this.xKey,void 0,{id:"date"}),$R(this.volumeKey,"number",{id:"volume"})],{dataModel:o,processedData:s}=await e.request("annotations",this.data,{props:i});this.dataModel=o,this.processedData=s}createAnnotationScene(e){if(e.type in Ze)return new Ze[e.type].scene;throw new Error(`AG Charts - Cannot create annotation scene of type [${e.type}], expected one of [${Object.keys(Ze)}], ignoring.`)}static createAnnotationDatum(e){if(e.type in Ze)return new Ze[e.type].datum().set(e);throw new Error(`AG Charts - Cannot create annotation datum of unknown type [${e.type}], expected one of [${Object.keys(Ze)}], ignoring.`)}createAnnotation(e,i,o=!0){if(this.annotationData.push(i),o){const s=this.ctx.annotationManager.getAnnotationTypeStyles(e);s&&i.set(s),this.defaults.applyDefaults(i)}this.injectDatumDependencies(i),this.update()}injectDatumDependencies(e){"setLocaleManager"in e&&e.setLocaleManager(this.ctx.localeManager),"getVolume"in e&&(e.getVolume=this.getDatumRangeVolume.bind(this))}getDatumRangeVolume(e,i){const{dataModel:o,processedData:s}=this;let a=_t(e),n=_t(i);if(!Id(a)||!Id(n)||!o||!s||this.volumeKey==null)return;a>n&&([a,n]=[n,a]);const r=o.resolveKeysById({id:"annotations"},"date",s),l=o.resolveColumnById({id:"annotations"},"volume",s);let c=0;for(let h=0;h<s.input.count;h++){const d=r[h];Id(d)&&d>=a&&d<=n&&(c+=l[h])}return c}translateNode(e,i,o){const s=this.getAnnotationConfig(i),a=this.getAnnotationContext();a&&s.translate(e,i,o,a)}createAnnotationDatumCopy(e,i){const o=this.getAnnotationConfig(i),s=new o.datum;s.set(i.toJson());const a=this.getAnnotationContext();if(a)return o.copy(e,i,s,a)}getAnnotationConfig(e){if(e.type in Ze)return Ze[e.type];throw new Error(`AG Charts - Cannot get annotation config of unknown type [${e.type}], expected one of [${Object.keys(Ze)}], ignoring.`)}onRestoreAnnotations(e){this.enabled&&(this.clear(),this.annotationData.set(e.annotations),this.isRestoringAnnotations=!0,this.postUpdateFns.push(()=>{this.ctx.annotationManager.fireChangedEvent()}),this.update())}onLayoutComplete(e){const i=e.series.paddedRect;this.seriesRect=i,this.container.setClipRect(i);for(const o of e.axes??[])o.direction===Rl.ChartAxisDirection.X?this.xAxis=this.getAxis(o,i,this.xAxis?.button):this.yAxis=this.getAxis(o,i,this.yAxis?.button);this.showAnnotations()?this.animateAnnotations({from:0,to:1,phase:"trailing"}):this.animateAnnotations({from:1,to:0,phase:"remove"})}showAnnotations(){if(!this.yAxis||!this.xAxis)return!1;const e=this.ctx.chartService.series.some(s=>s.hasData),o=this.yAxis.context.seriesIds().some(s=>this.ctx.chartService.series.find(n=>n.id===s)?.visible);return e&&o}animateAnnotations({from:e,to:i,phase:o}){const{annotations:s}=this;this.ctx.animationManager?.animate({from:e,to:i,id:"chart-annotations",phase:o,groupId:"opacity",onUpdate(a){s.each(n=>{n.opacity=a,"setAxisLabelOpacity"in n&&n.setAxisLabelOpacity(a)})},onStop(){s.each(a=>{a.opacity=i,"setAxisLabelOpacity"in a&&a.setAxisLabelOpacity(i)})}})}onPreRender(){this.updateAnnotations(),this.state.transition("render")}getAxis(e,i,o){const s=this.ctx.axisManager.getAxisContext(e.direction)[0],{position:a="bottom",direction:n}=s,r=e.gridPadding+e.seriesAreaPadding,l=new ZR(0,0,i.width,i.height).grow(r,a),c=s.direction===YR.X?"vertical":"horizontal",{axesButtons:h,snap:d}=this;if(this.enabled&&h.enabled&&(h.axes==="xy"||h.axes===n)){o??(o=new IS(this.ctx,{...s,snapToGroup:d},f=>this.onAxisButtonClick(f,c),i));const g=Tu(e);o.update(i,g)}else o?.destroy(),o=void 0;return{layout:e,context:s,bounds:l,button:o}}recordActionAfterNextUpdate(e,i=["annotations"]){const{defaults:o,ctx:{annotationManager:s,historyManager:a}}=this,n=i.map(r=>r==="defaults"?o:s);this.postUpdateFns.push(()=>{a.record(e,...n),s.fireChangedEvent()})}setColorAndDefault(e,i,o,s,a,n){this.state.transition("color",{colorPickerType:i,colorOpacity:o,color:s,opacity:a,isMultiColor:n}),this.defaults.setDefaultColor(e,i,o,s,a,n)}setFontSizeAndDefault(e,i){this.state.transition("fontSize",i),this.defaults.setDefaultFontSize(e,i),this.recordActionAfterNextUpdate(`Change ${e} font size to ${i}`,["annotations","defaults"])}setLineStyleTypeAndDefault(e,i){this.state.transition("lineStyle",{type:i}),this.defaults.setDefaultLineStyleType(e,i),this.recordActionAfterNextUpdate(`Change ${e} line style to ${i}`,["annotations","defaults"])}setLineStyleWidthAndDefault(e,i){this.state.transition("lineStyle",{strokeWidth:i}),this.defaults.setDefaultLineStyleWidth(e,i),this.recordActionAfterNextUpdate(`Change ${e} stroke width to ${i}`,["annotations","defaults"])}updateAnnotations(){const{annotationData:e,annotations:i,seriesRect:o,ctx:{annotationManager:s}}=this,a=this.getAnnotationContext();if(!o||!a)return;s.updateData(e.toJson().filter(r=>!Jo(r)));const n=this.showAnnotations();this.toolbar.refreshButtonsEnabled(n),this.toolbar.toggleClearButtonEnabled(e.length>0&&n),i.update(e??[],void 0,r=>r.id).each((r,l)=>{if(!n||!this.validateDatum(l)){r.visible=!1,"setAxisLabelVisible"in r&&r.setAxisLabelVisible(!1);return}"setAxisLabelVisible"in r&&r.setAxisLabelVisible(!0),this.injectDatumDependencies(l),WR(r,l,a)}),this.postUpdateFns.forEach(r=>r()),this.postUpdateFns=[],this.isRestoringAnnotations=!1}validateDatum(e){if(!this.isRestoringAnnotations)return!0;const i=this.getAnnotationContext(),o=`Annotation [${e.type}] `;return i?e.isValidWithContext(i,o):!0}getAnnotationContext(){const{seriesRect:e,xAxis:i,yAxis:o,snap:s}=this;if(e&&i&&o)return{seriesRect:e,xAxis:{...i.context,bounds:i.bounds,labelPadding:Tu(i.layout),snapToGroup:s},yAxis:{...o.context,bounds:o.bounds,labelPadding:Tu(i.layout),snapToGroup:s}}}onHover(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=e.sourceEvent.shiftKey,a=Xs.from(e),n=ke(a,o);i.transition("hover",{offset:a,point:n,shiftKey:s,context:o})}onClick(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=e.sourceEvent.shiftKey,a=ke(Xs.from(e),o),n=this.textInput.getValue(),r=this.textInput.getBBox();i.transition("click",{point:a,shiftKey:s,textInputValue:n,bbox:r})}onDoubleClick(e){const{state:i}=this;if(!this.getAnnotationContext())return;const s=Xs.from(e);i.transition("dblclick",{offset:s})}onAxisButtonClick(e,i){this.cancel(),this.reset();const o=this.getAnnotationContext();if(!this.annotationData||!o)return;const{state:s}=this;this.pushAnnotationState(Ee.Annotations);const a=i==="horizontal";if(s.transition(a?"horizontal-line":"vertical-line"),this.optionsToolbar.hide(),!e)return;const n=ke(e,o);qa(o,n)&&(s.transition("click",{point:n,shiftKey:!1}),this.update())}onResize(){const e=this.textInput.getValue(),i=this.textInput.getBBox();this.state.transition("resize",{textInputValue:e,bbox:i})}hoverTouchPreHandler(e){e.device==="touch"&&this.onHover(e)}dragMoveTouchPreHandler(e){e.device==="touch"&&this.ctx.interactionManager.isState(Ee.AnnotationsSelected)&&e.sourceEvent.preventDefault()}onDragStart(e){if(!this.ctx.interactionManager.isState(Ee.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const o=Xs.from(e),s=ke(o,i),a=this.textInput.getValue(),n=this.textInput.getBBox();this.state.transition("dragStart",{context:i,offset:o,point:s,textInputValue:a,bbox:n})}onDrag(e){if(!this.ctx.interactionManager.isState(Ee.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const o=Xs.from(e),s=ke(o,i),a=e.sourceEvent.shiftKey,n=this.textInput.getValue(),r=this.textInput.getBBox();this.state.transition("drag",{context:i,offset:o,point:s,shiftKey:a,textInputValue:n,bbox:r})}onDragEnd(){this.state.transition("dragEnd")}onCancel(e){const{sourceEvent:i}=e??{};i?.currentTarget===i?.target&&(this.cancel(),this.reset())}onDelete(){this.textInput.isVisible()||(this.cancel(),this.delete(),this.reset(),this.update())}onTextInput(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const{key:s,shiftKey:a}=e,n=this.textInput.getValue(),r=this.textInput.getBBox();i.transition("textInput",{key:s,shiftKey:a,textInputValue:n,bbox:r,context:o})}onKeyDown(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const{sourceEvent:s}=e,{shiftKey:a,ctrlKey:n,metaKey:r}=s,l=n||r,c=n||a;i.transition("keyDown",{shiftKey:a,context:o});const h={x:0,y:0},d=Math.max(o?.xAxis.scale.bandwidth??0,c?10:1),u=Math.max(o?.yAxis.scale.bandwidth??0,c?10:1);switch(s.key){case"ArrowDown":h.y=u;break;case"ArrowUp":h.y=-u;break;case"ArrowLeft":h.x=-d;break;case"ArrowRight":h.x=d;break;case"Escape":this.onCancel();return;case"Backspace":case"Delete":this.onDelete();return}if((h.x||h.y)&&(i.transition("translate",{translation:h}),s.stopPropagation(),s.preventDefault()),!!l)switch(s.key){case"c":i.transition("copy");return;case"x":i.transition("cut"),this.recordActionAfterNextUpdate("Cut annotation");return;case"v":i.transition("paste"),this.recordActionAfterNextUpdate("Paste annotation");return}}onKeyUp(e){const{shiftKey:i}=e.sourceEvent,o=this.getAnnotationContext();o&&(this.state.transition("keyUp",{shiftKey:i,context:o}),this.state.transition("translateEnd"))}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}deleteEphemeralAnnotations(){for(const[e,i]of this.annotationData.entries())Jo(i)&&this.annotationData.splice(e,1)}hideOverlays(){this.settingsDialog.hide(),this.toolbar.hideOverlays(),this.optionsToolbar.hideOverlays()}pushAnnotationState(e){this.ctx.interactionManager.pushState(e),this.ctx.tooltipManager.suppressTooltip("annotations")}popAnnotationState(e){this.ctx.interactionManager.popState(e),this.ctx.tooltipManager.unsuppressTooltip("annotations")}isAnnotationState(){return this.ctx.interactionManager.isState(Ee.Annotations)||this.ctx.interactionManager.isState(Ee.AnnotationsSelected)}update(e=HR.PRE_SCENE_RENDER){this.ctx.updateService.update(e)}};p([KR((t,e,i)=>{const{ctx:{annotationManager:o,stateManager:s}}=t;e!==i&&(t.toolbar?.toggleVisibility(!!e),i===!1&&e===!0?s.restoreState(o):e===!1&&t.clear())}),pr(PS)],cn.prototype,"enabled",2),p([pr(Au)],cn.prototype,"toolbar",2),p([pr(Au)],cn.prototype,"optionsToolbar",2),p([pr(Au)],cn.prototype,"axesButtons",2),p([pr(PS)],cn.prototype,"snap",2);var qR=cn;import{_ModuleSupport as QR}from"ag-charts-community";var{FONT_SIZE_RATIO:JR,ThemeSymbols:qt}=QR,yi={stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:2},ae={fill:qt.DEFAULT_ANNOTATION_HANDLE_FILL,strokeOpacity:1,strokeWidth:2},Zs={color:{$ref:"backgroundColor"},fontSize:{$rem:[JR.LARGE]},fontFamily:{$ref:"fontFamily"}},ES={...Zs,enabled:!0,fill:{$ref:"foregroundColor"},fontSize:{$ref:"fontSize"}},Mc={...Zs,textAlign:"left"},qs={...Zs,position:"top",alignment:"center",color:{$ref:"textColor"}},_S={...Zs,position:"top",alignment:"center",color:{$ref:"textColor"}},Iu={...Zs,fontSize:{$ref:"fontSize"},color:qt.DEFAULT_ANNOTATION_STATISTICS_COLOR,fill:qt.DEFAULT_ANNOTATION_STATISTICS_FILL,stroke:qt.DEFAULT_ANNOTATION_STATISTICS_STROKE,strokeWidth:1,divider:{stroke:qt.DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE,strokeWidth:1,strokeOpacity:.5}},Nu={...yi,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...ae},text:{...qs},statistics:{...Iu}},tw={buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}],padding:{$ref:"padding"}},ew={buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color"},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color"},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color"},{tooltip:"toolbarAnnotationsTextSize",value:"text-size"},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width"},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type"},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings"},{icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},iw={enabled:!1,line:{...yi,handle:{...ae},text:{...qs}},"horizontal-line":{...yi,handle:{...ae},axisLabel:{...ES},text:{...qs}},"vertical-line":{...yi,handle:{...ae},axisLabel:{...ES},text:{...qs}},"disjoint-channel":{...yi,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...ae},text:{..._S}},"parallel-channel":{...yi,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...ae},text:{..._S}},"fibonacci-retracement":{...yi,strokes:qt.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...ae},text:{...qs,position:"center"},label:{...Zs,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},"fibonacci-retracement-trend-based":{...yi,strokes:qt.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...ae},text:{...qs,position:"center"},label:{...Zs,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},callout:{...yi,...Mc,color:{$ref:"textColor"},handle:{...ae},fill:{$ref:"foregroundColor"},fillOpacity:.075},comment:{...Mc,fontWeight:700,handle:{...ae},fill:{$ref:"foregroundColor"}},note:{...Mc,color:qt.DEFAULT_TEXTBOX_COLOR,fill:qt.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...ae},background:{fill:qt.DEFAULT_TEXTBOX_FILL,stroke:qt.DEFAULT_TEXTBOX_STROKE,strokeWidth:1}},text:{...Mc,color:{$ref:"textColor"},handle:{...ae}},arrow:{...yi,handle:{...ae},text:{...qs}},"arrow-up":{fill:qt.PALETTE_UP_FILL,handle:{...ae,stroke:{$ref:"foregroundColor"}}},"arrow-down":{fill:qt.PALETTE_DOWN_FILL,handle:{...ae,stroke:{$ref:"foregroundColor"}}},"date-range":{...Nu},"price-range":{...Nu},"date-price-range":{...Nu},"quick-date-price-range":{up:{...yi,fill:qt.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2,handle:{...ae},statistics:{...Iu,color:"#fff",fill:qt.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...yi,stroke:qt.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE,fill:qt.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,fillOpacity:.2,handle:{...ae,stroke:qt.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE},statistics:{...Iu,color:"#fff",fill:qt.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{},toolbar:tw,optionsToolbar:ew},ow={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new qR(t),themeTemplate:{annotations:iw}};import{_ModuleSupport as Cu}from"ag-charts-community";import{_ModuleSupport as BS}from"ag-charts-community";import{createElement as sw}from"ag-charts-core";var{BaseProperties:aw,ObserveChanges:nw,ProxyProperty:rw,TempValidate:Qs,NUMBER:kc,POSITIVE_NUMBER:zS,RATIO:lw,calculatePlacement:cw}=BS,ro=class extends aw{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),this.onLoad?.())},this.imageElement=sw("img"),this.imageElement.onload=this.onImageLoad,this.node=new BS.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e;const i={width:t,height:e},o=cw(this.imageElement.width,this.imageElement.height,i,this);return this.node.setProperties(this.complete?{visible:!0,opacity:this.opacity,...o}:{visible:!1}),o}};p([Qs(kc,{optional:!0})],ro.prototype,"top",2),p([Qs(kc,{optional:!0})],ro.prototype,"right",2),p([Qs(kc,{optional:!0})],ro.prototype,"bottom",2),p([Qs(kc,{optional:!0})],ro.prototype,"left",2),p([Qs(zS,{optional:!0})],ro.prototype,"width",2),p([Qs(zS,{optional:!0})],ro.prototype,"height",2),p([Qs(lw)],ro.prototype,"opacity",2),p([rw("imageElement.src"),nw(t=>t.loadedSynchronously=t.complete)],ro.prototype,"url",2);var{ActionOnSet:hw,OBJECT:pw,TempValidate:dw}=Cu,FS=class extends Cu.Background{constructor(){super(...arguments),this.image=new ro}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.ctx.updateService.update(Cu.ChartUpdateType.SCENE_RENDER)}};p([dw(pw,{optional:!0}),hw({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],FS.prototype,"image",2);var uw={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new FS(t)};import"ag-charts-community";import{_ModuleSupport as VS}from"ag-charts-community";import{Logger as gw}from"ag-charts-core";var{BOOLEAN:fw,ActionOnSet:yw,LayoutElement:mw,Menu:xw,TempValidate:Sw}=VS,Lu=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],GS=class extends VS.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.menu=new xw(this.ctx,"chart-toolbar"),this.toolbar=t.sharedToolbar.getSharedToolbar("chartToolbar"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPressed.bind(this)),t.layoutManager.registerElement(mw.ToolbarLeft,this.onLayoutStart.bind(this)),()=>this.toolbar.destroy())}onLayoutStart(t){this.enabled&&(this.updateButton(),this.toolbar.layout(t.layoutBox))}onButtonPressed({event:t,buttonBounds:e}){this.menu.setAnchor({x:e.x+e.width+6,y:e.y}),this.menu.show({items:Lu,menuItemRole:"menuitemradio",ariaLabel:this.ctx.localeManager.t("toolbarSeriesTypeDropdown"),class:"ag-charts-chart-toolbar__menu",value:this.getChartType(),sourceEvent:t.sourceEvent,onPress:i=>{this.setChartType(i.value),this.hidePopover()},onHide:()=>{this.toolbar.clearActiveButton()}}),this.toolbar.toggleActiveButtonByIndex(0)}updateButton(){const t=this.getChartType(),e=Lu.find(i=>i.value===t)?.icon;e!=null&&this.toolbar.updateButtons([{icon:e,tooltip:"toolbarSeriesTypeDropdown"}])}hidePopover(){this.toolbar.clearActiveButton(),this.menu.hide()}setChartType(t){const e={chartType:t};this.ctx.chartService.publicApi?.updateDelta(e).catch(i=>gw.error(i))}getChartType(){const t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return t==null||!Lu.some(e=>e.value===t)?"candlestick":t}};p([Sw(fw),yw({changeValue(t){this.toolbar?.setHidden(!t)}})],GS.prototype,"enabled",2);var bw={type:"root",optionsKey:"chartToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new GS(t)};import{_ModuleSupport as vw}from"ag-charts-community";import{_ModuleSupport as Oc}from"ag-charts-community";import{Logger as WS,clamp as HS,createElement as Ru}from"ag-charts-core";var Tc="ag-charts-context-menu",Ac="ag-charts-dark-context-menu",{BOOLEAN:KS,TempValidate:US,initMenuKeyNav:Dw,makeAccessibleClickListener:Mw,ContextMenuRegistry:dr}=Oc,wu="context-menu";function kw(t,e){const{children:i}=t??{};if(!i)return[];const o=[];for(const s of Array.from(i))s instanceof e&&o.push(s);return o}var Pu=class extends Oc.BaseModuleInstance{constructor(t){if(super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.extraSeriesAreaActions=[],this.extraLegendItemActions=[],this.pickedNode=void 0,this.showEvent=void 0,this.x=0,this.y=0,this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.groups={default:[],extra:[],extraSeriesArea:[],extraNode:[],extraLegendItem:[]},this.element=t.domManager.addChild("canvas-overlay",wu),this.element.classList.add(Tc),this.element.addEventListener("contextmenu",e=>e.preventDefault()),this.destroyFns.push(()=>this.element.parentNode?.removeChild(this.element)),this.doClose(),this.destroyFns.push(t.domManager.addListener("hidden",()=>this.hide())),typeof MutationObserver<"u"){const e=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});e.observe(this.element,{childList:!0}),this.mutationObserver=e,this.destroyFns.push(()=>e.disconnect())}this.destroyFns.push(this.registry.registerDefaultAction({id:"download",type:"all",label:"contextMenuDownload",action:()=>{const e=t.chartService.title;let i="image";e?.enabled&&e?.text!==void 0&&(i=e.text.replace(/\.+/,"")),this.ctx.chartService.publicApi?.download({fileName:i}).catch(o=>{WS.error("Unable to download chart",o)})}})),this.destroyFns.push(this.registry.addListener(e=>this.onContext(e)))}onContext(t){if(!this.enabled)return;t.sourceEvent.preventDefault(),this.showEvent=t.sourceEvent,this.x=t.x,this.y=t.y,this.groups.default=this.registry.filterActions(t.type);for(const r of this.groups.default)r.id==null||r.toggleEnabledOnShow==null||(r.toggleEnabledOnShow(t)?this.registry.enableAction(r.id):this.registry.disableAction(r.id));this.pickedNode=void 0,this.pickedLegendItem=void 0,this.groups.extra=this.extraActions.map(({label:r,action:l})=>({type:"all",label:r,action:l})),this.groups.extraSeriesArea=[],this.groups.extraNode=[],dr.check("series-area",t)&&(this.pickedNode=t.context.pickedNode,this.groups.extraSeriesArea=this.extraSeriesAreaActions.map(({label:r,action:l})=>({type:"series-area",label:r,action:l})),this.pickedNode&&(this.groups.extraNode=this.extraNodeActions.map(({label:r,action:l})=>({type:"node",label:r,action:l})))),this.groups.extraLegendItem=[],dr.check("legend",t)&&(this.pickedLegendItem=t.context.legendItem,this.pickedLegendItem&&(this.groups.extraLegendItem=this.extraLegendItemActions.map(({label:r,action:l})=>({type:"legend",label:r,action:l}))));const{default:e,extra:i,extraSeriesArea:o,extraNode:s,extraLegendItem:a}=this.groups;[e,i,o,s,a].reduce((r,l)=>l.length+r,0)!==0&&this.show(t.sourceEvent)}show(t){this.interactionManager.pushState(Oc.InteractionState.ContextMenu),this.element.classList.toggle(Ac,this.darkTheme);const e=this.renderMenu();this.menuCloser?.close(),this.menuElement?this.element.replaceChild(e,this.menuElement):this.element.appendChild(e),this.menuElement=e,this.element.style.display="block";const i=t.pointerType==="touch"?!1:void 0,o=kw(e,HTMLButtonElement);this.menuCloser=Dw({menu:e,buttons:o,orientation:"vertical",sourceEvent:t,overrideFocusVisible:i,autoCloseOnBlur:!0,closeCallback:()=>this.doClose()}),t.pointerType==="touch"&&this.ctx.chartService.overrideFocusVisible(!1)}hide(){this.menuCloser?.close()}doClose(){this.interactionManager.popState(Oc.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0,this.menuCloser=void 0),this.element.style.display="none"}renderMenu(){const t=Ru("div");return t.classList.add(`${Tc}__menu`),t.classList.toggle(Ac,this.darkTheme),t.role="menu",this.appendMenuGroup(t,this.groups.default,!1),this.appendMenuGroup(t,this.groups.extra),this.appendMenuGroup(t,this.groups.extraSeriesArea),this.pickedNode&&this.appendMenuGroup(t,this.groups.extraNode),this.pickedLegendItem&&this.appendMenuGroup(t,this.groups.extraLegendItem),t}appendMenuGroup(t,e,i=!0){e.length!==0&&(i&&t.appendChild(this.createDividerElement()),e.forEach(o=>{const s=this.renderItem(o);s&&t.appendChild(s)}))}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=Ru("div");return t.classList.add(`${Tc}__divider`),t.classList.toggle(Ac,this.darkTheme),t.role="separator",t}createActionElement({id:t,label:e,type:i,action:o}){const s=!!(t&&this.registry.isDisabled(t));return this.createButtonElement(i,e,o,s)}createButtonOnClick(t,e){return dr.checkCallback("legend",t,e)?i=>{if(this.pickedLegendItem){const{seriesId:o,itemId:s}=this.pickedLegendItem;e({type:"contextmenu",seriesId:o,itemId:s,event:i}),this.hide()}}:dr.checkCallback("series-area",t,e)?()=>{e({type:"seriesContextMenuAction",event:this.showEvent}),this.hide()}:dr.checkCallback("node",t,e)?()=>{const{pickedNode:i,showEvent:o}=this,s=i?.series.createNodeContextMenuActionEvent(o,i);s?e(s):WS.error("series node not found"),this.hide()}:()=>{e({type:"contextMenuEvent",event:this.showEvent}),this.hide()}}createButtonElement(t,e,i,o){const s=Ru("button");return s.classList.add(`${Tc}__item`),s.classList.toggle(Ac,this.darkTheme),s.ariaDisabled=o.toString(),s.textContent=this.ctx.localeManager.t(e),s.role="menuitem",s.onclick=Mw(s,this.createButtonOnClick(t,i)),s.addEventListener("mouseover",()=>s.focus({preventScroll:!0})),s}reposition(){let{x:t,y:e}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:o,offsetHeight:s}=this.element;t=HS(0,t,i.width-o),e=HS(0,e,i.height-s),this.element.style.left=`${t}px`,this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){super.destroy(),this.mutationObserver?.disconnect(),this.ctx.domManager.removeStyles(wu),this.ctx.domManager.removeChild("canvas-overlay",wu)}};p([US(KS)],Pu.prototype,"enabled",2),p([US(KS)],Pu.prototype,"darkTheme",2);var Ow={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsKey:"contextMenu",moduleFactory:t=>new Pu(t),themeTemplate:{contextMenu:{enabled:!0,darkTheme:vw.ThemeSymbols.IS_DARK_THEME}}};import"ag-charts-community";import{_ModuleSupport as hn}from"ag-charts-community";import{isInteger as Tw}from"ag-charts-core";import{_ModuleSupport as Eu}from"ag-charts-community";var{BaseProperties:Aw,BOOLEAN:YS,FUNCTION:jS,NUMBER:Ic,STRING:$S,TempValidate:lo,createId:Iw,setAttribute:Nw}=Eu,Cw="ag-charts-crosshair-label",pn=class extends Eu.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};p([lo(YS)],pn.prototype,"enabled",2),p([lo(Ic)],pn.prototype,"xOffset",2),p([lo(Ic)],pn.prototype,"yOffset",2),p([lo($S,{optional:!0})],pn.prototype,"format",2),p([lo(jS,{optional:!0})],pn.prototype,"renderer",2);var dn=class extends Aw{constructor(t,e,i){super(),this.domManager=t,this.id=Iw(this),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=t.addChild("canvas-overlay",`crosshair-label-${this.id}`),this.element.classList.add(Cw),Nw(this.element,"aria-hidden",!0),this.element.setAttribute("data-key",e),this.element.setAttribute("data-axis-id",i)}show(t){const{element:e}=this,i=t.x+this.xOffset,o=t.y+this.yOffset;e.style.top=`${Math.round(o)}px`,e.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}getBBox(){const{element:t}=this;return new Eu.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}toggle(t){this.element.classList.toggle("ag-charts-crosshair-label--hidden",!t)}destroy(){this.domManager.removeChild("canvas-overlay",`crosshair-label-${this.id}`)}toLabelHtml(t,e){if(typeof t=="string")return t;e=e??{};const{text:i=e.text??"",color:o=e.color,backgroundColor:s=e.backgroundColor,opacity:a=e.opacity??1}=t;return`<div class="ag-charts-crosshair-label-content" style="${`opacity: ${a}; background-color: ${s?.toLowerCase()}; color: ${o}`}">
                    <span>${i}</span>
                </div>`}};p([lo(YS)],dn.prototype,"enabled",2),p([lo(Ic)],dn.prototype,"xOffset",2),p([lo(Ic)],dn.prototype,"yOffset",2),p([lo($S,{optional:!0})],dn.prototype,"format",2),p([lo(jS,{optional:!0})],dn.prototype,"renderer",2);var{Group:Lw,TranslatableGroup:Rw,Line:XS,BBox:ZS,createId:ww,POSITIVE_NUMBER:qS,RATIO:Pw,BOOLEAN:QS,COLOR_STRING:Ew,LINE_DASH:_w,OBJECT:Bw,InteractionState:Nc,TempValidate:ds,ZIndexMap:JS,formatNumber:zw,ChartAxisDirection:tb}=hn,Po=class extends hn.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.id=ww(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new pn,this.seriesRect=new ZS(0,0,0,0),this.bounds=new ZS(0,0,0,0),this.crosshairGroup=new Rw({name:"crosshairs",zIndex:JS.SERIES_CROSSHAIR}),this.lineGroup=this.crosshairGroup.appendChild(new Lw({name:`${this.id}-crosshair-lines`,zIndex:JS.SERIES_CROSSHAIR})),this.lineGroupSelection=hn.Selection.select(this.lineGroup,XS,!1),this.activeHighlight=void 0,this.axisCtx=t.parent,this.labels={},this.hideCrosshairs(),t.domManager.addEventListener("focusin",({target:e})=>{const i=e instanceof HTMLElement&&t.domManager.contains(e,"series-area");this.crosshairGroup.visible&&!i&&(this.hideCrosshairs(),this.ctx.updateService.update(hn.ChartUpdateType.PERFORM_LAYOUT))}),this.destroyFns.push(t.scene.attachNode(this.crosshairGroup),t.widgets.seriesWidget.addListener("mousemove",e=>this.onMouseHoverLike(e)),t.widgets.seriesWidget.addListener("drag-move",e=>this.onMouseHoverLike(e)),t.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseOut()),t.widgets.seriesDragInterpreter.addListener("click",e=>this.onClick(e)),t.chartEventManager.addListener("series-focus-change",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.onMouseOut()),t.zoomManager.addListener("zoom-change",()=>this.onMouseOut()),t.highlightManager.addListener("highlight-change",e=>this.onHighlightChange(e)),t.layoutManager.addListener("layout:complete",e=>this.layout(e)),()=>Object.values(this.labels).forEach(e=>e.destroy()))}layout({series:{rect:t,visible:e},axes:i}){if(!e||!i||!this.enabled)return;this.seriesRect=t;const{position:o="left",axisId:s}=this.axisCtx,a=i.find(c=>c.id===s);if(!a)return;this.axisLayout=a,this.bounds=t.clone().grow(a.gridPadding+a.seriesAreaPadding,o);const{crosshairGroup:n,bounds:r}=this;n.translationX=Math.round(r.x),n.translationY=Math.round(r.y);const l=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(l),this.updateLines(),this.updateLabels(l)}updateSelections(t){this.lineGroupSelection.update(t,e=>e.append(new XS),e=>e)}updateLabels(t){const{labels:e,ctx:i}=this;for(const o of t)this.label.enabled&&(e[o]??(e[o]=new dn(i.domManager,o,this.axisCtx.axisId))),e[o]&&this.updateLabel(e[o]);this.labelFormatter=this.axisCtx.scaleValueFormatter(this.label.format)}updateLabel(t){const{enabled:e,xOffset:i,yOffset:o,format:s,renderer:a}=this.label;t.enabled=e,t.xOffset=i,t.yOffset=o,t.format=s,t.renderer=a}updateLines(){const{lineGroupSelection:t,bounds:e,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,axisLayout:r}=this;if(!r)return;const l=this.isVertical();t.each(c=>{c.stroke=i,c.strokeWidth=o,c.strokeOpacity=s,c.lineDash=a,c.lineDashOffset=n,c.y1=0,c.y2=l?e.height:0,c.x1=0,c.x2=l?0:e.width})}isVertical(){return this.axisCtx.direction===tb.X}isHover(t){return t.type==="mousemove"||t.type==="click"||t.device==="touch"&&this.ctx.chartService.touch.dragAction==="hover"}formatValue(t){const{labelFormatter:e,axisLayout:i,ctx:{callbackCache:o}}=this;if(e){const s=o.call(this.axisCtx,e,t);if(s!=null)return s}if(typeof t=="number"){const s=(i?.label.fractionDigits??0)+(Tw(t)?0:1);return zw(t,s)}return String(t??"")}onClick(t){t.device==="touch"&&this.onMouseHoverLike(t)}onMouseHoverLike(t){if(!this.enabled||this.snap)return;const e=this.isHover(t)?Nc.Clickable:Nc.AnnotationsMoveable;this.ctx.interactionManager.isState(e)&&(this.updatePositions(this.getData(t)),this.crosshairGroup.visible=!0,this.ctx.updateService.update(hn.ChartUpdateType.SCENE_RENDER))}onMouseOut(){this.ctx.interactionManager.isState(Nc.Clickable)&&(this.hideCrosshairs(),this.ctx.updateService.update(hn.ChartUpdateType.SCENE_RENDER))}onKeyPress(){this.enabled&&!this.snap&&this.ctx.interactionManager.isState(Nc.Default)&&this.hideCrosshairs()}onHighlightChange(t){if(!this.enabled)return;const{crosshairGroup:e,axisCtx:i}=this,{datum:o,series:s}=t.currentHighlight??{},a=o&&(s?.axes.x?.id===i.axisId||s?.axes.y?.id===i.axisId);if(this.activeHighlight=a?t.currentHighlight:void 0,!this.activeHighlight)this.hideCrosshairs();else if(this.snap){const n=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(n),e.visible=!0}}isInRange(t){return this.axisCtx.inRange(t)}updatePositions(t){const{seriesRect:e,lineGroupSelection:i}=this;i.each((o,s)=>{const a=t[s];if(!a){o.visible=!1,this.hideLabel(s);return}o.visible=!0;const{value:n,position:r}=a;let l=0,c=0;this.isVertical()?(l=r,o.x=Math.round(l)):(c=r,o.y=Math.round(c)),this.label.enabled?this.showLabel(l+e.x,c+e.y,n,s):this.hideLabel(s)})}getData(t){const{axisCtx:e}=this,i="pointer",{datum:o,xKey:s="",yKey:a=""}=this.activeHighlight??{},{currentX:n,currentY:r}=t,l=this.isVertical(),c=l?n:r;let h=o?.[l?s:a]??"";return e.continuous&&(h=e.scaleInvert(c)),{[i]:{position:c,value:h}}}getActiveHighlightData(t){const{axisCtx:e}=this,{datum:i,series:o,xKey:s="",aggregatedValue:a,cumulativeValue:n,midPoint:r}=t,l=o.getKeyProperties(e.direction),c=(e.scale.bandwidth??0)/2,h=o.axes[e.direction]?.id===e.axisId,d=l.indexOf("yKey")>-1&&h,u=l.indexOf("xKey")>-1&&h,g=a??n;if(d&&g!==void 0){const y=e.scale.convert(g)+c;return this.isInRange(y)?{yKey:{value:g,position:y}}:{}}if(u){const y=(this.isVertical()?r?.x:r?.y)??0,m=e.continuous?e.scaleInvert(y):i[s];return this.isInRange(y)?{xKey:{value:m,position:y}}:{}}const f={};return l.forEach(y=>{const m=o.properties[y],x=i[m],v=e.scale.convert(x)+c;this.isInRange(v)&&(f[y]={value:x,position:v})}),f}getLabelHtml(t,e){const i=this.axisLayout?.label?.fractionDigits??0,o={text:this.formatValue(t)};return this.label.renderer?e.toLabelHtml(this.label.renderer({value:t,fractionDigits:i}),o):e.toLabelHtml(o)}showLabel(t,e,i,o){if(!this.axisLayout)return;const{bounds:s}=this,a=this.labels[o],n=this.getLabelHtml(i,a);a.setLabelHtml(n);const{width:r,height:l}=a.getBBox(),c=this.axisCtx.position;let h=this.axisLayout.label.spacing+this.axisLayout.tickSize;this.axisCtx.direction===tb.X?(h-=4,a.show({x:t-r/2,y:c==="bottom"?s.y+s.height+h:s.y-l-h})):(h-=8,a.show({x:c==="right"?s.x+s.width+h:s.x-r-h,y:e-l/2}))}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const t of Object.keys(this.labels))this.hideLabel(t)}hideLabel(t){this.labels[t]?.toggle(!1)}};p([ds(QS)],Po.prototype,"enabled",2),p([ds(Ew,{optional:!0})],Po.prototype,"stroke",2),p([ds(_w,{optional:!0})],Po.prototype,"lineDash",2),p([ds(qS)],Po.prototype,"lineDashOffset",2),p([ds(qS)],Po.prototype,"strokeWidth",2),p([ds(Pw)],Po.prototype,"strokeOpacity",2),p([ds(QS)],Po.prototype,"snap",2),p([ds(Bw)],Po.prototype,"label",2);var Fw={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],moduleFactory:t=>new Po(t),themeTemplate:{crosshair:{snap:!0,stroke:{$ref:"subtleTextColor"},strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}};import{_ModuleSupport as eb}from"ag-charts-community";var{BOOLEAN:Vw,FUNCTION:Gw,ActionOnSet:ur,TempValidate:ib}=eb,un=class extends eb.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&e!=null?this.dataService.updateCallback(e):this.dataService.clearCallback())}};p([ur({newValue(t){this.updateCallback(t,this.getData)}}),ib(Vw)],un.prototype,"enabled",2),p([ur({newValue(t){this.updateCallback(this.enabled,t)}}),ib(Gw)],un.prototype,"getData",2),p([ur({newValue(t){this.dataService.requestThrottle=t}})],un.prototype,"requestThrottle",2),p([ur({newValue(t){this.dataService.dispatchThrottle=t}})],un.prototype,"updateThrottle",2),p([ur({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],un.prototype,"updateDuringInteraction",2);var Ww={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new un(t),themeTemplate:{dataSource:{enabled:!1}}};import{AgErrorBarSupportedSeriesTypes as Hw}from"ag-charts-community";import{AgErrorBarSupportedSeriesTypes as ob,_ModuleSupport as _u}from"ag-charts-community";import{Logger as Kw,isDefined as _e}from"ag-charts-core";import{_ModuleSupport as gr}from"ag-charts-community";var{nearestSquaredInContainer:Uw,partialAssign:Yw,mergeDefaults:sb,BBox:Eo}=gr,jw=class{constructor(t){this.components=t,this.union=Eo.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}},$w=class extends gr.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new gr.Path,this.capsPath=new gr.Path,this.bboxes=new jw([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:o}=t,{lengthRatioMultiplier:s,lengthMax:a}=e,n=o??i*s;return Math.min(n,a)}getItemStylerParams(t,e,i){const{datum:o}=this;if(o==null||t.itemStyler==null)return;const{xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:r}=t;return{...e,datum:o.datum,seriesId:o.datum.seriesId,xKey:o.xKey,yKey:o.yKey,xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:r,highlighted:i}}formatStyles(t,e,i,o){let{cap:s,...a}=t;const n=this.getItemStylerParams(e,t,o);if(n!=null&&e.itemStyler!=null){const r=i.callWithContext(e.itemStyler,n);a=sb(r,a),s=sb(r?.cap,r,s)}return{whiskerStyle:a,capsStyle:s}}applyStyling(t,e){Yw(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i,o){if(this.datum===void 0)return;const{whiskerStyle:s,capsStyle:a}=this.formatStyles(t,e,i,o),{xBar:n,yBar:r,capDefaults:l}=this.datum,c=this.whiskerPath;this.applyStyling(c,s),c.path.clear(!0),r!==void 0&&(c.path.moveTo(r.lowerPoint.x,r.lowerPoint.y),c.path.lineTo(r.upperPoint.x,r.upperPoint.y)),n!==void 0&&(c.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),c.path.lineTo(n.upperPoint.x,n.upperPoint.y)),c.path.closePath(),this.capLength=this.calculateCapLength(a??{},l);const h=this.capLength/2,d=this.capsPath;this.applyStyling(d,a),d.path.clear(!0),r!==void 0&&(d.path.moveTo(r.lowerPoint.x-h,r.lowerPoint.y),d.path.lineTo(r.lowerPoint.x+h,r.lowerPoint.y),d.path.moveTo(r.upperPoint.x-h,r.upperPoint.y),d.path.lineTo(r.upperPoint.x+h,r.upperPoint.y)),n!==void 0&&(d.path.moveTo(n.lowerPoint.x,n.lowerPoint.y-h),d.path.lineTo(n.lowerPoint.x,n.lowerPoint.y+h),d.path.moveTo(n.upperPoint.x,n.upperPoint.y-h),d.path.lineTo(n.upperPoint.x,n.upperPoint.y+h)),d.path.closePath()}updateBBoxes(){const{capLength:t,whiskerPath:e,capsPath:i}=this,{yBar:o,xBar:s}=this.datum??{},a=t/2,n=[];if(o!==void 0){const r=o.lowerPoint.y-o.upperPoint.y;n.push(new Eo(o.lowerPoint.x,o.upperPoint.y,e.strokeWidth,r),new Eo(o.lowerPoint.x-a,o.lowerPoint.y,t,i.strokeWidth),new Eo(o.upperPoint.x-a,o.upperPoint.y,t,i.strokeWidth))}if(s!==void 0){const r=s.upperPoint.x-s.lowerPoint.x;n.push(new Eo(s.lowerPoint.x,s.upperPoint.y,r,e.strokeWidth),new Eo(s.lowerPoint.x,s.lowerPoint.y-a,i.strokeWidth,t),new Eo(s.upperPoint.x,s.upperPoint.y-a,i.strokeWidth,t))}this.bboxes.components=n,this.bboxes.union=Eo.merge(n)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e,i){const{bboxes:o}=this;if(o.union.distanceSquared(t,e)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:s}=Eo.nearestBox(t,e,o.components);return{nearest:this,distanceSquared:s}}},Xw=class extends gr.Group{nearestSquared(t,e){const{nearest:i,distanceSquared:o}=Uw(t,e,{children:this.children()});if(i!==void 0&&!isNaN(o))return{datum:i.datum,distanceSquared:o}}};import{_ModuleSupport as Zw}from"ag-charts-community";var{BaseProperties:ab,TempValidate:mt,BOOLEAN:nb,COLOR_STRING:rb,FUNCTION:qw,LINE_DASH:lb,NUMBER:Qw,OBJECT:Jw,POSITIVE_NUMBER:Cc,RATIO:Bu,STRING:us}=Zw,_o=class extends ab{};p([mt(nb,{optional:!0})],_o.prototype,"visible",2),p([mt(rb,{optional:!0})],_o.prototype,"stroke",2),p([mt(Cc,{optional:!0})],_o.prototype,"strokeWidth",2),p([mt(Bu,{optional:!0})],_o.prototype,"strokeOpacity",2),p([mt(lb,{optional:!0})],_o.prototype,"lineDash",2),p([mt(Cc,{optional:!0})],_o.prototype,"lineDashOffset",2),p([mt(Qw,{optional:!0})],_o.prototype,"length",2),p([mt(Bu,{optional:!0})],_o.prototype,"lengthRatio",2);var ne=class extends ab{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new _o}};p([mt(us,{optional:!0})],ne.prototype,"yLowerKey",2),p([mt(us,{optional:!0})],ne.prototype,"yLowerName",2),p([mt(us,{optional:!0})],ne.prototype,"yUpperKey",2),p([mt(us,{optional:!0})],ne.prototype,"yUpperName",2),p([mt(us,{optional:!0})],ne.prototype,"xLowerKey",2),p([mt(us,{optional:!0})],ne.prototype,"xLowerName",2),p([mt(us,{optional:!0})],ne.prototype,"xUpperKey",2),p([mt(us,{optional:!0})],ne.prototype,"xUpperName",2),p([mt(nb,{optional:!0})],ne.prototype,"visible",2),p([mt(rb,{optional:!0})],ne.prototype,"stroke",2),p([mt(Cc,{optional:!0})],ne.prototype,"strokeWidth",2),p([mt(Bu,{optional:!0})],ne.prototype,"strokeOpacity",2),p([mt(lb,{optional:!0})],ne.prototype,"lineDash",2),p([mt(Cc,{optional:!0})],ne.prototype,"lineDashOffset",2),p([mt(qw,{optional:!0})],ne.prototype,"itemStyler",2),p([mt(Jw)],ne.prototype,"cap",2);var{fixNumericExtent:t1,groupAccumulativeValueProperty:e1,mergeDefaults:i1,valueProperty:Lc,ChartAxisDirection:zu}=_u;function o1(t){for(const e of ob)if(e===t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${ob.join(", ")}`)}var s1=class kl extends _u.BaseModuleInstance{constructor(e){super(),this.properties=new ne;const i=o1(e),{annotationGroup:o,annotationSelections:s}=i;this.cartesianSeries=i,this.groupNode=new Xw({name:`${o.id}-errorBars`}),o.appendChild(this.groupNode),this.selection=_u.Selection.select(this.groupNode,()=>this.errorBarFactory()),s.add(this.selection),i.addEventListener("seriesVisibilityChange",a=>this.onToggleSeriesItem(a)),this.destroyFns.push(i.addListener("data-processed",a=>this.onDataProcessed(a)),i.addListener("data-update",a=>this.onDataUpdate(a)),e.highlightManager.addListener("highlight-change",a=>this.onHighlightChange(a)),()=>o.removeChild(this.groupNode),()=>s.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties;return _e(e)&&_e(i)||_e(o)&&_e(s)}isStacked(){const e=this.cartesianSeries.seriesGrouping?.stackCount;return e==null?!1:e>0}getUnstackPropertyDefinition(e){const i=[],{xLowerKey:o,xUpperKey:s,yLowerKey:a,yUpperKey:n,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:h}=e;return a!=null&&n!=null&&i.push(Lc(a,h,{id:`${l}-lower`}),Lc(n,h,{id:`${l}-upper`})),o!=null&&s!=null&&i.push(Lc(o,c,{id:`${r}-lower`}),Lc(s,c,{id:`${r}-upper`})),i}getStackPropertyDefinition(e){const i=[],{cartesianSeries:o}=this,{xLowerKey:s,xUpperKey:a,yLowerKey:n,yUpperKey:r,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{xScaleType:h,yScaleType:d}=e,u=o.seriesGrouping?.groupIndex??o.id,g={invalidValue:null,missingValue:0,separateNegative:!0,...o.visible?{}:{forceValue:0}},f=(m,x,v,S)=>e1(m,"normal","current",{id:`${x}-${v}`,groupId:`errorGroup-${u}-${v}`,...g},S),y=(m,x,v,S)=>{i.push(...f(m,v,"lower",S),...f(x,v,"upper",S))};return n!=null&&r!=null&&y(n,r,c,d),s!=null&&a!=null&&y(s,a,l,h),i}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:i,xUpperKey:o,xErrorsID:s,yLowerKey:a,yUpperKey:n,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===zu.X?_e(i)&&_e(o):_e(a)&&_e(n)){const{dataModel:c,processedData:h,cartesianSeries:d}=this;if(c!=null&&h!=null){const u={x:s,y:r}[e],g=c.getDomain(d,`${u}-lower`,"value",h),f=c.getDomain(d,`${u}-upper`,"value",h),y=[Math.min(...g,...f),Math.max(...g,...f)];return t1(y)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,_e(e.dataModel)&&_e(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){return this.hasErrorBars()?this.cartesianSeries.contextNodeData?.nodeData:void 0}createNodeData(){const e=this.getNodeData(),i=this.cartesianSeries.axes[zu.X]?.scale,o=this.cartesianSeries.axes[zu.Y]?.scale;if(!(!i||!o||!e))for(let s=0;s<e.length;s++){const{midPoint:a,xLower:n,xUpper:r,yLower:l,yUpper:c}=this.getDatum(e,s);if(a!=null){let h,d;_e(n)&&_e(r)&&(h={lowerPoint:{x:this.convert(i,n),y:a.y},upperPoint:{x:this.convert(i,r),y:a.y}}),_e(l)&&_e(c)&&(d={lowerPoint:{x:a.x,y:this.convert(o,l)},upperPoint:{x:a.x,y:this.convert(o,c)}}),e[s].xBar=h,e[s].yBar=d}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties,[a,n]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,o]=[o,e],[i,s]=[s,i],[a,n]=[n,a]),{xLowerKey:e,xUpperKey:i,xErrorsID:a,yLowerKey:o,yUpperKey:s,yErrorsID:n}}static getDatumKey(e,i,o){if(i==null)return;const s=e.datum[i];if(s!=null){if(typeof s!="number"){Kw.warnOnce(`Found [${i}] error value of type ${typeof s}. Expected number type`);return}return s+o}}getDatum(e,i){const{xLowerKey:o,xUpperKey:s,yLowerKey:a,yUpperKey:n}=this.getMaybeFlippedKeys(),r=e[i],l=r.cumulativeValue==null||!this.isStacked()?0:r.cumulativeValue-r.yValue,[c,h]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:kl.getDatumKey(r,o,c),xUpper:kl.getDatumKey(r,s,c),yLower:kl.getDatumKey(r,a,h),yUpper:kl.getDatumKey(r,n,h)}}convert(e,i){const o=(e.bandwidth??0)/2;return e.convert(i)+o}update(){const e=this.getNodeData();e!=null&&(this.selection.update(e),this.selection.each((i,o,s)=>this.updateNode(i,o,s)))}updateNode(e,i,o){e.datum=i,e.update(this.getDefaultStyle(),this.properties,this.cartesianSeries,!1),e.updateBBoxes()}pickNodeExact(e){const{x:i,y:o}=e,s=this.groupNode.pickNode(i,o);if(s!=null)return{datum:s.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s,xLowerName:a=e,xUpperName:n=i,yLowerName:r=o,yUpperName:l=s}=this.properties;return{xLowerKey:e,xLowerName:a,xUpperKey:i,xUpperName:n,yLowerKey:o,yLowerName:r,yUpperKey:s,yUpperName:l}}onToggleSeriesItem(e){this.groupNode.visible=e.visible}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:i1(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,i,o){const s=this.getNodeData();if(s!=null){for(let a=0;a<s.length;a++)if(e===s[a]){this.selection.at(a)?.update(i,this.properties,this.cartesianSeries,o);break}}}onHighlightChange(e){const{previousHighlight:i,currentHighlight:o}=e;o?.series===this.cartesianSeries&&this.restyleHighlightChange(o,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new $w}getWhiskerProperties(){const{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=this.properties;return{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}}};import"ag-charts-community";var a1={series:{errorBar:{visible:!0,stroke:{$ref:"foregroundColor"},strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},n1={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:Hw,moduleFactory:t=>new s1(t),themeTemplate:a1};import{_ModuleSupport as Rc}from"ag-charts-community";var{ZIndexMap:r1,ActionOnSet:l1,TempValidate:Fu,ProxyPropertyOnWrite:cb,OBJECT:c1,RATIO:h1,COLOR_STRING:p1}=Rc,wc=class extends Rc.Background{constructor(){super(...arguments),this.image=new ro,this.fill="transparent",this.fillOpacity=void 0}createNode(){return new Rc.Group({name:"foreground",zIndex:r1.FOREGROUND})}onLayoutComplete(t){super.onLayoutComplete(t);const{width:e,height:i}=t.chart;let o={x:0,y:0,width:e,height:i};this.image&&(o=this.image.performLayout(e,i)),this.text&&this.updateTextNode(o)}onImageLoad(){this.ctx.updateService.update(Rc.ChartUpdateType.SCENE_RENDER)}updateTextNode(t){const{textNode:e}=this;e.fontWeight="bold",e.fontFamily="Impact, sans-serif",e.fontSize=19,e.opacity=.7,e.fill="#9b9b9b",e.textBaseline="top";const i=this.textNode.getBBox(),o=10;e.x=t.x+t.width/2-i.width/2,e.y=t.y+t.height+o}};p([Fu(c1,{optional:!0}),l1({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],wc.prototype,"image",2),p([Fu(p1,{optional:!0}),cb("rectNode","fill")],wc.prototype,"fill",2),p([Fu(h1,{optional:!0}),cb("rectNode","fillOpacity")],wc.prototype,"fillOpacity",2);var d1={type:"root",optionsKey:"foreground",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new wc(t)};import"ag-charts-community";import{_ModuleSupport as Vu}from"ag-charts-community";import{Logger as u1,clamp as Gu}from"ag-charts-core";import{_ModuleSupport as hb}from"ag-charts-community";import{Logger as pb}from"ag-charts-core";import{_ModuleSupport as g1}from"ag-charts-community";var{TranslatableGroup:f1,ScenePathChangeDetection:db}=g1,Wu=class extends f1{constructor(){super(...arguments),this.inset=0,this.cornerRadius=0}applyClip(t,e){const{cornerRadius:i,inset:o}=this,{x:s,y:a,width:n,height:r}=e;t.beginPath(),t.roundRect(s+o,a+o,n-2*o,r-2*o,i),t.clip()}};p([db()],Wu.prototype,"inset",2),p([db()],Wu.prototype,"cornerRadius",2);var{TempValidate:Hu,BOOLEAN:y1,POSITIVE_NUMBER:ub,ZIndexMap:Js,ActionOnSet:gb,CategoryAxis:m1,TextUtils:x1,Padding:S1,Group:ta,BBox:fb,ProxyProperty:yb}=hb,Ku=class{constructor(){this.top=0,this.bottom=0}};p([Hu(ub)],Ku.prototype,"top",2),p([Hu(ub)],Ku.prototype,"bottom",2);var gn=class extends hb.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.padding=new Ku,this.root=new ta({name:"root"}),this.seriesRoot=this.root.appendChild(new Wu({name:"Series-root",zIndex:Js.SERIES_LAYER,renderToOffscreenCanvas:!0})),this.axisGridGroup=this.root.appendChild(new ta({name:"Axes-Grids",zIndex:Js.AXIS_GRID})),this.axisGroup=this.root.appendChild(new ta({name:"Axes-Grids",zIndex:Js.AXIS_GRID})),this.axisLabelGroup=this.root.appendChild(new ta({name:"Axes-Labels",zIndex:Js.SERIES_LABEL})),this.axisCrosslineRangeGroup=this.root.appendChild(new ta({name:"Axes-Crosslines-Range",zIndex:Js.SERIES_CROSSLINE_RANGE})),this.axisCrosslineLineGroup=this.root.appendChild(new ta({name:"Axes-Crosslines-Line",zIndex:Js.SERIES_CROSSLINE_LINE})),this.axisCrosslineLabelGroup=this.root.appendChild(new ta({name:"Axes-Crosslines-Label",zIndex:Js.SERIES_LABEL})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){const i=e?.filter(o=>!t.includes(o))??[];this.destroySeries(i);for(const o of t){if(e?.includes(o))continue;o.attachSeries(this.seriesRoot,this.seriesRoot,void 0);const s=this;o.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return s.seriesRect}},o.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled")}}destroySeries(t){t?.forEach(e=>{e.destroy(),e.detachSeries(this.seriesRoot,this.seriesRoot,void 0),e.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{const i=e.direction;(t[i]??(t[i]=[])).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const o=t[i];if(!o){pb.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const s=e.getKeys(i),a=this.findMatchingAxis(o,s);if(!a){pb.warnOnce(`no matching axis for direction [${i}] and keys [${s}]; check series and axes configuration.`);return}e.axes[i]=a})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e){for(const o of e)if(i.keys.includes(o))return i}}}updateData(t){this.series.forEach(e=>e.setChartData(t)),this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready",this.series.forEach(e=>e.resetAnimation("disabled"))})}async processData(t){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),await Promise.all(this.series.map(e=>(e.resetDatumCallbackCache(),e.processData(t))));for(const e of this.axes)e.processData()}computeAxisPadding(){const t=new S1;return this.enabled&&this.axes.forEach(({position:e,thickness:i,line:o,label:s})=>{if(e==null)return;let a;i?a=i:a=(o.enabled?o.width:0)+(s.enabled?x1.getLineHeight(s.fontSize??0)+s.spacing:0),t[e]=Math.ceil(a)}),t}async layout(t,e){const{padding:i}=this,o=this.seriesRect!=null,s=new fb(0,0,t,e-(i.top+i.bottom));this.seriesRect=s,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectCanvasSpace(new fb(0,-i.top,t,e)),this.axes.forEach(a=>{const{position:n="left"}=a;switch(n){case"top":case"bottom":a.range=[0,s.width],a.gridLength=s.height;break;case"right":case"left":{const r=a instanceof m1;a.range=r?[0,s.height]:[s.height,0],a.gridLength=s.width;break}}a.gridPadding=0,a.translation.x=0,a.translation.y=0,n==="right"?a.translation.x=t:n==="bottom"&&(a.translation.y=e),o||a.resetAnimation("initial"),a.calculateLayout(),a.update()}),await Promise.all(this.series.map(a=>a.update({seriesRect:s})))}};p([Hu(y1)],gn.prototype,"enabled",2),p([yb(["seriesRoot","inset"])],gn.prototype,"inset",2),p([yb(["seriesRoot","cornerRadius"])],gn.prototype,"cornerRadius",2),p([gb({changeValue(t,e=[]){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const o of e)t.includes(o)||(o.detachAxis(i),o.destroy());for(const o of t)e?.includes(o)||o.attachAxis(i)}})],gn.prototype,"axes",2),p([gb({changeValue(t,e){this.onSeriesChange(t,e)}})],gn.prototype,"series",2);import{_ModuleSupport as b1}from"ag-charts-community";import{clamp as v1}from"ag-charts-core";var{SliderWidget:mb}=b1,D1=class{constructor(t,e){this.ctx=t,this.sliderHandlers=e,this._min=0,this._max=1,this.minRange=.001,this.dragStartX=0,this.ctx=t,this.toolbar=t.proxyInteractionService.createProxyContainer({type:"toolbar",domManagerId:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],orientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.sliders=[t.proxyInteractionService.createProxyElement({type:"slider",domIndex:1,ariaLabel:{id:"ariaLabelNavigatorMinimum"},parent:this.toolbar,cursor:"ew-resize"}),t.proxyInteractionService.createProxyElement({type:"slider",domIndex:-1/0,ariaLabel:{id:"ariaLabelNavigatorRange"},parent:this.toolbar,cursor:"grab"}),t.proxyInteractionService.createProxyElement({type:"slider",domIndex:2,ariaLabel:{id:"ariaLabelNavigatorMaximum"},parent:this.toolbar,cursor:"ew-resize"})];for(const[i,o]of["min","pan","max"].entries()){const s=this.sliders[i];s.step=mb.STEP_HUNDRETH,s.keyboardStep=mb.STEP_ONE,s.orientation="horizontal",s.setPreventsDefault(!1),s.addListener("drag-start",a=>this.onDragStart(i,a,o)),s.addListener("drag-move",a=>this.onDrag(s,a,o)),s.addListener("drag-end",()=>this.updateSliderRatios()),s.addListener("contextmenu",a=>this.onContextMenu(s,a))}this.sliders[0].addListener("change",()=>this.onMinSliderChange()),this.sliders[1].addListener("change",()=>this.onPanSliderChange()),this.sliders[2].addListener("change",()=>this.onMaxSliderChange()),this.updateSliderRatios(),this.updateVisibility(!1)}destroy(){this.toolbar.destroy()}updateVisibility(t){this.toolbar.setHidden(!t)}updateZoom(){const{_min:t,_max:e}=this;if(!(t==null||e==null))return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e}})}updateBounds(t){this.toolbar.setBounds(t)}updateSliderBounds(t,e){this.sliders[t].setBounds(e)}updateMinMax(t,e){this._min=t,this._max=e,this.updateSliderRatios()}updateSliderRatios(){let{_min:t,_max:e}=this;t=Math.round(t*100)/100,e=Math.round(e*100)/100;const i=this.ctx.localeManager.t("ariaValuePanRange",{min:t,max:e});this.sliders[0].setValueRatio(t),this.sliders[1].setValueRatio(t,{ariaValueText:i}),this.sliders[2].setValueRatio(e)}toCanvasOffsets(t){return{offsetX:this.dragStartX+t.originDeltaX}}moveToFront(t){if(t===1)return;const e=this.sliders[t],i=this.sliders[2-t];this.toolbar.moveChild(i,e.domIndex-1)}onDragStart(t,e,i){const o=this.sliders[t],s=this.toolbar.cssLeft(),a=o.cssLeft();this.dragStartX=s+a+e.offsetX,this.moveToFront(t),e.device==="touch"&&e.sourceEvent.preventDefault(),this.sliderHandlers.onDragStart(i,this.toCanvasOffsets(e))}onDrag(t,e,i){e.device==="touch"&&e.sourceEvent.preventDefault(),this.sliderHandlers.onDrag(i,this.toCanvasOffsets(e))}onContextMenu(t,{sourceEvent:e,offsetX:i,offsetY:o}){const{x:s,y:a}=this.toolbar.getBounds(),{x:n,y:r}=t.getBounds(),l=i+s+n,c=o+a+r;this.ctx.contextMenuRegistry.dispatchContext("all",{sourceEvent:e,canvasX:l,canvasY:c},{})}onPanSliderChange(){const t=this.sliders[1].getValueRatio(),e=this._max-this._min;this._min=v1(0,t,1-e),this._max=this._min+e,this.updateZoom()}onMinSliderChange(){this._min=this.sliders[0].clampValueRatio(0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(){this._max=this.sliders[2].clampValueRatio(this._min+this.minRange,1),this.updateZoom()}};import{_ModuleSupport as xb}from"ag-charts-community";var{TempValidate:Pc,ScenePathChangeDetection:Ec,POSITIVE_NUMBER:Uu,BOOLEAN:M1,BBox:k1,ExtendedPath2D:O1}=xb,gs=class extends xb.Path{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.cornerRadius=4,this.grip=!0,this.gripPath=new O1}setCenter(t,e){this.dirtyPath=!0,(this.centerX!==t||this.centerY!==e)&&(this.centerX=t,this.centerY=e,this.markDirty("center"))}static align(t,e,i,o,s,a,n,r,l){const c=t.align(i+s*n)+l,h=c+t.align(i+s*n,s*(r-n))-2*l,d=t.align(o+a/2);t.setCenter(c,d),e.setCenter(h,d)}computeBBox(){const{centerX:t,centerY:e,width:i,height:o}=this,s=t-i/2,a=e-o/2;return new k1(s,a,i,o)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}updatePath(){const{centerX:t,centerY:e,path:i,gripPath:o,strokeWidth:s,cornerRadius:a,grip:n}=this,r=s/2,l=this.layerManager?.canvas?.pixelRatio??1;i.clear(),o.clear();const c=Math.floor(this.width/2*l)/l,h=Math.floor(this.height/2*l)/l;i.roundRect(t-c+r,e-h+r,2*(c-r),2*(h-r),a);const d=3;if(n)for(let u=-.5;u<=.5;u+=1)for(let g=-1;g<=1;g+=1)o.arc(t+u*d,e+g*d,1,0,2*Math.PI),o.closePath()}renderFill(t,e){const{stroke:i}=this;super.renderFill(t,e),t.fillStyle=typeof i=="string"?i:"black",t.fill(this.gripPath.getPath2D())}};gs.className="RangeHandle",p([Pc(Uu),Ec()],gs.prototype,"width",2),p([Pc(Uu),Ec()],gs.prototype,"height",2),p([Pc(Uu),Ec()],gs.prototype,"cornerRadius",2),p([Pc(M1),Ec()],gs.prototype,"grip",2);import{_ModuleSupport as T1}from"ag-charts-community";var{Path:A1,BBox:fr,ExtendedPath2D:I1,clippedRoundRect:Yu,POSITIVE_NUMBER:N1,TempValidate:C1,ScenePathChangeDetection:L1}=T1,ju=class extends A1{constructor(){super(...arguments),this.cornerRadius=4,this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1,this.visiblePath=new I1}layout(t,e,i,o,s,a){s=isNaN(s)?this.min:s,a=isNaN(a)?this.max:a,(t!==this.x||e!==this.y||i!==this.width||this.height!==o||s!==this.min||a!==this.max)&&(this.x=t,this.y=e,this.width=i,this.height=o,this.min=s,this.max=a,this.dirtyPath=!0,this.markDirty("RangeMask.layout"))}computeBBox(){const{x:t,y:e,width:i,height:o}=this;return new fr(t,e,i,o)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:o,min:s,max:a}=this,n=t+i*s,r=t+i*a;return new fr(n,e,r-n,o)}updatePath(){const{path:t,visiblePath:e,x:i,y:o,width:s,height:a,min:n,max:r,strokeWidth:l,cornerRadius:c}=this,h=l/2;t.clear(),e.clear();const d=this.align(i)+h,u=this.align(o)+h,g=this.align(i,s)-2*h,f=this.align(o,a)-2*h,y=this.align(i+s*n)+h,m=y+this.align(i+s*n,s*(r-n))-2*h,x={topLeft:c,topRight:c,bottomRight:c,bottomLeft:c};Yu(t,d,u,g,f,x,new fr(d,u,y-d,f)),Yu(t,d,u,g,f,x,new fr(m,u,g+d-m,f)),m-y>1&&Yu(e,d,u,g,f,x,new fr(y,u,m-y,f))}renderStroke(t,e){super.renderStroke(t,e),super.renderStroke(t,this.visiblePath.getPath2D())}};ju.className="RangeMask",p([C1(N1),L1()],ju.prototype,"cornerRadius",2);import{_ModuleSupport as _c}from"ag-charts-community";var R1=class extends _c.Group{constructor(t){super({name:"rangeSelectorGroup",zIndex:_c.ZIndexMap.NAVIGATOR}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new _c.TranslatableGroup({name:"navigator-background",zIndex:1})),this.append(t)}layout(t,e,i,o,s,a){this.x=t,this.y=e,this.width=i,this.height=o,this.lOffset=s,this.rOffset=a,this.background.translationX=t,this.background.translationY=e,this.markDirty("RangeSelector")}updateBackground(t,e){t!=null&&this.background.removeChild(t),e!=null&&this.background.appendChild(e),this.markDirty("RangeSelector")}computeBBox(){const{x:t,y:e,width:i,height:o,lOffset:s,rOffset:a}=this;return new _c.BBox(t-s,e,i+(s+a),o)}},{BaseModuleInstance:w1,ObserveChanges:$u,TempValidate:Bc,BOOLEAN:P1,POSITIVE_NUMBER:Xu}=Vu,fn=class extends w1{constructor(t){super(),this.ctx=t,this.enabled=!1,this.mask=new ju,this.minHandle=new gs,this.maxHandle=new gs,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(e,i)=>({x:e,y:i})},this.height=30,this.cornerRadius=0,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new R1([this.mask,this.minHandle,this.maxHandle]),this.destroyFns.push(t.scene.attachNode(this.rangeSelector),this.ctx.localeManager.addListener("locale-changed",()=>this.updateZoom()),this.ctx.layoutManager.registerElement(Vu.LayoutElement.Navigator,e=>this.onLayoutStart(e)),this.ctx.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.zoomManager.addListener("zoom-change",e=>this.onZoomChange(e))),this.domProxy=new D1(t,this),this.updateGroupVisibility(),this.miniChart=new gn(t)}updateBackground(t,e){this.rangeSelector?.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;this.rangeSelector==null||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,this.domProxy.updateVisibility(t),t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(t){if(this.enabled){const{layoutBox:e}=t,i=this.height+this.spacing;e.shrink(i,"bottom"),this.y=e.y+e.height+this.spacing}else this.y=0;if(this.enabled&&this.miniChart){const{top:e,bottom:i}=this.miniChart.computeAxisPadding();t.layoutBox.shrink(e+i,"bottom"),this.y-=i,this.miniChart.inset=this.mask.strokeWidth/2,this.miniChart.cornerRadius=this.mask.cornerRadius}}onLayoutComplete(t){const{x:e,width:i}=t.series.rect,{y:o,height:s}=this;if(this.domProxy.updateVisibility(this.enabled),this.enabled){const{_min:a,_max:n}=this.domProxy;this.layoutNodes(e,o,i,s,a,n),this.domProxy.updateBounds({x:e,y:o,width:i,height:s})}this.x=e,this.width=i,this.miniChart?.layout(i,s).catch(a=>u1.error(a))}canDrag(){return this.enabled&&this.ctx.interactionManager.isState(Vu.InteractionState.ZoomDraggable)}onDragStart(t,{offsetX:e}){this.canDrag()&&(t==="pan"&&(this.panStart=(e-this.x)/this.width-this.domProxy._min),this.ctx.zoomManager.fireZoomPanStartEvent("navigator"))}onDrag(t,{offsetX:e}){if(!this.canDrag())return;const{panStart:i,x:o,width:s}=this,{minRange:a}=this.domProxy;let{_min:n,_max:r}=this.domProxy;const l=(e-o)/s;if(t==="min")n=Gu(0,l,r-a);else if(t==="max")r=Gu(n+a,l,1);else if(t==="pan"&&i!=null){const c=r-n;n=Gu(0,l-i,1-c),r=n+c}this.domProxy._min=n,this.domProxy._max=r,this.updateZoom()}onZoomChange(t){const{x:e}=t;if(!e)return;const{x:i,y:o,width:s,height:a}=this,{min:n,max:r}=e;this.domProxy.updateMinMax(n,r),this.layoutNodes(i,o,s,a,n,r)}layoutNodes(t,e,i,o,s,a){const{rangeSelector:n,mask:r,minHandle:l,maxHandle:c}=this;r.layout(t,e,i,o,s,a),n.layout(t,e,i,o,l.width/2,c.width/2),gs.align(l,c,t,e,i,o,s,a,r.strokeWidth/2),s+(a-s)/2<.5?(l.zIndex=3,c.zIndex=4):(l.zIndex=4,c.zIndex=3),[l,this.maskVisibleRange,c].forEach((h,d)=>{const u=h.getBBox(),g={x:u.x-t,y:u.y-e,height:u.height,width:u.width};this.domProxy.updateSliderBounds(d,g)})}updateZoom(){this.enabled&&this.domProxy.updateZoom()}updateData(t){return this.miniChart?.updateData(t)}async processData(t){if(this.miniChart)return this.miniChart?.processData(t)}};p([$u((t,e,i)=>{t.updateBackground(i?.root,e?.root)})],fn.prototype,"miniChart",2),p([Bc(P1),$u((t,e)=>{t.ctx.zoomManager.setNavigatorEnabled(!!e),t.updateGroupVisibility()})],fn.prototype,"enabled",2),p([Bc(Xu)],fn.prototype,"height",2),p([Bc(Xu),$u((t,e)=>{t.mask.cornerRadius=e})],fn.prototype,"cornerRadius",2),p([Bc(Xu)],fn.prototype,"spacing",2);import{_ModuleSupport as E1}from"ag-charts-community";var _1={enabled:!1,height:18,cornerRadius:4,mask:{fill:{$ref:"foregroundColor"},fillOpacity:.1,stroke:{$ref:"borderColor"},strokeWidth:1},minHandle:{fill:{$ref:"backgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},maxHandle:{fill:{$ref:"backgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},miniChart:{enabled:!1,label:{color:{$ref:"textColor"},fontSize:{$rem:[E1.FONT_SIZE_RATIO.SMALLER]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:5},padding:{top:0,bottom:0}}},B1={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new fn(t),removable:!1,themeTemplate:{navigator:_1}};import{_ModuleSupport as Sb}from"ag-charts-community";import{_ModuleSupport as z1}from"ag-charts-community";var{AND:F1,ARRAY:bb,FUNCTION:V1,NUMBER:G1,OR:W1,ToolbarButtonProperties:H1,TempValidate:K1}=z1,vb=class extends H1{};p([K1(W1(G1,F1(bb,bb.restrict({length:2})),V1))],vb.prototype,"value",2);var{BOOLEAN:U1,OBJECT:Y1,ChartAxisDirection:Zu,LayoutElement:j1,PropertiesArray:$1,Toolbar:X1,TempValidate:Db}=Sb,qu=class extends Sb.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.buttons=new $1(vb),this.verticalSpacing=10,this.container=t.domManager.addChild("canvas-overlay","range-buttons"),this.container.role="presentation",this.toolbar=new X1(this.ctx.localeManager),this.toolbar.addClass("ag-charts-range-buttons"),this.container.append(this.toolbar.getElement()),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),t.layoutManager.registerElement(j1.ToolbarBottom,this.onLayoutStart.bind(this)),t.zoomManager.addListener("zoom-change",this.onZoomChanged.bind(this)),this.teardown.bind(this))}teardown(){this.container.removeChild(this.toolbar.getElement()),this.toolbar.destroy()}onLayoutStart(t){const{buttons:e,ctx:i,enabled:o,toolbar:s,verticalSpacing:a}=this,{layoutBox:n}=t;if(!o||!i.zoomManager.isZoomEnabled()){s.setHidden(!0);return}s.setHidden(!1),s.updateButtons(e);const r=s.getBounds().height;s.setBounds({x:n.x,y:n.y+n.height-r,width:n.width,height:r}),n.shrink({bottom:r+a})}onZoomChanged(){this.toolbar.clearActiveButton()}onButtonPress({button:{index:t}}){const{zoomManager:e}=this.ctx,i=this.buttons.at(t);if(!i)return;const{value:o}=i;typeof o=="number"?e.extendToEnd("zoom-buttons",Zu.X,o):Array.isArray(o)?e.updateWith("zoom-buttons",Zu.X,()=>o):typeof o=="function"&&e.updateWith("zoom-buttons",Zu.X,o),this.toolbar.toggleActiveButtonByIndex(t)}};p([Db(U1)],qu.prototype,"enabled",2),p([Db(Y1)],qu.prototype,"buttons",2);var Mb=1e3*60*60*24,Qu=Mb*30,Z1=Mb*365,q1={type:"root",optionsKey:"ranges",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new qu(t),themeTemplate:{ranges:{enabled:!1,buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:Qu},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*Qu},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*Qu},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:Z1},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(t,e)=>[t,e]}]}}};import"ag-charts-community";import{_ModuleSupport as kb}from"ag-charts-community";var Ob=class Ol extends kb.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.activeSections=new Set,this.sectionButtons={annotations:[],chartToolbar:[]},this.container=this.ctx.domManager.addChild("canvas-overlay","shared-toolbar"),this.container.role="presentation"}getSharedToolbar(e){return this.sharedToolbar||this.createSharedToolbar(),this.toolbarWithSection(e)}createSharedToolbar(){this.sharedToolbar=new kb.Toolbar(this.ctx.localeManager,"vertical"),this.sharedToolbar.addClass("ag-charts-shared-toolbar"),this.container.append(this.sharedToolbar.getElement()),this.destroyFns.push(()=>{this.sharedToolbar&&(this.container.removeChild(this.sharedToolbar.getElement()),this.sharedToolbar.destroy(),this.sharedToolbar=void 0)})}toolbarWithSection(e){const i=this.sharedToolbar,o={layout:(s,a)=>{if(this.firstLayoutSection!=null&&this.firstLayoutSection!==e&&this.activeSections.has(this.firstLayoutSection))return;this.firstLayoutSection=e;const n=i.getBounds().width;i.setBounds({x:s.x,y:s.y,width:n}),s.shrink({left:n+i.horizontalSpacing+(a??0)})},addToolbarListener:(s,a)=>i.addToolbarListener(s,n=>{const r=this.getSectionIndex(e,n.button.index);if(r<0)return;const l={...n,button:this.sectionButtons[e][r]};a(l)}),updateButtons:s=>{this.sectionButtons[e]=s;const a=Ol.SECTION_ORDER.flatMap(n=>this.sectionButtons[n]);i.updateButtons(a)},updateButtonByIndex:(s,a)=>{i.updateButtonByIndex(this.getIndex(e,s),a)},toggleActiveButtonByIndex:s=>{i.toggleActiveButtonByIndex(this.getIndex(e,s))},toggleButtonEnabledByIndex:(s,a)=>{i.toggleButtonEnabledByIndex(this.getIndex(e,s),a)},setHidden:s=>{s?this.activeSections.delete(e):this.activeSections.add(e);let a=0;for(const n of Ol.SECTION_ORDER){if(n!==e){a+=this.sectionButtons[n].length;continue}for(const r of this.sectionButtons[e].keys())i.setButtonHiddenByIndex(a+r,s)}},destroy:()=>{o.setHidden(!0),this.activeSections.size===0&&this.destroy()},clearActiveButton:i.clearActiveButton.bind(i),addListener:i.addListener.bind(i),removeListener:i.removeListener.bind(i)};return o.setHidden(!1),o}getIndex(e,i){let o=0;for(const s of Ol.SECTION_ORDER){if(s===e)return o+i;o+=this.sectionButtons[s].length}return-1}getSectionIndex(e,i){let o=0;for(const s of Ol.SECTION_ORDER){if(s===e)return i>=o+this.sectionButtons[e].length?-1:i-o;o+=this.sectionButtons[s].length}return-1}};Ob.SECTION_ORDER=["chartToolbar","annotations"];var Q1=Ob,J1={type:"context",contextKey:"sharedToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Q1(t)};import{_ModuleSupport as zc}from"ag-charts-community";import{_ModuleSupport as Ju}from"ag-charts-community";var{CachedTextMeasurerPool:yr,ZIndexMap:tP,LayoutElement:eP,TempValidate:Oe,BaseProperties:iP,OBJECT:yn,BOOLEAN:oP,STRING:mn,COLOR_STRING:sP,RATIO:aP,valueProperty:nP,TextUtils:rP,Group:lP,Label:mr,Rect:cP,Text:te}=Ju,Tb={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,hlc:184,"high-low":800},hP={up:"positive",down:"negative"},pP={hlc:"altNeutral"},tg=class extends iP{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};p([Oe(sP)],tg.prototype,"fill",2),p([Oe(aP)],tg.prototype,"fillOpacity",2);var Be=class extends Ju.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new mr,this.positive=new mr,this.negative=new mr,this.neutral=new mr,this.altNeutral=new mr,this.background=new tg,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.layer=new lP({name:"StatusBar",zIndex:tP.STATUS_BAR}),this.labelGroup=this.layer.appendChild(new Ju.TranslatableGroup),this.backgroundNode=this.labelGroup.appendChild(new cP),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new te),value:this.labelGroup.appendChild(new te),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=t.highlightManager,this.labelGroup.visible=!1,this.destroyFns.push(t.scene.attachNode(this.layer),t.layoutManager.registerElement(eP.Overlay,e=>this.startPerformLayout(e)),t.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.highlightManager.addListener("highlight-change",()=>this.updateHighlight()))}async processData(t){if(!this.enabled||this.data==null)return;const e=[];for(const s of this.labels){const{id:a,key:n}=s,r=this[n];r==null?s.domain=void 0:e.push(nP(r,"number",{id:a}))}if(e.length===0)return;const{processedData:i,dataModel:o}=await t.request(this.id,this.data,{props:e});for(const s of this.labels){const{id:a,key:n}=s;this[n]!=null&&(s.domain=o.getDomain(this,a,"value",i))}}startPerformLayout(t){if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return;const{layoutBox:e}=t,i=4,o=12,s=0,a=8;this.labelGroup.translationY=e.y+s;const n=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),r=rP.getLineHeight(n),l=Tb[this.getChartType()]??0;let c=0,h,d="alphabetic";if(this.layoutStyle==="block")e.shrink(s+r+a,"top"),h=n+(r-n)/2;else{const{title:u}=this.ctx.chartService;if(d="top",h=s+u.padding,u.enabled){const g=u.node.getBBox();c=g.x+g.width+o}else c=u.padding}for(const{label:u,configuration:g,title:f,value:y,domain:m,formatter:x}of this.labels){if(m==null||!(l&g)){f.visible=!1,y.visible=!1;continue}const v=Math.max(yr.measureText(x.format(m[0]),{font:this.positive.getFont(),textBaseline:d,textAlign:"left"}).width,yr.measureText(x.format(m[1]),{font:this.positive.getFont(),textBaseline:d,textAlign:"left"}).width,yr.measureText(x.format(m[0]),{font:this.negative.getFont(),textBaseline:d,textAlign:"left"}).width,yr.measureText(x.format(m[1]),{font:this.negative.getFont(),textBaseline:d,textAlign:"left"}).width);f.visible=!0,y.visible=!0;const S=yr.measureText(u,{font:this.title.getFont(),textBaseline:d,textAlign:"left"});f.setFont(this.title),f.fill=this.title.color,f.text=u,f.textBaseline=d,f.y=h,f.x=c,c+=S.width+i,y.textBaseline=d,y.y=h,y.x=c,c+=v+o}this.backgroundNode.x=0,this.backgroundNode.y=0,this.backgroundNode.width=c-o,this.backgroundNode.height=r+s+a,this.backgroundNode.fill=this.background.fill,this.backgroundNode.fillOpacity=this.background.fillOpacity}onLayoutComplete(t){this.labelGroup.translationX=t.series.rect.x,this.updateHighlight()}updateHighlight(){if(!this.enabled)return;const t=this.highlightManager.getActiveHighlight(),e=t?.datum??this.data?.at(-1);if(e==null){this.labelGroup.visible=!1;return}this.labelGroup.visible=!0;const i=t?.itemId;let o=i!=null?hP[i]:void 0;o==null&&this.openKey!=null&&this.closeKey!=null&&(e[this.openKey]<e[this.closeKey]?o="positive":o="negative");for(const{domain:s,value:a,key:n,formatter:r,style:l}of this.labels){if(s==null)continue;let c=l??o??"neutral";c==="neutral"&&(c=pP[this.getChartType()]??c);const h=this[n],d=h!=null?e?.[h]:void 0;a.setFont(this[c]),a.fill=this[c].color,a.text=typeof d=="number"?r.format(d):""}}getChartType(){let t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return(t==null||Tb[t]==null)&&(t="candlestick"),t}};p([Oe(oP)],Be.prototype,"enabled",2),p([Oe(mn,{optional:!0})],Be.prototype,"openKey",2),p([Oe(mn,{optional:!0})],Be.prototype,"highKey",2),p([Oe(mn,{optional:!0})],Be.prototype,"lowKey",2),p([Oe(mn,{optional:!0})],Be.prototype,"closeKey",2),p([Oe(mn,{optional:!0})],Be.prototype,"volumeKey",2),p([Oe(yn)],Be.prototype,"title",2),p([Oe(yn)],Be.prototype,"positive",2),p([Oe(yn)],Be.prototype,"negative",2),p([Oe(yn)],Be.prototype,"neutral",2),p([Oe(yn)],Be.prototype,"altNeutral",2),p([Oe(yn)],Be.prototype,"background",2),p([Oe(mn)],Be.prototype,"layoutStyle",2);var dP={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Be(t),themeTemplate:{statusBar:{enabled:!1,layoutStyle:zc.ThemeSymbols.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:{$ref:"textColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},positive:{color:zc.ThemeSymbols.PALETTE_UP_STROKE,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},negative:{color:zc.ThemeSymbols.PALETTE_DOWN_STROKE,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},neutral:{color:zc.ThemeSymbols.PALETTE_NEUTRAL_STROKE,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},background:{fill:{$ref:"backgroundColor"},fillOpacity:.5},altNeutral:{color:"gray",fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}}}}};import{_ModuleSupport as uP}from"ag-charts-community";import{Logger as gP,isDate as fP,isDefined as yP,isFiniteNumber as Fc,unique as mP}from"ag-charts-core";var{BOOLEAN:eg,STRING:xP,UNION:SP,BaseProperties:bP,CartesianAxis:Ab,ChartUpdateType:Ib,ObserveChanges:xr,TooltipManager:vP,TempValidate:Sr}=uP,ea=class extends bP{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateSiblings(t){const{syncManager:e}=this.moduleContext;for(const i of e.getGroupSiblings(t??this.groupId))this.updateChart(i)}updateChart(t,e=Ib.UPDATE_DATA){t.ctx.updateService.update(e,{skipSync:!0})}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync=e.addListener("zoom-change",()=>{for(const i of t.getGroupSiblings(this.groupId))i.modulesManager.getModule("sync")?.zoom&&i.ctx.zoomManager.updateZoom("sync",this.mergeZoom(i))})}enabledNodeInteractionSync(){const{highlightManager:t,syncManager:e}=this.moduleContext;this.disableNodeInteractionSync=t.addListener("highlight-change",i=>{for(const o of e.getGroupSiblings(this.groupId))if(o.modulesManager.getModule("sync")?.nodeInteraction){if(!i.currentHighlight?.datum){o.ctx.highlightManager.updateHighlight(o.id),o.ctx.tooltipManager.removeTooltip(o.id);continue}for(const s of o.axes){const a=this.axes==="xy"?"x":this.axes;if(!Ab.is(s)||s.direction!==a)continue;const n=o.series.map(r=>{const l=r.getKeys(s.direction);if(s.keys.length&&!s.keys.some(f=>l.includes(f)))return;const{nodeData:c}=r.contextNodeData;if(!c?.length)return;const h=c[0][`${s.direction}Key`];let d=i.currentHighlight.datum[h];const u=fP(d);u&&(d=d.getTime());const g=c.find(f=>{const y=f.datum[h];return u?y.getTime()===d:y===d});return g?{series:r,nodeDatum:g}:null}).filter(yP);if(n.length<2&&n[0]?.nodeDatum!==o.ctx.highlightManager.getActiveHighlight()){const{series:r,nodeDatum:l}=n[0]??{};if(o.ctx.highlightManager.updateHighlight(o.id,l),l){const c=l.midPoint?.x??l.point?.x??0,h=l.midPoint?.y??l.point?.y??0,d=vP.makeTooltipMeta({type:"pointermove",canvasX:c,canvasY:h},r,l,void 0);o.ctx.tooltipManager.updateTooltip(o.id,d,o.getTooltipContent(r,l.datumIndex,l))}else o.ctx.tooltipManager.removeTooltip(o.id);this.updateChart(o,Ib.SERIES_UPDATE)}}}})}getSyncedDomain(t){if(!Ab.is(t)||this.axes!=="xy"&&this.axes!==t.direction)return;const{syncManager:e}=this.moduleContext,i=e.getGroup(this.groupId),[{axes:o}]=i,{direction:s,min:a,max:n,nice:r,reverse:l}=t;for(const c of o)if(s===c.direction&&(r!==c.nice||l!==c.reverse||a!==c.min&&(Fc(a)||Fc(c.min))||n!==c.max&&(Fc(n)||Fc(c.max)))){gP.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),this.enabled=!1;return}return mP(i.flatMap(c=>c.series).filter(c=>{if(c.visible){const h=c.getKeys(t.direction);return t.keys.length?t.keys.some(d=>h.includes(d)):!0}}).flatMap(c=>c.getDomain(t.direction)))}mergeZoom(t){const{zoomManager:e}=this.moduleContext;if(this.axes==="xy")return e.getZoom();const i=t.ctx.zoomManager.getZoom()??{};return i[this.axes]=e.getZoom()?.[this.axes],i}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():this.disableNodeInteractionSync?.()}onZoomChange(){this.enabled&&this.zoom?this.enabledZoomSync():this.disableZoomSync?.()}destroy(){const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(),this.disableZoomSync?.()}};ea.className="Sync",p([Sr(eg),xr(t=>t.onEnabledChange())],ea.prototype,"enabled",2),p([Sr(xP,{optional:!0}),xr((t,e,i)=>t.onGroupIdChange(e,i))],ea.prototype,"groupId",2),p([Sr(SP(["x","y","xy"],"an axis")),xr(t=>t.onAxesChange())],ea.prototype,"axes",2),p([Sr(eg),xr(t=>t.onNodeInteractionChange())],ea.prototype,"nodeInteraction",2),p([Sr(eg),xr(t=>t.onZoomChange())],ea.prototype,"zoom",2);var DP={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new ea(t),themeTemplate:{sync:{enabled:!1}}};import{_ModuleSupport as ia}from"ag-charts-community";import{debounce as MP,entries as ig,roundTo as kP}from"ag-charts-core";import{_ModuleSupport as og}from"ag-charts-community";var{COLOR_STRING:OP,RATIO:TP,TempValidate:Nb}=og,Cb="#2196f3",AP="#8a8a8a",Vc=class extends og.Rect{constructor(){super(...arguments),this.fill=Cb,this.fillOpacity=.2,this.zIndex=og.ZIndexMap.ZOOM_SELECTION}updateValid(){this.fill=Cb}updateInvalid(){this.fill=AP}};Vc.className="ZoomRect",p([Nb(OP)],Vc.prototype,"fill",2),p([Nb(TP)],Vc.prototype,"fillOpacity",2);import{_ModuleSupport as sg}from"ag-charts-community";import{_ModuleSupport as IP}from"ag-charts-community";import{clamp as NP,isNumberEqual as Lb}from"ag-charts-core";var{UNION:CP}=IP,xt={min:0,max:1},oa=xt.max-xt.min,Rb="end",wb="middle",Gc=CP(["pointer","start","middle","end"],"an anchor point"),Wc=(t,e=xt.min,i=xt.max)=>NP(e,t,i);function ag(){return{x:{...xt},y:{...xt}}}function ee(t){return t.x.max-t.x.min}function qe(t){return t.y.max-t.y.min}function Pb(t,e,i=1e-10){return Lb(t.min,e.min,i)&&Lb(t.max,e.max,i)}function br(t,e,i){return Pb(t.x,e.x,i)&&Pb(t.y,e.y,i)}function ye(t){return{x:{min:t?.x?.min??xt.min,max:t?.x?.max??xt.max},y:{min:t?.y?.min??xt.min,max:t?.y?.max??xt.max}}}function Bo(t,e,i){if(!t)return{x:0,y:0};const o=Wc(e-t.x,0,t.x+t.width),s=Wc(i-t.y,0,t.y+t.height),a=1/t.width*o,n=1-1/t.height*s;return{x:Wc(a),y:Wc(n)}}function sa(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function Hc(t,e,i){return{x:{min:t.x.min,max:t.x.min+ee(t)*e},y:{min:t.y.min,max:t.y.min+qe(t)*i}}}function Eb(t,e,i){const o=ee(t),s=qe(t),a=t.x.min+o/2,n=t.y.min+s/2;return{x:{min:a-o*e/2,max:a+o*e/2},y:{min:n-s*i/2,max:n+s*i/2}}}function Qe(t,e,i,o){const{min:s,max:a}=e,n=s+(a-s)/2,r=t.max-t.min;switch(i){case"start":return{min:s,max:e.min+r};case"end":return{min:e.max-r,max:a};case"middle":return{min:n-r/2,max:n+r/2};case"pointer":return LP(t,e,o??n);default:return{min:s,max:a}}}function LP(t,e,i){const o=t.max-t.min,s=e.max-e.min,a=i*(1-(s-o)),n=i-a,r=t.min+n,l=t.max+n;return{min:r,max:l}}function RP(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}function mi(t){return{x:Kc(t.x),y:Kc(t.y)}}function Kc(t){const e=t.max-t.min;let i=t.max>xt.max?xt.max-e:t.min,o=t.min<xt.min?e:t.max;return i=Math.max(xt.min,i),o=Math.min(xt.max,o),{min:i,max:o}}var wP=class{update(t,e,i,o,s,a){return this.oldZoom??(this.oldZoom=ye(e===sg.ChartAxisDirection.X?{...s,x:a}:{...s,y:a})),this.updateCoords(t.currentX,t.currentY),this.updateZoom(e,i,o)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:o,oldZoom:s}=this;let a=ye(s);if(!o||!s)return t===sg.ChartAxisDirection.X?a.x:a.y;const n=Bo(i,o.x1,o.y1),r=Bo(i,o.x2,o.y2);if(t===sg.ChartAxisDirection.X){const c=(r.x-n.x)*ee(s);return a.x.max+=c,a.x=Qe(a.x,s.x,e,n.x),a=mi(a),a.x}const l=(r.y-n.y)*qe(s);return a.y.max-=l,a.y=Qe(a.y,s.y,e,n.y),a=mi(a),a.y}},PP="zoom-action",EP="pan-action",_P=class{constructor(t,e,i,o,s,a){this.contextMenuRegistry=t,this.zoomManager=e,this.getModuleProperties=i,this.getRect=o,this.updateZoom=s,this.isZoomValid=a}registerActions(t){if(!t)return;const{contextMenuRegistry:e}=this,i=e.registerDefaultAction({id:PP,type:"series-area",label:"contextMenuZoomToCursor",action:this.onZoomToHere.bind(this),toggleEnabledOnShow:s=>{const a=this.getRect();if(!a)return!0;const n=Bo(a,s.x,s.y);return this.iterateFindNextZoomAtPoint(n)!=null}}),o=e.registerDefaultAction({id:EP,type:"series-area",label:"contextMenuPanToCursor",action:this.onPanToHere.bind(this),toggleEnabledOnShow:()=>!br(ye(this.zoomManager.getZoom()),ag())});return()=>{i(),o()}}computeOrigin(t){const e=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!e||!t?.target||!(t instanceof MouseEvent))return;const o={x:0,y:0,width:e.width,height:e.height};return Bo(o,t.offsetX,t.offsetY)}onZoomToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const i=this.iterateFindNextZoomAtPoint(e);i!=null&&this.updateZoom(i)}onPanToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const i=ye(this.zoomManager.getZoom()),o=ee(i),s=qe(i),a=e.x*o,n=e.y*s,r=oa/2;let l={x:{min:e.x-r,max:e.x+r},y:{min:e.y-r,max:e.y+r}};l=Eb(l,o,s),l=sa(l,i.x.min-e.x+a,i.y.min-e.y+n),this.updateZoom(mi(l))}iterateFindNextZoomAtPoint(t){const{scrollingStep:e}=this.getModuleProperties();for(let i=e;i<=1-e;i+=e){const o=this.getNextZoomAtPoint(t,i);if(this.isZoomValid(o))return o}}getNextZoomAtPoint(t,e){const{isScalingX:i,isScalingY:o}=this.getModuleProperties(),s=ye(this.zoomManager.getZoom()),a=t.x*ee(s),n=t.y*qe(s),r=oa/2;let l={x:{min:t.x-r,max:t.x+r},y:{min:t.y-r,max:t.y+r}};return l=Eb(l,i?ee(s)*e:oa,o?qe(s)*e:oa),l=sa(l,s.x.min-t.x+a,s.y.min-t.y+n),mi(l)}};import{_ModuleSupport as _b}from"ag-charts-community";var{BBoxValues:BP,ChartAxisDirection:zP}=_b,FP=class{constructor(t){this.axesHandlers=t,this.axes=[]}destroy(){this.axes.forEach(t=>t.div.destroy())}update(t,e){if(this.axes.forEach(r=>r.div.setHidden(!t)),!t)return;const{X:i,Y:o}=_b.ChartAxisDirection,s=[...e.axisManager.getAxisContext(i),...e.axisManager.getAxisContext(o)],{removed:a,added:n}=this.diffAxisIds(s);a.length>0&&(this.axes=this.axes.filter(r=>a.includes(r.axisId)?(r.div.destroy(),!1):!0));for(const r of n){const{axisId:l,direction:c}=r;this.axes.push(this.initAxis(e,l,this.axesHandlers,c))}for(const r of this.axes){const c=s.find(h=>h.axisId===r.axisId).getCanvasBounds();r.div.setHidden(BP.isEmpty(c)),c!==void 0&&r.div.setBounds(c)}}toggleAxisDraggingCursor(t,e){for(const i of this.axes)i.direction===t&&i.div.setCursor(e?this.getCursor(t):void 0)}getCursor(t){return t===zP.X?"ew-resize":"ns-resize"}initAxis(t,e,i,o){const s="afterend",a=t.proxyInteractionService.createProxyElement({type:"region",domManagerId:e,where:s});return a.setCursor(this.getCursor(o)),a.addListener("drag-start",n=>{n.device==="touch"&&n.sourceEvent.preventDefault(),i.onDragStart(e,o)}),a.addListener("drag-move",n=>i.onDrag(n)),a.addListener("drag-end",i.onDragEnd),a.addListener("dblclick",()=>i.onDoubleClick(e,o)),{axisId:e,div:a,direction:o}}diffAxisIds(t){const e=this.axes.map(a=>a.axisId),i=t.map(a=>a.axisId),o=e.filter(a=>!i.includes(a)),s=t.filter(a=>!e.includes(a.axisId));return{removed:o,added:s}}};import"ag-charts-community";import{entries as VP,getWindow as GP}from"ag-charts-core";var Bb=16,WP={off:1,short:.01,long:.002},HP=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){const{deceleration:t}=this;return Math.max(typeof t=="number"?t:WP[t]??1,1e-4)}addListener(t,e){return this.onUpdate=e,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(t){this.updateCoords(t.currentX,t.currentY);const{x1:e=0,y1:i=0,x2:o=0,y2:s=0}=this.coords??{};this.onUpdate?.({type:"update",deltaX:e-o,deltaY:i-s})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:t}=this;let e=0,i=0,o=0;if(t.length>0){const s=this.zoomCoordsHistoryIndex%Bb;let a=s-1;a<0&&(a=t.length-1);let n=s;n>=t.length&&(n=0);const r=t[a],l=t[n];e=r.x-l.x,i=r.y-l.y,o=r.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,o>0&&this.decelerationValue<1){const s=e/o,a=i/o,n=Math.hypot(s,a),r=Math.atan2(a,s),l=performance.now();this.inertiaHandle=GP().requestAnimationFrame(c=>{this.animateInertia(c,c,l,n,r)})}}recordCurrentZoomCoords(){const{coords:t,coordsHistory:e,zoomCoordsHistoryIndex:i}=this;if(!t)return;const{x2:o,y2:s}=t,a=Date.now();e[i%Bb]={x:o,y:s,t:a},this.zoomCoordsHistoryIndex+=1}animateInertia(t,e,i,o,s){const a=1-this.decelerationValue,n=-o/Math.log(a),r=o*(a**(e-i)-1)/Math.log(a),l=o*(a**(t-i)-1)/Math.log(a);this.onUpdate?.({type:"update",deltaX:-Math.cos(s)*(l-r),deltaY:-Math.sin(s)*(l-r)}),!(l>=n-1)&&(this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,t,i,o,s)}))}updateCoords(t,e){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:t,y2:e}:this.coords={x1:t,y1:e,x2:t,y2:e}}translateZooms(t,e,i,o){const s=Bo(t,t.x+Math.abs(i),t.y+t.height-Math.abs(o)),a=Math.sign(i)*s.x,n=-Math.sign(o)*s.y,r={};for(const[l,{direction:c,zoom:h}]of VP(e)){if(h&&h.min===xt.min&&h.max===xt.max)continue;let d=ye({[c]:h});d=mi(sa(d,a*ee(d),n*qe(d))),r[l]={direction:c,zoom:d[c]}}return r}};import{_ModuleSupport as KP}from"ag-charts-community";import{entries as UP}from"ag-charts-core";var YP=200,jP=class{update(t,e,i,o){const s=t.deltaX*e*YP;return this.translateZooms(i,o,s)}translateZooms(t,e,i){const o={},s=Bo(t,t.x+Math.abs(i),0),a=i<0?-s.x:s.x;for(const[n,{direction:r,zoom:l}]of UP(e)){if(r!==KP.ChartAxisDirection.X)continue;let c=ye({x:l});c=mi(sa(c,a*ee(c),0)),o[n]={direction:r,zoom:c.x}}return o}};import{_ModuleSupport as zb}from"ag-charts-community";import{entries as $P}from"ag-charts-core";var XP=class{updateAxes(t,e,i,o){const s=t.sourceEvent,a={},{anchorPointX:n,anchorPointY:r,isScalingX:l,isScalingY:c,scrollingStep:h}=e,d=Bo(i,s.offsetX??s.clientX,s.offsetY??s.clientY);for(const[u,{direction:g,zoom:f}]of $P(o)){if(f==null)continue;let y={...f};const m=h*t.deltaY*(f.max-f.min);if(g===zb.ChartAxisDirection.X&&l)y.max+=m,y=Qe(y,f,n,d.x);else if(g===zb.ChartAxisDirection.Y&&c)y.max+=m,y=Qe(y,f,r,d.y);else continue;a[u]={direction:g,zoom:Kc(y)}}return a}update(t,e,i,o){const{anchorPointX:s,anchorPointY:a,isScalingX:n,isScalingY:r,scrollingStep:l}=e,c=t.offsetX+i.x,h=t.offsetY+i.y,d=Bo(i,c,h),u=t.deltaY;let g=ye(o);return g.x.max+=n?l*u*ee(o):0,g.y.max+=r?l*u*qe(o):0,n&&(g.x=Qe(g.x,o.x,s,d.x)),r&&(g.y=Qe(g.y,o.y,a,d.y)),g=mi(g),g}updateDelta(t,e,i){const{anchorPointX:o,anchorPointY:s,isScalingX:a,isScalingY:n,scrollingStep:r}=e;let l=ye(i);return l.x.max+=a?r*-t*ee(i):0,l.y.max+=n?r*-t*qe(i):0,a&&(l.x=Qe(l.x,i.x,o)),n&&(l.y=Qe(l.y,i.y,s)),l=mi(l),l}},ZP=class{constructor(t,e,i){this.rect=t,this.getZoom=e,this.isZoomValid=i,this.rect.visible=!1}update(t,e,i){const o=t.currentX+(i?.x??0),s=t.currentY+(i?.y??0);this.rect.visible=!0,this.updateCoords(o,s,e,i),this.updateRect(i)}stop(t,e,i){let o=ye();if(!t||!e)return o;this.coords&&(o=this.createZoomFromCoords(e,i));const s=e.width/t.width,a=e.height/t.height;return o=mi(RP(o,s,a)),this.reset(),o}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible&&this.rect.width>0&&this.rect.height>0}updateCoords(t,e,i,o){if(!this.coords){this.coords={x1:t,y1:e,x2:t,y2:e};return}const{coords:s}=this;if(s.x2=t,s.y2=e,!o)return;const{isScalingX:a,isScalingY:n,keepAspectRatio:r}=i,l=this.getNormalisedDimensions();if(r&&a&&n){const c=o.width/o.height;s.y2<s.y1?s.y2=Math.min(s.y1-l.width/c,s.y1):s.y2=Math.max(s.y1+l.width/c,s.y1)}a||(s.x1=o.x,s.x2=o.x+o.width),n||(s.y1=o.y,s.y2=o.y+o.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:o,height:s}=i;let{x:a,y:n}=i;a=Math.max(a,t.x),a-=Math.max(0,a+o-(t.x+t.width)),n=Math.max(n,t.y),n-=Math.max(0,n+s-(t.y+t.height)),e.x=a,e.y=n,e.width=o,e.height=s;const r=this.createZoomFromCoords(t,this.getZoom());this.isZoomValid(r)?e.updateValid():e.updateInvalid()}createZoomFromCoords(t,e){const i=ye(e),o=this.getNormalisedDimensions(),s=Bo(t,o.x,o.y+o.height),a=o.width/t.width,n=o.height/t.height;let r=Hc(i,a,n);const l=s.x*ee(i),c=s.y*qe(i);return r=sa(r,l,c),r=mi(r),r}getNormalisedDimensions(){const{x1:t=0,y1:e=0,x2:i=0,y2:o=0}=this.coords??{},s=t<=i?t:i,a=e<=o?e:o,n=t<=i?i-t:t-i,r=e<=o?o-e:e-o;return{x:s,y:a,width:n,height:r}}};import{_ModuleSupport as qP}from"ag-charts-community";import{createElement as QP,entries as JP}from"ag-charts-core";var{ARRAY:tE,BOOLEAN:eE,STRING:iE,UNION:Fb,ActionOnSet:Vb,BaseProperties:oE,ChartAxisDirection:sE,NativeWidget:aE,PropertiesArray:nE,Toolbar:rE,ToolbarButtonProperties:lE,TempValidate:aa}=qP,ng=class extends lE{};p([aa(Fb(["reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"]))],ng.prototype,"value",2),p([aa(iE)],ng.prototype,"section",2);var xn=class extends oE{constructor(t,e,i,o,s,a,n){super(),this.ctx=t,this.getModuleProperties=e,this.getResetZoom=i,this.updateZoom=o,this.updateAxisZoom=s,this.resetZoom=a,this.isZoomValid=n,this.enabled=!1,this.buttons=new nE(ng),this.visible="hover",this.verticalSpacing=10,this.detectionRange=38,this.destroyFns=[],this.container=new aE(QP("div")),this.container.addClass("ag-charts-zoom-buttons"),t.domManager.addChild("canvas-overlay","zoom-buttons",this.container.getElement()),this.toolbar=new rE(t.localeManager),this.container.addChild(this.toolbar),this.toolbar.getElement().style.transform="translateY(54px)",this.toggleVisibility(this.visible==="always"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("button-focused",this.onButtonFocus.bind(this)),t.widgets.containerWidget.addListener("mousemove",this.onHover.bind(this)),t.widgets.containerWidget.addListener("mouseleave",this.onLeave.bind(this)),t.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),this.teardown.bind(this))}destroy(){for(const t of this.destroyFns)t()}toggleVisibleZoomed(t){this.visible==="zoomed"&&this.toggleVisibility(!t)}teardown(){this.ctx.domManager.removeChild("canvas-overlay","zoom-buttons"),this.container.destroy()}onLayoutComplete(t){const{buttons:e,container:i}=this,{rect:o}=t.series;this.toolbar.updateButtons(e),this.toggleButtons();const s=i.getBounds().height;i.setBounds({y:o.y+o.height-s})}onHover(t){if(!this.enabled||this.visible!=="hover"||this.toolbar.isHidden())return;const{container:e,detectionRange:i,ctx:{scene:o}}=this,{currentY:s,sourceEvent:{target:a}}=t,n=e.getElement(),r=n.offsetTop-i,l=s>r&&s<o.canvas.element.offsetHeight||a===n;this.toggleVisibility(l)}onLeave(){this.visible==="hover"&&this.toggleVisibility(!1)}toggleVisibility(t,e=!1){const{container:i,toolbar:o,verticalSpacing:s}=this;o.toggleClass("ag-charts-zoom-buttons__toolbar--hidden",!t);const a=o.getElement();a.style.transitionDuration=e?"0s":"",a.style.transform=t?"translateY(0)":`translateY(${i.getBounds().height+s}px)`}toggleButtons(){const t=ye(this.ctx.zoomManager.getZoom());if(!(this.previousZoom&&br(this.previousZoom,t))){this.previousZoom=t;for(const[e,i]of this.buttons.entries()){let o=!0;switch(i?.value){case"pan-start":o=t.x.min>xt.min;break;case"pan-end":o=t.x.max<xt.max;break;case"pan-left":o=t.x.min>xt.min;break;case"pan-right":o=t.x.max<xt.max;break;case"zoom-out":o=!br(t,ag());break;case"zoom-in":o=this.isZoomValid(this.getNextZoomStateUnified("zoom-in",t,this.getModuleProperties()));break;case"reset":o=!br(t,this.getResetZoom());break}this.toolbar.toggleButtonEnabledByIndex(e,o)}}}onButtonPress({button:t}){if(!this.enabled||this.toolbar.isHidden())return;const e=this.getModuleProperties();if(e.independentAxes&&t.value!=="reset"){const i=this.ctx.zoomManager.getAxisZooms();for(const[o,{direction:s,zoom:a}]of JP(i))a!=null&&this.onButtonPressAxis(t,e,o,s,a)}else this.onButtonPressUnified(t,e)}onButtonFocus(t){this.toggleVisibility(!0,!0)}onButtonPressAxis(t,e,i,o,s){const{isScalingX:a,isScalingY:n,scrollingStep:r}=e;let l={...s};const c=s.max-s.min;switch(t.value){case"pan-start":l.max=c,l.min=0;break;case"pan-end":l.min=l.max-c,l.max=xt.max;break;case"pan-left":l.min-=c*r,l.max-=c*r;break;case"pan-right":l.min+=c*r,l.max+=c*r;break;case"zoom-in":case"zoom-out":{const h=o===sE.X,d=h&&a||!h&&n;let u=t.value==="zoom-in"?1-r:1+r;d||(u=1);const g=h?this.getAnchorPointX(e):this.getAnchorPointY(e);l.max=l.min+(l.max-l.min)*u,l=Qe(l,s,g);break}}this.updateAxisZoom(i,o,Kc(l))}onButtonPressUnified(t,e){const{scrollingStep:i}=e,o=ye(this.ctx.zoomManager.getZoom());let s=ye(o);switch(t.value){case"reset":this.resetZoom();return;case"pan-start":s.x.max=ee(s),s.x.min=0;break;case"pan-end":s.x.min=xt.max-ee(s),s.x.max=xt.max;break;case"pan-left":s=sa(s,-ee(s)*i,0);break;case"pan-right":s=sa(s,ee(s)*i,0);break;case"zoom-in":case"zoom-out":{s=this.getNextZoomStateUnified(t.value,o,e);break}}this.updateZoom(mi(s))}getNextZoomStateUnified(t,e,i){const{isScalingX:o,isScalingY:s,scrollingStep:a}=i,n=t==="zoom-in"?1-a:1+a,r=Hc(e,o?n:1,s?n:1);return r.x=Qe(r.x,e.x,this.getAnchorPointX(i)),r.y=Qe(r.y,e.y,this.getAnchorPointY(i)),r}getAnchorPointX(t){const e=this.anchorPointX??t.anchorPointX;return e==="pointer"?Rb:e}getAnchorPointY(t){const e=this.anchorPointY??t.anchorPointY;return e==="pointer"?wb:e}};p([aa(eE),Vb({changeValue(t){this.toolbar?.setHidden(!t)}})],xn.prototype,"enabled",2),p([aa(tE)],xn.prototype,"buttons",2),p([aa(Fb(["always","zoomed","hover"])),Vb({changeValue(t,e){e!=null&&this.toggleVisibility(t==="always")}})],xn.prototype,"visible",2),p([aa(Gc)],xn.prototype,"anchorPointX",2),p([aa(Gc)],xn.prototype,"anchorPointY",2);import"ag-charts-community";var na=1e6;function Uc({min:t,max:e},i,o,s){return s===0?0:na*((i-o)/s*(e-t)+t)}function cE(t,e,i,o,s,a){[t,e]=[Math.min(t,e),Math.max(t,e)],[i,o]=[Math.min(i,o),Math.max(i,o)];const n=na*(i-s)/a,r=na*(o-s)/a,l=(i-s)/(o-s),c=(t-l*e)/(na-n+l*(r-na)),h=(e+(r-na)*c)/r;return{min:c,max:h}}function Gb(t,e,i,o){e===0&&(e=30),o===0&&(o=30);const s=t-e,a=t+e,n=i-o,r=i+o;return!(a<n||r<s)}var hE=class{constructor(){this.touchStart={origins:[{identifier:0,normalX:NaN,normalY:NaN},{identifier:0,normalX:NaN,normalY:NaN}]},this.initialZoom={x:{min:0,max:1},y:{min:0,max:1}},this.previous={a1:NaN,a2:NaN,b1:NaN,b2:NaN}}start(t,e,i){if(t.sourceEvent.targetTouches.length!==2)return!1;t.sourceEvent.preventDefault();const o=Array.from(t.sourceEvent.targetTouches),{x:s,y:a,width:n,height:r}=e.getBoundingClientRect();this.initialZoom.x.min=i.x?.min??0,this.initialZoom.x.max=i.x?.max??1,this.initialZoom.y.min=i.y?.min??0,this.initialZoom.y.max=i.y?.max??1,this.touchStart.origins.forEach(f=>f.identifier=0),this.previous.a1=NaN,this.previous.a2=NaN,this.previous.b1=NaN,this.previous.b2=NaN;for(const f of[0,1]){const y=o[f].clientX,m=a+r-o[f].clientY;this.touchStart.origins[f].identifier=o[f].identifier,this.touchStart.origins[f].normalX=Uc(this.initialZoom.x,y,s,n),this.touchStart.origins[f].normalY=Uc(this.initialZoom.y,m,a,r)}const[l,c]=o,[h,d]=this.touchStart.origins,u=Gb(l.clientX,l.radiusX,c.clientX,c.radiusX);return Gb(l.clientY,l.radiusY,c.clientY,c.radiusY)&&(h.normalY=d.normalY=(h.normalY+d.normalY)/2),u&&(h.normalX=d.normalX=(h.normalX+d.normalX)/2),!0}update(t,e){t.sourceEvent.preventDefault();const i=Array.from(t.sourceEvent.targetTouches),{x:o,y:s,width:a,height:n}=e.getBoundingClientRect(),{origins:r}=this.touchStart,l=[0,1].map(x=>i.find(v=>v.identifier===r[x].identifier)),c=r[0].normalX,h=r[1].normalX,d=l[0].clientX,u=l[1].clientX,g=r[0].normalY,f=r[1].normalY,y=s+n-l[0].clientY,m=s+n-l[1].clientY;return this.twitchTolerantZoomPan4(c,h,d,u,g,f,y,m,o,s,a,n)}end(t){const e=Array.from(t.sourceEvent.targetTouches).map(i=>i.identifier);return!e.includes(this.touchStart.origins[0].identifier)||!e.includes(this.touchStart.origins[1].identifier)}twitchTolerantZoomPan4(t,e,i,o,s,a,n,r,l,c,h,d){const{initialZoom:u,previous:g}=this,f=Wb(t,e,i,o,g,"a1","a2",l,h,u.x),y=Wb(s,a,n,r,g,"b1","b2",c,d,u.y);return{x:f,y}}};function Wb(t,e,i,o,s,a,n,r,l,c){if(t!=e){const h=s[a],d=s[n];return Math.abs(i-h)+Math.abs(o-d)<=1?(i=h,o=d):(s[a]=i,s[n]=o),cE(t,e,i,o,r,l)}else{const h=Uc(c,i,r,l),d=Uc(c,o,r,l),u=(h+d)/2,g=(t-u)/na;return{min:c.min+g,max:c.max+g}}}var{BOOLEAN:co,NUMBER:Hb,POSITIVE_NUMBER:pE,RATIO:rg,UNION:lg,OBJECT:Kb,OR:dE,ActionOnSet:Yc,ChartAxisDirection:ra,ChartUpdateType:Ub,Deprecated:Yb,TempValidate:Lt,InteractionState:jc,ProxyProperty:uE}=ia,$c=t=>kP(t,10),jb="zoom-cursor",cg="zoom-tooltip",hg=class extends ia.BaseProperties{constructor(t){super(),this.onChange=t,this.enabled=!1,this.padding=0}};p([Lt(co),Yc({changeValue(t){this.onChange({enabled:t,padding:this.padding})}})],hg.prototype,"enabled",2),p([Lt(rg),Yc({changeValue(t){this.onChange({enabled:this.enabled,padding:t})}})],hg.prototype,"padding",2);var zt=class extends ia.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.enableTwoFingerZoom=!0,this.panKey="alt",this.axes="x",this.scrollingStep=oa/10,this.keepAspectRatio=!1,this.minVisibleItems=2,this.anchorPointX=Rb,this.anchorPointY=wb,this.autoScaling=new hg(i=>{this.ctx.zoomManager.setAutoScaleYAxis(i.enabled,i.padding)}),this.buttons=new xn(this.ctx,this.getModuleProperties.bind(this),this.getResetZoom.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this),this.resetZoom.bind(this),this.isZoomValid.bind(this)),this.axisDragger=new wP,this.panner=new HP,this.scroller=new XP,this.scrollPanner=new jP,this.twoFingers=new hE,this.deceleration="short",this.dragState=0,this.isState=i=>this.ctx.interactionManager.isState(i),this.destroyContextMenuActions=void 0,this.isFirstWheelEvent=!0,this.debouncedWheelReset=MP(()=>{this.isFirstWheelEvent=!0},100);const e=new Vc;this.selector=new ZP(e,this.getZoom.bind(this),this.isZoomValid.bind(this)),this.contextMenu=new _P(t.contextMenuRegistry,t.zoomManager,this.getModuleProperties.bind(this),()=>this.paddedRect,this.updateZoom.bind(this),this.isZoomValid.bind(this)),this.domProxy=new FP({onDragStart:(i,o)=>this.onAxisDragStart(i,o),onDrag:i=>{this.onDragMove({...i,currentX:i.offsetX,currentY:i.offsetY})},onDragEnd:()=>this.onDragEnd(),onDoubleClick:(i,o)=>{this.hoveredAxis={id:i,direction:o},this.onDoubleClick(),this.hoveredAxis=void 0}}),this.destroyFns.push(t.scene.attachNode(e),t.chartEventManager.addListener("series-keynav-zoom",i=>this.onNavZoom(i)),t.widgets.seriesDragInterpreter.addListener("dblclick",i=>this.onDoubleClick(i)),t.widgets.seriesDragInterpreter.addListener("drag-move",i=>this.onDragMove(i)),t.widgets.seriesDragInterpreter.addListener("drag-start",i=>this.onDragStart(i)),t.widgets.seriesDragInterpreter.addListener("drag-end",()=>this.onDragEnd()),t.widgets.seriesWidget.addListener("wheel",i=>this.onWheel(i)),t.widgets.seriesWidget.addListener("touchstart",(i,o)=>this.onTouchStart(i,o)),t.widgets.seriesWidget.addListener("touchmove",(i,o)=>this.onTouchMove(i,o)),t.widgets.seriesWidget.addListener("touchend",i=>this.onTouchEnd(i)),t.widgets.seriesWidget.addListener("touchcancel",i=>this.onTouchEnd(i)),t.updateService.addListener("process-data",i=>this.onProcessData(i)),t.layoutManager.addListener("layout:complete",i=>this.onLayoutComplete(i)),t.zoomManager.addListener("zoom-change",i=>this.onZoomChange(i)),t.zoomManager.addListener("zoom-pan-start",i=>this.onZoomPanStart(i)),this.panner.addListener("update",i=>this.onPanUpdate(i)),()=>this.teardown())}teardown(){this.ctx.zoomManager.setZoomModuleEnabled(!1),this.buttons.destroy(),this.destroyContextMenuActions?.()}onEnabledChange(t){this.ctx.zoomManager.setZoomModuleEnabled(t),this.contextMenu&&(this.destroyContextMenuActions?.(),this.destroyContextMenuActions=this.contextMenu.registerActions(t))}isIgnoredTouch(t){if(t?.device!=="touch")return!1;if(this.ctx.chartService.touch.dragAction!=="drag")return!0;if(this.enableSelecting)return!1;if(!this.enablePanning)return!0;const{x:e,y:i}=this.getZoom();return e.min===0&&e.max===1&&i.min===0&&i.max===1}onDoubleClick(t){const{enabled:e,enableDoubleClickToReset:i,hoveredAxis:o,ctx:{zoomManager:s}}=this;!e||!i||!this.isState(jc.ZoomClickable)||(o?s.resetAxisZoom("zoom",o.id):t?.preventZoomDblClick||this.resetZoom())}onDragStart(t){const{enabled:e,enableAxisDragging:i,enablePanning:o,enableSelecting:s,hoveredAxis:a,ctx:{domManager:n,zoomManager:r}}=this;if(!e||!this.hoveredAxis&&(!this.isState(jc.ZoomDraggable)||this.dragState!==0||this.isIgnoredTouch(t)))return;this.panner.stopInteractions();let l=0;if(i&&a)l=1;else if(t!=null){const c=this.isPanningKeyPressed(t.sourceEvent);o&&(!s||c)?(n.updateCursor(jb,"grabbing"),l=2,this.panner.start()):s&&!c&&(l=3)}(this.dragState=l)!==0&&r.fireZoomPanStartEvent("zoom")}onDragMove(t){const{anchorPointX:e,anchorPointY:i,axisDragger:o,dragState:s,enabled:a,paddedRect:n,panner:r,selector:l,seriesRect:c,shouldFlipXY:h,hoveredAxis:d,ctx:{interactionManager:u,tooltipManager:g,updateService:f,zoomManager:y}}=this;if(!a||!n||!c||!d&&(!this.isState(jc.ZoomDraggable)||this.isIgnoredTouch(t)))return;u.pushState(ia.InteractionState.ZoomDrag),t.device==="touch"&&t.sourceEvent.preventDefault();const m=this.getZoom();switch(s){case 1:{if(!d)break;const{id:x,direction:v}=d;let S=v===ra.X?e:i;h&&(S=v===ra.X?i:e);const b=y.getAxisZoom(x),D=o.update(t,v,S,c,m,b);y.setAxisManuallyAdjusted("zoom",x),this.updateAxisZoom(x,v,D);break}case 2:r.update(t);break;case 3:l.update(t,this.getModuleProperties(),n);break;case 0:return}g.updateTooltip(cg),f.update(Ub.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){const{axisDragger:t,dragState:e,enabled:i,panner:o,selector:s,ctx:{domManager:a,interactionManager:n,tooltipManager:r}}=this;if(n.popState(ia.InteractionState.ZoomDrag),!(!i||e===0)){switch(e){case 1:this.hoveredAxis=void 0,t.stop();break;case 2:o.stop();break;case 3:{if(!s.didUpdate())break;const l=this.getZoom(),c=s.stop(this.seriesRect,this.paddedRect,l);this.updateZoom(c);break}}this.dragState=0,a.updateCursor(jb),r.removeTooltip(cg)}}onNavZoom(t){const{enabled:e,enableScrolling:i,scroller:o}=this;!this.ctx.interactionManager.isState(ia.InteractionState.Default)||!e||!i||(t.widgetEvent.sourceEvent.preventDefault(),this.updateZoom(o.updateDelta(t.delta,this.getModuleProperties(),this.getZoom())))}onWheel(t){const{enabled:e,enablePanning:i,enableScrolling:o,paddedRect:s}=this;if(!e||!o||!s||!this.isState(jc.ZoomWheelable))return;const{deltaX:a,deltaY:n}=t.sourceEvent,r=a!=null&&n!=null&&Math.abs(a)>Math.abs(n);i&&r?this.onWheelPanning(t):this.onWheelScrolling(t)}onWheelPanning(t){const{scrollingStep:e,scrollPanner:i,seriesRect:o,ctx:{zoomManager:s}}=this;if(!o)return;t.sourceEvent.preventDefault();const a=i.update(t,e,o,s.getAxisZooms());for(const[n,{direction:r,zoom:l}]of ig(a))this.updateAxisZoom(n,r,l)}onWheelScrolling(t){const{enableAxisDragging:e,enableIndependentAxes:i,hoveredAxis:o,scroller:s,seriesRect:a,ctx:{zoomManager:n}}=this;if(!a)return;const r=this.getZoom();let l=t.deltaY>0&&this.isMaxZoom(r);const c=e&&o!=null;let h=this.isScalingX(),d=this.isScalingY();c&&(h=o.direction===ia.ChartAxisDirection.X,d=!h);const u=this.getModuleProperties({isScalingX:h,isScalingY:d});let g=!0;if(i===!0){const f=s.updateAxes(t,u,a,n.getAxisZooms());for(const[y,{direction:m,zoom:x}]of ig(f))c&&o.id!==y||g&&(g=this.updateAxisZoom(y,m,x))}else{const f=s.update(t,u,a,this.getZoom());g=this.updateUnifiedZoom(f)}l||(l=t.deltaY<0&&!g),(!this.isFirstWheelEvent||!l)&&t.sourceEvent.preventDefault(),this.isFirstWheelEvent=!1,this.debouncedWheelReset()}onAxisDragStart(t,e){this.hoveredAxis={id:t,direction:e},this.onDragStart(void 0)}onTouchStart(t,e){!this.enableTwoFingerZoom||this.dragState!==0||this.twoFingers.start(t,e,this.getZoom())&&(this.dragState=4)}onTouchMove(t,e){if(!this.enableTwoFingerZoom||this.dragState!==4)return;const i=this.twoFingers.update(t,e);this.updateZoom(mi(i))}onTouchEnd(t){!this.enableTwoFingerZoom||this.dragState!==4||(t.sourceEvent.preventDefault(),this.twoFingers.end(t)&&(this.dragState=0))}onProcessData(t){this.shouldFlipXY=t.series.shouldFlipXY}onLayoutComplete(t){this.domProxy.update(this.enableAxisDragging,this.ctx),this.enabled&&(this.seriesRect=t.series.rect,this.paddedRect=t.series.paddedRect,this.enableAxisDragging&&this.toggleAxisDraggingCursors())}onZoomChange(t){t.callerId!=="zoom"&&this.panner.stopInteractions();const e=this.getZoom();this.buttons.toggleVisibleZoomed(this.isMaxZoom(e))}onZoomPanStart(t){t.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(t){const{panner:e,seriesRect:i,ctx:{tooltipManager:o,zoomManager:s}}=this;if(!i)return;const a=e.translateZooms(i,s.getAxisZooms(),t.deltaX,t.deltaY);for(const[n,{direction:r,zoom:l}]of ig(a))this.updateAxisZoom(n,r,l);o.updateTooltip(cg)}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMaxZoom(t){return br(t,ag())}isZoomValid(t){const{minVisibleItems:e,minVisibleItemsX:i,minVisibleItemsY:o,ctx:{zoomManager:s}}=this;if(e===0)return!0;const a=this.getZoom(),n=$c(ee(t))<$c(ee(a)),r=$c(qe(t))<$c(qe(a));return!n&&!r?!0:i!=null&&n?s.isVisibleItemsCountAtLeast(t,i):o!=null&&r?s.isVisibleItemsCountAtLeast(t,o):s.isVisibleItemsCountAtLeast(t,e)}isAxisZoomValid(t,e){const{minVisibleItems:i,minVisibleItemsX:o,minVisibleItemsY:s,ctx:{zoomManager:a}}=this,n=this.getZoom(),r=e.max-e.min,l=n[t].max-n[t].min,c={...n,[t]:e},h=t===ra.X?o:s;return r>=l||a.isVisibleItemsCountAtLeast(c,h??i)}resetZoom(){this.ctx.zoomManager.resetZoom("zoom")}updateZoom(t){this.enableIndependentAxes?this.updatePrimaryAxisZooms(t):this.updateUnifiedZoom(t)}updateUnifiedZoom(t){return this.isZoomValid(t)?(this.ctx.zoomManager.updateZoom("zoom",t),!0):(this.ctx.updateService.update(Ub.SCENE_RENDER,{skipAnimations:!0}),!1)}updatePrimaryAxisZooms(t){this.updatePrimaryAxisZoom(t,ra.X),this.updatePrimaryAxisZoom(t,ra.Y)}updatePrimaryAxisZoom(t,e){const i=this.ctx.zoomManager.getPrimaryAxisId(e);i!=null&&this.updateAxisZoom(i,e,t[e])}updateAxisZoom(t,e,i){const{enableIndependentAxes:o,ctx:{zoomManager:s}}=this;if(!i)return!1;const a=this.getZoom();return o!==!0?(a[e]=i,this.updateUnifiedZoom(a)):this.isAxisZoomValid(e,i)?(s.updateAxisZoom("zoom",t,i),!0):!1}toggleAxisDraggingCursors(){const{anchorPointX:t,anchorPointY:e,domProxy:i}=this,o=this.getZoom();let s=ee(o)!==oa,a=qe(o)!==oa;if(!s){const n=Hc(o,.999,1);n.x=Qe(n.x,o.x,t),s=this.isZoomValid(n)}if(!a){const n=Hc(o,1,.999);n.y=Qe(n.y,o.y,e),a=this.isZoomValid(n)}i.toggleAxisDraggingCursor(ra.X,s),i.toggleAxisDraggingCursor(ra.Y,a)}getZoom(){return ye(this.ctx.zoomManager.getZoom())}getResetZoom(){return ye(this.ctx.zoomManager.getRestoredZoom())}getModuleProperties(t){return{anchorPointX:t?.anchorPointX??this.getAnchorPointX(),anchorPointY:t?.anchorPointY??this.getAnchorPointY(),enabled:t?.enabled??this.enabled,independentAxes:t?.independentAxes??this.enableIndependentAxes===!0,isScalingX:t?.isScalingX??this.isScalingX(),isScalingY:t?.isScalingY??this.isScalingY(),keepAspectRatio:t?.keepAspectRatio??this.keepAspectRatio,scrollingStep:t?.scrollingStep??this.scrollingStep}}};p([Yc({newValue(t){this.onEnabledChange(t)}}),Lt(co)],zt.prototype,"enabled",2),p([Lt(co)],zt.prototype,"enableAxisDragging",2),p([Lt(co)],zt.prototype,"enableDoubleClickToReset",2),p([Yc({changeValue(t){this.ctx.zoomManager.setIndependentAxes(!!t)}}),Lt(co,{optional:!0})],zt.prototype,"enableIndependentAxes",2),p([Lt(co)],zt.prototype,"enablePanning",2),p([Lt(co)],zt.prototype,"enableScrolling",2),p([Lt(co)],zt.prototype,"enableSelecting",2),p([Lt(co)],zt.prototype,"enableTwoFingerZoom",2),p([Lt(lg(["alt","ctrl","meta","shift"],"a pan key"))],zt.prototype,"panKey",2),p([Lt(lg(["x","y","xy"],"an axis"))],zt.prototype,"axes",2),p([Lt(rg)],zt.prototype,"scrollingStep",2),p([Lt(co)],zt.prototype,"keepAspectRatio",2),p([Lt(pE)],zt.prototype,"minVisibleItems",2),p([Yb("Use [minVisibleItems] instead."),Lt(Hb.restrict({min:1}))],zt.prototype,"minVisibleItemsX",2),p([Yb("Use [minVisibleItems] instead."),Lt(Hb.restrict({min:1}))],zt.prototype,"minVisibleItemsY",2),p([Lt(Gc)],zt.prototype,"anchorPointX",2),p([Lt(Gc)],zt.prototype,"anchorPointY",2),p([Lt(Kb)],zt.prototype,"autoScaling",2),p([Lt(Kb)],zt.prototype,"buttons",2),p([uE("panner.deceleration"),Lt(dE(rg,lg(["off","short","long"],"a deceleration")))],zt.prototype,"deceleration",2);var gE={enabled:!0,visible:"hover",buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out",section:"scale"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in",section:"scale"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left",section:"pan"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right",section:"pan"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset",section:"reset"}]},fE={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],moduleFactory:t=>new zt(t),themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:gE,enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,enableTwoFingerZoom:!0,deceleration:"short",minVisibleItems:2,panKey:"alt",scrollingStep:.1,autoScaling:{enabled:!1,padding:.05}}}};import"ag-charts-community";import{_ModuleSupport as yE}from"ag-charts-community";var{BOOLEAN:$b,OBJECT:mE,POSITION:xE,POSITIVE_NUMBER:pg,BaseProperties:SE,AxisTicks:bE,ZIndexMap:vE,ProxyProperty:dg,TempValidate:la,LayoutElement:DE,createId:ME,Group:kE,Rect:OE,Marker:TE,TranslatableGroup:AE,BBox:IE}=yE,ug=class extends SE{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};p([la(pg)],ug.prototype,"thickness",2),p([la(pg)],ug.prototype,"preferredLength",2);var Xc=class{constructor(t){this.axisTicks=t}};p([dg("axisTicks.label")],Xc.prototype,"label",2),p([dg("axisTicks.interval")],Xc.prototype,"interval",2),p([dg("axisTicks.padding")],Xc.prototype,"padding",2);var ca=class{constructor(t){this.ctx=t,this.id=ME(this),this.legendGroup=new AE({name:"legend",zIndex:vE.LEGEND}),this.gradientRect=new OE,this.arrow=new TE({shape:"triangle"}),this.ticksGroup=new kE({name:"legend-axis-group"}),this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new ug,this.spacing=20,this.data=[],this.highlightManager=t.highlightManager,this.axisTicks=new bE,this.axisTicks.attachAxis(this.ticksGroup),this.scale=new Xc(this.axisTicks),this.legendGroup.append([this.gradientRect,this.arrow,this.ticksGroup]),this.destroyFns.push(t.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange()),t.layoutManager.registerElement(DE.Legend,e=>this.onStartLayout(e)),()=>this.legendGroup.remove())}isVertical(){return this.position==="right"||this.position==="left"}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.appendChild(this.legendGroup)}onStartLayout(t){const[e]=this.data;if(!this.enabled||!e?.enabled||e.legendType!=="gradient"){this.legendGroup.visible=!1;return}const{colorRange:i}=this.normalizeColorArrays(e);this.updateGradientRect(t.layoutBox,i);const o=this.updateAxis(e)??new IE(0,0,0,0),{left:s,top:a}=this.getMeasurements(t.layoutBox,o);this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=s,this.legendGroup.translationY=a}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const[o,s]=e,a=i.length;return e=i.map((n,r)=>r===0?o:r===a-1?s:o+(s-o)*r/(a-1)),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{gradientRect:i}=this,{preferredLength:o,thickness:s}=this.gradient;let a;this.isVertical()?(a=0,i.width=s,i.height=Math.min(t.height,o)):(a=90,i.width=Math.min(t.width,o),i.height=s),i.fill={type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:e.map((n,r)=>({stop:r/(e.length-1),color:n})),rotation:a}}updateAxis(t){const{axisTicks:e}=this,i=this.isVertical(),o=this.reverseOrder!==i;return e.position=this.position,e.translationX=i?this.gradient.thickness:0,e.translationY=i?0:this.gradient.thickness,e.scale.domain=o?t.colorDomain.slice().reverse():t.colorDomain,e.scale.range=i?[0,this.gradientRect.height]:[0,this.gradientRect.width],e.calculateLayout()}updateArrow(){const t=this.highlightManager.getActiveHighlight(),{arrow:e}=this;if(t?.colorValue==null){e.visible=!1;return}const{scale:i,label:o}=this.axisTicks,s=o.fontSize??0,a=i.convert(t.colorValue);let{x:n,y:r}=this.gradientRect,l=Math.PI;this.isVertical()?(n-=s/2,r+=a,l/=2):(n+=a,r-=s/2),e.visible=!0,e.fill=o.color,e.rotation=l,e.size=s,e.translationX=n,e.translationY=r}getMeasurements(t,e){let{x:i,y:o}=t,{width:s,height:a}=this.gradientRect;switch(this.isVertical()?s+=e.width+5:a+=e.height+5,this.position){case"left":o+=t.height/2-a/2,t.shrink(s+this.spacing,"left");break;case"right":i+=t.width-s,o+=t.height/2-a/2,t.shrink(s+this.spacing,"right");break;case"top":i+=t.width/2-s/2,t.shrink(a+this.spacing,"top");break;case"bottom":i+=t.width/2-s/2,o+=t.height-a,t.shrink(a+this.spacing,"bottom")}return{top:o,left:i}}onChartHoverChange(){this.enabled&&this.updateArrow()}};ca.className="GradientLegend",p([la($b)],ca.prototype,"enabled",2),p([la(xE)],ca.prototype,"position",2),p([la($b)],ca.prototype,"reverseOrder",2),p([la(mE)],ca.prototype,"gradient",2),p([la(pg)],ca.prototype,"spacing",2);var NE={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient",moduleFactory:t=>new ca(t),themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}},interval:{minSpacing:15}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1},removable:"standalone-only"};import"ag-charts-community";import{createElement as CE}from"ag-charts-core";function LE(t,e){const i=t.addChild("canvas-overlay","watermark"),o=CE("span");o.innerText=e,i.addEventListener("animationend",()=>{t.removeChild("canvas-overlay","watermark"),t.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(o)}import{_ModuleSupport as RE}from"ag-charts-community";import{_ModuleSupport as wE}from"ag-charts-community";import{arrayOfDefs as Zc,boolean as Xb,callback as Zb,constant as vr,date as PE,fontOptionsDef as qb,number as Ri,or as EE,positiveNumber as Qb,ratio as wi,required as Dr,string as gg,union as qc}from"ag-charts-core";var{cartesianAxisLabelOptionsDefs:_E,cartesianAxisOptionsDefs:BE,cartesianAxisCrosshairOptions:zE,continuousAxisOptions:fg,commonAxisLabelOptionsDefs:Qc,commonAxisOptionsDefs:Jc,commonCrossLineOptionsDefs:th,commonCrossLineLabelOptionsDefs:Jb,numberFormatValidator:tv}=wE,FE={...BE,type:Dr(vr("ordinal-time")),paddingInner:wi,paddingOuter:wi,groupPaddingInner:wi,label:{..._E,format:gg},interval:fg(EE(Ri,PE),!0).interval,crosshair:zE(!0)},VE={...Jc,...fg(Ri),type:Dr(vr("angle-number")),crossLines:Zc(th),startAngle:Ri,endAngle:Ri,label:{...Qc,orientation:qc("fixed","parallel","perpendicular"),format:tv}},GE={innerRadiusRatio:wi},WE={...Jc,...GE,type:Dr(vr("angle-category")),shape:qc("polygon","circle"),crossLines:Zc(th),startAngle:Ri,endAngle:Ri,paddingInner:wi,groupPaddingInner:wi,label:{...Qc,orientation:qc("fixed","parallel","perpendicular")}},HE={...Jc,...fg(Ri),type:Dr(vr("radius-number")),shape:qc("polygon","circle"),positionAngle:Ri,innerRadiusRatio:wi,crossLines:Zc({...th,label:{...Jb,positionAngle:Ri}},"cross-line options"),title:{enabled:Xb,text:gg,spacing:Qb,formatter:Zb,...qb},label:{...Qc,format:tv}},KE={...Jc,type:Dr(vr("radius-category")),positionAngle:Ri,innerRadiusRatio:wi,paddingInner:wi,paddingOuter:wi,groupPaddingInner:wi,label:Qc,crossLines:Zc({...th,label:{...Jb,positionAngle:Ri}},"cross-line options"),title:{enabled:Xb,text:gg,spacing:Qb,formatter:Zb,...qb}},UE={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:FE,create:t=>new Nl(t)},YE={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:VE,create:t=>new Ps(t)},jE={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:WE,create:t=>new $o(t)},$E={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:HE,create:t=>new Ya(t)},XE={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:KE,create:t=>new Xo(t)};import{_ModuleSupport as ZE}from"ag-charts-community";import{_ModuleSupport as qE}from"ag-charts-community";var{Chart:QE,TempValidate:JE,ARRAY:t_}=qE;function e_(t){return t.type==="sankey"||t.type==="chord"}var eh=class extends QE{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const t=this.getOptions();this.nodes!==t.nodes&&(this.nodes=t.nodes);const{nodes:e}=this;this.series.forEach(i=>{e_(i)&&i.setChartNodes(e)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s,e.visible=this.series.some(a=>a.visible);for(const a of[e,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:s,paddedRect:s}})}};eh.className="FlowProportionChart",eh.type="flow-proportion",p([JE(t_,{optional:!0})],eh.prototype,"nodes",2);var{isAgFlowProportionChartOptions:i_,flowProportionChartOptionsDefs:o_}=ZE,s_={type:"chart",name:"flow-proportion",enterprise:!0,options:o_,detect:i_,create(t,e){return new eh(t,e)}};import{_ModuleSupport as a_}from"ag-charts-community";import{_ModuleSupport as n_}from"ag-charts-community";var{Chart:r_}=n_,yg=class extends r_{getChartType(){return"gauge"}performLayout(t){const{seriesRoot:e,annotationRoot:i,series:o,seriesArea:s}=this,{layoutBox:a}=t,n=a.clone();a.shrink(s.padding.toJson()),this.seriesRect=n.clone().translate(n.x-a.x,n.y-a.y),this.animationRect=a,e.visible=o.some(r=>r.visible);for(const r of[e,i])r.translationX=Math.floor(a.x),r.translationY=Math.floor(a.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:n,paddedRect:a}})}getAriaLabel(){const t=[],e=this.getCaptionText();e.length!==0&&t.push(e);for(const o of this.series)t.push(o.getCaptionText());const i=t.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};yg.className="GaugeChart",yg.type="gauge";var{isAgGaugeChartOptions:l_,gaugeChartOptionsDefs:c_}=a_,h_={type:"chart",name:"gauge",enterprise:!0,options:c_,detect:l_,create(t,e){return new yg(t,e)}};import{_ModuleSupport as p_}from"ag-charts-community";import{_ModuleSupport as d_}from"ag-charts-community";var{Chart:u_}=d_,mg=class extends u_{getChartType(){return"hierarchy"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s;for(const a of[e,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);e.visible=this.series[0].visible,e.setClipRect(s.clone()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:s,paddedRect:s}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};mg.className="HierarchyChart",mg.type="hierarchy";var{isAgHierarchyChartOptions:g_,hierarchyChartOptionsDefs:f_}=p_,y_={type:"chart",name:"hierarchy",enterprise:!0,options:f_,detect:g_,create(t,e){return new mg(t,e)}};import{_ModuleSupport as m_}from"ag-charts-community";import{_ModuleSupport as x_}from"ag-charts-community";var{Chart:S_}=x_,xg=class extends S_{getChartType(){return"standalone"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s;for(const a of[e,i])a.translationX=Math.floor(o.x),a.translationY=Math.floor(o.y);e.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:s,paddedRect:o}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};xg.className="StandaloneChart",xg.type="standalone";var{isAgStandaloneChartOptions:b_,standaloneChartOptionsDefs:v_}=m_,D_={type:"chart",name:"standalone",enterprise:!0,options:v_,detect:b_,create(t,e){return new xg(t,e)}};import{_ModuleSupport as M_}from"ag-charts-community";import{_ModuleSupport as k_}from"ag-charts-community";import{_ModuleSupport as O_}from"ag-charts-community";import{isFiniteNumber as T_}from"ag-charts-core";function ev(t){return Array.isArray(t)&&t.length>=2&&t.every(T_)}function ih(t){return Array.isArray(t)&&t.length>=2&&t.every(ev)}var iv=.001;function A_(t){return Math.abs(t[0][0]-t[t.length-1][0])<iv&&Math.abs(t[0][1]-t[t.length-1][1])<iv}function ov(t){return Array.isArray(t)&&t.every(ih)&&t.every(A_)}function sv(t){if(t===null)return!0;if(typeof t!="object"||t.type==null)return!1;const{type:e,coordinates:i}=t;switch(e){case"GeometryCollection":return Array.isArray(t.geometries)&&t.geometries.every(sv);case"MultiPolygon":return Array.isArray(i)&&i.every(ov);case"Polygon":return ov(i);case"MultiLineString":return Array.isArray(i)&&i.every(ih);case"LineString":return ih(i);case"MultiPoint":return ih(i);case"Point":return ev(i)}}function I_(t){return t!==null&&typeof t=="object"&&t.type==="Feature"&&sv(t.geometry)}function N_(t){return t!==null&&typeof t=="object"&&t.type==="FeatureCollection"&&Array.isArray(t.features)&&t.features.every(I_)}var Sn=O_.predicateWithMessage(N_,"a GeoJSON object"),{Chart:C_,MercatorScale:av,NumberAxis:nv,TempValidate:L_}=k_;function rv(t){return t.type==="map-shape"||t.type==="map-line"||t.type==="map-marker"||t.type==="map-shape-background"||t.type==="map-line-background"}var oh=class extends C_{constructor(t,e){super(t,e),this.xAxis=new nv(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new nv(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const t=this.getOptions();this.topology!==t.topology&&(this.topology=t.topology);const{topology:e}=this;this.series.forEach(i=>{rv(i)&&i.setChartTopology(e)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s;const a=this.series.filter(rv),n=a.reduce((c,h)=>{if(!h.visible)return c;const d=h.topologyBounds;return d==null?c:c==null?d:(c.merge(d),c)},void 0);let r;if(n!=null){const{lon0:c,lat0:h,lon1:d,lat1:u}=n,g=[[c,h],[d,u]],f=av.bounds(g),{width:y,height:m}=s,x=Math.min(y/f.width,m/f.height),v=f.width*x,S=f.height*x,b=(y-v)/2,D=(m-S)/2,I=b,M=D,k=b+v,A=D+S,O=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),N=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),T=(k-I)/(O.max-O.min),L=I-T*O.min,C=(A-M)/(1-N.min-(1-N.max)),P=M-C*(1-N.max);r=new av(g,[[L,P],[L+T,P+C]])}a.forEach(c=>{c.scale=r});const l=this.series.some(c=>c.visible);e.visible=l;for(const c of[e,i])c.translationX=Math.floor(s.x),c.translationY=Math.floor(s.y),c.setClipRect(s.clone());this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:l,rect:s,paddedRect:s}})}};oh.className="TopologyChart",oh.type="topology",p([L_(Sn,{optional:!0})],oh.prototype,"topology",2);var{isAgTopologyChartOptions:R_,topologyChartOptionsDefs:w_}=M_,P_={type:"chart",name:"topology",enterprise:!0,options:w_,detect:R_,create(t,e){return new oh(t,e)}};import{_ModuleSupport as E_}from"ag-charts-community";import{array as __,arrayOf as sh,arrayOfDefs as lv,boolean as Y,callback as B_,color as cv,constant as hv,fillOptionsDef as ze,fontOptionsDef as Pi,lineDashOptionsDef as Sg,number as fs,optionsDefs as ah,or as ys,positiveNumber as Mr,ratio as nh,required as z_,string as Je,strokeOptionsDef as Rt,typeUnion as F_,union as Ei}from"ag-charts-core";var{toolbarButtonOptionsDefs:rh}=E_,kr={enabled:Y,axesButtons:{enabled:Y,axes:Ei("x","y","xy")},toolbar:{enabled:Y,padding:Mr,buttons:lv({...rh,value:Ei("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:Y,buttons:sh(ys(ah({...rh,value:Ei("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings")}),ah({...rh,value:Ei("lock"),checkedOverrides:rh})))}};kr.data=__,kr.xKey=Je,kr.volumeKey=Je,kr.snap=Y;var Or=ah({__type:z_(hv("date")),value:ys(Je,fs)},"a serializable date object"),pv=ys(Je,fs,Or),bg=ys(pv,ah({value:pv,groupPercentage:fs})),dv={enabled:Y,cornerRadius:Mr,formatter:B_,...Pi,...ze,...Rt,...Sg},ms={label:Je,position:Ei("top","center","bottom"),alignment:Ei("left","center","right"),...Pi},uv={label:Je,position:Ei("top","inside","bottom"),alignment:Ei("left","center","right"),...Pi},me={...ze,...Rt,...Sg},gt={x:bg,y:fs},_i={lineStyle:Ei("solid","dashed","dotted"),...Sg},gv={visible:Y,extendStart:Y,extendEnd:Y,locked:Y,text:ms,handle:me,label:Pi,showFill:Y,isMultiColor:Y,strokes:sh(cv),rangeStroke:cv,bands:Ei(4,6,10),...Rt,..._i},V_=F_({line:{visible:Y,extendStart:Y,extendEnd:Y,locked:Y,text:ms,handle:me,start:gt,end:gt,...Rt,..._i},"horizontal-line":{visible:Y,locked:Y,value:bg,axisLabel:dv,text:ms,handle:me,...Rt,..._i},"vertical-line":{visible:Y,locked:Y,value:bg,axisLabel:dv,text:ms,handle:me,...Rt,..._i},"disjoint-channel":{visible:Y,extendStart:Y,extendEnd:Y,locked:Y,startHeight:Mr,endHeight:Mr,text:uv,handle:me,start:gt,end:gt,background:ze,...Rt,..._i},"parallel-channel":{visible:Y,extendStart:Y,extendEnd:Y,locked:Y,height:Mr,text:uv,handle:me,start:gt,end:gt,background:ze,middle:{visible:Y,...Rt,..._i},...Rt,..._i},"fibonacci-retracement":{reverse:Y,start:gt,end:gt,...gv},"fibonacci-retracement-trend-based":{reverse:Y,start:gt,end:gt,endRetracement:gt,...gv},callout:{visible:Y,locked:Y,text:Je,handle:me,start:gt,end:gt,...Pi,...ze,...Rt},comment:{visible:Y,locked:Y,text:Je,handle:me,...gt,...Pi,...ze},note:{visible:Y,locked:Y,text:Je,handle:me,background:{...ze,...Rt},...gt,...Pi,...ze,...Rt},text:{visible:Y,locked:Y,text:Je,handle:me,...gt,...Pi,...ze},arrow:{visible:Y,extendStart:Y,extendEnd:Y,locked:Y,text:ms,handle:me,start:gt,end:gt,...Rt,..._i},"arrow-up":{visible:Y,locked:Y,handle:me,...gt,...ze},"arrow-down":{visible:Y,locked:Y,handle:me,...gt,...ze},"date-range":{visible:Y,extendAbove:Y,extendBelow:Y,locked:Y,text:ms,handle:me,start:gt,end:gt,statistics:{divider:Rt,...Pi,...ze,...Rt},...Rt,..._i},"price-range":{visible:Y,extendLeft:Y,extendRight:Y,locked:Y,text:ms,handle:me,start:gt,end:gt,statistics:{divider:Rt,...Pi,...ze,...Rt},...Rt,..._i},"date-price-range":{visible:Y,locked:Y,text:ms,handle:me,start:gt,end:gt,statistics:{divider:Rt,...Pi,...ze,...Rt},...Rt,..._i}}),G_={chartType:Ei("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:sh(V_),legend:lv({visible:Y,seriesId:Je,itemId:Je,legendItemName:Je},"legend state array"),zoom:{rangeX:{start:ys(fs,Or),end:ys(fs,Or)},rangeY:{start:ys(fs,Or),end:ys(fs,Or)},ratioX:{start:nh,end:nh},ratioY:{start:nh,end:nh},autoScaledAxes:sh(hv("y"))}};import{_ModuleSupport as W_}from"ag-charts-community";import{array as H_,arrayOf as K_,boolean as Tr,callback as U_,color as lh,fontOptionsDef as Y_,number as fv,positiveNumber as xi,ratio as j_,typeUnion as $_}from"ag-charts-core";import{_ModuleSupport as X_}from"ag-charts-community";import{_ModuleSupport as vg}from"ag-charts-community";function Z_(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function q_(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}import{_ModuleSupport as yv}from"ag-charts-community";import{Logger as Q_}from"ag-charts-core";var{ScalableGroup:J_,Rect:Ar,Line:Ir,BBox:tB,Selection:mv,applyShapeFillBBox:eB}=yv,iB=class extends J_{constructor(){super(),this.append([new Ar({tag:0}),new Ar({tag:2}),new Ar({tag:1}),new Ir({tag:3}),new Ir({tag:3}),new Ir({tag:4}),new Ir({tag:4})])}updateDatumStyles(t,e,i,o,s){const{bandwidth:a,scaledValues:{xValue:n,medianValue:r}}=t;let{minValue:l,q1Value:c,q3Value:h,maxValue:d}=t.scaledValues;(i&&!o||!i&&o)&&([d,h,c,l]=[l,c,h,d]);const u=(_,F,V,G)=>i?{y:_,x:F,width:G,height:V}:{x:_,y:F,width:V,height:G},g=(_,F,V)=>i?{y1:_,y2:F,x:V}:{x1:_,x2:F,y:V},f=(_,F,V)=>i?{x1:F,x2:V,y:_}:{x:_,y1:F,y2:V},y=(_,F,V,G)=>({x:_,y:F,width:V,height:G}=u(_,F,V,G),new tB(_,F,V,G)),{fill:m,fillOpacity:x,stroke:v,strokeWidth:S,strokeOpacity:b,lineDash:D,lineDashOffset:I,cornerRadius:M,cap:k,whisker:A}=e,O=mv.select(this,Ar),[N]=O.selectByTag(0),[T]=O.selectByTag(2),[L]=O.selectByTag(1),C=O.selectByTag(3),P=O.selectByTag(4);A.strokeWidth>a&&(A.strokeWidth=a);const R=u(c,n,h-c,a);T.setProperties(R),N.setProperties(R),N.setProperties({cornerRadius:M});const E=Math.max(Math.round(r-S/2),c+S),z=Math.min(Math.round(r+S/2),h-S);L.setProperties(R),L.setProperties({visible:E<z,cornerRadius:M,clipBBox:y(E,n+S,z-E,Math.max(0,a-S*2))});const w=Math.floor(n+a*(1-k.lengthRatio)/2),B=Math.ceil(n+a*(1+k.lengthRatio)/2);P[0].setProperties(f(l,w,B)),P[1].setProperties(f(d,w,B)),C[0].setProperties(g(Math.round(l+A.strokeWidth/2),c,Math.floor(n+a/2))),C[1].setProperties(g(h,Math.round(d-A.strokeWidth/2),Math.floor(n+a/2))),eB(N,m,s),N.setProperties({fill:m,fillOpacity:x,strokeWidth:S*2,strokeOpacity:0}),L.setProperties({fill:v,fillOpacity:b,strokeWidth:0});for(const _ of[...C,...P])_.setProperties(A);T.setProperties({stroke:v,strokeWidth:S,strokeOpacity:b,lineDash:D,lineDashOffset:I,cornerRadius:M,fillOpacity:0})}distanceSquared(t,e){const i=mv.selectByClass(this,Ar,Ir);return yv.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(Q_.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}};import{_ModuleSupport as oB}from"ag-charts-community";var{BaseProperties:xv,FillGradientDefaults:sB,FillPatternDefaults:aB,AbstractBarSeriesProperties:nB,SeriesTooltip:rB,TempValidate:rt,COLOR_STRING:Dg,FUNCTION:lB,LINE_DASH:Sv,OBJECT:Nr,POSITIVE_NUMBER:Cr,RATIO:ch,STRING:ti,mergeDefaults:cB,COLOR_GRADIENT:hB,COLOR_PATTERN:pB,OR:dB}=oB,bv=class extends xv{constructor(){super(...arguments),this.lengthRatio=.5}};p([rt(ch)],bv.prototype,"lengthRatio",2);var bn=class extends xv{};p([rt(Dg,{optional:!0})],bn.prototype,"stroke",2),p([rt(Cr)],bn.prototype,"strokeWidth",2),p([rt(ch)],bn.prototype,"strokeOpacity",2),p([rt(Sv,{optional:!0})],bn.prototype,"lineDash",2),p([rt(Cr)],bn.prototype,"lineDashOffset",2);var dt=class extends nB{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new sB,this.fillPatternDefaults=new aB,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new bv,this.whisker=new bn,this.tooltip=new rB}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}=this,a=super.toJson();return a.whisker=cB(a.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}),a}};p([rt(ti)],dt.prototype,"xKey",2),p([rt(ti)],dt.prototype,"minKey",2),p([rt(ti)],dt.prototype,"q1Key",2),p([rt(ti)],dt.prototype,"medianKey",2),p([rt(ti)],dt.prototype,"q3Key",2),p([rt(ti)],dt.prototype,"maxKey",2),p([rt(ti,{optional:!0})],dt.prototype,"xName",2),p([rt(ti,{optional:!0})],dt.prototype,"yName",2),p([rt(ti,{optional:!0})],dt.prototype,"minName",2),p([rt(ti,{optional:!0})],dt.prototype,"q1Name",2),p([rt(ti,{optional:!0})],dt.prototype,"medianName",2),p([rt(ti,{optional:!0})],dt.prototype,"q3Name",2),p([rt(ti,{optional:!0})],dt.prototype,"maxName",2),p([rt(dB(hB,pB,Dg))],dt.prototype,"fill",2),p([rt(Nr)],dt.prototype,"fillGradientDefaults",2),p([rt(Nr)],dt.prototype,"fillPatternDefaults",2),p([rt(ch)],dt.prototype,"fillOpacity",2),p([rt(Dg)],dt.prototype,"stroke",2),p([rt(Cr)],dt.prototype,"strokeWidth",2),p([rt(ch)],dt.prototype,"strokeOpacity",2),p([rt(Sv)],dt.prototype,"lineDash",2),p([rt(Cr)],dt.prototype,"lineDashOffset",2),p([rt(Cr)],dt.prototype,"cornerRadius",2),p([rt(lB,{optional:!0})],dt.prototype,"itemStyler",2),p([rt(Nr)],dt.prototype,"cap",2),p([rt(Nr)],dt.prototype,"whisker",2),p([rt(Nr)],dt.prototype,"tooltip",2);var{extractDecoratedProperties:vv,fixNumericExtent:uB,keyProperty:gB,mergeDefaults:Mg,SeriesNodePickMode:Dv,SMALLEST_KEY_INTERVAL:fB,valueProperty:Lr,diff:yB,animationValidation:mB,computeBarFocusBounds:xB,createDatumId:Mv,ContinuousScale:SB,ChartAxisDirection:kv,motion:Ov,isGradientFill:bB,getShapeStyle:Rr}=vg,vB=class extends vg.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.minKey=o.properties.minKey,this.q1Key=o.properties.q1Key,this.medianKey=o.properties.medianKey,this.q3Key=o.properties.q3Key,this.maxKey=o.properties.maxKey}},hh=class extends vg.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[Dv.NEAREST_NODE,Dv.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new dt,this.NodeEvent=vB}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,minKey:i,q1Key:o,medianKey:s,q3Key:a,maxKey:n}=this.properties,r=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:h,xScaleType:d,yScaleType:u}=this.getScaleInformation({xScale:l,yScale:c}),g=[];r&&this.processedData&&g.push(yB(this.id,this.processedData)),r&&g.push(mB());const{processedData:f}=await this.requestDataModel(t,this.data,{props:[gB(e,d,{id:"xValue"}),Lr(i,u,{id:"minValue"}),Lr(o,u,{id:"q1Value"}),Lr(s,u,{id:"medianValue"}),Lr(a,u,{id:"q3Value"}),Lr(n,u,{id:"maxValue"}),...h?[fB]:[],...g]});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];if(t!==this.getBarDirection()){const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[s];return a.type==="key"&&a.valueType==="category"?n:this.padBandExtent(n)}const o=this.domainForClippedRange(kv.Y,["minValue","maxValue"],"xValue",!0);return uB(o)}getSeriesRange(t,e){return this.domainForVisibleRange(kv.Y,["maxValue","minValue"],"xValue",e,!0)}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&o&&s))return;const{xKey:a,fill:n,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:d,lineDashOffset:u,cap:g,whisker:f}=this.properties,y=[],m=e.resolveKeysById(this,"xValue",i),x=e.resolveColumnById(this,"minValue",i),v=e.resolveColumnById(this,"q1Value",i),S=e.resolveColumnById(this,"medianValue",i),b=e.resolveColumnById(this,"q3Value",i),D=e.resolveColumnById(this,"maxValue",i),{barWidth:I,groupIndex:M}=this.updateGroupScale(o),k=SB.is(o.scale)?I*-.5:0,{groupScale:A}=this,O=this.isVertical(),N={itemId:a,nodeData:y,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&(i.dataSources.get(this.id)??[]).forEach((L,C)=>{const P=m[C];if(P==null)return;const R=x[C],E=v[C],z=S[C],w=b[C],B=D[C];if([R,E,z,w,B].some(Q=>typeof Q!="number")||R>E||E>z||z>w||w>B)return;const _={xValue:Math.round(o.scale.convert(P)),minValue:Math.round(s.scale.convert(R)),q1Value:Math.round(s.scale.convert(E)),medianValue:Math.round(s.scale.convert(z)),q3Value:Math.round(s.scale.convert(w)),maxValue:Math.round(s.scale.convert(B))};_.xValue+=Math.round(A.convert(String(M)))+k;const F=Math.round(I),V=Math.abs(_.q3Value-_.q1Value),G=_.xValue+F/2,W=Math.min(_.q3Value,_.q1Value)+V/2,K={x:O?G:W,y:O?W:G};let $;O?$={x:K.x-F/2,y:_.minValue,width:F,height:_.maxValue-_.minValue}:$={x:_.minValue,y:K.y-F/2,width:_.maxValue-_.minValue,height:F},y.push({series:this,itemId:P,datum:L,datumIndex:C,xKey:a,bandwidth:F,scaledValues:_,cap:g,whisker:f,fill:n,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:d,lineDashOffset:u,midPoint:K,focusRect:$})}),N}legendItemSymbol(){const{fill:t,fillOpacity:e,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,fillGradientDefaults:r,fillPatternDefaults:l}=this.properties;return{marker:Rr({fill:t,fillOpacity:e,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n},r,l)}}getLegendData(t){const{id:e,ctx:{legendManager:i},visible:o}=this,{xKey:s,yName:a,showInLegend:n,legendItemName:r}=this.properties;return!s||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:o&&i.getItemEnabled({seriesId:e,itemId:e}),label:{text:r??a??e},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!n}]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:d,q3Key:u,q3Name:g,minKey:f,minName:y,maxKey:m,maxName:x,legendItemName:v,tooltip:S}=s,b=this.getCategoryAxis(),D=this.getValueAxis();if(!i||!o||!b||!D)return;const I=o.dataSources.get(this.id)?.[t],M=i.resolveKeysById(this,"xValue",o)[t],k=i.resolveColumnById(this,"minValue",o)[t],A=i.resolveColumnById(this,"q1Value",o)[t],O=i.resolveColumnById(this,"medianValue",o)[t],N=i.resolveColumnById(this,"q3Value",o)[t],T=i.resolveColumnById(this,"maxValue",o)[t];if(M==null)return;const L=this.getItemBaseStyle(!1);return Object.assign(L,this.getItemStyleOverrides(String(t),I,L,!1)),S.formatTooltip(this.properties,{heading:b.formatDatum(M),title:v??r,symbol:this.legendItemSymbol(),data:[{label:y,fallbackLabel:f,value:D.formatDatum(k)},{label:d,fallbackLabel:h,value:D.formatDatum(A)},{label:c,fallbackLabel:l,value:D.formatDatum(O)},{label:g,fallbackLabel:u,value:D.formatDatum(N)},{label:x,fallbackLabel:m,value:D.formatDatum(T)}]},{seriesId:e,datum:I,title:r,xKey:a,xName:n,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:d,q3Key:u,q3Name:g,minKey:f,minName:y,maxKey:m,maxName:x,...L})}animateEmptyUpdateReady({datumSelection:t}){const e=this.isVertical(),{from:i,to:o}=Z_(e);Ov.resetMotion([t],q_(e)),Ov.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],i,o,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,cap:o,whisker:s,fillGradientDefaults:a,fillPatternDefaults:n}=e,r=t?e.highlightStyle.item:void 0,l=this.getStrokeWidth(e.strokeWidth);return Rr({fill:r?.fill??e.fill,fillOpacity:r?.fillOpacity??e.fillOpacity,stroke:r?.stroke??e.stroke,strokeWidth:r?.strokeWidth??l,strokeOpacity:r?.strokeOpacity??e.strokeOpacity,lineDash:r?.lineDash??e.lineDash??[],lineDashOffset:r?.lineDashOffset??e.lineDashOffset,cornerRadius:i,cap:o,whisker:s},a,n)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{xKey:n,minKey:r,q1Key:l,medianKey:c,q3Key:h,maxKey:d,fillGradientDefaults:u,fillPatternDefaults:g,itemStyler:f}=a;if(f==null)return;const y=this.cachedDatumCallback(Mv(t,o?"highlight":"node"),()=>this.callWithContext(f,{seriesId:s,datum:e,xKey:n,minKey:r,q1Key:l,medianKey:c,q3Key:h,maxKey:d,highlighted:o,...i}));return Rr(y,u,g)}updateDatumNodes({datumSelection:t,isHighlight:e}){const i=this.isVertical(),o=this.getValueAxis()?.isReversed(),{highlightStyle:s}=this.properties;t.each((a,n)=>{let r=this.getFormattedStyles(n,e?"highlight":"node");e&&(r=Mg(s.item,r));const{stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:d,lineDashOffset:u}=r;r.whisker=Mg(r.whisker,{stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:d,lineDashOffset:u});const g=this.getShapeFillBBox();a.updateDatumStyles(n,r,i,o,g)})}updateLabelNodes(){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}nodeFactory(){return new iB}getFormattedStyles(t,e){const{id:i,properties:o}=this,{xKey:s,minKey:a,q1Key:n,medianKey:r,q3Key:l,maxKey:c,itemStyler:h,cornerRadius:d,fillGradientDefaults:u,fillPatternDefaults:g}=o,{datum:f,stroke:y,strokeWidth:m,strokeOpacity:x,lineDash:v,lineDashOffset:S,cap:b,whisker:D}=t;let I,M=1;bB(t.fill)?I=t.fill:(I=t.fill,M=o.fillOpacity);let k=Rr({fill:I,fillOpacity:M,stroke:y,strokeWidth:m,strokeOpacity:x,lineDash:v,lineDashOffset:S,cornerRadius:d,cap:vv(b),whisker:vv(D)},u,g);if(h){const A=this.cachedDatumCallback(Mv(f.index,e),()=>this.callWithContext(h,{datum:f,seriesId:i,highlighted:e==="highlight",...k,xKey:s,minKey:a,q1Key:n,medianKey:r,q3Key:l,maxKey:c}));A&&(k=Rr(Mg(A,k),u,g))}return k}computeFocusBounds({datumIndex:t}){return xB(this,this.contextNodeData?.nodeData[t].focusRect)}};hh.className="BoxPlotSeries",hh.type="box-plot";import{_ModuleSupport as DB}from"ag-charts-community";import{boolean as Tv,callback as MB,constant as kB,fillOptionsDef as OB,lineDashOptionsDef as Av,positiveNumber as TB,ratio as AB,required as ha,string as Fe,strokeOptionsDef as Iv,union as IB}from"ag-charts-core";var{commonSeriesOptionsDefs:NB,tooltipOptionsDefs:CB}=DB,LB={type:ha(kB("box-plot")),xKey:ha(Fe),minKey:ha(Fe),q1Key:ha(Fe),medianKey:ha(Fe),q3Key:ha(Fe),maxKey:ha(Fe),xName:Fe,yName:Fe,minName:Fe,q1Name:Fe,medianName:Fe,q3Name:Fe,maxName:Fe,direction:IB("horizontal","vertical"),grouped:Tv,legendItemName:Fe,showInMiniChart:Tv,cornerRadius:TB,itemStyler:MB,whisker:{...Iv,...Av},cap:{lengthRatio:AB},tooltip:CB,...NB,...OB,...Iv,...Av};import{_ModuleSupport as kg}from"ag-charts-community";var{CARTESIAN_AXIS_TYPE:Nv}=kg.ThemeConstants,RB={series:{direction:"vertical",fill:{$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]}]},{$palette:"fill"},{$mix:[kg.SAFE_FILL_OPERATION,{$ref:"backgroundColor"},.7]}]},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:kg.FILL_PATTERN_DEFAULTS,strokeWidth:2},axes:{[Nv.NUMBER]:{crosshair:{snap:!1}},[Nv.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},wB={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:t=>new hh(t),tooltipDefaults:{range:"exact"},defaultAxes:X_.DIRECTION_SWAP_AXES,themeTemplate:RB,groupable:!0},Cv={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:LB,create:t=>new hh(t)};import{_ModuleSupport as PB}from"ag-charts-community";import{_ModuleSupport as EB}from"ag-charts-community";import{_ModuleSupport as Og}from"ag-charts-community";import{Logger as Lv}from"ag-charts-core";import{_ModuleSupport as _B}from"ag-charts-community";var{findMinMax:BB}=_B,re=0,Te=1,Ve=2,Ge=3,ei=4;function wr(t,e=1){let i=Math.ceil(Math.log2(t.length/e))-1;return i=Math.min(Math.max(i,0),16),2**i|0}function Pr(t){return BB(t.map(e=>Number(e)))}function ph(t,e,i){return(t.valueOf()-e)/(i-e)}function dh(t,e){return Math.min(Math.floor(t*e),e-1)*ei|0}function Er(t,e,i,o,s,a){const n=new Int32Array(a*ei).fill(-1),r=new Float64Array(a*ei).fill(NaN);for(let l=0;l<t.length;l+=1){const c=t[l],h=e[l],d=i[l];if(c==null||h==null||d==null)continue;const u=ph(c,o,s),g=h.valueOf(),f=d.valueOf(),y=dh(u,a),m=n[y+re]===-1;(m||u<r[y+re])&&(n[y+re]=l,r[y+re]=u),(m||u>r[y+Te])&&(n[y+Te]=l,r[y+Te]=u),(m||f<r[y+Ve])&&(n[y+Ve]=l,r[y+Ve]=f),(m||g>r[y+Ge])&&(n[y+Ge]=l,r[y+Ge]=g)}return{indexData:n,valueData:r}}function _r(t,e,i,{inPlace:o=!1}={}){const s=i/2|0,a=o?t:new Int32Array(s*ei),n=o?e:new Float64Array(s*ei);for(let r=0;r<s;r+=1){const l=r*ei|0,c=l*2|0,h=c+ei|0,d=t[h+re]===-1,u=d||e[c+re]<e[h+re]?c:h;a[l+re]=t[u+re],n[l+re]=e[u+re];const g=d||e[c+Te]>e[h+Te]?c:h;a[l+Te]=t[g+Te],n[l+Te]=e[g+Te];const f=d||e[c+Ve]<e[h+Ve]?c:h;a[l+Ve]=t[f+Ve],n[l+Ve]=e[f+Ve];const y=d||e[c+Ge]>e[h+Ge]?c:h;a[l+Ge]=t[y+Ge],n[l+Ge]=e[y+Ge]}return{maxRange:s,indexData:a,valueData:n}}var zB=1e3,Rv=re,FB=Ge,VB=Ve,wv=Te;function GB(t,e,i,o){if(t.length<zB)return;const[s,a]=Pr(o);let n=wr(t),{indexData:r,valueData:l}=Er(t,e,i,s,a,n);const c=[{maxRange:n,indexData:r}];for(;n>64;)({indexData:r,valueData:l,maxRange:n}=_r(r,l,n)),c.push({maxRange:n,indexData:r});return c.reverse(),c}var{fixNumericExtent:WB,keyProperty:HB,createDatumId:Pv,SeriesNodePickMode:Ev,ChartAxisDirection:Tg,SMALLEST_KEY_INTERVAL:KB,valueProperty:uh,diff:UB,animationValidation:YB,computeBarFocusBounds:jB,visibleRangeIndices:_v,ContinuousScale:$B,OrdinalTimeScale:XB,BandScale:ZB,getShapeStyle:Ag}=Og,qB=class extends Og.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.openKey=o.properties.openKey,this.closeKey=o.properties.closeKey,this.highKey=o.properties.highKey,this.lowKey=o.properties.lowKey}},Bv=class extends Og.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[Ev.AXIS_ALIGNED,Ev.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=qB,this.dataAggregationFilters=void 0}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,openKey:i,closeKey:o,highKey:s,lowKey:a}=this.properties,n=!this.ctx.animationManager.isSkipped(),r=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:h,yScaleType:d}=this.getScaleInformation({xScale:r,yScale:l}),u=[];n&&(this.processedData&&u.push(UB(this.id,this.processedData)),u.push(YB())),i&&u.push(uh(i,d,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:g,processedData:f}=await this.requestDataModel(t,this.data,{props:[HB(e,h,{id:"xValue"}),uh(o,d,{id:"closeValue"}),uh(s,d,{id:"highValue"}),uh(a,d,{id:"lowValue"}),...c?[KB]:[],...u]});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(g,f),this.animationState.transition("updateData")}aggregateData(t,e){const i=this.axes[Tg.X];if(i==null||!($B.is(i.scale)||XB.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"highValue",e),a=t.resolveColumnById(this,"lowValue",e),{index:n}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[n];return GB(o,s,a,r)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];if(t!==this.getBarDirection()){const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[s];return a.type==="key"&&a.valueType==="category"?n:this.padBandExtent(n)}const o=this.domainForClippedRange(Tg.Y,["highValue","lowValue"],"xValue",!0);return WB(o)}getSeriesRange(t,e){return this.domainForVisibleRange(Tg.Y,["highValue","lowValue"],"xValue",e,!0)}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["highValue","lowValue"],t,e,i)}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&o&&s))return;const a=[],{xKey:n,highKey:r,lowKey:l}=this.properties,c=i.dataSources.get(this.id)??[],h=e.resolveKeysById(this,"xValue",i),d=e.resolveColumnById(this,"openValue",i),u=e.resolveColumnById(this,"closeValue",i),g=e.resolveColumnById(this,"highValue",i),f=e.resolveColumnById(this,"lowValue",i),{groupScale:y}=this,{barWidth:m,groupIndex:x}=this.updateGroupScale(o),v=y.convert(String(x)),S=m>=1?m:y.rawBandwidth,b=ZB.is(o.scale),D={itemId:n,nodeData:a,labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!t)return D;const I=(C,P,R,E,z,w,B,_)=>{const F=c[C],V=b?B/2:0,G=o.scale.convert(P)+v+V,W=s.scale.convert(R),K=s.scale.convert(E),$=s.scale.convert(z),Q=s.scale.convert(w),J=E>R,tt=J?"up":"down",q=Math.min($,Q),Z=Math.max($,Q)-q,lt={x:G,y:q+Z/2};a.push({series:this,itemId:tt,datum:F,datumIndex:C,xKey:n,xValue:P,openValue:R,closeValue:E,highValue:z,lowValue:w,midPoint:lt,aggregatedValue:E,isRising:J,centerX:G,width:B,y:q,height:Z,yOpen:W,yClose:K,crisp:_})},{dataAggregationFilters:M}=this,k=o.scale,[A,O]=k.range,N=O-A,T=C=>k.convert(h[C])+v,L=M?.find(C=>C.maxRange>N);if(L==null){let[C,P]=_v(c.length,o.range,R=>{const E=T(R);return[E,E+S]});i.input.count<1e3&&(C=0,P=i.input.count);for(let R=C;R<P;R+=1){const E=h[R];if(E==null)continue;const z=d[R],w=u[R],B=g[R],_=f[R],F=_!=null&&_<=z&&_<=w,V=B!=null&&B>=z&&B>=w;if(!F){Lv.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!V){Lv.warnOnce(`invalid high value for key [${r}] in data element, high value cannot be lower than datum open or close values.`);continue}I(R,E,z,w,B,_,S,!0)}}else{const{maxRange:C,indexData:P}=L,[R,E]=_v(C,o.range,z=>{const w=z*ei,B=P[w+Rv],_=P[w+wv];if(B!==-1)return[T(B),T(_)+S]});for(let z=R;z<E;z+=1){const w=z*ei,B=P[w+Rv],_=P[w+wv],F=P[w+FB],V=P[w+VB];if(B===-1)continue;const G=(B+_)/2|0,W=h[G];if(W==null)continue;const K=d[B],$=u[_],Q=g[F],J=f[V],tt=Math.abs(T(_)-T(B))+S;I(G,W,K,$,Q,J,tt,!1)}}return D}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}updateLabelNodes(t){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}getItemBaseStyle(t,e){const{properties:i}=this,o=i.item[t],s=e?i.highlightStyle.item:void 0,a={fill:s?.fill??o.fill,fillOpacity:s?.fillOpacity??o.fillOpacity,stroke:s?.stroke??o.stroke,strokeWidth:s?.strokeWidth??o.strokeWidth,strokeOpacity:s?.strokeOpacity??o.strokeOpacity,lineDash:s?.lineDash??o.lineDash,lineDashOffset:s?.lineDashOffset??o.lineDashOffset};return o.fillGradientDefaults&&o.fillPatternDefaults?Ag(a,o.fillGradientDefaults,o.fillPatternDefaults):a}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:n}=this,r=n.item[i],{itemStyler:l}=n;if(l==null)return;const{xKey:c,openKey:h,closeKey:d,highKey:u,lowKey:g}=n,f=this.cachedDatumCallback(Pv(t,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:a,datum:e,itemId:i,xKey:c,openKey:h,closeKey:d,highKey:u,lowKey:g,highlighted:s,...o}));return r.fillGradientDefaults&&r.fillPatternDefaults?Ag(f,r.fillGradientDefaults,r.fillPatternDefaults):f}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yName:r,openKey:l,openName:c,highKey:h,highName:d,lowKey:u,lowName:g,closeKey:f,closeName:y,legendItemName:m,tooltip:x}=s,v=this.getCategoryAxis(),S=this.getValueAxis();if(!i||!o||!v||!S)return;const b=o.dataSources.get(this.id)?.[t],D=i.resolveKeysById(this,"xValue",o)[t],I=i.resolveColumnById(this,"openValue",o)[t],M=i.resolveColumnById(this,"highValue",o)[t],k=i.resolveColumnById(this,"lowValue",o)[t],A=i.resolveColumnById(this,"closeValue",o)[t];if(D==null)return;const O=A>=I?"up":"down",N=this.properties.item[O],T=this.getItemBaseStyle(O,!1);Object.assign(T,this.getItemStyleOverrides(String(t),b,O,T,!1));let L={fill:N.fill??N.stroke,fillOpacity:N.fillOpacity??N.strokeOpacity??1,stroke:N.stroke,strokeWidth:N.strokeWidth??1,strokeOpacity:N.strokeOpacity??1,lineDash:N.lineDash??[0],lineDashOffset:N.lineDashOffset??0};return N.fillGradientDefaults&&N.fillPatternDefaults&&(L=Ag(L,N.fillGradientDefaults,N.fillPatternDefaults)),x.formatTooltip(this.properties,{heading:v.formatDatum(D),title:m,symbol:{marker:L},data:[{label:c,fallbackLabel:l,value:S.formatDatum(I)},{label:d,fallbackLabel:h,value:S.formatDatum(M)},{label:g,fallbackLabel:u,value:S.formatDatum(k)},{label:y,fallbackLabel:f,value:S.formatDatum(A)}]},{seriesId:e,datum:b,title:r,itemId:O,xKey:a,xName:n,yName:r,openKey:l,openName:c,highKey:h,highName:d,lowKey:u,lowName:g,closeKey:f,closeName:y,...T})}getDatumId(t){return Pv(t.xValue)}computeFocusBounds(t){const e=this.getNodeData()?.at(t.datumIndex);if(e==null)return;const{centerX:i,y:o,width:s,height:a}=e,n={x:i-s/2,y:o,width:s,height:a};return jB(this,n)}};import{_ModuleSupport as QB}from"ag-charts-community";import{_ModuleSupport as JB}from"ag-charts-community";var{Path:tz,ScenePathChangeDetection:xs,BBox:ez}=JB,ho=class extends tz{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:t,y:e,width:i,height:o}=this;return new ez(t-i/2,e,i,o)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:t,width:e,height:i,crisp:o,strokeAlignment:s}=this;let{centerX:a,yOpen:n,yClose:r}=this,l=a-e/2,c=a+e/2,h=t,d=t+i;if(o&&e>1){a=this.align(a),n=this.align(n),r=this.align(r);const g=this.align(e/2);l=a-g,c=a+g,h=this.align(t),d=h+this.align(h,i)}const u=(h+d)/2;return a+=s,l+=s,c+=s,h-=s,d+=s,n+=n<u?s:-s,r+=r<u?s:-s,{centerX:a,x0:l,x1:c,y0:h,y1:d,yOpen:n,yClose:r}}executeStroke(t,e){const{width:i,strokeWidth:o}=this;i<o&&(t.lineWidth=i),super.executeStroke(t,e)}};p([xs()],ho.prototype,"centerX",2),p([xs()],ho.prototype,"y",2),p([xs()],ho.prototype,"width",2),p([xs()],ho.prototype,"height",2),p([xs()],ho.prototype,"yOpen",2),p([xs()],ho.prototype,"yClose",2),p([xs()],ho.prototype,"crisp",2),p([xs()],ho.prototype,"strokeAlignment",2);var iz=class extends ho{updatePath(){const{path:t}=this,{centerX:e,x0:i,x1:o,y0:s,y1:a,yOpen:n,yClose:r}=this.alignedCoordinates();t.clear(),t.moveTo(e,s),t.lineTo(e,a),Math.abs(o-i)>1&&(t.moveTo(i,n),t.lineTo(e,n),t.moveTo(e,r),t.lineTo(o,r))}},{ScenePathChangeDetection:Br,ExtendedPath2D:oz,BBox:sz}=QB,vn=class extends ho{constructor(){super(...arguments),this.wickPath=new oz,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}computeDefaultGradientFillBBox(){const{width:t,centerX:e,yOpen:i,yClose:o}=this,s=Math.min(i,o),n=Math.max(i,o)-s,r=e-t/2,l=e+t/2;return new sz(r,s,l-r,n)}updatePath(){const{path:t,stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,wickStroke:n,wickStrokeWidth:r,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:h,strokeAlignment:d}=this,{centerX:u,x0:g,x1:f,y0:y,y1:m,yOpen:x,yClose:v}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const b=n!=null&&n!==e||r!=null&&r!==i||l!=null&&l!==o||c!=null&&c!==s||h!=null&&h!==a?this.wickPath:t;if(Math.abs(f-g)<=3){b.moveTo(u,y),b.lineTo(u,m);return}const D=Math.min(x,v),I=Math.max(x,v);b.moveTo(u,y),b.lineTo(u,D+i/2),b.moveTo(u,m),b.lineTo(u,I-i/2);const M=d+i/2,k=I-D-2*M;if(k>0)t.rect(g+M,D+M,f-g-2*M,k);else{const A=(D+I)/2;t.moveTo(g,A),t.lineTo(f,A)}}drawPath(t){super.drawPath(t);const{wickPath:e}=this;if(e.isEmpty())return;const{stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,wickStroke:r=i,wickStrokeWidth:l=o,wickStrokeOpacity:c=s,wickLineDash:h=a,wickLineDashOffset:d=n}=this;l!==0&&(t.globalAlpha*=c,typeof r=="string"&&(t.strokeStyle=r),t.lineWidth=l,h!=null&&t.setLineDash(h),t.lineDashOffset=d,t.stroke(e.getPath2D()))}};p([Br()],vn.prototype,"wickStroke",2),p([Br()],vn.prototype,"wickStrokeWidth",2),p([Br()],vn.prototype,"wickStrokeOpacity",2),p([Br()],vn.prototype,"wickLineDash",2),p([Br()],vn.prototype,"wickLineDashOffset",2);import{_ModuleSupport as az}from"ag-charts-community";import{_ModuleSupport as nz}from"ag-charts-community";var{BaseProperties:zv,TempValidate:Ft,AbstractBarSeriesProperties:rz,SeriesTooltip:lz,STRING:Bi,COLOR_STRING:cz,FUNCTION:hz,LINE_DASH:pz,OBJECT:gh,POSITIVE_NUMBER:Fv,RATIO:dz}=nz,pa=class extends zv{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([Ft(cz)],pa.prototype,"stroke",2),p([Ft(Fv)],pa.prototype,"strokeWidth",2),p([Ft(dz)],pa.prototype,"strokeOpacity",2),p([Ft(pz)],pa.prototype,"lineDash",2),p([Ft(Fv)],pa.prototype,"lineDashOffset",2);var Ig=class extends zv{constructor(){super(...arguments),this.up=new pa,this.down=new pa}};p([Ft(gh)],Ig.prototype,"up",2),p([Ft(gh)],Ig.prototype,"down",2);var ii=class extends rz{};p([Ft(Bi)],ii.prototype,"xKey",2),p([Ft(Bi)],ii.prototype,"openKey",2),p([Ft(Bi)],ii.prototype,"closeKey",2),p([Ft(Bi)],ii.prototype,"highKey",2),p([Ft(Bi)],ii.prototype,"lowKey",2),p([Ft(Bi,{optional:!0})],ii.prototype,"xName",2),p([Ft(Bi,{optional:!0})],ii.prototype,"yName",2),p([Ft(Bi,{optional:!0})],ii.prototype,"openName",2),p([Ft(Bi,{optional:!0})],ii.prototype,"closeName",2),p([Ft(Bi,{optional:!0})],ii.prototype,"highName",2),p([Ft(Bi,{optional:!0})],ii.prototype,"lowName",2);var fh=class extends ii{constructor(){super(...arguments),this.tooltip=new lz,this.item=new Ig}};p([Ft(gh)],fh.prototype,"tooltip",2),p([Ft(gh)],fh.prototype,"item",2),p([Ft(hz,{optional:!0})],fh.prototype,"itemStyler",2);var{FillGradientDefaults:uz,FillPatternDefaults:gz,BaseProperties:Ng,SeriesTooltip:fz,TempValidate:Vt,COLOR_STRING:Cg,FUNCTION:yz,LINE_DASH:Vv,OBJECT:da,POSITIVE_NUMBER:zr,RATIO:Lg,COLOR_GRADIENT:mz,COLOR_PATTERN:xz,OR:Sz}=az,Dn=class extends Ng{};p([Vt(Cg,{optional:!0})],Dn.prototype,"stroke",2),p([Vt(zr)],Dn.prototype,"strokeWidth",2),p([Vt(Lg)],Dn.prototype,"strokeOpacity",2),p([Vt(Vv,{optional:!0})],Dn.prototype,"lineDash",2),p([Vt(zr)],Dn.prototype,"lineDashOffset",2);var oi=class extends Ng{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new uz,this.fillPatternDefaults=new gz,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Dn}};p([Vt(Sz(mz,xz,Cg))],oi.prototype,"fill",2),p([Vt(da)],oi.prototype,"fillGradientDefaults",2),p([Vt(da)],oi.prototype,"fillPatternDefaults",2),p([Vt(Lg)],oi.prototype,"fillOpacity",2),p([Vt(Cg)],oi.prototype,"stroke",2),p([Vt(zr)],oi.prototype,"strokeWidth",2),p([Vt(Lg)],oi.prototype,"strokeOpacity",2),p([Vt(Vv)],oi.prototype,"lineDash",2),p([Vt(zr)],oi.prototype,"lineDashOffset",2),p([Vt(zr)],oi.prototype,"cornerRadius",2),p([Vt(da)],oi.prototype,"wick",2);var Rg=class extends Ng{constructor(){super(...arguments),this.up=new oi,this.down=new oi}};p([Vt(da)],Rg.prototype,"up",2),p([Vt(da)],Rg.prototype,"down",2);var yh=class extends ii{constructor(){super(...arguments),this.item=new Rg,this.tooltip=new fz}};p([Vt(da)],yh.prototype,"item",2),p([Vt(da)],yh.prototype,"tooltip",2),p([Vt(yz,{optional:!0})],yh.prototype,"itemStyler",2);var{createDatumId:bz,isGradientFill:Gv,isPatternFill:wg,applyShapeFillBBox:vz,getShapeFill:Wv,getShapeStyle:Pg}=EB,mh=class extends Bv{constructor(){super(...arguments),this.properties=new yh}nodeFactory(){return new vn}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:o}=this,{xKey:s,highKey:a,lowKey:n,openKey:r,closeKey:l,item:c,itemStyler:h}=o,{up:d,down:u}=c,g=Pg({fill:d.fill,fillOpacity:d.fillOpacity,stroke:d.stroke,strokeWidth:d.strokeWidth,strokeOpacity:d.strokeOpacity,lineDash:d.lineDash,lineDashOffset:d.lineDashOffset},d.fillGradientDefaults,d.fillPatternDefaults),f=Pg({fill:u.fill,fillOpacity:u.fillOpacity,stroke:u.stroke,strokeWidth:u.strokeWidth,strokeOpacity:u.strokeOpacity,lineDash:u.lineDash,lineDashOffset:u.lineDashOffset},u.fillGradientDefaults,u.fillPatternDefaults),y=e?o.highlightStyle.item:void 0;t.each((m,x)=>{const{isRising:v,centerX:S,width:b,y:D,height:I,yOpen:M,yClose:k,crisp:A}=x;let O;if(h!=null){const{fill:P,fillOpacity:R,stroke:E,strokeWidth:z,strokeOpacity:w,lineDash:B,lineDashOffset:_}=v?g:f;O=Pg(this.cachedDatumCallback(bz(this.getDatumId(x),e?"highlight":"node"),()=>this.callWithContext(h,{seriesId:i,itemId:x.itemId,xKey:s,highKey:a,lowKey:n,openKey:r,closeKey:l,datum:x.datum,fill:P,fillOpacity:R,strokeOpacity:w,stroke:E,strokeWidth:z,lineDash:B,lineDashOffset:_,highlighted:e})),v?d.fillGradientDefaults:u.fillGradientDefaults,v?d.fillPatternDefaults:u.fillPatternDefaults)}m.centerX=S,m.width=b,m.y=D,m.height=I,m.yOpen=M,m.yClose=k,m.crisp=A;const N=v?g:f,T=v?d.wick:u.wick,L=y?.fill??O?.fill??N.fill;vz(m,L,this.getShapeFillBBox()),m.fill=y?.fill??O?.fill??N.fill,m.fillOpacity=y?.fillOpacity??O?.fillOpacity??N.fillOpacity,m.stroke=y?.stroke??O?.stroke??N.stroke,m.strokeWidth=y?.strokeWidth??O?.strokeWidth??N.strokeWidth,m.strokeOpacity=y?.strokeOpacity??O?.strokeOpacity??N.strokeOpacity,m.lineDash=y?.lineDash??O?.lineDash??N.lineDash,m.lineDashOffset=y?.lineDashOffset??O?.lineDashOffset??N.lineDashOffset;const C=O?.wick;m.wickStroke=y?.stroke??C?.stroke??T.stroke,m.wickStrokeWidth=y?.strokeWidth??C?.strokeWidth??T.strokeWidth,m.wickStrokeOpacity=y?.strokeOpacity??C?.strokeOpacity??T.strokeOpacity,m.wickLineDash=y?.lineDash??C?.lineDash??T.lineDash,m.wickLineDashOffset=y?.lineDashOffset??C?.lineDashOffset??T.lineDashOffset,m.strokeAlignment=(O?.strokeWidth??N.strokeWidth)/2})}legendItemSymbol(){const{up:t,down:e}=this.properties.item,i=Wv(t.fill,t.fillGradientDefaults,t.fillPatternDefaults),o=Gv(i)?i.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:wg(i)?t.stroke:i,stop:0},{color:wg(i)?t.stroke:i,stop:.5}],s=Wv(e.fill,e.fillGradientDefaults,e.fillPatternDefaults),a=Gv(s)?s.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:wg(s)?e.stroke:s,stop:.5}],n={type:"gradient",gradient:"linear",rotation:90,colorStops:[...o,...a],reverse:!1},r={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:t.stroke,stop:0},{color:t.stroke,stop:.5},{color:e.stroke,stop:.5}],reverse:!1};return{marker:{fill:n,fillOpacity:t.fillOpacity,stroke:r,strokeWidth:t.strokeWidth??1,strokeOpacity:t.strokeOpacity??1,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset}}}getLegendData(t){const{id:e,data:i,visible:o,ctx:{legendManager:s}}=this,{xKey:a,yName:n,showInLegend:r,legendItemName:l}=this.properties;return!i?.length||!a||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:o&&s.getItemEnabled({seriesId:e,itemId:e}),label:{text:l??n??e},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!r}]}};mh.className="CandleStickSeries",mh.type="candlestick";import{_ModuleSupport as Dz}from"ag-charts-community";import{boolean as Hv,callback as Mz,constant as kz,fillOptionsDef as Oz,lineDashOptionsDef as Kv,number as Tz,positiveNumber as Az,required as Mn,string as zi,strokeOptionsDef as Uv}from"ag-charts-core";var{commonSeriesOptionsDefs:Iz,tooltipOptionsDefs:Nz}=Dz,Yv={cornerRadius:Az,wick:{...Uv,...Kv},...Oz,...Uv,...Kv},Eg={type:Mn(kz("candlestick")),xKey:Mn(zi),openKey:Mn(zi),highKey:Mn(zi),lowKey:Mn(zi),closeKey:Mn(zi),xName:zi,yName:zi,openName:zi,highName:zi,lowName:zi,closeName:zi,item:{up:Yv,down:Yv},itemStyler:Mz,showInMiniChart:Hv,tooltip:Nz,...Iz};Eg.pickOutsideVisibleMinorAxis=Hv,Eg.focusPriority=Tz;import{_ModuleSupport as jv}from"ag-charts-community";var{CARTESIAN_AXIS_TYPE:$v}=jv.ThemeConstants;function Xv(t){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},t==="up"?"transparent":{$palette:"fill"},{$palette:`${t}.fill`}]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${t}.stroke`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${t}.fill`}]},{$isPattern:[{$palette:`${t}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${t}.fill`}]}]},[{$mix:[{$palette:`${t}.fill`},"black",.15]},{$mix:[{$palette:`${t}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:jv.FILL_PATTERN_DEFAULTS}}var Cz={series:{item:{up:Xv("up"),down:Xv("down")},highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[$v.NUMBER]:{crosshair:{snap:!1}},[$v.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:Zv,CARTESIAN_POSITION:qv}=PB.ThemeConstants,Lz={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:t=>new mh(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:Zv.NUMBER,position:qv.LEFT},{type:Zv.ORDINAL_TIME,position:qv.BOTTOM}],themeTemplate:Cz,groupable:!1},Qv={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:Eg,create:t=>new mh(t)};import{_ModuleSupport as Rz}from"ag-charts-community";import{_ModuleSupport as _g}from"ag-charts-community";import{Logger as wz}from"ag-charts-core";import{_ModuleSupport as Pz}from"ag-charts-community";import{Logger as Ez,findMaxValue as Jv}from"ag-charts-core";var{CachedTextMeasurerPool:tD,TextUtils:eD,TextWrapper:xh}=Pz;function _z(t,e){const{fontSize:i,minimumFontSize:o=i}=t,{fontSize:s,minimumFontSize:a=s}=e,n=i-o,r=s-a;let l=t.fontSize,c=e.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:s}];for(;l>o||c>a;){const d=n>0?(l-o)/n:-1,u=r>0?(c-a)/r:-1;d>u?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function kn(t,e){return t.lineHeight!=null&&t.fontSize!=null?t.lineHeight*e/t.fontSize:eD.getLineHeight(e)}function iD(t,e,i,o,{padding:s},a){const{spacing:n=0}=e,r=2*s,l=2*s+n,c=(e.minimumFontSize??e.fontSize)+(o.minimumFontSize??o.fontSize);if(c>a(c+l,!1).height-l)return;const h=_z(e,o),d={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},u={fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight};let g,f;return Jv(0,h.length-1,y=>{const{labelFontSize:m,secondaryLabelFontSize:x}=h[y],v=y===0,S=kn(e,m),b=kn(o,x),D=a(S+b+l,v),I=D.width-r,M=D.height-l;if(S+b>M||((g==null||g.fontSize!==m)&&(d.fontSize=m,g=sD(e,t,I,M,d,e.wrapping,v?e.overflowStrategy:"hide")),g==null||g.width>I||g.height>M)||((f==null||f.fontSize!==x)&&(u.fontSize=x,f=sD(o,i,I,M,u,o.wrapping,v?o.overflowStrategy:"hide")),f==null))return;const k=g.height+f.height;if(!(f.width>I||k>M))return{width:Math.max(g.width,f.width),height:k+n,meta:D.meta,label:g,secondaryLabel:f}})}function Fr(t,e,{padding:i},o){const s=2*i,a=Math.min(e.minimumFontSize??e.fontSize,e.fontSize),n={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return Jv(a,e.fontSize,r=>{const l=kn(e,r),c=r===a,h=o(l+s,c),d=h.width-s,u=h.height-s;if(l>u)return;n.fontSize=r;const g=xh.wrapLines(t,{maxWidth:d,maxHeight:u,font:n,textWrap:e.wrapping,overflow:(c?e.overflowStrategy:void 0)??"hide"});if(!g.length)return;const f=Bz(g,{lineHeight:l,font:n,maxWidth:d,maxHeight:u});if(f)return[{fontSize:r,lineHeight:l,...f},h.meta]})}function oD(t){return t?.minimumFontSize!=null&&t?.fontSize!=null&&t?.minimumFontSize>t?.fontSize}function Bg(t,e,i,o,s,a){const n=e.enabled?t:void 0,r=o.enabled?i:void 0;(oD(e)||oD(o))&&Ez.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;n!=null&&r!=null&&(l=iD(n,e,r,o,s,a));let c;if(l==null&&n!=null&&(c=Fr(n,e,s,a)),c!=null){const[d,u]=c;l={width:d.width,height:d.height,meta:u,label:d,secondaryLabel:void 0}}let h;if(l==null&&n==null&&r!=null&&(h=Fr(r,o,s,a)),h!=null){const[d,u]=h;l={width:d.width,height:d.height,meta:u,label:void 0,secondaryLabel:d}}return l}function sD(t,e,i,o,s,a,n){const r=xh.wrapLines(e,{maxWidth:i,maxHeight:o,font:s,textWrap:a,overflow:n});if(!r.length)return;const l=kn(t,s.fontSize),{width:c}=tD.measureLines(r,{font:s});return{width:c,lineHeight:l,text:r.join(`
`),height:r.length*l,fontSize:s.fontSize}}function Bz(t,{font:e,lineHeight:i=eD.defaultLineHeight,maxWidth:o,maxHeight:s=1/0}){let a=i*t.length;for(;a>s;){if(t.length===1)return;t.pop(),t[t.length-1]=xh.appendEllipsis(t.at(-1)),a=i*t.length}const n=tD.measureLines(t,{font:e});let r,l;if(n.width>o){const c=[];l=0;for(const h of n.lineMetrics){if(h.width>o){if(!c.length)return;break}c.push(h.text),l=Math.max(l,h.width)}r=xh.appendEllipsis(c.join(`
`))}else r=t.join(`
`),l=n.width;return{text:r,width:l,height:a}}import{_ModuleSupport as zz}from"ag-charts-community";import{_ModuleSupport as aD}from"ag-charts-community";var{TempValidate:Vr,NUMBER:Fz,POSITIVE_NUMBER:nD,TEXT_WRAP:Vz,OVERFLOW_STRATEGY:Gz}=aD,On=class extends aD.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};p([Vr(Vz)],On.prototype,"wrapping",2),p([Vr(Gz)],On.prototype,"overflowStrategy",2),p([Vr(nD,{optional:!0})],On.prototype,"lineHeight",2),p([Vr(nD,{optional:!0})],On.prototype,"minimumFontSize",2);var po=class extends On{constructor(){super(...arguments),this.spacing=0}};p([Vr(Fz)],po.prototype,"spacing",2);var Gr=class extends On{},{CartesianSeriesProperties:Wz,SeriesTooltip:Hz,TempValidate:le,AND:Kz,ARRAY:Uz,COLOR_STRING:Yz,COLOR_STRING_ARRAY:jz,FUNCTION:$z,OBJECT:rD,POSITIVE_NUMBER:lD,RATIO:Xz,STRING:ua,TEXT_ALIGN:Zz,VERTICAL_ALIGN:qz}=zz,ie=class extends Wz{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new po,this.tooltip=new Hz}};p([le(ua,{optional:!0})],ie.prototype,"title",2),p([le(ua)],ie.prototype,"xKey",2),p([le(ua)],ie.prototype,"yKey",2),p([le(ua,{optional:!0})],ie.prototype,"colorKey",2),p([le(ua,{optional:!0})],ie.prototype,"xName",2),p([le(ua,{optional:!0})],ie.prototype,"yName",2),p([le(ua,{optional:!0})],ie.prototype,"colorName",2),p([le(Kz(jz,Uz.restrict({minLength:1})))],ie.prototype,"colorRange",2),p([le(Yz,{optional:!0})],ie.prototype,"stroke",2),p([le(Xz)],ie.prototype,"strokeOpacity",2),p([le(lD,{optional:!0})],ie.prototype,"strokeWidth",2),p([le(Zz)],ie.prototype,"textAlign",2),p([le(qz)],ie.prototype,"verticalAlign",2),p([le(lD)],ie.prototype,"itemPadding",2),p([le($z,{optional:!0})],ie.prototype,"itemStyler",2),p([le(rD)],ie.prototype,"label",2),p([le(rD)],ie.prototype,"tooltip",2);var{SeriesNodePickMode:cD,computeBarFocusBounds:Qz,getMissCount:Jz,valueProperty:zg,ChartAxisDirection:Si,DEFAULT_CARTESIAN_DIRECTION_KEYS:tF,DEFAULT_CARTESIAN_DIRECTION_NAMES:eF,createDatumId:iF,ColorScale:oF,Rect:sF,PointerEvents:aF,applyShapeStyle:nF}=_g,rF=class extends _g.CartesianSeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.colorKey=o.properties.colorKey}},lF={left:-.5,center:0,right:-.5},cF={top:-.5,middle:0,bottom:-.5},Sh=class extends _g.CartesianSeries{constructor(t){super({moduleCtx:t,directionKeys:tF,directionNames:eF,categoryKey:void 0,pickModes:[cD.NEAREST_NODE,cD.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new ie,this.NodeEvent=rF,this.colorScale=new oF}async processData(t){const e=this.axes[Si.X],i=this.axes[Si.Y];if(!e||!i||!this.properties.isValid()||!this.data?.length)return;const{xKey:o,yKey:s,colorRange:a,colorKey:n}=this.properties,r=this.axes[Si.X]?.scale,l=this.axes[Si.Y]?.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:l}),d=this.colorScale.type,{dataModel:u,processedData:g}=await this.requestDataModel(t,this.data,{props:[zg(o,c,{id:"xValue"}),zg(s,h,{id:"yValue"}),...n?[zg(n,d,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const f=u.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=g.domain.values[f],this.colorScale.range=a,this.colorScale.update()}}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=Jz(this,i.defs.values[o].missing);return!(s===0||s===a)}xCoordinateRange(t,e){const i=this.axes[Si.X].scale,o=e*(i.bandwidth??0)/2,s=i.convert(t)+o,a=e*(i.bandwidth??10);return[s,s+a]}yCoordinateRange(t,e){const i=this.axes[Si.Y].scale,o=e*(i.bandwidth??0)/2,s=i.convert(t[0])+o,a=e*(i.bandwidth??10);return[s,s+a]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===Si.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,visible:e,axes:i,dataModel:o,processedData:s}=this,a=i[Si.X],n=i[Si.Y];if(!(t&&o&&s&&e&&a&&n))return;if(a.type!=="category"||n.type!=="category"){wz.warnOnce(`Heatmap series expected axes to have "category" type, but received "${a.type}" and "${n.type}" instead.`);return}const{xKey:r,xName:l,yKey:c,yName:h,colorKey:d,colorName:u,textAlign:g,verticalAlign:f,itemPadding:y,label:m}=this.properties,x=o.resolveColumnById(this,"xValue",s),v=o.resolveColumnById(this,"yValue",s),S=d?o.resolveColumnById(this,"colorValue",s):void 0,b=a.scale,D=n.scale,I=(b.bandwidth??0)/2,M=(D.bandwidth??0)/2,k=[],A=[],O=b.bandwidth??10,N=D.bandwidth??10,T=(O-2*y)*lF[g],L=(N-2*y)*cF[f],C=()=>({width:O,height:N,meta:null});return(s.dataSources.get(this.id)??[]).forEach((R,E)=>{const z=x[E],w=v[E],B=b.convert(z)+I,_=D.convert(w)+M,F=S?.[E],V=F==null?void 0:this.getLabelText(m,{value:F,datum:R,colorKey:d,colorName:u,xKey:r,yKey:c,xName:l,yName:h}),G=Bg(V,this.properties.label,void 0,this.properties.label,{padding:y},C),W={x:B,y:_,size:0};if(k.push({series:this,itemId:c,datumIndex:E,yKey:c,xKey:r,xValue:z,yValue:w,colorValue:F,datum:R,point:W,width:O,height:N,midPoint:{x:B,y:_},missing:S!=null&&F==null}),G?.label!=null){const{text:K,fontSize:$,lineHeight:Q,height:J}=G.label,{fontStyle:tt,fontFamily:q,fontWeight:Z,color:lt}=this.properties.label,ht=W.x+T*(O-2*y),j=W.y+L*(N-2*y)-(G.height-J)*.5;A.push({series:this,itemId:c,datum:R,datumIndex:E,text:K,fontSize:$,lineHeight:Q,fontStyle:tt,fontFamily:q,fontWeight:Z,color:lt,textAlign:g,verticalAlign:f,x:ht,y:j})}}),{itemId:this.properties.yKey??this.id,nodeData:k,labelData:A,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new sF}update(t){return this.ctx.animationManager.skipCurrentBatch(),super.update(t)}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{fill:i?.fill,fillOpacity:i?.fillOpacity??1,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:n}=this,{xKey:r,yKey:l,colorRange:c,itemStyler:h}=n,d=this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):c[0];let u=o.fill==null?{fill:d}:void 0;if(h!=null){u??(u={});const g=this.cachedDatumCallback(iF(t,s?"highlight":"node"),()=>this.callWithContext(h,{seriesId:a,datum:e,xKey:r,yKey:l,highlighted:s,...o,fill:d}));Object.assign(u,g)}return u}updateDatumNodes(t){const{isHighlight:e}=t,i=this.axes[Si.X],[o,s]=i?.visibleRange??[],n=!(o!==0||s!==1),r=this.getItemBaseStyle(e);t.datumSelection.each((l,c)=>{const{datumIndex:h,colorValue:d,datum:u,point:g,width:f,height:y}=c,m=this.getItemStyleOverrides(String(h),u,d,r,e);l.crisp=n,l.x=Math.floor(g.x-f/2),l.y=Math.floor(g.y-y/2),l.width=Math.ceil(f),l.height=Math.ceil(y),nF(l,r,m)})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t,{enabled:o}=this.properties.label,s=o?e:[];return i.update(s)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=aF.None})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a,colorScale:n}=this,{xKey:r,xName:l,yKey:c,yName:h,colorKey:d,colorName:u,colorRange:g,title:f,legendItemName:y,tooltip:m}=a,x=s[Si.X],v=s[Si.Y];if(!i||!o||!x||!v)return;const S=o.dataSources.get(this.id)?.[t],b=i.resolveColumnById(this,"xValue",o)[t],D=i.resolveColumnById(this,"yValue",o)[t],I=d!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",o)[t]:void 0;if(b==null)return;const M=[];let k;I==null?k=g[0]:(k=n.convert(I),M.push({label:u,fallbackLabel:d,value:String(I)})),M.push({label:l,fallbackLabel:r,value:x.formatDatum(b)},{label:h,fallbackLabel:c,value:v.formatDatum(D)});const A=this.getItemBaseStyle(!1);Object.assign(A,this.getItemStyleOverrides(String(t),S,I,A,!1)),A.fill!=null&&(k=A.fill);const O=k!=null?{marker:{shape:"square",fill:k,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}}:void 0;return m.formatTooltip(this.properties,{title:f??y,symbol:O,data:M},{seriesId:e,datum:S,title:f,xKey:r,xName:l,yKey:c,yName:h,colorKey:d,colorName:u,...A})}getLegendData(t){return t!=="gradient"||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t];if(e===void 0)return;const{width:i,height:o,midPoint:s}=e,a={x:s.x-i/2,y:s.y-o/2,width:i,height:o};return Qz(this,a)}};Sh.className="HeatmapSeries",Sh.type="heatmap";import{_ModuleSupport as hF}from"ag-charts-community";import{arrayOf as pF,boolean as dF,callback as uF,color as gF,constant as fF,positiveNumber as yF,required as Fg,string as ga,strokeOptionsDef as mF,union as hD}from"ag-charts-core";var{commonSeriesOptionsDefs:xF,autoSizedLabelOptionsDefs:SF,tooltipOptionsDefs:bF}=hF,vF={type:Fg(fF("heatmap")),xKey:Fg(ga),yKey:Fg(ga),colorKey:ga,xName:ga,yName:ga,colorName:ga,colorRange:pF(gF),title:ga,textAlign:hD("left","center","right"),verticalAlign:hD("top","middle","bottom"),itemPadding:yF,itemStyler:uF,showInMiniChart:dF,label:SF,tooltip:bF,...xF,...mF};import{_ModuleSupport as DF}from"ag-charts-community";var MF={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$path:["./0",{$palette:"stroke"},{$palette:"strokes"}]}]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},DF.SAFE_RANGE2_OPERATION]},label:{enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:pD,CARTESIAN_POSITION:dD}}=Rz,kF={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:t=>new Sh(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:pD.CATEGORY,position:dD.LEFT},{type:pD.CATEGORY,position:dD.BOTTOM}],themeTemplate:MF},uD={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:vF,create:t=>new Sh(t)};import{_ModuleSupport as OF}from"ag-charts-community";import{_ModuleSupport as TF}from"ag-charts-community";var{createDatumId:AF}=TF,bh=class extends Bv{constructor(){super(...arguments),this.properties=new fh}nodeFactory(){return new iz}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:o}=this,{xKey:s,highKey:a,lowKey:n,openKey:r,closeKey:l,item:c,itemStyler:h}=o,{up:d,down:u}=c,{stroke:g,strokeWidth:f,strokeOpacity:y,lineDash:m,lineDashOffset:x}=d,{stroke:v,strokeWidth:S,strokeOpacity:b,lineDash:D,lineDashOffset:I}=u,M=e?o.highlightStyle.item:void 0;t.each((k,A)=>{const{isRising:O,centerX:N,width:T,y:L,height:C,yOpen:P,yClose:R,crisp:E}=A;let z;if(h!=null){const{stroke:w,strokeWidth:B,strokeOpacity:_,lineDash:F,lineDashOffset:V}=O?d:u;z=this.cachedDatumCallback(AF(this.getDatumId(A),e?"highlight":"node"),()=>this.callWithContext(h,{seriesId:i,itemId:A.itemId,xKey:s,highKey:a,lowKey:n,openKey:r,closeKey:l,datum:A.datum,strokeOpacity:_,stroke:w,strokeWidth:B,lineDash:F,lineDashOffset:V,highlighted:e}))}k.centerX=N,k.width=T,k.y=L,k.height=C,k.yOpen=P,k.yClose=R,k.crisp=E,k.stroke=M?.stroke??z?.stroke??(O?g:v),k.strokeWidth=M?.strokeWidth??z?.strokeWidth??(O?f:S),k.strokeOpacity=M?.strokeOpacity??z?.strokeOpacity??(O?y:b),k.lineDash=M?.lineDash??z?.lineDash??(O?m:D),k.lineDashOffset=M?.lineDashOffset??z?.lineDashOffset??(O?x:I),k.strokeAlignment=(z?.strokeWidth??(O?f:S))/2})}getLegendData(t){const{id:e,data:i,ctx:{legendManager:o},visible:s}=this,{xKey:a,yName:n,item:{up:r,down:l},showInLegend:c,legendItemName:h}=this.properties;if(!i?.length||!a||t!=="category")return[];const d={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:r.stroke,stop:0},{color:r.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:s&&o.getItemEnabled({seriesId:e,itemId:e}),label:{text:h??n??e},symbol:{marker:{fill:d,fillOpacity:r.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:h,hideInLegend:!c}]}};bh.className="ohlc",bh.type="ohlc";import{_ModuleSupport as IF}from"ag-charts-community";import{boolean as gD,callback as NF,constant as CF,lineDashOptionsDef as LF,number as RF,required as Tn,string as Fi,strokeOptionsDef as wF}from"ag-charts-core";var{commonSeriesOptionsDefs:PF,tooltipOptionsDefs:EF}=IF,fD={...wF,...LF},Vg={type:Tn(CF("ohlc")),xKey:Tn(Fi),openKey:Tn(Fi),highKey:Tn(Fi),lowKey:Tn(Fi),closeKey:Tn(Fi),xName:Fi,yName:Fi,openName:Fi,highName:Fi,lowName:Fi,closeName:Fi,showInMiniChart:gD,itemStyler:NF,item:{up:fD,down:fD},tooltip:EF,...PF};Vg.pickOutsideVisibleMinorAxis=gD,Vg.focusPriority=RF;var{CARTESIAN_AXIS_TYPE:vh,CARTESIAN_POSITION:yD}=OF.ThemeConstants,_F={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:t=>new bh(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:vh.NUMBER,position:yD.LEFT},{type:vh.ORDINAL_TIME,position:yD.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}}},axes:{[vh.NUMBER]:{crosshair:{snap:!1}},[vh.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},mD={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:Vg,create:t=>new bh(t)};import{_ModuleSupport as BF}from"ag-charts-community";import{_ModuleSupport as Dh}from"ag-charts-community";var zF=1e3;function xD(t,e,i,o,s,a){const n=t[a];if(n==null)return!1;const r=ph(n,e,i),l=dh(r,s);return a===o[l+Ge]}function SD(t,e,i,o,s,a){const n=t[a];if(n==null)return!1;const r=ph(n,e,i),l=dh(r,s);return a===o[l+Ve]}function FF(t,e,i,o){if(t.length<zF)return;const[s,a]=Pr(o);let n=wr(t);const{indexData:r,valueData:l}=Er(t,e,i,s,a,n);let c=[],h=[];for(let u=0;u<t.length;u+=1)xD(t,s,a,r,n,u)&&c.push(u),SD(t,s,a,r,n,u)&&h.push(u);const d=[{maxRange:n,topIndices:c,bottomIndices:h}];for(;n>64;)({maxRange:n}=_r(r,l,n,{inPlace:!0})),c=c.filter(xD.bind(null,t,s,a,r,n)),h=h.filter(SD.bind(null,t,s,a,r,n)),d.push({maxRange:n,topIndices:c,bottomIndices:h});return d.reverse(),d}import{_ModuleSupport as VF}from"ag-charts-community";var{CartesianSeriesProperties:GF,FillGradientDefaults:WF,FillPatternDefaults:HF,InterpolationProperties:KF,SeriesMarker:UF,SeriesTooltip:YF,TempValidate:St,BOOLEAN:jF,COLOR_STRING:bD,LINE_DASH:$F,OBJECT:fa,PLACEMENT:XF,POSITIVE_NUMBER:Gg,COLOR_GRADIENT:ZF,COLOR_PATTERN:qF,OR:QF,RATIO:vD,STRING:ya,DropShadow:JF,Label:tV}=VF,Wg=class extends tV{constructor(){super(...arguments),this.placement="outside",this.padding=6}};p([St(XF)],Wg.prototype,"placement",2),p([St(Gg)],Wg.prototype,"padding",2);var Ot=class extends GF{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new WF,this.fillPatternDefaults=new HF,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new KF,this.shadow=new JF().set({enabled:!1}),this.marker=new UF,this.label=new Wg,this.tooltip=new YF,this.connectMissingData=!1}};p([St(ya)],Ot.prototype,"xKey",2),p([St(ya)],Ot.prototype,"yLowKey",2),p([St(ya)],Ot.prototype,"yHighKey",2),p([St(ya,{optional:!0})],Ot.prototype,"xName",2),p([St(ya,{optional:!0})],Ot.prototype,"yName",2),p([St(ya,{optional:!0})],Ot.prototype,"yLowName",2),p([St(ya,{optional:!0})],Ot.prototype,"yHighName",2),p([St(QF(ZF,qF,bD))],Ot.prototype,"fill",2),p([St(fa)],Ot.prototype,"fillGradientDefaults",2),p([St(fa)],Ot.prototype,"fillPatternDefaults",2),p([St(vD)],Ot.prototype,"fillOpacity",2),p([St(bD)],Ot.prototype,"stroke",2),p([St(Gg)],Ot.prototype,"strokeWidth",2),p([St(vD)],Ot.prototype,"strokeOpacity",2),p([St($F)],Ot.prototype,"lineDash",2),p([St(Gg)],Ot.prototype,"lineDashOffset",2),p([St(fa)],Ot.prototype,"interpolation",2),p([St(fa)],Ot.prototype,"shadow",2),p([St(fa)],Ot.prototype,"marker",2),p([St(fa)],Ot.prototype,"label",2),p([St(fa)],Ot.prototype,"tooltip",2),p([St(jF)],Ot.prototype,"connectMissingData",2);import{_ModuleSupport as eV}from"ag-charts-community";var{CollapseMode:Mh,isScaleValid:DD,pairUpSpans:kh,prepareAreaFillAnimationFns:iV,plotInterpolatedLinePathStroke:An,prepareLinePathPropertyAnimation:oV,areScalingEqual:MD}=eV;function sV(t,e,i,o){const s=(l,c)=>{An(l,c,e.removed),An(l,c,i.removed)},a=(l,c)=>{An(l,c,e.moved),An(l,c,i.moved)},n=(l,c)=>{An(l,c,e.added),An(l,c,i.added)},r=oV(t,o);return{status:t,path:{addPhaseFn:n,updatePhaseFn:a,removePhaseFn:s},pathProperties:r}}function aV(t,e,i){const o=t.scales.x?.type==="category",s=e.scales.x?.type==="category";if(o!==s||!DD(t.scales.x)||!DD(e.scales.x))return;let a="updated";e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added");const n=kh({scales:t.scales,data:t.fillData.spans},{scales:e.scales,data:e.fillData.spans},Mh.Split);if(n==null)return;const r=kh({scales:t.scales,data:t.fillData.phantomSpans},{scales:e.scales,data:e.fillData.phantomSpans},Mh.Split);if(r==null)return;const l=kh({scales:t.scales,data:t.highStrokeData.spans},{scales:e.scales,data:e.highStrokeData.spans},Mh.Split);if(l==null)return;const c=kh({scales:t.scales,data:t.lowStrokeData.spans},{scales:e.scales,data:e.lowStrokeData.spans},Mh.Split);if(c==null)return;const h="fade",d=iV(a,n,r,h),u=sV(a,l,c,h),g=(i?.changed??!0)||!MD(t.scales.x,e.scales.x)||!MD(t.scales.y,e.scales.y)||a!=="updated";return{status:a,fill:d,stroke:u,hasMotion:g}}var{valueProperty:kD,keyProperty:nV,ChartAxisDirection:xe,mergeDefaults:rV,updateLabelNode:lV,fixNumericExtent:OD,buildResetPathFn:cV,resetLabelFn:hV,resetMarkerFn:pV,resetMarkerPositionFn:TD,pathSwipeInAnimation:dV,resetMotion:uV,markerSwipeScaleInAnimation:gV,seriesLabelFadeInAnimation:Hg,animationValidation:fV,diff:yV,updateClipPath:AD,computeMarkerFocusBounds:ID,plotAreaPathFill:mV,plotLinePathStroke:ND,interpolatePoints:CD,pathFadeInAnimation:LD,markerFadeInAnimation:RD,fromToMotion:wD,pathMotion:PD,extent:xV,createDatumId:SV,applyShapeFillBBox:bV,PointerEvents:Kg,Group:vV,BBox:DV,ContinuousScale:MV,OrdinalTimeScale:kV,findMinMax:OV,getShapeStyle:TV,getShapeFill:AV}=Dh,IV=class extends Dh.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},Oh=class extends Dh.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:["fill","stroke"],pickModes:[Dh.SeriesNodePickMode.AXIS_ALIGNED],directionKeys:{[xe.X]:["xKey"],[xe.Y]:["yLowKey","yHighKey"]},directionNames:{[xe.X]:["xName"],[xe.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:cV({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:hV,marker:(e,i)=>({...pV(e),...TD(e,i)})},clipFocusBox:!1}),this.properties=new Ot,this.NodeEvent=IV,this.dataAggregationFilters=void 0}async processData(t){if(!this.properties.isValid())return;const{xKey:e,yLowKey:i,yHighKey:o}=this.properties,s=this.axes[xe.X]?.scale,a=this.axes[xe.Y]?.scale,{xScaleType:n,yScaleType:r}=this.getScaleInformation({xScale:s,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(yV(this.id,this.processedData)),c&&l.push(fV());const{dataModel:h,processedData:d}=await this.requestDataModel(t,this.data,{props:[nV(e,n,{id:"xValue"}),kD(i,r,{id:"yLowValue"}),kD(o,r,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(h,d),this.animationState.transition("updateData")}aggregateData(t,e){const i=this.axes[xe.X];if(i==null||!(MV.is(i.scale)||kV.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"yHighValue",e),a=t.resolveColumnById(this,"yLowValue",e),{index:n}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[n];return FF(o,s,a,r)}xCoordinateRange(t){const e=this.axes[xe.X].scale.convert(t);return[e,e]}yCoordinateRange(t){const e=this.axes[xe.Y].scale.convert(t[0]);return[e,e]}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];const{domain:{keys:[o]}}=e;if(t===xe.X){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s.def.valueType==="category"?o:OD(xV(o))}else{const s=this.domainForClippedRange(xe.Y,["yHighValue","yLowValue"],"xValue",!0),a=OV(s);return OD(a)}}getSeriesRange(t,e){return this.domainForVisibleRange(xe.Y,["yHighValue","yLowValue"],"xValue",e,!0)}createNodeData(){const{data:t,dataModel:e,processedData:i,axes:o}=this,s=o[xe.X],a=o[xe.Y];if(!(t&&s&&a&&e&&i))return;const n=s.scale,r=a.scale,{xKey:l,yLowKey:c,yHighKey:h,connectMissingData:d,marker:u,interpolation:g}=this.properties,f=i.dataSources.get(this.id)??[],y=(n.bandwidth??0)/2,m=e.resolveKeysById(this,"xValue",i),x=e.resolveColumnById(this,"yHighValue",i),v=e.resolveColumnById(this,"yLowValue",i),S=B=>n.convert(m[B])+y,b=[],D=[],I=[],M=(B,_,F)=>{const V=f[B],G=m[B];if(G==null)return;const W=I[I.length-1];if(Number.isFinite(_)&&Number.isFinite(F)){const K=(lt,ht,j)=>{D.push({index:B,series:this,itemId:lt,datum:V,datumIndex:B,midPoint:{x:Q,y:j},yHighValue:_,yLowValue:F,xValue:G,xKey:l,yLowKey:c,yHighKey:h,point:{x:Q,y:j,size:q},enabled:!0});const Xt=this.createLabelData({datumIndex:B,point:{x:Q,y:j},value:ht,yLowValue:F,yHighValue:_,itemId:lt,inverted:$,datum:V,series:this});b.push(Xt)},$=F>_,Q=S(B),J=r.convert(_),tt=r.convert(F),{size:q}=u;K("high",_,J),K("low",F,tt);const Z={high:{point:{x:Q,y:J},xDatum:G,yDatum:_},low:{point:{x:Q,y:tt},xDatum:G,yDatum:F}};Array.isArray(W)?W.push(Z):W!=null?(W.skip+=1,I.push([Z])):I.push([Z])}else d||(Array.isArray(W)||W==null?I.push({skip:0}):W.skip+=1)},{dataAggregationFilters:k}=this,[A,O]=n.range,N=O-A,T=k?.find(B=>B.maxRange>N),L=T?.topIndices,C=T?.bottomIndices;let[P,R]=this.visibleRange("xValue",s.range,L);P=Math.max(P-1,0),R=Math.min(R+1,L?.length??m.length),i.input.count<1e3&&(P=0,R=i.input.count);for(let B=P;B<R;B+=1){const _=L?.[B]??B,F=C?.[B]??B;M(_,x[_],v[F])}const E=I.flatMap(B=>{if(!Array.isArray(B))return[];const _=B.map(F=>F.high);return CD(_,g)}),z=I.flatMap(B=>{if(!Array.isArray(B))return[];const _=B.map(F=>F.low);return CD(_,g)});return{itemId:`${c}-${h}`,labelData:b,nodeData:D,fillData:{itemId:"high",spans:E,phantomSpans:z},highStrokeData:{itemId:"high",spans:E},lowStrokeData:{itemId:"low",spans:z},scales:this.calculateScaling(),visible:this.visible}}createLabelData({datumIndex:t,point:e,value:i,itemId:o,inverted:s,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:h,yName:d,yLowName:u,yHighName:g,label:f}=this.properties,{placement:y,padding:m=10}=f;let x=o;s&&(x=o==="low"?"high":"low");const v=y==="outside"&&x==="high"||y==="inside"&&x==="low"?-1:1;return{x:e.x,y:e.y+m*v,series:n,itemId:o,datum:a,datumIndex:t,text:this.getLabelText(f,{value:i,datum:a,itemId:o,xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:g,yName:d}),textAlign:"center",textBaseline:v===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){const{opacity:e,visible:i,animationEnabled:o}=t,[s,a]=t.paths,n=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:Kg.None,stroke:this.properties.stroke,strokeWidth:n,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i||o});const r=AV(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults),l=this.getShapeFillBBox();bV(s,r,l),s.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:Kg.None,fill:r,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:n,opacity:e,visible:i||o}),AD(this,a),AD(this,s)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(const i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(const i of t)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(t,e){const[i]=t;i.path.clear(),mV(i,e.fillData),i.markDirty("RangeArea")}updateStrokePath(t,e){const[,i]=t;i.path.clear(),ND(i,e.highStrokeData.spans),ND(i,e.lowStrokeData.spans),i.markDirty("RangeArea")}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,o=t?e.highlightStyle.item:void 0;return{shape:i.shape,size:i.size,fill:o?.fill??i.fill,fillOpacity:o?.fillOpacity??i.fillOpacity,stroke:o?.stroke??i.stroke,strokeWidth:o?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:o?.strokeOpacity??i.strokeOpacity,lineDash:o?.lineDash??i.lineDash,lineDashOffset:o?.lineDashOffset??i.lineDashOffset}}getMarkerItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{xKey:n,yHighKey:r,yLowKey:l,marker:c}=a,{itemStyler:h}=c;if(h!=null)return this.cachedDatumCallback(SV(t,o?"highlight":"node"),()=>this.callWithContext(h,{seriesId:s,datum:e,xKey:n,yHighKey:r,yLowKey:l,highlighted:o,...i}))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:o,yLowKey:s,yHighKey:a,marker:n,fill:r,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:d}=this.properties,u=rV(i&&this.properties.highlightStyle.item,n.getStyle(),{fill:r,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:d}),g=this.getShapeFillBBox();e.each((f,y)=>{this.updateMarkerStyle(n,f,y.datum,y.point,{xKey:o,yHighKey:a,yLowKey:s},i,u,g)}),i||this.properties.marker.markClean()}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,o=>{o.pointerEvents=Kg.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{lV(e,this.properties.label,i)})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getTooltipContent(t,e){const{id:i,dataModel:o,processedData:s,axes:a,properties:n}=this,{xName:r,yName:l,yLowKey:c,yLowName:h,xKey:d,yHighKey:u,yHighName:g,tooltip:f}=n,y=a[xe.X],m=a[xe.Y];if(!o||!s||!y||!m)return;const x=s.dataSources.get(this.id)?.[t],v=o.resolveKeysById(this,"xValue",s)[t],S=o.resolveColumnById(this,"yHighValue",s)[t],b=o.resolveColumnById(this,"yLowValue",s)[t];if(v==null)return;const D=this.getMarkerItemBaseStyle(!1);Object.assign(D,this.getMarkerItemStyleOverrides(String(t),t,D,!1));const I=`${m.formatDatum(b)} - ${m.formatDatum(S)}`;return f.formatTooltip(this.properties,{heading:y.formatDatum(v),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:`${h??c} - ${g??u}`,value:I}]},{seriesId:i,datum:x,title:l,itemId:e?.itemId??"unknown",xName:r,yName:l,yLowKey:c,yLowName:h,xKey:d,yHighKey:u,yHighName:g,...D})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,marker:a}=this.properties;return{marker:TV({shape:a.shape,fill:a.fill??t,stroke:a.stroke??e,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},a.fillGradientDefaults,a.fillPatternDefaults),line:{stroke:e,strokeOpacity:o,strokeWidth:i,lineDash:s}}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yLowKey:o,yHighKey:s,yName:a,yLowName:n,yHighName:r,showInLegend:l}=this.properties,c=a??`${n??o} - ${r??s}`,h=`${o}-${s}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new vV}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:o,paths:s}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(s,o),dV(this,a,...s),uV([e],TD),gV(this,a,e),Hg(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:o,contextData:s,paths:a,previousContextData:n}=t,[r,l]=a;if(r==null&&l==null)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateAreaPaths(a,s)},h=()=>{e.skipCurrentBatch(),c()};if(s==null||n==null){c(),RD(this,e,"added",i),LD(this,"fill_path_properties",e,"add",r),LD(this,"stroke_path_properties",e,"add",l),Hg(this,"labels",e,o);return}const d=aV(s,n,this.processedData?.reduced?.diff?.[this.id]);if(d===void 0){h();return}else if(d.status==="no-op")return;wD(this.id,"fill_path_properties",e,[r],d.fill.pathProperties),wD(this.id,"stroke_path_properties",e,[l],d.stroke.pathProperties),d.status==="added"?this.updateAreaPaths(a,s):d.status==="removed"?this.updateAreaPaths(a,n):(PD(this.id,"fill_path_update",e,[r],d.fill.path),PD(this.id,"stroke_path_update",e,[l],d.stroke.path)),d.hasMotion&&(RD(this,e,void 0,i),Hg(this,"labels",e,o)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,s)})}getFormattedMarkerStyle(t){const{xKey:e,yLowKey:i,yHighKey:o}=this.properties;return this.getMarkerStyle(this.properties.marker,t.datum,{xKey:e,yLowKey:i,yHighKey:o},!0)}computeFocusBounds(t){const e=ID(this,t),i=ID(this,{...t,datumIndex:t.datumIndex+1});if(e&&i)return DV.merge([e,i])}isDatumEnabled(t,e){return e%2===0&&super.isDatumEnabled(t,e)}};Oh.className="RangeAreaSeries",Oh.type="range-area";import{_ModuleSupport as NV}from"ag-charts-community";import{boolean as Ug,constant as CV,fillOptionsDef as LV,lineDashOptionsDef as RV,number as wV,positiveNumber as PV,required as Th,string as ma,strokeOptionsDef as EV,union as _V}from"ag-charts-core";var{commonSeriesOptionsDefs:BV,interpolationValidator:zV,markerOptionsDefs:FV,seriesLabelOptionsDefs:VV,shadowOptionsDefs:GV,tooltipOptionsDefs:WV}=NV,Yg={type:Th(CV("range-area")),xKey:Th(ma),yLowKey:Th(ma),yHighKey:Th(ma),xName:ma,yName:ma,yLowName:ma,yHighName:ma,showInMiniChart:Ug,connectMissingData:Ug,interpolation:zV,label:{...VV,padding:PV,placement:_V("inside","outside")},marker:FV,tooltip:WV,shadow:GV,...BV,...LV,...EV,...RV};Yg.pickOutsideVisibleMinorAxis=Ug,Yg.focusPriority=wV;import{_ModuleSupport as jg}from"ag-charts-community";var HV={series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:jg.FILL_PATTERN_DEFAULTS,stroke:{$palette:"stroke"},fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:jg.FILL_PATTERN_DEFAULTS,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"}},axes:{[jg.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:ED,CARTESIAN_POSITION:_D}}=BF,KV={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:t=>new Oh(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:ED.NUMBER,position:_D.LEFT},{type:ED.CATEGORY,position:_D.BOTTOM}],themeTemplate:HV},BD={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:Yg,create:t=>new Oh(t)};import{_ModuleSupport as UV}from"ag-charts-community";import{_ModuleSupport as $g}from"ag-charts-community";var YV=1e3,jV=5;function $V(t,e,i,o){if(t.length<YV)return;const[s,a]=Pr(o);let n=wr(t,jV),{indexData:r,valueData:l}=Er(t,e,i,s,a,n);const c=[{maxRange:n,indexData:r}];for(;n>64;)({indexData:r,valueData:l,maxRange:n}=_r(r,l,n)),c.push({maxRange:n,indexData:r});return c.reverse(),c}import{_ModuleSupport as XV}from"ag-charts-community";var{AbstractBarSeriesProperties:ZV,FillGradientDefaults:qV,FillPatternDefaults:QV,SeriesTooltip:JV,TempValidate:bt,COLOR_STRING:zD,FUNCTION:tG,LINE_DASH:eG,OBJECT:Wr,PLACEMENT:iG,POSITIVE_NUMBER:Ah,RATIO:FD,STRING:xa,BOOLEAN:oG,COLOR_GRADIENT:sG,COLOR_PATTERN:aG,OR:nG,DropShadow:rG,Label:lG}=XV,Xg=class extends lG{constructor(){super(...arguments),this.placement="inside",this.padding=6}};p([bt(iG)],Xg.prototype,"placement",2),p([bt(Ah)],Xg.prototype,"padding",2);var Tt=class extends ZV{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new qV,this.fillPatternDefaults=new QV,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new rG().set({enabled:!1}),this.label=new Xg,this.tooltip=new JV,this.fastDataProcessing=!1}};p([bt(xa)],Tt.prototype,"xKey",2),p([bt(xa)],Tt.prototype,"yLowKey",2),p([bt(xa)],Tt.prototype,"yHighKey",2),p([bt(xa,{optional:!0})],Tt.prototype,"xName",2),p([bt(xa,{optional:!0})],Tt.prototype,"yName",2),p([bt(xa,{optional:!0})],Tt.prototype,"yLowName",2),p([bt(xa,{optional:!0})],Tt.prototype,"yHighName",2),p([bt(nG(sG,aG,zD))],Tt.prototype,"fill",2),p([bt(Wr)],Tt.prototype,"fillGradientDefaults",2),p([bt(Wr)],Tt.prototype,"fillPatternDefaults",2),p([bt(FD)],Tt.prototype,"fillOpacity",2),p([bt(zD)],Tt.prototype,"stroke",2),p([bt(Ah)],Tt.prototype,"strokeWidth",2),p([bt(FD)],Tt.prototype,"strokeOpacity",2),p([bt(eG)],Tt.prototype,"lineDash",2),p([bt(Ah)],Tt.prototype,"lineDashOffset",2),p([bt(Ah)],Tt.prototype,"cornerRadius",2),p([bt(tG,{optional:!0})],Tt.prototype,"itemStyler",2),p([bt(Wr)],Tt.prototype,"shadow",2),p([bt(Wr)],Tt.prototype,"label",2),p([bt(Wr)],Tt.prototype,"tooltip",2),p([bt(oG)],Tt.prototype,"fastDataProcessing",2);var{SeriesNodePickMode:VD,valueProperty:GD,keyProperty:cG,ChartAxisDirection:Hr,checkCrisp:hG,updateLabelNode:pG,SMALLEST_KEY_INTERVAL:dG,LARGEST_KEY_INTERVAL:uG,diff:gG,prepareBarAnimationFunctions:WD,midpointStartingBarPosition:HD,resetBarSelectionsFn:fG,fixNumericExtent:yG,seriesLabelFadeInAnimation:KD,resetLabelFn:mG,animationValidation:xG,computeBarFocusBounds:SG,visibleRangeIndices:UD,createDatumId:bG,ContinuousScale:YD,OrdinalTimeScale:vG,Rect:DG,PointerEvents:MG,motion:jD,applyShapeStyle:kG,findMinMax:OG,getShapeStyle:Zg}=$g,TG=class extends $g.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},Ih=class extends $g.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[VD.AXIS_ALIGNED,VD.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:fG,label:mG}}),this.properties=new Tt,this.dataAggregationFilters=void 0,this.NodeEvent=TG}async processData(t){if(!this.properties.isValid())return;const{xKey:e,yLowKey:i,yHighKey:o,fastDataProcessing:s}=this.properties,a=!s,n=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:n,yScale:r}),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(gG(this.id,this.processedData)),d.push(xG()));const u=this.visible?{}:{forceValue:0},{dataModel:g,processedData:f}=await this.requestDataModel(t,this.data,{props:[cG(e,c,{id:"xValue"}),GD(i,h,{id:"yLowValue",invalidValue:null,...u}),GD(o,h,{id:"yHighValue",invalidValue:null,...u}),...l?[dG,uG]:[],...d],groupByKeys:a});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.largestDataInterval=f.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(g,f),this.animationState.transition("updateData")}aggregateData(t,e){if(e.type!=="grouped")return;const i=this.axes[Hr.X];if(i==null||!(YD.is(i.scale)||vG.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"yHighValue",e),a=t.resolveColumnById(this,"yLowValue",e),{index:n}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[n];return $V(o,s,a,r)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[o]}=e.domain;if(t===this.getCategoryDirection()){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s?.def.valueType==="category"?o:this.padBandExtent(o)}else{const s=this.domainForClippedRange(Hr.Y,["yHighValue","yLowValue"],"xValue",!0),a=OG(s);return yG(a)}}getSeriesRange(t,e){return this.domainForVisibleRange(Hr.Y,["yHighValue","yLowValue"],"xValue",e,!0)}createNodeData(){const{data:t,dataModel:e,groupScale:i,processedData:o,visible:s}=this,a=this.getCategoryAxis(),n=this.getValueAxis();if(!(t&&a&&n&&e&&o?.dataSources))return;const r=a.scale,l=n.scale,c=this.getBarDirection()===Hr.X,{xKey:h,yLowKey:d,yHighKey:u,strokeWidth:g}=this.properties,f=`${d}-${u}`,y={itemId:f,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!s)return y;const m=o.dataSources.get(this.id)??[],x=e.resolveKeysById(this,"xValue",o),v=e.resolveColumnById(this,"yLowValue",o),S=e.resolveColumnById(this,"yHighValue",o),{barWidth:b,groupIndex:D}=this.updateGroupScale(a),I=YD.is(r)?b*-.5:0,M=i.convert(String(D)),k=hG(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval),A=R=>Math.round(r.convert(x[R]))+M+I,O=(R,E,z,w,B,_,F)=>{const V=m[R],G=x[R];if(G==null)return;const W=v[R],K=S[R];if(!Number.isFinite(W?.valueOf())||!Number.isFinite(K?.valueOf()))return;const[$,Q]=W<K?[W,K]:[K,W],J=Math.round(l.convert(_)),tt=Math.round(l.convert(B)),q=Math.max(g,Math.abs(tt-J)),Z={x:c?Math.min(J,tt):z,y:c?z:Math.min(J,tt),width:c?q:w,height:c?w:q},lt={x:Z.x+Z.width/2,y:Z.y+Z.height/2},ht=this.createLabelData({datumIndex:R,rect:Z,barAlongX:c,yLowValue:$,yHighValue:Q,datum:V,series:this}),j={index:E,valueIndex:R,series:this,itemId:f,datum:V,datumIndex:R,xValue:G,yLowValue:W,yHighValue:K,yLowKey:d,yHighKey:u,xKey:h,x:Z.x,y:Z.y,width:Z.width,height:Z.height,midPoint:lt,crisp:F,labels:ht};y.nodeData.push(j),y.labelData.push(...ht)},{dataAggregationFilters:N}=this,[T,L]=r.range,C=L-T,P=N?.find(R=>R.maxRange>C);if(P!=null){const{maxRange:R,indexData:E}=P,[z,w]=UD(R,a.range,B=>{const _=B*ei,F=E[_+re],V=E[_+Te];if(F===-1)return;const G=(F+V)/2|0;return[A(G),A(V)+b]});for(let B=z;B<w;B+=1){const _=B*ei,F=E[_+re],V=E[_+Te],G=E[_+Ve],W=E[_+Ge];if(F===-1)continue;const K=(F+V)/2|0;if(x[K]==null)continue;const Q=A(K),J=Math.abs(A(F)-A(V))+b,tt=v[G],q=S[W];O(K,0,Q,J,tt,q,!1)}}else if(o.type==="ungrouped"){let[R,E]=UD(m.length,a.range,z=>[A(z),b]);o.input.count<1e3&&(R=0,E=o.input.count);for(let z=R;z<E;z+=1){const w=A(z),B=b,_=v[z],F=S[z];O(z,0,w,B,_,F,k)}}else for(const{datumIndex:R,groupIndex:E}of e.forEachGroupDatum(this,o)){const z=A(R),w=b,B=v[R],_=S[R];O(R,E,z,w,B,_,k)}return y}createLabelData({datumIndex:t,rect:e,barAlongX:i,yLowValue:o,yHighValue:s,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:d,yHighName:u,yName:g,label:f}=this.properties,y={datum:a,xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:d,yHighName:u,yName:g},{placement:m,padding:x}=f,S=x*(m==="outside"?1:-1),b={datumIndex:t,x:e.x+(i?-S:e.width/2),y:e.y+(i?e.height/2:e.height+S),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(f,{itemId:"low",value:o,...y}),itemId:"low",datum:a,series:n},D={datumIndex:t,x:e.x+(i?e.width+S:e.width/2),y:e.y+(i?e.height/2:-S),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(f,{itemId:"high",value:s,...y}),itemId:"high",datum:a,series:n};return m==="outside"&&(b.textAlign=i?"right":"center",b.textBaseline=i?"middle":"top",D.textAlign=i?"left":"center",D.textBaseline=i?"middle":"bottom"),[b,D]}nodeFactory(){return new DG}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o,void 0,s=>this.getDatumId(s))}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,fillGradientDefaults:o,fillPatternDefaults:s}=e,a=t?e.highlightStyle.item:void 0;return Zg({fill:a?.fill??e.fill,fillOpacity:a?.fillOpacity??e.fillOpacity,stroke:a?.stroke??e.stroke,strokeWidth:a?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:a?.strokeOpacity??e.strokeOpacity,lineDash:a?.lineDash??e.lineDash??[],lineDashOffset:a?.lineDashOffset??e.lineDashOffset,cornerRadius:i},o,s)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{xKey:n,yHighKey:r,yLowKey:l,itemStyler:c,fillGradientDefaults:h,fillPatternDefaults:d}=a;if(c==null)return;const u=this.cachedDatumCallback(bG(t,o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:s,datum:e,xKey:n,yHighKey:r,yLowKey:l,highlighted:o,...i}));return Zg(u,h,d)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getCategoryDirection()===Hr.X,s=this.getItemBaseStyle(i),a=this.getShapeFillBBox();e.each((n,r)=>{const l=this.getItemStyleOverrides(String(r.datumIndex),r.datum,s,i);kG(n,s,l,a),n.cornerRadius=l?.cornerRadius??s.cornerRadius,n.visible=o?r.width>0:r.height>0,n.crisp=r.crisp})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=MG.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{pG(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:d,tooltip:u}=s,g=this.getCategoryAxis(),f=this.getValueAxis();if(!i||!o||!g||!f)return;const y=o.dataSources.get(this.id)?.[t],m=i.resolveKeysById(this,"xValue",o)[t],x=i.resolveColumnById(this,"yHighValue",o)[t],v=i.resolveColumnById(this,"yLowValue",o)[t];if(m==null)return;const S=this.getItemBaseStyle(!1);Object.assign(S,this.getItemStyleOverrides(String(t),y,S,!1));const b=`${f.formatDatum(v)} - ${f.formatDatum(x)}`;return u.formatTooltip(this.properties,{heading:g.formatDatum(m),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:`${h??l} - ${d??c}`,value:b}]},{seriesId:e,datum:y,title:r,xKey:a,xName:n,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:d,...S})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,fillOpacity:o,strokeOpacity:s,lineDash:a,lineDashOffset:n,fillGradientDefaults:r,fillPatternDefaults:l}=this.properties;return{marker:Zg({fill:t,stroke:e,fillOpacity:o,strokeOpacity:s,strokeWidth:i,lineDash:a,lineDashOffset:n},r,l)}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yName:o,yLowName:s,yHighName:a,yLowKey:n,yHighKey:r,showInLegend:l}=this.properties,c=o??`${s??n} - ${a??r}`,h=`${n}-${r}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=WD(HD(this.isVertical(),"normal"));jD.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i),KD(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){const{datumSelection:e,labelSelection:i,previousContextData:o}=t,{processedData:s}=this,a=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const n=o==null?"fade":"normal",r=WD(HD(this.isVertical(),n));jD.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],r,(l,c)=>this.getDatumId(c),a),KD(this,"labels",this.ctx.animationManager,i)}getDatumId(t){return`${t.xValue}-${t.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return SG(this,this.contextNodeData?.nodeData[t])}};Ih.className="RangeBarSeries",Ih.type="range-bar";import{_ModuleSupport as AG}from"ag-charts-community";import{boolean as qg,callback as IG,constant as NG,fillOptionsDef as CG,lineDashOptionsDef as LG,number as RG,positiveNumber as $D,required as Nh,string as Sa,strokeOptionsDef as wG,union as XD}from"ag-charts-core";var{commonSeriesOptionsDefs:PG,seriesLabelOptionsDefs:EG,shadowOptionsDefs:_G,tooltipOptionsDefs:BG}=AG,Ch={type:Nh(NG("range-bar")),xKey:Nh(Sa),yLowKey:Nh(Sa),yHighKey:Nh(Sa),xName:Sa,yName:Sa,yLowName:Sa,yHighName:Sa,direction:XD("horizontal","vertical"),showInMiniChart:qg,cornerRadius:$D,itemStyler:IG,label:{...EG,padding:$D,placement:XD("inside","outside")},tooltip:BG,shadow:_G,...PG,...CG,...wG,...LG};Ch.pickOutsideVisibleMinorAxis=qg,Ch.fastDataProcessing=qg,Ch.focusPriority=RG;import{_ModuleSupport as ZD}from"ag-charts-community";var zG={series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:ZD.FILL_PATTERN_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},placement:"inside"}},axes:{[ZD.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},FG={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:t=>new Ih(t),tooltipDefaults:{range:"exact"},defaultAxes:UV.DIRECTION_SWAP_AXES,themeTemplate:zG,groupable:!0},qD={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:Ch,create:t=>new Ih(t)};import{_ModuleSupport as VG}from"ag-charts-community";import{_ModuleSupport as ba}from"ag-charts-community";import{_ModuleSupport as GG}from"ag-charts-community";var{AbstractBarSeriesProperties:WG,BaseProperties:Kr,FillGradientDefaults:HG,FillPatternDefaults:KG,PropertiesArray:UG,SeriesTooltip:YG,TempValidate:ot,BOOLEAN:jG,COLOR_STRING:Qg,COLOR_PATTERN:$G,FUNCTION:QD,LINE_DASH:JD,NUMBER:XG,OBJECT:Vi,OBJECT_ARRAY:ZG,POSITIVE_NUMBER:In,OR:qG,COLOR_GRADIENT:QG,RATIO:Jg,STRING:Nn,UNION:tM,DropShadow:JG,Label:t4}=GG,Lh=class extends Kr{};p([ot(tM(["subtotal","total"],"a total type"))],Lh.prototype,"totalType",2),p([ot(XG)],Lh.prototype,"index",2),p([ot(Nn)],Lh.prototype,"axisLabel",2);var eM=class extends Kr{};p([ot(QD,{optional:!0})],eM.prototype,"renderer",2);var tf=class extends t4{constructor(){super(...arguments),this.placement="outside-end",this.padding=6}};p([ot(tM(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],tf.prototype,"placement",2),p([ot(In)],tf.prototype,"padding",2);var oe=class extends Kr{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new HG,this.fillPatternDefaults=new KG,this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new JG().set({enabled:!1}),this.label=new tf,this.tooltip=new eM}};p([ot(Nn,{optional:!0})],oe.prototype,"name",2),p([ot(qG(QG,Qg,$G))],oe.prototype,"fill",2),p([ot(Vi)],oe.prototype,"fillGradientDefaults",2),p([ot(Vi)],oe.prototype,"fillPatternDefaults",2),p([ot(Qg)],oe.prototype,"stroke",2),p([ot(Jg)],oe.prototype,"fillOpacity",2),p([ot(Jg)],oe.prototype,"strokeOpacity",2),p([ot(JD)],oe.prototype,"lineDash",2),p([ot(In)],oe.prototype,"lineDashOffset",2),p([ot(In)],oe.prototype,"strokeWidth",2),p([ot(In)],oe.prototype,"cornerRadius",2),p([ot(QD,{optional:!0})],oe.prototype,"itemStyler",2),p([ot(Vi)],oe.prototype,"shadow",2),p([ot(Vi)],oe.prototype,"label",2),p([ot(Vi)],oe.prototype,"tooltip",2);var va=class extends Kr{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};p([ot(jG)],va.prototype,"enabled",2),p([ot(Qg)],va.prototype,"stroke",2),p([ot(Jg)],va.prototype,"strokeOpacity",2),p([ot(JD)],va.prototype,"lineDash",2),p([ot(In)],va.prototype,"lineDashOffset",2),p([ot(In)],va.prototype,"strokeWidth",2);var Rh=class extends Kr{constructor(){super(...arguments),this.positive=new oe,this.negative=new oe,this.total=new oe}};p([ot(Vi)],Rh.prototype,"positive",2),p([ot(Vi)],Rh.prototype,"negative",2),p([ot(Vi)],Rh.prototype,"total",2);var zo=class extends WG{constructor(){super(...arguments),this.item=new Rh,this.totals=new UG(Lh),this.line=new va,this.tooltip=new YG}};p([ot(Nn)],zo.prototype,"xKey",2),p([ot(Nn)],zo.prototype,"yKey",2),p([ot(Nn,{optional:!0})],zo.prototype,"xName",2),p([ot(Nn,{optional:!0})],zo.prototype,"yName",2),p([ot(Vi)],zo.prototype,"item",2),p([ot(ZG)],zo.prototype,"totals",2),p([ot(Vi)],zo.prototype,"line",2),p([ot(Vi)],zo.prototype,"tooltip",2);var{adjustLabelPlacement:e4,SeriesNodePickMode:iM,fixNumericExtent:i4,valueProperty:oM,keyProperty:o4,accumulativeValueProperty:wh,trailingAccumulatedValueProperty:s4,ChartAxisDirection:ef,createDatumId:a4,checkCrisp:n4,updateLabelNode:r4,prepareBarAnimationFunctions:l4,collapsedStartingBarPosition:c4,resetBarSelectionsFn:h4,seriesLabelFadeInAnimation:p4,resetLabelFn:d4,animationValidation:u4,DEFAULT_CARTESIAN_DIRECTION_KEYS:g4,DEFAULT_CARTESIAN_DIRECTION_NAMES:f4,computeBarFocusBounds:y4,isContinuous:sM,Rect:m4,motion:x4,applyShapeStyle:S4,getShapeStyle:of}=ba,Ph=class extends ba.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:g4,directionNames:f4,categoryKey:void 0,pickModes:[iM.NEAREST_NODE,iM.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:h4,label:d4}}),this.properties=new zo,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(t){const{xKey:e,yKey:i,totals:o}=this.properties,{data:s=[]}=this;if(!this.properties.isValid()||!this.visible)return;const a=v=>sM(v)&&Number(v)>=0,n=v=>sM(v)&&Number(v)>=0,r=v=>v==="total"||v==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],h=o.reduce((v,S)=>{const b=v.get(S.index);return b?b.push(S):v.set(S.index,[S]),v},new Map);s.forEach((v,S)=>{c.push(v),h.get(S)?.forEach(b=>c.push({...b.toJson(),[e]:b.axisLabel}))});const d=[];this.ctx.animationManager.isSkipped()||d.push(u4());const u=this.getCategoryAxis()?.scale,g=this.getValueAxis()?.scale,{isContinuousX:f,xScaleType:y,yScaleType:m}=this.getScaleInformation({xScale:u,yScale:g}),{processedData:x}=await this.requestDataModel(t,c,{props:[o4(e,y,{id:"xValue"}),wh(i,m,{...l,id:"yCurrent"}),wh(i,m,{...l,missingValue:0,id:"yCurrentTotal"}),wh(i,m,{...l,id:"yCurrentPositive",validation:a}),wh(i,m,{...l,id:"yCurrentNegative",validation:n}),s4(i,m,{...l,id:"yPrevious"}),oM(i,m,{id:"yRaw"}),oM("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:r}),...f?[ba.SMALLEST_KEY_INTERVAL,ba.LARGEST_KEY_INTERVAL]:[],...d]});this.smallestDataInterval=x.reduced?.smallestKeyInterval,this.largestDataInterval=x.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[o],values:s}=e.domain;if(t===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue");if(a?.def.type==="key"&&a?.def.valueType==="category")return o;const n=t===ef.Y,r=this.getCategoryAxis().isReversed();return this.padBandExtent(o,r!==n)}else{const a=i.resolveProcessedDataIndexById(this,"yCurrent"),n=s[a],r=[Math.min(0,n[0]),Math.max(0,n[1])];return i4(r)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,dataModel:e,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!t||!o||!s||!e||!i)return;const{line:a}=this.properties,n=o.scale,r=s.scale,l=this.getBarDirection()===ef.X,c=this.getBandwidth(o)??10,h=o.isReversed(),d=s.isReversed();if(i.type!=="ungrouped")return;const u={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return u;const g=[],f=e.resolveKeysById(this,"xValue",i),y=e.resolveColumnById(this,"yRaw",i),m=e.resolveColumnById(this,"totalTypeValue",i),x=e.resolveColumnById(this,"yCurrent",i),v=e.resolveColumnById(this,"yPrevious",i),S=e.resolveColumnById(this,"yCurrentTotal",i),b=n4(o?.scale,o?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function D(C,P,R){return C||P?{cumulativeValue:S[R],trailingValue:P?M:0}:{cumulativeValue:x[R],trailingValue:v[R]}}function I(C,P,R,E,z){return C?E:P?(E??0)-(z??0):R}let M=0;const{xKey:k,yKey:A,xName:O,yName:N}=this.properties;(i.dataSources.get(this.id)??[]).forEach((C,P)=>{const R=m[P],E=this.isSubtotal(R),z=this.isTotal(R),w=z||E,B=f[P];if(B==null)return;const _=Math.round(n.convert(B)),F=y[P],{cumulativeValue:V,trailingValue:G}=D(z,E,P);w&&(M=V??0);const W=Math.round(r.convert(V)),K=Math.round(r.convert(G)),$=I(z,E,F,V,G),Q=($??0)>=0,J=this.getSeriesItemType(Q,R),{strokeWidth:tt,label:q}=this.getItemConfig(J),Z=Q?W:K,lt=Q?K:W,ht=Math.max(tt,Math.abs(lt-Z)),j={x:l?Math.min(Z,lt):_,y:l?_:Math.min(Z,lt),width:l?ht:c,height:l?c:ht},Xt={x:j.x+j.width/2,y:j.y+j.height/2},Zt=w?W:K,pt=Math.floor(a.strokeWidth)%2/2,It=h?W:Zt,ct=h?Zt:W;let ft,Nt;l?(ft={x:It+pt,y:j.y},Nt={x:ct+pt,y:j.y+j.height}):(ft={x:j.x,y:It+pt},Nt={x:j.x+j.width,y:ct+pt});const Ye={x:h?Nt.x:ft.x,y:h?Nt.y:ft.y,x2:h?ft.x:Nt.x,y2:h?ft.y:Nt.y,size:0};g.push(Ye);const Ai=J==="subtotal"?"total":J,So=this.getLabelText(q,{itemId:Ai,value:$,datum:C,xKey:k,yKey:A,xName:O,yName:N}),ws={index:P,series:this,itemId:J,datum:C,datumIndex:P,cumulativeValue:V??0,xValue:B,yValue:$,yKey:A,xKey:k,x:j.x,y:j.y,width:j.width,height:j.height,midPoint:Xt,crisp:b,label:{text:So,...e4({isUpward:($??-1)>=0!==d,isVertical:!l,placement:q.placement,padding:q.padding,rect:j})}};u.nodeData.push(ws),u.labelData.push(ws)});const L=this.properties.line.enabled;return x!=null&&L&&(u.pointData=g),u}updateSeriesItemTypes(){const{dataModel:t,seriesItemTypes:e,processedData:i}=this;if(!t||!i)return;e.clear();const o=t.resolveProcessedDataIndexById(this,"yCurrentPositive"),s=t.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=t.resolveProcessedDataIndexById(this,"totalTypeValue"),n=i.domain.values[o]??[],r=i.domain.values[s]??[];n.length>0&&e.add("positive"),r.length>0&&e.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&e.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new m4}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)}getItemStyle(t,e,i,o){const{id:s,properties:a}=this,n=a.item[i==="subtotal"?"total":i],r=o?a.highlightStyle.item:void 0,{itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:h}=n,{xKey:d,yKey:u}=a,g=of({fill:r?.fill??n.fill,fillOpacity:r?.fillOpacity??n.fillOpacity,stroke:r?.stroke??n.stroke,strokeWidth:r?.strokeWidth??n.strokeWidth,strokeOpacity:r?.strokeOpacity??n.strokeOpacity,lineDash:r?.lineDash??n.lineDash??[],lineDashOffset:r?.lineDashOffset??n.lineDashOffset,cornerRadius:n.cornerRadius},c,h);if(l!=null){let f=this.cachedDatumCallback(a4(t,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:s,itemId:i,datum:e,xKey:d,yKey:u,highlighted:o,...g}));f=of(f,c,h),Object.assign(g,f)}return g}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getCategoryDirection()===ef.X,s=this.getShapeFillBBox();e.each((a,n)=>{const r=n.itemId,l=this.getItemStyle(String(n.datumIndex),n.datum,r,i);S4(a,l,void 0,s),a.visible=o?n.width>0:n.height>0,a.crisp=n.crisp})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const o=e.filter(s=>{const{label:a}=this.getItemConfig(s.itemId);return a.enabled});return i.update(o)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{r4(e,this.getItemConfig(i.itemId).label,i.label)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:n,yKey:r,yName:l,tooltip:c}=s,h=this.getCategoryAxis(),d=this.getValueAxis();if(!i||!o||!h||!d)return;const u=o.dataSources.get(this.id)?.[t],g=i.resolveKeysById(this,"xValue",o)[t],f=i.resolveColumnById(this,"yRaw",o)[t],y=i.resolveColumnById(this,"yCurrentTotal",o),m=i.resolveColumnById(this,"totalTypeValue",o);if(g==null)return;const x=m[t],v=(f??0)>=0,S=this.getSeriesItemType(v,x);let b;if(this.isTotal(x))b=y[t];else if(this.isSubtotal(x)){b=y[t];for(let I=t-1;I>=0;I-=1)if(this.isSubtotal(m[I])){b=b-y[I];break}}else b=f;const D=this.getItemStyle(String(t),u,S,!1);return c.formatTooltip(this.properties,{heading:h.formatDatum(g),symbol:this.legendItemSymbol(S),data:[{label:l,fallbackLabel:r,value:d.formatDatum(b)}]},{seriesId:e,datum:u,title:l,itemId:S,xKey:a,xName:n,yKey:r,yName:l,...D})}legendItemSymbol(t){const{fill:e,stroke:i,fillOpacity:o,strokeOpacity:s,strokeWidth:a,lineDash:n,lineDashOffset:r,fillGradientDefaults:l,fillPatternDefaults:c}=this.getItemConfig(t);return{marker:of({fill:e,stroke:i,fillOpacity:o,strokeOpacity:s,strokeWidth:a,lineDash:n,lineDashOffset:r},l,c)}}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,o=[],s=n=>n.charAt(0).toUpperCase()+n.substring(1),{showInLegend:a}=this.properties;return i.forEach(n=>{const{name:r}=this.getItemConfig(n);o.push({legendType:"category",id:e,itemId:n,seriesId:e,enabled:!0,label:{text:r??s(n)},symbol:this.legendItemSymbol(n),hideInLegend:!a,isFixed:!0})}),o}toggleSeriesItem(){}animateEmptyUpdateReady(t){const{datumSelection:e,labelSelection:i,contextData:o}=t,s=l4(c4(this.isVertical(),this.axes,"normal"));x4.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],s),p4(this,"labels",this.ctx.animationManager,i);const{pointData:a}=o;a&&(this.isVertical()?this.animateConnectorLinesVertical(t):this.animateConnectorLinesHorizontal(t))}animateConnectorLinesHorizontal(t){const{pointData:e=[]}=t.contextData,[i]=t.paths,{path:o}=i;this.updateLineNode(i);const s=this.getValueAxis(),a=s?.isReversed(),n=a?(h,d)=>h<d:(h,d)=>h>d,r=s?.scale.convert(0),l=e.reduce((h,d)=>(n(d.x,h)&&(h=d.x),h),a?1/0:0),c=(h,d,u,g,f)=>(h-d)/(u-d)*(f-g)+g;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:ba.Motion.easeOut,collapsable:!1,onUpdate(h){o.clear(!0),e.forEach((d,u)=>{const g=c(h,r,l,r,d.x),f=c(h,r,l,r,d.x2);u!==0&&o.lineTo(g,d.y),o.moveTo(f,d.y2)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(t)})}animateConnectorLinesVertical(t){const{pointData:e=[]}=t.contextData,[i]=t.paths,{path:o}=i;this.updateLineNode(i);const s=this.getValueAxis(),a=s?.isReversed(),n=a?(h,d)=>h>d:(h,d)=>h<d,r=s?.scale.convert(0),l=e.reduce((h,d)=>(n(d.y,h)&&(h=d.y),h),a?0:1/0),c=(h,d,u,g,f)=>(h-d)/(u-d)*(f-g)+g;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:ba.Motion.easeOut,collapsable:!1,onUpdate(h){o.clear(!0),e.forEach((d,u)=>{const g=c(h,r,l,r,d.y),f=c(h,r,l,r,d.y2);u!==0&&o.lineTo(d.x,g),o.moveTo(d.x2,f)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(t)})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){this.resetConnectorLinesPath({contextData:t.contextData,paths:t.paths})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e;this.updateLineNode(i);const{path:o}=i;o.clear(!0);const{pointData:s}=t;s&&(s.forEach((a,n)=>{n!==0&&o.lineTo(a.x,a.y),o.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:o,lineDash:s,lineDashOffset:a,lineJoin:"round",pointerEvents:ba.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return y4(this,this.contextNodeData?.nodeData[t])}};Ph.className="WaterfallSeries",Ph.type="waterfall";import{_ModuleSupport as b4}from"ag-charts-community";import{arrayOfDefs as v4,boolean as aM,callback as D4,constant as M4,fillOptionsDef as k4,lineDashOptionsDef as nM,positiveNumber as sf,required as Cn,string as Ln,strokeOptionsDef as rM,union as af}from"ag-charts-core";var{commonSeriesOptionsDefs:O4,seriesLabelOptionsDefs:T4,shadowOptionsDefs:A4,tooltipOptionsDefs:lM}=b4,nf={name:Ln,cornerRadius:sf,itemStyler:D4,label:{...T4,padding:sf,placement:af("inside-start","inside-center","inside-end","outside-start","outside-end")},tooltip:lM,shadow:A4,...k4,...rM,...nM},I4={type:Cn(M4("waterfall")),xKey:Cn(Ln),yKey:Cn(Ln),xName:Ln,yName:Ln,direction:af("horizontal","vertical"),totals:v4({totalType:Cn(af("total","subtotal")),index:Cn(sf),axisLabel:Cn(Ln)},"a total definition options array"),showInMiniChart:aM,item:{positive:nf,negative:nf,total:nf},line:{enabled:aM,...rM,...nM},tooltip:lM,...O4};import{_ModuleSupport as N4}from"ag-charts-community";function rf(t,e){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`./${e}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${t}.fill`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${t}.fill`}]},{$isPattern:[{$palette:`${t}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${t}.fill`}]}]},[{$mix:[{$palette:`${t}.fill`},"black",.15]},{$mix:[{$palette:`${t}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:N4.FILL_PATTERN_DEFAULTS,stroke:{$palette:`${t}.stroke`},strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end"}}}var C4={series:{item:{positive:rf("altUp",0),negative:rf("altDown",1),total:rf("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},L4={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:t=>new Ph(t),tooltipDefaults:{range:"exact"},defaultAxes:VG.DIRECTION_SWAP_AXES,themeTemplate:C4},cM={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:I4,create:t=>new Ph(t)},{NewAreaSeriesModule:R4,NewBarSeriesModule:w4,NewBubbleSeriesModule:P4,NewHistogramSeriesModule:E4,NewLineSeriesModule:_4,NewScatterSeriesModule:B4,numberFormatValidator:z4,without:si}=W_,hM={width:xi,height:xi,grip:Tr,fill:lh,stroke:lh,strokeWidth:xi,cornerRadius:xi},ai=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],F4={enabled:Tr,height:xi,spacing:xi,cornerRadius:fv,mask:{fill:lh,fillOpacity:j_,stroke:lh,strokeWidth:xi},minHandle:hM,maxHandle:hM,miniChart:{enabled:Tr,padding:{top:xi,bottom:xi},label:{enabled:Tr,avoidCollisions:Tr,spacing:xi,format:z4,formatter:U_,interval:{minSpacing:xi,maxSpacing:xi,values:H_,step:fv},...Y_},series:K_($_({area:si(R4.options,ai),bar:si(w4.options,[...ai,"errorBar","label","legendItemName","direction"]),"box-plot":si(Cv.options,[...ai,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"]),bubble:si(P4.options,[...ai,"title","label","labelKey","labelName","sizeName"]),candlestick:si(Qv.options,ai),heatmap:si(uD.options,[...ai,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"]),histogram:si(E4.options,[...ai,"label"]),line:si(_4.options,[...ai,"errorBar","title","label"]),ohlc:si(mD.options,ai),"range-area":si(BD.options,[...ai,"label","yLowName","yHighName"]),"range-bar":si(qD.options,[...ai,"direction","label","yLowName","yHighName"]),scatter:si(B4.options,[...ai,"errorBar","title","label","labelKey","labelName"]),waterfall:si(cM.options,[...ai,"direction"])}))}},V4={type:"plugin",name:"annotations",chartType:"cartesian",options:kr,create(){return null}},G4={type:"plugin",name:"navigator",chartType:"cartesian",options:F4,create(){return null}},W4={type:"plugin",name:"initialState",options:G_,create(){return null}};import{_ModuleSupport as H4}from"ag-charts-community";import{_ModuleSupport as K4}from"ag-charts-community";import{Logger as U4}from"ag-charts-core";import{_ModuleSupport as pM}from"ag-charts-community";import{Logger as Y4}from"ag-charts-core";function dM(t,e,i){i||(e=j4(e));const o=new Map;for(const a of t)o.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let s=0;return o.forEach((a,n)=>{s=Math.max(s,lf(o,e,a,n,-1,[])+lf(o,e,a,n,1,[])+1)}),{links:e,nodeGraph:o,maxPathLength:s}}function uM(t,e,i,o){const s=o.indexOf(e);if(s!==-1){for(let n=s;n<o.length;n+=1)i.add(o[n]);return}o.push(e);const{toNode:a}=e;for(const n of t)n.fromNode===a&&uM(t,n,i,o);o.pop()}function j4(t){const e=new Set;for(const i of t)uM(t,i,e,[]);return e.size!==0&&Y4.warnOnce("Some links formed circular references. These will be removed from the output."),e.size===0?t:t.filter(i=>!e.has(i))}function lf(t,e,i,o,s,a){if(a.includes(o))return 1/0;let n=s===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(n===-1){n=0;const r=s===-1?i.linksBefore:i.linksAfter;for(const l of e){const{fromNode:c,toNode:h}=l,d=s===-1?h.id:c.id,u=s===-1?c.id:h.id,g=o===d?t.get(u):void 0;g!=null&&(r.push({node:g,link:l}),a?.push(o),n=Math.max(n,lf(t,e,g,u,s,a)+1),a?.pop())}s===-1?i.maxPathLengthBefore=n:i.maxPathLengthAfter=n}return n}var{Series:$4,DataController:X4,keyProperty:Z4,valueProperty:Eh,Selection:Da,Group:Rn,TransformableText:q4}=pM,Q4=class extends pM.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o);const{datumIndex:s}=i,a=o.contextNodeData?.nodeData.find(n=>n.datumIndex.type===s.type&&n.datumIndex.index===s.index);this.size=a?.size,this.label=a?.type===1?a?.label:void 0}},gM=class extends $4{constructor(){super(...arguments),this.NodeEvent=Q4,this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Rn({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Rn({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Rn({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Rn({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Rn({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Rn({name:"nodeGroup"})),this.labelSelection=Da.select(this.labelGroup,q4),this.linkSelection=Da.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Da.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Da.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Da.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Da.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Da.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes??this._chartNodes}setChartNodes(t){this._chartNodes=t,this.nodes===t&&(this.nodeDataRefresh=!0)}async processData(t){const{data:e,nodes:i}=this;if(e==null||!this.properties.isValid())return;const{fromKey:o,toKey:s,sizeKey:a,idKey:n,labelKey:r}=this.properties,l=new X4("standalone",t.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[Z4(n,void 0,{id:"idValue",includeProperty:!1}),...r!=null?[Eh(r,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,h=t.request(this.id,e,{props:[Eh(o,void 0,{id:"fromValue",includeProperty:!1}),Eh(s,void 0,{id:"toValue",includeProperty:!1}),...a!=null?[Eh(a,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[d,u]=await Promise.all([c,h]);this.nodesDataModel=d?.dataModel,this.nodesProcessedData=d?.processedData,this.linksDataModel=u?.dataModel,this.linksProcessedData=u?.processedData;const g=new Map;if(d==null){const f=u.dataModel.resolveColumnById(this,"fromValue",u.processedData),y=u.dataModel.resolveColumnById(this,"toValue",u.processedData),m=x=>{const v=g.size;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:v},type:1,index:v,linksBefore:[],linksAfter:[],id:x,size:0,label:x}};u.processedData.dataSources.get(this.id)?.forEach((x,v)=>{const S=f[v],b=y[v];S==null||b==null||(g.has(S)||g.set(S,m(S)),g.has(b)||g.set(b,m(b)))})}else{const f=d.dataModel.resolveColumnById(this,"idValue",d.processedData),y=r!=null?d.dataModel.resolveColumnById(this,"labelValue",d.processedData):void 0;d.processedData.dataSources.get(this.id)?.forEach((m,x)=>{const v=f[x],S=y?.[x];g.set(v,{series:this,itemId:void 0,datum:m,datumIndex:{type:1,index:x},type:1,index:x,linksBefore:[],linksAfter:[],id:v,size:0,label:S})})}this.processedNodes=g}getNodeGraph(t,e,{includeCircularReferences:i}){const{linksDataModel:o,linksProcessedData:s}=this;if(o==null||s==null){const{links:f,nodeGraph:y,maxPathLength:m}=dM(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:y,links:f,maxPathLength:m}}const{sizeKey:a}=this.properties,n=o.resolveColumnById(this,"fromValue",s),r=o.resolveColumnById(this,"toValue",s),l=a!=null?o.resolveColumnById(this,"sizeValue",s):void 0,c=new Map;this.processedNodes.forEach(f=>{const y=t(f);c.set(f.id,y)});const h=[];s.dataSources.get(this.id)?.forEach((f,y)=>{const m=n[y],x=r[y],v=l!=null?l[y]:1,S=c.get(m),b=c.get(x);if(v<=0||S==null||b==null)return;const D=e({series:this,itemId:void 0,datum:f,datumIndex:{type:0,index:y},type:0,index:y,fromNode:S,toNode:b,size:v});h.push(D)});const{links:d,nodeGraph:u,maxPathLength:g}=dM(c.values(),h,i);return u.forEach(f=>{f.datum.linksBefore=f.linksBefore.map(y=>y.link),f.datum.linksAfter=f.linksAfter.map(y=>y.link)}),this.nodeCount=u.size,this.linkCount=d.length,{nodeGraph:u,links:d,maxPathLength:g}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(t){const{seriesRect:e}=t,i={seriesRectWidth:e?.width??0,seriesRectHeight:e?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const o=this.contextNodeData?.nodeData??[],s=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:h}=a;a=h!=null?o.find(d=>d.type===1&&d.id===h):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlightStyle.series.dimOpacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:s,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:o.filter(h=>h.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:o.filter(h=>h.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let n,r,l,c;a?.type===1?(n=o.filter(h=>h.type===0&&(h.toNode===a||h.fromNode===a)),r=n.map(h=>h.fromNode===a?h.toNode:h.fromNode),r.push(a),l=[],c=[a]):a?.type===0?(n=[a],r=[a.fromNode,a.toNode],l=[a],c=[]):(n=[],r=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:n,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:r,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(t){}getSeriesDomain(t){return[]}getSeriesRange(t,e){return[NaN,NaN]}legendItemSymbol(t,e,i={}){const{fills:o,strokes:s}=this.properties,{fill:a=o[e%o.length],fillOpacity:n=1,stroke:r=s[e%s.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:h=[0],lineDashOffset:d=0}=i;return{marker:{fill:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:d}}}getLegendData(t){if(t!=="category")return[];const{showInLegend:e}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:o},s)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:o??i},symbol:this.legendItemSymbol(1,s),hideInLegend:!e,isFixed:!0}))}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.linkSelection.each((s,a)=>{const n=s.containsPoint(t,e)?0:1/0;n<i&&(i=n,o=a)}),this.nodeSelection.each((s,a)=>{const n=s.distanceSquared(t,e);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}getDatumAriaText(t,e){if(t.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:t.index+1,count:this.linkCount,from:t.fromNode.id,to:t.toNode.id,size:t.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(t.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:t.index+1,count:this.nodeCount,description:e})}pickFocus(t){const{datumIndexDelta:e,otherIndexDelta:i}=t,o=this.contextNodeData?.nodeData[t.datumIndex-t.datumIndexDelta];let s=o;if(i!==0||e===0)return;if(o?.type===0){const r=Array.from(this.linkSelection,h=>h.datum),c=r.indexOf(o)+e;if(c>=0&&c<r.length)s=r[c];else if(c>0)s=r[r.length-1];else{const h=Array.from(this.nodeSelection,d=>d.datum);s=h[h.length-1]}}else if(o?.type===1){const r=Array.from(this.nodeSelection,h=>h.datum),c=r.indexOf(o)+e;c>=0&&c<r.length?s=r[c]:c<0?s=r[0]:s=Array.from(this.linkSelection,d=>d.datum)[0]}if(s==null)return;const a=s.type===1?Array.from(this.nodeSelection).find(r=>r.datum===s):Array.from(this.linkSelection).find(r=>r.datum===s);if(a==null)return;const n=this.computeFocusBounds(a.node);if(n!=null)return{datum:a.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(a.datum)??0,otherIndex:0,bounds:n,clipFocusBox:!0}}getCategoryValue(t){}datumIndexForCategoryValue(t){}};import{_ModuleSupport as J4}from"ag-charts-community";var{BBox:tW,Path:eW,ScenePathChangeDetection:Ss}=J4;function _h({radius:t,startAngle:e,endAngle:i,tension:o}){const s=t*Math.cos(e),a=t*Math.sin(e),n=t*Math.cos(i),r=t*Math.sin(i),l=s*o,c=a*o,h=n*o,d=r*o;return{x:[s,l,h,n],y:[a,c,d,r]}}var Fo=class extends eW{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}computeBBox(){const{centerX:t,centerY:e,radius:i,startAngle1:o,endAngle1:s,startAngle2:a,endAngle2:n,tension:r}=this,l=_h({radius:i,startAngle:o,endAngle:n,tension:r}),c=_h({radius:i,startAngle:a,endAngle:s,tension:r}),h=Math.min(...l.x,...c.x),d=Math.max(...l.x,...c.x)-h,u=Math.min(...l.y,...c.y),g=Math.max(...l.y,...c.y)-u;return new tW(t+h,e+u,d,g)}isPointInPath(t,e){return super.isPointInPath(t,e)&&this.getBBox().containsPoint(t,e)}tensionedCurveTo(t,e,i,o,s,a,n,r){const{path:l,tension:c}=this,h=1-c;l.cubicCurveTo((i-t)*h+t,(o-e)*h+e,(s-n)*h+n,(a-r)*h+r,n,r)}updatePath(){const{path:t,centerX:e,centerY:i,radius:o}=this;let{startAngle1:s,endAngle1:a,startAngle2:n,endAngle2:r}=this;s>n&&([s,n]=[n,s],[a,r]=[r,a]),t.clear();const l=e+o*Math.cos(s),c=i+o*Math.sin(s);t.moveTo(l,c),this.tensionedCurveTo(l,c,e,i,e,i,e+o*Math.cos(r),i+o*Math.sin(r)),t.arc(e,i,o,r,n,!0),this.tensionedCurveTo(e+o*Math.cos(n),i+o*Math.sin(n),e,i,e,i,e+o*Math.cos(a),i+o*Math.sin(a)),t.arc(e,i,o,a,s,!0),t.closePath()}};p([Ss()],Fo.prototype,"centerX",2),p([Ss()],Fo.prototype,"centerY",2),p([Ss()],Fo.prototype,"radius",2),p([Ss()],Fo.prototype,"startAngle1",2),p([Ss()],Fo.prototype,"endAngle1",2),p([Ss()],Fo.prototype,"startAngle2",2),p([Ss()],Fo.prototype,"endAngle2",2),p([Ss()],Fo.prototype,"tension",2);import{_ModuleSupport as iW}from"ag-charts-community";var{FillGradientDefaults:oW,FillPatternDefaults:sW,BaseProperties:fM,SeriesTooltip:aW,SeriesProperties:nW,ARRAY:rW,ARRAY_OF:lW,COLOR_STRING:Ur,COLOR_STRING_ARRAY:cW,FUNCTION:yM,LINE_DASH:mM,OBJECT:wn,POSITIVE_NUMBER:bs,RATIO:Yr,STRING:vs,OR:cf,COLOR_GRADIENT:hf,TempValidate:st,COLOR_PATTERN:pf,Label:hW}=iW,df=class extends hW{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};p([st(bs)],df.prototype,"spacing",2),p([st(bs)],df.prototype,"maxWidth",2);var uo=class extends fM{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};p([st(cf(hf,Ur,pf),{optional:!0})],uo.prototype,"fill",2),p([st(Yr)],uo.prototype,"fillOpacity",2),p([st(Ur,{optional:!0})],uo.prototype,"stroke",2),p([st(Yr)],uo.prototype,"strokeOpacity",2),p([st(bs)],uo.prototype,"strokeWidth",2),p([st(mM)],uo.prototype,"lineDash",2),p([st(bs)],uo.prototype,"lineDashOffset",2),p([st(Yr)],uo.prototype,"tension",2),p([st(yM,{optional:!0})],uo.prototype,"itemStyler",2);var Gi=class extends fM{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};p([st(bs)],Gi.prototype,"spacing",2),p([st(bs)],Gi.prototype,"width",2),p([st(cf(hf,Ur,pf),{optional:!0})],Gi.prototype,"fill",2),p([st(Yr)],Gi.prototype,"fillOpacity",2),p([st(Ur,{optional:!0})],Gi.prototype,"stroke",2),p([st(Yr)],Gi.prototype,"strokeOpacity",2),p([st(bs)],Gi.prototype,"strokeWidth",2),p([st(mM)],Gi.prototype,"lineDash",2),p([st(bs)],Gi.prototype,"lineDashOffset",2),p([st(yM,{optional:!0})],Gi.prototype,"itemStyler",2);var se=class extends nW{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new oW,this.fillPatternDefaults=new sW,this.fills=[],this.strokes=[],this.label=new df,this.link=new uo,this.node=new Gi,this.tooltip=new aW}};p([st(vs)],se.prototype,"fromKey",2),p([st(vs)],se.prototype,"toKey",2),p([st(vs)],se.prototype,"idKey",2),p([st(vs,{optional:!0})],se.prototype,"idName",2),p([st(vs,{optional:!0})],se.prototype,"labelKey",2),p([st(vs,{optional:!0})],se.prototype,"labelName",2),p([st(vs,{optional:!0})],se.prototype,"sizeKey",2),p([st(vs,{optional:!0})],se.prototype,"sizeName",2),p([st(rW,{optional:!0})],se.prototype,"nodes",2),p([st(wn)],se.prototype,"fillGradientDefaults",2),p([st(wn)],se.prototype,"fillPatternDefaults",2),p([st(lW(cf(hf,Ur,pf)))],se.prototype,"fills",2),p([st(cW)],se.prototype,"strokes",2),p([st(wn)],se.prototype,"label",2),p([st(wn)],se.prototype,"link",2),p([st(wn)],se.prototype,"node",2),p([st(wn)],se.prototype,"tooltip",2);var{SeriesNodePickMode:xM,CachedTextMeasurerPool:pW,TextWrapper:dW,TextUtils:uW,createDatumId:Bh,angleBetween:zh,normalizeAngle360:gW,isBetweenAngles:SM,Sector:fW,evaluateBezier:Fh,applyShapeStyle:bM,getShapeStyle:Vh,BBox:yW}=K4,Gh=t=>t.startAngle+zh(t.startAngle,t.endAngle)/2,Wh=class extends gM{constructor(t){super({moduleCtx:t,pickModes:[xM.NEAREST_NODE,xM.EXACT_SHAPE_MATCH]}),this.properties=new se}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Fo}nodeFactory(){return new fW}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:o,toKey:s,sizeKey:a,label:{spacing:n,maxWidth:r,fontSize:l},node:{width:c,spacing:h}}=this.properties,d=e/2,u=i/2;let g=[];const{nodeGraph:f,links:y}=this.getNodeGraph(L=>({...L,centerX:d,centerY:u,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),L=>({...L,centerX:d,centerY:u,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let m=0;f.forEach(({datum:L,linksBefore:C,linksAfter:P},R)=>{const E=C.reduce((z,{link:w})=>z+w.size,0)+P.reduce((z,{link:w})=>z+w.size,0);if(E===0)f.delete(R);else{L.size=E,m+=L.size;const z=this.getLabelText(this.properties.label,{datum:L.datum,value:L.label,fromKey:o,toKey:s,sizeKey:a,size:L.size});L.label=String(z)}});let x=0;if(this.isLabelEnabled()){const L=this.properties.label.getFont();let C=0;f.forEach(({datum:P})=>{const{id:R,label:E}=P;if(E==null)return;const z=dW.wrapText(E,{maxWidth:r,font:this.properties.label,textWrap:"never"}),{width:w}=pW.measureText(z,{font:L,textAlign:"left",textBaseline:"middle"});C=Math.max(w,C),g.push({id:R,text:z,centerX:d,centerY:u,angle:NaN,radius:NaN})}),x=C+n}const v=f.size;let S=Math.min(e,i)/2-c-x,b=h/S;if(x!==0&&(v*b>=1.5*Math.PI||S<=0)&&(g=[],S=Math.min(e,i)/2-c,b=h/S),v*b>=2*Math.PI||S<=0){U4.warnOnce("There was insufficient space to display the Chord Series.");return}const D=S,I=S+c,M=Math.max((2*Math.PI-v*b)/m,0);let k=0;f.forEach(({datum:L})=>{L.innerRadius=D,L.outerRadius=I,L.startAngle=k,L.endAngle=k+L.size*M,k=L.endAngle+b;const C=(L.innerRadius+L.outerRadius)/2,P=Gh(L);L.midPoint={x:L.centerX+C*Math.cos(P),y:L.centerY+C*Math.sin(P)}});const A=[];f.forEach(({datum:L,linksBefore:C,linksAfter:P})=>{const R=Gh(L),E=[...C.map(w=>({link:w.link,distance:zh(Gh(w.node.datum),R),after:!1})),...P.map(w=>({link:w.link,distance:zh(Gh(w.node.datum),R),after:!0}))];let z=L.startAngle;E.toSorted((w,B)=>w.distance-B.distance).forEach(({link:w,after:B})=>{const _=w.size*M;B?(w.startAngle1=z,w.endAngle1=z+_):(w.startAngle2=z,w.endAngle2=z+_),z+=w.size*M}),A.push(L)});const{tension:O}=this.properties.link;y.forEach(L=>{L.radius=S;const C=_h({radius:S,startAngle:L.startAngle1,endAngle:L.endAngle2,tension:O}),P=_h({radius:S,startAngle:L.startAngle2,endAngle:L.endAngle1,tension:O}),R=Fh(...C.x,.5),E=Fh(...C.y,.5),z=Fh(...P.x,.5),w=Fh(...P.y,.5);L.midPoint={x:L.centerX+(R+z)/2,y:L.centerY+(E+w)/2},A.push(L)}),g.forEach(L=>{const C=f.get(L.id)?.datum;C!=null&&(L.radius=I+n,L.angle=gW(C.startAngle+zh(C.startAngle,C.endAngle)/2))}),g.sort((L,C)=>L.angle-C.angle);let N=1/0,T=-1/0;return g=g.filter(L=>{const C=uW.getLineHeight(l),P=Math.atan2(C/2,L.radius),R=L.angle-P,E=L.angle+P;return SM(N,R,E)||SM(T,R,E)?!1:(N=Math.min(R,N),T=Math.max(E,T),!0)}),{itemId:t,nodeData:A,labelData:g}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{text:l,centerX:c,centerY:h,radius:d,angle:u})=>{r.visible=!0,r.translationX=c+d*Math.cos(u),r.translationY=h+d*Math.sin(u),r.text=l,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textBaseline="middle",Math.cos(u)>=0?(r.textAlign="left",r.rotation=u):(r.textAlign="right",r.rotation=u-Math.PI)})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Bh([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=e.node,l=t?e.highlightStyle.item:void 0;return Vh({fill:l?.fill??i,fillOpacity:l?.fillOpacity??o,stroke:l?.stroke??s,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.node.strokeWidth),lineDash:l?.lineDash??n,lineDashOffset:l?.lineDashOffset??r},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getNodeStyleOverrides(t,e,i,o,s,a,n){const{id:r,properties:l}=this,{fills:c,strokes:h}=l,{itemStyler:d}=l.node,u=a.fill??c[i%c.length],g=a.stroke??h[i%h.length];let f;if(n||(f??(f={}),f.fill=u,f.stroke=g),d!=null){const y=this.cachedDatumCallback(Bh(t,"node",n?"highlight":"node"),()=>{const{fillOpacity:m=1,strokeOpacity:x=1,strokeWidth:v=0,lineDash:S=[],lineDashOffset:b=0}=a;return this.callWithContext(d,{seriesId:r,datum:e,highlighted:n,label:s,size:o,fill:u,fillOpacity:m,stroke:g,strokeOpacity:x,strokeWidth:v,lineDash:S,lineDashOffset:b})});f??(f={}),Object.assign(f,y)}return Vh(f,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseNodeStyle(i),s=this.getShapeFillBBox();e.each((a,n)=>{const{datumIndex:r,size:l,label:c}=n,h=this.getNodeStyleOverrides(String(r.index),n.datum,r.index,l,c,o,i);bM(a,o,h,s),a.centerX=n.centerX,a.centerY=n.centerY,a.innerRadius=n.innerRadius,a.outerRadius=n.outerRadius,a.startAngle=n.startAngle,a.endAngle=n.endAngle,a.inset=a.strokeWidth/2})}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Bh([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:n,lineDashOffset:r,tension:l}=e.link,c=t?e.highlightStyle.item:void 0;return Vh({fill:c?.fill??i,fillOpacity:c?.fillOpacity??o,stroke:c?.stroke??s,strokeOpacity:c?.strokeOpacity??a,strokeWidth:c?.strokeWidth??this.getStrokeWidth(e.link.strokeWidth),lineDash:c?.lineDash??n,lineDashOffset:c?.lineDashOffset??r,tension:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getLinkStyleOverrides(t,e,i,o,s){const{id:a,properties:n}=this,{fills:r,strokes:l}=n,{itemStyler:c}=n.link,h=o.fill??r[i%r.length],d=o.stroke??l[i%l.length];let u;if(s||(u??(u={}),u.fill=h,u.stroke=d),c!=null){const g=this.cachedDatumCallback(Bh(t,"link",s?"highlight":"node"),()=>{const{fillOpacity:f=1,strokeOpacity:y=1,strokeWidth:m=0,lineDash:x=[],lineDashOffset:v=0,tension:S}=o;return this.callWithContext(c,{seriesId:a,datum:e,highlighted:s,tension:S,fill:h,fillOpacity:f,stroke:d,strokeOpacity:y,strokeWidth:m,lineDash:x,lineDashOffset:v})});u??(u={}),Object.assign(u,g)}return Vh(u,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseLinkStyle(i),s=this.getShapeFillBBox();e.each((a,n)=>{const{datumIndex:r}=n,l=n.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(r.index),n.datum,l.index,o,i);a.centerX=n.centerX,a.centerY=n.centerY,a.radius=n.radius,a.startAngle1=n.startAngle1,a.endAngle1=n.endAngle1,a.startAngle2=n.startAngle2,a.endAngle2=n.endAngle2,bM(a,o,c,s),a.tension=c?.tension??o.tension})}getShapeFillBBox(){const t=this._nodeDataDependencies?.seriesRectWidth??0,e=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(t,e),o=(t-i)/2,s=(e-i)/2,a=new yW(o,s,t,e);return{series:a,axis:a}}getTooltipContent(t){const{id:e,linksProcessedData:i,nodesProcessedData:o,properties:s}=this,{fromKey:a,toKey:n,sizeKey:r,sizeName:l,tooltip:c}=s,h=this.contextNodeData?.nodeData.find(m=>m.datumIndex.type===t.type&&m.datumIndex.index===t.index);if(h==null)return;const d=h.type===0?h.fromNode.index:h.index,u=h.type===0?`${h.fromNode.label} - ${h.toNode.label}`:h.label,g=t.type===0?i?.dataSources.get(this.id)?.[t.index]:o?.dataSources.get(this.id)?.[t.index],f=h.size;let y;if(h.type===0){const m=h.fromNode.datumIndex,x=this.getBaseLinkStyle(!1);Object.assign(x,this.getLinkStyleOverrides(String(t.index),g,m.index,x,!1)),y=x}else{const m=h.label,x=this.getBaseNodeStyle(!1);Object.assign(x,this.getNodeStyleOverrides(String(t.index),g,t.index,f,m,x,!1)),y=x}return c.formatTooltip(this.properties,{title:u,symbol:this.legendItemSymbol(h.type,d,y),data:r!=null?[{label:l,fallbackLabel:r,value:String(f)}]:[]},{seriesId:e,datum:g,title:u,fromKey:a,toKey:n,sizeKey:r,sizeName:l,size:f,...y})}computeFocusBounds(t){return t}};Wh.className="ChordSeries",Wh.type="chord";import{_ModuleSupport as mW}from"ag-charts-community";import{arrayOf as vM,callback as DM,color as xW,colorUnion as SW,constant as bW,fillGradientDefaults as vW,fillOptionsDef as MM,fillPatternDefaults as DW,lineDashOptionsDef as kM,positiveNumber as Hh,ratio as MW,required as uf,string as Kh,strokeOptionsDef as OM}from"ag-charts-core";var{commonSeriesOptionsDefs:kW,seriesLabelOptionsDefs:OW,tooltipOptionsDefs:TW}=mW,gf={type:uf(bW("chord")),fromKey:uf(Kh),toKey:uf(Kh),sizeKey:Kh,sizeName:Kh,fills:vM(SW),strokes:vM(xW),label:{spacing:Hh,maxWidth:Hh,...OW},link:{tension:MW,itemStyler:DM,...MM,...OM,...kM},node:{width:Hh,spacing:Hh,itemStyler:DM,...MM,...OM,...kM},tooltip:TW,...kW};gf.fillGradientDefaults=vW,gf.fillPatternDefaults=DW;var AW={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},moduleFactory:t=>new Wh(t),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:H4.FILL_PATTERN_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},IW={type:"series",name:"chord",chartType:"flow-proportion",enterprise:!0,options:gf,create:t=>new Wh(t)};import"ag-charts-community";import{_ModuleSupport as TM}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Pn,CARTESIAN_POSITION:En},ThemeSymbols:{DEFAULT_SHADOW_COLOUR:NW}}=TM,AM={$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},[{type:Pn.NUMBER,position:En.LEFT},{type:Pn.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"before"]},En.TOP,En.BOTTOM]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}}],[{type:Pn.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"after"]},En.RIGHT,En.LEFT]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}},{type:Pn.NUMBER,position:En.BOTTOM}]]},CW={series:{direction:"vertical",strokeWidth:0,spacingRatio:.25,fills:[{$palette:"fill"}],strokes:[{$palette:"stroke"}],fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:TM.FILL_PATTERN_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:0},shadow:{enabled:!1,color:NW,xOffset:3,yOffset:3,blur:5}},axes:{[Pn.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[Pn.CATEGORY]:{line:{enabled:!1}}}};import{_ModuleSupport as LW}from"ag-charts-community";import{_ModuleSupport as ff}from"ag-charts-community";import{_ModuleSupport as RW}from"ag-charts-community";var{lineDistanceSquared:Uh,BBox:wW,Path:PW,ScenePathChangeDetection:Ds}=RW,IM=1e-6;function NM([t,e],[i,o]){return Math.abs(t-i)<=IM&&Math.abs(e-o)<=IM}var go=class extends PW{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:t,y0:e,x1:i,y1:o,x2:s,y2:a,x3:n,y3:r}=this;return{x:(t+i+s+n)/4,y:(e+o+a+r)/4}}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;const{x0:i,y0:o,x1:s,y1:a,x2:n,y2:r,x3:l,y3:c}=this;return Math.min(Uh(t,e,i,o,s,a,1/0),Uh(t,e,s,a,n,r,1/0),Uh(t,e,n,r,l,c,1/0),Uh(t,e,l,c,i,o,1/0))}computeBBox(){const{x0:t,y0:e,x1:i,y1:o,x2:s,y2:a,x3:n,y3:r}=this,l=Math.min(t,i,s,n),c=Math.max(t,i,s,n)-l,h=Math.min(e,o,a,r),d=Math.max(e,o,a,r)-h;return new wW(l,h,c,d)}updatePath(){const{path:t,x0:e,y0:i,x1:o,y1:s,x2:a,y2:n,x3:r,y3:l}=this,c=[[e,i],[o,s],[a,n],[r,l]];t.clear();let h,d;c.forEach(u=>{if(h!=null&&NM(h,u)||d!=null&&NM(d,u))return;const[g,f]=u;h==null?t.moveTo(g,f):t.lineTo(g,f),h??(h=u),d=u}),t.closePath()}};p([Ds()],go.prototype,"x0",2),p([Ds()],go.prototype,"y0",2),p([Ds()],go.prototype,"x1",2),p([Ds()],go.prototype,"y1",2),p([Ds()],go.prototype,"x2",2),p([Ds()],go.prototype,"y2",2),p([Ds()],go.prototype,"x3",2),p([Ds()],go.prototype,"y3",2);import{_ModuleSupport as EW}from"ag-charts-community";var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:_W}=EW;function CM(t,e,i,o){const{x0:s,y0:a,x1:n,y1:r,x2:l,y2:c,x3:h,y3:d,opacity:u}=t;return i?{x0:(s+h)/2,y0:(a+d)/2,x1:(n+l)/2,y1:(r+c)/2,x2:(n+l)/2,y2:(r+c)/2,x3:(s+h)/2,y3:(a+d)/2,opacity:u}:{x0:(s+n)/2,y0:(a+r)/2,x1:(s+n)/2,y1:(a+r)/2,x2:(l+h)/2,y2:(c+d)/2,x3:(l+h)/2,y3:(c+d)/2,opacity:u}}function BW(t,e){const i=a=>a==null;return{fromFn:(a,n,r)=>{r==="updated"&&i(n)?r="removed":r==="updated"&&i(a.previousDatum)&&(r="added");let l;r==="added"&&a.previousDatum==null&&e==="fade"?l={...jr(a,n),opacity:0}:r==="unknown"||r==="added"?l=CM(n,a.previousDatum,t,e):l={x0:a.x0,y0:a.y0,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,x3:a.x3,y3:a.y3,opacity:a.opacity};const c=_W[r];return{...l,phase:c}},toFn:(a,n,r)=>{let l;return r==="removed"&&a.datum==null&&e==="fade"?l={...jr(a,n),opacity:0}:r==="removed"||i(n)?l=CM(n,a.previousDatum,t,e):l=jr(a,n),l}}}function jr(t,e){const{x0:i,y0:o,x1:s,y1:a,x2:n,y2:r,x3:l,y3:c,opacity:h}=e;return{x0:i,y0:o,x1:s,y1:a,x2:n,y2:r,x3:l,y3:c,opacity:h}}var{SeriesNodePickMode:LM,SeriesZIndexMap:RM,valueProperty:zW,keyProperty:FW,ChartAxisDirection:wM,updateLabelNode:VW,SMALLEST_KEY_INTERVAL:GW,LARGEST_KEY_INTERVAL:WW,diff:HW,fixNumericExtent:KW,seriesLabelFadeInAnimation:PM,resetMotion:UW,resetLabelFn:YW,animationValidation:jW,computeBarFocusBounds:$W,ContinuousScale:XW,Group:ZW,Selection:qW,PointerEvents:EM,motion:QW,checkCrisp:JW,createDatumId:tH,applyShapeFillBBox:eH,getShapeStyle:iH,getShapeFill:oH}=ff,sH=class extends ff.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.stageKey,this.yKey=o.properties.valueKey}},_M=class extends ff.AbstractBarSeries{constructor({moduleCtx:t,animationResetFns:e}){super({moduleCtx:t,pickModes:[LM.AXIS_ALIGNED,LM.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["stageKey"],y:["valueKey"]},directionNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:e.datum,label:YW}}),this.NodeEvent=sH,this.connectorNodeGroup=this.contentGroup.appendChild(new ZW({name:`${this.id}-series-connectorNodes`,zIndex:RM.BACKGROUND})),this.connectorSelection=qW.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=EM.None}get pickModeAxis(){return"main-category"}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.connectorNodeGroup.zIndex=[RM.BACKGROUND,t],!0):!1}isVertical(){return!super.isVertical()}connectionFactory(){return new go}async processData(t){if(!this.properties.isValid())return;const{stageKey:e,valueKey:i}=this.properties,{visible:o,id:s}=this,a=(f,y,m)=>o&&this.ctx.legendManager.getItemEnabled({seriesId:s,itemId:m}),n=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:n,yScale:r}),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(HW(this.id,this.processedData)),d.push(jW()));const u=this.visible?{}:{forceValue:0},{processedData:g}=await this.requestDataModel(t,this.data,{props:[FW(e,c,{id:"xValue"}),zW(i,h,{id:"yValue",...u,validation:a,invalidValue:0}),...l?[GW,WW]:[],...d],groupByKeys:!1});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.largestDataInterval=g.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,id:o,ctx:{legendManager:s}}=this;if(!e||!i)return[];const{keys:[a]}=e.domain;if(t===this.getCategoryDirection()){const n=i.resolveProcessedDataDefById(this,"xValue");return n?.def.type==="key"&&n?.def.valueType==="category"?this.hasData?a.filter((r,l)=>s.getItemEnabled({seriesId:o,itemId:l})):[]:this.padBandExtent(a)}else{const n=this.domainForClippedRange(wM.Y,["yValue"],"xValue",!0),r=Math.max(...n),l=[-r,r];return KW(l)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{hasData:t,data:e,dataModel:i,groupScale:o,processedData:s,id:a,ctx:{legendManager:n}}=this,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(t&&e&&r&&l&&i&&s?.type==="ungrouped"))return;const c=r.scale,h=l.scale,d=this.getBarDirection()===wM.X,{stageKey:u,valueKey:g}=this.properties,{strokeWidth:f}=this.barStyle(),y=`${g}`,m={itemId:y,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),visible:this.visible},x=this.visible;if(!x)return m;const v=i.resolveKeysById(this,"xValue",s),S=i.resolveColumnById(this,"yValue",s),{barWidth:b,groupIndex:D}=this.updateGroupScale(r),I=XW.is(c)?b*-.5:0,M=JW(r?.scale,r?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let k;return(s.dataSources.get(this.id)??[]).forEach((O,N)=>{const T=x&&n.getItemEnabled({seriesId:a,itemId:N}),L=v[N];if(L==null)return;const C=Math.round(c.convert(L))+o.convert(String(D))+I,P=S[N],R=Math.round(h.convert(-P)),E=Math.round(h.convert(P)),z=Math.max(f,Math.abs(E-R)),w={x:d?Math.min(E,R):C,y:d?C:Math.min(E,R),width:d?z:b,height:d?b:z},B={x:w.x+w.width/2,y:w.y+w.height/2},_=this.createLabelData({datumIndex:N,rect:w,barAlongX:d,yDatum:P,datum:O,visible:T}),F={index:N,series:this,itemId:y,datum:O,datumIndex:N,xValue:L,yValue:P,xKey:u,yKey:g,x:w.x,y:w.y,width:w.width,height:w.height,midPoint:B,strokeWidth:f,crisp:M,label:_,visible:T};if(m.nodeData.push(F),_!=null&&m.labelData.push(_),k!=null){const V=k.rect,G=k.nodeDatum,W=k.datumIndex;d?m.connectorData.push({datum:G,datumIndex:W,x0:V.x,y0:V.y+V.height,x1:V.x+V.width,y1:V.y+V.height,x2:w.x+w.width,y2:w.y,x3:w.x,y3:w.y,opacity:1}):m.connectorData.push({datum:G,datumIndex:W,x0:V.x+V.width,y0:V.y,x1:w.x,y1:w.y,x2:w.x,y2:w.y+w.height,x3:V.x+V.width,y3:V.y+V.height,opacity:1})}T&&(k={itemId:y,rect:w,nodeDatum:F,datumIndex:N})}),m}updateNodes(t,e,i){super.updateNodes(t,e,i);const{connectorSelection:o}=this,s=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:o,connectorData:s}),this.updateConnectorNodes({connectorSelection:o})}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o,void 0,s=>this.getDatumId(s))}updateConnectorSelection(t){const{connectorData:e,connectorSelection:i}=t;return i.update(this.connectorEnabled()?e:[],void 0,o=>this.getDatumId(o.datum))}updateConnectorNodes(t){const{fills:e,strokes:i,fillGradientDefaults:o,fillPatternDefaults:s}=this.properties,{fill:a,fillOpacity:n,stroke:r,strokeOpacity:l,strokeWidth:c,lineDash:h,lineDashOffset:d}=this.connectorStyle(),u=this.getShapeFillBBox();t.connectorSelection.each((g,f)=>{const{datumIndex:y}=f;g.setProperties(jr(g,f));const m=oH(a??e[y%e.length],o,s);g.fill=m,eH(g,m,u),g.fillOpacity=n,g.stroke=r??i[y%i.length],g.strokeOpacity=l,g.strokeWidth=c,g.lineDash=h,g.lineDashOffset=d})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=EM.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{VW(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{stageKey:a,valueKey:n,tooltip:r}=s,l=this.getCategoryAxis(),c=this.getValueAxis();if(!i||!o||!l||!c)return;const h=o.dataSources.get(this.id)?.[t],d=i.resolveKeysById(this,"xValue",o)[t],u=i.resolveColumnById(this,"yValue",o)[t];if(d!=null)return r.formatTooltip(this.properties,{symbol:this.legendItemSymbol(t),data:[{label:l.formatDatum(d),value:c.formatDatum(u)}]},{seriesId:e,datum:h,title:a,stageKey:a,valueKey:n,...this.tooltipStyle(h,t)})}resetAllAnimation(t){super.resetAllAnimation(t),UW([this.connectorSelection],jr)}animateEmptyUpdateReady({labelSelection:t}){const{connectorSelection:e}=this,i=this.isVertical(),s=BW(i,"normal");QW.fromToMotion(this.id,"connectors",this.ctx.animationManager,[e],s),PM(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(t){const{labelSelection:e}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id),PM(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return tH(t.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){return $W(this,this.contextNodeData?.nodeData[t])}legendItemSymbol(t){const{strokeWidth:e,fillOpacity:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,fillGradientDefaults:n,fillPatternDefaults:r}=this.barStyle(),{fills:l,strokes:c}=this.properties,h=l[t%l.length]??"black",d=c[t%c.length]??"black";return{marker:iH({fill:h,fillOpacity:i,stroke:d,strokeWidth:e,strokeOpacity:o,lineDash:s,lineDashOffset:a},n,r)}}getLegendData(t){const{id:e,processedData:i,dataModel:o,ctx:{legendManager:s},visible:a}=this;if(!o||!i||t!=="category"||!this.properties.isValid())return[];const{showInLegend:n}=this.properties,r=o.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)??[]).map((l,c)=>{const h=r[c];if(h!=null)return{legendType:"category",id:e,datum:l,itemId:c,seriesId:e,enabled:a&&s.getItemEnabled({seriesId:e,itemId:c}),label:{text:String(h)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!n}}).filter(l=>l!=null)}};import{_ModuleSupport as aH}from"ag-charts-community";var{FillGradientDefaults:nH,FillPatternDefaults:rH,Label:lH,AbstractBarSeriesProperties:cH,SeriesTooltip:hH,AxisLabel:pH,TempValidate:ce,UNION:BM,OR:dH,ARRAY_OF:uH,COLOR_GRADIENT:gH,COLOR_STRING:fH,COLOR_STRING_ARRAY:yH,COLOR_PATTERN:mH,LINE_DASH:xH,OBJECT:$r,POSITIVE_NUMBER:yf,RATIO:zM,STRING:FM}=aH,mf=class extends lH{constructor(){super(...arguments),this.spacing=0}};p([ce(BM(["before","middle","after"],"a placement"))],mf.prototype,"placement",2),p([ce(yf)],mf.prototype,"spacing",2);var VM=class extends pH{};p([ce(BM(["before","after"],"a placement"))],VM.prototype,"placement",2);var Ae=class extends cH{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new nH,this.fillPatternDefaults=new rH,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new mf,this.stageLabel=new VM,this.tooltip=new hH}};p([ce(FM)],Ae.prototype,"stageKey",2),p([ce(FM)],Ae.prototype,"valueKey",2),p([ce(uH(dH(gH,mH,fH)))],Ae.prototype,"fills",2),p([ce($r)],Ae.prototype,"fillGradientDefaults",2),p([ce($r)],Ae.prototype,"fillPatternDefaults",2),p([ce(zM)],Ae.prototype,"fillOpacity",2),p([ce(yH)],Ae.prototype,"strokes",2),p([ce(yf)],Ae.prototype,"strokeWidth",2),p([ce(zM)],Ae.prototype,"strokeOpacity",2),p([ce(xH)],Ae.prototype,"lineDash",2),p([ce(yf)],Ae.prototype,"lineDashOffset",2),p([ce($r)],Ae.prototype,"label",2),p([ce($r)],Ae.prototype,"stageLabel",2),p([ce($r)],Ae.prototype,"tooltip",2);function GM(t,{x:e,y:i,width:o,height:s,opacity:a}){return{x1:e,y1:i,x2:e+o,y2:i+s,opacity:a}}var{formatValue:SH,Line:bH}=LW,Yh=class extends _M{constructor(t){super({moduleCtx:t,animationResetFns:{datum:GM}}),this.properties=new Ae}get hasData(){const{id:t,ctx:{legendManager:e}}=this,i=this.data?.reduce((o,s,a)=>o+(e.getItemEnabled({seriesId:t,itemId:a})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults}}connectorStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:n}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:n}}nodeFactory(){return new bH}createLabelData({datumIndex:t,rect:e,barAlongX:i,yDatum:o,datum:s,visible:a}){const{stageKey:n,valueKey:r,label:l}=this.properties,{spacing:c,placement:h}=l;let d,u,g,f;if(i)switch(d=e.x+e.width/2,g="center",h){case"before":u=e.y-c,f="bottom";break;case"after":u=e.y+e.height+c,f="top";break;default:u=e.y+e.height/2,f="middle"}else switch(u=e.y+e.height/2,f="middle",h){case"before":d=e.x-c,g="right";break;case"after":d=e.x+e.width+c,g="left";break;default:d=e.x+e.width/2,g="center"}return{x:d,y:u,textAlign:g,textBaseline:f,text:this.getLabelText(l,{itemId:r,value:o,datum:s,stageKey:n,valueKey:r},y=>SH(y,0)),itemId:r,datum:s,datumIndex:t,series:this,visible:a}}updateDatumNodes(t){const e=t.isHighlight?this.properties.highlightStyle.item:void 0;t.datumSelection.each((i,o)=>{i.setProperties(GM(i,o)),i.stroke=e?.stroke,i.strokeWidth=e?.strokeWidth??0,i.strokeOpacity=e?.strokeOpacity??1,i.lineDash=e?.lineDash,i.lineDashOffset=e?.lineDashOffset??0})}tooltipStyle(t,e){const{fills:i,strokes:o}=this.properties,s=i[e%i.length]??"black",a=o[e%o.length]??"black",{fillOpacity:n,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}=this.barStyle();return{fill:s,fillOpacity:n,stroke:a,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}}};Yh.className="ConeFunnelSeries",Yh.type="cone-funnel";import{_ModuleSupport as vH}from"ag-charts-community";import{arrayOf as WM,boolean as HM,callback as DH,color as MH,colorUnion as kH,constant as OH,fillOptionsDef as TH,lineDashOptionsDef as AH,number as IH,positiveNumber as xf,required as Sf,string as bf,strokeOptionsDef as NH,union as vf}from"ag-charts-core";var{commonSeriesOptionsDefs:CH,seriesLabelOptionsDefs:KM,tooltipOptionsDefs:LH,without:UM}=vH,RH={type:Sf(OH("cone-funnel")),stageKey:Sf(bf),valueKey:Sf(bf),direction:vf("horizontal","vertical"),fills:WM(kH),strokes:WM(MH),showInMiniChart:HM,label:{spacing:xf,placement:vf("before","middle","after"),...KM},stageLabel:{rotation:IH,spacing:xf,minSpacing:xf,placement:vf("before","after"),avoidCollisions:HM,itemStyler:DH,format:bf,...KM},tooltip:LH,...CH,...UM(TH,["fill"]),...UM(NH,["stroke"]),...AH};import{_ModuleSupport as jh}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:YM}}=jh,wH={series:{direction:"vertical",fills:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},jh.SAFE_RANGE2_OPERATION]},strokes:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},jh.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:jh.FILL_PATTERN_DEFAULTS,strokeWidth:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4}},seriesArea:{padding:{top:20,bottom:20}},axes:{[YM.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[YM.CATEGORY]:{line:{enabled:!1}}}},PH={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"cone-funnel",moduleFactory:t=>new Yh(t),solo:!0,tooltipDefaults:{range:"nearest"},defaultAxes:AM,themeTemplate:wH},EH={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:RH,create:t=>new Yh(t)};import"ag-charts-community";import{_ModuleSupport as _H}from"ag-charts-community";import{_ModuleSupport as BH}from"ag-charts-community";var{FillGradientDefaults:zH,FillPatternDefaults:FH,Label:VH,DropShadow:GH,AbstractBarSeriesProperties:WH,BaseProperties:HH,SeriesTooltip:KH,AxisLabel:UH,TempValidate:ut,UNION:YH,BOOLEAN:jH,ARRAY_OF:$H,OR:jM,COLOR_GRADIENT:$M,COLOR_STRING_ARRAY:XH,COLOR_PATTERN:XM,COLOR_STRING:Df,FUNCTION:ZH,LINE_DASH:ZM,OBJECT:Ma,POSITIVE_NUMBER:$h,RATIO:Xr,STRING:qM}=BH,qH=class extends VH{},QM=class extends UH{};p([ut(YH(["before","after"],"a placement"))],QM.prototype,"placement",2);var Vo=class extends HH{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([ut(jH)],Vo.prototype,"enabled",2),p([ut(jM($M,Df,XM),{optional:!0})],Vo.prototype,"fill",2),p([ut(Xr)],Vo.prototype,"fillOpacity",2),p([ut(Df,{optional:!0})],Vo.prototype,"stroke",2),p([ut($h)],Vo.prototype,"strokeWidth",2),p([ut(Xr)],Vo.prototype,"strokeOpacity",2),p([ut(ZM)],Vo.prototype,"lineDash",2),p([ut($h)],Vo.prototype,"lineDashOffset",2);var Qt=class extends WH{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new zH,this.fillPatternDefaults=new FH,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new Vo,this.shadow=new GH().set({enabled:!1}),this.label=new qH,this.stageLabel=new QM,this.tooltip=new KH}};p([ut(qM)],Qt.prototype,"stageKey",2),p([ut(qM)],Qt.prototype,"valueKey",2),p([ut($H(jM($M,XM,Df)))],Qt.prototype,"fills",2),p([ut(Ma)],Qt.prototype,"fillGradientDefaults",2),p([ut(Ma)],Qt.prototype,"fillPatternDefaults",2),p([ut(Xr)],Qt.prototype,"fillOpacity",2),p([ut(XH)],Qt.prototype,"strokes",2),p([ut($h)],Qt.prototype,"strokeWidth",2),p([ut(Xr)],Qt.prototype,"strokeOpacity",2),p([ut(ZM)],Qt.prototype,"lineDash",2),p([ut($h)],Qt.prototype,"lineDashOffset",2),p([ut(Xr)],Qt.prototype,"spacingRatio",2),p([ut(ZH,{optional:!0})],Qt.prototype,"itemStyler",2),p([ut(Ma)],Qt.prototype,"dropOff",2),p([ut(Ma)],Qt.prototype,"shadow",2),p([ut(Ma)],Qt.prototype,"label",2),p([ut(Ma)],Qt.prototype,"stageLabel",2),p([ut(Ma)],Qt.prototype,"tooltip",2);var{ChartAxisDirection:QH,resetBarSelectionsFn:JH,prepareBarAnimationFunctions:JM,midpointStartingBarPosition:tk,createDatumId:t3,formatValue:e3,Rect:i3,motion:ek,applyShapeStyle:o3,getShapeStyle:ik}=_H,Xh=class extends _M{constructor(t){super({moduleCtx:t,animationResetFns:{datum:JH}}),this.properties=new Qt}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:n}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:n}}connectorStyle(){const{fill:t,fillOpacity:e,stroke:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n}=this.properties.dropOff;return{fill:t,fillOpacity:e,stroke:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults}}nodeFactory(){return new i3}createLabelData({datumIndex:t,rect:e,yDatum:i,datum:o,visible:s}){const{valueKey:a,stageKey:n,label:r}=this.properties;return{x:e.x+e.width/2,y:e.y+e.height/2,textAlign:"center",textBaseline:"middle",text:this.getLabelText(r,{itemId:n,value:i,datum:o,valueKey:a,stageKey:n},l=>e3(l,0)),itemId:n,datum:o,datumIndex:t,series:this,visible:s}}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return ik({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},e.fillGradientDefaults,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:n}=this,{stageKey:r,valueKey:l,fills:c,strokes:h,itemStyler:d}=n,u=o.fill??c[i%c.length]??"black",g=o.stroke??h[i%h.length]??"black",f={};if(s||(f.fill=u,f.stroke=g),d!=null){const y=this.cachedDatumCallback(t3(t,s?"highlight":"node"),()=>{const{fillOpacity:m,strokeOpacity:x,strokeWidth:v,lineDash:S,lineDashOffset:b}=o;return this.callWithContext(d,{seriesId:a,datum:e,highlighted:s,stageKey:r,valueKey:l,fill:u,fillOpacity:m,stroke:g,strokeOpacity:x,strokeWidth:v,lineDash:S,lineDashOffset:b})});Object.assign(f,y)}return ik(f,n.fillGradientDefaults,n.fillPatternDefaults)}updateDatumNodes(t){const{shadow:e}=this.properties,{datumSelection:i,isHighlight:o}=t,s=this.getCategoryDirection()===QH.X,a=this.getItemBaseStyle(o),n=this.getShapeFillBBox();i.each((r,l)=>{const{datumIndex:c}=l,h=this.getItemStyleOverrides(String(l.datumIndex),l.datum,c,a,o);o3(r,a,h,n),r.visible=s?l.width>0:l.height>0,r.crisp=l.crisp,r.fillShadow=e})}tooltipStyle(t,e){const i=this.getItemBaseStyle(!1);return Object.assign(i,this.getItemStyleOverrides(String(e),t,e,i,!1)),i}animateEmptyUpdateReady(t){super.animateEmptyUpdateReady(t);const{datumSelection:e}=t,i=this.isVertical(),s=JM(tk(i,"normal"));ek.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],s)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t);const{datumSelection:e}=t,{processedData:i}=this,o=i?.reduced?.diff?.[this.id],s=JM(tk(this.isVertical(),"fade"));ek.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],s,(a,n)=>n.xValue,o)}};Xh.className="FunnelSeries",Xh.type="funnel";import{_ModuleSupport as s3}from"ag-charts-community";import{arrayOf as ok,boolean as Zh,callback as sk,color as a3,colorUnion as n3,constant as r3,fillOptionsDef as ak,lineDashOptionsDef as nk,number as l3,positiveNumber as rk,ratio as c3,required as Mf,string as kf,strokeOptionsDef as lk,union as ck}from"ag-charts-core";var{commonSeriesOptionsDefs:h3,seriesLabelOptionsDefs:hk,shadowOptionsDefs:p3,tooltipOptionsDefs:d3,without:pk}=s3,u3={type:Mf(r3("funnel")),stageKey:Mf(kf),valueKey:Mf(kf),direction:ck("horizontal","vertical"),fills:ok(n3),strokes:ok(a3),showInMiniChart:Zh,itemStyler:sk,spacingRatio:c3,crisp:Zh,dropOff:{enabled:Zh,...ak,...lk,...nk},stageLabel:{rotation:l3,spacing:rk,minSpacing:rk,placement:ck("before","after"),avoidCollisions:Zh,itemStyler:sk,format:kf,...hk},label:hk,tooltip:d3,shadow:p3,...h3,...pk(ak,["fill"]),...pk(lk,["stroke"]),...nk},g3={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"funnel",moduleFactory:t=>new Xh(t),solo:!0,tooltipDefaults:{range:"exact"},defaultAxes:AM,themeTemplate:CW},f3={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:u3,create:t=>new Xh(t)};import{_ModuleSupport as dk}from"ag-charts-community";import{_ModuleSupport as _n}from"ag-charts-community";var uk=class{*[Symbol.iterator](){const{node:t,datum:e}=this;t&&e&&(yield{node:t,datum:e})}nodes(){return this.node?[this.node]:[]}update(t,e,i,o){const s=t.nodes();if(s.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,e.appendChild(this.node));const a=s[0],n=s.toReversed().find(r=>r.datum.datum.value>r.datum.datum.segmentStart)??s[s.length-1];this.node.datum=this.datum=a.datum,o(this.node,a,n)}}},gk={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function fk(t,e){if(t==null)return"";const{min:i,max:o}=e,s=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,a=o!==0?Math.ceil(Math.log10(Math.abs(o))):0,n=Math.max(2-Math.max(s,a),0);return t.toFixed(n)}function Zr(t,e,i){if(e.text!=null)return e.text;const o=i??e.value,s=e?.formatter?.({seriesId:t.id,datum:void 0,value:o});if(s!=null)return String(s)}import"ag-charts-community";function yk({path:t,x:e,y:i,size:o}){t.moveTo(e,i-o/2),t.lineTo(e,i+o/2)}import"ag-charts-community";import{clamp as mk,iterate as y3}from"ag-charts-core";function xk(t,e){const i=y3(t.datumUnion.nodes(),t.targetSelection.nodes());return t.pickNodeNearestDistantObject(e,i)}function Sk(t,e){const i=[{data:t.contextNodeData?.nodeData,selection:t.datumUnion},{data:t.contextNodeData?.targetData,selection:t.targetSelection}].filter(l=>l.data&&l.data.length>0),o=mk(0,e.otherIndex+e.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:s,selection:a}=i[o];if(s==null||s.length===0)return;const n=mk(0,e.datumIndex,s.length-1),r=s[n];for(const l of a)if(l.datum===r)return{bounds:l.node,clipFocusBox:!0,datum:r,datumIndex:n,otherIndex:o}}import{_ModuleSupport as Of}from"ag-charts-community";import{_ModuleSupport as m3}from"ag-charts-community";var{MARKER_SHAPE:x3,UNION:Tf,OR:S3}=m3,qh=Tf(["continuous","discrete"],"a fill mode"),bk=S3(x3,Tf(["line"],"a marker shape")),vk=Tf(["container","item"],"a corner mode");import{_ModuleSupport as b3}from"ag-charts-community";import{Logger as v3}from"ag-charts-core";var{BaseProperties:Dk,TempValidate:Bn,OBJECT:D3,BOOLEAN:M3,NUMBER:Af,NUMBER_ARRAY:k3}=b3,Qh=class extends Dk{getSegments(t,e){const{values:i,step:o,count:s}=this,a=Math.min(...t.domain),n=Math.max(...t.domain);let r;if(i!=null){const l=i.filter(c=>c>a&&c<n).sort((c,h)=>c-h);r=[a,...l,n]}else if(o!=null){const l=[];for(let c=a;c<n;c+=o)l.push(c);l.push(n),r=l}else if(s!=null){const l=s+1;r=Array.from({length:l+1},(c,h)=>h/l*(n-a)+a)}else{const l=t.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.filter(c=>c>a&&c<n);r=l!=null?[a,...l,n]:void 0}return r!=null&&r.length>e&&(v3.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),r=void 0),r??(r=[a,n]),r}};p([Bn(k3,{optional:!0})],Qh.prototype,"values",2),p([Bn(Af,{optional:!0})],Qh.prototype,"step",2),p([Bn(Af,{optional:!0})],Qh.prototype,"count",2);var qr=class extends Dk{constructor(){super(...arguments),this.enabled=!1,this.interval=new Qh,this.spacing=0}};p([Bn(M3)],qr.prototype,"enabled",2),p([Bn(D3)],qr.prototype,"interval",2),p([Bn(Af)],qr.prototype,"spacing",2);var{BaseProperties:Jh,SeriesTooltip:O3,SeriesProperties:T3,PropertiesArray:If,TempValidate:U,BOOLEAN:Mk,COLOR_STRING:ka,COLOR_STRING_ARRAY:A3,FUNCTION:I3,LINE_DASH:Nf,NUMBER:Wi,OBJECT_ARRAY:Cf,OBJECT:fo,POSITIVE_NUMBER:yo,RATIO:Oa,STRING:kk,NUMBER_ARRAY:N3,UNION:tp,AND:Ok,LESS_THAN:C3,GREATER_THAN:L3,Label:R3,AxisLabel:w3}=Of,P3=tp(["before","after","middle"],"a placement"),E3=tp(["inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end"],"an placement"),_3=tp(["horizontal","vertical"],"an orientation"),B3=tp(["before","after"],"a placement"),Tk=class extends R3{};p([U(Wi,{optional:!0})],Tk.prototype,"spacing",2);var he=class extends Jh{constructor(){super(...arguments),this.value=0,this.label=new Tk}};p([U(kk,{optional:!0})],he.prototype,"text",2),p([U(Wi)],he.prototype,"value",2),p([U(bk,{optional:!0})],he.prototype,"shape",2),p([U(P3,{optional:!0})],he.prototype,"placement",2),p([U(Wi,{optional:!0})],he.prototype,"spacing",2),p([U(yo,{optional:!0})],he.prototype,"size",2),p([U(Wi,{optional:!0})],he.prototype,"rotation",2),p([U(ka,{optional:!0})],he.prototype,"fill",2),p([U(Oa,{optional:!0})],he.prototype,"fillOpacity",2),p([U(ka,{optional:!0})],he.prototype,"stroke",2),p([U(yo,{optional:!0})],he.prototype,"strokeWidth",2),p([U(Oa,{optional:!0})],he.prototype,"strokeOpacity",2),p([U(Nf,{optional:!0})],he.prototype,"lineDash",2),p([U(yo,{optional:!0})],he.prototype,"lineDashOffset",2),p([U(fo)],he.prototype,"label",2);var ni=class extends Jh{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new If(Of.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([U(Mk)],ni.prototype,"enabled",2),p([U(yo,{optional:!0})],ni.prototype,"thickness",2),p([U(Oa)],ni.prototype,"thicknessRatio",2),p([U(Cf)],ni.prototype,"fills",2),p([U(qh)],ni.prototype,"fillMode",2),p([U(ka,{optional:!0})],ni.prototype,"fill",2),p([U(Oa)],ni.prototype,"fillOpacity",2),p([U(ka)],ni.prototype,"stroke",2),p([U(yo)],ni.prototype,"strokeWidth",2),p([U(Oa)],ni.prototype,"strokeOpacity",2),p([U(Nf)],ni.prototype,"lineDash",2),p([U(yo)],ni.prototype,"lineDashOffset",2);var Qr=class extends Jh{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};p([U(N3,{optional:!0})],Qr.prototype,"values",2),p([U(Wi,{optional:!0})],Qr.prototype,"step",2),p([U(Wi)],Qr.prototype,"minSpacing",2),p([U(Wi)],Qr.prototype,"maxSpacing",2);var Ak=class extends w3{constructor(){super(...arguments),this.placement=void 0}};p([U(B3,{optional:!0})],Ak.prototype,"placement",2);var Se=class extends Jh{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new If(Of.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Qr,this.label=new Ak}};p([U(Ok(Wi,C3("max")))],Se.prototype,"min",2),p([U(Ok(Wi,L3("min")))],Se.prototype,"max",2),p([U(Cf)],Se.prototype,"fills",2),p([U(qh)],Se.prototype,"fillMode",2),p([U(ka,{optional:!0})],Se.prototype,"fill",2),p([U(Oa)],Se.prototype,"fillOpacity",2),p([U(ka)],Se.prototype,"stroke",2),p([U(yo)],Se.prototype,"strokeWidth",2),p([U(Oa)],Se.prototype,"strokeOpacity",2),p([U(Nf)],Se.prototype,"lineDash",2),p([U(yo)],Se.prototype,"lineDashOffset",2),p([U(ka)],Se.prototype,"defaultFill",2),p([U(fo)],Se.prototype,"interval",2),p([U(fo)],Se.prototype,"label",2);var ep=class extends po{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};p([U(kk,{optional:!0})],ep.prototype,"text",2),p([U(E3)],ep.prototype,"placement",2),p([U(Mk)],ep.prototype,"avoidCollisions",2);var pe=class extends T3{constructor(){super(...arguments),this.value=0,this.segmentation=new qr,this.defaultColorRange=[],this.targets=new If(he),this.defaultTarget=new he,this.defaultScale=new Se,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new Se,this.bar=new ni,this.label=new ep,this.tooltip=new O3}};p([U(Wi)],pe.prototype,"value",2),p([U(fo)],pe.prototype,"segmentation",2),p([U(A3)],pe.prototype,"defaultColorRange",2),p([U(Cf)],pe.prototype,"targets",2),p([U(fo)],pe.prototype,"defaultTarget",2),p([U(fo)],pe.prototype,"defaultScale",2),p([U(_3)],pe.prototype,"direction",2),p([U(yo)],pe.prototype,"thickness",2),p([U(yo)],pe.prototype,"cornerRadius",2),p([U(vk)],pe.prototype,"cornerMode",2),p([U(Wi)],pe.prototype,"margin",2),p([U(fo)],pe.prototype,"scale",2),p([U(fo)],pe.prototype,"bar",2),p([U(I3,{optional:!0})],pe.prototype,"itemStyler",2),p([U(fo)],pe.prototype,"label",2),p([U(fo)],pe.prototype,"tooltip",2);import{_ModuleSupport as z3}from"ag-charts-community";var{CachedTextMeasurerPool:F3,BBox:V3}=z3;function Lf(t){const{x0:e,y0:i,x1:o,y1:s,horizontalInset:a,verticalInset:n}=t,r=Math.min(e,o)+a,l=Math.min(i,s)+n,c=Math.max(Math.abs(o-e)-2*a,0),h=Math.max(Math.abs(s-i)-2*n,0);return{x:r,y:l,width:c,height:h}}function G3(t,e){if(e==null)return!0;const i=Lf(t),o=1e-6,s=i.x+o,a=i.y+o,n=i.x+i.width-o,r=i.y+i.height-o,l=e.x,c=e.x+e.width,h=e.y,d=e.y+e.height;return Math.max(s,l)<=Math.min(n,c)&&Math.max(a,h)<=Math.min(r,d)}function Rf(t){const{clipX0:e,clipX1:i,clipY0:o,clipY1:s}=t;return e!=null&&i!=null||o!=null&&s!=null}function W3(t){if(!Rf(t))return;const{x0:e,y0:i,x1:o,y1:s}=t,{x:a,y:n,width:r,height:l}=Lf(t);let{clipX0:c,clipX1:h,clipY0:d,clipY1:u}=t;(c==null||h==null)&&(c=e,h=o),(d==null||u==null)&&(d=i,u=s);const g=Math.min(c,h),f=Math.min(d,u),y=Math.abs(h-c),m=Math.abs(u-d);return c=Math.max(a,g),d=Math.max(n,f),h=Math.min(a+r,g+y),u=Math.min(n+l,f+m),new V3(Math.min(c,h),Math.min(d,u),Math.abs(h-c),Math.abs(u-d))}function Ik(t,e){const i=t?"initial":"update";return{node:{fromFn(s,a){const n=s.previousDatum;let{x0:r,y0:l,x1:c,y1:h,clipX0:d,clipY0:u,clipX1:g,clipY1:f}=n??a;const{horizontalInset:y,verticalInset:m}=a,x=n!=null&&Rf(n),v=Rf(a);return x&&v||(!x&&v?({x0:r,y0:l,x1:c,y1:h,clipX0:d,clipY0:u,clipX1:g,clipY1:f}=a,t&&(e?g=a.clipX0:f=a.clipY0)):x&&!v?({x0:r,y0:l,x1:c,y1:h}=a,d=void 0,u=void 0,g=void 0,f=void 0):t&&(e?c=r:h=l)),{x0:r,y0:l,x1:c,y1:h,clipX0:d,clipY0:u,clipX1:g,clipY1:f,horizontalInset:y,verticalInset:m,phase:i}},toFn(s,a){const{x0:n,y0:r,x1:l,y1:c,clipX0:h,clipY0:d,clipX1:u,clipY1:g,horizontalInset:f,verticalInset:y}=a;return{x0:n,y0:r,x1:l,y1:c,clipX0:h,clipY0:d,clipX1:u,clipY1:g,horizontalInset:f,verticalInset:y}},applyFn(s,a){s.setProperties(ip(s,a))}}}}function ip(t,e){const{x:i,y:o,width:s,height:a}=Lf(e),n=W3(e),r=G3(e,n);return{x:i,y:o,width:s,height:a,clipBBox:n,visible:r}}var H3={Before:"right",Center:"center",After:"left"},K3={Before:"top",Center:"middle",After:"bottom"},U3={Before:-1,Center:-.5,After:0},Y3={Before:0,Center:-.5,After:-1};function j3(t,e,i,o,s){const{seriesRect:a,gaugeRect:n,barRect:r}=o,{padding:l,horizontal:c}=i;e.each((h,d)=>{const u=Zr(t,d,s?.label);let g,f;d.placement==="outside-start"?c?(g=n.x,f=a.height):(g=a.width,f=a.height-(n.y+n.height)):d.placement==="outside-end"?c?(g=a.width-(n.x+n.width),f=a.height):(g=a.width,f=n.y):d.avoidCollisions&&(g=n.width,f=n.height);let y;if(u==null)return;if(g!=null&&f!=null)y=Fr(u,d,{padding:l},()=>({width:g,height:f,meta:null}))?.[0];else{const C={fontSize:d.fontSize,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontFamily:d.fontFamily,lineHeight:d.lineHeight},{width:P,height:R}=F3.measureText(u,{font:C});y={text:u,fontSize:d.fontSize,lineHeight:kn(d,d.fontSize),width:P,height:R}}if(y==null){h.visible=!1;return}const m=c?n.x:n.y+n.height,x=c?n.x+n.width:n.y,v=c?r.x:r.y+r.height,S=c?r.x+r.width:r.y,b=d.spacing*(c?1:-1);let D,I,M,k;switch(d.placement){case"outside-start":D=-1/0,I=1/0,M=m-b,k="Before";break;case"outside-end":D=-1/0,I=1/0,M=x+b,k="After";break;case"inside-start":D=m,I=S,M=m+b,k="After";break;case"inside-end":D=S,I=x,M=x-b,k="Before";break;case"inside-center":D=m,I=x,M=(m+x)/2,k="Center";break;case"bar-inside":D=v,I=S,M=(v+S)/2,k="Center";break;case"bar-inside-end":D=v,I=S,M=S-b,k="Before";break;case"bar-outside-end":D=S,I=x,M=S+b,k="After";break;case"bar-end":D=-1/0,I=1/0,M=S,k="Center";break}const A=c?M:n.x+n.width/2,O=c?n.y+n.height/2:M;let N,T;c?(N=A+U3[k]*y.width,T=N+y.width):(N=O+Y3[k]*y.height,T=N+y.height);const L=Math.min(N,T)>=Math.min(D,I)&&Math.max(N,T)<=Math.max(D,I);if(d.avoidCollisions&&!L){h.visible=!1;return}h.visible=!0,h.text=y.text,h.fontSize=y.fontSize,h.lineHeight=y.lineHeight,h.textAlign=c?H3[k]:"center",h.textBaseline=c?"middle":K3[k],h.x=A,h.y=O})}var{fromToMotion:wf,resetMotion:$3,SeriesNodePickMode:Nk,StateMachine:X3,createDatumId:Ck,CachedTextMeasurerPool:Z3,toRadians:Lk,BBox:Ms,Group:Ta,PointerEvents:Rk,Selection:Aa,Rect:q3,Text:wk,TransformableText:Q3,Marker:J3,LinearScale:tK,AxisTickGenerator:eK,NiceMode:iK,easing:oK,getColorStops:sK,findRangeExtent:aK}=_n,nK={before:180,middle:0,after:0},rK={before:90,middle:0,after:-90},lK=class{constructor(t){this.gauge=t}get defaultTickMinSpacing(){return 0}get range(){return this.gauge.range}get reverse(){return!1}get scale(){return this.gauge.scale}get label(){return this.gauge.properties.scale.label}get interval(){return this.gauge.properties.scale.interval}formatTick(t,e,i,o,s){const{label:a}=this;return a.formatter?.({value:t,index:e,domain:i,boundSeries:void 0})??(a.format!=null?s?.(t):void 0)??this.gauge.formatLabel(t)}inRange(){return!0}},op=class extends _n.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[Nk.EXACT_SHAPE_MATCH,Nk.NEAREST_NODE]}),this.properties=new pe,this.seriesRect=Ms.NaN,this.gaugeRect=Ms.NaN,this.scale=new tK,this.axis=new lK(this),this.tickGenerator=new eK(this.axis),this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new Ta({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Ta({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Ta({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Ta({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Ta({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Ta({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Ta({name:"tickGroup"})),this.scaleSelection=Aa.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=Aa.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=Aa.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=Aa.select(this.itemTargetLabelGroup,wk),this.labelSelection=Aa.select(this.itemLabelGroup,wk),this.highlightTargetSelection=Aa.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=Aa.select(this.tickGroup,Q3),this.datumUnion=new uk,this.animationState=new X3("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=Rk.None,this.tickGroup.pointerEvents=Rk.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const t=new q3;return t.crisp=!0,t}markerFactory(){return new J3}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){return fk(t,this.properties.scale)}createLinearGradient(t,e,i){const{properties:o,horizontal:s}=this,{defaultColorRange:a}=o;return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:sK(e,a,t.domain,i),rotation:s?90:0}}getShapeFillBBox(){const{properties:t,originX:e,originY:i,horizontal:o,scale:s}=this,{thickness:a}=t,n=aK(s.range);return new Ms(e,i,o?n:a,o?a:n)}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:o=e.text,value:s=e.value??0,shape:a=e.shape??"triangle",rotation:n=e.rotation??0,strokeWidth:r=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:d=e.fill??"black",fillOpacity:u=e.fillOpacity??1,stroke:g=e.stroke??"black",strokeOpacity:f=e.strokeOpacity??1,lineDash:y=e.lineDash??[0],lineDashOffset:m=e.lineDashOffset??0}=i,{enabled:x=e.label.enabled,color:v=e.label.color??"black",fontStyle:S=e.label.fontStyle??"normal",fontWeight:b=e.label.fontWeight??"normal",fontSize:D=e.label.fontSize,fontFamily:I=e.label.fontFamily,spacing:M=e.label.spacing??0}=i.label;return{text:o,value:s,shape:a,placement:l,spacing:c,size:h,rotation:n,fill:d,fillOpacity:u,stroke:g,strokeWidth:r,strokeOpacity:f,lineDash:y,lineDashOffset:m,label:{enabled:x,color:v,fontStyle:S,fontWeight:b,fontSize:D,fontFamily:I,spacing:M}}})}getTargetPoint(t){const{properties:e,originX:i,originY:o,horizontal:s,scale:a,gaugeRect:n}=this,{thickness:r}=e,{value:l,placement:c,spacing:h,size:d}=t,u=a.convert(l);let g;switch(c){case"before":g=-(h+d/2);break;case"after":g=r+h+d/2;break;default:g=r/2;break}return{x:i+n.x+(s?u:g),y:o+n.y+(s?g:u)}}getTargetLabel(t){const{size:e,placement:i,label:o}=t,{spacing:s,color:a,fontStyle:n,fontWeight:r,fontSize:l,fontFamily:c}=o,h=void 0,d=e/2+s;let u,g,f=0,y=0;return this.horizontal?(u="center",i==="after"?(g="top",y=d):(g="bottom",y=-d)):(g="middle",i==="before"?(u="right",f=-d):(u="left",f=d)),{offsetX:f,offsetY:y,fill:a,textAlign:u,textBaseline:g,fontStyle:n,fontWeight:r,fontSize:l,fontFamily:c,lineHeight:h}}labelDatum(t,e){const{placement:i,avoidCollisions:o,spacing:s,text:a,color:n,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:d,lineHeight:u,wrapping:g,overflowStrategy:f,formatter:y=m=>this.formatLabel(m.value)}=t;return{placement:i,avoidCollisions:o,spacing:s,text:a,value:e,fill:n,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:d,lineHeight:u,wrapping:g,overflowStrategy:f,formatter:y}}verticalLabelInset(){const{properties:t}=this,{label:e}=t,i=e.text?.split(`
`),o=kn(e,e.fontSize)*(i?.length??1);return e.spacing+o}horizontalLabelInset(){const{scale:t,properties:e}=this,{scale:i,label:o}=e,s=o.text?.split(`
`),a=o.getFont(),n=i.interval.values??t.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5}),l=(s??n.map(c=>Zr(this,this.labelDatum(o,c))??"")).reduce((c,h)=>{const{width:d}=Z3.measureText(h,{font:a});return Math.max(c,d)},0);return o.spacing+l}createNodeData(){const{id:t,properties:e,horizontal:i,scale:o,seriesRect:s}=this;if(!e.isValid())return;const{value:a,segmentation:n,thickness:r,cornerRadius:l,cornerMode:c,bar:h,scale:d,label:u}=e;o.domain=[d.min,d.max],o.range=i?[0,s.width]:[s.height,0];let g,f;i?(f=1,g=Math.PI/2):d.label.placement==="before"?(f=1,g=0):(f=-1,g=0);const y=g-Math.PI/2;let m,x,v,S;i?(m=0,x=s.width,v=(s.height-r)/2,S=v+r,u.placement==="outside-start"?m+=this.horizontalLabelInset():u.placement==="outside-end"&&(x-=this.horizontalLabelInset())):(m=(s.width-r)/2,x=m+r,S=0,v=s.height,u.placement==="outside-start"?v-=this.verticalLabelInset():u.placement==="outside-end"&&(S+=this.verticalLabelInset())),this.gaugeRect=new Ms(Math.min(m,x),Math.min(v,S),Math.abs(x-m),Math.abs(S-v));const b=0,D=0;o.domain=[d.min,d.max],o.range=i?[m,x]:[v,S];const{ticks:I}=this.tickGenerator.generateTicks({domain:o.domain,primaryTickCount:void 0,visibleRange:[0,1],niceMode:iK.Off,labelX:0,parallelFlipRotation:g,regularFlipRotation:y,sideFlag:f}).tickData,M=!1,k=this.getTargets(),A=[],O=[],N=[],T=[],[L,C]=o.range,P=Math.abs(C-L),R=i?o.convert(a):x,E=i?S:o.convert(a),z=n.enabled?n.spacing/2:0,w=i?z:0,B=i?0:z,_=Math.min(h.thickness??Math.round(h.thicknessRatio*r),r),F=-(r-_)/2,V=i?0:F,G=i?F:0,W=c==="item",K=Math.ceil(P);let $=n.enabled?n.interval.getSegments(o,K):void 0;const Q=h.fill??this.createLinearGradient(o,h.fills,h.fillMode),J=d.fill??(h.enabled&&d.fills.length===0?d.defaultFill:void 0)??this.createLinearGradient(o,d.fills,d.fillMode);if($==null&&W){const q=Math.min(...o.domain),Z=Math.max(...o.domain),lt={value:a,segmentStart:q,segmentEnd:Z};if(h.enabled){const It=Math.min(l,_/2,P/2)*(M?-1:1),ct=i?It:0,ft=i?0:It;A.push({series:this,itemId:"value",datum:lt,datumIndex:{type:0},type:0,x0:b+m-ct-V,y0:D+v-ft-G,x1:b+R+ct+V,y1:D+E+ft+G,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:Q,horizontalInset:w,verticalInset:B})}const j=Math.min(l,r/2,P/2)*(M?-1:1),Xt=i?j:0,Zt=i?0:j;T.push({series:this,itemId:"scale",datum:lt,datumIndex:{type:0},type:0,x0:b+m-Xt,y0:D+v-Zt,x1:b+x+Xt,y1:D+S+Zt,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:J,horizontalInset:w,verticalInset:B})}else{$??($=o.domain);const q=b+m-V,Z=D+v-G,lt=b+R+V,ht=D+E+G;for(let j=0;j<$.length-1;j+=1){const Xt=$[j+0],Zt=$[j+1],pt={value:a,segmentStart:Xt,segmentEnd:Zt},It=j===0,ct=j===$.length-2,ft=o.convert(Xt),Nt=o.convert(Zt),Ye=W||It?l:0,Ai=W||ct?l:0,So=i?Ye:Ai,ws=Ai,bo=i?Ai:Ye,jo=Ye;h.enabled&&A.push({series:this,itemId:`value-${j}`,datum:pt,datumIndex:{type:0},type:0,x0:b+(i?ft:m),y0:D+(i?v:ft),x1:b+(i?Nt:x),y1:D+(i?S:Nt),clipX0:q,clipY0:Z,clipX1:lt,clipY1:ht,topLeftCornerRadius:So,topRightCornerRadius:ws,bottomRightCornerRadius:bo,bottomLeftCornerRadius:jo,fill:Q,horizontalInset:w,verticalInset:B}),T.push({series:this,itemId:`scale-${j}`,datum:pt,datumIndex:{type:0},type:0,x0:b+(i?ft:m),y0:D+(i?v:ft),x1:b+(i?Nt:x),y1:D+(i?S:Nt),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:So,topRightCornerRadius:ws,bottomRightCornerRadius:bo,bottomLeftCornerRadius:jo,fill:J,horizontalInset:w,verticalInset:B})}}u.enabled&&N.push(this.labelDatum(u,a));const tt=i?nK:rK;for(let q=0;q<k.length;q+=1){const Z=k[q],{value:lt,text:ht,shape:j,size:Xt,fill:Zt,fillOpacity:pt,stroke:It,strokeWidth:ct,strokeOpacity:ft,lineDash:Nt,lineDashOffset:Ye}=Z,Ai=this.getTargetPoint(Z),So=Lk(Z.rotation+tt[Z.placement]);O.push({series:this,itemId:`target-${q}`,midPoint:Ai,datum:{value:lt},datumIndex:{type:1,index:q},type:1,value:lt,text:ht,x:Ai.x,y:Ai.y,shape:j,size:Xt,rotation:So,fill:Zt,fillOpacity:pt,stroke:It,strokeOpacity:ft,strokeWidth:ct,lineDash:Nt,lineDashOffset:Ye,label:this.getTargetLabel(Z)})}return{itemId:t,nodeData:A,tickData:I,targetData:O,labelData:N,scaleData:T}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,targetSelection:o,targetLabelSelection:s,scaleSelection:a,highlightTargetSelection:n,tickSelection:r}=this;this.seriesRect=t??Ms.NaN;const l=this.checkResize(t);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],h=this.contextNodeData?.labelData??[],d=this.contextNodeData?.targetData??[],u=this.contextNodeData?.scaleData??[],g=this.contextNodeData?.tickData??[],f=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:u,scaleSelection:a}),this.updateScaleNodes({scaleSelection:a}),this.targetSelection=this.updateTargetSelection({targetData:d,targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:d,targetLabelSelection:s}),this.updateTargetLabelNodes({targetLabelSelection:s}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:h,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:f!=null?[f]:[],targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:g,tickSelection:r}),this.updateTickNodes({tickSelection:r}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Ck(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:o}=this,{bar:s}=o,{fillOpacity:a,stroke:n,strokeOpacity:r,lineDash:l,lineDashOffset:c}=s,h=this.getStrokeWidth(s.strokeWidth),d=i.animationManager.isSkipped(),u=this.getShapeFillBBox();e.each((g,f)=>{const{topLeftCornerRadius:y,topRightCornerRadius:m,bottomRightCornerRadius:x,bottomLeftCornerRadius:v,fill:S}=f;g.fill=S,g.fillBBox=u,g.fillOpacity=a,g.stroke=n,g.strokeOpacity=r,g.strokeWidth=h,g.lineDash=l,g.lineDashOffset=c,g.topLeftCornerRadius=y,g.topRightCornerRadius=m,g.bottomRightCornerRadius=x,g.bottomLeftCornerRadius=v,g.pointerEvents=this.properties.bar.enabled?_n.PointerEvents.All:_n.PointerEvents.None,(d||g.previousDatum==null)&&g.setProperties(ip(g,f))}),this.datumUnion.update(e,this.itemGroup,_n.Rect,(g,f,y)=>{g.pointerEvents=_n.PointerEvents.None,g.clipBBox??(g.clipBBox=new Ms(NaN,NaN,NaN,NaN)),g.x=f.x,g.y=f.y,g.clipBBox.x=f.clipBBox?.x??f.x,g.clipBBox.y=f.clipBBox?.y??f.y,this.horizontal?(g.height=g.clipBBox.height=y.height,g.width=y===f?y.width:y.x+y.width,g.clipBBox.width=g.width-(y.width-(y.clipBBox?.width??y.width)),g.topLeftCornerRadius=f.topLeftCornerRadius,g.bottomLeftCornerRadius=f.bottomLeftCornerRadius,g.topRightCornerRadius=y.topRightCornerRadius,g.bottomRightCornerRadius=y.bottomRightCornerRadius):(g.width=g.clipBBox.width=y.width,g.height=y===f?y.height:y.x+y.height,g.clipBBox.height=g.height-(y.height-(y.clipBBox?.height??y.height)),g.topLeftCornerRadius=f.topLeftCornerRadius,g.topRightCornerRadius=f.topRightCornerRadius,g.bottomLeftCornerRadius=y.bottomLeftCornerRadius,g.bottomRightCornerRadius=y.bottomRightCornerRadius)})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>Ck(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i}=this.properties,{fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:n,lineDash:r,lineDashOffset:l}=i,c=this.getShapeFillBBox();e.each((h,d)=>{const{topLeftCornerRadius:u,topRightCornerRadius:g,bottomRightCornerRadius:f,bottomLeftCornerRadius:y,fill:m}=d;h.fill=m,h.fillBBox=c,h.fillOpacity=o,h.stroke=s,h.strokeOpacity=a,h.strokeWidth=n,h.lineDash=r,h.lineDashOffset=l,h.topLeftCornerRadius=u,h.topRightCornerRadius=g,h.bottomRightCornerRadius=f,h.bottomLeftCornerRadius=y,h.setProperties(ip(h,d))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,o=i?this.properties.highlightStyle.item:void 0;e.each((s,a)=>{const{x:n,y:r,shape:l,size:c,rotation:h,fill:d,fillOpacity:u,stroke:g,strokeOpacity:f,strokeWidth:y,lineDash:m,lineDashOffset:x}=a;s.size=c,s.shape=l==="line"?yk:l,s.fill=o?.fill??d,s.fillOpacity=o?.fillOpacity??u,s.stroke=o?.stroke??g,s.strokeOpacity=o?.strokeOpacity??f,s.strokeWidth=o?.strokeWidth??y,s.lineDash=o?.lineDash??m,s.lineDashOffset=o?.lineDashOffset??x,s.translationX=n,s.translationY=r,s.rotation=h})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,o)=>{const{x:s,y:a,text:n}=o,{offsetX:r,offsetY:l,fill:c,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:g,textAlign:f,textBaseline:y}=o.label;i.visible=!0,i.x=s+r,i.y=a+l,i.text=n,i.fill=c,i.fontStyle=h,i.fontWeight=d,i.fontSize=u,i.fontFamily=g,i.textAlign=f,i.textBaseline=y})}updateTickSelection(t){return t.tickSelection.update(t.tickData,void 0,e=>e.tickId)}updateTickNodes(t){const{gaugeRect:e,properties:i}=this,o=i.defaultScale,{enabled:s,color:a,fontFamily:n=o.label.fontFamily,fontSize:r=o.label.fontSize,fontStyle:l,fontWeight:c=o.label.fontWeight,spacing:h}=i.scale.label;let{placement:d}=i.scale.label;const u=Lk(i.scale.label.rotation??0);let g,f,y,m;this.horizontal?(d??(d="after"),g="center",f=d==="before"?"bottom":"top",m=this.originY+e.y+(d==="before"?-h:e.height+h)):(d??(d="before"),g=d==="before"?"end":"start",f="middle",y=this.originX+e.x+(d==="before"?-h:e.width+h)),t.tickSelection.each((x,v)=>{if(!s){x.visible=!1;return}const S=y??v.translationY,b=m??v.translationY;x.visible=!0,x.text=v.tickLabel,x.fill=a,x.fontFamily=n,x.fontSize=r,x.fontStyle=l,x.fontWeight=c,x.textBaseline=f,x.textAlign=g,x.x=S,x.y=b,x.rotationCenterX=S,x.rotationCenterY=b,x.rotation=u})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>"primary")}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((o,s)=>{o.fill=s.fill,o.fontStyle=s.fontStyle,o.fontWeight=s.fontWeight,o.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){const{labelSelection:e,horizontal:i,scale:o,seriesRect:s,gaugeRect:a}=this,{x:n,y:r,width:l,height:c}=a,h=t?.label??this.properties.value;let d;if(i){const f=o.convert(h);d=new Ms(n,r,f-n,c)}else{const f=o.convert(h);d=new Ms(n,f,l,c-f)}const u={seriesRect:s,gaugeRect:a,barRect:d},{margin:g}=this.properties;j3(this,e,{padding:g,horizontal:i},u,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),$3([this.datumSelection],ip),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i=0,o=0;if(this.labelSelection.each((s,a)=>{s.opacity=1,i=s.previousDatum?.value??t.from??a.value,o=a.value}),!this.labelsHaveExplicitText())if(i===o)this.formatLabelText({label:o});else{const s=`${this.id}_labels`;e.animate({id:s,groupId:"label",from:{label:i},to:{label:o},phase:t.phase??"update",ease:oK.easeOut,onUpdate:a=>this.formatLabelText(a)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=Ik(!0,this.horizontal);wf(this.id,"node",t,[this.datumSelection],e,(i,o)=>o.itemId),wf(this.id,"label",t,[this.labelSelection],gk,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=Ik(!1,this.horizontal);wf(this.id,"node",t,[this.datumSelection],e,(i,o)=>o.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:o}=i;if(!i.isValid())return;let s,a;if(t.type===0?(s=i.value,a=i.label.text):{value:s,text:a}=i.targets[t.index],s!=null)return o.formatTooltip(this.properties,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(s)}]},{seriesId:e,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(t){return xk(this,t)}pickFocus(t){return Sk(this,t)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(t){}datumIndexForCategoryValue(t){}};op.className="LinearGaugeSeries",op.type="linear-gauge";import{_ModuleSupport as cK}from"ag-charts-community";import{and as Pk,arrayOf as Pf,arrayOfDefs as hK,boolean as Jr,callback as Ek,color as _k,constant as pK,fillOptionsDef as Ef,fontOptionsDef as dK,gradientColorStops as uK,greaterThan as gK,lessThan as fK,lineDashOptionsDef as _f,number as We,or as yK,positiveNumber as Go,ratio as mK,required as Bf,string as Bk,strokeOptionsDef as zf,union as Ia}from"ag-charts-core";var{commonSeriesOptionsDefs:xK,autoSizedLabelOptionsDefs:SK,seriesLabelOptionsDefs:bK,tooltipOptionsDefs:vK,numberFormatValidator:DK}=cK,sp={fills:uK,fillMode:Ia("continuous","discrete")},zk={value:Bf(We),text:Bk,shape:yK(Ia("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),Ek),placement:Ia("before","after","middle"),spacing:Go,size:Go,rotation:We,...Ef,...zf,..._f},Na={type:Bf(pK("linear-gauge")),value:Bf(We),direction:Ia("horizontal","vertical"),cornerMode:Ia("container","item"),cornerRadius:Go,thickness:Go,scale:{min:Pk(We,fK("max")),max:Pk(We,gK("min")),label:{enabled:Jr,formatter:Ek,rotation:We,spacing:Go,minSpacing:Go,placement:Ia("before","after"),avoidCollisions:Jr,format:DK,...dK},interval:{values:Pf(We),step:We},...sp,...Ef,...zf,..._f},targets:hK(zk,"target options array"),segmentation:{enabled:Jr,spacing:Go,interval:{values:Pf(We),step:We,count:We}},bar:{enabled:Jr,thickness:Go,thicknessRatio:mK,...sp,...Ef,...zf,..._f},label:{...SK,text:Bk,spacing:Go,avoidCollisions:Jr,placement:Ia("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:vK,...xK};Na.margin=We,Na.defaultColorRange=Pf(_k),Na.defaultTarget={...zk,value:We,label:{...bK,spacing:We}},Na.defaultScale=Na.scale,Na.scale.defaultFill=_k;var MK={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"linear-gauge",moduleFactory:t=>new op(t),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},dk.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",dk.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{spacing:11}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[2]},minimumFontSize:12,spacing:18,color:{$ref:"backgroundColor"}},margin:4}}},kK={type:"series",name:"linear-gauge",chartType:"gauge",enterprise:!0,options:Na,create:t=>new op(t)};import{_ModuleSupport as Fk}from"ag-charts-community";var tl={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1}};import{_ModuleSupport as Vk}from"ag-charts-community";import{Logger as Gk}from"ag-charts-core";import{_ModuleSupport as OK}from"ag-charts-community";var TK=1e-9;function Wk(t,e,i,o){const[s,a]=t,[n,r]=e,l=n-s,c=r-a,h=l*l+c*c;let d,u;if(Math.abs(h)<TK)d=s,u=a;else{let y=((i-s)*l+(o-a)*c)/h;y=Math.max(0,Math.min(1,y)),d=s+y*(n-s),u=a+y*(r-a)}const g=i-d,f=o-u;return g*g+f*f}function Hk(t,e,i){let o=1/0,s=t[t.length-1];for(const a of t)o=Math.min(o,Wk(s,a,e,i)),s=a;return Math.sqrt(o)}function Ff(t){let[e,i]=t[0],o=0;for(let s=1;s<t.length;s+=1){const[a,n]=t[s],r=Math.hypot(a-e,n-i);o+=r,e=a,i=n}return o}function ap(t){if(t.length===0)return;const e=Ff(t)/2;let[i,o]=t[0],s=0;for(let a=1;a<t.length;a+=1){const[n,r]=t[a],l=Math.hypot(n-i,r-o),c=s+l;if(c>e){const h=(e-s)/l,d=[i+(n-i)*h,o+(r-o)*h],u=Math.atan2(r-o,n-i);return{point:d,angle:u}}s=c,i=n,o=r}}import{_ModuleSupport as AK}from"ag-charts-community";var{LonLatBBox:IK}=AK;function el(t,e,i,o,s){return t==null?t=new IK(e,i,o,s):(t.lon0=Math.min(t.lon0,e),t.lat0=Math.min(t.lat0,i),t.lon1=Math.max(t.lon1,o),t.lat1=Math.max(t.lat1,s)),t}function Ca(t,e){return t.forEach(i=>{const[o,s]=i;e=el(e,o,s,o,s)}),e}function NK(t){if(t.length===0)return;let e=0,i=0,o=0,[s,a]=t[t.length-1];for(const[n,r]of t){const l=s*r-n*a;o+=l,e+=(s+n)*l,i+=(a+r)*l,s=n,a=r}return o*=3,[e/o,i/o]}function np(t,e,i){let o=!1,s=1/0;for(const a of t){let n=a[a.length-1],[r,l]=n;for(const c of a){const[h,d]=c;d>i!=l>i&&e<(r-h)*(i-d)/(l-d)+h&&(o=!o),s=Math.min(s,Wk(n,c,e,i)),n=c,r=h,l=d}}return(o?-1:1)*Math.sqrt(s)}var{Path:CK,ExtendedPath2D:LK,BBox:RK,ScenePathChangeDetection:Kk}=OK,zn=class extends CK{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new LK}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:t}=this;this.strokePath.clear(),this.path.clear(),this.bbox=t!=null?this.drawGeometry(t,void 0):void 0}drawPath(t){super.drawPath(t),this.renderStroke(t,this.strokePath.getPath2D())}containsPoint(t,e){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(t,e)?!1:this.geometryDistance(i,t,e)<=0}distanceSquared(t,e){const{projectedGeometry:i}=this;if(i==null)return 1/0;const o=this.geometryDistance(i,t,e);return o>0?o*o:0}geometryDistance(t,e,i){const{renderMode:o,strokeWidth:s}=this,a=(o&1)!==0,n=(o&2)!==0,r=Math.max(s/2,1)+1;switch(t.type){case"GeometryCollection":return t.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,e,i)),1/0);case"MultiPolygon":return a?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(np(c,e,i),0)),1/0):1/0;case"Polygon":return a?Math.max(np(t.coordinates,e,i),0):1/0;case"MultiLineString":return n?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(Hk(c,e,i)-r,0)),1/0):1/0;case"LineString":return n?Math.max(Hk(t.coordinates,e,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(t,e){const{renderMode:i,path:o,strokePath:s}=this,a=(i&1)!==0,n=(i&2)!==0;switch(t.type){case"GeometryCollection":t.geometries.forEach(r=>{e=this.drawGeometry(r,e)});break;case"MultiPolygon":a&&t.coordinates.forEach(r=>{e=this.drawPolygon(o,r,e)});break;case"Polygon":a&&(e=this.drawPolygon(o,t.coordinates,e));break;case"LineString":n&&(e=this.drawLineString(s,t.coordinates,e,!1));break;case"MultiLineString":n&&t.coordinates.forEach(r=>{e=this.drawLineString(s,r,e,!1)});break;case"Point":case"MultiPoint":break}return e}drawPolygon(t,e,i){if(e.length<1)return i;i=this.drawLineString(t,e[0],i,!0);for(let o=1;o<e.length;o+=1){const s=e[o];this.drawLineString(t,s,void 0,!0)}return i}drawLineString(t,e,i,o){if(e.length<2)return i;const s=o?e.length-1:e.length;for(let a=0;a<s;a+=1){const[n,r]=e[a];if(a===0?t.moveTo(n,r):t.lineTo(n,r),i==null)i=new RK(n,r,0,0);else{const{x:l,y:c}=i,h=l+i.width,d=c+i.height;i.x=Math.min(l,n),i.y=Math.min(c,r),i.width=Math.max(h,n)-i.x,i.height=Math.max(d,r)-i.y}}return o&&t.closePath(),i}};p([Kk()],zn.prototype,"projectedGeometry",2),p([Kk()],zn.prototype,"renderMode",2);function Fn(t,e){if(t.bbox!=null){const[i,o,s,a]=t.bbox;return e=el(e,i,o,s,a),e}switch(t.type){case"GeometryCollection":t.geometries.forEach(i=>{e=Fn(i,e)});break;case"MultiPolygon":t.coordinates.forEach(i=>{i.length>0&&(e=Ca(i[0],e))});break;case"Polygon":t.coordinates.length>0&&(e=Ca(t.coordinates[0],e));break;case"MultiLineString":t.coordinates.forEach(i=>{e=Ca(i,e)});break;case"LineString":e=Ca(t.coordinates,e);break;case"MultiPoint":t.coordinates.forEach(i=>{const[o,s]=i;e=el(e,o,s,o,s)});break;case"Point":{const[i,o]=t.coordinates;e=el(e,i,o,i,o);break}}return e}function rp(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(o=>{const s=rp(o);if(s==null)return;const a=Ca(s[0],void 0);if(a==null)return;const n=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(e==null||n>e)&&(e=n,i=s)}),i}case"MultiPolygon":{let e,i;return t.coordinates.forEach(o=>{const s=Ca(o[0],void 0);if(s==null)return;const a=Math.abs(s.lat1-s.lat0)*Math.abs(s.lon1-s.lon0);(e==null||a>e)&&(e=a,i=o)}),i}case"Polygon":return t.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function lp(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(o=>{const s=lp(o);if(s==null)return;const a=Ff(s);a!=null&&(e==null||a>e)&&(e=a,i=s)}),i}case"MultiLineString":{let e=0,i;return t.coordinates.forEach(o=>{const s=Ff(o);s>e&&(e=s,i=o)}),i}case"LineString":return t.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function Vf(t,e){if(t==null)return!1;switch(t.type){case"GeometryCollection":return t.geometries.some(i=>Vf(i,e));case"MultiPolygon":case"Polygon":return(e&1)!==0;case"MultiLineString":case"LineString":return(e&2)!==0;case"MultiPoint":case"Point":return(e&4)!==0}}function ks(t,e){switch(t.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(i=>ks(i,e))};case"Polygon":return{type:"Polygon",coordinates:Gf(t.coordinates,e)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:wK(t.coordinates,e)};case"MultiLineString":return{type:"MultiLineString",coordinates:Gf(t.coordinates,e)};case"LineString":return{type:"LineString",coordinates:Wf(t.coordinates,e)};case"MultiPoint":return{type:"MultiPoint",coordinates:Wf(t.coordinates,e)};case"Point":return{type:"Point",coordinates:e.convert(t.coordinates)}}}function wK(t,e){return t.map(i=>Gf(i,e))}function Gf(t,e){return t.map(i=>Wf(i,e))}function Wf(t,e){return t.map(i=>e.convert(i))}function PK(){return{fromFn:(i,o,s)=>s==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,o,s)=>s==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function Uk(t,e){const i=t.contextNodeData?.nodeData[e.datumIndex];if(i!==void 0){for(const o of t.datumSelection.nodes())if(o.datum===i)return o}}import{_ModuleSupport as Yk}from"ag-charts-community";var Zet=class extends Yk.SeriesProperties{},il=class extends Yk.DataModelSeries{addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}};import{_ModuleSupport as EK}from"ag-charts-community";var{AND:_K,ARRAY:BK,COLOR_STRING:zK,COLOR_STRING_ARRAY:FK,FUNCTION:VK,LINE_DASH:GK,NUMBER_ARRAY:WK,OBJECT:jk,POSITIVE_NUMBER:Hf,RATIO:HK,STRING:Hi,TempValidate:At,SeriesProperties:KK,SeriesTooltip:UK,Label:YK}=EK,vt=class extends KK{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new YK,this.tooltip=new UK}};p([At(Sn,{optional:!0})],vt.prototype,"topology",2),p([At(Hi,{optional:!0})],vt.prototype,"title",2),p([At(Hi,{optional:!0})],vt.prototype,"legendItemName",2),p([At(Hi)],vt.prototype,"idKey",2),p([At(Hi)],vt.prototype,"topologyIdKey",2),p([At(Hi,{optional:!0})],vt.prototype,"idName",2),p([At(Hi,{optional:!0})],vt.prototype,"labelKey",2),p([At(Hi,{optional:!0})],vt.prototype,"labelName",2),p([At(Hi,{optional:!0})],vt.prototype,"sizeKey",2),p([At(Hi,{optional:!0})],vt.prototype,"sizeName",2),p([At(Hi,{optional:!0})],vt.prototype,"colorKey",2),p([At(Hi,{optional:!0})],vt.prototype,"colorName",2),p([At(WK,{optional:!0})],vt.prototype,"sizeDomain",2),p([At(_K(FK,BK.restrict({minLength:1})),{optional:!0})],vt.prototype,"colorRange",2),p([At(Hf,{optional:!0})],vt.prototype,"maxStrokeWidth",2),p([At(zK)],vt.prototype,"stroke",2),p([At(HK)],vt.prototype,"strokeOpacity",2),p([At(Hf)],vt.prototype,"strokeWidth",2),p([At(GK)],vt.prototype,"lineDash",2),p([At(Hf)],vt.prototype,"lineDashOffset",2),p([At(VK,{optional:!0})],vt.prototype,"itemStyler",2),p([At(jk)],vt.prototype,"label",2),p([At(jk)],vt.prototype,"tooltip",2);var{getMissCount:jK,createDatumId:$k,SeriesNodePickMode:Xk,valueProperty:ol,CachedTextMeasurerPool:$K,ColorScale:XK,LinearScale:ZK,Selection:Kf,Text:qK,Transformable:QK}=Vk,cp=class extends il{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[Xk.EXACT_SHAPE_MATCH,Xk.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new vt,this._chartTopology=void 0,this.colorScale=new XK,this.sizeScale=new ZK,this.datumSelection=Kf.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=Kf.select(this.labelGroup,qK),this.highlightDatumSelection=Kf.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new zn;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:n,sizeKey:r,colorKey:l,labelKey:c,sizeDomain:h,colorRange:d}=this.properties,u=new Map;i?.features.forEach(S=>{const b=S.properties?.[a];b==null||!Vf(S.geometry,2)||u.set(b,S)});const g=this.sizeScale.type,f=this.colorScale.type,y=this.scale?.type,{dataModel:m,processedData:x}=await this.requestDataModel(t,e,{props:[ol(n,y,{id:"idValue",includeProperty:!1}),ol(n,y,{id:"featureValue",includeProperty:!1,processor:()=>S=>u.get(S)}),...c!=null?[ol(c,"band",{id:"labelValue"})]:[],...r!=null?[ol(r,g,{id:"sizeValue"})]:[],...l!=null?[ol(l,f,{id:"colorValue"})]:[]]}),v=m.resolveColumnById(this,"featureValue",x);if(this.topologyBounds=v.reduce((S,b)=>{const D=b?.geometry;return D==null?S:Fn(D,S)},void 0),r!=null){const S=m.resolveProcessedDataIndexById(this,"sizeValue"),b=x.domain.values[S]??[];o.domain=h??b}if(d!=null&&this.isColorScaleValid()){const S=m.resolveProcessedDataIndexById(this,"colorValue");s.domain=x.domain.values[S],s.range=d,s.update()}i==null&&Gk.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=jK(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(t,e,i,o){if(e==null||i==null)return;const s=lp(i);if(s==null)return;const{idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:d,labelName:u,label:g}=this.properties,f=this.getLabelText(g,{value:e,datum:t,idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:d,labelName:u});if(f==null)return;const y=$K.measureText(String(f),{font:o}),m=ap(s);if(m==null)return;const[x,v]=m.point,{width:S,height:b}=y;return{point:{x,y:v,size:0},label:{width:S,height:b,text:f},anchor:void 0,placement:void 0}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:o,properties:s,scale:a}=this,{idKey:n,sizeKey:r,colorKey:l,labelKey:c,label:h}=s;if(e==null||i==null)return;const d=e.resolveColumnById(this,"idValue",i),u=e.resolveColumnById(this,"featureValue",i),g=c!=null?e.resolveColumnById(this,"labelValue",i):void 0,f=r!=null?e.resolveColumnById(this,"sizeValue",i):void 0,y=l!=null?e.resolveColumnById(this,"colorValue",i):void 0,m=s.maxStrokeWidth??s.strokeWidth;o.range=[Math.min(s.strokeWidth,m),m];const x=h.getFont(),v=new Map;i.dataSources.get(this.id)?.forEach((k,A)=>{const O=d[A],N=u[A]?.geometry??void 0,T=N!=null&&a!=null?ks(N,a):void 0;O!=null&&T!=null&&v.set(O,T)});const S=[],b=[],D=[];(i.dataSources.get(this.id)??[]).forEach((k,A)=>{const O=d[A],N=y?.[A],T=f?.[A],L=g?.[A],C=v.get(O);C==null&&D.push(O);const P=this.getLabelDatum(k,L,C,x);P!=null&&b.push(P),S.push({series:this,itemId:n,datum:k,datumIndex:A,idValue:O,labelValue:L,colorValue:N,sizeValue:T,projectedGeometry:C})});const M=10;if(D.length>M){const k=D.length-M;D.length=M,D.push(`(+${k} more)`)}return D.length>0&&Gk.warnOnce("some data items do not have matches in the provided topology",D),{itemId:t,nodeData:S,labelData:b}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,highlightDatumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let i=this.ctx.highlightManager?.getActiveHighlight();i!=null&&(i.series!==this||i.datum==null)&&(i=void 0);const o=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>$k(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset}}getItemStyleOverrides(t,e,i,o,s,a){const{id:n,properties:r,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:d}=r;let u;if(!a&&i!=null&&(u??(u={}),u.stroke=this.isColorScaleValid()?l.convert(i):h?.[0]??r.stroke),o!=null&&(u??(u={}),u.strokeWidth=c.convert(o,!0)),d!=null){const g=this.cachedDatumCallback($k(t,a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:n,datum:e,highlighted:a,...s,...u}));u??(u={}),Object.assign(u,g)}return u}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getItemBaseStyle(i);e.each((s,a)=>{const{datum:n,datumIndex:r,colorValue:l,sizeValue:c,projectedGeometry:h}=a;if(h==null){s.visible=!1,s.projectedGeometry=void 0;return}const d=this.getItemStyleOverrides(String(r),n,l,c,o,i);s.visible=!0,s.projectedGeometry=h,s.stroke=d?.stroke??o.stroke,s.strokeWidth=d?.strokeWidth??o.strokeWidth,s.strokeOpacity=d?.strokeOpacity??o.strokeOpacity,s.lineDash=d?.lineDash??o.lineDash,s.lineDashOffset=d?.lineDashOffset??o.lineDashOffset})}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=Vk.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:d,text:u})=>{r.visible=!0,r.x=l+h/2,r.y=c+d/2,r.text=u,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textAlign="center",r.textBaseline="middle"})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceSquared(t,e);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,o=i!=null?lp(i):void 0,s=o!=null?ap(o)?.point:void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:o}=this,{strokeWidth:s,strokeOpacity:a,lineDash:n}=o;let{stroke:r}=o;if(t!=null&&this.isColorScaleValid()){const c=e.resolveColumnById(this,"colorValue",i)[t];r=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:r,strokeWidth:s,strokeOpacity:a,lineDash:n}}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:n,idKey:r,idName:l,colorKey:c,colorName:h,colorRange:d,showInLegend:u}=this.properties;if(t==="gradient"&&c!=null&&d!=null){const g=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,colorName:h,colorRange:d,colorDomain:g}]}else return t==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:n??a??l??r},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!u}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{idKey:a,idName:n,colorKey:r,colorName:l,sizeKey:c,sizeName:h,labelKey:d,labelName:u,title:g,legendItemName:f,tooltip:y}=s;if(!i||!o)return;const m=o.dataSources.get(this.id)?.[t],x=i.resolveColumnById(this,"idValue",o),v=[],S=c!=null?i.resolveColumnById(this,"sizeValue",o)[t]:void 0,b=r!=null?i.resolveColumnById(this,"colorValue",o)[t]:void 0;if(c!=null&&v.push({label:h,fallbackLabel:c,value:String(S)}),r!=null&&v.push({label:l,fallbackLabel:r,value:String(b)}),d!=null&&d!==a){const I=i.resolveColumnById(this,"labelValue",o)[t];v.push({label:u,fallbackLabel:d,value:I})}const D=this.getItemBaseStyle(!1);return Object.assign(D,this.getItemStyleOverrides(String(t),t,b,S,D,!1)),y.formatTooltip(this.properties,{heading:x[t],title:g??f,symbol:this.legendItemSymbol(t),data:v},{seriesId:e,datum:m,title:g,idKey:a,idName:n,colorKey:r,colorName:l,sizeKey:c,sizeName:h,labelKey:d,labelName:u,...D})}computeFocusBounds(t){const e=Uk(this,t);return e?QK.toCanvas(this.contentGroup,e.getBBox()):void 0}};cp.className="MapLineSeries",cp.type="map-line";import{_ModuleSupport as JK}from"ag-charts-community";import{and as t5,arrayLength as e5,arrayOf as Zk,callback as i5,color as o5,constant as s5,lineDashOptionsDef as a5,object as n5,positiveNumber as qk,required as Qk,string as Ki,strokeOptionsDef as Jk}from"ag-charts-core";var{commonSeriesOptionsDefs:tO,seriesLabelOptionsDefs:r5,tooltipOptionsDefs:l5}=JK,eO={type:Qk(s5("map-line")),idKey:Qk(Ki),sizeKey:Ki,colorKey:Ki,labelKey:Ki,idName:Ki,sizeName:Ki,colorName:Ki,labelName:Ki,topology:n5,topologyIdKey:Ki,legendItemName:Ki,maxStrokeWidth:qk,title:Ki,itemStyler:i5,sizeDomain:Zk(qk),label:r5,tooltip:l5,...tO,...Jk,...a5,highlightStyle:{...tO.highlightStyle,...Jk}};eO.colorRange=t5(Zk(o5),e5(1));var c5={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:t=>new cp(t),tooltipDefaults:{range:"exact"},themeTemplate:{...tl,series:{stroke:Fk.SAFE_STROKE_FILL_OPERATION,colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},Fk.SAFE_RANGE2_OPERATION]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},h5={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:eO,create:t=>new cp(t)};import"ag-charts-community";import{_ModuleSupport as p5}from"ag-charts-community";import{Logger as d5}from"ag-charts-core";import{_ModuleSupport as u5}from"ag-charts-community";var{COLOR_STRING:g5,LINE_DASH:f5,OBJECT:y5,POSITIVE_NUMBER:iO,RATIO:m5,TempValidate:La,SeriesProperties:x5,SeriesTooltip:S5}=u5,Os=class extends x5{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new S5}};p([La(Sn,{optional:!0})],Os.prototype,"topology",2),p([La(g5)],Os.prototype,"stroke",2),p([La(m5)],Os.prototype,"strokeOpacity",2),p([La(iO)],Os.prototype,"strokeWidth",2),p([La(f5)],Os.prototype,"lineDash",2),p([La(iO)],Os.prototype,"lineDashOffset",2),p([La(y5)],Os.prototype,"tooltip",2);var{createDatumId:b5,SeriesNodePickMode:v5,Group:D5,Selection:M5,PointerEvents:k5}=p5,hp=class extends il{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[v5.EXACT_SHAPE_MATCH]}),this.properties=new Os,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new D5({name:"itemGroup"})),this.datumSelection=M5.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new zn;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t.pointerEvents=k5.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:Fn(o,e)},void 0),t==null&&d5.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((a,n)=>{const{geometry:r}=a,l=r!=null&&i!=null?ks(r,i):void 0;l!=null&&o.push({series:this,itemId:n,datum:a,datumIndex:0,index:n,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>b5(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{stroke:o,strokeOpacity:s,lineDash:a,lineDashOffset:n}=e,r=this.getStrokeWidth(e.strokeWidth);i.each((l,c)=>{const{projectedGeometry:h}=c;if(h==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=h,l.stroke=o,l.strokeWidth=r,l.strokeOpacity=s,l.lineDash=a,l.lineDashOffset=n})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}computeFocusBounds(t){}};hp.className="MapLineBackgroundSeries",hp.type="map-line-background";import"ag-charts-community";import{constant as O5,lineDashOptionsDef as T5,object as A5,required as I5,strokeOptionsDef as N5}from"ag-charts-core";var C5={type:I5(O5("map-line-background")),topology:A5,...N5,...T5},L5={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:t=>new hp(t),tooltipDefaults:{range:"exact"},themeTemplate:{...tl,series:{stroke:{$path:["./1",{$palette:"stroke"},{$palette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},R5={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:C5,create:t=>new hp(t)};import{_ModuleSupport as oO}from"ag-charts-community";import{ValidationError as w5,validate as P5}from"ag-charts-core";import{_ModuleSupport as sO}from"ag-charts-community";import{Logger as E5}from"ag-charts-core";var _5=(t,e,i)=>{let o=t,s=o;for(const a of e)if(o==null||i(o.value,a)>0)o={value:a,next:o},s=o;else{for(s=s;s.next!=null&&i(s.next.value,a)<=0;)s=s.next;s.next={value:a,next:s.next}}return o};function aO(t,e,i){const o=Ca(t[0],void 0);if(o==null)return;const s=(o.lon0+o.lon1)/2,a=(o.lat0+o.lat1)/2,n=Math.abs(o.lon1-o.lon0),r=Math.abs(o.lat1-o.lat0),l=NK(t[0]),[c,h]=l,d=-np(t,c,h);let u;const g=(D,I)=>{const k=Math.max(I-d,0);return D-.5*k},f=(D,I,M)=>{const{distance:k,maxDistance:A}=i(t,D,I,M),O=Math.hypot(c-D,h-I),N=Math.min(Math.max(c,D-M/2),D+M/2),T=Math.min(Math.max(h,I-M/2),I+M/2),L=Math.hypot(c-N,h-T),C=g(k,O),P=g(A,L);return{distance:k,maxDistance:A,value:C,maxValue:P,x:D,y:I,stride:M}},y=(D,I,M,k)=>{const A=f(I,M,k);A.maxDistance>=0&&D.push(A)},m=Math.min(n,r)/2;let x={value:f(s,a,m),next:null};for(;x!=null;){const D=x.value,{distance:I,value:M,maxValue:k,x:A,y:O,stride:N}=D;if(x=x.next,I>0&&(u==null||M>u.value)&&(u=D),u!=null&&k-u.value<=e)continue;const T=N/2,L=[];y(L,A-T,O-T,T),y(L,A+T,O-T,T),y(L,A-T,O+T,T),y(L,A+T,O+T,T),L.sort(nO),x=_5(x,L,nO)}if(u==null)return;const{distance:v,x:S,y:b}=u;return{x:S,y:b,distance:v}}var nO=(t,e)=>e.maxValue-t.maxValue;function Uf(t,e){const i=aO(t,e,(a,n,r,l)=>{const c=-np(a,n,r),h=c+l*Math.SQRT2;return{distance:c,maxDistance:h}});if(i==null)return;const{x:o,y:s}=i;return[o,s]}function rO(t,e){let i;switch(t.type){case"GeometryCollection":return t.geometries.flatMap(o=>rO(o,e));case"MultiPoint":return t.coordinates;case"Point":return[t.coordinates];case"MultiPolygon":{const o=rp(t);i=o!=null?Uf(o,e):void 0;break}case"Polygon":{const o=t.coordinates;i=o!=null?Uf(o,e):void 0;break}case"MultiLineString":{const o=lp(t);i=o!=null?ap(o)?.point:void 0;break}case"LineString":{const o=t.coordinates;i=ap(o)?.point;break}}return i!=null?[i]:[]}import{_ModuleSupport as B5}from"ag-charts-community";var{BBox:z5}=B5;function lO(t){if(!t)return;const{range:e}=t,i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=new z5(0,0,i,o);return{series:s,axis:s}}import{_ModuleSupport as F5}from"ag-charts-community";var{FillGradientDefaults:V5,FillPatternDefaults:G5,AND:W5,ARRAY:H5,COLOR_STRING:cO,COLOR_STRING_ARRAY:K5,FUNCTION:U5,NUMBER_ARRAY:Y5,OBJECT:pp,OR:j5,COLOR_GRADIENT:$5,COLOR_PATTERN:X5,POSITIVE_NUMBER:dp,RATIO:hO,STRING:be,MARKER_SHAPE:Z5,LINE_DASH:q5,TempValidate:at,SeriesProperties:Q5,SeriesTooltip:J5,Label:tU}=F5,pO=class extends tU{constructor(){super(...arguments),this.placement="bottom"}};p([at(be)],pO.prototype,"placement",2);var nt=class extends Q5{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillGradientDefaults=new V5,this.fillPatternDefaults=new G5,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new pO,this.tooltip=new J5}};p([at(Sn,{optional:!0})],nt.prototype,"topology",2),p([at(be,{optional:!0})],nt.prototype,"title",2),p([at(be,{optional:!0})],nt.prototype,"legendItemName",2),p([at(be,{optional:!0})],nt.prototype,"idKey",2),p([at(be)],nt.prototype,"topologyIdKey",2),p([at(be,{optional:!0})],nt.prototype,"idName",2),p([at(be,{optional:!0})],nt.prototype,"latitudeKey",2),p([at(be,{optional:!0})],nt.prototype,"latitudeName",2),p([at(be,{optional:!0})],nt.prototype,"longitudeKey",2),p([at(be,{optional:!0})],nt.prototype,"longitudeName",2),p([at(be,{optional:!0})],nt.prototype,"labelKey",2),p([at(be,{optional:!0})],nt.prototype,"labelName",2),p([at(be,{optional:!0})],nt.prototype,"sizeKey",2),p([at(be,{optional:!0})],nt.prototype,"sizeName",2),p([at(be,{optional:!0})],nt.prototype,"colorKey",2),p([at(be,{optional:!0})],nt.prototype,"colorName",2),p([at(W5(K5,H5.restrict({minLength:1})),{optional:!0})],nt.prototype,"colorRange",2),p([at(Z5)],nt.prototype,"shape",2),p([at(dp)],nt.prototype,"size",2),p([at(dp,{optional:!0})],nt.prototype,"maxSize",2),p([at(Y5,{optional:!0})],nt.prototype,"sizeDomain",2),p([at(j5($5,X5,cO))],nt.prototype,"fill",2),p([at(pp)],nt.prototype,"fillGradientDefaults",2),p([at(pp)],nt.prototype,"fillPatternDefaults",2),p([at(hO)],nt.prototype,"fillOpacity",2),p([at(cO)],nt.prototype,"stroke",2),p([at(dp)],nt.prototype,"strokeWidth",2),p([at(hO)],nt.prototype,"strokeOpacity",2),p([at(q5)],nt.prototype,"lineDash",2),p([at(dp)],nt.prototype,"lineDashOffset",2),p([at(U5,{optional:!0})],nt.prototype,"itemStyler",2),p([at(pp)],nt.prototype,"label",2),p([at(pp)],nt.prototype,"tooltip",2);var{CachedTextMeasurerPool:eU,fromToMotion:iU,StateMachine:oU,getMissCount:sU,createDatumId:dO,SeriesNodePickMode:uO,valueProperty:Ra,computeMarkerFocusBounds:aU,ColorScale:nU,LinearScale:rU,Group:lU,Selection:Yf,Text:cU,Marker:jf,applyShapeStyle:hU,getShapeStyle:gO}=sO,up=class extends il{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[uO.EXACT_SHAPE_MATCH,uO.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new nt,this._chartTopology=void 0,this.colorScale=new nU,this.sizeScale=new rU,this.markerGroup=this.contentGroup.appendChild(new lU({name:"markerGroup"})),this.labelSelection=Yf.select(this.labelGroup,cU,!1),this.markerSelection=Yf.select(this.markerGroup,jf,!1),this.highlightMarkerSelection=Yf.select(this.highlightNode,jf),this.animationState=new oU("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const t=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||t)}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[3,t],this.highlightGroup.zIndex=[4,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:n,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:d,sizeDomain:u,colorRange:g}=this.properties,f=new Map;i?.features.forEach(k=>{const A=k.properties?.[a];A!=null&&f.set(A,k)});const y=this.sizeScale.type,m=this.colorScale.type,x=this.scale?.type,v=r!=null&&l!=null,{dataModel:S,processedData:b}=await this.requestDataModel(t,e,{props:[...n!=null?[Ra(n,x,{id:"idValue",includeProperty:!1}),Ra(n,x,{id:"featureValue",includeProperty:!1,processor:()=>k=>f.get(k)})]:[],...v?[Ra(r,x,{id:"latValue"}),Ra(l,x,{id:"lonValue"})]:[],...d?[Ra(d,"band",{id:"labelValue"})]:[],...c?[Ra(c,y,{id:"sizeValue"})]:[],...h?[Ra(h,m,{id:"colorValue"})]:[]]}),D=n!=null?S.resolveColumnById(this,"featureValue",b):void 0,I=v?S.resolveColumnById(this,"latValue",b):void 0,M=v?S.resolveColumnById(this,"lonValue",b):void 0;if(this.topologyBounds=b.dataSources.get(this.id)?.reduce((k,A,O)=>{const T=D?.[O]?.geometry;if(T!=null&&(k=Fn(T,k)),I!=null&&M!=null){const L=M[O],C=I[O];k=el(k,L,C,L,C)}return k},void 0),c!=null){const k=S.resolveProcessedDataIndexById(this,"sizeValue"),A=b.domain.values[k]??[];o.domain=u??A}if(g!=null&&this.isColorScaleValid()){const k=S.resolveProcessedDataIndexById(this,"colorValue");s.domain=b.domain.values[k],s.range=g,s.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=sU(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(t,e,i,o,s,a){if(e==null)return;const{idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:d,sizeKey:u,sizeName:g,colorKey:f,colorName:y,labelKey:m,labelName:x,label:v,shape:S}=this.properties,{placement:b}=v,D=this.getLabelText(v,{value:e,datum:t,idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:d,sizeKey:u,sizeName:g,colorKey:f,colorName:y,labelKey:m,labelName:x});if(D==null)return;const{width:I,height:M}=eU.measureText(String(D),{font:a}),k=jf.anchor(S);return{point:{x:i,y:o,size:s},label:{width:I,height:M,text:D},anchor:k,placement:b}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:o,properties:s,scale:a}=this,{idKey:n,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:d,label:u}=s;if(e==null||i==null||a==null)return;const g=r!=null&&l!=null,f=n!=null?e.resolveColumnById(this,"idValue",i):void 0,y=n!=null?e.resolveColumnById(this,"featureValue",i):void 0,m=g?e.resolveColumnById(this,"latValue",i):void 0,x=g?e.resolveColumnById(this,"lonValue",i):void 0,v=d!=null?e.resolveColumnById(this,"labelValue",i):void 0,S=c!=null?e.resolveColumnById(this,"sizeValue",i):void 0,b=h!=null?e.resolveColumnById(this,"colorValue",i):void 0,D=s.maxSize??s.size;o.range=[Math.min(s.size,D),D];const I=u.getFont();let M;f!=null&&y!=null&&(M=new Map,i.dataSources.get(this.id)?.forEach((L,C)=>{const P=f[C],R=y[C]?.geometry??void 0,E=R!=null&&a!=null?ks(R,a):void 0;P!=null&&E!=null&&M.set(P,E)}));const k=[],A=[],O=[];(i.dataSources.get(this.id)??[]).forEach((L,C)=>{const P=f?.[C],R=x?.[C],E=m?.[C],z=b?.[C],w=S?.[C],B=v?.[C],_=w!=null?o.convert(w,!0):s.size,F=P!=null?M?.get(P):void 0;if(P!=null&&ks==null&&O.push(P),R!=null&&E!=null){const[V,G]=a.convert([R,E]),W=this.getLabelDatum(L,B,V,G,_,I);W&&A.push(W),k.push({series:this,itemId:r,datum:L,datumIndex:C,index:-1,idValue:P,lonValue:R,latValue:E,labelValue:B,sizeValue:w,colorValue:z,point:{x:V,y:G,size:_},midPoint:{x:V,y:G}})}else F!=null&&rO(F,1).forEach(([V,G],W)=>{const K=this.getLabelDatum(L,B,V,G,_,I);K&&A.push(K),k.push({series:this,itemId:r,datum:L,datumIndex:C,index:W,idValue:P,lonValue:R,latValue:E,labelValue:B,sizeValue:w,colorValue:z,point:{x:V,y:G,size:_},midPoint:{x:V,y:G}})})});const T=10;if(O.length>T){const L=O.length-T;O.length=T,O.push(`(+${L} more)`)}return O.length>0&&E5.warnOnce("some data items do not have matches in the provided topology",O),{itemId:t,nodeData:k,labelData:A}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:t}){const e=this.checkResize(t),i=this.checkScaleChange(),{markerSelection:o,highlightMarkerSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const n=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:n,markerSelection:o}),this.updateMarkerNodes({markerSelection:o,isHighlight:!1,highlightedDatum:a}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:a!=null?[a]:[],markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!0,highlightedDatum:a}),(i||e)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=sO.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:d,text:u})=>{r.visible=!0,r.x=l+h/2,r.y=c+d/2,r.text=u,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textAlign="center",r.textBaseline="middle"})}updateMarkerSelection(t){const{markerData:e,markerSelection:i}=t;return i.update(e,void 0,o=>dO([o.index,o.idValue,o.lonValue,o.latValue]))}getMarkerItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return gO({shape:e.shape,size:e.size,fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getMarkerItemStyleOverrides(t,e,i,o,s,a){const{id:n,properties:r,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:d}=r;let u;if(u??(u={}),!a&&i!=null&&(u.fill=this.isColorScaleValid()?l.convert(i):h?.[0]??r.fill),o!=null&&(u.size=c.convert(o,!0)),d!=null){const g=this.cachedDatumCallback(dO(t,a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:n,datum:e,highlighted:a,...s,...u}));u??(u={}),Object.assign(u,g)}return u}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i,highlightedDatum:o}=t,s=this.getMarkerItemBaseStyle(i),a=lO(this.scale);e.each((n,r)=>{const{datumIndex:l,datum:c,point:h,colorValue:d,sizeValue:u}=r,g=this.getMarkerItemStyleOverrides(String(l),c,d,u,s,i);n.shape=g?.shape??s.shape,n.size=g?.size??s.size,hU(n,s,g,a),n.x=h.x,n.y=h.y,n.scalingCenterX=h.x,n.scalingCenterY=h.y,n.zIndex=!i&&o!=null&&c===o.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:t}=this.ctx,e=PK();iU(this.id,"markers",t,[this.markerSelection,this.highlightMarkerSelection],e)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(t){const{x:e,y:i}=t;let o=1/0,s;return this.contextNodeData?.nodeData.forEach(a=>{const{x:n,y:r,size:l}=a.point,c=Math.max(Math.abs(n-e)-l,0),h=Math.max(Math.abs(r-i)-l,0),d=c*c+h*h;d<o&&(o=d,s=a)}),s!=null?{datum:s,distance:Math.sqrt(o)}:void 0}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:o}=this,{shape:s,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h}=o;let{fill:d}=o;if(t!=null&&this.isColorScaleValid()){const g=e.resolveColumnById(this,"colorValue",i)[t];d=this.colorScale.convert(g)}return{marker:gO({shape:s,fill:d,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:n,idName:r,idKey:l,colorKey:c,colorName:h,colorRange:d,showInLegend:u}=this.properties;if(t==="gradient"&&c!=null&&d!=null){const g=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,colorName:h,colorRange:d,colorDomain:g}]}else return t==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:n??a??r??l??o},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!u}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{idKey:a,idName:n,latitudeKey:r,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:d,colorName:u,sizeKey:g,sizeName:f,labelKey:y,labelName:m,title:x,legendItemName:v,tooltip:S}=s;if(!i||!o)return;const b=o.dataSources.get(this.id)?.[t],D=g!=null?i.resolveColumnById(this,"sizeValue",o)[t]:void 0,I=d!=null?i.resolveColumnById(this,"colorValue",o)[t]:void 0,M=[];if(D!=null&&M.push({label:f,fallbackLabel:g,value:String(D)}),I!=null&&M.push({label:u,fallbackLabel:d,value:String(I)}),y!=null&&y!==a){const O=i.resolveColumnById(this,"labelValue",o)[t];M.push({label:m,fallbackLabel:y,value:O})}let k;if(a!=null)k=i.resolveColumnById(this,"idValue",o)[t];else if(r!=null&&c!=null){const O=i.resolveColumnById(this,"latValue",o)[t],N=i.resolveColumnById(this,"lonValue",o)[t];k=`${Math.abs(O).toFixed(4)}\xB0 ${O>=0?"N":"S"}, ${Math.abs(N).toFixed(4)}\xB0 ${N>=0?"W":"E"}`}const A=this.getMarkerItemBaseStyle(!1);return Object.assign(A,this.getMarkerItemStyleOverrides(String(t),t,I,D,A,!1)),S.formatTooltip(this.properties,{heading:k,title:x??v,symbol:this.legendItemSymbol(t),data:M},{seriesId:e,datum:b,title:x,idKey:a,idName:n,latitudeKey:r,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:d,colorName:u,sizeKey:g,sizeName:f,labelKey:y,labelName:m,...A})}getFormattedMarkerStyle(t){const{datumIndex:e,colorValue:i,sizeValue:o}=t,s=this.getMarkerItemBaseStyle(!1);return Object.assign(s,this.getMarkerItemStyleOverrides(String(e),e,i,o,s,!1)),{size:s.size}}computeFocusBounds(t){return aU(this,t)}};up.className="MapMarkerSeries",up.type="map-marker";import{_ModuleSupport as pU}from"ag-charts-community";import{arrayOf as fO,color as dU,constant as uU,fillOptionsDef as gU,object as fU,positiveNumber as yO,required as yU,string as Ie,strokeOptionsDef as mU,union as xU}from"ag-charts-core";var{commonSeriesOptionsDefs:mO,markerOptionsDefs:SU,seriesLabelOptionsDefs:bU,tooltipOptionsDefs:vU,without:DU}=pU,MU={type:yU(uU("map-marker")),idKey:Ie,latitudeKey:Ie,longitudeKey:Ie,sizeKey:Ie,colorKey:Ie,labelKey:Ie,idName:Ie,latitudeName:Ie,longitudeName:Ie,sizeName:Ie,colorName:Ie,labelName:Ie,topology:fU,topologyIdKey:Ie,legendItemName:Ie,colorRange:fO(dU),title:Ie,maxSize:yO,sizeDomain:fO(yO),label:{placement:xU("top","bottom","left","right"),...bU},tooltip:vU,...mO,...DU(SU,["enabled"]),highlightStyle:{...mO.highlightStyle,...gU,...mU}},kU={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:t=>new up(t),tooltipDefaults:{range:"exact"},themeTemplate:{...tl,series:{shape:"circle",maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},oO.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:oO.FILL_PATTERN_DEFAULTS,fillOpacity:.5,label:{color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},OU={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:MU,create:t=>new up(t),validate(t,e,i){const o=P5(t,e,i);if(o.valid?.idKey==null&&(o.valid?.latitudeKey==null||o.valid?.longitudeKey==null)){const s=n=>i?`${i}.${n}`:n,a=`Either \`${s("idKey")}\` or both \`${s("latitudeKey")}\` and \`${s("longitudeKey")}\` are required.`;o.errors.push(new w5(a,i,!0))}return o}};import{_ModuleSupport as xO}from"ag-charts-community";import{_ModuleSupport as SO}from"ag-charts-community";import{Logger as bO}from"ag-charts-core";function TU(t,{aspectRatio:e,precision:i}){const o=aO(t,i,(l,c,h,d)=>{const u=IU(l,c,h,e),g=u+2*d*e,f=u*Math.SQRT2,y=g*Math.SQRT2;return{distance:f,maxDistance:y}});if(o==null)return;const{x:s,y:a,distance:n}=o,r=n/Math.SQRT2;return{x:s,y:a,maxWidth:r}}function AU(t,e,i,o,s){const[a,n]=t,[r,l]=e,c=1/s,h=r-a,d=l-n,[u,g]=n<=l?t:e,[f,y]=a<=r?t:e,[m,x]=n<=l?e:t,[v,S]=a<=r?e:t;let b=1/0;if(h!==0){const O=d/h;for(let N=0;N<=1;N+=1){const T=N===0?c:-c,L=(O*a-n-T*i+o)/(O-T);if(L>=f&&L<=v){const C=Math.abs(i-L)*2;b=Math.min(b,C)}}}else for(let O=0;O<=1;O+=1){const T=(O===0?c:-c)*(a-i)+o;if(T>=g&&T<=x){const C=Math.abs(o-T)*2*s;b=Math.min(b,C)}}const D=s,I=Math.abs((u-i)/(g-o)),M=Math.abs((m-i)/(x-o));if(x<o&&M<D){const N=Math.abs(o-x)*2*s;b=Math.min(b,N)}else if(g>o&&I<D){const N=Math.abs(o-g)*2*s;b=Math.min(b,N)}const k=Math.abs((y-o)/(f-i)),A=Math.abs((S-o)/(v-i));if(v<i&&A<c){const O=Math.abs(i-v)*2;b=Math.min(b,O)}else if(f>i&&k<c){const O=Math.abs(i-f)*2;b=Math.min(b,O)}return b}function IU(t,e,i,o){let s=!1,a=1/0;for(const n of t){let r=n[n.length-1],[l,c]=r;for(const h of n){const[d,u]=h;u>i!=c>i&&e<(l-d)*(i-u)/(c-u)+d&&(s=!s);const g=AU(r,h,e,i,o);a=Math.min(a,g),r=h,l=d,c=u}}return(s?1:-1)*a}function gp(t,e,i){i>=e&&(t.maxX=Math.min(t.maxX,i-e)),i<=e&&(t.minX=Math.max(t.minX,i-e))}function NU(t,e,i,o,s,a){const n=s-a/2,r=s+a/2,[l,c]=e,[h,d]=i,u=h-l,g=d-c,[f,y]=l<=h?e:i,[m,x]=l<=h?i:e;if(u!==0){const v=g/u;for(let S=0;S<=1;S+=1){const D=((S===0?n:r)-c)/v+l;D>=f&&D<=m&&gp(t,o,D)}}else Math.max(n,Math.min(c,d))<=Math.min(r,Math.max(c,d))&&gp(t,o,l);return m<o&&x>=n&&x<=r?gp(t,o,m):f>o&&y>=n&&y<=r&&gp(t,o,f),t}function CU(t,e,i,o){const s={minX:-1/0,maxX:1/0};for(const r of t){let l=r[r.length-1];for(const c of r)NU(s,l,c,e,i,o),l=c}const{minX:a,maxX:n}=s;return Number.isFinite(a)&&Number.isFinite(n)?{x:e+(a+n)/2,width:n-a}:{x:e,width:0}}import{_ModuleSupport as LU}from"ag-charts-community";var{AND:RU,ARRAY:wU,COLOR_STRING:vO,COLOR_STRING_ARRAY:PU,COLOR_GRADIENT:EU,COLOR_PATTERN:_U,FUNCTION:BU,LINE_DASH:zU,OR:FU,OBJECT:fp,POSITIVE_NUMBER:$f,RATIO:DO,STRING:Wo,TempValidate:Dt,SeriesProperties:VU,SeriesTooltip:GU,FillGradientDefaults:WU,FillPatternDefaults:HU}=LU,yt=class extends VU{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillGradientDefaults=new WU,this.fillPatternDefaults=new HU,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new Gr,this.tooltip=new GU}};p([Dt(Sn,{optional:!0})],yt.prototype,"topology",2),p([Dt(Wo,{optional:!0})],yt.prototype,"title",2),p([Dt(Wo,{optional:!0})],yt.prototype,"legendItemName",2),p([Dt(Wo)],yt.prototype,"idKey",2),p([Dt(Wo,{optional:!0})],yt.prototype,"idName",2),p([Dt(Wo)],yt.prototype,"topologyIdKey",2),p([Dt(Wo,{optional:!0})],yt.prototype,"labelKey",2),p([Dt(Wo,{optional:!0})],yt.prototype,"labelName",2),p([Dt(Wo,{optional:!0})],yt.prototype,"colorKey",2),p([Dt(Wo,{optional:!0})],yt.prototype,"colorName",2),p([Dt(RU(PU,wU.restrict({minLength:1})),{optional:!0})],yt.prototype,"colorRange",2),p([Dt(FU(EU,_U,vO))],yt.prototype,"fill",2),p([Dt(fp)],yt.prototype,"fillGradientDefaults",2),p([Dt(fp)],yt.prototype,"fillPatternDefaults",2),p([Dt(DO)],yt.prototype,"fillOpacity",2),p([Dt(vO)],yt.prototype,"stroke",2),p([Dt(DO)],yt.prototype,"strokeOpacity",2),p([Dt($f)],yt.prototype,"strokeWidth",2),p([Dt(zU)],yt.prototype,"lineDash",2),p([Dt($f)],yt.prototype,"lineDashOffset",2),p([Dt($f)],yt.prototype,"padding",2),p([Dt(BU,{optional:!0})],yt.prototype,"itemStyler",2),p([Dt(fp)],yt.prototype,"label",2),p([Dt(fp)],yt.prototype,"tooltip",2);var{getMissCount:KU,createDatumId:MO,SeriesNodePickMode:kO,valueProperty:yp,CachedTextMeasurerPool:UU,TextUtils:OO,ColorScale:YU,Group:TO,Selection:Xf,Text:jU,PointerEvents:$U,applyShapeStyle:XU,getShapeStyle:Zf}=SO,AO=SO.MercatorScale.fixedScale(),mp=class extends il{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[kO.EXACT_SHAPE_MATCH,kO.NEAREST_NODE]}),this.properties=new yt,this._chartTopology=void 0,this.colorScale=new YU,this.itemGroup=this.contentGroup.appendChild(new TO({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new TO({name:"itemLabelGroup"})),this.datumSelection=Xf.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Xf.select(this.itemLabelGroup,jU),this.highlightDatumSelection=Xf.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=$U.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new zn;return t.renderMode=1,t.lineJoin="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,colorScale:o}=this,{topologyIdKey:s,idKey:a,colorKey:n,labelKey:r,colorRange:l}=this.properties,c=new Map;i?.features.forEach(y=>{const m=y.properties?.[s];m==null||!Vf(y.geometry,1)||c.set(m,y)});const h=this.colorScale.type,d=this.scale?.type,{dataModel:u,processedData:g}=await this.requestDataModel(t,e,{props:[yp(a,d,{id:"idValue",includeProperty:!1}),yp(a,d,{id:"featureValue",includeProperty:!1,processor:()=>y=>c.get(y)}),...r?[yp(r,"band",{id:"labelValue"})]:[],...n?[yp(n,h,{id:"colorValue"})]:[]]}),f=u.resolveColumnById(this,"featureValue",g);if(this.topologyBounds=f.reduce((y,m)=>{const x=m?.geometry;return x==null?y:Fn(x,y)},void 0),l!=null&&this.isColorScaleValid()){const y=u.resolveProcessedDataIndexById(this,"colorValue");o.domain=g.domain.values[y],o.range=l,o.update()}i==null&&bO.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=KU(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelLayout(t,e,i,o,s){if(e==null||o==null)return;const{idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h,padding:d,label:u}=this.properties,g=this.getLabelText(u,{value:e,datum:t,idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h});if(g==null)return;const f=UU.measureText(String(g),{font:i}),y=g.split(`
`).length,m=(f.width+2*d)/(y*OO.getLineHeight(u.fontSize)+2*d);if(s?.geometry===o&&s?.labelText===g&&s?.aspectRatio===m)return s;const x=ks(o,AO),v=rp(x);if(v==null)return;const S=TU(v,{aspectRatio:m,precision:.001});if(S==null)return;const{x:b,y:D,maxWidth:I}=S;return{geometry:o,labelText:g,aspectRatio:m,x:b,y:D,maxWidth:I,fixedPolygon:v}}getLabelDatum(t,e){const{scale:i}=this;if(i==null)return;const{padding:o,label:s}=this.properties,{labelText:a,aspectRatio:n,x:r,y:l,maxWidth:c,fixedPolygon:h}=t,d={width:Math.ceil(c*e),height:Math.ceil(c*e/n),meta:r},u=Fr(a,s,{padding:o},(b,D)=>{if(!D)return d;const I=CU(h,r,l,b/e);return{width:I.width*e,height:b,meta:I.x}});if(u==null)return;const[{text:g,fontSize:f,lineHeight:y,width:m},x]=u;if(g===OO.EllipsisChar)return;const v=m<d.width?r:x,S=this.scale.convert(AO.invert([v,l]));return{x:S[0],y:S[1],text:g,fontSize:f,lineHeight:y}}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:o,scale:s,previousLabelLayouts:a}=this,{idKey:n,colorKey:r,labelKey:l,label:c}=o;if(e==null||i==null)return;const h=s!=null?(s.range[1][0]-s.range[0][0])/s.bounds.width:NaN,d=e.resolveColumnById(this,"idValue",i),u=e.resolveColumnById(this,"featureValue",i),g=l!=null?e.resolveColumnById(this,"labelValue",i):void 0,f=r!=null?e.resolveColumnById(this,"colorValue",i):void 0,y=c.getFont(),m=new Map;this.previousLabelLayouts=m;const x=[],v=[],S=[];(i.dataSources.get(this.id)??[]).forEach((I,M)=>{const k=d[M],A=f?.[M],O=g?.[M],N=u[M]?.geometry??void 0;N==null&&S.push(k);const T=this.getLabelLayout(I,O,y,N,a?.get(k));T!=null&&m.set(k,T);const L=T!=null&&s!=null?this.getLabelDatum(T,h):void 0;L!=null&&v.push(L);const C=N!=null&&s!=null?ks(N,s):void 0;x.push({series:this,itemId:n,datum:I,datumIndex:M,idValue:k,colorValue:A,labelValue:O,projectedGeometry:C})});const D=10;if(S.length>D){const I=S.length-D;S.length=D,S.push(`(+${I} more)`)}return S.length>0&&bO.warnOnce("some data items do not have matches in the provided topology",S),{itemId:t,nodeData:x,labelData:v}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,labelSelection:e,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let o=this.ctx.highlightManager?.getActiveHighlight();o!=null&&(o.series!==this||o.datum==null)&&(o=void 0);const s=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:s,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:e}),this.updateLabelNodes({labelSelection:e}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:o!=null?[o]:[],datumSelection:i}),this.updateDatumNodes({datumSelection:i,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>MO(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return Zf({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:n,colorScale:r}=this,{colorRange:l,itemStyler:c}=n;let h;if(!s&&i!=null&&(h??(h={}),h.fill=this.isColorScaleValid()?r.convert(i):l?.[0]??n.fill),c!=null){const d=this.cachedDatumCallback(MO(t,s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:e,highlighted:s,...o,...h}));h??(h={}),Object.assign(h,d)}return Zf(h,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getItemBaseStyle(i),s=lO(this.scale);e.each((a,n)=>{const{datum:r,datumIndex:l,colorValue:c,projectedGeometry:h}=n;if(h==null){a.visible=!1,a.projectedGeometry=void 0;return}const d=this.getItemStyleOverrides(String(l),r,c,o,i);a.visible=!0,a.projectedGeometry=h,XU(a,o,d,s)})}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontFamily:a}=this.properties.label;e.each((n,{x:r,y:l,text:c,fontSize:h,lineHeight:d})=>{n.visible=!0,n.x=r,n.y=l,n.text=c,n.fill=i,n.fontStyle=o,n.fontWeight=s,n.fontSize=h,n.lineHeight=d,n.fontFamily=a,n.textAlign="center",n.textBaseline="middle"})}resetAnimation(){}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceSquared(t,e);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,o=i!=null?rp(i):void 0,s=o!=null?Uf(o,2):void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:o}=this,{fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c}=o;let{fill:h}=o;if(t!=null&&this.isColorScaleValid()){const u=e.resolveColumnById(this,"colorValue",i)[t];h=this.colorScale.convert(u)}return{marker:Zf({fill:h,fillOpacity:s,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:n,idKey:r,idName:l,colorKey:c,colorName:h,colorRange:d,showInLegend:u}=this.properties;if(t==="gradient"&&c!=null&&d!=null){const g=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,colorName:h,colorRange:d,colorDomain:g}]}else return t==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:n??a??l??r},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!u}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h,legendItemName:d,title:u,tooltip:g}=s;if(!i||!o)return;const f=o.dataSources.get(this.id)?.[t],y=i.resolveColumnById(this,"idValue",o)[t],m=r!=null?i.resolveColumnById(this,"colorValue",o)[t]:void 0,x=[];if(m!=null&&x.push({label:l,fallbackLabel:r,value:String(m)}),c!=null&&c!==a){const S=i.resolveColumnById(this,"labelValue",o)[t];x.push({label:h,fallbackLabel:c,value:S})}const v=this.getItemBaseStyle(!1);return Object.assign(v,this.getItemStyleOverrides(String(t),t,m,v,!1)),g.formatTooltip(this.properties,{heading:y,title:u??d,symbol:this.legendItemSymbol(t),data:x},{seriesId:e,datum:f,title:u,idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h,...v})}computeFocusBounds(t){return Uk(this,t)}};mp.className="MapShapeSeries",mp.type="map-shape";import{_ModuleSupport as ZU}from"ag-charts-community";import{arrayOf as qU,callback as QU,color as JU,constant as tY,fillOptionsDef as IO,lineDashOptionsDef as eY,object as iY,positiveNumber as oY,required as NO,string as Ho,strokeOptionsDef as CO}from"ag-charts-core";var{commonSeriesOptionsDefs:LO,autoSizedLabelOptionsDefs:sY,tooltipOptionsDefs:aY}=ZU,nY={type:NO(tY("map-shape")),idKey:NO(Ho),colorKey:Ho,labelKey:Ho,idName:Ho,colorName:Ho,labelName:Ho,topology:iY,topologyIdKey:Ho,legendItemName:Ho,colorRange:qU(JU),padding:oY,itemStyler:QU,title:Ho,label:sY,tooltip:aY,...LO,...IO,...CO,...eY,highlightStyle:{...LO.highlightStyle,...IO,...CO}},rY={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:t=>new mp(t),tooltipDefaults:{range:"exact"},themeTemplate:{...tl,series:{fill:{$palette:"fill"},stroke:{$ref:"backgroundColor"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},xO.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:xO.FILL_PATTERN_DEFAULTS,fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:{$ref:"backgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"}},tooltip:{range:"exact"}}},lY={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:nY,create:t=>new mp(t)};import{_ModuleSupport as cY}from"ag-charts-community";import{_ModuleSupport as hY}from"ag-charts-community";import{Logger as pY}from"ag-charts-core";import{_ModuleSupport as dY}from"ag-charts-community";var{FillGradientDefaults:uY,FillPatternDefaults:gY,COLOR_STRING:RO,COLOR_GRADIENT:fY,COLOR_PATTERN:yY,OR:mY,LINE_DASH:xY,OBJECT:qf,POSITIVE_NUMBER:wO,RATIO:PO,TempValidate:Ui,SeriesProperties:SY,SeriesTooltip:bY}=dY,bi=class extends SY{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillGradientDefaults=new uY,this.fillPatternDefaults=new gY,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new bY}};p([Ui(Sn,{optional:!0})],bi.prototype,"topology",2),p([Ui(mY(fY,yY,RO))],bi.prototype,"fill",2),p([Ui(qf)],bi.prototype,"fillGradientDefaults",2),p([Ui(qf)],bi.prototype,"fillPatternDefaults",2),p([Ui(PO)],bi.prototype,"fillOpacity",2),p([Ui(RO)],bi.prototype,"stroke",2),p([Ui(PO)],bi.prototype,"strokeOpacity",2),p([Ui(wO)],bi.prototype,"strokeWidth",2),p([Ui(xY)],bi.prototype,"lineDash",2),p([Ui(wO)],bi.prototype,"lineDashOffset",2),p([Ui(qf)],bi.prototype,"tooltip",2);var{createDatumId:vY,SeriesNodePickMode:DY,Selection:MY,Group:kY,PointerEvents:OY,getShapeStyle:TY}=hY,xp=class extends il{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[DY.EXACT_SHAPE_MATCH]}),this.properties=new bi,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new kY({name:"itemGroup"})),this.datumSelection=MY.select(this.itemGroup,()=>this.nodeFactory())}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new zn;return t.renderMode=1,t.lineJoin="round",t.pointerEvents=OY.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:Fn(o,e)},void 0),t==null&&pY.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((a,n)=>{const{geometry:r}=a,l=r!=null&&i!=null?ks(r,i):void 0;l!=null&&o.push({series:this,itemId:n,datum:a,datumIndex:0,index:n,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>vY(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{fill:o,fillOpacity:s,stroke:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}=e,c=this.getStrokeWidth(e.strokeWidth);i.each((h,d)=>{const{projectedGeometry:u}=d;if(u==null){h.visible=!1,h.projectedGeometry=void 0;return}h.visible=!0,h.projectedGeometry=u;const g=TY({fill:o,fillOpacity:s,stroke:a,strokeWidth:c,strokeOpacity:n,lineDash:r,lineDashOffset:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults);h.setProperties(g)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}pickFocus(){}computeFocusBounds(t){}};xp.className="MapShapeBackgroundSeries",xp.type="map-shape-background";import{_ModuleSupport as AY}from"ag-charts-community";import{constant as IY,fillOptionsDef as NY,lineDashOptionsDef as CY,object as LY,required as RY,strokeOptionsDef as wY}from"ag-charts-core";var{commonSeriesOptionsDefs:PY}=AY,EY={type:RY(IY("map-shape-background")),topology:LY,...PY,...NY,...wY,...CY},_Y={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:t=>new xp(t),tooltipDefaults:{range:"exact"},themeTemplate:{...tl,series:{fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$ref:"backgroundColor"},strokeWidth:1,fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:[{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]},{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}],rotation:0,reverse:!1},fillPatternDefaults:{...cY.FILL_PATTERN_DEFAULTS,fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]}}}}},BY={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:EY,create:t=>new xp(t)};import{_ModuleSupport as zY}from"ag-charts-community";import{_ModuleSupport as FY}from"ag-charts-community";import{_ModuleSupport as Sp}from"ag-charts-community";import{isDefined as VY}from"ag-charts-core";var{ChartAxisDirection:Ko,PolarAxis:GY,diff:WY,fixNumericExtent:HY,groupAccumulativeValueProperty:EO,keyProperty:KY,normaliseGroupTo:UY,resetLabelFn:YY,seriesLabelFadeInAnimation:jY,seriesLabelFadeOutAnimation:$Y,valueProperty:XY,animationValidation:ZY,createDatumId:_O,SeriesNodePickMode:BO,normalizeAngle360:zO,CategoryScale:qY,motion:FO,applyShapeStyle:QY,isGradientFill:JY,getShapeStyle:Qf}=Sp,tj=class extends Sp.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},VO=class extends Sp.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,categoryKey:"angleValue",useLabelLayer:!0,canHaveAxes:!0,pickModes:[BO.NEAREST_NODE,BO.EXACT_SHAPE_MATCH],animationResetFns:{...e,label:YY}}),this.NodeEvent=tj,this.groupScale=new qY,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Ko.X)return e.getDomain(this,"angleValue","key",i);{const o=e.getDomain(this,"radiusValue-end","value",i),s=Number.isFinite(o[1]-o[0])?[o[0]>0?0:o[0],o[1]<0?0:o[1]]:[];return HY(s)}}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:o}=this.properties,s=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const a=this.getStackId(),n=`${a}-trailing`,r=[];VY(o)&&r.push(UY([a,n],Math.abs(o))),s&&this.processedData&&r.push(WY(this.id,this.processedData)),s&&r.push(ZY());const l=this.visible?{}:{forceValue:0},c=this.axes[Ko.Y]?.scale.type,h=this.axes[Ko.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[KY(e,h,{id:"angleValue"}),XY(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...EO(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},c),...EO(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:n,separateNegative:!0,...l},c),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t!==o.r||e!==o.cx||i!==o.cy?(this.circleCache={r:t,cx:e,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Ko.Y]?.isReversed()}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[Ko.Y];return t instanceof GY?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e,groupScale:i}=this;if(!e||!t||t.type!=="grouped"||!this.properties.isValid())return;const o=this.axes[Ko.X],s=this.axes[Ko.Y],a=o?.scale,n=s?.scale;if(!a||!n)return;const r=e.resolveKeysById(this,"angleValue",t),l=e.resolveColumnById(this,"radiusValue-start",t),c=e.resolveColumnById(this,"radiusValue-end",t),h=e.resolveColumnById(this,"radiusValue-raw",t),d=e.resolveProcessedDataIndexById(this,"radiusValue-range");let u=0,g=0;o instanceof $o&&(u=o.groupPaddingInner,g=o.paddingInner);const y=(a.bandwidth??0)*(1-g),{index:m,visibleGroupCount:x}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:x}).map((R,E)=>String(E)),i.range=[-y/2,y/2],i.paddingInner=x>1?u:0;const v=this.isRadiusAxisReversed(),S=v?this.radius:this.getAxisInnerRadius(),b=v?this.getAxisInnerRadius():this.radius,D=b+S,{angleKey:I,radiusKey:M,angleName:k,radiusName:A,label:O}=this.properties,N=(R,E,z,w)=>{const B=this.getLabelText(O,{value:E,datum:R,angleKey:I,radiusKey:M,angleName:k,radiusName:A});if(B)return{x:z,y:w,text:B,textAlign:"center",textBaseline:"middle"}},T=[],L={itemId:M,nodeData:T,labelData:T};if(!this.visible)return L;const{dataSources:C}=t,P=C.get(this.id)??[];for(const{datumIndex:R,group:E}of e.forEachGroupDatum(this,t)){const z=P[R],w=r[R];if(w==null)return;const B=h[R],_=B>=0&&!Object.is(B,-0),F=l[R],V=c[R],G=E.aggregation[d][_?1:0]??0,W=_===v;if(F===void 0||V===void 0)return;let K,$;if(P.length===1)K=-.5*Math.PI,$=1.5*Math.PI;else{const pt=a.convert(w);K=zO(pt+i.convert(String(m))),$=zO(K+i.bandwidth)}const Q=K+i.bandwidth/2,J=D-n.convert(F),tt=D-n.convert(V),q=(J+tt)/2,Z=D-n.convert(0),lt=D-n.convert(G),ht=Math.cos(Q)*q,j=Math.sin(Q)*q,Xt=this.properties.label.enabled?N(z,B,ht,j):void 0,Zt=this.getColumnWidth(K,$);T.push({series:this,datum:z,datumIndex:R,point:{x:ht,y:j,size:0},midPoint:{x:ht,y:j},label:Xt,angleValue:w,radiusValue:B,negative:W,innerRadius:J,outerRadius:tt,stackInnerRadius:Z,stackOuterRadius:lt,startAngle:K,endAngle:$,midAngle:Q,axisInnerRadius:S,axisOuterRadius:b,columnWidth:Zt,index:R})}return{itemId:M,nodeData:T,labelData:T}}getColumnWidth(t,e){return NaN}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return Qf({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius},e.fillGradientDefaults,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{angleKey:n,radiusKey:r,itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:h}=a;if(l==null)return;const d=this.cachedDatumCallback(_O(t,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:s,datum:e,highlighted:o,angleKey:n,radiusKey:r,...i}));return Qf(d,c,h)}updateSectorSelection(t,e){let i=[];if(e){const l=this.ctx.highlightManager?.getActiveHighlight();l?.datum&&l.series===this&&i.push(l)}else i=this.nodeData;const o=this.isRadiusAxisReversed(),s=o?this.radius:this.getAxisInnerRadius(),a=o?this.getAxisInnerRadius():this.radius,n=this.getShapeFillBBox(),r=this.getItemBaseStyle(e);t.update(i,void 0,l=>this.getDatumId(l)).each((l,c)=>{const{datum:h,datumIndex:d,midPoint:u}=c,g=this.getItemStyleOverrides(String(d),h,r,e),f=g?.fill??r.fill,m=JY(f)&&f.bounds==="item"?{centerX:u?.x??0,centerY:u?.y??0}:{centerX:0,centerY:0,innerRadius:s,outerRadius:a};this.updateItemPath(l,c,e),QY(l,r,g,n,m),l.cornerRadius=g?.cornerRadius??r.cornerRadius,l.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();FO.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),jY(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();FO.fromToMotion(this.id,"datums",e,[t],i),$Y(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=a,d=s[Ko.X],u=s[Ko.Y];if(!i||!o||!d||!u)return;const g=o.dataSources.get(this.id)?.[t],f=i.resolveKeysById(this,"angleValue",o)[t],y=i.resolveColumnById(this,"radiusValue-raw",o)[t];if(f==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(t),t,m,!1)),h.formatTooltip(this.properties,{heading:d.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:u.formatDatum(y)}]},{seriesId:e,datum:g,title:r,angleKey:n,angleName:r,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n,fillGradientDefaults:r,fillPatternDefaults:l}=this.properties,c=Qf({fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n},r,l);return Sp.isGradientFill(c.fill)&&(c.fill={...c.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:c}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,visible:i}=this,{radiusKey:o,radiusName:s,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:i,label:{text:s??o},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(t){return _O(t.angleValue)}computeLabelsBBox(){return null}};import{_ModuleSupport as ej}from"ag-charts-community";var{SeriesProperties:ij,FillGradientDefaults:oj,FillPatternDefaults:sj,SeriesTooltip:aj,TempValidate:Ut,COLOR_STRING:GO,NUMBER:WO,FUNCTION:nj,LINE_DASH:rj,OBJECT:bp,POSITIVE_NUMBER:Jf,RATIO:HO,STRING:sl,Label:lj,OR:cj,COLOR_GRADIENT:hj,COLOR_PATTERN:pj}=ej,wt=class extends ij{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new oj,this.fillPatternDefaults=new sj,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new lj,this.tooltip=new aj}};p([Ut(sl)],wt.prototype,"angleKey",2),p([Ut(sl,{optional:!0})],wt.prototype,"angleName",2),p([Ut(sl)],wt.prototype,"radiusKey",2),p([Ut(sl,{optional:!0})],wt.prototype,"radiusName",2),p([Ut(cj(hj,pj,GO))],wt.prototype,"fill",2),p([Ut(bp)],wt.prototype,"fillGradientDefaults",2),p([Ut(bp)],wt.prototype,"fillPatternDefaults",2),p([Ut(HO)],wt.prototype,"fillOpacity",2),p([Ut(GO)],wt.prototype,"stroke",2),p([Ut(Jf)],wt.prototype,"strokeWidth",2),p([Ut(HO)],wt.prototype,"strokeOpacity",2),p([Ut(rj)],wt.prototype,"lineDash",2),p([Ut(Jf)],wt.prototype,"lineDashOffset",2),p([Ut(Jf)],wt.prototype,"cornerRadius",2),p([Ut(nj,{optional:!0})],wt.prototype,"itemStyler",2),p([Ut(WO)],wt.prototype,"rotation",2),p([Ut(sl,{optional:!0})],wt.prototype,"stackGroup",2),p([Ut(WO,{optional:!0})],wt.prototype,"normalizedTo",2),p([Ut(bp)],wt.prototype,"label",2),p([Ut(bp)],wt.prototype,"tooltip",2);import{_ModuleSupport as dj}from"ag-charts-community";import{_ModuleSupport as uj}from"ag-charts-community";var{motion:gj}=uj;function KO(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(n,r,l)=>{e.forEach(c=>{const h=t[c];let d=(l==="removed"||l==="updated"?n:r)[c],u=(l==="removed"?n:r)[c];isNaN(u)&&(u=n.previousDatum?.[c]??NaN);const g=d-u;Math.abs(g)>Math.PI&&(d-=Math.sign(g)*2*Math.PI),h.set(r,{from:d,to:u})})},o=(n,r)=>({startAngle:t.startAngle.get(n)[r],endAngle:t.endAngle.get(n)[r]});return{calculate:i,from:n=>o(n,"from"),to:n=>o(n,"to")}}function UO(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function fj(t){const e=KO();return{toFn:(s,a,n)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,d,u,g;return n==="removed"?(c=s.innerRadius,h=s.innerRadius,d=s.columnWidth,u=s.axisInnerRadius,g=s.axisOuterRadius):(c=isNaN(a.innerRadius)?t:a.innerRadius,h=isNaN(a.outerRadius)?t:a.outerRadius,d=isNaN(a.columnWidth)?s.columnWidth:a.columnWidth,u=a.axisInnerRadius,g=a.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:d,axisInnerRadius:u,axisOuterRadius:g,startAngle:r,endAngle:l}},fromFn:(s,a,n)=>{n=UO(s,a,n),e.calculate(s,a,n);const{startAngle:r,endAngle:l}=e.from(a);let c,h,d,u,g;n==="removed"||n==="updated"?(c=s.innerRadius,h=s.outerRadius,d=s.columnWidth,u=s.axisInnerRadius,g=s.axisOuterRadius):(c=t,h=t,d=a.columnWidth,u=a.axisInnerRadius,g=a.axisOuterRadius);const f=gj.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:h,columnWidth:d,axisInnerRadius:u,axisOuterRadius:g,startAngle:r,endAngle:l,phase:f}}}}function yj(t,{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:n,endAngle:r}){return{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:n,endAngle:r}}var{SectorBox:vp,motion:mj}=dj;function ty(t){const{negative:e,innerRadius:i,outerRadius:o,stackInnerRadius:s,stackOuterRadius:a}=t;return{innerRadius:e?a:s,outerRadius:e?s:a,clipInnerRadius:e?o:i,clipOuterRadius:e?i:o}}function xj(t){const e=KO();return{toFn:(s,a,n)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,d;if(n==="removed")c=t,h=t,d=new vp(r,l,c,h);else{let u,g;({innerRadius:c,outerRadius:h,clipInnerRadius:u,clipOuterRadius:g}=ty(a)),isNaN(c)&&(c=t),isNaN(h)&&(h=t),isNaN(u)&&(u=t),isNaN(g)&&(g=t),d=new vp(r,l,u,g)}return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:d}},fromFn:(s,a,n)=>{n=UO(s,a,n),e.calculate(s,a,n);const{startAngle:r,endAngle:l}=e.from(a);let c,h,d;n==="removed"||n==="updated"?(c=s.innerRadius,h=s.outerRadius,d=s.clipSector):(c=t,h=t),d??(d=new vp(r,l,c,h));const u=mj.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:d,phase:u}}}}function Sj(t,e){const{startAngle:i,endAngle:o}=e,{innerRadius:s,outerRadius:a,clipInnerRadius:n,clipOuterRadius:r}=ty(e),l=new vp(i,o,n,r);return{innerRadius:s,outerRadius:a,startAngle:i,endAngle:o,clipSector:l}}var{Sector:bj,SectorBox:vj,PolarZIndexMap:ey}=FY,Dp=class extends VO{constructor(t){super(t,{animationResetFns:{item:Sj}}),this.properties=new wt}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,ey.FOREGROUND,t],this.highlightGroup.zIndex=[0,ey.HIGHLIGHT,t],this.labelGroup.zIndex=[0,ey.LABEL,t],!0):!1}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new bj}updateItemPath(t,e,i){const{negative:o}=e;if(t.centerX=0,t.centerY=0,t.startOuterCornerRadius=o?0:this.properties.cornerRadius,t.endOuterCornerRadius=o?0:this.properties.cornerRadius,t.startInnerCornerRadius=o?this.properties.cornerRadius:0,t.endInnerCornerRadius=o?this.properties.cornerRadius:0,i){const{startAngle:s,endAngle:a}=e,{innerRadius:n,outerRadius:r,clipInnerRadius:l,clipOuterRadius:c}=ty(e);t.innerRadius=n,t.outerRadius=r,t.startAngle=s,t.endAngle=a,t.clipSector=new vj(s,a,l,c)}}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return xj(t)}};Dp.className="NightingaleSeries",Dp.type="nightingale";import{_ModuleSupport as Dj}from"ag-charts-community";import{boolean as YO,callback as Mj,constant as kj,fillOptionsDef as Oj,lineDashOptionsDef as Tj,number as Aj,positiveNumber as Ij,required as iy,string as al,strokeOptionsDef as Nj}from"ag-charts-core";var{commonSeriesOptionsDefs:Cj,seriesLabelOptionsDefs:Lj,tooltipOptionsDefs:Rj}=Dj,wj={type:iy(kj("nightingale")),angleKey:iy(al),radiusKey:iy(al),angleName:al,radiusName:al,grouped:YO,stacked:YO,stackGroup:al,normalizedTo:Aj,cornerRadius:Ij,itemStyler:Mj,label:Lj,tooltip:Rj,...Cj,...Oj,...Nj,...Tj};import{_ModuleSupport as jO}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:$O,POLAR_AXIS_SHAPE:Pj}}=jO,XO={$path:["./shape",Pj.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},Ej={series:{fill:{$palette:"fill"},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$palette:"stroke"}]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:jO.FILL_PATTERN_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[$O.ANGLE_CATEGORY]:{shape:XO,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[$O.RADIUS_NUMBER]:{shape:XO}}},{ThemeConstants:{POLAR_AXIS_TYPE:ZO}}=zY,_j={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:t=>new Dp(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:ZO.ANGLE_CATEGORY},{type:ZO.RADIUS_NUMBER}],themeTemplate:Ej,stackable:!0,groupable:!0,stackedByDefault:!0},Bj={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:wj,create:t=>new Dp(t)};import"ag-charts-community";import{_ModuleSupport as qO}from"ag-charts-community";import{_ModuleSupport as zj}from"ag-charts-community";var{SeriesProperties:Fj,FillGradientDefaults:Vj,FillPatternDefaults:Gj,SeriesTooltip:Wj,TempValidate:Pt,UNION:Hj,OR:Kj,ARRAY_OF:Uj,COLOR_GRADIENT:Yj,COLOR_STRING:jj,COLOR_STRING_ARRAY:$j,FUNCTION:Xj,DIRECTION:Zj,BOOLEAN:qj,LINE_DASH:Qj,OBJECT:Vn,NUMBER:Jj,POSITIVE_NUMBER:Mp,COLOR_PATTERN:t$,RATIO:QO,STRING:JO,Label:tT,DropShadow:e$}=zj,i$=class extends tT{},oy=class extends tT{constructor(){super(...arguments),this.spacing=0}};p([Pt(Jj)],oy.prototype,"spacing",2),p([Pt(Hj(["before","after"],"a placement"))],oy.prototype,"placement",2);var Gt=class extends Fj{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new Vj,this.fillPatternDefaults=new Gj,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new e$().set({enabled:!1}),this.label=new i$,this.stageLabel=new oy,this.tooltip=new Wj}};p([Pt(JO)],Gt.prototype,"stageKey",2),p([Pt(JO)],Gt.prototype,"valueKey",2),p([Pt(Uj(Kj(Yj,t$,jj)))],Gt.prototype,"fills",2),p([Pt(Vn)],Gt.prototype,"fillGradientDefaults",2),p([Pt(Vn)],Gt.prototype,"fillPatternDefaults",2),p([Pt(QO)],Gt.prototype,"fillOpacity",2),p([Pt($j)],Gt.prototype,"strokes",2),p([Pt(Mp)],Gt.prototype,"strokeWidth",2),p([Pt(QO)],Gt.prototype,"strokeOpacity",2),p([Pt(Qj)],Gt.prototype,"lineDash",2),p([Pt(Mp)],Gt.prototype,"lineDashOffset",2),p([Pt(Zj)],Gt.prototype,"direction",2),p([Pt(qj,{optional:!0})],Gt.prototype,"reverse",2),p([Pt(Mp)],Gt.prototype,"spacing",2),p([Pt(Mp,{optional:!0})],Gt.prototype,"aspectRatio",2),p([Pt(Xj,{optional:!0})],Gt.prototype,"itemStyler",2),p([Pt(Vn)],Gt.prototype,"shadow",2),p([Pt(Vn)],Gt.prototype,"label",2),p([Pt(Vn)],Gt.prototype,"stageLabel",2),p([Pt(Vn)],Gt.prototype,"tooltip",2);function eT(t,{x:e,y:i,top:o,right:s,bottom:a,left:n}){t.x0=e-o/2,t.x1=e+o/2,t.x2=e+a/2,t.x3=e-a/2,t.y0=i-n/2,t.y1=i-s/2,t.y2=i+s/2,t.y3=i+n/2}function o$(t){return{fromFn:(s,a)=>{const{x:n,y:r}=a;let{top:l,right:c,bottom:h,left:d}=a;return t==="vertical"?(l=0,h=0):(d=0,c=0),{x:n,y:r,top:l,right:c,bottom:h,left:d}},toFn:(s,a)=>{const{x:n,y:r,top:l,right:c,bottom:h,left:d}=a;return{x:n,y:r,top:l,right:c,bottom:h,left:d}},applyFn:eT}}var{StateMachine:s$,valueProperty:iT,SeriesNodePickMode:oT,CachedTextMeasurerPool:a$,TextUtils:n$,createDatumId:r$,BBox:sy,Group:ay,Selection:kp,Text:sT,PointerEvents:aT,applyShapeStyle:l$,fromToMotion:c$,seriesLabelFadeInAnimation:h$,getShapeStyle:ny}=qO,Op=class extends qO.DataModelSeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,pickModes:[oT.EXACT_SHAPE_MATCH,oT.NEAREST_NODE]}),this.properties=new Gt,this.itemGroup=this.contentGroup.appendChild(new ay({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new ay({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new ay({name:"stageLabelGroup"})),this.datumSelection=kp.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=kp.select(this.itemLabelGroup,sT),this.stageLabelSelection=kp.select(this.stageLabelGroup,sT),this.highlightDatumSelection=kp.select(this.highlightNode,()=>this.nodeFactory()),this.animationState=new s$("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=aT.None,this.stageLabelGroup.pointerEvents=aT.None}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}nodeFactory(){return new go}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}async processData(t){if(this.data==null||!this.properties.isValid())return;const{id:e,visible:i,ctx:{legendManager:o}}=this,{stageKey:s,valueKey:a}=this.properties,n="band",r="number",l=(h,d,u)=>i&&o.getItemEnabled({seriesId:e,itemId:u}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(t,this.data,{props:[iT(s,n,{id:"xValue"}),iT(a,r,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:o,visible:s,ctx:{legendManager:a}}=this,{stageKey:n,valueKey:r,direction:l,reverse:c=l==="horizontal",spacing:h,aspectRatio:d,label:u,stageLabel:g}=o;if(e==null||i==null)return;const f=l==="horizontal",y=e.resolveColumnById(this,"xValue",i),m=e.resolveColumnById(this,"yValue",i),x=a$.getMeasurer({font:g.getFont()});let v,S;f?(v="center",S=g.placement==="before"?"bottom":"top"):(v=g.placement==="after"?"left":"right",S="middle");const b=g.enabled?[]:void 0;let D=0,I=0,M=0;const k=i.dataSources.get(this.id)??[];k.forEach((B,_)=>{const F=y[_],V=m[_],G=s&&a.getItemEnabled({seriesId:t,itemId:_});if(M+=V,b==null)return;const W=this.getLabelText(this.properties.stageLabel,{datum:B,value:F,stageKey:n,valueKey:r}),{width:K}=x.measureText(W),$=W.split(`
`).length*n$.getLineHeight(u.fontSize);D=Math.max(D,K),I=Math.max(I,$),b.push({x:NaN,y:NaN,text:W,textAlign:v,textBaseline:S,visible:G})});const A=this._nodeDataDependencies?.seriesRectWidth??0,O=this._nodeDataDependencies?.seriesRectHeight??0,N=h*(i.input.count-1);let T;if(f){const B=I+g.spacing;T=new sy(0,g.placement==="before"?B:0,A,O-B)}else{const B=D+g.spacing;T=new sy(g.placement==="after"?0:B,0,A-B,O)}if(d!=null&&d!==0){const B=l==="horizontal"?1/d:d,_=Math.min(T.width,T.height*B),F=_/B;T=new sy(T.x+(T.width-_)/2,T.y+(T.height-F)/2,_,F)}let L,C;f?C=g.placement==="before"?T.y-g.spacing:T.y+T.height+g.spacing:L=g.placement==="after"?T.x+T.width+g.spacing:T.x-g.spacing;const P=T.width-(f?N:0),R=T.height-(f?0:N);if(P<0||R<0)return;const E=[],z=[];let w=0;return k.forEach((B,_)=>{const F=y[_],V=m[_],G=s&&a.getItemEnabled({seriesId:t,itemId:_}),W=w+V,K=(w+W)/(2*M),$=(W-w)/M,Q=f?P*K+h*_:P*.5,J=f?R*.5:R*K+h*_,tt=T.x+Q,q=T.y+J;if(b!=null){const pt=b[_];pt.x=L??tt,pt.y=C??q}let Z,lt,ht,j;if(f){const pt=P*$;Z=pt,ht=pt;const It=(Q+pt/2)*(R/T.width),ct=(Q-pt/2)*(R/T.width);lt=c?T.height-It:It,j=c?T.height-ct:ct}else{const pt=R*$;lt=pt,j=pt;const It=(J-pt/2)*(P/T.height),ct=(J+pt/2)*(P/T.height);Z=c?T.width-It:It,ht=c?T.width-ct:ct}const Xt=this.getLabelText(u,{datum:B,value:V,stageKey:n,valueKey:r}),Zt={x:tt,y:q,text:Xt,textAlign:"center",textBaseline:"middle",visible:G};z.push(Zt),E.push({series:this,itemId:r,datum:B,datumIndex:_,index:_,xValue:F,yValue:V,x:tt,y:q,top:Z,right:lt,bottom:ht,left:j,label:Zt,enabled:G,midPoint:{x:tt,y:q}}),w=W}),{itemId:t,nodeData:E,labelData:z,stageLabelData:b,bounds:T}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:t}){this.checkResize(t);const{datumSelection:e,labelSelection:i,stageLabelSelection:o,highlightDatumSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const n=this.contextNodeData?.nodeData??[],r=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:o}),this.updateLabelNodes({labelSelection:o,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:s}),this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return ny({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:n}=this,{fills:r,strokes:l,stageKey:c,valueKey:h,itemStyler:d}=n,u=o.fill??r[i%r.length],g=o.stroke??l[i%l.length],f={};if(s||(f.fill=u,f.stroke=g),d!=null){const y=this.cachedDatumCallback(r$(t,s?"highlight":"node"),()=>this.callWithContext(d,{seriesId:a,datum:e,stageKey:c,valueKey:h,highlighted:s,fill:u,stroke:g,...o}));Object.assign(f,y)}return ny(f,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{properties:o}=this,{shadow:s}=o,a=this.getItemBaseStyle(i),n=this.contextNodeData?.bounds,r=n?{series:n,axis:n}:void 0;e.each((l,c)=>{const{datumIndex:h,datum:d}=c,u=this.getItemStyleOverrides(String(h),d,h,a,i);l$(l,a,u,r),eT(l,c),l.fillShadow=s})}updateLabelSelection(t){return t.labelSelection.update(this.properties.label.enabled?t.labelData:[])}updateStageLabelSelection(t){return t.stageLabelSelection.update(t.stageLabelData)}updateLabelNodes(t){const{labelSelection:e,labelProperties:i}=t,{color:o,fontSize:s,fontStyle:a,fontWeight:n,fontFamily:r}=i;e.each((l,{visible:c,x:h,y:d,text:u,textAlign:g,textBaseline:f})=>{l.visible=c,l.x=h,l.y=d,l.text=u,l.fill=o,l.fontStyle=a,l.fontWeight=n,l.fontSize=s,l.fontFamily=r,l.textAlign=g,l.textBaseline=f})}computeFocusBounds(t){const e=this.getNodeData()?.[t.datumIndex];if(e!==void 0){for(const i of this.datumSelection)if(i.datum===e)return i.node}}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{stageKey:a,valueKey:n,tooltip:r}=s;if(!i||!o)return;const l=o.dataSources.get(this.id)?.[t],c=i.resolveColumnById(this,"xValue",o)[t],h=i.resolveColumnById(this,"yValue",o)[t];if(c==null)return;const d=this.getLabelText(this.properties.stageLabel,{datum:o.dataSources.get(this.id)?.[t],value:h,stageKey:a,valueKey:n}),u=this.getItemBaseStyle(!1);return Object.assign(u,this.getItemStyleOverrides(String(t),t,t,u,!1)),r.formatTooltip(this.properties,{symbol:this.legendItemSymbol(t),data:[{label:String(c),value:d}]},{seriesId:e,datum:l,title:void 0,stageKey:a,valueKey:n,...u})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const n=s.distanceSquared(t,e);n<i&&(i=n,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}legendItemSymbol(t){const{fills:e,strokes:i,strokeWidth:o,fillOpacity:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this.properties,l=e[t%e.length]??"black",c=i[t%i.length]??"black";return{marker:ny({fill:l,fillOpacity:s,stroke:c,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}}getLegendData(t){const{processedData:e,dataModel:i,id:o,ctx:{legendManager:s},visible:a}=this;if(!i||!e||t!=="category"||!this.properties.isValid())return[];const{showInLegend:n}=this.properties,r=[],l=i.resolveColumnById(this,"xValue",e);return(e.dataSources.get(this.id)??[]).forEach((h,d)=>{const u=l[d];r.push({legendType:"category",id:o,itemId:d,seriesId:o,enabled:a&&s.getItemEnabled({seriesId:o,itemId:d}),label:{text:u},symbol:this.legendItemSymbol(d),hideInLegend:!n})}),r}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:t,labelSelection:e,properties:i}=this,o=o$(i.direction);c$(this.id,"nodes",this.ctx.animationManager,[t],o),h$(this,"labels",this.ctx.animationManager,e)}};Op.className="PyramidSeries",Op.type="pyramid";import{_ModuleSupport as p$}from"ag-charts-community";import{arrayOf as nT,boolean as d$,callback as u$,color as g$,colorUnion as f$,constant as y$,fillOptionsDef as m$,lineDashOptionsDef as x$,positiveNumber as ry,required as ly,string as rT,strokeOptionsDef as S$,union as lT}from"ag-charts-core";var{commonSeriesOptionsDefs:b$,seriesLabelOptionsDefs:cT,shadowOptionsDefs:v$,tooltipOptionsDefs:D$,without:hT}=p$,M$={type:ly(y$("pyramid")),stageKey:ly(rT),valueKey:ly(rT),direction:lT("horizontal","vertical"),aspectRatio:ry,spacing:ry,reverse:d$,itemStyler:u$,fills:nT(f$),strokes:nT(g$),label:cT,stageLabel:{spacing:ry,placement:lT("before","after"),...cT},tooltip:D$,shadow:v$,...b$,...hT(m$,["fill"]),...hT(S$,["stroke"]),...x$};import{_ModuleSupport as pT}from"ag-charts-community";var{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:k$}}=pT,O$={series:{direction:"vertical",strokeWidth:0,spacing:2,fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:pT.FILL_PATTERN_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},stageLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:k$,xOffset:3,yOffset:3,blur:5}}},T$={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"pyramid",moduleFactory:t=>new Op(t),solo:!0,tooltipDefaults:{range:"exact"},themeTemplate:O$},A$={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:M$,create:t=>new Op(t)};import{_ModuleSupport as I$}from"ag-charts-community";import{_ModuleSupport as wa}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:N$}}=wa,dT={series:{stroke:{$palette:"stroke"},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:wa.FILL_PATTERN_DEFAULTS,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[N$.ANGLE_CATEGORY]:{label:{spacing:10}}}},C$=wa.mergeDefaults({series:{stroke:wa.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},dT),L$=wa.mergeDefaults({series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:wa.FILL_PATTERN_DEFAULTS,fillOpacity:.8,strokeWidth:2,marker:{enabled:!1,fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:wa.FILL_PATTERN_DEFAULTS}}},dT);import{_ModuleSupport as uT}from"ag-charts-community";import{_ModuleSupport as cy}from"ag-charts-community";import{isFiniteNumber as gT,isNumberEqual as fT}from"ag-charts-core";import{_ModuleSupport as R$}from"ag-charts-community";var{Label:w$,SeriesMarker:P$,SeriesProperties:E$,SeriesTooltip:_$,TempValidate:He,BOOLEAN:B$,COLOR_STRING:z$,NUMBER:F$,LINE_DASH:V$,OBJECT:hy,POSITIVE_NUMBER:yT,RATIO:G$,STRING:Tp}=R$,ve=class extends E${constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new P$,this.label=new w$,this.tooltip=new _$,this.connectMissingData=!1}};p([He(Tp)],ve.prototype,"angleKey",2),p([He(Tp)],ve.prototype,"radiusKey",2),p([He(Tp,{optional:!0})],ve.prototype,"angleName",2),p([He(Tp,{optional:!0})],ve.prototype,"radiusName",2),p([He(z$)],ve.prototype,"stroke",2),p([He(yT)],ve.prototype,"strokeWidth",2),p([He(G$)],ve.prototype,"strokeOpacity",2),p([He(V$)],ve.prototype,"lineDash",2),p([He(yT)],ve.prototype,"lineDashOffset",2),p([He(F$)],ve.prototype,"rotation",2),p([He(hy)],ve.prototype,"marker",2),p([He(hy)],ve.prototype,"label",2),p([He(hy)],ve.prototype,"tooltip",2),p([He(B$)],ve.prototype,"connectMissingData",2);var{ChartAxisDirection:Yi,PolarAxis:W$,SeriesNodePickMode:mT,valueProperty:xT,fixNumericExtent:H$,seriesLabelFadeInAnimation:K$,markerFadeInAnimation:U$,resetMarkerFn:Y$,animationValidation:j$,computeMarkerFocusBounds:$$,extent:X$,BBox:Z$,Group:q$,Path:Q$,PointerEvents:J$,Selection:ST,Text:t6,Marker:e6,mergeDefaults:i6,getShapeStyle:o6}=cy,s6=class extends cy.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},py=class extends cy.PolarSeries{constructor(t){super({moduleCtx:t,categoryKey:"angleValue",useLabelLayer:!0,pickModes:[mT.NEAREST_NODE,mT.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:Y$},clipFocusBox:!1}),this.properties=new ve,this.NodeEvent=s6,this.lineGroup=this.contentGroup.appendChild(new q$({name:"radar-line"})),this.lineSelection=ST.select(this.lineGroup,Q$),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new e6}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Yi.X)return e.getDomain(this,"angleValue","value",i);{const o=e.getDomain(this,"radiusValue","value",i),s=X$(o.length===0?o:[0].concat(o));return H$(s)}}async processData(t){if(!this.properties.isValid())return;const{angleKey:e,radiusKey:i}=this.properties,o=[];this.ctx.animationManager.isSkipped()||o.push(j$());const s=this.axes[Yi.Y]?.scale.type,a=this.axes[Yi.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[xT(e,a,{id:"angleValue"}),xT(i,s,{id:"radiusValue",invalidValue:void 0}),...o]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[Yi.Y];return t instanceof W$?this.radius*t.innerRadiusRatio:0}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}createNodeData(){const{processedData:t,dataModel:e}=this;if(!t||!e||!this.properties.isValid())return;const{angleKey:i,radiusKey:o,angleName:s,radiusName:a,marker:n,label:r}=this.properties,l=this.axes[Yi.X]?.scale,c=this.axes[Yi.Y]?.scale;if(!l||!c)return;const h=e.resolveColumnById(this,"angleValue",t),d=e.resolveColumnById(this,"radiusValue",t),u=this.getAxisInnerRadius(),f=(t.dataSources.get(this.id)??[]).map((y,m)=>{const x=h[m],v=d[m],S=l.convert(x),b=this.radius+u-c.convert(v),D=Math.cos(S),I=Math.sin(S),M=D*b,k=I*b;let A;if(r.enabled){const O=this.getLabelText(r,{value:v,datum:y,angleKey:i,radiusKey:o,angleName:s,radiusName:a});if(O){let N="right";fT(D,0)?N="center":D>0&&(N="left");let T="bottom";fT(I,0)?T="middle":I>0&&(T="top"),A={x:M+D*n.size,y:k+I*n.size,text:O,textAlign:N,textBaseline:T}}}return{series:this,datum:y,datumIndex:m,index:m,point:{x:M,y:k,size:n.size},midPoint:{x:M,y:k},label:A,angleValue:x,radiusValue:v,missing:!gT(S)||!gT(b)}});return{itemId:o,nodeData:f,labelData:f}}update({seriesRect:t}){const e=this.checkResize(t),i=!this.ctx.animationManager.isSkipped(),{series:o}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&o===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=ST.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){return t?.fill??this.properties.marker.fill}getDatumStylerProperties(t){const{id:e,properties:i}=this,{angleKey:o,radiusKey:s}=i;return{seriesId:e,datum:t,angleKey:o,radiusKey:s}}updateMarkers(t,e){const{visible:i}=this,{marker:o,stroke:s,strokeWidth:a,strokeOpacity:n,highlightStyle:r}=this.properties;let l=[];if(i&&o.shape&&o.enabled)if(e){const d=this.ctx.highlightManager?.getActiveHighlight();d?.datum&&(l=[d])}else l=this.nodeData;const c=i6(e&&r.item,o.getStyle(),{stroke:s,strokeWidth:a,strokeOpacity:n}),h=this.getShapeFillBBox();t.update(l).each((d,u)=>{this.updateMarkerStyle(o,d,u.datum,u.point,this.getDatumStylerProperties(u),e,c,h)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:h,marker:d}=a,u=s[Yi.X],g=s[Yi.Y];if(!i||!o||!u||!g)return;const f=o.dataSources.get(this.id)?.[t],y=i.resolveColumnById(this,"angleValue",o)[t],m=i.resolveColumnById(this,"radiusValue",o)[t];if(y==null)return;const x=this.getMarkerStyle(d,f,this.getDatumStylerProperties(f),!1);return h.formatTooltip(this.properties,{heading:u.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:g.formatDatum(m)}]},{seriesId:e,datum:f,title:r,angleKey:n,radiusKey:l,angleName:r,radiusName:c,...x})}legendItemSymbol(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,marker:s}=this.properties;return{marker:o6({shape:s.shape,enabled:s.enabled||e<=0,fill:this.getMarkerFill()??s.stroke??t??"rgba(0, 0, 0, 0)",stroke:s.stroke??t??"rgba(0, 0, 0, 0)",fillOpacity:s.fillOpacity,strokeOpacity:s.strokeOpacity,strokeWidth:s.strokeWidth,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset},s.fillGradientDefaults,s.fillPatternDefaults),line:{stroke:t,strokeOpacity:i,strokeWidth:e,lineDash:o}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:o}=this,{radiusKey:s,radiusName:a,showInLegend:n}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:o&&i.getItemEnabled({seriesId:e,itemId:s}),label:{text:a??s},symbol:this.legendItemSymbol(),hideInLegend:!n}]}pickNodeClosestDatum(t){const{nodeData:e,centerX:i,centerY:o}=this,{x:s,y:a}=t,n=this.radius;if(Math.sqrt((s-i)**2+(a-o)**2)>n+this.properties.marker.size)return;let l=1/0,c;for(const h of e){const{point:{x:d=NaN,y:u=NaN}={}}=h;if(isNaN(d)||isNaN(u))continue;const g=Math.sqrt((t.x-d-i)**2+(t.y-u-o)**2);g<l&&(l=g,c=h)}if(c){const h=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:h}}}computeLabelsBBox(){const{label:t}=this.properties;this.maybeRefreshNodeData();const e=[],i=new t6;return this.nodeData.forEach(o=>{if(!t.enabled||!o.label)return;i.text=o.label.text,i.x=o.label.x,i.y=o.label.y,i.setFont(t),i.setAlign(o.label);const s=i.getBBox();e.push(s)}),e.length===0?null:Z$.merge(e)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){const t=this.getLineNode();t&&(t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=J$.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset)}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(t.length===0)return[];const o=this.axes[Yi.Y],a=this.axes[Yi.X]?.isReversed(),r=o?.isReversed()&&!a?[...t].reverse():t,l=[];let c=!1,h;return r.forEach((d,u)=>{let{x:g,y:f}=d.point;const y=isNaN(g)||isNaN(f);y||(h??(h=d)),y&&!i&&(g=0,f=0);const m=u===0||!e&&!i&&(y||c);l.push({x:g,y:f,moveTo:m}),c=y}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(t,e,i){const{path:o}=t;o.clear(!0);const s=this.getAxisInnerRadius(),a=this.axes[Yi.Y],r=a?.isReversed()?this.radius+s-a?.scale.convert(0):s;e.forEach(l=>{const{x:c,y:h,arc:d,radius:u=0,startAngle:g=0,endAngle:f=0,moveTo:y}=l,m=Math.atan2(h,c),x=r*Math.cos(m),v=r*Math.sin(m),S=i,b=x*(1-S)+c*S,D=v*(1-S)+h*S;d?o.arc(c,h,u,g,f):y?o.moveTo(b,D):o.lineTo(b,D)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:o=>this.animatePaths(o),onStop:()=>this.animatePaths(1)}),U$(this,i,"added",t),K$(this,"labels",i,e)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear(!0);for(const{x:o,y:s,moveTo:a}of i)a?e.moveTo(o,s):e.lineTo(o,s);t.checkPathDirty()}}getFormattedMarkerStyle(t){const{angleKey:e,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,t.datum,{angleKey:e,radiusKey:i},!0)}computeFocusBounds(t){return $$(this,t)}};py.className="RadarSeries";import{_ModuleSupport as a6}from"ag-charts-community";var{FillGradientDefaults:n6,FillPatternDefaults:r6,RATIO:l6,COLOR_STRING:c6,TempValidate:Ap,OR:h6,COLOR_GRADIENT:p6,COLOR_PATTERN:d6,OBJECT:bT}=a6,nl=class extends ve{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new n6,this.fillPatternDefaults=new r6,this.fillOpacity=1}};p([Ap(h6(p6,d6,c6))],nl.prototype,"fill",2),p([Ap(bT)],nl.prototype,"fillGradientDefaults",2),p([Ap(bT)],nl.prototype,"fillPatternDefaults",2),p([Ap(l6)],nl.prototype,"fillOpacity",2);var{Group:u6,Path:g6,PointerEvents:f6,Selection:y6,ChartAxisDirection:vT,applyShapeStyle:m6,getShapeFill:x6,getShapeStyle:S6}=uT,Ip=class extends py{constructor(t){super(t),this.properties=new nl,this.areaGroup=this.contentGroup.appendChild(new u6({name:"radar-area"})),this.areaSelection=y6.select(this.areaGroup,g6),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(t){return t?.fill??this.properties.marker.fill??this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode(),{fillOpacity:e,fill:i}=this.properties,o=S6({fill:i,fillOpacity:e},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults);m6(t,o,void 0,this.getShapeFillBBox()),t.pointerEvents=f6.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){const t=this.getLinePoints(),e=n=>{const r=this.axes[n];return r instanceof uT.PolarAxis?r:void 0},i=e(vT.Y),o=e(vT.X);if(!i?.isReversed())return t;const a=o?.getAxisLinePoints()?.points??[];return t.concat(...a)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints();t.fill=x6(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults),t.fillOpacity=this.properties.fillOpacity,t.stroke=void 0,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.lineJoin=t.lineCap="round",e.clear(!0),i.forEach(({x:o,y:s,moveTo:a,arc:n,radius:r=0,startAngle:l=0,endAngle:c=0})=>{n?e.arc(o,s,r,l,c):a?e.moveTo(o,s):e.lineTo(o,s)}),e.closePath(),t.checkPathDirty()}}};Ip.className="RadarAreaSeries",Ip.type="radar-area";import{_ModuleSupport as b6}from"ag-charts-community";import{boolean as v6,constant as D6,fillOptionsDef as M6,lineDashOptionsDef as k6,required as dy,string as Np,strokeOptionsDef as O6}from"ag-charts-core";var{commonSeriesOptionsDefs:T6,seriesLabelOptionsDefs:A6,markerOptionsDefs:I6,tooltipOptionsDefs:N6}=b6,C6={type:dy(D6("radar-area")),angleKey:dy(Np),radiusKey:dy(Np),angleName:Np,radiusName:Np,connectMissingData:v6,marker:I6,label:A6,tooltip:N6,...T6,...M6,...O6,...k6},{ThemeConstants:{POLAR_AXIS_TYPE:DT}}=I$,L6={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:t=>new Ip(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:DT.ANGLE_CATEGORY},{type:DT.RADIUS_NUMBER}],themeTemplate:L$},R6={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:C6,create:t=>new Ip(t)};import{_ModuleSupport as w6}from"ag-charts-community";var Cp=class extends py{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};Cp.className="RadarLineSeries",Cp.type="radar-line";import{_ModuleSupport as P6}from"ag-charts-community";import{boolean as E6,constant as _6,lineDashOptionsDef as B6,required as uy,string as Lp,strokeOptionsDef as z6}from"ag-charts-core";var{commonSeriesOptionsDefs:F6,seriesLabelOptionsDefs:V6,markerOptionsDefs:G6,tooltipOptionsDefs:W6}=P6,H6={type:uy(_6("radar-line")),angleKey:uy(Lp),radiusKey:uy(Lp),angleName:Lp,radiusName:Lp,connectMissingData:E6,marker:G6,label:V6,tooltip:W6,...F6,...z6,...B6},{POLAR_AXIS_TYPE:MT}=w6.ThemeConstants,K6={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:t=>new Cp(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:MT.ANGLE_CATEGORY},{type:MT.RADIUS_NUMBER}],themeTemplate:C$},U6={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:H6,create:t=>new Cp(t)};import{_ModuleSupport as Y6}from"ag-charts-community";import{_ModuleSupport as rl}from"ag-charts-community";import{isDefined as j6}from"ag-charts-core";import{_ModuleSupport as $6}from"ag-charts-community";var{SeriesProperties:X6,FillGradientDefaults:Z6,FillPatternDefaults:q6,SeriesTooltip:Q6,TempValidate:Yt,COLOR_STRING:kT,NUMBER:OT,FUNCTION:J6,LINE_DASH:tX,OBJECT:Rp,POSITIVE_NUMBER:gy,RATIO:TT,STRING:ll,Label:eX,COLOR_GRADIENT:iX,COLOR_PATTERN:oX,OR:sX}=$6,Wt=class extends X6{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new Z6,this.fillPatternDefaults=new q6,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new eX,this.tooltip=new Q6}};p([Yt(ll)],Wt.prototype,"angleKey",2),p([Yt(ll)],Wt.prototype,"radiusKey",2),p([Yt(ll,{optional:!0})],Wt.prototype,"angleName",2),p([Yt(ll,{optional:!0})],Wt.prototype,"radiusName",2),p([Yt(sX(iX,oX,kT))],Wt.prototype,"fill",2),p([Yt(Rp)],Wt.prototype,"fillGradientDefaults",2),p([Yt(Rp)],Wt.prototype,"fillPatternDefaults",2),p([Yt(TT)],Wt.prototype,"fillOpacity",2),p([Yt(kT)],Wt.prototype,"stroke",2),p([Yt(gy)],Wt.prototype,"strokeWidth",2),p([Yt(TT)],Wt.prototype,"strokeOpacity",2),p([Yt(tX)],Wt.prototype,"lineDash",2),p([Yt(gy)],Wt.prototype,"lineDashOffset",2),p([Yt(gy)],Wt.prototype,"cornerRadius",2),p([Yt(J6,{optional:!0})],Wt.prototype,"itemStyler",2),p([Yt(OT)],Wt.prototype,"rotation",2),p([Yt(ll,{optional:!0})],Wt.prototype,"stackGroup",2),p([Yt(OT,{optional:!0})],Wt.prototype,"normalizedTo",2),p([Yt(Rp)],Wt.prototype,"label",2),p([Yt(Rp)],Wt.prototype,"tooltip",2);import{_ModuleSupport as aX}from"ag-charts-community";var{SectorBox:AT,motion:nX}=aX;function rX(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function IT(t){return{toFn:(o,s,a)=>{let n,r,l,c,h;return a==="removed"?(n=t,r=t,l=s.innerRadius,c=s.outerRadius,h=new AT(n,r,l,c)):(n=s.startAngle,r=s.endAngle,l=isNaN(s.innerRadius)?o.innerRadius:s.innerRadius,c=isNaN(s.outerRadius)?o.outerRadius:s.outerRadius,h=s.clipSector),{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h}},fromFn:(o,s,a)=>{a=rX(o,s,a);let n,r,l,c,h;a==="removed"||a==="updated"?(n=o.startAngle,r=o.endAngle,l=o.innerRadius,c=o.outerRadius,h=o.clipSector):(n=t,r=t,l=s.innerRadius,c=s.outerRadius),h??(h=new AT(n,r,l,c));const d=nX.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h,phase:d}}}}function lX(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clipSector:e.clipSector}}var{ChartAxisDirection:mo,PolarAxis:cX,diff:hX,groupAccumulativeValueProperty:NT,keyProperty:pX,normaliseGroupTo:dX,valueProperty:uX,fixNumericExtent:gX,resetLabelFn:fX,seriesLabelFadeInAnimation:yX,seriesLabelFadeOutAnimation:mX,animationValidation:xX,angleBetween:SX,createDatumId:CT,CategoryScale:bX,Sector:vX,SectorBox:DX,motion:LT,isGradientFill:MX,applyShapeStyle:kX,getShapeStyle:fy}=rl,OX=class extends rl.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},wp=class extends rl.PolarSeries{constructor(t){super({moduleCtx:t,categoryKey:"radiusValue",useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:lX,label:fX}}),this.properties=new Wt,this.NodeEvent=OX,this.groupScale=new bX,this.circleCache={r:0,cx:0,cy:0}}get defaultShapeStyle(){const t=this.axes[mo.X]?.scale;return{...this.properties.fillGradientDefaults.toJson(),rotation:rl.toDegrees(t.range[0])+90}}nodeFactory(){return new vX}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===mo.X){const o=e.getDomain(this,"angleValue-end","value",i),s=[o[0]>0?0:o[0],o[1]<0?0:o[1]];return gX(s)}else return e.getDomain(this,"radiusValue","key",i)}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:o}=this.properties,s=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const a=this.getStackId(),n=`${a}-trailing`,r=[];j6(o)&&r.push(dX([a,n],Math.abs(o))),s&&(this.processedData&&r.push(hX(this.id,this.processedData)),r.push(xX()));const l=this.visible?{}:{forceValue:0},c=this.axes[mo.Y]?.scale.type,h=this.axes[mo.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[pX(i,c,{id:"radiusValue"}),uX(e,h,{id:"angleValue-raw",invalidValue:null,...l}),...NT(e,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},h),...NT(e,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:n,separateNegative:!0,...l},h),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[mo.Y];return t instanceof cX?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e}=this;if(!e||!t||t.type!=="grouped"||!this.properties.isValid())return;const i=this.axes[mo.X],o=this.axes[mo.Y],s=i?.scale,a=o?.scale;if(!s||!a)return;const n=e.resolveKeysById(this,"radiusValue",t),r=e.resolveColumnById(this,"angleValue-start",t),l=e.resolveColumnById(this,"angleValue-end",t),c=e.resolveColumnById(this,"angleValue-raw",t),h=e.resolveProcessedDataIndexById(this,"angleValue-range");let d=0;o instanceof Xo&&(d=o.groupPaddingInner);const{groupScale:u}=this,{index:g,visibleGroupCount:f}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);u.domain=Array.from({length:f}).map((P,R)=>String(R)),u.range=[0,Math.abs(a.bandwidth??0)],u.paddingInner=f>1?d:0;const y=u.bandwidth>=1?u.bandwidth:u.rawBandwidth,m=i.isReversed(),x=o.isReversed(),v=x?this.radius:this.getAxisInnerRadius(),b=(x?this.getAxisInnerRadius():this.radius)+v,{angleKey:D,radiusKey:I,angleName:M,radiusName:k,label:A}=this.properties,O=(P,R,E,z)=>{const w=this.getLabelText(A,{value:R,datum:P,angleKey:D,radiusKey:I,angleName:M,radiusName:k});if(w)return{x:E,y:z,text:w,textAlign:"center",textBaseline:"middle"}},N=[],T={itemId:I,nodeData:N,labelData:N};if(!this.visible)return T;const{dataSources:L}=t,C=L.get(this.id)??[];for(const{datumIndex:P,group:R}of e.forEachGroupDatum(this,t)){const E=C[P],z=n[P];if(z==null)return;const w=c[P],B=r[P],_=l[P],F=w>=0&&!Object.is(w,-0),V=R.aggregation[h][F?1:0],G=F===m;let W=s.convert(B,!0),K=s.convert(_,!0),$=s.convert(0,!0),Q=s.convert(V,!0);G&&([$,Q]=[Q,$],[W,K]=[K,W]);const tt=b-a.convert(z)+u.convert(String(g)),q=tt+y,Z=(tt+q)/2,lt=W+SX(W,K)/2,ht=Math.cos(lt)*Z,j=Math.sin(lt)*Z,Xt=this.properties.label.enabled?O(E,w,ht,j):void 0,Zt=new DX(W,K,tt,q);N.push({series:this,datum:E,datumIndex:P,point:{x:ht,y:j,size:0},midPoint:{x:ht,y:j},label:Xt,angleValue:w,radiusValue:z,innerRadius:tt,outerRadius:q,startAngle:$,endAngle:Q,clipSector:Zt,reversed:G,index:P})}return T}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return fy({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius},this.defaultShapeStyle,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{angleKey:n,radiusKey:r,itemStyler:l}=a;let c;return l!=null&&(c=this.cachedDatumCallback(CT(t,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:s,datum:e,highlighted:o,angleKey:n,radiusKey:r,...i}))),fy(c,this.defaultShapeStyle,this.properties.fillPatternDefaults)}updateSectorSelection(t,e){let i=[];if(e){const a=this.ctx.highlightManager?.getActiveHighlight();a?.datum&&a.series===this&&i.push(a)}else i=this.nodeData;const o=this.getItemBaseStyle(e),s=this.getShapeFillBBox();t.update(i,void 0,a=>this.getDatumId(a)).each((a,n)=>{const{datum:r,datumIndex:l}=n,c=this.getItemStyleOverrides(String(l),r,o,e),h=c?.cornerRadius??o.cornerRadius,d=c?.fill??o.fill,u=rl.isGradientFill(d)&&d.bounds!=="item"?{centerX:0,centerY:0}:void 0;kX(a,o,c,s,u),a.lineJoin="round",a.inset=a.stroke!=null?a.strokeWidth/2:0,a.startInnerCornerRadius=r.reversed?h:0,a.startOuterCornerRadius=r.reversed?h:0,a.endInnerCornerRadius=r.reversed?0:h,a.endOuterCornerRadius=r.reversed?0:h,e&&(a.startAngle=n.startAngle,a.endAngle=n.endAngle,a.clipSector=n.clipSector,a.innerRadius=n.innerRadius,a.outerRadius=n.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){const t=this.axes[mo.X]?.scale;let e=0;if(!t)return IT(e);const i=Math.min(t.domain[0],t.domain[1]),o=Math.max(t.domain[0],t.domain[1]);return i<=0&&o>=0&&(e=t.convert(0)),IT(e)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();LT.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),yX(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();LT.fromToMotion(this.id,"datums",e,[t],i),mX(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=a,d=s[mo.X],u=s[mo.Y];if(!i||!o||!d||!u)return;const g=o.dataSources.get(this.id)?.[t],f=i.resolveKeysById(this,"radiusValue",o)[t],y=i.resolveColumnById(this,"angleValue-raw",o)[t];if(f==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(t),t,m,!1)),h.formatTooltip(this.properties,{heading:u.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:n,value:d.formatDatum(y)}]},{seriesId:e,datum:g,title:r,angleKey:n,angleName:r,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n,fillPatternDefaults:r}=this.properties,l=fy({fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n},this.defaultShapeStyle,r);return MX(l.fill)&&(l.fill={...l.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:l}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,visible:i}=this,{angleKey:o,angleName:s,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:i,label:{text:s??o},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(t){return CT(t.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}};wp.className="RadialBarSeries",wp.type="radial-bar";import{_ModuleSupport as TX}from"ag-charts-community";import{boolean as RT,callback as AX,constant as IX,fillOptionsDef as NX,lineDashOptionsDef as CX,number as LX,positiveNumber as RX,required as yy,string as cl,strokeOptionsDef as wX}from"ag-charts-core";var{commonSeriesOptionsDefs:PX,seriesLabelOptionsDefs:EX,tooltipOptionsDefs:_X}=TX,BX={type:yy(IX("radial-bar")),angleKey:yy(cl),radiusKey:yy(cl),angleName:cl,radiusName:cl,grouped:RT,stacked:RT,stackGroup:cl,normalizedTo:LX,cornerRadius:RX,itemStyler:AX,label:EX,tooltip:_X,...PX,...NX,...wX,...CX};import{_ModuleSupport as wT}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:zX}}=wT,FX={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"conic",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:wT.FILL_PATTERN_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}}},axes:{[zX.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:PT}=Y6.ThemeConstants,VX={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:t=>new wp(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:PT.ANGLE_NUMBER},{type:PT.RADIUS_CATEGORY}],themeTemplate:FX,stackable:!0,groupable:!0},GX={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:BX,create:t=>new wp(t)};import{_ModuleSupport as WX}from"ag-charts-community";import{_ModuleSupport as HX}from"ag-charts-community";import{_ModuleSupport as KX}from"ag-charts-community";var{TempValidate:ET,RATIO:_T}=KX,my=class extends wt{};p([ET(_T,{optional:!0})],my.prototype,"columnWidthRatio",2),p([ET(_T,{optional:!0})],my.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:UX,PolarAxis:YX,RadialColumnShape:jX,getRadialColumnWidth:$X}=HX,Pp=class extends VO{constructor(t){super(t,{animationResetFns:{item:yj}}),this.properties=new my}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new jX}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return fj(t)}isRadiusAxisCircle(){const t=this.axes[UX.Y];return t instanceof YX?t.shape==="circle":!1}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:o=.5}=this.properties;return $X(t,e,this.radius,i,o)}};Pp.className="RadialColumnSeries",Pp.type="radial-column";import{_ModuleSupport as XX}from"ag-charts-community";import{boolean as BT,callback as ZX,constant as qX,fillOptionsDef as QX,lineDashOptionsDef as JX,number as t8,positiveNumber as e8,ratio as zT,required as xy,string as hl,strokeOptionsDef as i8}from"ag-charts-core";var{commonSeriesOptionsDefs:o8,seriesLabelOptionsDefs:s8,tooltipOptionsDefs:a8}=XX,n8={type:xy(qX("radial-column")),angleKey:xy(hl),radiusKey:xy(hl),angleName:hl,radiusName:hl,grouped:BT,stacked:BT,stackGroup:hl,normalizedTo:t8,cornerRadius:e8,columnWidthRatio:zT,maxColumnWidthRatio:zT,itemStyler:ZX,label:s8,tooltip:a8,...o8,...QX,...i8,...JX};import{_ModuleSupport as FT}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:VT,POLAR_AXIS_SHAPE:r8}}=FT,GT={$path:["./shape",r8.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},l8={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:FT.FILL_PATTERN_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[VT.ANGLE_CATEGORY]:{shape:GT,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[VT.RADIUS_NUMBER]:{shape:GT,innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:WT}=WX.ThemeConstants,c8={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:t=>new Pp(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:WT.ANGLE_CATEGORY},{type:WT.RADIUS_NUMBER}],themeTemplate:l8,stackable:!0,groupable:!0},h8={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:n8,create:t=>new Pp(t)};import{_ModuleSupport as Sy}from"ag-charts-community";import{_ModuleSupport as Pa}from"ag-charts-community";import{countFractionDigits as p8}from"ag-charts-core";import{_ModuleSupport as d8}from"ag-charts-community";var{SvgPath:u8,Rotatable:g8,Translatable:f8,Scalable:y8}=d8,by=class extends g8(y8(f8(u8))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};by.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";import{_ModuleSupport as vy}from"ag-charts-community";import{Logger as m8}from"ag-charts-core";var{BaseProperties:pl,SeriesTooltip:x8,SeriesProperties:S8,PropertiesArray:Dy,AxisLabel:b8,TempValidate:H,BOOLEAN:HT,COLOR_STRING:Uo,COLOR_STRING_ARRAY:v8,FUNCTION:D8,LINE_DASH:Ep,NUMBER:Ke,NUMBER_ARRAY:M8,OBJECT_ARRAY:My,OBJECT:ji,POSITIVE_NUMBER:vi,RATIO:$i,STRING:ky,UNION:k8,AND:KT,LESS_THAN:O8,GREATER_THAN:T8,Label:A8}=vy,I8=k8(["inside","outside","middle"],"a placement"),UT=class extends A8{};p([H(Ke,{optional:!0})],UT.prototype,"spacing",2);var de=class extends pl{constructor(){super(...arguments),this.label=new UT}};p([H(ky,{optional:!0})],de.prototype,"text",2),p([H(Ke,{optional:!0})],de.prototype,"value",2),p([H(bk,{optional:!0})],de.prototype,"shape",2),p([H(I8,{optional:!0})],de.prototype,"placement",2),p([H(Ke,{optional:!0})],de.prototype,"spacing",2),p([H(vi,{optional:!0})],de.prototype,"size",2),p([H(Ke,{optional:!0})],de.prototype,"rotation",2),p([H(Uo,{optional:!0})],de.prototype,"fill",2),p([H($i,{optional:!0})],de.prototype,"fillOpacity",2),p([H(Uo,{optional:!0})],de.prototype,"stroke",2),p([H(vi,{optional:!0})],de.prototype,"strokeWidth",2),p([H($i,{optional:!0})],de.prototype,"strokeOpacity",2),p([H(Ep,{optional:!0})],de.prototype,"lineDash",2),p([H(vi,{optional:!0})],de.prototype,"lineDashOffset",2),p([H(ji)],de.prototype,"label",2);var Xi=class extends pl{constructor(){super(...arguments),this.enabled=!0,this.fills=new Dy(vy.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([H(HT)],Xi.prototype,"enabled",2),p([H(My)],Xi.prototype,"fills",2),p([H(qh)],Xi.prototype,"fillMode",2),p([H(Uo,{optional:!0})],Xi.prototype,"fill",2),p([H($i)],Xi.prototype,"fillOpacity",2),p([H(Uo,{optional:!0})],Xi.prototype,"stroke",2),p([H(vi,{optional:!0})],Xi.prototype,"strokeWidth",2),p([H($i)],Xi.prototype,"strokeOpacity",2),p([H(Ep)],Xi.prototype,"lineDash",2),p([H(vi)],Xi.prototype,"lineDashOffset",2);var dl=class extends pl{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};p([H(M8,{optional:!0})],dl.prototype,"values",2),p([H(Ke,{optional:!0})],dl.prototype,"step",2),p([H(Ke)],dl.prototype,"minSpacing",2),p([H(Ke)],dl.prototype,"maxSpacing",2);var N8=class extends b8{},Ne=class extends pl{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new Dy(vy.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new dl,this.label=new N8}};p([H(KT(Ke,O8("max")))],Ne.prototype,"min",2),p([H(KT(Ke,T8("min")))],Ne.prototype,"max",2),p([H(My)],Ne.prototype,"fills",2),p([H(qh)],Ne.prototype,"fillMode",2),p([H(Uo,{optional:!0})],Ne.prototype,"fill",2),p([H($i)],Ne.prototype,"fillOpacity",2),p([H(Uo)],Ne.prototype,"stroke",2),p([H(vi)],Ne.prototype,"strokeWidth",2),p([H($i)],Ne.prototype,"strokeOpacity",2),p([H(Ep)],Ne.prototype,"lineDash",2),p([H(vi)],Ne.prototype,"lineDashOffset",2),p([H(Uo)],Ne.prototype,"defaultFill",2),p([H(ji)],Ne.prototype,"interval",2),p([H(ji)],Ne.prototype,"label",2);var Zi=class extends pl{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([H(HT)],Zi.prototype,"enabled",2),p([H($i,{optional:!0})],Zi.prototype,"radiusRatio",2),p([H(Ke)],Zi.prototype,"spacing",2),p([H(Uo)],Zi.prototype,"fill",2),p([H($i)],Zi.prototype,"fillOpacity",2),p([H(Uo)],Zi.prototype,"stroke",2),p([H(vi)],Zi.prototype,"strokeWidth",2),p([H($i)],Zi.prototype,"strokeOpacity",2),p([H(Ep)],Zi.prototype,"lineDash",2),p([H(vi)],Zi.prototype,"lineDashOffset",2);var YT=class extends po{};p([H(ky,{optional:!0})],YT.prototype,"text",2);var jT=class extends Gr{};p([H(ky,{optional:!0})],jT.prototype,"text",2);var Et=class extends S8{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new qr,this.defaultColorRange=[],this.targets=new Dy(de),this.defaultTarget=new de,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new Ne,this.bar=new Xi,this.needle=new Zi,this.label=new YT,this.secondaryLabel=new jT,this.tooltip=new x8}isValid(t){if(!super.isValid(t))return!1;const{outerRadius:e,innerRadius:i}=this;return e==null!=(i==null)?(m8.warnOnce("Either [innerRadius] and [outerRadius] must both be set, or neither can be set."),!1):!0}};p([H(Ke)],Et.prototype,"value",2),p([H(Ke)],Et.prototype,"startAngle",2),p([H(Ke)],Et.prototype,"endAngle",2),p([H(ji)],Et.prototype,"segmentation",2),p([H(v8)],Et.prototype,"defaultColorRange",2),p([H(My)],Et.prototype,"targets",2),p([H(ji)],Et.prototype,"defaultTarget",2),p([H($i)],Et.prototype,"outerRadiusRatio",2),p([H($i)],Et.prototype,"innerRadiusRatio",2),p([H(vi,{optional:!0})],Et.prototype,"outerRadius",2),p([H(vi,{optional:!0})],Et.prototype,"innerRadius",2),p([H(vi)],Et.prototype,"cornerRadius",2),p([H(vk)],Et.prototype,"cornerMode",2),p([H(Ke)],Et.prototype,"spacing",2),p([H(ji)],Et.prototype,"scale",2),p([H(ji)],Et.prototype,"bar",2),p([H(ji)],Et.prototype,"needle",2),p([H(D8,{optional:!0})],Et.prototype,"itemStyler",2),p([H(ji)],Et.prototype,"label",2),p([H(ji)],Et.prototype,"secondaryLabel",2),p([H(ji)],Et.prototype,"tooltip",2);import{_ModuleSupport as C8}from"ag-charts-community";var{SectorBox:Oy}=C8;function L8(t){const{startAngle:e,endAngle:i,clipStartAngle:o,clipEndAngle:s,innerRadius:a,outerRadius:n}=t;if(!(o==null||s==null))return new Oy(Math.max(o,e),Math.min(s,i),a,n)}function $T(t,e,i){return Math.max(t,i.startAngle)<=Math.min(e,i.endAngle)}function Ty(t){return t.clipStartAngle!=null&&t.clipEndAngle!=null}function Ay(t,e){const{clipStartAngle:i,clipEndAngle:o,innerRadius:s,outerRadius:a}=t;return new Oy(i,e?i:o,s,a)}function XT(t,e){const i=t?"initial":"update";return{node:{fromFn(a,n){const r=a.previousDatum;let{startAngle:l,endAngle:c}=r??n;const h=r!=null&&Ty(r)?Ay(r,t):void 0,d=Ty(n)?Ay(n,t):void 0;let u;return h!=null&&d!=null?u=h:h==null&&d!=null?(u=d,l=n.startAngle,c=n.endAngle):h!=null&&d==null?(u=void 0,l=n.startAngle,c=n.endAngle):t&&(c=l),{startAngle:l,endAngle:c,clipSector:u,phase:i}},toFn(a,n){const{startAngle:r,endAngle:l}=n;let c;return Ty(n)&&(c=Ay(n,!1)),{startAngle:r,endAngle:l,clipSector:c}},applyFn(a,n){const{startAngle:r,endAngle:l}=n;let{clipSector:c}=n;c!=null&&(c=new Oy(Math.max(r,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const h=c==null||$T(r,l,c);a.startAngle=r,a.endAngle=l,a.clipSector=c,a.visible=h}},needle:{fromFn(a){let{angle:n}=a.previousDatum??a.datum;return t&&(n=e),{rotation:n,phase:i}},toFn(a,n){const{angle:r}=n;return{rotation:r}}}}}function Iy(t,e){const{startAngle:i,endAngle:o}=e,s=L8(e),a=s==null||$T(i,o,s);return{startAngle:i,endAngle:o,clipSector:s,visible:a}}function ZT(t,e){const{angle:i}=e;return{rotation:i}}var R8={top:0,middle:.5,bottom:1};function w8(t,e,i,o,s){const{padding:a,textAlign:n,verticalAlign:r}=i;let l,c;if(e.each((b,D)=>{D.label==="primary"?l=D:D.label==="secondary"&&(c=D)}),l==null)return;const h=Zr(t,l,s?.label);if(h==null)return;const d=c!=null?Zr(t,c,s?.secondaryLabel):void 0,u={padding:a},g=n==="center"?2:1,f=r==="middle"?2:1,y=b=>({width:Math.sqrt(Math.max(o**2-(b/f)**2,0))*g,height:Math.min(b,f*o),meta:null});let m,x,v;if(c!=null&&d!=null){const b=iD(h,l,d,c,u,y);m=b?.label,x=b?.secondaryLabel,v=b?.height??0}else{const b=Fr(h,l,u,y);m=b?.[0],x=void 0,v=b?.[0].height??0}const S=v*R8[r];e.each((b,D)=>{let I;if(D.label==="primary"?I=m:D.label==="secondary"&&(I=x),I==null){b.visible=!1;return}b.visible=!0,b.text=I.text,b.fontSize=I.fontSize,b.lineHeight=I.lineHeight,b.textAlign=n,b.textBaseline="middle";const M=D.label==="primary"?I.height/2:v-I.height/2;b.y=D.centerY+M-S,b.x=D.centerX})}var{fromToMotion:ul,resetMotion:qT,CachedTextMeasurerPool:P8,SeriesNodePickMode:QT,StateMachine:E8,createDatumId:Ny,normalizeAngle360:JT,normalizeAngle360Inclusive:Cy,isBetweenAngles:_p,sectorBox:_8,toDegrees:B8,toRadians:Bp,BBox:z8,Group:Ts,PointerEvents:zp,Selection:As,Sector:F8,SectorBox:V8,Text:tA,Marker:G8,getColorStops:W8}=Pa,H8={inside:90,middle:0,outside:-90},K8=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],U8=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],Fp=class extends Pa.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[QT.EXACT_SHAPE_MATCH,QT.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new Et,this.scale=new ym,this.scaleGroup=this.contentGroup.appendChild(new Ts({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Ts({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new Ts({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Ts({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Ts({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Ts({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Ts({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Ts({name:"tickGroup"})),this.scaleSelection=As.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=As.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=As.select(this.itemNeedleGroup,by),this.targetSelection=As.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=As.select(this.itemTargetLabelGroup,tA),this.labelSelection=As.select(this.itemLabelGroup,tA),this.highlightTargetSelection=As.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=As.select(this.tickGroup,Pa.TransformableText),this.datumUnion=new uk,this.animationState=new E8("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=zp.None,this.tickGroup.pointerEvents=zp.None,this.itemNeedleGroup.pointerEvents=zp.None,this.itemLabelGroup.pointerEvents=zp.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new F8}markerFactory(){const t=new G8;return t.size=1,t}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){const{min:e,max:i}=this.properties.scale;return fk(t,{min:e,max:i})}layoutScale(){const{scale:t,properties:e}=this,{seriesRectWidth:i,seriesRectHeight:o}=this.nodeDataDependencies,{scale:s,outerRadius:a}=this.properties,{min:n,max:r,label:l,interval:c}=s,h=Bp(e.startAngle-90),d=Bp(e.endAngle-90),g=Cy(d-h)>Math.PI,f=g||_p(1.5*Math.PI,h,d),y=g||_p(0*Math.PI,h,d),m=g||_p(.5*Math.PI,h,d),x=g||_p(1*Math.PI,h,d);let v;x&&!y?v="right":!x&&y?v="left":v="center";let S;f&&!m?S="bottom":!f&&m?S="top":S="middle";const b=_8({startAngle:h,endAngle:d,innerRadius:0,outerRadius:.5}),D=-(b.x+b.width/2)*2,I=-(b.y+b.height/2)*2,M=Math.min(i/b.width,o/b.height);t.domain=[n,r],t.range=[h,d],t.arcLength=M/2;const{maxSpacing:k,minSpacing:A}=c,{arcLength:O}=t,N=k?Math.floor(O/k):1,T=A?Math.floor(O/A):1/0,L=Math.floor(4/Math.PI*Math.abs(t.range[0]-t.range[1])),C=Math.max(N,Math.min(T,L)),P=c.values??t.ticks({nice:!1,interval:c.step,minTickCount:N,maxTickCount:T,tickCount:C}),R=P.reduce((W,K)=>Math.max(W,typeof K=="number"?p8(K):0),0),E=t.tickFormatter({domain:t.domain,ticks:P,fractionDigits:R,specifier:l.format}),z=l.getFont(),w=P.map((W,K)=>{const $=l.formatter?.({value:W,index:K,domain:t.domain,boundSeries:void 0})??E(W),{width:Q,height:J}=P8.measureText($,{font:z});return{index:K,value:W,text:$,width:Q,height:J}}),B=w.reduce((W,K)=>Math.max(W,K.width),0),_=w.reduce((W,K)=>Math.max(W,K.height),0),F=l.enabled?Math.max(B,_)+l.spacing:0,V=Math.max(.5*M-F,0),G=a??V;return this.centerX=i/2+D*G,this.centerY=o/2+I*G,this.radius=G,this.textAlign=v,this.verticalAlign=S,w}createConicGradient(t,e){const{scale:i}=this,{domain:o,range:s}=i,[a,n]=s,{defaultColorRange:r}=this.properties,l=JT((a+n)/2+Math.PI),c=Cy(n-a);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:W8(t,r,o,e).map(({color:d,stop:u})=>(u=Math.min(Math.max(u,0),1),u=(a+c*u-l)/(2*Math.PI),u=(u%1+1)%1,{stop:u,color:d})),rotation:B8(l)+90}}getShapeFillBBox(){const{centerX:t,centerY:e,radius:i}=this;return new z8(t-i,e-i,2*i,2*i)}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:o=e.text,value:s=e.value??0,shape:a=e.shape??"triangle",rotation:n=e.rotation??0,strokeWidth:r=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:d=e.fill??"black",fillOpacity:u=e.fillOpacity??1,stroke:g=e.stroke??"black",strokeOpacity:f=e.strokeOpacity??1,lineDash:y=e.lineDash??[0],lineDashOffset:m=e.lineDashOffset??0}=i,{enabled:x=e.label.enabled,color:v=e.label.color??"black",fontStyle:S=e.label.fontStyle??"normal",fontWeight:b=e.label.fontWeight??"normal",fontSize:D=e.label.fontSize,fontFamily:I=e.label.fontFamily,spacing:M=e.label.spacing??0}=i.label;return{text:o,value:s,shape:a,placement:l,spacing:c,size:h,rotation:n,fill:d,fillOpacity:u,stroke:g,strokeWidth:r,strokeOpacity:f,lineDash:y,lineDashOffset:m,label:{enabled:x,color:v,fontStyle:S,fontWeight:b,fontSize:D,fontFamily:I,spacing:M}}})}getTargetRadius(t){const{radius:e,properties:i}=this,{innerRadiusRatio:o,outerRadiusRatio:s}=i,{placement:a,spacing:n,size:r}=t,l=e*s,c=e*o;switch(a){case"inside":return Math.max(c-n-r/2,0);case"outside":return l+n+r/2;default:return(c+l)/2}}getTargetLabel(t){const{scale:e}=this,{value:i,size:o,placement:s,label:a}=t,{spacing:n,color:r,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:d}=a,u=void 0,g=e.convert(i),f=JT(g)/(Math.PI/2)|0,y=o/2+n;let m,x,v,S;switch(s){case"outside":({textAlign:m,textBaseline:x}=K8[f]),v=y*Math.cos(g),S=y*Math.sin(g);break;case"inside":({textAlign:m,textBaseline:x}=U8[f]),v=-y*Math.cos(g),S=-y*Math.sin(g);break;default:m="center",x="bottom",v=0,S=-y;break}return{offsetX:v,offsetY:S,fill:r,textAlign:m,textBaseline:x,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:d,lineHeight:u}}createNodeData(){if(!this.properties.isValid())return;const t=this.layoutScale(),{id:e,scale:i,properties:o,radius:s,centerX:a,centerY:n}=this,{value:r,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:h,cornerRadius:d,cornerMode:u,needle:g,bar:f,scale:y,label:m,secondaryLabel:x}=o,{outerRadius:v=s*c,innerRadius:S=s*l}=o,b=this.getTargets(),D=[],I=[],M=[],k=[],A=[],O=u==="item",N=i.convert(i.domain[0]),T=i.convert(r),L=Math.ceil(Cy(T-N)*s);let C=h.enabled?h.interval.getSegments(i,L):void 0;const P=f.enabled?f.fill??this.createConicGradient(f.fills,f.fillMode):"rgba(0,0,0,0)",R=y.fill??(f.enabled&&y.fills.length===0?y.defaultFill:void 0)??this.createConicGradient(y.fills,y.fillMode);if(C==null&&O){const E=Math.min(...i.domain),z=Math.max(...i.domain),w={value:r,segmentStart:E,segmentEnd:z},_=Math.min(d,(v-S)/2)/((S+v)/2);D.push({series:this,itemId:"value",datum:w,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:v,innerRadius:S,startAngle:N-_,endAngle:T+_,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,fill:P}),A.push({series:this,itemId:"scale",datum:w,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:v,innerRadius:S,startAngle:i.range[0]-_,endAngle:i.range[1]+_,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,fill:R})}else{C??(C=i.domain);for(let E=0;E<C.length-1;E++){const z=C[E],w=C[E+1],B={value:r,segmentStart:z,segmentEnd:w},_=E===0,F=E===C.length-2,V=i.convert(z),G=i.convert(w);D.push({series:this,itemId:`value-${E}`,datum:B,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:v,innerRadius:S,startAngle:V,endAngle:G,clipStartAngle:N,clipEndAngle:T,startCornerRadius:O||_?d:0,endCornerRadius:O||F?d:0,fill:P}),A.push({series:this,itemId:`scale-${E}`,datum:B,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:v,innerRadius:S,startAngle:V,endAngle:G,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:O||_?d:0,endCornerRadius:O||F?d:0,fill:R})}}if(!g.enabled&&m.enabled){const{text:E,color:z,fontSize:w,minimumFontSize:B,fontStyle:_,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W=K=>this.formatLabel(K.value)}=m;k.push({label:"primary",centerX:a,centerY:n,text:E,value:r,fill:z,fontSize:w,minimumFontSize:B,fontStyle:_,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W})}if(!g.enabled&&x.enabled){const{text:E,color:z,fontSize:w,minimumFontSize:B,fontStyle:_,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W}=x;k.push({label:"secondary",centerX:a,centerY:n,text:E,value:r,fill:z,fontSize:w,minimumFontSize:B,fontStyle:_,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W})}if(g.enabled){let E=g.radiusRatio!=null?s*g.radiusRatio:S;E=Math.max(E-g.spacing,0);const z=i.convert(r);M.push({centerX:a,centerY:n,radius:E,angle:z,series:this})}for(let E=0;E<b.length;E+=1){const z=b[E],{value:w,text:B,size:_,shape:F,fill:V,fillOpacity:G,stroke:W,strokeWidth:K,strokeOpacity:$,lineDash:Q,lineDashOffset:J}=z;if(w<Math.min(...i.domain)||w>Math.max(...i.domain))continue;const tt=this.getTargetRadius(z),q=i.convert(w),Z=Bp(z.rotation+H8[z.placement]);I.push({series:this,itemId:`target-${E}`,midPoint:{x:tt*Math.cos(q)+a,y:tt*Math.sin(q)+n},datum:{value:w},datumIndex:{type:1,index:E},type:1,value:w,text:B,centerX:a,centerY:n,shape:F,radius:tt,angle:q,rotation:Z,size:_,fill:V,fillOpacity:G,stroke:W,strokeOpacity:$,strokeWidth:K,lineDash:Q,lineDashOffset:J,label:this.getTargetLabel(z)})}return{itemId:e,nodeData:D,needleData:M,targetData:I,labelData:k,scaleData:A,tickData:t}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,needleSelection:o,targetSelection:s,targetLabelSelection:a,scaleSelection:n,highlightTargetSelection:r,tickSelection:l}=this,c=this.checkResize(t);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const h=this.contextNodeData?.nodeData??[],d=this.contextNodeData?.labelData??[],u=this.contextNodeData?.needleData??[],g=this.contextNodeData?.targetData??[],f=this.contextNodeData?.scaleData??[],y=this.contextNodeData?.tickData??[],m=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:f,scaleSelection:n}),this.updateScaleNodes({scaleSelection:n}),this.needleSelection=this.updateNeedleSelection({needleData:u,needleSelection:o}),this.updateNeedleNodes({needleSelection:o}),this.targetSelection=this.updateTargetSelection({targetData:g,targetSelection:s}),this.updateTargetNodes({targetSelection:s,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:g,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:h,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:d,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:m!=null?[m]:[],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:y,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Ny(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:o}=this,{bar:s,segmentation:a}=o,n=a.spacing??0,{fillOpacity:r,stroke:l,strokeOpacity:c,lineDash:h,lineDashOffset:d}=s,u=this.getStrokeWidth(s.strokeWidth),g=i.animationManager.isSkipped(),f=this.getShapeFillBBox();e.each((y,m)=>{const{centerX:x,centerY:v,innerRadius:S,outerRadius:b,startCornerRadius:D,endCornerRadius:I,fill:M}=m;y.centerX=x,y.centerY=v,y.innerRadius=S,y.outerRadius=b,y.pointerEvents=this.properties.bar.enabled?Pa.PointerEvents.All:Pa.PointerEvents.None,y.fill=M,y.fillBBox=f,y.fillOpacity=r,y.stroke=l,y.strokeOpacity=c,y.strokeWidth=u,y.lineDash=h,y.lineDashOffset=d,y.startOuterCornerRadius=D,y.startInnerCornerRadius=D,y.endOuterCornerRadius=I,y.endInnerCornerRadius=I,y.radialEdgeInset=(n+y.strokeWidth)/2,y.concentricEdgeInset=y.strokeWidth/2,(g||y.previousDatum==null)&&y.setProperties(Iy(y,m))}),this.datumUnion.update(e,this.itemGroup,Pa.Sector,(y,m,x)=>{y.clipSector??(y.clipSector=new V8(NaN,NaN,NaN,NaN)),y.centerX=m.centerX,y.centerY=m.centerY,y.outerRadius=y.clipSector.outerRadius=m.outerRadius,y.innerRadius=y.clipSector.innerRadius=m.innerRadius,y.startAngle=y.clipSector.startAngle=m.startAngle,y.startInnerCornerRadius=m.startInnerCornerRadius,y.startOuterCornerRadius=m.startOuterCornerRadius,y.endAngle=x.endAngle,y.clipSector.endAngle=x.clipSector?.endAngle??x.endAngle,y.endInnerCornerRadius=x.endInnerCornerRadius,y.endOuterCornerRadius=x.endOuterCornerRadius,y.pointerEvents=Pa.PointerEvents.None})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>Ny(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i,segmentation:o}=this.properties,s=o.spacing??0,{fillOpacity:a,stroke:n,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}=i,d=this.getShapeFillBBox();e.each((u,g)=>{const{centerX:f,centerY:y,innerRadius:m,outerRadius:x,startCornerRadius:v,endCornerRadius:S,fill:b}=g;u.centerX=f,u.centerY=y,u.innerRadius=m,u.outerRadius=x,u.fill=b,u.fillBBox=d,u.fillOpacity=a,u.stroke=n,u.strokeOpacity=r,u.strokeWidth=l,u.lineDash=c,u.lineDashOffset=h,u.startOuterCornerRadius=v,u.startInnerCornerRadius=v,u.endOuterCornerRadius=S,u.endInnerCornerRadius=S,u.radialEdgeInset=(s+u.strokeWidth)/2,u.concentricEdgeInset=u.strokeWidth/2,u.setProperties(Iy(u,g))})}updateNeedleSelection(t){return t.needleSelection.update(t.needleData,void 0,()=>Ny([]))}updateNeedleNodes(t){const{needleSelection:e}=t,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:n,lineDash:r,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();e.each((h,d)=>{const{centerX:u,centerY:g,radius:f}=d,y=f*2;h.d=by.defaultPathData,h.fill=i,h.fillOpacity=o,h.stroke=s,h.strokeOpacity=a,h.strokeWidth=n/y,h.lineDash=r.map(m=>m/y),h.lineDashOffset=l/y,h.translationX=u,h.translationY=g,h.scalingX=y,h.scalingY=y,c&&h.setProperties(ZT(h,d))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,o=i?this.properties.highlightStyle.item:void 0;e.each((s,a)=>{const{centerX:n,centerY:r,angle:l,radius:c,shape:h,size:d,rotation:u,fill:g,fillOpacity:f,stroke:y,strokeOpacity:m,strokeWidth:x,lineDash:v,lineDashOffset:S}=a;s.shape=h==="line"?yk:h,s.size=d,s.fill=o?.fill??g,s.fillOpacity=o?.fillOpacity??f,s.stroke=o?.stroke??y,s.strokeOpacity=o?.strokeOpacity??m,s.strokeWidth=o?.strokeWidth??x,s.lineDash=o?.lineDash??v,s.lineDashOffset=o?.lineDashOffset??S,s.translationX=n+c*Math.cos(l),s.translationY=r+c*Math.sin(l),s.rotation=l+u})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,o)=>{const{centerX:s,centerY:a,radius:n,angle:r,text:l}=o,{offsetX:c,offsetY:h,fill:d,fontStyle:u,fontWeight:g,fontSize:f,fontFamily:y,textAlign:m,textBaseline:x}=o.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=s+n*Math.cos(r)+c,i.y=a+n*Math.sin(r)+h,i.text=l,i.fill=d,i.fontStyle=u,i.fontWeight=g,i.fontSize=f,i.fontFamily=y,i.textAlign=m,i.textBaseline=x})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>e.label)}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((o,s)=>{o.fill=s.fill,o.fontStyle=s.fontStyle,o.fontWeight=s.fontWeight,o.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(t){return t.tickSelection.update(t.tickData,void 0,e=>e.index)}updateTickNodes(t){const{scale:e,radius:i,centerX:o,centerY:s,properties:a}=this,{enabled:n,color:r,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:d,spacing:u}=a.scale.label,g=Bp(a.scale.label.rotation??0);t.tickSelection.each((f,y)=>{if(!n){f.visible=!1;return}f.visible=!0,f.text=y.text,f.fill=r,f.fontFamily=l,f.fontSize=c,f.fontStyle=h,f.fontWeight=d,f.textAlign="center",f.textBaseline="middle";const m=e.convert(y.value),{width:x,height:v}=y,S=Math.abs(i*Math.cos(m)),b=Math.abs(i*Math.sin(m)),D=Math.min(Math.max(Math.abs(i/Math.tan(m)),S-x/2),S+x/2),I=Math.min(Math.max(Math.abs(i*Math.tan(m)),b-v/2),b+v/2),M=Math.hypot(D,I),k=o+(M+u)*Math.cos(m),A=s+(M+u)*Math.sin(m);f.x=k,f.y=A,f.rotationCenterX=k,f.rotationCenterY=A,f.rotation=g})}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){const{labelSelection:e,radius:i,textAlign:o,verticalAlign:s}=this,{spacing:a,innerRadiusRatio:n}=this.properties;w8(this,e,{padding:a,textAlign:o,verticalAlign:s},i*n,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),qT([this.datumSelection],Iy),qT([this.needleSelection],ZT),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i,o,s,a;if(this.labelSelection.each((n,r)=>{n.opacity=1,r.label==="primary"?(i=n.previousDatum?.value??t.from??r.value,o=r.value):r.label==="secondary"&&(s=n.previousDatum?.value??t.from??r.value,a=r.value)}),!this.labelsHaveExplicitText())if(o==null||a==null)this.formatLabelText();else if(i===o&&s===a)this.formatLabelText({label:o,secondaryLabel:a});else{const n=`${this.id}_labels`;e.animate({id:n,groupId:"label",from:{label:i,secondaryLabel:s},to:{label:o,secondaryLabel:a},phase:t.phase??"update",onUpdate:r=>this.formatLabelText(r)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=XT(!0,this.scale.range[0]);ul(this.id,"node",t,[this.datumSelection],e,(o,s)=>s.itemId),ul(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),ul(this.id,"label",t,[this.labelSelection],gk,(o,s)=>s.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=XT(!1,this.scale.range[0]);ul(this.id,"node",t,[this.datumSelection],e,(o,s)=>s.itemId),ul(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:o}=i;if(!i.isValid())return;let s,a;if(t.type===0?(s=i.value,a=i.label.text):{value:s,text:a}=i.targets[t.index],s!=null)return o.formatTooltip(this.properties,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(s)}]},{seriesId:e,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(t){return xk(this,t)}pickFocus(t){return Sk(this,t)}getCaptionText(){const{value:t}=this.properties,e=[];return e.push(this.formatLabel(t)),this.labelSelection.each((i,o)=>{const s=Zr(this,o);s!=null&&e.push(s)}),e.join(". ")}getCategoryValue(t){}datumIndexForCategoryValue(t){}};Fp.className="RadialGaugeSeries",Fp.type="radial-gauge";import{_ModuleSupport as Y8}from"ag-charts-community";import{and as eA,arrayOf as Ly,arrayOfDefs as j8,boolean as gl,callback as iA,color as oA,constant as $8,fillOptionsDef as Vp,fontOptionsDef as X8,greaterThan as Z8,lessThan as q8,lineDashOptionsDef as Gp,number as Ce,or as Q8,positiveNumber as Di,ratio as Ry,required as wy,string as Py,strokeOptionsDef as Wp,union as Ey}from"ag-charts-core";var{commonSeriesOptionsDefs:J8,autoSizedLabelOptionsDefs:sA,seriesLabelOptionsDefs:aA,tooltipOptionsDefs:t7,numberFormatValidator:e7}=Y8,nA={value:wy(Ce),text:Py,shape:Q8(Ey("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),iA),placement:Ey("inside","outside","middle"),spacing:Di,size:Di,rotation:Ce,label:{...aA,spacing:Di},...Vp,...Wp,...Gp},Hp={type:wy($8("radial-gauge")),value:wy(Ce),outerRadius:Di,innerRadius:Di,outerRadiusRatio:Ry,innerRadiusRatio:Ry,startAngle:Ce,endAngle:Ce,spacing:Di,cornerMode:Ey("container","item"),cornerRadius:Di,scale:{min:eA(Ce,q8("max")),max:eA(Ce,Z8("min")),label:{enabled:gl,formatter:iA,rotation:Ce,spacing:Di,minSpacing:Di,avoidCollisions:gl,format:e7,...X8},interval:{values:Ly(Ce),step:Ce},...sp,...Vp,...Wp,...Gp},targets:j8(nA,"target options array"),segmentation:{enabled:gl,spacing:Di,interval:{values:Ly(Ce),step:Ce,count:Ce}},bar:{enabled:gl,...sp,...Vp,...Wp,...Gp},needle:{enabled:gl,spacing:Di,radiusRatio:Ry,...Vp,...Wp,...Gp},label:{text:Py,spacing:Di,...sA},secondaryLabel:{text:Py,...sA},tooltip:t7,...J8};Hp.defaultColorRange=Ly(oA),Hp.defaultTarget={...nA,value:Ce,label:{...aA,spacing:Ce}},Hp.scale.defaultFill=oA;var{FONT_SIZE_RATIO:i7}=Sy,o7={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"radial-gauge",moduleFactory:t=>new Fp(t),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},Sy.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",Sy.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[i7.LARGE]},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}}}}},s7={type:"series",name:"radial-gauge",chartType:"gauge",enterprise:!0,options:Hp,create:t=>new Fp(t)};import{_ModuleSupport as rA}from"ag-charts-community";import{_ModuleSupport as a7}from"ag-charts-community";import{Logger as n7}from"ag-charts-core";function lA(t){t.nodes.sort((e,i)=>Math.round((e.datum.y-i.datum.y)*100)/100||-(e.datum.size-i.datum.size))}function r7({nodes:t,size:e},{seriesRectHeight:i,nodeSpacing:o,sizeScale:s}){const a=i*e*s;let n=(i-(a+o*(t.length-1)))/2;t.forEach(({datum:r})=>{const l=i*r.size*s;r.y=n,r.height=l,n+=l+o})}function l7(t,e){const{nodes:i}=t,{seriesRectHeight:o,nodeSpacing:s}=e;lA(t);let a=0,n=0;for(const{datum:c}of i){const h=Math.max(n-c.y,0);c.y+=h,a+=h,n=c.y+c.height+s}if(n-s<o)return a>0;let l=o;for(let c=i.length-1;c>=0;c-=1){const{datum:h}=i[c],d=h.y+h.height,u=Math.min(l-d,0);h.y+=u,a+=u,l=h.y-s}return!0}function _y(t,e,i,o,s,a,n,r){const l=(i-t)/(o-e),c=(n-s)/(r-a),h=((a-e)*(l*c)+t*c-s*l)/(c-l);return t<i?h>t&&h<Math.min(i,n):h<t&&h>Math.max(i,n)}function cA(t,e){let i=!1;const o=t.nodes.filter(a=>e(a).length===1);let s=!0;for(let a=0;s&&a<o.length;a+=1){s=!1;for(let n=0;n<o.length-1;n+=1){const{datum:r}=o[n],l=e(o[n])[0].node.datum,{datum:c}=o[n+1],h=e(o[n+1])[0].node.datum;if(!(_y(r.x,r.y,l.x,l.y,c.x,c.y,h.x,h.y)||_y(r.x,r.y+r.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,h.x,h.y+h.height/2)||_y(r.x,r.y+r.height,l.x,l.y+l.height,c.x,c.y+c.height,h.x,h.y+h.height)))continue;const u=o[n];o[n]=o[n+1],o[n+1]=u;const g=r.y;r.y=c.y+c.height-r.height,c.y=g,i=!0,s=!0}}return i}function c7(t){let e=!1;return lA(t),e=cA(t,i=>i.linksBefore)||e,e=cA(t,i=>i.linksAfter)||e,e}function h7(t){if(t.length===0)return;let e=0,i=0;for(const{node:{datum:o}}of t)e+=o.y*o.size,i+=o.size;return e/i}function hA(t,e,i,o){return t.nodes.forEach(({datum:s,linksBefore:a,linksAfter:n})=>{const r=o===1?a:n,l=o===1?n:a,c=h7(r);if(c!=null){const h=l.length!==0?i:1;s.y=s.y+(c-s.y)*h}}),l7(t,e)}function pA(t,e,i){let o=!1;for(const s of t)o=hA(s,e,i,1)||o;return o}function p7(t,e,i){let o=!1;for(let s=t.length-1;s>=0;s-=1)o=hA(t[s],e,i,-1)||o;return o}function dA(t){let e=!1;for(let i=t.length-1;i>=0;i-=1)e=c7(t[i])||e;return e}function d7(t,e){t.forEach(o=>{r7(o,e)});let i=!1;for(let o=0;o<6;o+=1){const s=pA(t,e,1);i=p7(t,e,.5);const a=dA(t);if(!s&&!i&&!a)break}i&&(pA(t,e,1),dA(t))}import{_ModuleSupport as u7}from"ag-charts-community";var{BBox:g7,Path:f7,ScenePathChangeDetection:Gn,splitBezier:y7}=u7;function Kp(t,e,i,o,s,a,n,r,l,c){let h,d;if(s!==i&&l!==n){const I=-(o-e)/(s-i),M=-(r-a)/(l-n);h=(n-i+I*e-M*a)/(I-M),d=I*(h-e)+i}else if(s===i&&l!==n)h=e,d=-(r-a)/(l-n)*(h-r)+l;else if(s!==i&&l===n)h=r,d=-(o-e)/(s-i)*(h-e)+i;else throw new Error("Offsetting flat bezier curve");const u=Math.hypot(i-d,e-h),g=(u+c)/u,f=Math.hypot(l-d,r-h),y=(f+c)/f,m=h+(o-h)*g,x=d+(s-d)*g,v=h+(a-h)*y,S=d+(n-d)*y,b=h+(r-h)*y,D=d+(l-d)*y;t.cubicCurveTo(m,x,v,S,b,D)}var Ea=class extends f7{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const t=Math.min(this.x1,this.x2),e=Math.max(this.x1,this.x2)-t,i=Math.min(this.y1,this.y2),o=Math.max(this.y1,this.y2)-i+this.height;return new g7(t,i,e,o)}updatePath(){const{path:t,inset:e}=this;t.clear();const i=this.x1+e,o=this.x2-e,s=this.y1+e,a=this.y2+e,n=this.height-2*e;if(n<0||i>o)return;const r=i,l=s+n/2,c=(i+o)/2,h=s+n/2,d=(i+o)/2,u=a+n/2,g=o,f=a+n/2;if(t.moveTo(r,l-n/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)t.cubicCurveTo(c,h-n/2,d,u-n/2,g,f-n/2),t.lineTo(g,f+n/2),t.cubicCurveTo(d,u+n/2,c,h+n/2,r,l+n/2);else{const[y,m]=y7(r,l,c,h,d,u,g,f,.5),x=(a>s?1:-1)*n/2;Kp(t,y[0].x,y[0].y,y[1].x,y[1].y,y[2].x,y[2].y,y[3].x,y[3].y,x),Kp(t,m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y,-x),t.lineTo(g,f+n/2),Kp(t,m[3].x,m[3].y,m[2].x,m[2].y,m[1].x,m[1].y,m[0].x,m[0].y,x),Kp(t,y[3].x,y[3].y,y[2].x,y[2].y,y[1].x,y[1].y,y[0].x,y[0].y,-x)}t.closePath()}};p([Gn()],Ea.prototype,"x1",2),p([Gn()],Ea.prototype,"x2",2),p([Gn()],Ea.prototype,"y1",2),p([Gn()],Ea.prototype,"y2",2),p([Gn()],Ea.prototype,"height",2),p([Gn()],Ea.prototype,"inset",2);import{_ModuleSupport as m7}from"ag-charts-community";var{BaseProperties:uA,FillGradientDefaults:x7,FillPatternDefaults:S7,SeriesTooltip:b7,SeriesProperties:v7,ARRAY:D7,ARRAY_OF:By,COLOR_STRING:Wn,COLOR_STRING_ARRAY:gA,FUNCTION:fA,LINE_DASH:yA,OBJECT:Hn,POSITIVE_NUMBER:_a,OR:zy,COLOR_GRADIENT:Fy,COLOR_PATTERN:M7,RATIO:Up,STRING:Is,UNION:k7,TempValidate:et,Label:O7}=m7,T7=k7(["left","right","center","justify"],"a justification value"),mA=class extends O7{constructor(){super(...arguments),this.spacing=1}};p([et(_a)],mA.prototype,"spacing",2);var Yo=class extends uA{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};p([et(zy(Fy,Wn),{optional:!0})],Yo.prototype,"fill",2),p([et(Up)],Yo.prototype,"fillOpacity",2),p([et(Wn,{optional:!0})],Yo.prototype,"stroke",2),p([et(Up)],Yo.prototype,"strokeOpacity",2),p([et(_a)],Yo.prototype,"strokeWidth",2),p([et(yA)],Yo.prototype,"lineDash",2),p([et(_a)],Yo.prototype,"lineDashOffset",2),p([et(fA,{optional:!0})],Yo.prototype,"itemStyler",2);var Mi=class extends uA{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};p([et(_a)],Mi.prototype,"spacing",2),p([et(_a)],Mi.prototype,"width",2),p([et(T7)],Mi.prototype,"alignment",2),p([et(zy(Fy,Wn),{optional:!0})],Mi.prototype,"fill",2),p([et(Up)],Mi.prototype,"fillOpacity",2),p([et(Wn,{optional:!0})],Mi.prototype,"stroke",2),p([et(Up)],Mi.prototype,"strokeOpacity",2),p([et(_a)],Mi.prototype,"strokeWidth",2),p([et(yA)],Mi.prototype,"lineDash",2),p([et(_a)],Mi.prototype,"lineDashOffset",2),p([et(fA,{optional:!0})],Mi.prototype,"itemStyler",2);var jt=class extends v7{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new x7,this.fillPatternDefaults=new S7,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new mA,this.link=new Yo,this.node=new Mi,this.tooltip=new b7}};p([et(D7,{optional:!0})],jt.prototype,"nodes",2),p([et(Is)],jt.prototype,"fromKey",2),p([et(Is)],jt.prototype,"toKey",2),p([et(Is)],jt.prototype,"idKey",2),p([et(Is,{optional:!0})],jt.prototype,"idName",2),p([et(Is,{optional:!0})],jt.prototype,"labelKey",2),p([et(Is,{optional:!0})],jt.prototype,"labelName",2),p([et(Is,{optional:!0})],jt.prototype,"sizeKey",2),p([et(Is,{optional:!0})],jt.prototype,"sizeName",2),p([et(Hn)],jt.prototype,"fillGradientDefaults",2),p([et(Hn)],jt.prototype,"fillPatternDefaults",2),p([et(By(gA))],jt.prototype,"defaultColorRange",2),p([et(By(Wn))],jt.prototype,"defaultPatternFills",2),p([et(By(zy(Fy,Wn,M7)))],jt.prototype,"fills",2),p([et(gA)],jt.prototype,"strokes",2),p([et(Hn)],jt.prototype,"label",2),p([et(Hn)],jt.prototype,"link",2),p([et(Hn)],jt.prototype,"node",2),p([et(Hn)],jt.prototype,"tooltip",2);var{Transformable:A7,applyShapeStyle:xA,SeriesNodePickMode:SA,CachedTextMeasurerPool:I7,TextWrapper:bA,TextUtils:vA,createDatumId:Yp,getShapeStyle:jp,Rect:DA,BBox:MA}=a7,$p=class extends gM{constructor(t){super({moduleCtx:t,pickModes:[SA.NEAREST_NODE,SA.EXACT_SHAPE_MATCH]}),this.properties=new jt}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Ea}nodeFactory(){return new DA}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:o,toKey:s,sizeKey:a,label:{spacing:n},node:{spacing:r,width:l,alignment:c}}=this.properties,{nodeGraph:h,links:d,maxPathLength:u}=this.getNodeGraph(M=>({...M,x:NaN,y:NaN,width:l,height:NaN}),M=>({...M,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),g=h,f=this.isLabelEnabled()?(e-l)*(1-u/(u+1)):0,y=(e-l-2*f)/(u-1),m=[];for(let M=0;M<u;M+=1){const k=f+M*y;m.push({index:M,size:0,nodes:[],x:k})}g.forEach(M=>{const{datum:k,linksBefore:A,linksAfter:O,maxPathLengthBefore:N,maxPathLengthAfter:T}=M,L=Math.max(A.reduce((R,{link:E})=>R+E.size,0),O.reduce((R,{link:E})=>R+E.size,0));if(A.length===0&&O.length===0||L===0){M.columnIndex=-1;return}let C;switch(c){case"left":C=m[N];break;case"right":C=m[u-1-T];break;case"center":{if(A.length!==0)C=m[N];else if(O.length!==0){const R=O.reduce((E,z)=>Math.min(E,z.node.maxPathLengthBefore),u)-1;C=m[R]}else C=m[0];break}case"justify":{C=O.length===0?m[u-1]:m[N];break}}k.x=C.x,k.size=L;const P=this.getLabelText(this.properties.label,{datum:k.datum,value:k.label,fromKey:o,toKey:s,sizeKey:a,size:L});k.label=String(P),C.nodes.push(M),C.size+=L,M.columnIndex=C.index}),g.forEach(M=>{let k=1/0,A=0;M.linksAfter.forEach(O=>{const N=O.node,{columnIndex:T}=N;T<k?(k=T,A=N.datum.size):T===k&&(A=Math.max(A,N.datum.size))}),M.closestColumnIndex=k,M.maxSizeOfClosestNodesAfter=A});const x=m.reduce((M,{size:k,nodes:A})=>{const O=(1-(A.length-1)*(r/i))/k;return Math.min(M,O)},1/0);for(let M=m.length-1;M>=0;M-=1)m[M].nodes.sort((A,O)=>A.closestColumnIndex-O.closestColumnIndex||A.maxSizeOfClosestNodesAfter-O.maxSizeOfClosestNodesAfter||A.datum.size-O.datum.size);d7(m,{seriesRectHeight:i,nodeSpacing:r,sizeScale:x});let v=!1;if(g.forEach(({datum:M,linksBefore:k,linksAfter:A})=>{v||(v=M.height<0);const O=M.y+M.height,N=C=>C.sort((P,R)=>{const E=P.node.datum,z=R.node.datum,w=E.y+E.height,B=z.y+z.height,_=Math.atan2(E.y-M.y,Math.abs(E.x-M.x))-Math.atan2(z.y-M.y,Math.abs(z.x-M.x)),F=Math.atan2(w-O,Math.abs(E.x-M.x))-Math.atan2(B-O,Math.abs(z.x-M.x));return _+F});let T=M.y;N(k).forEach(({link:C})=>{C.y2=T,T+=C.size*i*x});let L=M.y;N(A).forEach(({link:C})=>{C.y1=L,L+=C.size*i*x})}),v){n7.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const S=[],b=[],{fontSize:D}=this.properties.label,I=this.properties.label.getFont();return m.forEach((M,k)=>{const A=k===0,O=k===m.length-1;let N=-1/0;M.nodes.sort((T,L)=>T.datum.y-L.datum.y),M.nodes.forEach(({datum:T})=>{if(T.midPoint={x:T.x+T.width/2,y:T.y+T.height/2},S.push(T),T.label==null)return;const L=A?T.x-n:T.x+T.width+n,C=T.y+T.height/2;let P;if(!A&&!O){const w=C-vA.getLineHeight(D),B=C+vA.getLineHeight(D);let _=e;g.forEach(({datum:V})=>{V.x>T.x&&Math.max(V.y,w)<=Math.min(V.y+V.height,B)&&(_=Math.min(_,V.x-n))});const F=_-T.x-2*n;P=bA.wrapText(T.label,{maxWidth:F,maxHeight:T.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(P==null||P===""){const w=A||O?n:n*2;P=bA.wrapText(T.label,{maxWidth:y-w,maxHeight:T.height,font:this.properties.label,textWrap:"never"})}if(P==="")return;const{height:R}=I7.measureText(P,{font:I,textAlign:"left",textBaseline:"middle"}),E=C-R/2,z=C+R/2;E>=N&&(b.push({x:L,y:C,leading:A,text:P}),N=z)})}),d.forEach(M=>{const{fromNode:k,toNode:A,size:O}=M;M.height=i*O*x,M.x1=k.x+l,M.x2=A.x,M.midPoint={x:(M.x1+M.x2)/2,y:(M.y1+M.y2)/2+M.height/2},S.push(M)}),{itemId:t,nodeData:S,labelData:b}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:n}=this.properties.label;e.each((r,{x:l,y:c,leading:h,text:d})=>{r.visible=!0,r.x=l,r.y=c,r.text=d,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=a,r.fontFamily=n,r.textAlign=h?"right":"left",r.textBaseline="middle"})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Yp([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=e.node,l=t?e.highlightStyle.item:void 0;return jp({fill:l?.fill??i,fillOpacity:l?.fillOpacity??o,stroke:l?.stroke??s,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.node.strokeWidth),lineDash:l?.lineDash??n,lineDashOffset:l?.lineDashOffset??r},e.fillGradientDefaults,e.fillPatternDefaults)}getNodeStyleOverrides(t,e,i,o,s,a,n){const{id:r,properties:l}=this,{fills:c,strokes:h,defaultColorRange:d,defaultPatternFills:u}=l,{itemStyler:g}=l.node,f=a.fill??c[i%c.length],y=a.stroke??h[i%h.length],m=d[i%d.length].map(S=>({color:S})),x=u[i%u.length];let v;if(n||(v??(v={}),v.fill=f,v.stroke=y),g!=null){const S=this.cachedDatumCallback(Yp(t,"node",n?"highlight":"node"),()=>{const{fillOpacity:b=1,strokeOpacity:D=1,strokeWidth:I=0,lineDash:M=[],lineDashOffset:k=0}=a;return this.callWithContext(g,{seriesId:r,datum:e,highlighted:n,label:s,size:o,fill:f,fillOpacity:b,stroke:y,strokeOpacity:D,strokeWidth:I,lineDash:M,lineDashOffset:k})});v??(v={}),Object.assign(v,S)}return jp(v,{...this.properties.fillGradientDefaults.toJson(),colorStops:m},{...this.properties.fillPatternDefaults.toJson(),fill:x,stroke:x})}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseNodeStyle(i),s=this.getShapeFillBBox();e.each((a,n)=>{const{datumIndex:r,size:l,label:c}=n,h=this.getNodeStyleOverrides(String(r.index),n.datum,r.index,l,c,o,i);a.x=n.x,a.y=n.y,a.width=Math.max(n.width,0),a.height=Math.max(n.height,0),xA(a,o,h,s)})}getShapeFillBBox(){const t=this._nodeDataDependencies?.seriesRectWidth??0,e=this._nodeDataDependencies?.seriesRectHeight??0,i=new MA(0,0,t,e);return{series:i,axis:i}}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>Yp([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:n,lineDashOffset:r}=e.link,l=t?e.highlightStyle.item:void 0;return jp({fill:l?.fill??i,fillOpacity:l?.fillOpacity??o,stroke:l?.stroke??s,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.link.strokeWidth),lineDash:l?.lineDash??n,lineDashOffset:l?.lineDashOffset??r},e.fillGradientDefaults,e.fillPatternDefaults)}getLinkStyleOverrides(t,e,i,o,s){const{id:a,properties:n}=this,{fills:r,strokes:l,defaultColorRange:c,defaultPatternFills:h}=n,{itemStyler:d}=n.link,u=o.fill??r[i%r.length],g=o.stroke??l[i%l.length],f=c[i%c.length].map(x=>({color:x})),y=h[i%h.length];let m;if(s||(m??(m={}),m.fill=u,m.stroke=g),d!=null){const x=this.cachedDatumCallback(Yp(t,"link",s?"highlight":"node"),()=>{const{fillOpacity:v=1,strokeOpacity:S=1,strokeWidth:b=0,lineDash:D=[],lineDashOffset:I=0}=o;return this.callWithContext(d,{seriesId:a,datum:e,highlighted:s,fill:u,fillOpacity:v,stroke:g,strokeOpacity:S,strokeWidth:b,lineDash:D,lineDashOffset:I})});m??(m={}),Object.assign(m,x)}return jp(m,{...this.properties.fillGradientDefaults.toJson(),colorStops:f},{...this.properties.fillPatternDefaults.toJson(),fill:y,stroke:y})}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseLinkStyle(i),s=this.getShapeFillBBox();e.each((a,n)=>{const{datumIndex:r}=n,l=n.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(r.index),n.datum,l.index,o,i);a.x1=n.x1,a.y1=n.y1,a.x2=n.x2,a.y2=n.y2,a.height=n.height,xA(a,o,c,s),a.inset=a.strokeWidth/2})}getTooltipContent(t){const{id:e,linksProcessedData:i,nodesProcessedData:o,properties:s}=this,{fromKey:a,toKey:n,sizeKey:r,sizeName:l,tooltip:c}=s,h=this.contextNodeData?.nodeData.find(m=>m.datumIndex.type===t.type&&m.datumIndex.index===t.index);if(h==null)return;const d=h.type===0?h.fromNode.index:h.index,u=h.type===0?`${h.fromNode.label} - ${h.toNode.label}`:h.label,g=t.type===0?i?.dataSources.get(this.id)?.[t.index]:o?.dataSources.get(this.id)?.[t.index],f=h.size;let y;if(h.type===0){const m=h.fromNode.datumIndex,x=this.getBaseLinkStyle(!1);Object.assign(x,this.getLinkStyleOverrides(String(t.index),g,m.index,x,!1)),y=x}else{const m=h.label,x=this.getBaseNodeStyle(!1);Object.assign(x,this.getNodeStyleOverrides(String(t.index),g,t.index,f,m,x,!1)),y=x}return c.formatTooltip(this.properties,{title:u,symbol:this.legendItemSymbol(h.type,d,y),data:r!=null?[{label:l,fallbackLabel:r,value:String(f)}]:[]},{seriesId:e,datum:g,title:u,fromKey:a,toKey:n,sizeKey:r,sizeName:l,size:f,...y})}computeFocusBounds(t){if(t instanceof DA){const{x:e,y:i,width:o,height:s}=t,a=new MA(e,i,o,s);return A7.toCanvas(this.contentGroup,a)}return t}};$p.className="SankeySeries",$p.type="sankey";import{_ModuleSupport as N7}from"ag-charts-community";import{arrayOf as fl,callback as kA,color as Vy,colorUnion as C7,constant as L7,fillGradientDefaults as R7,fillOptionsDef as OA,fillPatternDefaults as w7,lineDashOptionsDef as TA,positiveNumber as Gy,required as Wy,string as Xp,strokeOptionsDef as AA,union as P7}from"ag-charts-core";var{commonSeriesOptionsDefs:E7,seriesLabelOptionsDefs:_7,tooltipOptionsDefs:B7}=N7,yl={type:Wy(L7("sankey")),fromKey:Wy(Xp),toKey:Wy(Xp),sizeKey:Xp,sizeName:Xp,fills:fl(C7),strokes:fl(Vy),label:{..._7,spacing:Gy},link:{itemStyler:kA,...OA,...AA,...TA},node:{width:Gy,spacing:Gy,alignment:P7("left","center","right","justify"),itemStyler:kA,...OA,...AA,...TA},tooltip:B7,...E7};yl.fillGradientDefaults=R7,yl.fillPatternDefaults=w7,yl.defaultColorRange=fl(fl(Vy)),yl.defaultPatternFills=fl(Vy);var z7={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:t=>new $p(t),tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:rA.FILL_PATTERN_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:rA.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}}},F7={type:"series",name:"sankey",chartType:"flow-proportion",enterprise:!0,options:yl,create:t=>new $p(t)};import{_ModuleSupport as IA}from"ag-charts-community";import{_ModuleSupport as ml}from"ag-charts-community";import{_ModuleSupport as V7}from"ag-charts-community";var{HierarchySeriesProperties:G7,HighlightStyle:W7,SeriesTooltip:H7,TempValidate:Ht,COLOR_STRING:K7,FUNCTION:U7,NUMBER:NA,OBJECT:Kn,POSITIVE_NUMBER:Hy,RATIO:Zp,STRING:qp}=V7,Ns=class extends W7{constructor(){super(...arguments),this.label=new po,this.secondaryLabel=new po}};p([Ht(qp,{optional:!0})],Ns.prototype,"fill",2),p([Ht(Zp,{optional:!0})],Ns.prototype,"fillOpacity",2),p([Ht(K7,{optional:!0})],Ns.prototype,"stroke",2),p([Ht(Hy,{optional:!0})],Ns.prototype,"strokeWidth",2),p([Ht(Zp,{optional:!0})],Ns.prototype,"strokeOpacity",2),p([Ht(Kn)],Ns.prototype,"label",2),p([Ht(Kn)],Ns.prototype,"secondaryLabel",2);var Le=class extends G7{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new Ns,this.label=new po,this.secondaryLabel=new Gr,this.tooltip=new H7}};p([Ht(qp,{optional:!0})],Le.prototype,"sizeName",2),p([Ht(qp,{optional:!0})],Le.prototype,"labelKey",2),p([Ht(qp,{optional:!0})],Le.prototype,"secondaryLabelKey",2),p([Ht(Zp)],Le.prototype,"fillOpacity",2),p([Ht(Hy)],Le.prototype,"strokeWidth",2),p([Ht(Zp)],Le.prototype,"strokeOpacity",2),p([Ht(Hy)],Le.prototype,"cornerRadius",2),p([Ht(NA,{optional:!0})],Le.prototype,"sectorSpacing",2),p([Ht(NA,{optional:!0})],Le.prototype,"padding",2),p([Ht(U7,{optional:!0})],Le.prototype,"itemStyler",2),p([Ht(Kn)],Le.prototype,"highlightStyle",2),p([Ht(Kn)],Le.prototype,"label",2),p([Ht(Kn)],Le.prototype,"secondaryLabel",2),p([Ht(Kn)],Le.prototype,"tooltip",2);var{fromToMotion:Y7,normalizeAngle360:j7,createDatumId:$7,Sector:Ky,Group:Qp,ScalableGroup:X7,Selection:Uy,TransformableText:Yy,BBox:CA,applyShapeStyle:Z7,getShapeStyle:jy}=ml,q7=class extends ml.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function LA(t,e=0,i=2*Math.PI/t.sumSize){for(const o of t.children){const s=e+o.sumSize*i;o.startAngle=e,o.endAngle=s,LA(o,e,i),e=s}}var Jp=class extends ml.HierarchySeries{constructor(){super(...arguments),this.NodeClass=q7,this.properties=new Le,this.scalingGroup=this.contentGroup.appendChild(new X7),this.sectorGroup=this.scalingGroup.appendChild(new Qp),this.sectorLabelGroup=this.scalingGroup.appendChild(new Qp),this.highlightSectorGroup=this.scalingGroup.appendChild(new Qp),this.datumSelection=Uy.select(this.sectorGroup,Ky),this.labelSelection=Uy.select(this.sectorLabelGroup,Qp),this.highlightSelection=Uy.select(this.highlightSectorGroup,Ky)}processData(){super.processData(),LA(this.rootNode)}updateSelections(){const t=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(t!=null?[t]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(e==null||e.seriesRect==null)return;const o=Array.from(this.rootNode),s=a=>{a.append([new Yy({tag:0}),new Yy({tag:1})])};this.datumSelection.update(o,void 0,a=>this.getDatumId(a)),this.labelSelection.update(o,s,a=>this.getDatumId(a))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle:void 0;return jy({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s,a){const{id:n,properties:r,colorScale:l}=this,{fills:c,strokes:h,itemStyler:d}=r,u=t[0],g=s.fill??c[u%c.length],f=s.stroke??h[u%h.length],y={};if(a||(y.fill=o!=null?l.convert(o):g,y.stroke=f),d!=null){const m=this.cachedDatumCallback($7(t.join(":"),a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:n,datum:e,depth:i,highlighted:a,fill:g,stroke:f,...s}));Object.assign(y,m)}return jy(y,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateNodes(){const{chart:t,data:e,maxDepth:i}=this;if(t==null||e==null)return;const{width:o,height:s}=t.seriesRect,{sectorSpacing:a=0,padding:n=0,cornerRadius:r,childrenKey:l,colorKey:c,colorName:h,labelKey:d,secondaryLabelKey:u,sizeKey:g,sizeName:f}=this.properties;this.contentGroup.translationX=o/2,this.contentGroup.translationY=s/2;const y=a*.5,m=Math.min(o,s)/2,x=m/(i+1),v=-Math.PI/2,S={series:new CA(-m,-m,2*m,2*m),axis:new CA(-m,-m,2*m,2*m)};this.rootNode?.walk(A=>{const{startAngle:O,endAngle:N}=A;if(A.depth!=null){const T=(O+N)/2+v,L=(A.depth+.5)*x;A.midPoint.x=Math.cos(T)*L,A.midPoint.y=Math.sin(T)*L}}),this.rootNode?.walk(A=>{const{datum:O,depth:N,startAngle:T,endAngle:L,parent:C,sumSize:P}=A;A.label=void 0,A.secondaryLabel=void 0,A.contentHeight=0;let R;if(O!=null&&N!=null&&d!=null){const ct=O[d];R=this.getLabelText(this.properties.label,{depth:N,datum:O,childrenKey:l,colorKey:c,colorName:h,labelKey:d,secondaryLabelKey:u,sizeKey:g,sizeName:f,value:ct})}R===""&&(R=void 0);let E;if(O!=null&&N!=null&&u!=null){const ct=O[u];E=this.getLabelText(this.properties.secondaryLabel,{depth:N,datum:O,childrenKey:l,colorKey:c,colorName:h,labelKey:d,secondaryLabelKey:u,sizeKey:g,sizeName:f,value:ct})}if(E===""&&(E=void 0),N==null)return;const z=N*x+y,w=(N+1)*x-y,B=z>y?y/z:y,_=w>y?y/w:y,F=T+B,G=L+B-F,W=T+_,$=L+_-W,Q=ct=>{if(N===0&&C?.sumSize===P)return{width:2*Math.sqrt(w**2-(ct*.5)**2),height:ct,meta:0};const Nt=ct,Ye=2*Math.sqrt(w**2-(z+Nt)**2),Ai=G<Math.PI?2*z*Math.tan(G*.5):1/0,So=Math.min(Ye,Ai),ws=Math.PI/4;let bo,jo;return N===0?(bo=ct,jo=Math.sqrt(w**2-(bo/2)**2)-ct/(2*Math.tan($*.5))):j7(G)<ws?(bo=2*z*Math.tan(G*.5),jo=Math.sqrt(w**2-(bo/2)**2)-z):(jo=0,bo=0),So>=jo?{width:So,height:Nt,meta:1}:{width:jo,height:bo,meta:2}},J=Bg(R,this.properties.label,E,this.properties.secondaryLabel,{padding:n},Q);if(J==null)return;const{width:tt,height:q,meta:Z,label:lt,secondaryLabel:ht}=J,j=v+(T+L)/2,Xt=Math.sin(j)>=0,Zt=Math.cos(j)>=0,pt=(Xt?3:12)&(Zt?6:9);let It;switch(Z){case 0:It=0;break;case 1:{const ft=w-(x-q)*.58,Nt=Math.sqrt((w-n)**2-(tt/2)**2);It=Math.min(ft,Nt);break}case 2:if(N===0){const ct=q/(2*Math.tan(G*.5))+tt*.5,ft=Math.sqrt(w**2-(q*.5)**2)-tt*.5;It=(ct+ft)*.5}else It=(z+w)*.5;break}if(lt!=null){const{fontStyle:ct="normal",fontFamily:ft,fontWeight:Nt="normal",color:Ye="black"}=this.properties.label;A.label={...lt,fontStyle:ct,fontFamily:ft,fontWeight:Nt,color:Ye,labelPlacement:Z,circleQuarter:pt,radius:It,theta:j}}if(ht!=null){const{fontStyle:ct="normal",fontFamily:ft,fontWeight:Nt="normal",color:Ye="black"}=this.properties.secondaryLabel;A.secondaryLabel={...ht,fontStyle:ct,fontFamily:ft,fontWeight:Nt,color:Ye,labelPlacement:Z,circleQuarter:pt,radius:It,theta:j}}A.contentHeight=J.height});const b=(A,O,N,T)=>{const{datum:L,datumIndex:C,depth:P,colorValue:R,startAngle:E,endAngle:z}=A;if(P==null){O.visible=!1;return}O.visible=!0;const w=this.getItemStyleOverrides(C,L,P,R,N,T),B=w.fill??N.fill,_=w.strokeWidth??N.strokeWidth,F=ml.isGradientFill(B)&&B.bounds!=="item"?S:void 0;Z7(O,N,w,F),O.centerX=0,O.centerY=0,O.innerRadius=P*x,O.outerRadius=(P+1)*x,O.startAngle=E+v,O.endAngle=z+v,O.inset=y+_*.5,O.cornerRadius=r},D=this.getItemBaseStyle(!1);this.datumSelection.each((A,O)=>{b(O,A,D,!1)});const I=this.getItemBaseStyle(!0);this.highlightSelection.each((A,O)=>{b(O,A,I,!0)});const M=(A,O,N,T)=>{const{depth:L,contentHeight:C}=A,P=N===0,R=P?A.label:A.secondaryLabel;if(L==null||R==null){O.visible=!1;return}const{labelPlacement:E,circleQuarter:z,radius:w,theta:B}=R;let _;switch(T&&(_=(P?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),O.text=R.text,O.fontSize=R.fontSize,O.lineHeight=R.lineHeight,O.fontStyle=R.fontStyle,O.fontFamily=R.fontFamily,O.fontWeight=R.fontWeight,O.fill=_??R.color,E){case 0:O.textAlign="center",O.textBaseline="top",O.translationX=0,O.translationY=(P?0:C-R.height)-C*.5,O.rotation=0;break;case 1:{const F=(z&3)!==0,V=P===!F?w:w-(C-R.height);O.textAlign="center",O.textBaseline=F?"bottom":"top",O.translationX=Math.cos(B)*V,O.translationY=Math.sin(B)*V,O.rotation=F?B-Math.PI*.5:B+Math.PI*.5;break}case 2:{const F=(z&6)!==0,V=P===!F?(C-R.height)*.5:(R.height-C)*.5;O.textAlign="center",O.textBaseline="middle",O.translationX=Math.cos(B)*w+Math.cos(B+Math.PI/2)*V,O.translationY=Math.sin(B)*w+Math.sin(B+Math.PI/2)*V,O.rotation=F?B:B+Math.PI;break}}O.visible=!0},k=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(Yy).forEach(A=>{const O=A.closestDatum();M(O,A,A.tag,O===k)})}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,d=t.reduce((b,D)=>b?.children[D],this.rootNode);if(d==null)return;const{datum:u,depth:g}=d;if(u==null||g==null)return;const f=[],y=n!=null?u[n]:void 0;y!=null&&f.push({label:r,fallbackLabel:n,value:y});const m=l!=null?u[l]:void 0;m!=null&&f.push({label:c,fallbackLabel:l,value:m});const x=this.getItemBaseStyle(!1);Object.assign(x,this.getItemStyleOverrides(t,u,g,m,x,!1));const v=x.fill,S=jy({shape:"square",fill:v,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},i.fillGradientDefaults,i.fillPatternDefaults);return ml.isGradientFill(S.fill)&&(S.fill={...S.fill,gradient:"linear",rotation:0,reverse:!1}),h.formatTooltip(i,{title:o!=null?u[o]:void 0,symbol:{marker:S},data:f},{seriesId:e,datum:u,title:void 0,depth:g,labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,...x})}createNodeData(){}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.datumSelection.selectByClass(Ky))}animateEmptyUpdateReady(){Y7(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(t){return t}};Jp.className="SunburstSeries",Jp.type="sunburst";import{_ModuleSupport as Q7}from"ag-charts-community";import{arrayOf as $y,callback as J7,color as td,colorUnion as t9,constant as e9,fillOptionsDef as RA,positiveNumber as ed,required as i9,string as Ba,strokeOptionsDef as wA}from"ag-charts-core";var{commonSeriesOptionsDefs:o9,autoSizedLabelOptionsDefs:PA,tooltipOptionsDefs:s9,without:EA}=Q7,a9={type:i9(e9("sunburst")),labelKey:Ba,secondaryLabelKey:Ba,childrenKey:Ba,sizeKey:Ba,colorKey:Ba,sizeName:Ba,colorName:Ba,fills:$y(t9),strokes:$y(td),colorRange:$y(td),sectorSpacing:ed,cornerRadius:ed,padding:ed,itemStyler:J7,label:{spacing:ed,...PA},secondaryLabel:PA,tooltip:s9,...o9,...EA(RA,["fill"]),...EA(wA,["stroke"]),highlightStyle:{label:{color:td},secondaryLabel:{color:td},...RA,...wA}},{FONT_SIZE_RATIO:_A}=IA,n9={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:t=>new Jp(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:IA.FILL_PATTERN_DEFAULTS,label:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[_A.LARGE]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},9/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[_A.SMALLEST]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},7/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}}},r9={type:"series",name:"sunburst",chartType:"hierarchy",enterprise:!0,options:a9,create:t=>new Jp(t)};import{_ModuleSupport as BA}from"ag-charts-community";import{_ModuleSupport as xl}from"ag-charts-community";import{isNumberEqual as l9}from"ag-charts-core";import{_ModuleSupport as c9}from"ag-charts-community";var{BaseProperties:id,HierarchySeriesProperties:h9,HighlightStyle:p9,SeriesTooltip:d9,TempValidate:X,BOOLEAN:u9,COLOR_STRING:Un,FUNCTION:g9,NUMBER:f9,OBJECT:ki,POSITIVE_NUMBER:xo,RATIO:Cs,STRING:Sl,STRING_ARRAY:zA,TEXT_ALIGN:FA,VERTICAL_ALIGN:y9,COLOR_GRADIENT:VA,COLOR_PATTERN:GA,OR:WA,Label:m9}=c9,HA=class extends m9{constructor(){super(...arguments),this.spacing=0}};p([X(f9)],HA.prototype,"spacing",2);var Oi=class extends id{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new HA}};p([X(WA(VA,Un,GA),{optional:!0})],Oi.prototype,"fill",2),p([X(Cs)],Oi.prototype,"fillOpacity",2),p([X(Un,{optional:!0})],Oi.prototype,"stroke",2),p([X(xo)],Oi.prototype,"strokeWidth",2),p([X(Cs)],Oi.prototype,"strokeOpacity",2),p([X(xo)],Oi.prototype,"cornerRadius",2),p([X(FA)],Oi.prototype,"textAlign",2),p([X(xo)],Oi.prototype,"gap",2),p([X(xo)],Oi.prototype,"padding",2),p([X(u9)],Oi.prototype,"interactive",2),p([X(ki)],Oi.prototype,"label",2);var ri=class extends id{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new po,this.secondaryLabel=new Gr}};p([X(WA(VA,Un,GA),{optional:!0})],ri.prototype,"fill",2),p([X(Cs)],ri.prototype,"fillOpacity",2),p([X(Un,{optional:!0})],ri.prototype,"stroke",2),p([X(xo,{optional:!0})],ri.prototype,"strokeWidth",2),p([X(Cs)],ri.prototype,"strokeOpacity",2),p([X(xo)],ri.prototype,"cornerRadius",2),p([X(FA)],ri.prototype,"textAlign",2),p([X(y9)],ri.prototype,"verticalAlign",2),p([X(xo)],ri.prototype,"gap",2),p([X(xo)],ri.prototype,"padding",2),p([X(ki)],ri.prototype,"label",2),p([X(ki)],ri.prototype,"secondaryLabel",2);var za=class extends id{constructor(){super(...arguments),this.label=new po}};p([X(Sl,{optional:!0})],za.prototype,"fill",2),p([X(Cs,{optional:!0})],za.prototype,"fillOpacity",2),p([X(Un,{optional:!0})],za.prototype,"stroke",2),p([X(xo,{optional:!0})],za.prototype,"strokeWidth",2),p([X(Cs,{optional:!0})],za.prototype,"strokeOpacity",2),p([X(ki)],za.prototype,"label",2);var Ls=class extends id{constructor(){super(...arguments),this.label=new po,this.secondaryLabel=new Gr}};p([X(Sl,{optional:!0})],Ls.prototype,"fill",2),p([X(Cs,{optional:!0})],Ls.prototype,"fillOpacity",2),p([X(Un,{optional:!0})],Ls.prototype,"stroke",2),p([X(xo,{optional:!0})],Ls.prototype,"strokeWidth",2),p([X(Cs,{optional:!0})],Ls.prototype,"strokeOpacity",2),p([X(ki)],Ls.prototype,"label",2),p([X(ki)],Ls.prototype,"secondaryLabel",2);var Xy=class extends p9{constructor(){super(...arguments),this.group=new za,this.tile=new Ls}};p([X(ki)],Xy.prototype,"group",2),p([X(ki)],Xy.prototype,"tile",2);var qi=class extends h9{constructor(){super(...arguments),this.highlightStyle=new Xy,this.tooltip=new d9,this.group=new Oi,this.tile=new ri,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};p([X(Sl,{optional:!0})],qi.prototype,"sizeName",2),p([X(Sl,{optional:!0})],qi.prototype,"labelKey",2),p([X(Sl,{optional:!0})],qi.prototype,"secondaryLabelKey",2),p([X(g9,{optional:!0})],qi.prototype,"itemStyler",2),p([X(ki)],qi.prototype,"highlightStyle",2),p([X(ki)],qi.prototype,"tooltip",2),p([X(ki)],qi.prototype,"group",2),p([X(ki)],qi.prototype,"tile",2),p([X(zA)],qi.prototype,"undocumentedGroupFills",2),p([X(zA)],qi.prototype,"undocumentedGroupStrokes",2);var{TextUtils:x9,TextWrapper:S9,createDatumId:KA,Rect:UA,Group:YA,BBox:Yn,Selection:Zy,Text:od,Transformable:b9,applyShapeStyle:v9,getShapeStyle:bl}=xl,D9=class extends xl.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}},jA=new od;function M9(t,e){const{fontStyle:i,fontWeight:o,fontSize:s,fontFamily:a}=e;jA.setProperties({text:t,fontStyle:i,fontWeight:o,fontSize:s,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:n,height:r}=jA.getBBox();return{width:n,height:r}}function Rs(t){return t.children.length>0?t.sumSize-t.sizeValue:t.sizeValue}var $A={left:0,center:.5,right:1},k9={top:0,middle:.5,bottom:1},Fot=class extends xl.Group{distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}},sd=class extends xl.HierarchySeries{constructor(){super(...arguments),this.NodeClass=D9,this.properties=new qi,this.rectGroup=this.contentGroup.appendChild(new YA),this.datumSelection=Zy.select(this.rectGroup,UA),this.labelSelection=Zy.select(this.labelGroup,YA),this.highlightSelection=Zy.select(this.rectGroup,UA)}groupTitleHeight(t,e){const{labelValue:i}=t,{label:o}=this.properties.group,s=3;if(i!=null){if(o.fontSize>e.width/s||o.fontSize>e.height/s)return;{const{height:a}=M9(i,o);return Math.max(a,o.fontSize)}}}getNodePadding(t,e){if(t.parent==null)return{top:0,right:0,bottom:0,left:0};if(t.children.length===0){const{padding:n}=this.properties.tile;return{top:n,right:n,bottom:n,left:n}}const{label:{spacing:i},padding:o}=this.properties.group,s=this.groupTitleHeight(t,e),a=s!=null?s+i:0;return{top:o+a,right:o,bottom:o,left:o}}sortChildren({children:t}){const e=Array.from(t,(o,s)=>s).filter(o=>Rs(t[o])>0).sort((o,s)=>Rs(t[s])-Rs(t[o]));return{sortedChildrenIndices:e,childAt:o=>{const s=e[o];return t[s]}}}squarify(t,e){const{datum:i,children:o}=t;if(e.width<=0||e.height<=0){t.bbox=void 0,t.padding=void 0,t.midPoint.x=NaN,t.midPoint.y=NaN;return}const s=i!=null?this.getNodePadding(t,e):{top:0,right:0,bottom:0,left:0};t.parent==null?(t.bbox=void 0,t.padding=void 0,t.midPoint.x=NaN,t.midPoint.y=NaN):(t.bbox=e,t.padding=s,t.midPoint.x=e.x+e.width/2,t.midPoint.y=e.y);const{sortedChildrenIndices:a,childAt:n}=this.sortChildren(t),r=a.every(D=>o[D].children.length===0),l=1,c=e.width-s.left-s.right,h=e.height-s.top-s.bottom;if(c<=0||h<=0)return;const d=a.length;let u=0,g=0,f=1/0,y=a.reduce((D,I)=>D+Rs(o[I]),0);const m=new Yn(e.x+s.left,e.y+s.top,c,h),x=m.clone();let v=0;for(;v<d;){const D=Rs(n(v)),I=Rs(n(g)),M=x.width<x.height;u+=D;const k=M?x.height:x.width,A=M?x.width:x.height,O=A*I/u;let N=k*u/y;const T=Math.max(O,N)/Math.min(O,N),L=Math.abs(l-T);if(L<f){f=L,v++;continue}u-=D,N=k*u/y;let C=M?x.x:x.y;for(let P=g;P<v;P++){const R=n(P),E=Rs(R),z=M?C:x.x,w=M?x.y:C,B=A*E/u,_=M?B:N,F=M?N:B,V=new Yn(z,w,_,F);this.applyGap(m,V,r),this.squarify(R,V),y-=E,C+=B}M?(x.y+=N,x.height-=N):(x.x+=N,x.width-=N),g=v,u=0,f=1/0}const S=x.width<x.height;let b=S?x.x:x.y;for(let D=g;D<d;D++){const I=n(D),M=S?b:x.x,k=S?x.y:b,A=Rs(I)/y,O=x.width*(S?A:1),N=x.height*(S?1:A),T=new Yn(M,k,O,N);this.applyGap(m,T,r),this.squarify(I,T),b+=S?O:N}}applyGap(t,e,i){const o=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,s=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=s(t),n=s(e);["top","right","bottom","left"].forEach(l=>{l9(a[l],n[l])||e.shrink(o,l)})}createNodeData(){}getGroupBaseStyle(t){const{properties:e}=this,{group:i}=e,o=t?e.highlightStyle.group:void 0;return bl({fill:o?.fill??i.fill,fillOpacity:o?.fillOpacity??i.fillOpacity,stroke:o?.stroke??i.stroke,strokeWidth:o?.strokeWidth??i.strokeWidth,strokeOpacity:o?.strokeOpacity??i.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults)}getGroupStyleOverrides(t,e,i,o,s){const{id:a,properties:n}=this,{undocumentedGroupFills:r,undocumentedGroupStrokes:l,itemStyler:c}=n,h=o.fill??r[Math.min(i??0,r.length)],d=o.stroke??l[Math.min(i??0,l.length)],u={};if(s||(u.fill=h,u.stroke=d),c!=null){const g=this.cachedDatumCallback(KA(t.join(":"),s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:e,depth:i,highlighted:s,fill:h,stroke:d,...o}));Object.assign(u,g)}return bl(u,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getTileBaseStyle(t){const{properties:e}=this,{tile:i}=e,o=t?e.highlightStyle.tile:void 0;return bl({fill:o?.fill??i.fill,fillOpacity:o?.fillOpacity??i.fillOpacity,stroke:o?.stroke??i.stroke,strokeWidth:o?.strokeWidth??i.strokeWidth,strokeOpacity:o?.strokeOpacity??i.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults)}getTileStyleOverrides(t,e,i,o,s,a){const{id:n,properties:r,colorScale:l}=this,{fills:c,strokes:h,itemStyler:d}=r,u=t[0],g=s.fill??c[u%c.length],f=s.stroke??h[u%h.length],y={};if(a||(y.fill=o!=null?l.convert(o):g,y.stroke=f),d!=null){const m=this.cachedDatumCallback(KA(t.join(":"),a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:n,datum:e,depth:i,highlighted:a,fill:g,stroke:f,...s}));Object.assign(y,m)}return bl(y,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateSelections(){let t=this.ctx.highlightManager?.getActiveHighlight();if(t!=null&&!this.properties.group.interactive&&t.children.length!==0&&(t=void 0),this.highlightSelection.update(t!=null?[t]:[],void 0,s=>this.getDatumId(s)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:e}=this.chart??{};if(!e)return;const i=Array.from(this.rootNode),o=s=>{s.append([new od({tag:0}),new od({tag:1})])};this.datumSelection.update(i,void 0,s=>this.getDatumId(s)),this.labelSelection.update(i,o,s=>this.getDatumId(s))}updateNodes(){const{rootNode:t,data:e}=this,{childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,highlightStyle:c,tile:h,group:d}=this.properties,{seriesRect:u}=this.chart??{};if(!u||!e)return;this.rootNode?.walk(M=>{const{datum:k,depth:A,children:O}=M,N=O.length===0,T=N?h.label:d.label;let L;if(k!=null&&A!=null&&a!=null){const P=k[a];L=this.getLabelText(T,{depth:A,datum:k,childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:P})}L===""&&(L=void 0);let C;if(N&&k!=null&&A!=null&&n!=null){const P=k[n];C=this.getLabelText(h.secondaryLabel,{depth:A,datum:k,childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:P})}C===""&&(C=void 0),M.labelValue=L,M.secondaryLabelValue=C});const{width:g,height:f}=u;this.squarify(t,new Yn(0,0,g,f)),this.rootNode?.walk(M=>{const{bbox:k,children:A,labelValue:O,secondaryLabelValue:N}=M;if(M.label=void 0,M.secondaryLabel=void 0,k!=null)if(A.length===0){const T={width:k.width,height:k.height,meta:null},L=Bg(O,this.properties.tile.label,N,this.properties.tile.secondaryLabel,{padding:h.padding},()=>T);if(L==null)return;const{height:C,label:P,secondaryLabel:R}=L,{textAlign:E,verticalAlign:z,padding:w}=h,B=$A[E]??.5,_=k.x+w+(k.width-2*w)*B,F=k9[z]??.5,V=k.y+w+C*.5+(k.height-2*w-C)*F;if(P!=null){const{fontStyle:G="normal",fontFamily:W,fontWeight:K="normal",color:$="black"}=this.properties.tile.label;M.label={text:P.text,fontSize:P.fontSize,lineHeight:P.lineHeight,fontStyle:G,fontFamily:W,fontWeight:K,color:$,textAlign:E,verticalAlign:"middle",x:_,y:V-(C-P.height)*.5}}if(R!=null){const{fontStyle:G="normal",fontFamily:W,fontWeight:K="normal",color:$="black"}=this.properties.tile.secondaryLabel;M.secondaryLabel={text:R.text,fontSize:R.fontSize,lineHeight:R.fontSize,fontStyle:G,fontFamily:W,fontWeight:K,color:$,textAlign:E,verticalAlign:"middle",x:_,y:V+(C-R.height)*.5}}}else{if(O==null)return;{const{padding:T,textAlign:L}=d,C=this.groupTitleHeight(M,k);if(C==null)return;const P=k.width-2*T,R=S9.wrapText(O,{maxWidth:k.width-2*T,font:d.label,textWrap:"never"}),E=$A[L]??.5,{fontStyle:z="normal",fontFamily:w,fontWeight:B="normal",color:_="black"}=this.properties.group.label;M.label={text:R,fontSize:d.label.fontSize,lineHeight:x9.getLineHeight(d.label.fontSize),fontStyle:z,fontFamily:w,fontWeight:B,color:_,textAlign:L,verticalAlign:"middle",x:k.x+T+P*E,y:k.y+T+C*.5}}}});const y={series:new Yn(0,0,g,f),axis:new Yn(0,0,g,f)},m=(M,k,A,O,N)=>{const{bbox:T}=M;if(T==null){k.visible=!1;return}const{datum:L,depth:C=-1,datumIndex:P,colorValue:R}=M,E=M.children.length===0,z=E?O:A,w=E?this.getTileStyleOverrides(P,L,C,R,z,N):this.getGroupStyleOverrides(P,L,C,z,N);k.crisp=!0,v9(k,z,w,y),k.cornerRadius=E?h.cornerRadius:d.cornerRadius,k.zIndex=[0,C,N?1:0];const B=M.parent?.children.every(V=>V.children.length===0),_=M.parent!=null?M.parent.bbox:void 0,F=M.parent!=null?M.parent.padding:void 0;B===!0&&_!=null&&F!=null?(k.clipBBox=T,k.x=_.x+F.left,k.y=_.y+F.top,k.width=_.width-(F.left+F.right),k.height=_.height-(F.top+F.bottom)):(k.clipBBox=void 0,k.x=T.x,k.y=T.y,k.width=T.width,k.height=T.height),k.visible=!0},x=this.getGroupBaseStyle(!1),v=this.getTileBaseStyle(!1);this.datumSelection.each((M,k)=>m(k,M,x,v,!1));const S=this.getGroupBaseStyle(!0),b=this.getTileBaseStyle(!0);this.highlightSelection.each((M,k)=>{m(k,M,S,b,!0)});const D=(M,k,A,O)=>{const N=M.children.length===0,T=A===0?M.label:M.secondaryLabel;if(T==null){k.visible=!1;return}let L;if(O){const{tile:C,group:P}=c;L=C.secondaryLabel.color,N?A===0&&(L=C.label.color):L=P.label.color}k.text=T.text,k.fontSize=T.fontSize,k.lineHeight=T.lineHeight,k.fontStyle=T.fontStyle,k.fontFamily=T.fontFamily,k.fontWeight=T.fontWeight,k.fill=L??T.color,k.textAlign=T.textAlign,k.textBaseline=T.verticalAlign,k.x=T.x,k.y=T.y,k.visible=!0,k.zIndex=1},I=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(od).forEach(M=>{const k=M.closestDatum();D(k,M,M.tag,k===I)})}pickNodesExactShape(t){const e=super.pickNodesExactShape(t);return e.sort((i,o)=>o.datumIndex.length-i.datumIndex.length),e}pickNodeClosestDatum(t){const e=this.pickNodesExactShape(t);return e.length!==0?{datum:e[0],distance:0}:this.pickNodeNearestDistantObject(t,this.datumSelection.nodes())}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,d=t.reduce((M,k)=>M?.children[k],this.rootNode);if(d==null)return;const{datum:u,depth:g,children:f}=d;if(u==null||g==null)return;const y=f.length===0,m=[],x=n!=null?u[n]:void 0;x!=null&&m.push({label:r,fallbackLabel:n,value:x});const v=l!=null?u[l]:void 0;v!=null&&m.push({label:c,fallbackLabel:l,value:v});let S;y?(S=this.getTileBaseStyle(!1),Object.assign(S,this.getTileStyleOverrides(t,u,g,v,S,!1))):(S=this.getGroupBaseStyle(!1),Object.assign(S,this.getGroupStyleOverrides(t,u,g,S,!1)));const b=S.fill,D=bl({shape:"square",fill:b,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults);xl.isGradientFill(D.fill)&&(D.fill={...D.fill,gradient:"linear",rotation:0,reverse:!1});const I=y?{marker:D}:void 0;return h.formatTooltip(this.properties,{title:o!=null?u[o]:void 0,symbol:I,data:m},{seriesId:e,datum:u,title:void 0,depth:g,labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,...S})}computeFocusBounds(t){return b9.toCanvas(this.contentGroup,t.getBBox())}};sd.className="TreemapSeries",sd.type="treemap";import{_ModuleSupport as O9}from"ag-charts-community";import{arrayOf as vl,boolean as T9,callback as A9,color as Fa,colorUnion as I9,constant as N9,fillGradientDefaults as C9,fillOptionsDef as ad,fillPatternDefaults as L9,positiveNumber as Ti,required as R9,string as Va,strokeOptionsDef as nd,union as Ga}from"ag-charts-core";var{commonSeriesOptionsDefs:w9,seriesLabelOptionsDefs:qy,tooltipOptionsDefs:P9}=O9,Dl={type:R9(N9("treemap")),labelKey:Va,secondaryLabelKey:Va,childrenKey:Va,sizeKey:Va,colorKey:Va,sizeName:Va,colorName:Va,fills:vl(I9),strokes:vl(Fa),colorRange:vl(Fa),itemStyler:A9,group:{gap:Ti,padding:Ti,cornerRadius:Ti,textAlign:Ga("left","center","right"),interactive:T9,label:{...qy,spacing:Ti},...ad,...nd},tile:{gap:Ti,padding:Ti,cornerRadius:Ti,textAlign:Ga("left","center","right"),verticalAlign:Ga("top","middle","bottom"),label:{...qy,spacing:Ti,lineHeight:Ti,minimumFontSize:Ti,wrapping:Ga("never","always","hyphenate","on-space"),overflowStrategy:Ga("ellipsis","hide")},secondaryLabel:{...qy,lineHeight:Ti,minimumFontSize:Ti,wrapping:Ga("never","always","hyphenate","on-space"),overflowStrategy:Ga("ellipsis","hide")},...ad,...nd},tooltip:P9,...w9,highlightStyle:{group:{label:{color:Fa},...ad,...nd},tile:{label:{color:Fa},secondaryLabel:{color:Fa},...ad,...nd}}};Dl.fillGradientDefaults=C9,Dl.fillPatternDefaults=L9,Dl.undocumentedGroupFills=vl(Fa),Dl.undocumentedGroupStrokes=vl(Fa);var{FONT_SIZE_RATIO:XA}=BA,E9={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:t=>new sd(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:BA.FILL_PATTERN_DEFAULTS,undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.5]},minimumFontSize:{$rem:[XA.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:[XA.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}}},_9={type:"series",name:"treemap",chartType:"hierarchy",enterprise:!0,options:Dl,create:t=>new sd(t)},Wot=RE.ModuleRegistry,B9=[UE,Cv,Qv,EH,f3,uD,mD,BD,qD,cM],z9=[YE,jE,$E,XE,Bj,R6,U6,GX,h8],F9=[s_,IW,F7],V9=[h_,kK,s7],G9=[y_,r9,_9],W9=[D_,A$],H9=[P_,h5,R5,OU,lY,BY],K9=[...B9,...z9,...F9,...V9,...G9,...W9,...H9,V4,G4,W4];import{_ModuleSupport as U9}from"ag-charts-community";import{_ModuleSupport as ZA}from"ag-charts-community";import"ag-charts-community";var qA={xMin:re,xMax:Te,yMin:Ve,yMax:Ge,span:ei},Y9=1e3,j9=5;function QA(t,e){return Array.from({length:t},(i,o)=>{const s=o*ei,a=e[s+re],n=e[s+Te];return(a+n)/2|0})}function $9(t,e,i){if(t.length<Y9)return;const[o,s]=Pr(i);let a=wr(t,j9),{indexData:n,valueData:r}=Er(t,e,e,o,s,a),l=QA(a,n);const c=[{maxRange:a,indexData:n,indices:l,indexes:qA}];for(;a>64;)({indexData:n,valueData:r,maxRange:a}=_r(n,r,a)),l=QA(a,n),c.push({maxRange:a,indexData:n,indices:l,indexes:qA});return c.reverse(),c}var{ChartAxisDirection:X9,ContinuousScale:Z9,OrdinalTimeScale:q9}=ZA,Q9=class extends ZA.BarSeries{aggregateData(t,e){if(e?.type!=="ungrouped")return;const i=this.axes[X9.X];if(i==null||!(Z9.is(i.scale)||q9.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"yValue-raw",e),{index:a}=t.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[a];return $9(o,s,n)}},{BarSeriesModule:J9}=U9,tZ={...J9,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new Q9(t)};import{_ModuleSupport as eZ}from"ag-charts-community";import{_ModuleSupport as JA}from"ag-charts-community";import"ag-charts-community";var iZ=1e3,t0=10;function e0(t,e,i,o,s,a){const n=t[a];if(n==null)return!1;const r=ph(n,e,i),l=dh(r,s);return a===o[l+re]||a===o[l+Te]||a===o[l+Ve]||a===o[l+Ge]}function oZ(t,e,i){if(t.length<iZ)return;const[o,s]=Pr(i);let a=wr(t,t0);const{indexData:n,valueData:r}=Er(t,e,e,o,s,a);let l=[];for(let h=0;h<t.length;h+=1)e0(t,o,s,n,a,h)&&l.push(h);const c=[{maxRange:a,indices:l}];for(;l.length>t0&&a>64;)({maxRange:a}=_r(n,r,a,{inPlace:!0})),l=l.filter(e0.bind(null,t,o,s,n,a)),c.push({maxRange:a,indices:l});return c.reverse(),c}var{ChartAxisDirection:sZ,ContinuousScale:aZ,OrdinalTimeScale:nZ}=JA,rZ=class extends JA.LineSeries{aggregateData(t,e){const i=this.axes[sZ.X];if(i==null||!(aZ.is(i.scale)||nZ.is(i.scale)))return;const o=t.resolveColumnById(this,"xValue",e),s=t.resolveColumnById(this,"yValueRaw",e),a=t.getDomain(this,"xValue","value",e);return oZ(o,s,a)}},{LineSeriesModule:lZ}=eZ,cZ={...lZ,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new rZ(t)},hZ=`.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-dialog{display:flex;flex-direction:column;font-size:var(--ag-charts-chrome-font-size-large)}.ag-charts-dialog__tabs{display:flex;flex-direction:column}.ag-charts-dialog__header{border-bottom:1px solid var(--ag-charts-border-color);display:flex}.ag-charts-dialog__tab-list{display:flex;gap:calc(var(--ag-charts-spacing) * 2)}.ag-charts-dialog__drag-handle{align-items:center;color:inherit;cursor:grab;display:flex;padding:1px 6px;text-align:center}.ag-charts-dialog__drag-handle--dragging{cursor:grabbing}.ag-charts-dialog__tab-button{background:none;border:0;border-bottom:2px solid transparent;border-radius:0;color:var(--ag-charts-chrome-subtle-text-color);margin-bottom:-1px;padding:var(--input-padding) calc(var(--input-padding) / 2)}.ag-charts-dialog__tab-button:hover{background:none}.ag-charts-dialog__tab-button--active{border-color:var(--ag-charts-accent-color);color:inherit}.ag-charts-dialog__drag-handle+.ag-charts-dialog__tab-button{margin-left:calc(var(--ag-charts-spacing) * -2)}.ag-charts-button.ag-charts-dialog__close-button{background:none;border:0;margin-left:auto;padding:1px 6px}.ag-charts-dialog__close-button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-dialog__tab-panel{display:none;flex-direction:column;gap:calc(var(--ag-charts-spacing) * 4);margin:0 calc(var(--ag-charts-spacing) * 4);padding:calc(var(--ag-charts-spacing) * 4) 0}.ag-charts-dialog__tab-panel--active{display:flex}.ag-charts-dialog__input-group-line{display:flex;gap:16px 18px;flex-wrap:wrap}.ag-charts-dialog__input-group{align-items:center;display:flex;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-dialog__input-group-label{color:var(--ag-charts-chrome-subtle-text-color);margin-right:5px}.ag-charts-dialog__input-group-label[for]{cursor:pointer}.ag-charts-dialog__button{border-radius:0;margin-right:-1px}.ag-charts-dialog__button.ag-charts-dialog__button--active{background:var(--ag-charts-button-focus-background-color);border-color:var(--ag-charts-input-focus-border-color);color:var(--ag-charts-input-focus-text-color);z-index:var(--input-layer-active)}.ag-charts-dialog__button:first-child,.ag-charts-dialog__input-group-label+.ag-charts-dialog__button{border-bottom-left-radius:var(--ag-charts-input-border-radius);border-top-left-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__button:last-child{border-bottom-right-radius:var(--ag-charts-input-border-radius);border-top-right-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__color-picker-button{--color: #000;background:var(--color);border:none;color:transparent;height:26px;width:26px}.ag-charts-dialog__color-picker-button:hover{background:var(--color)}.ag-charts-dialog__color-picker-button--multi-color,.ag-charts-dialog__color-picker-button--multi-color:hover{background:linear-gradient(135deg,red 0%,#ff0 calc(100% * 1 / 6),#0f0 calc(100% * 2 / 6),#0ff 50%,#00f calc(100% * 4 / 6),#f0f calc(100% * 5 / 6),red 100%)}.ag-charts-color-picker{width:190px;padding:8px;--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>');--multi-color: linear-gradient( 135deg, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-color-picker__content{display:flex;flex-direction:column}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:calc(var(--ag-charts-border-radius) * 1.5);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-row{display:flex;gap:8px;align-items:center;margin-bottom:4px;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button{width:36px;margin-left:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);border:0;background:var(--multi-color);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button--hidden{display:none}.ag-charts-color-picker__multi-color-button--active{box-shadow:inset 0 0 0 1px #0003;outline-offset:1px;outline:2px solid #2196f3}.ag-charts-color-picker__hue-input{flex:1 0 0}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:var(--ag-charts-border-radius);overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-accent-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:calc(var(--ag-charts-border-radius) / 2);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-label--multi-color{background:var(--multi-color)}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__line-stroke-width-menu,.ag-charts-annotations__line-style-type-menu,.ag-charts-annotations__text-size-menu{border-top-left-radius:0;border-top-right-radius:0;.ag-charts-menu__row:first-child{border-radius:0}}.ag-charts-annotations__text-size-menu{--item-padding: 4px 8px;min-width:34px;text-align:center}.ag-charts-annotations__line-stroke-width-menu{--item-padding: 6px;column-gap:6px}.ag-charts-annotations__line-style-type-menu{--item-padding: 6px;column-gap:0}.ag-charts-annotations__stroke-width-button:before{background:var(--ag-charts-foreground-color);content:"";margin-right:var(--toolbar-button-padding);height:min(var(--stroke-width),20px);width:12px}.ag-charts-annotations__stroke-width-button[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-annotations__color-picker-button{--emblem: var(--color)}.ag-charts-annotations__color-picker-button--multi-color{--emblem: linear-gradient( to right, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-annotations__color-picker-button:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--emblem)}.ag-charts-annotations__color-picker-button[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-annotations__toolbar-menu{min-width:200px}.ag-charts-annotations__axis-button--hidden{display:none}.ag-charts-annotations__axis-button{background-color:var(--ag-charts-crosshair-label-background-color);border-radius:calc(var(--ag-charts-border-radius) / 2);border:none;box-sizing:border-box;color:var(--ag-charts-crosshair-label-text-color);cursor:pointer;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);left:0;line-height:16px;overflow:hidden;padding:0;position:absolute;top:0;user-select:none;white-space:nowrap;z-index:var(--ag-charts-layer-annotations)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-background-color)}.ag-charts-dialog--annotation-settings{min-height:233px;width:289px}.ag-charts-dialog--annotation-settings .ag-charts-textarea{height:calc(10px * 2 + var(--textarea-line-height) * 1em * 3 + 2px);overflow-y:auto;resize:vertical}.ag-charts-context-menu{background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);box-shadow:var(--ag-charts-shadow);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:calc(var(--ag-charts-chrome-font-size) * (13 / 12));font-weight:var(--ag-charts-chrome-font-weight);transition:transform .1s ease;white-space:nowrap;z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-context-menu__cover{position:fixed;left:0;top:0}.ag-charts-context-menu__menu{display:flex;flex-direction:column;padding:.5em 0}.ag-charts-context-menu__menu:focus{outline:none}.ag-charts-context-menu__item{background:none;border:none;box-sizing:border-box;color:inherit;font:inherit;padding:.5em 1em;text-align:left;-webkit-appearance:none;-moz-appearance:none}.ag-charts-context-menu__item:focus,.ag-charts-context-menu__item:active{background:var(--ag-charts-focus-color)}.ag-charts-context-menu__item[data-focus-visible-override=true]:focus,.ag-charts-context-menu__item:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-context-menu__item[data-focus-visible-override=false]{outline:inherit;box-shadow:inherit;z-index:inherit}.ag-charts-context-menu__item[aria-disabled=true]{border:none;opacity:.5;text-align:left}.ag-charts-context-menu__item[aria-disabled=true]:focus{background:inherit;cursor:inherit}.ag-charts-context-menu__divider{margin:5px 0;background:#babfc7;height:1px}.ag-charts-context-menu__divider.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-font-size);font-weight:var(--ag-charts-font-weight);overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-charts-crosshair-label-content{padding:0 8px;border-radius:calc(var(--ag-charts-border-radius) / 2);line-height:calc(var(--ag-charts-font-size) + 8px);background-color:var(--ag-charts-crosshair-label-background-color);color:var(--ag-charts-crosshair-label-text-color)}.ag-charts-crosshair-label--hidden{visibility:hidden!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{--placeholder-text-color: var(--ag-charts-input-placeholder-text-color);display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;outline:none;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--placeholder-text-color);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}.ag-charts-chart-toolbar__menu{min-width:200px}.ag-charts-range-buttons .ag-charts-toolbar__button{padding:var(--toolbar-button-padding) calc(var(--toolbar-button-padding) * 1.5)}.ag-charts-zoom-buttons{align-items:center;display:flex;height:44px;justify-content:center;overflow:hidden;padding-bottom:10px;pointer-events:none;width:100%;.ag-charts-toolbar{--toolbar-size: 24px;--toolbar-button-padding: 1px;display:flex;font-size:var(--ag-charts-chrome-font-size);height:var(--toolbar-size);justify-content:center;opacity:1;pointer-events:auto;transition:opacity .2s ease-in-out,transform .4s ease-in-out;.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__label{padding-left:var(--ag-charts-spacing);padding-right:var(--ag-charts-spacing)}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{padding-left:0}.ag-charts-toolbar__button--gap{margin-left:var(--toolbar-gap)}.ag-charts-zoom-buttons__toolbar--hidden{opacity:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out}}}.ag-charts-shared-toolbar{gap:var(--toolbar-gap);.ag-charts-toolbar__button{border-radius:var(--ag-charts-border-radius);margin:0}}
`;Ha.ModuleRegistry.registerMany(K9);function i0(){Ha.moduleRegistry.register(t2,p2,$2,ow,uw,tZ,d1,wB,Lz,AW,PH,g3,_F,bw,Ow,Fw,Ww,n1,MK,cZ,c5,L5,kU,rY,_Y,B1,dP,NE,kF,_j,u2,L6,K6,VX,c8,F2,o7,U2,FG,KV,q1,T$,z7,J1,n9,DP,E9,L4,fE),Ha.enterpriseModule.isEnterprise=!0,Ha.enterpriseModule.styles=hZ,Ha.enterpriseModule.licenseManager=t=>new Wa(t.container?.ownerDocument??(typeof document>"u"?void 0:document)),Ha.enterpriseModule.injectWatermark=LE}export*from"ag-charts-community";i0();var pZ={setLicenseKey(t){Wa.setLicenseKey(t)}};function o0(){i0(),g0()}var dZ={VERSION:h0,_Scene:p0,_Theme:d0,_Util:u0,create:Tl.create.bind(Tl),createSparkline:Tl.__createSparkline.bind(Tl),setup:o0,setGridContext:Wa.setGridContext.bind(Wa),setLicenseKey:Wa.setLicenseKey.bind(Wa),isEnterprise:!0};export{dZ as AgChartsEnterpriseModule,pZ as LicenseManager,o0 as setupEnterpriseModules};
