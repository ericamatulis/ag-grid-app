"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(t,e)=>{for(var i in e)__defProp(t,i,{get:e[i],enumerable:!0})},__copyProps=(t,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(t,s)&&s!==i&&__defProp(t,s,{get:()=>e[s],enumerable:!(o=__getOwnPropDesc(e,s))||o.enumerable});return t},__reExport=(t,e,i)=>(__copyProps(t,e,"default"),i&&__copyProps(i,e,"default")),__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,i,o)=>{for(var s=o>1?void 0:o?__getOwnPropDesc(e,i):e,a=t.length-1,r;a>=0;a--)(r=t[a])&&(s=(o?r(e,i,s):r(s))||s);return o&&s&&__defProp(e,i,s),s},main_exports={};__export(main_exports,{AgChartsEnterpriseModule:()=>AgChartsEnterpriseModule,LicenseManager:()=>LicenseManager2,setupEnterpriseModules:()=>setupEnterpriseModules2}),module.exports=__toCommonJS(main_exports);var import_ag_charts_community303=require("ag-charts-community"),MD5=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],o=t[1],s=t[2],a=t[3];i=this.ff(i,o,s,a,e[0],7,-680876936),a=this.ff(a,i,o,s,e[1],12,-389564586),s=this.ff(s,a,i,o,e[2],17,606105819),o=this.ff(o,s,a,i,e[3],22,-1044525330),i=this.ff(i,o,s,a,e[4],7,-176418897),a=this.ff(a,i,o,s,e[5],12,1200080426),s=this.ff(s,a,i,o,e[6],17,-1473231341),o=this.ff(o,s,a,i,e[7],22,-45705983),i=this.ff(i,o,s,a,e[8],7,1770035416),a=this.ff(a,i,o,s,e[9],12,-1958414417),s=this.ff(s,a,i,o,e[10],17,-42063),o=this.ff(o,s,a,i,e[11],22,-1990404162),i=this.ff(i,o,s,a,e[12],7,1804603682),a=this.ff(a,i,o,s,e[13],12,-40341101),s=this.ff(s,a,i,o,e[14],17,-1502002290),o=this.ff(o,s,a,i,e[15],22,1236535329),i=this.gg(i,o,s,a,e[1],5,-165796510),a=this.gg(a,i,o,s,e[6],9,-1069501632),s=this.gg(s,a,i,o,e[11],14,643717713),o=this.gg(o,s,a,i,e[0],20,-373897302),i=this.gg(i,o,s,a,e[5],5,-701558691),a=this.gg(a,i,o,s,e[10],9,38016083),s=this.gg(s,a,i,o,e[15],14,-660478335),o=this.gg(o,s,a,i,e[4],20,-405537848),i=this.gg(i,o,s,a,e[9],5,568446438),a=this.gg(a,i,o,s,e[14],9,-1019803690),s=this.gg(s,a,i,o,e[3],14,-187363961),o=this.gg(o,s,a,i,e[8],20,1163531501),i=this.gg(i,o,s,a,e[13],5,-1444681467),a=this.gg(a,i,o,s,e[2],9,-51403784),s=this.gg(s,a,i,o,e[7],14,1735328473),o=this.gg(o,s,a,i,e[12],20,-1926607734),i=this.hh(i,o,s,a,e[5],4,-378558),a=this.hh(a,i,o,s,e[8],11,-2022574463),s=this.hh(s,a,i,o,e[11],16,1839030562),o=this.hh(o,s,a,i,e[14],23,-35309556),i=this.hh(i,o,s,a,e[1],4,-1530992060),a=this.hh(a,i,o,s,e[4],11,1272893353),s=this.hh(s,a,i,o,e[7],16,-155497632),o=this.hh(o,s,a,i,e[10],23,-1094730640),i=this.hh(i,o,s,a,e[13],4,681279174),a=this.hh(a,i,o,s,e[0],11,-358537222),s=this.hh(s,a,i,o,e[3],16,-722521979),o=this.hh(o,s,a,i,e[6],23,76029189),i=this.hh(i,o,s,a,e[9],4,-640364487),a=this.hh(a,i,o,s,e[12],11,-421815835),s=this.hh(s,a,i,o,e[15],16,530742520),o=this.hh(o,s,a,i,e[2],23,-995338651),i=this.ii(i,o,s,a,e[0],6,-198630844),a=this.ii(a,i,o,s,e[7],10,1126891415),s=this.ii(s,a,i,o,e[14],15,-1416354905),o=this.ii(o,s,a,i,e[5],21,-57434055),i=this.ii(i,o,s,a,e[12],6,1700485571),a=this.ii(a,i,o,s,e[3],10,-1894986606),s=this.ii(s,a,i,o,e[10],15,-1051523),o=this.ii(o,s,a,i,e[1],21,-2054922799),i=this.ii(i,o,s,a,e[8],6,1873313359),a=this.ii(a,i,o,s,e[15],10,-30611744),s=this.ii(s,a,i,o,e[6],15,-1560198380),o=this.ii(o,s,a,i,e[13],21,1309151649),i=this.ii(i,o,s,a,e[4],6,-145523070),a=this.ii(a,i,o,s,e[11],10,-1120210379),s=this.ii(s,a,i,o,e[2],15,718787259),o=this.ii(o,s,a,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(o,t[1]),t[2]=this.add32(s,t[2]),t[3]=this.add32(a,t[3])}cmn(t,e,i,o,s,a){return e=this.add32(this.add32(e,t),this.add32(o,a)),this.add32(e<<s|e>>>32-s,i)}ff(t,e,i,o,s,a,r){return this.cmn(e&i|~e&o,t,e,s,a,r)}gg(t,e,i,o,s,a,r){return this.cmn(e&o|i&~o,t,e,s,a,r)}hh(t,e,i,o,s,a,r){return this.cmn(e^i^o,t,e,s,a,r)}ii(t,e,i,o,s,a,r){return this.cmn(i^(e|~o),t,e,s,a,r)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let o;for(o=64;o<=t.length;o+=64)this.md5cycle(i,this.md5blk(t.substring(o-64,o)));t=t.substring(o-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<t.length;o++)s[o>>2]|=t.charCodeAt(o)<<(o%4<<3);if(s[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(i,s),o=0;o<16;o++)s[o]=0;return s[14]=e*8,this.md5cycle(i,s),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",o=0;for(;o<4;o++)i+=e[t>>o*8+4&15]+e[t>>o*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function missingOrEmpty(t){return t==null||t.length===0}var LICENSE_TYPES={"01":"GRID","02":"CHARTS","0102":"BOTH"},LICENSING_HELP_URL="https://www.ag-grid.com/charts/licensing/",_LicenseManager=class st{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new MD5,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(st.licenseKey,st.gridContext),i=`AG ${e.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`;let o="";if(e.suppliedLicenseType==="BOTH"?o="AG Grid and AG Charts Enterprise":e.suppliedLicenseType==="GRID"?o="AG Grid Enterprise":e.suppliedLicenseType!==void 0&&(o="AG Charts Enterprise"),e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const s=st.getChartsReleaseDate(),a=st.formatDate(s);this.outputExpiredKey(e.expiry,a,o)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,o):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,o)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(st.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const o=i.length-32,s=i.substring(o),a=i.substring(0,o),[r,n,l]=st.extractBracketedInformation(i);return{md5:s,license:a,version:r,isTrial:n,type:l}}getLicenseDetails(e,i=!1){const o="CHARTS";if(missingOrEmpty(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:o};const s=st.getChartsReleaseDate(),{md5:a,license:r,version:n,isTrial:l,type:c}=st.extractLicenseComponents(e);let h=a===this.md5.md5(r)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,u,p,d=null,g=!1,f;function y(){u=d<new Date,p=void 0}if(h&&(d=st.extractExpiry(r),h=!isNaN(d.getTime()),h))switch(p=s>d,n){case"legacy":case"2":{h=!1;break}case"3":missingOrEmpty(c)?h=!1:(f=c,c!==LICENSE_TYPES["02"]&&c!==LICENSE_TYPES["0102"]?(h=!1,g=!0):l&&y())}return h?{licenseKey:e,valid:h,expiry:st.formatDate(d),expired:p,version:n,isTrial:l,trialExpired:u,invalidLicenseTypeForCombo:i?f!=="BOTH":void 0,incorrectLicenseType:g,currentLicenseType:o,suppliedLicenseType:f}:{licenseKey:e,valid:h,incorrectLicenseType:g,currentLicenseType:o,suppliedLicenseType:f}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!missingOrEmpty(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage??""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView??window;if(!e)return"localhost";const i=e.location,{hostname:o=""}=i;return o}isForceWatermark(){if(!this.document)return!1;const e=this.document?.defaultView??typeof window<"u"?window:void 0;if(!e)return!1;const{pathname:i}=e.location;return i?i.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){const e=this.getHostname();return/^((?:[\w-]+\.)?ag-grid\.com)$/.exec(e)!==null}isLocalhost(){const e=this.getHostname();return/^(?:127\.0\.0\.1|localhost)$/.exec(e)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=e.getDate(),s=e.getMonth(),a=e.getFullYear();return o+" "+i[s]+" "+a}static getChartsReleaseDate(){return new Date(parseInt(st.decode(st.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o="",s,a,r,n,l,c,h,u=0;const p=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<p.length;)n=i.indexOf(p.charAt(u++)),l=i.indexOf(p.charAt(u++)),c=i.indexOf(p.charAt(u++)),h=i.indexOf(p.charAt(u++)),s=n<<2|l>>4,a=(l&15)<<4|c>>2,r=(c&3)<<6|h,o=o+String.fromCharCode(s),c!=64&&(o=o+String.fromCharCode(a)),h!=64&&(o=o+String.fromCharCode(r));return o=st.utf8_decode(o),o}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let o=0;o<e.length;o++){const s=e.charCodeAt(o);s<128?i+=String.fromCharCode(s):s>127&&s<2048?(i+=String.fromCharCode(s>>6|192),i+=String.fromCharCode(s&63|128)):(i+=String.fromCharCode(s>>12|224),i+=String.fromCharCode(s>>6&63|128),i+=String.fromCharCode(s&63|128))}return i}static setGridContext(e=!1){st.gridContext=e}static setLicenseKey(e){st.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(n=>n.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const o=i.filter(n=>n==="TRIAL").length===1,s=i.filter(n=>n.startsWith("v"))[0],a=s?s.replace("v",""):"legacy",r=LICENSE_TYPES[i.filter(n=>LICENSE_TYPES[n])[0]];return[a,o,r]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",o=""){console.error(e.padEnd(this.totalMessageLength-o.length,i)+o)}outputInvalidLicenseKey(e,i,o){st.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${o} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${LICENSING_HELP_URL}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${LICENSING_HELP_URL}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,o){st.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${o} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){st.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,o){st.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${o} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${o} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};_LicenseManager.RELEASE_INFORMATION="MTc0MjgzMzc1OTQxMA==",_LicenseManager.gridContext=!1;var LicenseManager=_LicenseManager,import_ag_charts_community302=require("ag-charts-community"),import_ag_charts_community5=require("ag-charts-community"),import_ag_charts_core3=require("ag-charts-core");function loopSymmetrically(t,e,i){const o=(a,r,n,l)=>{let c=t[0];for(let h=a;n>0?h<=r:h>r;h+=n){const u=t[h];if(l(c,u))return!0;c=u}return!1},s=Math.floor(t.length/2);return o(e,s,e,i)?!0:o(t.length-e,s,-e,i)}var import_ag_charts_community=require("ag-charts-community"),{OR,POSITIVE_NUMBER,NAN,AxisInterval,TempValidate}=import_ag_charts_community._ModuleSupport,AngleAxisInterval=class extends AxisInterval{};__decorateClass([TempValidate(OR(POSITIVE_NUMBER,NAN))],AngleAxisInterval.prototype,"minSpacing",2);var import_ag_charts_community4=require("ag-charts-community"),import_ag_charts_core2=require("ag-charts-core"),import_ag_charts_community3=require("ag-charts-community"),import_ag_charts_core=require("ag-charts-core"),import_ag_charts_community2=require("ag-charts-community"),{BaseProperties,ChartAxisDirection,ARRAY,BOOLEAN,COLOR_STRING,FONT_STYLE,FONT_WEIGHT,LINE_DASH,NUMBER,OBJECT,POSITIVE_NUMBER:POSITIVE_NUMBER2,RATIO,STRING,UNION,AND,COLOR_STRING_ARRAY,TempValidate:TempValidate2,MATCHING_CROSSLINE_TYPE,createId,Group}=import_ag_charts_community2._ModuleSupport,PolarCrossLineLabel=class extends BaseProperties{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};__decorateClass([TempValidate2(BOOLEAN,{optional:!0})],PolarCrossLineLabel.prototype,"enabled",2),__decorateClass([TempValidate2(STRING,{optional:!0})],PolarCrossLineLabel.prototype,"text",2),__decorateClass([TempValidate2(FONT_STYLE,{optional:!0})],PolarCrossLineLabel.prototype,"fontStyle",2),__decorateClass([TempValidate2(FONT_WEIGHT,{optional:!0})],PolarCrossLineLabel.prototype,"fontWeight",2),__decorateClass([TempValidate2(POSITIVE_NUMBER2)],PolarCrossLineLabel.prototype,"fontSize",2),__decorateClass([TempValidate2(STRING)],PolarCrossLineLabel.prototype,"fontFamily",2),__decorateClass([TempValidate2(NUMBER)],PolarCrossLineLabel.prototype,"padding",2),__decorateClass([TempValidate2(COLOR_STRING,{optional:!0})],PolarCrossLineLabel.prototype,"color",2),__decorateClass([TempValidate2(BOOLEAN,{optional:!0})],PolarCrossLineLabel.prototype,"parallel",2);var PolarCrossLine=class extends BaseProperties{constructor(){super(...arguments),this.id=createId(this),this.defaultColorRange=[],this.shape="polygon",this.label=new PolarCrossLineLabel,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=ChartAxisDirection.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new Group({name:this.id}),this.rangeGroup=new Group({name:this.id}),this.labelGroup=new Group({name:this.id}),this._isRange=void 0}assignCrossLineGroup(t,e){t!==this._isRange&&(t?this.rangeGroup.appendChild(e):this.lineGroup.appendChild(e)),this._isRange=t}setSectorNodeProps(t){t.fill=this.fill,t.fillOpacity=this.fillOpacity??1,t.stroke=this.stroke,t.strokeOpacity=this.strokeOpacity??1,t.strokeWidth=this.strokeWidth??1,t.lineDash=this.lineDash}setLabelNodeProps(t,e,i,o,s){const{label:a}=this;t.x=e,t.y=i,t.text=a.text,t.textAlign="center",t.textBaseline=o,t.rotation=s,t.rotationCenterX=e,t.rotationCenterY=i,t.fill=a.color,t.fontFamily=a.fontFamily,t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.visible=!0}};__decorateClass([TempValidate2(BOOLEAN,{optional:!0})],PolarCrossLine.prototype,"enabled",2),__decorateClass([TempValidate2(UNION(["range","line"],"a crossLine type"))],PolarCrossLine.prototype,"type",2),__decorateClass([TempValidate2(AND(MATCHING_CROSSLINE_TYPE("range"),ARRAY.restrict({length:2})),{optional:!0})],PolarCrossLine.prototype,"range",2),__decorateClass([TempValidate2(MATCHING_CROSSLINE_TYPE("value"),{optional:!0})],PolarCrossLine.prototype,"value",2),__decorateClass([TempValidate2(COLOR_STRING_ARRAY)],PolarCrossLine.prototype,"defaultColorRange",2),__decorateClass([TempValidate2(COLOR_STRING,{optional:!0})],PolarCrossLine.prototype,"fill",2),__decorateClass([TempValidate2(RATIO,{optional:!0})],PolarCrossLine.prototype,"fillOpacity",2),__decorateClass([TempValidate2(COLOR_STRING,{optional:!0})],PolarCrossLine.prototype,"stroke",2),__decorateClass([TempValidate2(NUMBER,{optional:!0})],PolarCrossLine.prototype,"strokeWidth",2),__decorateClass([TempValidate2(RATIO,{optional:!0})],PolarCrossLine.prototype,"strokeOpacity",2),__decorateClass([TempValidate2(LINE_DASH,{optional:!0})],PolarCrossLine.prototype,"lineDash",2),__decorateClass([TempValidate2(UNION(["polygon","circle"],"a shape"))],PolarCrossLine.prototype,"shape",2),__decorateClass([TempValidate2(OBJECT)],PolarCrossLine.prototype,"label",2);var{ChartAxisDirection:ChartAxisDirection2,getCrossLineValue,validateCrossLineValue,normalizeAngle360,Group:Group2,Path,Sector,RotatableText,ContinuousScale}=import_ag_charts_community3._ModuleSupport,AngleCrossLine=class extends PolarCrossLine{constructor(){super(),this.direction=ChartAxisDirection2.X,this.polygonNode=new Path,this.sectorNode=new Sector,this.lineNode=new Path,this.crossLineRange=new Group2,this.labelNode=new RotatableText,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!ContinuousScale.is(this.scale))return!0;const[t,e]=this.scale.domain,i=getCrossLineValue(this);if((0,import_ag_charts_core.isArray)(i)){const[o,s]=i;return o>=t&&o<=e&&s>=o&&s<=e}else return i>=t&&i<=e}update(t){const{scale:e}=this;if(!e||!this.isValid()||!validateCrossLineValue(getCrossLineValue(this),e)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updateLineNode(t),this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t)}updateLineNode(t){const{scale:e,type:i,value:o,lineNode:s}=this;if(!t||i!=="line"||!e){s.visible=!1;return}const a=e.convert(o);if(isNaN(a)){s.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:n}=this;s.visible=!0,s.stroke=this.stroke,s.strokeOpacity=this.strokeOpacity??1,s.strokeWidth=this.strokeWidth??1,s.fill=void 0,s.lineDash=this.lineDash;const l=n*Math.cos(a),c=n*Math.sin(a),h=r*Math.cos(a),u=r*Math.sin(a);s.path.clear(!0),s.path.moveTo(h,u),s.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(t){const{polygonNode:e,range:i,scale:o,shape:s,type:a,ticks:r}=this;if(!t||a!=="range"||s!=="polygon"||!o||!i){e.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:l}=this,c=r.indexOf(i[0]),h=r.indexOf(i[1]),p=(c<=h?r.slice(c,h+1):r.slice(c).concat(r.slice(0,h+1))).map(g=>o.convert(g));e.visible=!0,this.setSectorNodeProps(e);const{path:d}=e;d.clear(!0),p.forEach((g,f)=>{const y=l*Math.cos(g),m=l*Math.sin(g);f===0?d.moveTo(y,m):d.lineTo(y,m)}),n===0?d.lineTo(0,0):p.slice().reverse().forEach(g=>{const f=n*Math.cos(g),y=n*Math.sin(g);d.lineTo(f,y)}),e.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(t){const{sectorNode:e,range:i,scale:o,shape:s,type:a}=this;if(!t||a!=="range"||s!=="circle"||!o||!i){e.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:n}=this,l=i.map(u=>o.convert(u)),c=o.step??0,h=o instanceof import_ag_charts_community3._ModuleSupport.BandScale?c/2:0;e.visible=!0,this.setSectorNodeProps(e),e.centerX=0,e.centerY=0,e.innerRadius=r,e.outerRadius=n,e.startAngle=l[0]-h,e.endAngle=l[1]+h,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(t){const{label:e,labelNode:i,range:o,scale:s,type:a,ticks:r}=this;if(!t||e.enabled===!1||!e.text||!s||a==="range"&&!o){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:n,axisOuterRadius:l}=this;let c,h,u,p;if(a==="line"){const d=normalizeAngle360(s.convert(this.value)),g=1.5*Math.PI,f=(0,import_ag_charts_core.isNumberEqual)(d,g)||d>g||d<Math.PI/2,y=(n+l)/2*Math.cos(d),m=(n+l)/2*Math.sin(d);c=y+e.padding*Math.cos(d+Math.PI/2),h=m+e.padding*Math.sin(d+Math.PI/2),p=f?"top":"bottom",u=f?d:d-Math.PI}else{const[d,g]=o.map(b=>normalizeAngle360(s.convert(b)));let f=(d+g)/2;d>g&&(f-=Math.PI),f=normalizeAngle360(f);const y=((0,import_ag_charts_core.isNumberEqual)(f,0)||f>0)&&f<Math.PI;let m;this.shape==="circle"||r.length<3?m=l-e.padding:m=l*Math.cos(Math.PI/r.length)-e.padding,c=m*Math.cos(f),h=m*Math.sin(f),p=y?"bottom":"top",u=y?f-Math.PI/2:f+Math.PI/2}this.setLabelNodeProps(i,c,h,p,u)}};AngleCrossLine.className="AngleCrossLine";var{ChartAxisDirection:ChartAxisDirection3,NUMBER:NUMBER2,UNION:UNION2,ProxyOnWrite,TextWrapper,TextUtils,TempValidate:TempValidate3,toRadians,normalizeAngle360:normalizeAngle3602,normalizeAngle360Inclusive,Path:Path2,RotatableText:RotatableText2,Transformable,BBox}=import_ag_charts_community4._ModuleSupport,AngleAxisLabel=class extends import_ag_charts_community4._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};__decorateClass([TempValidate3(UNION2(["fixed","parallel","perpendicular"],"a label orientation"))],AngleAxisLabel.prototype,"orientation",2);var AngleAxis=class extends import_ag_charts_community4._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new Path2),this.includeInvisibleDomains=!0}get direction(){return ChartAxisDirection3.X}createLabel(){return new AngleAxisLabel}calculateTickLayout(t){const{nice:e,scale:i}=this,o={nice:e,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},s=e?i.niceDomain(o,t):t,a=this.generateAngleTicks(s);this.tickData=a;const r=a.map(l=>l.value),n=r.reduce((l,c)=>Math.max(typeof c=="number"?(0,import_ag_charts_core2.countFractionDigits)(c):0,l),0);return{niceDomain:s,primaryTickCount:void 0,tickDomain:s,ticks:r,fractionDigits:n,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine()}normalizedAngles(){const t=normalizeAngle3602(-Math.PI/2+toRadians(this.startAngle)),e=this.endAngle!=null?normalizeAngle360Inclusive(toRadians(this.endAngle)-toRadians(this.startAngle)):2*Math.PI,i=t+e;return[t,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const t=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?t:[]),this.tickLineGroupSelection.update(this.tick.enabled?t:[]),this.tickLabelGroupSelection.update(this.label.enabled?t:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){const{translation:t,axisGroup:e,gridGroup:i,crossLineRangeGroup:o,crossLineLineGroup:s,crossLineLabelGroup:a}=this,r=Math.floor(t.x),n=Math.floor(t.y);e.translationX=r,e.translationY=n,i.translationX=r,i.translationY=n,o.translationX=r,o.translationY=n,s.translationX=r,s.translationY=n,a.translationX=r,a.translationY=n}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear(!0);const{points:i,closePath:o}=this.getAxisLinePoints();i.forEach(({x:s,y:a,moveTo:r,arc:n,radius:l=0,startAngle:c=0,endAngle:h=0})=>{n?e.arc(s,a,l,c,h):r?e.moveTo(s,a):e.lineTo(s,a)}),o&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.stroke,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){const{scale:t,shape:e,gridLength:i}=this,[o,s]=this.range,a=(0,import_ag_charts_core2.isNumberEqual)(s-o,2*Math.PI),r=[];if(e==="circle")a?r.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):r.push({x:i*Math.cos(o),y:i*Math.sin(o),moveTo:!0},{x:0,y:0,radius:i,startAngle:normalizeAngle3602(o),endAngle:normalizeAngle3602(s),arc:!0,moveTo:!1});else if(e==="polygon"){const n=t.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.map(l=>t.convert(l));n&&n.length>2&&n.forEach((l,c)=>{const h=i*Math.cos(l),u=i*Math.sin(l),p=c===0;r.push({x:h,y:u,moveTo:p})})}return{points:r,closePath:a}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{style:i,width:o},innerRadiusRatio:s}=this;if(!(i&&e>0))return;const a=e*s,r=i.length;this.gridLineGroupSelection.each((n,l,c)=>{const{value:h}=l,{stroke:u,lineDash:p}=i[c%r],d=t.convert(h);n.x1=a*Math.cos(d),n.y1=a*Math.sin(d),n.x2=e*Math.cos(d),n.y2=e*Math.sin(d),n.stroke=u,n.strokeWidth=o,n.lineDash=p,n.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this;e.each((i,o,s)=>{const a=this.labelData[s];if(!a||a.hidden){i.visible=!1;return}i.text=a.text,i.setFont(t),i.fill=t.color,i.x=a.x,i.y=a.y,i.textAlign=a.textAlign,i.textBaseline=a.textBaseline,i.visible=!0,a.rotation?(i.rotation=a.rotation,i.rotationCenterX=a.x,i.rotationCenterY=a.y):i.rotation=0})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:o}=this;o.each((s,a)=>{const{value:r}=a,n=t.convert(r),l=Math.cos(n),c=Math.sin(n);s.x1=e*l,s.y1=e*c,s.x2=(e+i.size)*l,s.y2=(e+i.size)*c,s.stroke=i.stroke,s.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:o,gridLength:s,scale:a,tick:r}=this;if(!o.enabled)return[];const n=new RotatableText2,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,h=t.map((u,p)=>{const{value:d}=u,g=s+o.spacing+r.size,f=a.convert(d),y=Math.cos(f),m=Math.sin(f),b=g*y,x=g*m,{textAlign:S,textBaseline:v}=this.getLabelAlign(f),T=p===t.length-1&&d!==t[0]&&(0,import_ag_charts_core2.isNumberEqual)(normalizeAngle3602(f),normalizeAngle3602(a.convert(t[0]))),D=this.getLabelRotation(f);let k=this.formatTick(d,p,a.domain);n.text=k,n.x=b,n.y=x,n.setFont(o),n.textAlign=S,n.textBaseline=v,n.rotation=D,D&&(n.rotationCenterX=b,n.rotationCenterY=x);let A=D?Transformable.toCanvas(n):n.getBBox();if(A&&e.hideWhenNecessary&&!D){const M=l-A.x,_=A.x+A.width-c,O=1;if(M>O||_>O){const C=A.width-Math.max(M,_);k=TextWrapper.wrapText(k,{maxWidth:C,font:o,textWrap:"never"}),k===TextUtils.EllipsisChar&&(k=""),n.text=k,A=n.getBBox()}}return{text:k,x:b,y:x,textAlign:S,textBaseline:v,hidden:k===""||u.hidden||T,rotation:D,box:A}});return o.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(t,e){this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:o})=>o).filter(o=>o!=null);return!this.label.enabled||i.length===0?null:BBox.merge(i)}getLabelOrientation(){const{label:t}=this;return t instanceof AngleAxisLabel?t.orientation:"fixed"}getLabelRotation(t){let e=toRadians(this.label.rotation??0);t=normalizeAngle3602(t);const i=this.getLabelOrientation();return i==="parallel"?(e+=t,t>=0&&t<Math.PI?e-=Math.PI/2:e+=Math.PI/2):i==="perpendicular"&&(e+=t,t>=Math.PI/2&&t<1.5*Math.PI&&(e+=Math.PI)),e}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let o,s;const a=this.getLabelOrientation(),r=(0,import_ag_charts_core2.isNumberEqual)(e,0),n=(0,import_ag_charts_core2.isNumberEqual)(i,0),l=(0,import_ag_charts_core2.isNumberEqual)(e,1),c=(0,import_ag_charts_core2.isNumberEqual)(i,-1),h=e>0&&!r,u=i>0&&!n;return a==="parallel"?(o="center",s=l&&n||u?"top":"bottom"):a==="perpendicular"?(o=c||h?"left":"right",s="middle"):(o="right",r?o="center":h&&(o="left"),s="bottom",n?s="middle":u&&(s="top")),{textAlign:o,textBaseline:s}}updateCrossLines(){const{shape:t,gridLength:e,innerRadiusRatio:i}=this;this.crossLines.forEach(o=>{o instanceof AngleCrossLine&&(o.ticks=this.tickData.map(s=>s.value),o.shape=t,o.axisOuterRadius=e,o.axisInnerRadius=e*i)}),super.updateCrossLines()}};AngleAxis.CrossLineConstructor=AngleCrossLine,__decorateClass([ProxyOnWrite("rotation"),TempValidate3(NUMBER2)],AngleAxis.prototype,"startAngle",2),__decorateClass([TempValidate3(NUMBER2,{optional:!0})],AngleAxis.prototype,"endAngle",2);var{RATIO:RATIO2,OBJECT:OBJECT2,TempValidate:TempValidate4,CategoryScale}=import_ag_charts_community5._ModuleSupport,AngleCategoryAxis=class extends AngleAxis{constructor(t){super(t,new CategoryScale),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new AngleAxisInterval}generateAngleTicks(){const{scale:t,gridLength:e}=this,{values:i,minSpacing:o}=this.interval,s=i??t.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})??[];if(s.length<2||o==null)return s.map(c=>({value:c,visible:!0}));const a=s[0],r=t.convert(a),n=e*Math.cos(r),l=e*Math.sin(r);for(let c=1;c<s.length-1;c++){const h=s[c],u=t.convert(h);if(u-r>Math.PI)break;const p=e*Math.cos(u),d=e*Math.sin(u);if(Math.sqrt((p-n)**2+(d-l)**2)>o){const f=new Set([a]);return loopSymmetrically(s,c,(y,m)=>{f.add(m)}),s.map(y=>{const m=f.has(y);return{value:y,visible:m}})}}return[{value:a,visible:!0}]}avoidLabelCollisions(t){const{minSpacing:e}=this.label;if(t.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(e==null)return l.box.collidesBBox(c.box);const h=l.box.clone().grow(e/2),u=c.box.clone().grow(e/2);return h.collidesBBox(u)},o=t[0],s=t.at(-1),a=new Set([o]),r=(0,import_ag_charts_core3.isNumberEqual)(o.x,s.x)&&(0,import_ag_charts_core3.isNumberEqual)(o.y,s.y),n=Math.floor(t.length/2);for(let l=1;l<=n;l++){const c=r?t.slice(0,-1):t;if(!loopSymmetrically(c,l,i)){loopSymmetrically(c,l,(u,p)=>{a.add(p)});break}}t.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};AngleCategoryAxis.className="AngleCategoryAxis",AngleCategoryAxis.type="angle-category",__decorateClass([TempValidate4(RATIO2)],AngleCategoryAxis.prototype,"groupPaddingInner",2),__decorateClass([TempValidate4(RATIO2)],AngleCategoryAxis.prototype,"paddingInner",2),__decorateClass([TempValidate4(OBJECT2)],AngleCategoryAxis.prototype,"interval",2);var AngleCategoryAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",moduleFactory:t=>new AngleCategoryAxis(t)},import_ag_charts_community7=require("ag-charts-community"),import_ag_charts_core5=require("ag-charts-core"),import_ag_charts_community6=require("ag-charts-community"),import_ag_charts_core4=require("ag-charts-core"),{range,isDenseInterval,LinearScale}=import_ag_charts_community6._ModuleSupport,LinearAngleScale=class mt extends LinearScale{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(e,i){const[o,s]=i;let a=LinearScale.getTickStep(o,s,e);const r=isNaN(e.maxTickCount)?1/0:e.maxTickCount,n=Math.abs(s-o)/a;let l=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));return l>r&&(l/=2,a*=2),{count:l,step:a}}ticks(e,i=this.domain){const{arcLength:o}=this;if(!i||i.length<2||i.some(c=>!isFinite(c))||o<=0)return[];const{nice:s,interval:a}=e,[r,n]=i;if(a){const c=Math.abs(a),h=this.getPixelRange();if(!isDenseInterval((n-r)/c,h))return range(r,n,c)}let l;if(s&&this.hasNiceRange()){const c=super.niceDomain(e,i);l=mt.getNiceStepAndTickCount(e,c).step}else l=LinearScale.getTickStep(r,n,e);return range(r,n,l)}hasNiceRange(){const e=this.range.slice().sort((o,s)=>o-s);return[Math.PI,2*Math.PI].some(o=>(0,import_ag_charts_core4.isNumberEqual)(o,e[1]-e[0]))}niceDomain(e,i=this.domain){const o=super.niceDomain(e,i);if(!this.hasNiceRange())return o;const s=o[0]>o[1],a=s?o[1]:o[0],{step:r,count:n}=mt.getNiceStepAndTickCount(e,o),l=1/r,c=r>=1?Math.ceil(a/r+n)*r:Math.ceil((a+n*r)*l)/l;return s?[c,a]:[a,c]}getPixelRange(){return this.arcLength}},{AND:AND2,GREATER_THAN,LESS_THAN,NUMBER_OR_NAN,OBJECT:OBJECT3,TempValidate:TempValidate5,angleBetween,normalisedExtentWithMetadata,findMinMax}=import_ag_charts_community7._ModuleSupport,AngleNumberAxis=class extends AngleAxis{constructor(t){super(t,new LinearAngleScale),this.shape="circle",this.interval=new AngleAxisInterval}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=normalisedExtentWithMetadata(t,e,i);return{domain:o,clipped:s}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),o=angleBetween(e,i)||2*Math.PI,s=this.gridLength;return o*s}generateAngleTicks(t){const{scale:e,range:i,nice:o}=this,{values:s,step:a,minSpacing:r,maxSpacing:n}=this.interval;let l;if(s==null){const{arcLength:c}=e,h=n?Math.floor(c/n):1,u=r?Math.floor(c/r):1/0,p=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),d=Math.max(h,Math.min(u,p)),g={nice:o,interval:a,tickCount:d,minTickCount:h,maxTickCount:u};l=e.ticks(g,t)}else{const[c,h]=findMinMax(t.map(Number));l=s.filter(u=>u>=c&&u<=h).sort((u,p)=>u-p)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(t){const{minSpacing:e}=this.label,i=(a,r)=>{if(a.hidden||r.hidden)return!1;if(e==null)return a.box.collidesBBox(r.box);const n=a.box.clone().grow(e/2),l=r.box.clone().grow(e/2);return n.collidesBBox(l)},o=t[0],s=t.at(-1);o!==s&&(0,import_ag_charts_core5.isNumberEqual)(o.x,s.x)&&(0,import_ag_charts_core5.isNumberEqual)(o.y,s.y)&&(s.hidden=!0);for(let a=1;a<t.length;a*=2){let r=!1;for(let n=a;n<t.length;n+=a){const l=t[n],c=t[n-a];if(i(c,l)){r=!0;break}}if(!r){t.forEach((n,l)=>{l%a>0&&(n.hidden=!0,n.box=void 0)});return}}t.forEach((a,r)=>{r>0&&(a.hidden=!0,a.box=void 0)})}};AngleNumberAxis.className="AngleNumberAxis",AngleNumberAxis.type="angle-number",__decorateClass([TempValidate5(AND2(NUMBER_OR_NAN,LESS_THAN("max")),{optional:!0})],AngleNumberAxis.prototype,"min",2),__decorateClass([TempValidate5(AND2(NUMBER_OR_NAN,GREATER_THAN("min")),{optional:!0})],AngleNumberAxis.prototype,"max",2),__decorateClass([TempValidate5(OBJECT3)],AngleNumberAxis.prototype,"interval",2);var AngleNumberAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",moduleFactory:t=>new AngleNumberAxis(t)},import_ag_charts_community8=require("ag-charts-community"),{OrdinalTimeScale}=import_ag_charts_community8._ModuleSupport,OrdinalTimeAxis=class extends import_ag_charts_community8._ModuleSupport.CategoryAxis{constructor(t){super(t,new OrdinalTimeScale)}};OrdinalTimeAxis.className="OrdinalTimeAxis",OrdinalTimeAxis.type="ordinal-time";var OrdinalTimeAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",moduleFactory:t=>new OrdinalTimeAxis(t)},import_ag_charts_community11=require("ag-charts-community"),import_ag_charts_community10=require("ag-charts-community"),import_ag_charts_core7=require("ag-charts-core"),import_ag_charts_community9=require("ag-charts-community"),import_ag_charts_core6=require("ag-charts-core"),{ChartAxisDirection:ChartAxisDirection4,TempValidate:TempValidate6,NUMBER:NUMBER3,getCrossLineValue:getCrossLineValue2,validateCrossLineValue:validateCrossLineValue2,normalizeAngle360:normalizeAngle3603,toRadians:toRadians2,Group:Group3,Path:Path3,Sector:Sector2,RotatableText:RotatableText3}=import_ag_charts_community9._ModuleSupport,RadiusCrossLineLabel=class extends PolarCrossLineLabel{constructor(){super(...arguments),this.positionAngle=void 0}};__decorateClass([TempValidate6(NUMBER3,{optional:!0})],RadiusCrossLineLabel.prototype,"positionAngle",2);var RadiusCrossLine=class extends PolarCrossLine{constructor(){super(),this.direction=ChartAxisDirection4.Y,this.label=new RadiusCrossLineLabel,this.polygonNode=new Path3,this.sectorNode=new Sector2,this.crossLineRange=new Group3,this.labelNode=new RotatableText3,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e}=this;if(!e||!this.isValid()||!validateCrossLineValue2(getCrossLineValue2(this),e)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:o}=this;t&&(t=i>=this.axisInnerRadius&&o<=this.axisOuterRadius),this.rangeGroup.visible=t,this.lineGroup.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:t,scale:e,type:i,axisInnerRadius:o,axisOuterRadius:s}=this;if(!e)return{innerRadius:0,outerRadius:0};const a=l=>s+o-l;let r,n;if(i==="line")r=a(e.convert(this.value)),n=r;else{const l=Math.abs(e?.bandwidth??0),c=t.map(h=>e.convert(h));r=a(Math.max(...c)),n=a(Math.min(...c))+l}this.outerRadius=r,this.innerRadius=n}drawPolygon(t,e,i){e.forEach((o,s)=>{const a=t*Math.cos(o),r=t*Math.sin(o);s===0?i.path.moveTo(a,r):i.path.lineTo(a,r)}),i.path.closePath()}updatePolygonNode(t){const{gridAngles:e,polygonNode:i,scale:o,shape:s,type:a,innerRadius:r,outerRadius:n}=this;if(!t||s!=="polygon"||!o||!e){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(n-l,e,i);const c=e.slice().reverse(),h=a==="line"?n-l:r+l;this.drawPolygon(h,c,i),this.setSectorNodeProps(i)}updateSectorNode(t){const{axisInnerRadius:e,axisOuterRadius:i,scale:o,sectorNode:s,shape:a,innerRadius:r,outerRadius:n}=this;if(!t||a!=="circle"||!o){s.visible=!1;return}s.visible=!0,s.startAngle=0,s.endAngle=2*Math.PI;const l=this.getPadding(),c=(0,import_ag_charts_core6.clamp)(e,r+l,i),h=(0,import_ag_charts_core6.clamp)(e,n-l,i);s.innerRadius=Math.min(c,h),s.outerRadius=Math.max(c,h),this.setSectorNodeProps(s)}updateLabelNode(t){const{innerRadius:e,label:i,labelNode:o,scale:s,shape:a,type:r}=this;if(!t||i.enabled===!1||!i.text||!s){o.visible=!1;return}const n=normalizeAngle3603(toRadians2((i.positionAngle??0)-90)),l=((0,import_ag_charts_core6.isNumberEqual)(n,0)||n>0)&&n<Math.PI,c=l?n-Math.PI/2:n+Math.PI/2;let h;const u=this.gridAngles??[];r==="line"?h=e+i.padding:a==="circle"||u.length<3?h=e-i.padding:h=e*Math.cos(Math.PI/u.length)-i.padding;const p=h*Math.cos(n),d=h*Math.sin(n);let g;r==="line"?g=l?"top":"bottom":g=l?"bottom":"top",this.setLabelNodeProps(o,p,d,g,c)}getPadding(){const{scale:t}=this;if(!t)return 0;const e=Math.abs(t.bandwidth??0),i=Math.abs(t.step??0);return t instanceof import_ag_charts_community9._ModuleSupport.BandScale?(i-e)/2:0}};RadiusCrossLine.className="RadiusCrossLine";var{ChartAxisDirection:ChartAxisDirection5,ZIndexMap,NUMBER:NUMBER4,BOOLEAN:BOOLEAN2,TempValidate:TempValidate7,normalizeAngle360:normalizeAngle3604,toRadians:toRadians3,Caption,Group:Group4,Path:Path4,Line,Selection,AxisTickGenerator,AxisGroupZIndexMap}=import_ag_charts_community10._ModuleSupport,RadiusAxisLabel=class extends import_ag_charts_community10._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};__decorateClass([TempValidate7(BOOLEAN2,{optional:!0})],RadiusAxisLabel.prototype,"autoRotate",2),__decorateClass([TempValidate7(NUMBER4)],RadiusAxisLabel.prototype,"autoRotateAngle",2);var RadiusAxis=class extends import_ag_charts_community10._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.positionAngle=0,this.tickGenerator=new AxisTickGenerator(this),this.generatedTicks=void 0,this.lineNode=this.axisGroup.appendChild(new Line({name:`${this.id}-Axis-line`,zIndex:AxisGroupZIndexMap.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new Group4({name:`${this.id}-gridPaths`,zIndex:ZIndexMap.AXIS_GRID})),this.gridPathSelection=Selection.select(this.gridPathGroup,Path4),this.axisGroup.appendChild(this.title.caption.node),this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return ChartAxisDirection5.Y}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:o}=this,s=t*o,a=toRadians3(i);return{translationX:e.x,translationY:e.y-t-s,rotation:a,rotationCenterX:0,rotationCenterY:t+s}}update(){super.update(),this.updateTitle();const{enabled:t,stroke:e,width:i}=this.line;this.lineNode.setProperties({stroke:e,strokeWidth:t?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}calculateTickLayout(t,e,i,o){const{parallelFlipRotation:s,regularFlipRotation:a}=this.calculateRotations(),r=[0,1],n=this.label.getSideFlag(),l=n*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),c=this.tickGenerator.generateTicks({domain:t,niceMode:e,visibleRange:r,primaryTickCount:o,parallelFlipRotation:s,regularFlipRotation:a,labelX:l,sideFlag:n}),{tickData:h,primaryTickCount:u=o}=c,{ticks:p,rawTicks:d,tickDomain:g,fractionDigits:f,niceDomain:y=t}=h,m=p.map(b=>this.getTickLabelProps(b,c));return this.generatedTicks={ticks:p,labels:m},{ticks:d,tickDomain:g,niceDomain:y,primaryTickCount:u,fractionDigits:f}}updateSelections(){const{generatedTicks:t}=this;if(!t)return;const{ticks:e,labels:i}=t;this.gridLineGroupSelection.update(this.gridLength?e:[]),this.tickLineGroupSelection.update(e),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(e):[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const t=import_ag_charts_community10._ModuleSupport.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((e,i)=>{e.fill=i.fill,e.fontFamily=i.fontFamily,e.fontSize=i.fontSize,e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.text=i.text,e.textBaseline=i.textBaseline,e.textAlign=i.textAlign??"center",e.setProperties(t(e,i))})}updateGridLines(){super.updateGridLines();const{gridLine:{style:t,width:e},shape:i,generatedTicks:o}=this;if(!t||!o)return;const s=t.length,a=(p,d)=>{const{stroke:g,lineDash:f}=t[d%s];p.stroke=g,p.strokeWidth=e,p.lineDash=f,p.fill=void 0},[r,n]=this.gridRange??[0,2*Math.PI],l=(0,import_ag_charts_core7.isNumberEqual)(n-r,2*Math.PI),u=i==="circle"?(p,d)=>{const{path:g}=p;g.clear(!0);const f=this.getTickRadius(d);l?(g.moveTo(f,0),g.arc(0,0,f,0,2*Math.PI)):(g.moveTo(f*Math.cos(r),f*Math.sin(r)),g.arc(0,0,f,normalizeAngle3604(r),normalizeAngle3604(n))),l&&g.closePath()}:(p,d)=>{const{path:g}=p,f=this.gridAngles;if(g.clear(!0),!f||f.length<3)return;const y=this.getTickRadius(d);f.forEach((m,b)=>{const x=y*Math.cos(m),S=y*Math.sin(m);b===0?g.moveTo(x,S):g.lineTo(x,S),f.forEach((v,T)=>{const D=y*Math.cos(v),k=y*Math.sin(v);T===0?g.moveTo(D,k):g.lineTo(D,k)}),g.closePath()}),g.closePath()};this.gridPathSelection.each((p,d,g)=>{a(p,g),u(p,d)})}updateTitle(){const t=n=>n.defaultValue,{title:e,range:i,moduleCtx:{callbackCache:o}}=this,{formatter:s=t}=this.title;e.caption.enabled=e.enabled,e.caption.fontFamily=e.fontFamily,e.caption.fontSize=e.fontSize,e.caption.fontStyle=e.fontStyle,e.caption.fontWeight=e.fontWeight,e.caption.color=e.color,e.caption.wrapping=e.wrapping;let a=!1;const r=e.caption.node;e.enabled&&(a=!0,r.rotation=Math.PI/2,r.x=Math.floor((i[0]+i[1])/2),r.y=-Caption.SMALL_PADDING,r.textAlign="center",r.textBaseline="bottom",r.text=o.call(this,s,this.getTitleFormatterParams(this.scale.domain))),r.visible=a}updateCrossLines(){this.crossLines.forEach(t=>{if(t instanceof RadiusCrossLine){const{shape:e,gridAngles:i,range:o,innerRadiusRatio:s}=this,a=o[0];t.shape=e,t.gridAngles=i,t.axisOuterRadius=a,t.axisInnerRadius=a*s}}),super.updateCrossLines()}createLabel(){return new RadiusAxisLabel}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:o,textBaseline:s,textAlign:a}=e,r=this.scale.range,n=t.tickLabel,c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),h=n!==""&&n!=null;return{...this.getLabelStyles({value:t.tickLabel}),tickId:t.tickId,rotation:o,rotationCenterX:c,translationY:t.translationY,text:n,textAlign:a,textBaseline:s,visible:h,x:c,y:0,range:r}}};RadiusAxis.CrossLineConstructor=RadiusCrossLine,__decorateClass([TempValidate7(NUMBER4)],RadiusAxis.prototype,"positionAngle",2);var{RATIO:RATIO3,ProxyPropertyOnWrite,TempValidate:TempValidate8,CategoryScale:CategoryScale2}=import_ag_charts_community11._ModuleSupport,RadiusCategoryAxis=class extends RadiusAxis{constructor(t){super(t,new CategoryScale2),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}normaliseDataDomain(t){return{domain:t,clipped:!1}}prepareGridPathTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e,innerRadiusRatio:i}=this,o=e.range[0],s=o*i;if(CategoryScale2.is(e)){const a=e.domain,r=a.length-1-a.indexOf(t.tick);return r===0?s:e.inset+e.step*(r-.5)+e.bandwidth/2}else{const a=(o-s)/e.domain.length;return o-t.translationY+s-a/2}}};RadiusCategoryAxis.className="RadiusCategoryAxis",RadiusCategoryAxis.type="radius-category",__decorateClass([TempValidate8(RATIO3)],RadiusCategoryAxis.prototype,"groupPaddingInner",2),__decorateClass([ProxyPropertyOnWrite("scale","paddingInner"),TempValidate8(RATIO3)],RadiusCategoryAxis.prototype,"paddingInner",2),__decorateClass([ProxyPropertyOnWrite("scale","paddingOuter"),TempValidate8(RATIO3)],RadiusCategoryAxis.prototype,"paddingOuter",2);var RadiusCategoryAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",moduleFactory:t=>new RadiusCategoryAxis(t)},import_ag_charts_community12=require("ag-charts-community"),{AND:AND3,GREATER_THAN:GREATER_THAN2,LESS_THAN:LESS_THAN2,NUMBER_OR_NAN:NUMBER_OR_NAN2,TempValidate:TempValidate9,normalisedExtentWithMetadata:normalisedExtentWithMetadata2,LinearScale:LinearScale2}=import_ag_charts_community12._ModuleSupport,RadiusNumberAxis=class extends RadiusAxis{constructor(t){super(t,new LinearScale2),this.shape="polygon"}prepareGridPathTickData(t){const{scale:e}=this,i=e.domain[1];return t.filter(({tick:o})=>o!==i).sort((o,s)=>s.tick-o.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],o=i*this.innerRadiusRatio;return i-t.translationY+o}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=normalisedExtentWithMetadata2(t,e,i);return{domain:o,clipped:s}}};RadiusNumberAxis.className="RadiusNumberAxis",RadiusNumberAxis.type="radius-number",__decorateClass([TempValidate9(AND3(NUMBER_OR_NAN2,LESS_THAN2("max")),{optional:!0})],RadiusNumberAxis.prototype,"min",2),__decorateClass([TempValidate9(AND3(NUMBER_OR_NAN2,GREATER_THAN2("min")),{optional:!0})],RadiusNumberAxis.prototype,"max",2);var RadiusNumberAxisModule={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",moduleFactory:t=>new RadiusNumberAxis(t)},import_ag_charts_community13=require("ag-charts-community"),{BOOLEAN:BOOLEAN3,POSITIVE_NUMBER:POSITIVE_NUMBER3,ObserveChanges,TempValidate:TempValidate10}=import_ag_charts_community13._ModuleSupport,Animation=class extends import_ag_charts_community13._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,t.animationManager.skip(!1),this.destroyFns.push(()=>{t.animationManager.skip(!0)})}};__decorateClass([ObserveChanges((t,e)=>{t.ctx.animationManager.skip(!e)}),TempValidate10(BOOLEAN3)],Animation.prototype,"enabled",2),__decorateClass([ObserveChanges((t,e)=>{t.ctx.animationManager.defaultDuration=e}),TempValidate10(POSITIVE_NUMBER3,{optional:!0})],Animation.prototype,"duration",2);var AnimationModule={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Animation(t),themeTemplate:{animation:{enabled:!0}}},import_ag_charts_community88=require("ag-charts-community"),import_ag_charts_core37=require("ag-charts-core"),import_ag_charts_community14=require("ag-charts-community"),textInputTemplate_default='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>',{focusCursorAtEnd}=import_ag_charts_community14._ModuleSupport,moduleId="text-input",canvasOverlay="canvas-overlay",TextInput=class extends import_ag_charts_community14._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1,this.element=t.domManager.addChild(canvasOverlay,moduleId),this.element.classList.add("ag-charts-text-input"),this.destroyFns.push(()=>t.domManager.removeChild(canvasOverlay,moduleId))}setKeyDownHandler(t){this.element.addEventListener("keydown",t),this.destroyFns.push(()=>this.element.removeEventListener("keydown",t))}show(t){this.element.innerHTML=textInputTemplate_default;const e=this.element.firstElementChild;import_ag_charts_community14._ModuleSupport.setAttribute(e,"data-preventdefault",!1),e.isContentEditable||(e.contentEditable="true"),e.setAttribute("placeholder",this.ctx.localeManager.t(t.placeholderText??"inputTextareaPlaceholder")),t.styles?.placeholderColor&&e.style.setProperty("--placeholder-text-color",t.styles?.placeholderColor),e.innerText=t.text??"",e.style.color=t.styles?.color??"inherit",e.style.fontFamily=t.styles?.fontFamily??"inherit",e.style.fontSize=t.styles?.fontSize?`${t.styles.fontSize}px`:"inherit",e.style.fontStyle=t.styles?.fontStyle??"inherit",e.style.fontWeight=typeof t.styles?.fontWeight=="number"?`${t.styles.fontWeight}`:t.styles?.fontWeight??"inherit",focusCursorAtEnd(e),e.addEventListener("input",()=>{this.updatePosition(),t.onChange?.(this.getValue(),this.getBBox())}),e.addEventListener("click",i=>{i.stopPropagation()}),t.layout&&(this.layout=t.layout,this.updatePosition()),t.onChange?.(this.getValue(),this.getBBox()),this.visible=!0}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1}isVisible(){return this.visible}updateColor(t){this.element.firstElementChild&&(this.element.firstElementChild.style.color=t)}updateFontSize(t){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize=`${t}px`,this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:t}=this,e=t.firstElementChild;if(!e)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:o,getTextInputCoords:s,getTextPosition:a,alignment:r,textAlign:n}=this.layout;t.style.setProperty("width",o?`${o}px`:"unset");const l=e.getBoundingClientRect(),c=s(l.height);let h=c.x;r==="center"?h-=(o??l.width)/2:r==="right"&&(h-=o??l.width);const u=a();let p=c.y;u==="center"?p-=l.height/2:u==="bottom"&&(p-=l.height),t.style.setProperty("top",`${p}px`),t.style.setProperty("left",`${h}px`),t.style.setProperty("max-width",`${i.width-h}px`),t.style.setProperty("text-align",r),e.style.setProperty("text-align",n)}getBBox(){const{left:t,top:e,width:i,height:o}=this.element.getBoundingClientRect();return new import_ag_charts_community14._ModuleSupport.BBox(t,e,i,o)}},import_ag_charts_community15=require("ag-charts-community"),{BOOLEAN:BOOLEAN4,BaseProperties:BaseProperties2,TempValidate:TempValidate11,UNION:UNION3}=import_ag_charts_community15._ModuleSupport,AXIS_TYPE=UNION3(["x","y","xy"],"an axis type"),AxesButtons=class extends BaseProperties2{constructor(){super(...arguments),this.enabled=!1,this.axes="y"}};__decorateClass([TempValidate11(BOOLEAN4)],AxesButtons.prototype,"enabled",2),__decorateClass([TempValidate11(AXIS_TYPE,{optional:!0})],AxesButtons.prototype,"axes",2);var import_ag_charts_community37=require("ag-charts-community"),AnnotationType=(t=>(t.Line="line",t.HorizontalLine="horizontal-line",t.VerticalLine="vertical-line",t.DisjointChannel="disjoint-channel",t.ParallelChannel="parallel-channel",t.FibonacciRetracement="fibonacci-retracement",t.FibonacciRetracementTrendBased="fibonacci-retracement-trend-based",t.Callout="callout",t.Comment="comment",t.Note="note",t.Text="text",t.Arrow="arrow",t.ArrowUp="arrow-up",t.ArrowDown="arrow-down",t.DateRange="date-range",t.PriceRange="price-range",t.DatePriceRange="date-price-range",t.QuickDatePriceRange="quick-date-price-range",t))(AnnotationType||{}),ANNOTATION_TYPES=Object.values(AnnotationType);function stringToAnnotationType(t){for(const e of ANNOTATION_TYPES)if(e===t)return e}var import_ag_charts_core23=require("ag-charts-core"),import_ag_charts_community20=require("ag-charts-community"),import_ag_charts_core10=require("ag-charts-core"),import_ag_charts_community16=require("ag-charts-community"),import_ag_charts_core8=require("ag-charts-core"),{BOOLEAN:BOOLEAN5,COLOR_STRING:COLOR_STRING2,DATE,FONT_STYLE:FONT_STYLE2,FONT_WEIGHT:FONT_WEIGHT2,FUNCTION,LINE_DASH:LINE_DASH2,LINE_STYLE,NUMBER:NUMBER5,OBJECT:OBJECT4,OR:OR2,POSITIVE_NUMBER:POSITIVE_NUMBER4,RATIO:RATIO4,STRING:STRING2,TEXT_ALIGN,UNION:UNION4,BaseProperties:BaseProperties3,TempValidate:TempValidate12,predicateWithMessage,generateUUID}=import_ag_charts_community16._ModuleSupport,GROUPING_VALUE_KEYS=["value","groupPercentage"],GROUPING_VALUE=predicateWithMessage(t=>(0,import_ag_charts_core8.isObject)(t)&&Object.keys(t).every(e=>GROUPING_VALUE_KEYS.includes(e)),"objects with grouping value properties such as 'value' or 'groupPercentage'"),PointProperties=class extends BaseProperties3{};__decorateClass([TempValidate12(OR2(STRING2,NUMBER5,DATE,GROUPING_VALUE))],PointProperties.prototype,"x",2),__decorateClass([TempValidate12(OR2(STRING2,NUMBER5,DATE,GROUPING_VALUE))],PointProperties.prototype,"y",2);var ChannelAnnotationMiddleProperties=class extends Stroke(LineStyle(Visible(BaseProperties3))){},AxisLabelProperties=class extends Stroke(LineStyle(Fill(Label(Font(BaseProperties3))))){constructor(){super(...arguments),this.cornerRadius=2}};__decorateClass([TempValidate12(BOOLEAN5)],AxisLabelProperties.prototype,"enabled",2),__decorateClass([TempValidate12(POSITIVE_NUMBER4)],AxisLabelProperties.prototype,"cornerRadius",2);var BackgroundProperties=class extends Fill(BaseProperties3){},HandleProperties=class extends Stroke(LineStyle(Fill(BaseProperties3))){},LineTextProperties=class extends Font(BaseProperties3){constructor(){super(...arguments),this.label="",this.position="top",this.alignment="left"}};__decorateClass([TempValidate12(STRING2)],LineTextProperties.prototype,"label",2),__decorateClass([TempValidate12(UNION4(["top","center","bottom"]),{optional:!0})],LineTextProperties.prototype,"position",2),__decorateClass([TempValidate12(UNION4(["left","center","right"]),{optional:!0})],LineTextProperties.prototype,"alignment",2);var LabelTextProperties=class extends Font(BaseProperties3){},ChannelTextProperties=class extends Font(BaseProperties3){constructor(){super(...arguments),this.label=""}};__decorateClass([TempValidate12(STRING2)],ChannelTextProperties.prototype,"label",2),__decorateClass([TempValidate12(UNION4(["top","inside","bottom"]),{optional:!0})],ChannelTextProperties.prototype,"position",2),__decorateClass([TempValidate12(UNION4(["left","center","right"]),{optional:!0})],ChannelTextProperties.prototype,"alignment",2);function Annotation(t){class e extends Lockable(Visible(t)){constructor(){super(...arguments),this.id=generateUUID()}isValidWithContext(o,s){return super.isValid(s)}}return e}function Line2(t){class e extends t{constructor(){super(...arguments),this.start=new PointProperties,this.end=new PointProperties}}return __decorateClass([TempValidate12(OBJECT4)],e.prototype,"start",2),__decorateClass([TempValidate12(OBJECT4)],e.prototype,"end",2),e}function Point(t){class e extends t{}return __decorateClass([TempValidate12(OR2(STRING2,NUMBER5,DATE,GROUPING_VALUE))],e.prototype,"x",2),__decorateClass([TempValidate12(OR2(STRING2,NUMBER5,DATE,GROUPING_VALUE))],e.prototype,"y",2),e}function Value(t){class e extends t{}return __decorateClass([TempValidate12(OR2(STRING2,NUMBER5,DATE,GROUPING_VALUE))],e.prototype,"value",2),e}function Background(t){class e extends t{constructor(){super(...arguments),this.background=new BackgroundProperties}}return __decorateClass([TempValidate12(OBJECT4,{optional:!0})],e.prototype,"background",2),e}function Handle(t){class e extends t{constructor(){super(...arguments),this.handle=new HandleProperties}}return __decorateClass([TempValidate12(OBJECT4,{optional:!0})],e.prototype,"handle",2),e}function AxisLabel(t){class e extends t{constructor(){super(...arguments),this.axisLabel=new AxisLabelProperties}}return __decorateClass([TempValidate12(OBJECT4,{optional:!0})],e.prototype,"axisLabel",2),e}function Label(t){class e extends t{constructor(){super(...arguments),this.padding=void 0,this.textAlign="center",this.formatter=void 0}}return __decorateClass([TempValidate12(POSITIVE_NUMBER4,{optional:!0})],e.prototype,"padding",2),__decorateClass([TempValidate12(TEXT_ALIGN,{optional:!0})],e.prototype,"textAlign",2),__decorateClass([TempValidate12(FUNCTION,{optional:!0})],e.prototype,"formatter",2),e}function Cappable(t){class e extends t{}return e}function Extendable(t){class e extends t{}return __decorateClass([TempValidate12(BOOLEAN5,{optional:!0})],e.prototype,"extendStart",2),__decorateClass([TempValidate12(BOOLEAN5,{optional:!0})],e.prototype,"extendEnd",2),e}function Lockable(t){class e extends t{}return __decorateClass([TempValidate12(BOOLEAN5,{optional:!0})],e.prototype,"locked",2),e}function Localisable(t){class e extends t{setLocaleManager(o){this.localeManager??(this.localeManager=o)}}return e}function Visible(t){class e extends t{}return __decorateClass([TempValidate12(BOOLEAN5,{optional:!0})],e.prototype,"visible",2),e}function Fill(t){class e extends t{}return __decorateClass([TempValidate12(COLOR_STRING2,{optional:!0})],e.prototype,"fill",2),__decorateClass([TempValidate12(RATIO4,{optional:!0})],e.prototype,"fillOpacity",2),e}function Stroke(t){class e extends t{}return __decorateClass([TempValidate12(COLOR_STRING2,{optional:!0})],e.prototype,"stroke",2),__decorateClass([TempValidate12(RATIO4,{optional:!0})],e.prototype,"strokeOpacity",2),__decorateClass([TempValidate12(NUMBER5,{optional:!0})],e.prototype,"strokeWidth",2),e}function LineStyle(t){class e extends t{constructor(){super(...arguments),this.lineCap=void 0,this.computedLineDash=void 0}}return __decorateClass([TempValidate12(LINE_DASH2,{optional:!0})],e.prototype,"lineDash",2),__decorateClass([TempValidate12(NUMBER5,{optional:!0})],e.prototype,"lineDashOffset",2),__decorateClass([TempValidate12(LINE_STYLE,{optional:!0})],e.prototype,"lineStyle",2),e}function Font(t){class e extends t{constructor(){super(...arguments),this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}return __decorateClass([TempValidate12(FONT_STYLE2,{optional:!0})],e.prototype,"fontStyle",2),__decorateClass([TempValidate12(FONT_WEIGHT2,{optional:!0})],e.prototype,"fontWeight",2),__decorateClass([TempValidate12(POSITIVE_NUMBER4)],e.prototype,"fontSize",2),__decorateClass([TempValidate12(STRING2)],e.prototype,"fontFamily",2),__decorateClass([TempValidate12(COLOR_STRING2,{optional:!0})],e.prototype,"color",2),e}var import_ag_charts_community19=require("ag-charts-community"),import_ag_charts_community17=require("ag-charts-community"),import_ag_charts_core9=require("ag-charts-core");function getGrouping(t){return(0,import_ag_charts_core9.isNumber)(t)||(0,import_ag_charts_core9.isString)(t)||(0,import_ag_charts_core9.isDate)(t)?{value:t,groupPercentage:0}:t??{value:void 0,groupPercentage:0}}function getGroupingValue(t){return getGrouping(t)?.value}var{clampArray}=import_ag_charts_community17._ModuleSupport;function convertLine(t,e){if(t.start==null||t.end==null)return;const i=convertPoint(t.start,e),o=convertPoint(t.end,e);if(!(i==null||o==null))return{x1:i.x,y1:i.y,x2:o.x,y2:o.y}}function convertPoint(t,e){const i=convert(t.x,e.xAxis),o=convert(t.y,e.yAxis);return{x:i,y:o}}function convert(t,e){if(t==null)return 0;const{value:i,groupPercentage:o}=getGrouping(t),{scale:s,snapToGroup:a}=e,r=s.bandwidth===0?s.step??0:s.bandwidth??0,n=a?r/2:r*o;return s.convert(i)+n}function invertCoords(t,e){const i=invert(t.x,e.xAxis),o=invert(t.y,e.yAxis);return{x:i,y:o}}function invert(t,e){const{scale:i}=e;if(e.continuous&&i.step==null)return e.scaleInvert(t);const o=e.scaleInvertNearest(t),s=i.bandwidth===0?i.step:i.bandwidth??0,a=i.convert(o),r=a+s,n=clampArray(t,i.range),l=a===r?0:(n-a)/(r-a);return{value:o,groupPercentage:l}}var import_ag_charts_community18=require("ag-charts-community"),{BaseProperties:BaseProperties4}=import_ag_charts_community18._ModuleSupport,StartEndProperties=class extends Annotation(Line2(Handle(BaseProperties4))){constructor(){super(...arguments),this.snapToAngle=45}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){}getDefaultOpacity(t){}},{STRING:STRING3,TempValidate:TempValidate13}=import_ag_charts_community19._ModuleSupport,TextualStartEndProperties=class extends Localisable(Label(Font(StartEndProperties))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;let e=this.text;return t&&(e=this.placeholderText??"",this.localeManager&&(e=this.localeManager.t(e))),{text:e,isPlaceholder:t}}getTextInputCoords(t,e){return convertPoint(this.end,t)}getTextPosition(){return this.position}};__decorateClass([TempValidate13(STRING3)],TextualStartEndProperties.prototype,"text",2);var{STRING:STRING4,TempValidate:TempValidate14,Color}=import_ag_charts_community20._ModuleSupport,DEFAULT_CALLOUT_PADDING={top:6,right:12,bottom:9,left:12},CalloutProperties=class extends Fill(Stroke(TextualStartEndProperties)){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(t){return(0,import_ag_charts_core10.isObject)(t)&&t.type==="callout"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=Color.fromString(this.color??"#888888");return new Color(t,e,i,.66).toString()}getPadding(){const{padding:t}=this;return t==null?{...DEFAULT_CALLOUT_PADDING}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),o=this.getPadding(),s=o.left??0,a=o.bottom??0;return{x:i.x+s,y:i.y-a}}};__decorateClass([TempValidate14(STRING4)],CalloutProperties.prototype,"type",2);var import_ag_charts_community22=require("ag-charts-community"),import_ag_charts_core11=require("ag-charts-core"),import_ag_charts_community21=require("ag-charts-community"),{STRING:STRING5,BaseProperties:BaseProperties5,TempValidate:TempValidate15}=import_ag_charts_community21._ModuleSupport,TextualPointProperties=class extends Annotation(Point(Handle(Label(Font(BaseProperties5))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){return this.color}getDefaultOpacity(t){}getPlaceholderColor(){}getPadding(){const{padding:t=0}=this;return{top:t,right:t,bottom:t,left:t}}getText(){const t=this.text.length==0;return{text:t?this.placeholderText??"":this.text,isPlaceholder:t}}getTextInputCoords(t,e){return convertPoint(this,t)}getTextPosition(){return this.position}};__decorateClass([TempValidate15(STRING5)],TextualPointProperties.prototype,"text",2);var{STRING:STRING6,TempValidate:TempValidate16,Color:Color2}=import_ag_charts_community22._ModuleSupport,DEFAULT_COMMENT_PADDING={top:8,right:14,bottom:8,left:14},CommentProperties=class extends Fill(Stroke(TextualPointProperties)){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(t){return(0,import_ag_charts_core11.isObject)(t)&&t.type==="comment"}getDefaultColor(t){switch(t){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:t,g:e,b:i}=Color2.fromString(this.color??"#888888");return new Color2(t,e,i,.66).toString()}getPadding(){const{padding:t,fontSize:e}=this;return t==null?{top:Math.max(e*.4,DEFAULT_COMMENT_PADDING.top),bottom:Math.max(e*.4,DEFAULT_COMMENT_PADDING.bottom),left:Math.max(e*.8,DEFAULT_COMMENT_PADDING.left),right:Math.max(e*.8,DEFAULT_COMMENT_PADDING.right)}:{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const i=super.getTextInputCoords(t,e),o=this.getPadding();return{x:i.x+o.left,y:i.y-o.bottom}}};__decorateClass([TempValidate16(STRING6)],CommentProperties.prototype,"type",2);var import_ag_charts_community24=require("ag-charts-community"),import_ag_charts_core12=require("ag-charts-core"),import_ag_charts_community23=require("ag-charts-community"),{Vec2}=import_ag_charts_community23._ModuleSupport;function getLineStyle(t,e){return t?"dashed":e??"solid"}function getComputedLineDash(t,e){switch(e){case"solid":return[];case"dashed":return[t*4,t*2];case"dotted":return[0,t*2]}}function getLineDash(t,e,i,o){const s=getLineStyle(t,i);return e??t??getComputedLineDash(o??1,s)}function getLineCap(t,e,i){const o=getLineStyle(e,i);return t??o==="dotted"?"round":void 0}function boundsIntersections(t,e){const[i,o]=Vec2.from(t),s=e.height,a=Vec2.gradient(o,i,s),r=Vec2.intercept(o,a,s),n=[{x:i.x,y:s??0},{x:i.x,y:s==null?e.height:s-e.height}];if(a===1/0)return n;let l=[Vec2.intersectAtY(a,r,0,s),Vec2.intersectAtY(a,r,e.height,s),Vec2.intersectAtX(a,r,0,s),Vec2.intersectAtX(a,r,e.width,s)];return l=l.filter(c=>c.x>=e.x&&c.x<=e.width&&c.y>=e.y&&c.y<=e.height).sort((c,h)=>c.x===h.x?0:c.x<h.x?-1:1),l.length!==2?n:l}var{BOOLEAN:BOOLEAN6,OBJECT:OBJECT5,STRING:STRING7,BaseProperties:BaseProperties6,TempValidate:TempValidate17}=import_ag_charts_community24._ModuleSupport,MeasurerStatisticsDivider=class extends Stroke(BaseProperties6){},MeasurerStatistics=class extends Font(Fill(Stroke(BaseProperties6))){constructor(){super(...arguments),this.divider=new MeasurerStatisticsDivider}};__decorateClass([TempValidate17(OBJECT5,{optional:!0})],MeasurerStatistics.prototype,"divider",2);var MeasurerDirectionProperties=class extends Fill(Stroke(Handle(BaseProperties6))){constructor(){super(...arguments),this.statistics=new MeasurerStatistics}};__decorateClass([TempValidate17(OBJECT5,{optional:!0})],MeasurerDirectionProperties.prototype,"statistics",2);var MeasurerTypeProperties=class extends Localisable(Background(Stroke(LineStyle(StartEndProperties)))){constructor(){super(...arguments),this.direction="both",this.hasDateRange=!1,this.hasPriceRange=!1,this.statistics=new MeasurerStatistics,this.getVolume=()=>{},this.text=new LineTextProperties}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return getLineDash(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return getLineCap(this.lineCap,this.lineDash,this.lineStyle)}};__decorateClass([TempValidate17(OBJECT5,{optional:!0})],MeasurerTypeProperties.prototype,"statistics",2),__decorateClass([TempValidate17(OBJECT5,{optional:!0})],MeasurerTypeProperties.prototype,"text",2);function DateRange(t){class e extends t{constructor(){super(...arguments),this.hasDateRange=!0}}return e}function PriceRange(t){class e extends t{constructor(){super(...arguments),this.hasPriceRange=!0}}return e}var DateRangeProperties=class extends DateRange(MeasurerTypeProperties){constructor(){super(...arguments),this.type="date-range",this.direction="horizontal"}static is(t){return(0,import_ag_charts_core12.isObject)(t)&&t.type==="date-range"}};__decorateClass([TempValidate17(STRING7)],DateRangeProperties.prototype,"type",2),__decorateClass([TempValidate17(BOOLEAN6,{optional:!0})],DateRangeProperties.prototype,"extendAbove",2),__decorateClass([TempValidate17(BOOLEAN6,{optional:!0})],DateRangeProperties.prototype,"extendBelow",2);var PriceRangeProperties=class extends PriceRange(MeasurerTypeProperties){constructor(){super(...arguments),this.type="price-range",this.direction="vertical"}static is(t){return(0,import_ag_charts_core12.isObject)(t)&&t.type==="price-range"}};__decorateClass([TempValidate17(STRING7)],PriceRangeProperties.prototype,"type",2),__decorateClass([TempValidate17(BOOLEAN6,{optional:!0})],PriceRangeProperties.prototype,"extendLeft",2),__decorateClass([TempValidate17(BOOLEAN6,{optional:!0})],PriceRangeProperties.prototype,"extendRight",2);var DatePriceRangeProperties=class extends DateRange(PriceRange(MeasurerTypeProperties)){constructor(){super(...arguments),this.type="date-price-range",this.direction="both"}static is(t){return(0,import_ag_charts_core12.isObject)(t)&&t.type==="date-price-range"}};__decorateClass([TempValidate17(STRING7)],DatePriceRangeProperties.prototype,"type",2);var QuickDatePriceRangeProperties=class extends DateRange(PriceRange(MeasurerTypeProperties)){constructor(){super(...arguments),this.type="quick-date-price-range",this.up=new MeasurerDirectionProperties,this.down=new MeasurerDirectionProperties,this.direction="both"}static is(t){return(0,import_ag_charts_core12.isObject)(t)&&t.type==="quick-date-price-range"}};__decorateClass([TempValidate17(STRING7)],QuickDatePriceRangeProperties.prototype,"type",2),__decorateClass([TempValidate17(OBJECT5,{optional:!0})],QuickDatePriceRangeProperties.prototype,"up",2),__decorateClass([TempValidate17(OBJECT5,{optional:!0})],QuickDatePriceRangeProperties.prototype,"down",2);var import_ag_charts_community26=require("ag-charts-community"),import_ag_charts_core13=require("ag-charts-core"),import_ag_charts_community25=require("ag-charts-community"),{TextWrapper:TextWrapper2,CachedTextMeasurerPool,BBox:BBox2}=import_ag_charts_community25._ModuleSupport,ANNOTATION_TEXT_LINE_HEIGHT=1.38;function getTextWrapOptions(t){return{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},textAlign:t.textAlign,textBaseline:t.position=="center"?"middle":t.position,lineHeight:ANNOTATION_TEXT_LINE_HEIGHT,avoidOrphans:!1,textWrap:"always"}}function wrapText(t,e,i){return i?TextWrapper2.wrapText(e,{...getTextWrapOptions(t),maxWidth:i}):e}function measureAnnotationText(t,e){const i=getTextWrapOptions(t),{lineMetrics:o,width:s}=CachedTextMeasurerPool.measureLines(e,i),a=o.length*(t.fontSize??14)*ANNOTATION_TEXT_LINE_HEIGHT;return{width:s,height:a}}function getBBox(t,e,i,o){let s=o?.width??0,a=o?.height??0;if(!o){const r=t.width!=null?wrapText(t,e,t.width):e;({width:s,height:a}=measureAnnotationText(t,r))}return new BBox2(i.x,i.y,s,a)}function updateTextNode(t,e,i,o,{x:s,y:a},r){const{visible:n=!0,fontFamily:l,fontSize:c=14,fontStyle:h,fontWeight:u,textAlign:p}=o,d=c*ANNOTATION_TEXT_LINE_HEIGHT;r??(r=o.position=="center"?"middle":o.position);const g=i?o.getPlaceholderColor():o.color;t.setProperties({x:s,y:a,visible:n,text:e,fill:g,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u,textAlign:p,lineHeight:d,textBaseline:r})}var{OBJECT:OBJECT6,STRING:STRING8,BaseProperties:BaseProperties7,TempValidate:TempValidate18}=import_ag_charts_community26._ModuleSupport,DEFAULT_NOTE_PADDING=10,HANDLE_SIZE=11,ICON_HEIGHT=20,ICON_WIDTH=22,ICON_SPACING=10,LABEL_OFFSET=ICON_HEIGHT+ICON_SPACING,TOOLBAR_OFFSET=34,NoteBackgroundProperties=class extends Fill(Stroke(BaseProperties7)){},NoteProperties=class extends Fill(Stroke(TextualPointProperties)){constructor(){super(...arguments),this.type="note",this.background=new NoteBackgroundProperties,this.position="bottom",this.alignment="center",this.width=200}static is(t){return(0,import_ag_charts_core13.isObject)(t)&&t.type==="note"}getDefaultColor(t){switch(t){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(t){switch(t){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){const t=this.padding??DEFAULT_NOTE_PADDING;return{top:t,right:t,bottom:t,left:t}}getTextInputCoords(t,e){const{width:i,text:o}=this,s=super.getTextInputCoords(t,e),a=this.getPadding().top,r=getBBox(this,o,s);r.x=(0,import_ag_charts_core13.clamp)(i/2,r.x,t.seriesRect.width-i/2);const n=r.y-LABEL_OFFSET-a*2,l=r.y+HANDLE_SIZE+a*2,c=Math.max(r.height,e);return n-c-TOOLBAR_OFFSET<0?(r.y=l,this.position="top"):(r.y=n+a,this.position="bottom"),{x:r.x,y:r.y}}};__decorateClass([TempValidate18(STRING8)],NoteProperties.prototype,"type",2),__decorateClass([TempValidate18(OBJECT6,{optional:!0})],NoteProperties.prototype,"background",2);var import_ag_charts_community27=require("ag-charts-community"),{BaseProperties:BaseProperties8}=import_ag_charts_community27._ModuleSupport,PointProperties2=class extends Annotation(Point(Handle(BaseProperties8))){isValidWithContext(t,e){return super.isValid(e)}getDefaultColor(t){}getDefaultOpacity(t){}},ShapePointProperties=class St extends Fill(PointProperties2){constructor(){super(...arguments),this.size=32}static is(e){return e instanceof St}getDefaultColor(e){return e==="fill-color"?this.fill:void 0}getDefaultOpacity(e){return e==="fill-color"?this.fillOpacity:void 0}},import_ag_charts_community29=require("ag-charts-community"),import_ag_charts_core15=require("ag-charts-core"),import_ag_charts_community28=require("ag-charts-community"),import_ag_charts_core14=require("ag-charts-core"),{ContinuousScale:ContinuousScale2}=import_ag_charts_community28._ModuleSupport;function validateDatumLine(t,e,i={overflowContinuous:!1},o){let s=!0;return s&&(s=validateDatumPoint(t,e.start,i,o&&`${o}[start] `)),s&&(s=validateDatumPoint(t,e.end,i,o&&`${o}[end] `)),s}function validateDatumValue(t,e,i){const o=e.direction==="horizontal"?t.yAxis:t.xAxis,s=validateDatumPointDirection(e.value,o);if(!s&&i){const a=getGroupingValue(e.value);import_ag_charts_core14.Logger.warnOnce(`${i}is outside the axis domain, ignoring. - value: [${a}]]`)}return s}function validateDatumPoint(t,e,i={overflowContinuous:!1},o){if(e.x==null||e.y==null)return o&&import_ag_charts_core14.Logger.warnOnce(`${o}requires both an [x] and [y] property, ignoring.`),!1;const{xAxis:s,yAxis:a}=t,r=i.overflowContinuous&&ContinuousScale2.is(s.scale),n=i.overflowContinuous&&ContinuousScale2.is(a.scale),l=r||validateDatumPointDirection(e.x,s),c=n||validateDatumPointDirection(e.y,a);if(l&&c)return!0;if(o){let h="x & y domains";l&&(h="y domain"),c&&(h="x domain");const u=getGroupingValue(e.x),p=getGroupingValue(e.y);import_ag_charts_core14.Logger.warnOnce(`${o}is outside the ${h}, ignoring. - x: [${u}], y: ${p}]`)}return!1}function validateDatumPointDirection(t,e){const{domain:i}=e.scale,o=getGroupingValue(t);return i&&o!=null&&e.continuous?o>=i[0]&&o<=i.at(-1):!0}var{OBJECT:OBJECT7,STRING:STRING9,BaseProperties:BaseProperties9,TempValidate:TempValidate19}=import_ag_charts_community29._ModuleSupport,HorizontalLineProperties=class extends Annotation(Value(Handle(AxisLabel(Stroke(LineStyle(BaseProperties9)))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line",this.text=new LineTextProperties}static is(t){return(0,import_ag_charts_core15.isObject)(t)&&t.type==="horizontal-line"}isValidWithContext(t,e){return super.isValid(e)&&validateDatumValue(t,this,e)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return getLineDash(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return getLineCap(this.lineCap,this.lineDash,this.lineStyle)}};__decorateClass([TempValidate19(STRING9)],HorizontalLineProperties.prototype,"type",2),__decorateClass([TempValidate19(OBJECT7,{optional:!0})],HorizontalLineProperties.prototype,"text",2);var VerticalLineProperties=class extends Annotation(Value(Handle(AxisLabel(Stroke(LineStyle(BaseProperties9)))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line",this.text=new LineTextProperties}static is(t){return(0,import_ag_charts_core15.isObject)(t)&&t.type==="vertical-line"}isValidWithContext(t,e){return super.isValid(e)&&validateDatumValue(t,this,e)}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return getLineDash(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return getLineCap(this.lineCap,this.lineDash,this.lineStyle)}};__decorateClass([TempValidate19(STRING9)],VerticalLineProperties.prototype,"type",2),__decorateClass([TempValidate19(OBJECT7,{optional:!0})],VerticalLineProperties.prototype,"text",2);var import_ag_charts_community30=require("ag-charts-community"),import_ag_charts_core16=require("ag-charts-core"),{NUMBER:NUMBER6,OBJECT:OBJECT8,STRING:STRING10,BaseProperties:BaseProperties10,TempValidate:TempValidate20}=import_ag_charts_community30._ModuleSupport,DisjointChannelProperties=class extends Annotation(Background(Line2(Handle(Extendable(Stroke(LineStyle(BaseProperties10))))))){constructor(){super(...arguments),this.type="disjoint-channel",this.text=new ChannelTextProperties,this.snapToAngle=45}static is(t){return(0,import_ag_charts_core16.isObject)(t)&&t.type==="disjoint-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.startHeight,t.end.y-=this.endHeight):import_ag_charts_core16.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&validateDatumLine(t,this,{overflowContinuous:!0},e)&&validateDatumLine(t,this.bottom,{overflowContinuous:!0},e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return getLineDash(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return getLineCap(this.lineCap,this.lineDash,this.lineStyle)}};__decorateClass([TempValidate20(STRING10)],DisjointChannelProperties.prototype,"type",2),__decorateClass([TempValidate20(NUMBER6)],DisjointChannelProperties.prototype,"startHeight",2),__decorateClass([TempValidate20(NUMBER6)],DisjointChannelProperties.prototype,"endHeight",2),__decorateClass([TempValidate20(OBJECT8,{optional:!0})],DisjointChannelProperties.prototype,"text",2);var import_ag_charts_community33=require("ag-charts-community"),import_ag_charts_core19=require("ag-charts-core"),import_ag_charts_community32=require("ag-charts-community"),import_ag_charts_core18=require("ag-charts-core"),import_ag_charts_community31=require("ag-charts-community"),import_ag_charts_core17=require("ag-charts-core"),{OBJECT:OBJECT9,STRING:STRING11,TempValidate:TempValidate21}=import_ag_charts_community31._ModuleSupport,LineTypeProperties=class extends Localisable(Cappable(Extendable(Stroke(LineStyle(StartEndProperties))))){constructor(){super(...arguments),this.text=new LineTextProperties}isValidWithContext(t,e){return super.isValid(e)&&validateDatumLine(t,this,void 0,e)}getDefaultColor(t){switch(t){case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return getLineDash(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return getLineCap(this.lineCap,this.lineDash,this.lineStyle)}};__decorateClass([TempValidate21(OBJECT9,{optional:!0})],LineTypeProperties.prototype,"text",2);var ArrowProperties=class extends LineTypeProperties{constructor(){super(...arguments),this.type="arrow",this.endCap="arrow"}static is(t){return(0,import_ag_charts_core17.isObject)(t)&&t.type==="arrow"}};__decorateClass([TempValidate21(STRING11)],ArrowProperties.prototype,"type",2);var LineProperties=class extends LineTypeProperties{constructor(){super(...arguments),this.type="line"}static is(t){return(0,import_ag_charts_core17.isObject)(t)&&t.type==="line"}};__decorateClass([TempValidate21(STRING11)],LineProperties.prototype,"type",2);var{OBJECT:OBJECT10,BOOLEAN:BOOLEAN7,COLOR_STRING:COLOR_STRING3,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY2,TempValidate:TempValidate22,predicateWithMessage:predicateWithMessage2}=import_ag_charts_community32._ModuleSupport,fibonacciBands=[10,6,4],FIBONACCI_BANDS=predicateWithMessage2(t=>(0,import_ag_charts_core18.isFiniteNumber)(t)&&fibonacciBands.includes(t),"Number of fibonacci ranges, 10, 6 or 4"),FibonacciProperties=class extends LineTypeProperties{constructor(){super(...arguments),this.label=new LabelTextProperties,this.reverse=!1,this.showFill=!0,this.isMultiColor=!0,this.strokes=[],this.bands=10}getDefaultColor(t){switch(t){case"line-color":return this.rangeStroke??this.stroke;case"text-color":return this.text.color}}};__decorateClass([TempValidate22(OBJECT10,{optional:!0})],FibonacciProperties.prototype,"label",2),__decorateClass([TempValidate22(BOOLEAN7,{optional:!0})],FibonacciProperties.prototype,"reverse",2),__decorateClass([TempValidate22(BOOLEAN7,{optional:!0})],FibonacciProperties.prototype,"showFill",2),__decorateClass([TempValidate22(BOOLEAN7,{optional:!0})],FibonacciProperties.prototype,"isMultiColor",2),__decorateClass([TempValidate22(COLOR_STRING_ARRAY2,{optional:!0})],FibonacciProperties.prototype,"strokes",2),__decorateClass([TempValidate22(COLOR_STRING3,{optional:!0})],FibonacciProperties.prototype,"rangeStroke",2),__decorateClass([TempValidate22(FIBONACCI_BANDS,{optional:!0})],FibonacciProperties.prototype,"bands",2);var{STRING:STRING12,OBJECT:OBJECT11,TempValidate:TempValidate23}=import_ag_charts_community33._ModuleSupport,FibonacciRetracementTrendBasedProperties=class extends FibonacciProperties{constructor(){super(...arguments),this.type="fibonacci-retracement-trend-based",this.endRetracement=new PointProperties}static is(t){return(0,import_ag_charts_core19.isObject)(t)&&t.type==="fibonacci-retracement-trend-based"}isValidWithContext(t,e){return validateDatumLine(t,this,{overflowContinuous:!0},e)}};__decorateClass([TempValidate23(STRING12)],FibonacciRetracementTrendBasedProperties.prototype,"type",2),__decorateClass([TempValidate23(OBJECT11)],FibonacciRetracementTrendBasedProperties.prototype,"endRetracement",2);var import_ag_charts_community34=require("ag-charts-community"),import_ag_charts_core20=require("ag-charts-core"),{STRING:STRING13,TempValidate:TempValidate24}=import_ag_charts_community34._ModuleSupport,FibonacciRetracementProperties=class extends FibonacciProperties{constructor(){super(...arguments),this.type="fibonacci-retracement"}static is(t){return(0,import_ag_charts_core20.isObject)(t)&&t.type==="fibonacci-retracement"}isValidWithContext(t,e){return validateDatumLine(t,this,{overflowContinuous:!0},e)}};__decorateClass([TempValidate24(STRING13)],FibonacciRetracementProperties.prototype,"type",2);var import_ag_charts_community35=require("ag-charts-community"),import_ag_charts_core21=require("ag-charts-core"),{NUMBER:NUMBER7,STRING:STRING14,OBJECT:OBJECT12,BaseProperties:BaseProperties11,TempValidate:TempValidate25}=import_ag_charts_community35._ModuleSupport,ParallelChannelProperties=class extends Annotation(Background(Line2(Handle(Extendable(Stroke(LineStyle(BaseProperties11))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new ChannelAnnotationMiddleProperties,this.text=new ChannelTextProperties,this.snapToAngle=45}static is(t){return(0,import_ag_charts_core21.isObject)(t)&&t.type==="parallel-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.height,t.end.y-=this.height):import_ag_charts_core21.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&validateDatumLine(t,this,{overflowContinuous:!0},e)&&validateDatumLine(t,this.bottom,{overflowContinuous:!0},e)}getDefaultColor(t){switch(t){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(t){switch(t){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return getLineDash(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return getLineCap(this.lineCap,this.lineDash,this.lineStyle)}};__decorateClass([TempValidate25(STRING14)],ParallelChannelProperties.prototype,"type",2),__decorateClass([TempValidate25(NUMBER7)],ParallelChannelProperties.prototype,"height",2),__decorateClass([TempValidate25(OBJECT12,{optional:!0})],ParallelChannelProperties.prototype,"middle",2),__decorateClass([TempValidate25(OBJECT12,{optional:!0})],ParallelChannelProperties.prototype,"text",2);var import_ag_charts_community36=require("ag-charts-community"),import_ag_charts_core22=require("ag-charts-core"),{STRING:STRING15,TempValidate:TempValidate26}=import_ag_charts_community36._ModuleSupport,TextProperties=class extends TextualPointProperties{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(t){return(0,import_ag_charts_core22.isObject)(t)&&t.type==="text"}};__decorateClass([TempValidate26(STRING15)],TextProperties.prototype,"type",2);function isEphemeralType(t){return QuickDatePriceRangeProperties.is(t)}function isLineType(t){return LineProperties.is(t)||HorizontalLineProperties.is(t)||VerticalLineProperties.is(t)||ArrowProperties.is(t)||isFibonacciType(t)}function isChannelType(t){return DisjointChannelProperties.is(t)||ParallelChannelProperties.is(t)}function isFibonacciType(t){return FibonacciRetracementProperties.is(t)||FibonacciRetracementTrendBasedProperties.is(t)}function isTextType(t){return CalloutProperties.is(t)||CommentProperties.is(t)||NoteProperties.is(t)||TextProperties.is(t)}function isMeasurerType(t){return DateRangeProperties.is(t)||PriceRangeProperties.is(t)||DatePriceRangeProperties.is(t)||QuickDatePriceRangeProperties.is(t)}function hasFontSize(t){return isTextType(t)&&!NoteProperties.is(t)}function hasLineStyle(t){return isLineType(t)||isChannelType(t)||isMeasurerType(t)&&!QuickDatePriceRangeProperties.is(t)}function hasLineColor(t){return isLineType(t)||isChannelType(t)||isMeasurerType(t)||CalloutProperties.is(t)||NoteProperties.is(t)}function hasIconColor(t){return NoteProperties.is(t)}function hasFillColor(t){return isChannelType(t)||isMeasurerType(t)||CalloutProperties.is(t)||CommentProperties.is(t)||ShapePointProperties.is(t)}function hasTextColor(t){return isTextType(t)&&!NoteProperties.is(t)}function hasLineText(t){return(isLineType(t)||isChannelType(t)||isMeasurerType(t))&&!isEphemeralType(t)&&(0,import_ag_charts_core23.isObject)(t.text)}function setFontSize(t,e){"fontSize"in t&&(t.fontSize=e),hasLineText(t)&&(t.text.fontSize=e)}function setLineStyle(t,e){const i=e?.strokeWidth??t.strokeWidth??1,o=e?.type??t.lineStyle,s=o??getLineStyle(t.lineDash,o),a=getComputedLineDash(i,s);t.strokeWidth=i,t.computedLineDash=a,t.lineStyle=s,t.lineCap=s==="dotted"?"round":void 0}function setColor(t,e,i,o,s,a){switch(e){case"fill-color":{"fill"in t&&(t.fill=o),"fillOpacity"in t&&(t.fillOpacity=s),"background"in t&&(t.background.fill=o,t.background.fillOpacity=s);break}case"line-color":{"axisLabel"in t&&(t.axisLabel.fill=o,t.axisLabel.fillOpacity=s,t.axisLabel.stroke=o,t.axisLabel.strokeOpacity=s),"fill"in t&&"fillOpacity"in t&&hasIconColor(t)?(t.fill=o,t.fillOpacity=s):("strokeOpacity"in t&&(t.strokeOpacity=s),"isMultiColor"in t&&"rangeStroke"in t?(t.isMultiColor=a,t.rangeStroke=o):"stroke"in t&&(t.stroke=o));break}case"text-color":{"color"in t&&(t.color=i),hasLineText(t)&&(t.text.color=o);break}}}var{deepClone}=import_ag_charts_community37._ModuleSupport,AnnotationDefaults=class{constructor(){this.mementoOriginatorKey="annotation-defaults",this.colors=new Map(Object.values(AnnotationType).map(t=>[t,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])])),this.fontSizes=new Map([["callout",void 0],["comment",void 0],["text",void 0],["arrow",void 0],["line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineStyles=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextAlignments=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextPositions=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.fibonacciOptions=new Map([["fibonacci-retracement",{bands:void 0,reverse:void 0,showFill:void 0}],["fibonacci-retracement-trend-based",{bands:void 0,reverse:void 0,showFill:void 0}]])}createMemento(){return{colors:deepClone(this.colors),fontSizes:deepClone(this.fontSizes),lineStyles:deepClone(this.lineStyles),lineTextAlignments:deepClone(this.lineTextAlignments),lineTextPositions:deepClone(this.lineTextPositions),fibonacciOptions:deepClone(this.fibonacciOptions)}}guardMemento(t){return!0}restoreMemento(t,e,i){this.colors=deepClone(i.colors),this.fontSizes=deepClone(i.fontSizes),this.lineStyles=deepClone(i.lineStyles),this.lineTextAlignments=deepClone(i.lineTextAlignments),this.lineTextPositions=deepClone(i.lineTextPositions),this.fibonacciOptions=deepClone(i.fibonacciOptions)}setDefaultColor(t,e,i,o,s,a){this.colors.get(t)?.set(e,[i,o,s,a])}setDefaultFontSize(t,e){this.fontSizes.set(t,e)}setDefaultLineStyleType(t,e){const i=this.lineStyles.get(t);i?i.type=e:this.lineStyles.set(t,{type:e})}setDefaultLineStyleWidth(t,e){const i=this.lineStyles.get(t);i?i.strokeWidth=e:this.lineStyles.set(t,{strokeWidth:e})}setDefaultLineTextAlignment(t,e){this.lineTextAlignments.set(t,e)}setDefaultLineTextPosition(t,e){this.lineTextPositions.set(t,e)}setDefaultFibonacciOptions(t,e,i){if(t!="fibonacci-retracement"&&t!="fibonacci-retracement-trend-based")return;const o=this.fibonacciOptions.get(t);o[e]=i,this.fibonacciOptions.set(t,o)}applyDefaults(t){for(const[e,i]of this.colors)if(t.type===e)for(const[o,[s,a,r,n]=[]]of i)s&&a&&r!=null&&n!=null&&setColor(t,o,s,a,r,n);for(const[e,i]of this.fontSizes)t.type!==e||i==null||setFontSize(t,i);for(const[e,i]of this.lineStyles)t.type!==e||i==null||setLineStyle(t,i);for(const[e,i]of this.lineTextPositions)t.type!==e||i==null||(t.text.position=i);for(const[e,i]of this.lineTextAlignments)t.type!==e||i==null||(t.text.alignment=i);for(const[e,i]of this.fibonacciOptions)t.type!==e||i==null||Object.keys(i).forEach(o=>{const s=i[o];s!=null&&t.set({[o]:s})})}},import_ag_charts_community40=require("ag-charts-community"),import_ag_charts_community38=require("ag-charts-community"),import_ag_charts_core24=require("ag-charts-core"),colorPickerTemplate_default='<div class="ag-charts-color-picker__palette" tabindex="0"></div><div class="ag-charts-color-picker__color-row"><button class="ag-charts-color-picker__multi-color-button" tabindex="0" type="button"></button> <input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"></div><input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field"><span class="ag-charts-color-picker__color-label">Color</span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label>',{Color:Color3}=import_ag_charts_community38._ModuleSupport,getHsva=t=>{try{const e=Color3.fromString(t),[i,o,s]=e.toHSB();return[i,o,s,e.a]}catch{return}},ColorPicker=class extends import_ag_charts_community38._ModuleSupport.AnchoredPopover{constructor(t,e){super(t,"color-picker",e),this.hasChanged=!1,this.hideFns.push(()=>{this.hasChanged&&this.onChangeHide?.()})}show(t){this.hasChanged=!1,this.onChangeHide=t.onChangeHide;const{element:e,initialFocus:i}=this.createColorPicker(t),o=this.showWithChildren([e],{initialFocus:i,...t});o.classList.add("ag-charts-color-picker"),o.setAttribute("role","dialog")}createColorPicker(t){let e=t.isMultiColor??!1,[i,o,s,a]=getHsva(t.color??"#f00")??[0,1,.5,1];a=t.opacity??a;const r=(0,import_ag_charts_core24.createElement)("div","ag-charts-color-picker__content");r.innerHTML=colorPickerTemplate_default,r.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const n=r.querySelector(".ag-charts-color-picker__palette"),l=r.querySelector(".ag-charts-color-picker__hue-input"),c=r.querySelector(".ag-charts-color-picker__multi-color-button"),h=r.querySelector(".ag-charts-color-picker__alpha-input"),u=r.querySelector(".ag-charts-color-picker__color-input"),p=r.querySelector(".ag-charts-color-picker__color-label");c.classList.toggle("ag-charts-color-picker__multi-color-button--hidden",!t.hasMultiColorOption);const d=(m=!0)=>{const x=Color3.fromHSB(i,o,s,a).toHexString();if(r.style.setProperty("--h",`${i}`),r.style.setProperty("--s",`${o}`),r.style.setProperty("--v",`${s}`),r.style.setProperty("--a",`${a}`),r.style.setProperty("--color",x.slice(0,7)),r.style.setProperty("--color-a",x),l.value=`${i}`,h.value=`${a}`,h.classList.toggle("ag-charts-color-picker__alpha-input--opaque",a===1),c.classList.toggle("ag-charts-color-picker__multi-color-button--active",e),p.classList.toggle("ag-charts-color-picker__color-label--multi-color",e),document.activeElement!==u&&(u.value=e?"Multi Colour":x.toUpperCase()),m||t.color==null){const S=Color3.fromHSB(i,o,s,1).toHexString();t.onChange?.(x,S,a,e)}m&&(this.hasChanged=!0)};d(!1);const g=m=>m.preventDefault(),f=m=>m.stopPropagation(),y=m=>{m.preventDefault();const b=m.currentTarget;b.focus();const x=b.getBoundingClientRect(),S=({clientX:T,clientY:D})=>{e=!1,o=Math.min(Math.max((T-x.left)/x.width,0),1),s=1-Math.min(Math.max((D-x.top)/x.height,0),1),d()},v=()=>{window.removeEventListener("pointermove",S)};S(m),window.addEventListener("pointermove",S),window.addEventListener("pointerup",v,{once:!0})};return r.addEventListener("mousedown",f),r.addEventListener("touchstart",f),r.addEventListener("touchmove",f),r.addEventListener("keydown",m=>{switch(m.stopPropagation(),m.key){case"Enter":case"Escape":this.hide();break;default:return}m.preventDefault()}),n.addEventListener("pointerdown",y),n.addEventListener("touchstart",g,{passive:!1}),n.addEventListener("touchmove",g,{passive:!1}),n.addEventListener("keydown",m=>{if(m.key==="ArrowLeft")o=(0,import_ag_charts_core24.clamp)(0,o-.01,1);else if(m.key==="ArrowRight")o=(0,import_ag_charts_core24.clamp)(0,o+.01,1);else if(m.key==="ArrowUp")s=(0,import_ag_charts_core24.clamp)(0,s+.01,1);else if(m.key==="ArrowDown")s=(0,import_ag_charts_core24.clamp)(0,s-.01,1);else return;m.preventDefault(),d()}),c.addEventListener("click",()=>{e=!e,d()}),l.addEventListener("input",m=>{e=!1,i=m.currentTarget.valueAsNumber??0,d()}),h.addEventListener("input",m=>{e=!1,a=m.currentTarget.valueAsNumber??0,d()}),u.addEventListener("input",m=>{e=!1;const b=getHsva(m.currentTarget.value);b!=null&&([i,o,s,a]=b,d())}),u.addEventListener("blur",()=>d()),u.addEventListener("keydown",m=>{m.key==="Enter"&&(m.currentTarget.blur(),d())}),{element:r,initialFocus:n}}},import_ag_charts_community39=require("ag-charts-community");function channelMenuItemVisible(t){return!(t instanceof import_ag_charts_community39._ModuleSupport.LogScale)&&!(t instanceof import_ag_charts_community39._ModuleSupport.BandScale)}var LINE_ANNOTATION_ITEMS=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel",visible:channelMenuItemVisible},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel",visible:channelMenuItemVisible}],FIBONACCI_ANNOTATION_ITEMS=[{label:"toolbarAnnotationsFibonacciRetracement",icon:"fibonacci-retracement-drawing",value:"fibonacci-retracement"},{label:"toolbarAnnotationsFibonacciRetracementTrendBased",icon:"fibonacci-retracement-trend-based-drawing",value:"fibonacci-retracement-trend-based"}],FIBONACCI_RATIO_ITEMS=[{label:"Fibonacci - Extended",value:10},{label:"Fibonacci - 6 Band",value:6},{label:"Fibonacci - 4 Band",value:4}],TEXT_ANNOTATION_ITEMS=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],SHAPE_ANNOTATION_ITEMS=[{label:"toolbarAnnotationsArrow",icon:"arrow-drawing",value:"arrow"},{label:"toolbarAnnotationsArrowUp",icon:"arrow-up-drawing",value:"arrow-up"},{label:"toolbarAnnotationsArrowDown",icon:"arrow-down-drawing",value:"arrow-down"}],MEASURER_ANNOTATION_ITEMS=[{label:"toolbarAnnotationsQuickDatePriceRange",icon:"measurer-drawing",value:"quick-date-price-range"},{label:"toolbarAnnotationsDateRange",icon:"date-range-drawing",value:"date-range"},{label:"toolbarAnnotationsPriceRange",icon:"price-range-drawing",value:"price-range"},{label:"toolbarAnnotationsDatePriceRange",icon:"date-price-range-drawing",value:"date-price-range"}],LINE_STROKE_WIDTH_ITEMS=[{strokeWidth:1,label:"1",value:1},{strokeWidth:2,label:"2",value:2},{strokeWidth:3,label:"3",value:3},{strokeWidth:4,label:"4",value:4},{strokeWidth:8,label:"8",value:8}],LINE_STYLE_TYPE_ITEMS=[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],TEXT_SIZE_ITEMS=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],{ARRAY:ARRAY2,BOOLEAN:BOOLEAN8,NUMBER:NUMBER8,OBJECT:OBJECT13,STRING:STRING16,UNION:UNION5,Color:Color4,FloatingToolbar,Listeners,Menu,PropertiesArray,ToolbarButtonProperties,ToolbarButtonWidget,TempValidate:TempValidate27}=import_ag_charts_community40._ModuleSupport,AnnotationOptionsButtonProperties=class extends ToolbarButtonProperties{constructor(){super(...arguments),this.checkedOverrides=new ToolbarButtonProperties}};__decorateClass([TempValidate27(UNION5(["line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings","lock"]))],AnnotationOptionsButtonProperties.prototype,"value",2),__decorateClass([TempValidate27(OBJECT13,{optional:!0})],AnnotationOptionsButtonProperties.prototype,"checkedOverrides",2),__decorateClass([TempValidate27(STRING16,{optional:!0})],AnnotationOptionsButtonProperties.prototype,"color",2),__decorateClass([TempValidate27(NUMBER8,{optional:!0})],AnnotationOptionsButtonProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate27(Boolean,{optional:!0})],AnnotationOptionsButtonProperties.prototype,"isMultiColor",2);var AnnotationOptionsButtonWidget=class extends ToolbarButtonWidget{update(t){super.update(t),t.value==="line-stroke-width"&&this.updateLineStrokeWidth(t),(t.value==="fill-color"||t.value==="line-color"||t.value==="text-color")&&this.updateFillColor(t)}updateFillColor(t){const e=this.getElement();e.classList.add("ag-charts-annotations__color-picker-button"),e.classList.toggle("ag-charts-annotations__color-picker-button--multi-color",t.isMultiColor),e.style.setProperty("--color",t.color??null)}updateLineStrokeWidth(t){const e=this.getElement();e.classList.add("ag-charts-annotations__stroke-width-button"),e.style.setProperty("--stroke-width",`${t.strokeWidth}px`)}},FloatingAnnotationOptionsToolbar=class extends FloatingToolbar{createButtonWidget(){return new AnnotationOptionsButtonWidget(this.localeManager)}},AnnotationOptionsToolbar=class extends import_ag_charts_community40._ModuleSupport.BaseProperties{constructor(t,e){super(),this.ctx=t,this.getActiveDatum=e,this.enabled=!0,this.buttons=new PropertiesArray(AnnotationOptionsButtonProperties),this.destroyFns=[],this.events=new Listeners,this.visibleButtons=[],this.toolbar=new FloatingAnnotationOptionsToolbar(this.ctx,"annotation-options"),this.colorPicker=new ColorPicker(this.ctx),this.textSizeMenu=new Menu(this.ctx,"text-size"),this.lineStyleTypeMenu=new Menu(this.ctx,"annotations-line-style-type"),this.lineStrokeWidthMenu=new Menu(this.ctx,"annotations-line-stroke-width"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("toolbar-moved",this.onToolbarMoved.bind(this)),t.widgets.seriesWidget.addListener("drag-start",this.onDragStart.bind(this)),t.widgets.seriesWidget.addListener("drag-end",this.onDragEnd.bind(this)),()=>this.colorPicker.destroy())}onDragStart(){this.toolbar.ignorePointerEvents()}onDragEnd(){this.toolbar.capturePointerEvents()}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}show(){this.enabled&&this.toolbar.show()}hide(){this.toolbar.hide()}updateButtons(t){if(!this.enabled)return;const e={"line-style-type":hasLineStyle(t),"line-stroke-width":hasLineStyle(t),"line-color":hasLineColor(t),"text-color":hasTextColor(t),"fill-color":hasFillColor(t),"text-size":hasFontSize(t),settings:hasLineText(t),lock:!0,delete:!0};this.visibleButtons=this.buttons.filter(i=>e[i.value]),this.toolbar.clearButtons(),this.toolbar.updateButtons(this.visibleButtons),this.refreshButtons(t)}setAnchorScene(t){this.toolbar.hasBeenDragged()||this.toolbar.setAnchor(t.getAnchor())}hideOverlays(){this.toolbar.clearActiveButton(),this.colorPicker.hide({lastFocus:null}),this.textSizeMenu.hide(),this.lineStyleTypeMenu.hide(),this.lineStrokeWidthMenu.hide(),this.dispatch("hid-overlays")}clearActiveButton(){this.toolbar.clearActiveButton()}updateColors(t){this.updateColorPickerColor("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),"isMultiColor"in t&&t?.isMultiColor),this.updateColorPickerColor("text-color",t.getDefaultColor("text-color"),t.getDefaultOpacity("text-color"),"isMultiColor"in t&&t?.isMultiColor)}updateColorPickerColor(t,e,i,o){if(e!=null&&i!=null){const{r:s,g:a,b:r}=Color4.fromString(e);e=Color4.fromArray([s,a,r,i]).toHexString()}this.updateButtonByValue(t,{color:e,isMultiColor:o})}updateFontSize(t){this.updateButtonByValue("text-size",{label:t!=null?String(t):void 0})}updateLineStyleType(t){this.updateButtonByValue("line-style-type",{icon:t.icon})}updateStrokeWidth(t){this.updateButtonByValue("line-stroke-width",{label:t.label,strokeWidth:t.value})}dispatch(t,e){this.events.dispatch(t,e)}onButtonPress({event:t,button:e}){const i=this.getActiveDatum();if(i)switch(this.hideOverlays(),e.value){case"line-style-type":{const o=hasLineStyle(i)?getLineStyle(i.lineDash,i.lineStyle):void 0;this.lineStyleTypeMenu.show({items:LINE_STYLE_TYPE_ITEMS,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStyle"),value:o,sourceEvent:t.sourceEvent,onPress:s=>this.onLineStyleTypeMenuPress(s,i),class:"ag-charts-annotations__line-style-type-menu"});break}case"line-stroke-width":{const o=hasLineStyle(i)?i.strokeWidth:void 0;this.lineStrokeWidthMenu.show({items:LINE_STROKE_WIDTH_ITEMS,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStrokeWidth"),value:o,sourceEvent:t.sourceEvent,onPress:s=>this.onLineStrokeWidthMenuPress(s,i),class:"ag-charts-annotations__line-stroke-width-menu"});break}case"line-color":case"fill-color":case"text-color":{this.toolbar.toggleActiveButtonByIndex(e.index),this.colorPicker.show({color:i?.getDefaultColor(e.value),opacity:i?.getDefaultOpacity(e.value),sourceEvent:t.sourceEvent,hasMultiColorOption:"isMultiColor"in i,isMultiColor:"isMultiColor"in i&&i?.isMultiColor,onChange:i!=null?this.onColorPickerChange.bind(this,e.value,i):void 0,onChangeHide:(o=>{this.dispatch("saved-color",{type:i.type,colorPickerType:e.value,color:i.getDefaultColor(o)})}).bind(this,e.value)});break}case"text-size":{const o=isTextType(i)?i.fontSize:void 0;this.textSizeMenu.show({items:TEXT_SIZE_ITEMS,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsTextSize"),value:o,sourceEvent:t.sourceEvent,onPress:s=>this.onTextSizeMenuPress(s,i),class:"ag-charts-annotations__text-size-menu"});break}case"delete":{this.dispatch("pressed-delete");break}case"lock":{i.locked=!i.locked,this.refreshButtons(i),this.dispatch("pressed-lock");break}case"settings":{this.toolbar.toggleActiveButtonByIndex(e.index),this.dispatch("pressed-settings",t);break}}}onToolbarMoved(t){const{buttonBounds:e,popoverBounds:i}=t,o={x:i.x,y:i.y+i.height+4},s={y:i.y-4};this.colorPicker.setAnchor(o,s);for(const[a,r]of e.entries()){const n=this.visibleButtons.at(a);if(!n)continue;const l={x:r.x,y:r.y+r.height-1},c={y:r.y};switch(n.value){case"line-stroke-width":this.lineStrokeWidthMenu.setAnchor(l,c);break;case"line-style-type":this.lineStyleTypeMenu.setAnchor(l,c);break;case"text-size":this.textSizeMenu.setAnchor(l,c);break}}}onColorPickerChange(t,e,i,o,s,a){this.dispatch("updated-color",{type:e.type,colorPickerType:t,colorOpacity:i,color:o,opacity:s,isMultiColor:a}),this.updateColorPickerColor(t,i,s,a)}onTextSizeMenuPress(t,e){if(!hasFontSize(e))return;const i=t.value;this.dispatch("updated-font-size",{type:e.type,fontSize:i}),this.textSizeMenu.hide(),this.updateFontSize(i)}onLineStyleTypeMenuPress(t,e){if(!hasLineStyle(e))return;const i=t.value;this.dispatch("updated-line-style",{type:e.type,lineStyleType:i}),this.lineStyleTypeMenu.hide(),this.updateLineStyleType(t)}onLineStrokeWidthMenuPress(t,e){if(!hasLineStyle(e))return;const i=t.value;this.dispatch("updated-line-width",{type:e.type,strokeWidth:i}),this.lineStrokeWidthMenu.hide(),this.updateStrokeWidth(t)}refreshButtons(t){const e=t.locked??!1;for(const[i,o]of this.visibleButtons.entries())o&&(o.value==="lock"?(this.toolbar.toggleSwitchCheckedByIndex(i,e),this.updateButtonByIndex(i,e?o.checkedOverrides.toJson():o.toJson())):this.toolbar.toggleButtonEnabledByIndex(i,!e));hasFontSize(t)&&this.updateFontSize(t.fontSize),this.updateColors(t),this.updateLineStyles(t)}updateLineStyles(t){if(!hasLineStyle(t))return;const e=t.strokeWidth??1,i=getLineStyle(t.lineDash,t.lineStyle);this.updateStrokeWidth({strokeWidth:e,value:e,label:String(e)}),this.updateLineStyleType(LINE_STYLE_TYPE_ITEMS.find(o=>o.value===i)??LINE_STYLE_TYPE_ITEMS[0])}updateButtonByValue(t,e){const i=this.visibleButtons.findIndex(o=>o.value===t);i!==-1&&this.updateButtonByIndex(i,e)}updateButtonByIndex(t,e){const i=this.visibleButtons.at(t);i&&this.toolbar.updateButtonByIndex(t,{...i.toJson(),...e,value:e.value??i.value})}};__decorateClass([TempValidate27(BOOLEAN8)],AnnotationOptionsToolbar.prototype,"enabled",2),__decorateClass([TempValidate27(ARRAY2)],AnnotationOptionsToolbar.prototype,"buttons",2);var import_ag_charts_community41=require("ag-charts-community"),{StateMachine,StateMachineProperty,Vec2:Vec22,Debug}=import_ag_charts_community41._ModuleSupport,DragStateMachine=class extends StateMachine{constructor(t){const e=({context:i})=>{this.node?.drag(this.datum,this.offset,i,this.snapping),t.update()};super("idle",{idle:{dragStart:{target:"dragging",action:({offset:i,context:o})=>{this.hasMoved=!1,this.dragStart=i,this.offset=i,this.node?.dragStart(this.datum,i,o)}}},dragging:{keyDown:e,keyUp:e,drag:({offset:i,context:o})=>{this.hasMoved=Vec22.lengthSquared(Vec22.sub(i,this.dragStart))>0,this.offset=i,this.node?.drag(this.datum,i,o,this.snapping),t.update()},dragEnd:{target:StateMachine.parent,action:()=>{this.node?.stopDragging(),this.hasMoved&&t.recordAction("Move annotation"),t.update()}}}}),this.debug=Debug.create(!0,"annotations"),this.hasMoved=!1,this.snapping=!1}};__decorateClass([StateMachineProperty()],DragStateMachine.prototype,"snapping",2),__decorateClass([StateMachineProperty()],DragStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty()],DragStateMachine.prototype,"node",2);var import_ag_charts_community42=require("ag-charts-community"),import_ag_charts_core25=require("ag-charts-core"),{STRING:STRING17,TempValidate:TempValidate28}=import_ag_charts_community42._ModuleSupport,ArrowDownProperties=class extends ShapePointProperties{constructor(){super(...arguments),this.type="arrow-down"}static is(t){return(0,import_ag_charts_core25.isObject)(t)&&t.type==="arrow-down"}};__decorateClass([TempValidate28(STRING17)],ArrowDownProperties.prototype,"type",2);var import_ag_charts_community48=require("ag-charts-community"),import_ag_charts_community47=require("ag-charts-community"),import_ag_charts_community44=require("ag-charts-community"),import_ag_charts_core26=require("ag-charts-core"),import_ag_charts_community43=require("ag-charts-community"),_Handle=class bt extends import_ag_charts_community43._ModuleSupport.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(e){const{handle:i,locked:o}=this;return o?{point:{x:i.x,y:i.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-i.x,y:e.y-i.y}}}toggleActive(e){this.active=e,e||(this.handle.strokeWidth=bt.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){}containsPoint(e,i){return this.handle.containsPoint(e,i)}};_Handle.INACTIVE_STROKE_WIDTH=2;var Handle2=_Handle,_InvariantHandle=class vt extends Handle2{constructor(){super(),this.handle=new import_ag_charts_community43._ModuleSupport.Marker({shape:"circle"}),this.glow=new import_ag_charts_community43._ModuleSupport.Marker({shape:"circle"}),this.append([this.handle]),this.handle.size=vt.HANDLE_SIZE,this.handle.strokeWidth=Handle2.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties({...e,strokeWidth:Handle2.INACTIVE_STROKE_WIDTH})}drag(e){return{point:e,offset:{x:0,y:0}}}};_InvariantHandle.HANDLE_SIZE=7,_InvariantHandle.GLOW_SIZE=9;var InvariantHandle=_InvariantHandle,_UnivariantHandle=class nt extends Handle2{constructor(){super(),this.handle=new import_ag_charts_community43._ModuleSupport.Rect,this.glow=new import_ag_charts_community43._ModuleSupport.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=nt.CORNER_RADIUS,this.handle.width=nt.HANDLE_SIZE,this.handle.height=nt.HANDLE_SIZE,this.handle.strokeWidth=Handle2.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=nt.CORNER_RADIUS,this.glow.width=nt.GLOW_SIZE,this.glow.height=nt.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){if(super.toggleLocked(e),e){const i=(nt.HANDLE_SIZE-InvariantHandle.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=i,this.handle.y+=i,this.handle.width=InvariantHandle.HANDLE_SIZE,this.handle.height=InvariantHandle.HANDLE_SIZE,this.glow.width=InvariantHandle.GLOW_SIZE,this.glow.height=InvariantHandle.GLOW_SIZE}else this.handle.cornerRadius=nt.CORNER_RADIUS,this.handle.width=nt.HANDLE_SIZE,this.handle.height=nt.HANDLE_SIZE,this.glow.width=nt.GLOW_SIZE,this.glow.height=nt.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(e){if(this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked){delete e.fill,delete e.strokeWidth;const i=(nt.HANDLE_SIZE-InvariantHandle.HANDLE_SIZE)/2;e.x-=i,e.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(e),this.glow.setProperties({...e,x:(e.x??this.glow.x)-2,y:(e.y??this.glow.y)-2,strokeWidth:0,fill:e.stroke})}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:this.gradient==="vertical"?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){if(!this.locked)return this.gradient==="vertical"?"col-resize":"row-resize"}};_UnivariantHandle.HANDLE_SIZE=12,_UnivariantHandle.GLOW_SIZE=16,_UnivariantHandle.CORNER_RADIUS=4;var UnivariantHandle=_UnivariantHandle,_DivariantHandle=class gt extends Handle2{constructor(){super(),this.handle=new import_ag_charts_community43._ModuleSupport.Marker({shape:"circle"}),this.glow=new import_ag_charts_community43._ModuleSupport.Marker({shape:"circle"}),this.append([this.glow,this.handle]),this.handle.size=gt.HANDLE_SIZE,this.handle.strokeWidth=Handle2.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=gt.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){super.toggleLocked(e),e?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=InvariantHandle.HANDLE_SIZE,this.glow.size=InvariantHandle.GLOW_SIZE):(this.handle.size=gt.HANDLE_SIZE,this.glow.size=gt.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles={...e},this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties({...e,strokeWidth:0,fill:e.stroke})}getCursor(){return"pointer"}};_DivariantHandle.HANDLE_SIZE=11,_DivariantHandle.GLOW_SIZE=17;var DivariantHandle=_DivariantHandle,{ZIndexMap:ZIndexMap2}=import_ag_charts_community44._ModuleSupport,AnnotationScene=class extends import_ag_charts_community44._ModuleSupport.Group{constructor(){super(...arguments),this.name="AnnotationScene",this.zIndex=ZIndexMap2.CHART_ANNOTATION}static isCheck(t,e){return(0,import_ag_charts_core26.isObject)(t)&&Object.hasOwn(t,"type")&&t.type===e}toggleHovered(t){this.toggleHandles(t)}*nonHandleChildren(){for(const t of this.children())t instanceof Handle2||(yield t)}computeBBoxWithoutHandles(){return import_ag_charts_community44._ModuleSupport.Transformable.toCanvas(this,import_ag_charts_community44._ModuleSupport.Group.computeChildrenBBox(this.nonHandleChildren()))}updateNode(t,e,i){if(!i&&e){this.removeChild(e);return}return i&&e==null&&(e=new t,this.appendChild(e)),e}},import_ag_charts_community46=require("ag-charts-community"),import_ag_charts_community45=require("ag-charts-community"),import_ag_charts_core27=require("ag-charts-core"),{ContinuousScale:ContinuousScale3,Vec2:Vec23,toRadians:toRadians4}=import_ag_charts_community45._ModuleSupport;function snapPoint(t,e,i=!1,o,s=1){if(!i)return invertCoords(t,e);const a=o?convertPoint(o,e):Vec23.origin();return invertCoords(snapToAngle(t,a,s),e)}function snapToAngle(t,e,i){const o=Vec23.sub(t,e),s=toRadians4(i),a=Math.round(Vec23.angle(o)/s)*s;return Vec23.rotate(o,a,e)}function getDragStartState(t,e){const i={};for(const[o,s]of(0,import_ag_charts_core27.entries)(t))i[o]=convertPoint(s,e);return i}function translate(t,e,i,o={overflowContinuous:0,translateVectors:void 0,invertYVectors:void 0,snap:void 0}){const{xAxis:s,yAxis:a}=i,r=Object.keys(t),n=[],l=[],c=new Set(o.translateVectors??r),h=new Set(o.invertYVectors??[]),u=new Set([...c,...h]),p=Vec23.multiply(e,Vec23.from(1,-1));for(const m of r)u.has(m)&&(t[m]=Vec23.add(t[m],h.has(m)?p:e),o.snap&&(t[m]=snapToAngle(t[m],o.snap.vectors[m],o.snap.angle))),n.push(s.getRangeOverflow(t[m].x)),l.push(a.getRangeOverflow(t[m].y));const d=(m,b)=>Math.abs(m)-Math.abs(b),g=(m,b,x)=>o.overflowContinuous===0||!ContinuousScale3.is(m)?x.toSorted(d).at(-1)??0:r.length===u.size?x.toSorted(d).at(-o.overflowContinuous-1)??0:x.filter(v=>v!==0).length<=o.overflowContinuous?0:x.filter((v,T)=>v!==0&&Math.abs(v)<=Math.abs(b)&&u.has(r[T])).toSorted(d).at(-1)??0,f=Vec23.from(g(s.scale,e.x,n),g(a.scale,e.y,l));if(!Vec23.equal(f,Vec23.origin()))for(const m of r)u.has(m)&&(t[m]=Vec23.round(Vec23.sub(t[m],f),4));const y={};for(const m of r)y[m]=invertCoords(t[m],i);return y}var{Vec2:Vec24}=import_ag_charts_community46._ModuleSupport,PointScene=class extends AnnotationScene{constructor(){super(...arguments),this.handle=new DivariantHandle,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=convertPoint(t,e);this.updateHandle(t,i),this.anchor=this.updateAnchor(t,i,e)}dragStart(t,e,i){this.dragState={offset:e,...getDragStartState({handle:t},i)}}drag(t,e,i){const{dragState:o}=this;if(t.locked||!o)return;const{point:s}=translate({point:o.handle},Vec24.sub(e,o.offset),i);t.x=s.x,t.y=s.y}translate(t,e,i){if(t.locked)return;const{point:o}=translate({point:convertPoint(t,i)},e,i);t.x=o.x,t.y=o.y}toggleHandles(t){this.handle.visible=!!t,this.handle.toggleHovered(this.activeHandle==="handle")}toggleActive(t){this.toggleHandles(t),this.handle.toggleActive(t)}stopDragging(){this.handle.toggleDragging(!1)}copy(t,e,i){const o=convertPoint(t,i),s=invertCoords({x:o.x-30,y:o.y-30},i);return e.x=s.x,e.y=s.y,e}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{handle:i}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="handle",!0):!1}getNodeAtCoords(t,e){if(this.handle.containsPoint(t,e))return"handle"}updateHandle(t,e,i){const{x:o,y:s}=this.getHandleCoords(t,e,i),a=this.getHandleStyles(t);this.handle.update({...a,x:o,y:s}),this.handle.toggleLocked(t.locked??!1)}updateAnchor(t,e,i){const o=this.getHandleCoords(t,e);return{x:o.x+i.seriesRect.x,y:o.y+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i){return{x:e.x,y:e.y}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},ShapePointScene=class extends PointScene{constructor(){super(),this.append([this.handle])}update(t,e){super.update(t,e);const i=convertPoint(t,e);this.updateShape(t,i)}updateShape(t,e){this.updateShapeStyles(t),this.updateShapePath(t,e)}updateShapeStyles(t){const{shape:e}=this;e.fill=t.fill,e.fillOpacity=t.fillOpacity??1}updateShapePath(t,e){const{shape:i}=this;i.x=e.x,i.y=e.y,i.size=t.size}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}getNodeAtCoords(t,e){return this.shape.containsPoint(t,e)?"shape":super.getNodeAtCoords(t,e)}},arrowUpPoints=[[.5,0],[1,.5],[.75,.5],[.75,1],[.25,1],[.25,.5],[0,.5]];function arrowUp(t){import_ag_charts_community47._ModuleSupport.drawMarkerUnitPolygon(t,arrowUpPoints)}arrowUp.anchor={x:.5,y:0};var ArrowUpScene=class extends ShapePointScene{constructor(){super(),this.type="arrow-up",this.shape=new import_ag_charts_community47._ModuleSupport.Marker({shape:arrowUp}),this.append([this.shape])}static is(t){return AnnotationScene.isCheck(t,"arrow-up")}getHandleCoords(t,e){const i=DivariantHandle.HANDLE_SIZE/2,o=super.getHandleCoords(t,e);return o.y-=i,o}},arrowDownPoints=arrowUpPoints.map(([t,e])=>[t,1-e]);function arrowDown(t){import_ag_charts_community48._ModuleSupport.drawMarkerUnitPolygon(t,arrowDownPoints)}arrowDown.anchor={x:.5,y:1};var ArrowDownScene=class extends ShapePointScene{constructor(){super(),this.type="arrow-down",this.shape=new import_ag_charts_community48._ModuleSupport.Marker({shape:arrowDown}),this.append([this.shape])}static is(t){return AnnotationScene.isCheck(t,"arrow-down")}updateAnchor(t,e,i){const o=super.updateAnchor(t,e,i);return o.y-=t.size,o}getHandleCoords(t,e){const i=DivariantHandle.HANDLE_SIZE/2,o=super.getHandleCoords(t,e);return o.y+=i,o}},import_ag_charts_community49=require("ag-charts-community"),{StateMachine:StateMachine2,StateMachineProperty:StateMachineProperty2,Debug:Debug2}=import_ag_charts_community49._ModuleSupport,PointStateMachine=class extends StateMachine2{constructor(t){const e=({point:o})=>{const s=this.createDatum();s.set({x:o.x,y:o.y}),t.create(s)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},cancel:StateMachine2.parent,reset:StateMachine2.parent},"waiting-first-render":{render:{target:StateMachine2.parent,action:i}}}),this.debug=Debug2.create(!0,"annotations")}};__decorateClass([StateMachineProperty2()],PointStateMachine.prototype,"node",2);var ArrowDownStateMachine=class extends PointStateMachine{createDatum(){return new ArrowDownProperties}},arrowDownConfig={type:"arrow-down",datum:ArrowDownProperties,scene:ArrowDownScene,isDatum:ArrowDownProperties.is,translate:(t,e,i,o)=>{ArrowDownProperties.is(e)&&ArrowDownScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ArrowDownProperties.is(e)&&ArrowDownProperties.is(i)&&ArrowDownScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ArrowDownProperties.is(e)&&ArrowDownScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new ArrowDownStateMachine({...t,create:e("arrow-down")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community50=require("ag-charts-community"),import_ag_charts_core28=require("ag-charts-core"),{STRING:STRING18,TempValidate:TempValidate29}=import_ag_charts_community50._ModuleSupport,ArrowUpProperties=class extends ShapePointProperties{constructor(){super(...arguments),this.type="arrow-up"}static is(t){return(0,import_ag_charts_core28.isObject)(t)&&t.type==="arrow-up"}};__decorateClass([TempValidate29(STRING18)],ArrowUpProperties.prototype,"type",2);var ArrowUpStateMachine=class extends PointStateMachine{createDatum(){return new ArrowUpProperties}},arrowUpConfig={type:"arrow-up",datum:ArrowUpProperties,scene:ArrowUpScene,isDatum:ArrowUpProperties.is,translate:(t,e,i,o)=>{ArrowUpProperties.is(e)&&ArrowUpScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ArrowUpProperties.is(e)&&ArrowUpProperties.is(i)&&ArrowUpScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ArrowUpProperties.is(e)&&ArrowUpScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new ArrowUpStateMachine({...t,create:e("arrow-up")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community54=require("ag-charts-community"),import_ag_charts_community53=require("ag-charts-community"),import_ag_charts_community52=require("ag-charts-community"),import_ag_charts_core29=require("ag-charts-core"),import_ag_charts_community51=require("ag-charts-community"),{Vec2:Vec25,Vec4}=import_ag_charts_community51._ModuleSupport,LinearScene=class extends AnnotationScene{constructor(){super(...arguments),this.overflowContinuous=0}extendLine({x1:t,y1:e,x2:i,y2:o},s,a){const r={x1:t,y1:e,x2:i,y2:o};if(!s.extendStart&&!s.extendEnd)return r;const[n,l]=boundsIntersections(r,a.yAxis.bounds),c=r.x2<r.x1,h=r.y1>=r.y2,u=r.x2===r.x1;return s.extendEnd&&(u?r.y2=h?l.y:n.y:(r.x2=c?n.x:l.x,r.y2=c?n.y:l.y)),s.extendStart&&(u?r.y1=h?n.y:l.y:(r.x1=c?l.x:n.x,r.y1=c?l.y:n.y)),r}dragStart(t,e,i){this.dragState={offset:e,...getDragStartState({start:t.start,end:t.end},i)}}drag(t,e,i,o){t.locked||(this.activeHandle?this.dragHandle(t,e,i,o):this.dragAll(t,e,i))}dragAll(t,e,i){const{dragState:o}=this;o&&this.translatePoints(t,o.start,o.end,Vec25.sub(e,o.offset),i)}translate(t,e,i){t.locked||this.translatePoints(t,convertPoint(t.start,i),convertPoint(t.end,i),e,i)}copy(t,e,i){const o=convertLine(t,i);if(!o)return;const s=this.computeBBoxWithoutHandles(),a={x:-s.width/2,y:-s.height/2};return this.translatePoints(e,Vec4.start(o),Vec4.end(o),a,i),e}translatePoints(t,e,i,o,s){const a=this.getTranslatePointsVectors(e,i),r=translate(a,o,s,{overflowContinuous:this.overflowContinuous});t.start.x=r.start.x,t.end.x=r.end.x,t.start.y=r.start.y,t.end.y=r.end.y}getTranslatePointsVectors(t,e){return{start:t,end:e}}},{Vec2:Vec26,Vec4:Vec42}=import_ag_charts_community52._ModuleSupport,StartEndScene=class extends LinearScene{constructor(){super(...arguments),this.start=new DivariantHandle,this.end=new DivariantHandle,this.anchor={x:0,y:0,position:"above"}}update(t,e){const i=convertLine(t,e);i!=null&&(this.updateHandles(t,i),this.updateAnchor(t,i,e))}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of(0,import_ag_charts_core29.entries)(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}dragHandle(t,e,i,o){const{activeHandle:s,dragState:a}=this;if(!s||!a)return;this[s].toggleDragging(!0);const r=s==="start"?"end":"start",n=o?{vectors:{[s]:convertPoint(t[r],i)},angle:t.snapToAngle}:void 0,{[s]:l}=translate({[s]:a[s]},Vec26.sub(e,a.offset),i,{overflowContinuous:0,snap:n});t[s].x=l.x,t[s].y=l.y}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(t,e){const{start:i,end:o}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):o.containsPoint(t,e)?(this.activeHandle="end",!0):!1}getNodeAtCoords(t,e){if(this.start.containsPoint(t,e)||this.end.containsPoint(t,e))return"handle"}updateHandles(t,e,i){this.start.update({...this.getHandleStyles(t,"start"),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t,"end"),...this.getHandleCoords(t,e,"end",i)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}updateAnchor(t,e,i,o){this.anchor={x:e.x1+i.seriesRect.x,y:e.y1+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(t,e,i,o){return i==="start"?Vec42.start(e):Vec42.end(e)}getHandleStyles(t,e){return{fill:t.handle.fill,stroke:t.handle.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}},{Vec4:Vec43}=import_ag_charts_community53._ModuleSupport,TextualStartEndScene=class extends StartEndScene{constructor(){super(...arguments),this.label=new import_ag_charts_community53._ModuleSupport.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty("TextualStartEndScene")}update(t,e){const i=convertLine(t,e);if(i==null)return;const o=this.getTextBBox(t,i);this.updateLabel(t,o,i),this.updateHandles(t,i,o),this.updateShape(t,o,i),this.updateAnchor(t,i,e,o)}containsPoint(t,e){return super.containsPoint(t,e)||this.label.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e){const{text:i}=t.getText();return getBBox(t,i,Vec43.end(e),this.textInputBBox)}updateLabel(t,e,i){const{text:o,isPlaceholder:s}=t.getText();updateTextNode(this.label,o,s,t,this.getLabelCoords(t,e,i))}updateShape(t,e,i){}getLabelCoords(t,e,i){return Vec43.end(i)}getHandleStyles(t,e){return{...super.getHandleStyles(t,e),stroke:t.handle.stroke??t.color}}},{drawCorner,Path:Path5}=import_ag_charts_community54._ModuleSupport,CalloutScene=class extends TextualStartEndScene{constructor(){super(),this.type="callout",this.shape=new Path5,this.append([this.shape,this.label,this.start,this.end])}static is(t){return AnnotationScene.isCheck(t,"callout")}drag(t,e,i,o){t.locked||(this.activeHandle==="end"?this.dragHandle(t,e,i,o):this.dragAll(t,e,i))}getLabelCoords(t,e,i){const o=t.getPadding(),{bodyBounds:s={x:0,y:0,width:0,height:0}}=this.getDimensions(t,e,i)??{};return{x:s.x+o.left,y:s.y-o.bottom}}getHandleStyles(t,e){return e==="start"?{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(t,e,i,o){const{bodyBounds:s}=this.getDimensions(t,o,e)??{},a=s??o;this.anchor={x:a.x+i.seriesRect.x,y:a.y+i.seriesRect.y-a.height,position:this.anchor.position}}updateShape(t,e,i){const{shape:o}=this;o.fill=t.fill,o.fillOpacity=t.fillOpacity??1,o.stroke=t.stroke,o.strokeWidth=t.strokeWidth??1,o.strokeOpacity=t.strokeOpacity??1;const{tailPoint:s,bodyBounds:a}=this.getDimensions(t,e,i)??{};!s||!a||this.updatePath(s,a)}updatePath(t,e){const{x:i,y:o}=t,{x:s,y:a,width:r,height:n}=e,l=a-n,c=s+r,h=this.calculateCalloutPlacement({x:i,y:o},e),u=8,p=[{coordinates:{x0:s,x1:s+u,y0:l+u,y1:l,cx:h==="topLeft"?i:s+u,cy:h==="topLeft"?o:l+u},type:h==="topLeft"?"calloutCorner":"corner"},{coordinates:{x0:s+u,x1:c-u,y0:l,y1:l,cx:i,cy:o},type:h==="top"?"calloutSide":"side"},{coordinates:{x0:c-u,x1:c,y0:l,y1:l+u,cx:h==="topRight"?i:c-u,cy:h==="topRight"?o:l+u},type:h==="topRight"?"calloutCorner":"corner"},{coordinates:{x0:c,x1:c,y0:l+u,y1:a-u,cx:i,cy:o},type:h==="right"?"calloutSide":"side"},{coordinates:{x0:c,x1:c-u,y0:a-u,y1:a,cx:h==="bottomRight"?i:c-u,cy:h==="bottomRight"?o:a-u},type:h==="bottomRight"?"calloutCorner":"corner"},{coordinates:{x0:c-u,x1:s+u,y0:a,y1:a,cx:i,cy:o},type:h==="bottom"?"calloutSide":"side"},{coordinates:{x0:s+u,x1:s,y0:a,y1:a-u,cx:h==="bottomLeft"?i:s+u,cy:h==="bottomLeft"?o:a-u},type:h==="bottomLeft"?"calloutCorner":"corner"},{coordinates:{x0:s,x1:s,y0:a-u,y1:l+u,cx:i,cy:o},type:h==="left"?"calloutSide":"side"}],{path:d}=this.shape;d.clear(),d.moveTo(s,l+u),p.forEach(({coordinates:g,type:f})=>{this.drawPath(d,g,u,f)}),d.closePath()}drawPath(t,{x0:e,y0:i,x1:o,y1:s,cx:a,cy:r},n,l){switch(l){case"calloutCorner":{t.lineTo(a,r),t.lineTo(o,s);break}case"corner":{drawCorner(t,{x0:e,x1:o,y0:i,y1:s,cx:a,cy:r},n,!1);break}case"calloutSide":{if(e!==o){const h=e>o?-1:1,u=Math.min(e,o)+Math.abs(o-e)/2;t.lineTo(u-6*h,i),t.lineTo(a,r),t.lineTo(u+6*h,i),t.lineTo(o,s)}else{const h=i>s?-1:1,u=Math.min(i,s)+Math.abs(i-s)/2;t.lineTo(e,u-6*h),t.lineTo(a,r),t.lineTo(e,u+6*h),t.lineTo(o,s)}break}case"side":default:{t.lineTo(o,s);break}}}calculateCalloutPlacement(t,e){const i=e.x+e.width,o=e.y-e.height;let s,a;return t.x>i?s="right":t.x<e.x&&(s="left"),t.y>e.y?a="bottom":t.y<o&&(a="top"),s&&a?`${a}${s[0].toUpperCase()}${s.substring(1)}`:a??s}getDimensions(t,e,i){const{fontSize:o}=t,s=t.getPadding(),a=s.left+s.right,r=s.top+s.bottom,n=e.width+a,l=Math.max(e.height+r,o+r);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:e.x,y:e.y,width:n,height:l}}}containsPoint(t,e){const{start:i,end:o,shape:s}=this;if(this.activeHandle=void 0,i.containsPoint(t,e))return this.activeHandle="start",!0;const a=o.containsPoint(t,e)||s.containsPoint(t,e);return a&&(this.activeHandle="end"),a}},import_ag_charts_community55=require("ag-charts-community");function guardCancelAndExit({key:t}){return t==="Escape"}function guardSaveAndExit({key:t,shiftKey:e}){return!e&&t==="Enter"}var{StateMachine:StateMachine3,StateMachineProperty:StateMachineProperty3,Debug:Debug3}=import_ag_charts_community55._ModuleSupport,TextualStartEndStateMachine=class extends StateMachine3{constructor(t){const e=({point:p})=>{const d=this.createDatum();d.set({start:p,end:p,visible:!0}),t.create(d)},i=()=>{const{node:p}=this;p?.toggleActive(!0),p?.toggleHandles({start:!0})},o=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},s=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},a=p=>{this.node?.setTextInputBBox(p),t.update()},r=({point:p})=>{const{datum:d,node:g}=this;d?.set({end:p}),g?.toggleActive(!0),g?.toggleHandles({end:!1}),t.update()},n=()=>{t.showAnnotationOptions(),this.node?.toggleHandles({end:!0})},l=({colorPickerType:p,colorOpacity:d,color:g,opacity:f,isMultiColor:y})=>{const{datum:m}=this;m&&(p==="text-color"&&t.updateTextInputColor(g),setColor(m,p,d,g,f,y),t.update())},c=p=>{const{datum:d,node:g}=this;!d||!g||!isTextType(d)||(d.fontSize=p,t.updateTextInputFontSize(p),t.update())},h=()=>{t.delete()},u=({textInputValue:p,bbox:d})=>{const{datum:g}=this;if(d!=null&&p!=null&&p.length>0){if(!isTextType(g))return;const f=wrapText(g,p,d.width);g?.set({text:f}),t.update(),t.recordAction(`Create ${g?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:StateMachine3.parent,reset:StateMachine3.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:r,drag:r,click:{target:"edit",action:n},dragEnd:{target:"edit",action:n},reset:{target:StateMachine3.parent,action:h},cancel:{target:StateMachine3.parent,action:h}},edit:{onEnter:o,updateTextInputBBox:a,color:l,fontSize:c,textInput:[{guard:guardCancelAndExit,target:StateMachine3.parent,action:h},{guard:guardSaveAndExit,target:StateMachine3.parent,action:u}],click:{target:StateMachine3.parent,action:u},dragStart:{target:StateMachine3.parent,action:u},resize:{target:StateMachine3.parent,action:u},onExit:s,cancel:{target:StateMachine3.parent,action:h}}}),this.debug=Debug3.create(!0,"annotations")}};__decorateClass([StateMachineProperty3()],TextualStartEndStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty3()],TextualStartEndStateMachine.prototype,"node",2);var CalloutStateMachine=class extends TextualStartEndStateMachine{createDatum(){return new CalloutProperties}},calloutConfig={type:"callout",datum:CalloutProperties,scene:CalloutScene,isDatum:CalloutProperties.is,translate:(t,e,i,o)=>{if(CalloutProperties.is(e)&&CalloutScene.is(t))return t.translate(e,i,o)},copy:(t,e,i,o)=>{if(CalloutProperties.is(e)&&CalloutProperties.is(i)&&CalloutScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{CalloutProperties.is(e)&&CalloutScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new CalloutStateMachine({...t,create:e("callout")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community57=require("ag-charts-community"),import_ag_charts_community56=require("ag-charts-community"),TextualPointScene=class extends PointScene{constructor(){super(...arguments),this.label=new import_ag_charts_community56._ModuleSupport.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(t){this.textInputBBox=t,this.markDirty("TextualPointScene")}update(t,e){const i=convertPoint(t,e),o=this.getTextBBox(t,i,e);this.updateLabel(t,o),this.updateHandle(t,i,o),this.updateShape(t,o),this.anchor=this.updateAnchor(t,o,e)}copy(t,e,i){const o=convertPoint(t,i),s=this.getTextBBox(t,o,i),a=t.getPadding(),r=a.left+a.right,n=a.top+a.bottom,l=(s.width+r)/2,c=s.height+n,h=invertCoords({x:o.x-l,y:o.y-c},i);return e.x=h.x,e.y=h.y,e}containsPoint(t,e){const{label:i}=this;return super.containsPoint(t,e)||i.visible&&i.containsPoint(t,e)}getNodeAtCoords(t,e){return this.label.visible&&this.label.containsPoint(t,e)?"text":super.getNodeAtCoords(t,e)}getTextBBox(t,e,i){const{text:o}=t.getText();return getBBox(t,o,{x:e.x,y:e.y},this.textInputBBox)}updateLabel(t,e){const{text:i,isPlaceholder:o}=t.getText();updateTextNode(this.label,i,o,t,this.getLabelCoords(t,e),this.getTextBaseline(t))}updateShape(t,e){}updateAnchor(t,e,i){return{x:e.x+i.seriesRect.x,y:e.y+i.seriesRect.y-e.height,position:this.anchor.position}}getLabelCoords(t,e){return e}getTextBaseline(t){return t.position=="center"?"middle":t.position}getHandleCoords(t,e,i){return i}getHandleStyles(t){const e=super.getHandleStyles(t);return e.stroke=t.handle.stroke??t.color,e}},{drawCorner:drawCorner2}=import_ag_charts_community57._ModuleSupport,CommentScene=class extends TextualPointScene{constructor(){super(),this.type="comment",this.shape=new import_ag_charts_community57._ModuleSupport.Path,this.append([this.shape,this.label,this.handle])}static is(t){return AnnotationScene.isCheck(t,"comment")}updateShape(t,e){const{shape:i}=this;i.fill=t.fill,i.fillOpacity=t.fillOpacity??1,i.stroke=t.stroke??"transparent",i.strokeWidth=t.strokeWidth??1,i.strokeOpacity=t.strokeOpacity??1,this.updatePath(t,e)}getLabelCoords(t,e){const i=t.getPadding();return{x:e.x+i.left,y:e.y-i.bottom}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}updateAnchor(t,e,i){const o=super.updateAnchor(t,e,i),s=t.getPadding();return o.y-=s.bottom+s.top,o}updatePath(t,e){const i=t.getPadding(),{x:o,y:s}=e;let{width:a,height:r}=e;const{fontSize:n}=t,l=i.left+i.right,c=i.top+i.bottom;a=a+l,r=Math.max(r+c,n+c);const h=s-r,u=o+a,p=(n*ANNOTATION_TEXT_LINE_HEIGHT+c)/2,{path:d}=this.shape;d.clear(),d.moveTo(o,s),d.lineTo(o,h+p),drawCorner2(d,{x0:o,x1:o+p,y0:h+p,y1:h,cx:o+p,cy:h+p},p,!1),d.lineTo(u-p,h),drawCorner2(d,{x0:u-p,x1:u,y0:h,y1:h+p,cx:u-p,cy:h+p},p,!1),d.lineTo(u,s-p),drawCorner2(d,{x0:u,x1:u-p,y0:s-p,y1:s,cx:u-p,cy:s-p},p,!1),d.closePath()}containsPoint(t,e){return super.containsPoint(t,e)||this.shape.containsPoint(t,e)}},import_ag_charts_community58=require("ag-charts-community"),{StateMachine:StateMachine4,StateMachineProperty:StateMachineProperty4,Debug:Debug4}=import_ag_charts_community58._ModuleSupport,TextualPointStateMachine=class extends StateMachine4{constructor(t){const e=({point:h})=>{const u=this.createDatum();u.set({x:h.x,y:h.y}),t.create(u)},i=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()},o=()=>{t.showTextInput(),this.datum&&(this.datum.visible=!1)},s=()=>{t.hideTextInput(),this.datum&&(this.datum.visible=!0),t.deselect()},a=h=>{this.node?.setTextInputBBox(h),t.update()},r=({colorPickerType:h,colorOpacity:u,color:p,opacity:d,isMultiColor:g})=>{this.datum&&(h==="text-color"&&t.updateTextInputColor(p),setColor(this.datum,h,u,p,d,g),t.update())},n=h=>{const{datum:u,node:p}=this;!u||!p||!isTextType(u)||(u.fontSize=h,t.updateTextInputFontSize(h),t.update())},l=()=>{t.delete()},c=({textInputValue:h,bbox:u})=>{if(u!=null&&h!=null&&h.length>0){const{datum:p}=this;if(!isTextType(p))return;const d=wrapText(p,h,u.width);p?.set({text:d}),t.update(),t.recordAction(`Create ${p?.type} annotation`)}else t.delete()};super("start",{start:{click:{target:"waiting-first-render",action:e},dragStart:{target:"waiting-first-render",action:e},cancel:StateMachine4.parent,reset:StateMachine4.parent},"waiting-first-render":{render:{target:"edit",action:i}},edit:{onEnter:o,updateTextInputBBox:a,color:r,fontSize:n,textInput:[{guard:guardCancelAndExit,target:StateMachine4.parent,action:l},{guard:guardSaveAndExit,target:StateMachine4.parent,action:c}],click:{target:StateMachine4.parent,action:c},dragStart:{target:StateMachine4.parent,action:c},resize:{target:StateMachine4.parent,action:c},onExit:s,cancel:{target:StateMachine4.parent,action:l}}}),this.debug=Debug4.create(!0,"annotations")}};__decorateClass([StateMachineProperty4()],TextualPointStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty4()],TextualPointStateMachine.prototype,"node",2);var CommentStateMachine=class extends TextualPointStateMachine{createDatum(){return new CommentProperties}},commentConfig={type:"comment",datum:CommentProperties,scene:CommentScene,isDatum:CommentProperties.is,translate:(t,e,i,o)=>{CommentProperties.is(e)&&CommentScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(CommentProperties.is(e)&&CommentProperties.is(i)&&CommentScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{CommentProperties.is(e)&&CommentScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new CommentStateMachine({...t,create:e("comment")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community63=require("ag-charts-community"),import_ag_charts_community59=require("ag-charts-community"),{calculateLabelTranslation,ChartAxisDirection:ChartAxisDirection6}=import_ag_charts_community59._ModuleSupport,AxisLabelScene=class extends import_ag_charts_community59._ModuleSupport.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new import_ag_charts_community59._ModuleSupport.Text({zIndex:1}),this.rect=new import_ag_charts_community59._ModuleSupport.Rect;const{label:t}=this;t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.textBaseline="middle",t.textAlign="center",this.append([this.rect,this.label])}update(t){this.updateLabel(t),this.updateRect(t),this.updatePosition(t)}updateLabel({value:t,styles:e,context:i}){const{fontWeight:o,fontSize:s,fontStyle:a,fontFamily:r,textAlign:n,color:l="white",formatter:c}=e,h=c?c({value:t}):i.scaleValueFormatter()(t);this.label.setProperties({fontWeight:o,fontSize:s,fontStyle:a,fontFamily:r,textAlign:n,fill:l,text:h})}updateRect({styles:t}){const{rect:e}=this,{cornerRadius:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:r}=t;e.setProperties({cornerRadius:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:r})}updatePosition({x:t,y:e,context:i,styles:{padding:o}}){const{label:s,rect:a}=this,r=s.getBBox()?.clone(),n=o??8,l=o??5;r.grow(n,"horizontal"),r.grow(l,"vertical");const c=i.direction===ChartAxisDirection6.X?Math.round(l/2):n,{xTranslation:h,yTranslation:u}=calculateLabelTranslation({yDirection:!0,padding:i.labelPadding-c,position:i.position??"left",bbox:r}),p=t+h,d=e+u;s.x=p,s.y=d,a.y=d-Math.round(r.height/2),a.x=p-Math.round(r.width/2),a.height=r.height,a.width=r.width}};AxisLabelScene.className="AxisLabel";var import_ag_charts_community60=require("ag-charts-community"),{Vec2:Vec27}=import_ag_charts_community60._ModuleSupport,CollidableLine=class extends import_ag_charts_community60._ModuleSupport.Line{constructor(){super(...arguments),this.growCollisionBox=9,this.clipMask=new Map}setProperties(t,e){return super.setProperties(t,e),this.updateCollisionBBox(),this}updateCollisionBBox(){const{growCollisionBox:t,strokeWidth:e,x1:i,y1:o,x2:s,y2:a}=this;let r=e+t;r%2===0&&(r+=1);const n=Vec27.from(i,o-Math.floor(r/2)),l=Vec27.from(s,a),c=Vec27.distance(n,l);this.collisionBBox=new import_ag_charts_community60._ModuleSupport.BBox(n.x,n.y,c,r)}isPointInPath(t,e){const{collisionBBox:i,x1:o,y1:s,x2:a,y2:r}=this;if(!i)return!1;const n=Vec27.from(o,s),l=Vec27.from(a,r),c=Vec27.sub(Vec27.from(t,e),n),h=Vec27.sub(l,n),u=Vec27.rotate(c,Vec27.angle(c,h),n);return i.containsPoint(u.x,u.y)??!1}render(t){this.applyClipMask(t.ctx),super.render(t),this.closeClipMask(t.ctx)}setClipMask(t,e){const i=this.clipMask.get(t);import_ag_charts_community60._ModuleSupport.jsonDiff(i,e)!=null&&this.markDirty("CollidableLine"),e?this.clipMask.set(t,e):this.clipMask.delete(t)}applyClipMask(t){const{clipMask:e}=this;e.size!==0&&this.clipMask.forEach(i=>{const{x:o,y:s,radius:a}=i;t.save(),t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.ellipse(o,s,a,a,0,Math.PI*2,0,!0),t.clip()})}closeClipMask(t){this.clipMask.size!==0&&t.restore()}},import_ag_charts_community61=require("ag-charts-community"),CollidableText=class extends import_ag_charts_community61._ModuleSupport.TransformableText{constructor(){super(...arguments),this.growCollisionBox={top:4,right:4,bottom:4,left:4}}isPointInPath(t,e){const i=this.fromParentPoint(t,e),o=this.computeBBoxWithoutTransforms();return o?o.grow(this.growCollisionBox).containsPoint(i.x,i.y):!1}},import_ag_charts_community62=require("ag-charts-community"),{Vec2:Vec28}=import_ag_charts_community62._ModuleSupport;function updateLineText(t,e,i,o,s,a,r){if(!a||!s||!o){e.setClipMask(t);return}const{alignment:n,position:l}=o,c=getNumbers(i,o.fontSize,r),{point:h,textBaseline:u}=positionAndAlignment(c,l,n);setProperties(s,a,o,h,c.angle,u);const{x:p,y:d,width:g,height:f}=s.getBBox(),y=Vec28.length(Vec28.from(g,f)),m={x:p+g/2,y:d+f/2,radius:y/2+Vec28.length(c.offset)};return l==="center"?e.setClipMask(t,m):e.setClipMask(t),{clipMask:m,numbers:c}}function updateChannelText(t,e,i,o,s,a,r){if(!r||!a)return;const{alignment:n,position:l}=o,[c,h]=e.y1<=i.y1?[e,i]:[i,e];let u=c;l==="bottom"?u=h:l==="inside"&&(u={x1:(c.x1+h.x1)/2,y1:(c.y1+h.y1)/2,x2:(c.x2+h.x2)/2,y2:(c.y2+h.y2)/2});const p=getNumbers(u,o.fontSize,s),{point:d,textBaseline:g}=positionAndAlignment(p,l==="inside"?"center":l,n,t);setProperties(a,r,o,d,p.angle,g)}function getNumbers(t,e,i){let[o,s]=Vec28.from(t);o.x>s.x&&([o,s]=[s,o]);const a=Vec28.normalized(Vec28.sub(s,o)),r=Vec28.angle(a),n=Vec28.multiply(a,DivariantHandle.HANDLE_SIZE/2+(e??14)/2),l=Vec28.multiply(a,(i??2)/2+(e??14)/3);return{left:o,right:s,normal:a,angle:r,inset:n,offset:l}}function positionAndAlignment({left:t,right:e,normal:i,angle:o,inset:s,offset:a},r,n,l){let c;n==="right"?c=Vec28.sub(e,s):n==="center"?c=Vec28.add(t,Vec28.multiply(i,Vec28.distance(t,e)/2)):c=Vec28.add(t,s);let h="bottom";return r==="bottom"?(c=Vec28.rotate(a,o+Math.PI/2,c),h="top"):r==="center"&&!l?h="middle":c=Vec28.rotate(a,o-Math.PI/2,c),{point:c,textBaseline:h}}function setProperties(t,e,i,o,s,a){t.setProperties({text:e,x:o.x,y:o.y,rotation:s,rotationCenterX:o.x,rotationCenterY:o.y,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textAlign:i.alignment,textBaseline:a})}var{ChartAxisDirection:ChartAxisDirection7,Vec2:Vec29,Vec4:Vec44}=import_ag_charts_community63._ModuleSupport,CrossLineScene=class extends AnnotationScene{constructor(){super(),this.type="cross-line",this.line=new CollidableLine,this.middle=new UnivariantHandle,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(t){return AnnotationScene.isCheck(t,"cross-line")}update(t,e){const{seriesRect:i}=e;this.seriesRect=i,this.isHorizontal=HorizontalLineProperties.is(t);const o=this.isHorizontal?e.yAxis:e.xAxis,s=this.convertCrossLine(t,o);if(s==null){this.visible=!1;return}this.visible=t.visible??!0,this.visible&&(this.updateLine(t,s),this.updateHandle(t,s),this.updateText(t,s),this.updateAxisLabel(t,o,s))}updateLine(t,e){const{line:i}=this,{lineDashOffset:o,stroke:s,strokeWidth:a,strokeOpacity:r}=t,{x1:n,y1:l,x2:c,y2:h}=e;i.setProperties({x1:n,y1:l,x2:c,y2:h,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:o,stroke:s,strokeWidth:a,strokeOpacity:r,fillOpacity:0})}updateHandle(t,e){const{middle:i}=this,{locked:o,stroke:s,strokeWidth:a,strokeOpacity:r}=t,n={fill:t.handle.fill,stroke:t.handle.stroke??s,strokeOpacity:t.handle.strokeOpacity??r,strokeWidth:t.handle.strokeWidth??a},l=Vec29.sub(Vec44.center(e),Vec29.from(i.handle.width/2,i.handle.height/2));i.gradient=this.isHorizontal?"horizontal":"vertical",i.update({...n,...l}),i.toggleLocked(o??!1)}updateText(t,e){this.text=this.updateNode(CollidableText,this.text,!!t.text.label),updateLineText(this.line.id,this.line,e,t.text,this.text,t.text.label,t.strokeWidth)}createAxisLabel(t){const e=new AxisLabelScene;return t.attachLabel(e),e}updateAxisLabel(t,e,i){this.axisLabel||(this.axisLabel=this.createAxisLabel(e));const{axisLabel:o,seriesRect:s}=this,{direction:a,position:r}=e;if(t.axisLabel.enabled){o.visible=this.visible;const n=r==="left"||r==="top"?Vec44.start(i):Vec44.end(i),l=a===ChartAxisDirection7.X?n.x:n.y;if(!e.inRange(l)){o.visible=!1;return}const c=getGroupingValue(t.value);o.update({...Vec29.add(n,Vec29.required(s)),value:c,styles:t.axisLabel,context:e})}else o.visible=!1}setAxisLabelOpacity(t){this.axisLabel&&(this.axisLabel.opacity=t)}setAxisLabelVisible(t){this.axisLabel&&(this.axisLabel.visible=t)}toggleHandles(t){this.middle.visible=t,this.middle.toggleHovered(this.activeHandle==="middle")}destroy(){super.destroy(),this.axisLabel?.destroy()}toggleActive(t){this.toggleHandles(t),this.middle.toggleActive(t)}dragStart(t,e,i){const o=HorizontalLineProperties.is(t)?{x:e.x,y:convert(t.value,i.yAxis)}:{x:convert(t.value,i.xAxis),y:e.y};this.dragState={offset:e,middle:o}}drag(t,e,i){const{activeHandle:o,dragState:s}=this;t.locked||!s||(o&&this[o].toggleDragging(!0),this.translatePoint(t,s.middle,Vec29.sub(e,s.offset),i))}translate(t,e,i){if(t.locked)return;const o=HorizontalLineProperties.is(t)?Vec29.from(0,convert(t.value,i.yAxis)):Vec29.from(convert(t.value,i.xAxis),0);this.translatePoint(t,o,e,i)}translatePoint(t,e,i,o){const s=HorizontalLineProperties.is(t);s?i.x=0:i.y=0;const{point:a}=translate({point:e},i,o);t.value=s?a.y:a.x}stopDragging(){this.middle.toggleDragging(!1)}copy(t,e,i){const o=HorizontalLineProperties.is(t),s=this.isHorizontal?i.yAxis:i.xAxis,a=this.convertCrossLine(t,s);if(!a)return;const r=o?-30:0,n=o?0:-30,l=invertCoords({x:a.x1+n,y:a.y1+r},i);return e.set({value:o?l.y:l.x}),e}getCursor(){return this.activeHandle==null?"pointer":this[this.activeHandle].getCursor()}containsPoint(t,e){const{middle:i,line:o,text:s}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="middle",!0):o.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.line.isPointInPath(t,e))return"line";if(this.middle.containsPoint(t,e))return"handle"}getAnchor(){const t=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:t.x+t.width/2,y:t.y}:{x:t.x+t.width,y:t.y+t.height/2,position:"right"}}convertCrossLine(t,e){if(t.value==null)return;let i=0,o=0,s,a;const{bounds:r}=e,n=convert(t.value,e);return HorizontalLineProperties.is(t)?(s=r.width,o=n,a=n):(i=n,s=n,a=r.height),{x1:i,y1:o,x2:s,y2:a}}},import_ag_charts_community64=require("ag-charts-community"),{StateMachine:StateMachine5,StateMachineProperty:StateMachineProperty5,Debug:Debug5}=import_ag_charts_community64._ModuleSupport,CrossLineStateMachine=class extends StateMachine5{constructor(t,e){const i=({point:s})=>{const a=t==="horizontal",r=a?new HorizontalLineProperties:new VerticalLineProperties;r.set({value:a?s.y:s.x}),e.create(r),e.recordAction(`Create ${a?"horizontal-line":"vertical-line"} annotation`)},o=()=>{this.node?.toggleActive(!0),e.showAnnotationOptions(),e.update()};super("start",{start:{click:{target:"waiting-first-render",action:i},drag:{target:"waiting-first-render",action:i},reset:StateMachine5.parent,cancel:StateMachine5.parent},"waiting-first-render":{render:{target:StateMachine5.parent,action:o}}}),this.debug=Debug5.create(!0,"annotations")}};__decorateClass([StateMachineProperty5()],CrossLineStateMachine.prototype,"node",2);var horizontalLineConfig={type:"horizontal-line",datum:HorizontalLineProperties,scene:CrossLineScene,isDatum:HorizontalLineProperties.is,translate:(t,e,i,o)=>{HorizontalLineProperties.is(e)&&CrossLineScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(HorizontalLineProperties.is(e)&&HorizontalLineProperties.is(i)&&CrossLineScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{HorizontalLineProperties.is(e)&&CrossLineScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new CrossLineStateMachine("horizontal",{...t,create:e("horizontal-line")}),dragState:t=>new DragStateMachine(t)},verticalLineConfig={type:"vertical-line",datum:VerticalLineProperties,scene:CrossLineScene,isDatum:VerticalLineProperties.is,translate:(t,e,i,o)=>{VerticalLineProperties.is(e)&&CrossLineScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(VerticalLineProperties.is(e)&&VerticalLineProperties.is(i)&&CrossLineScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{VerticalLineProperties.is(e)&&CrossLineScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new CrossLineStateMachine("vertical",{...t,create:e("vertical-line")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community67=require("ag-charts-community"),import_ag_charts_community66=require("ag-charts-community"),import_ag_charts_community65=require("ag-charts-community"),{Vec4:Vec45}=import_ag_charts_community65._ModuleSupport,WithBackgroundScene=class{static updateBackground(t,e,i,o){const{background:s}=this,{seriesRect:a}=o;s.path.clear(!0);const r=Vec45.from(0,0,a.width,a.height),n=this.getBackgroundPoints(t,e,i,r);for(let c=0;c<n.length;c++){const h=n[c];c===0?s.path.moveTo(h.x,h.y):s.path.lineTo(h.x,h.y)}s.path.closePath(),s.checkPathDirty();const l=this.getBackgroundStyles?.(t)??t.background;s.setProperties({fill:l.fill,fillOpacity:l.fillOpacity})}},ChannelScene=class extends LinearScene{constructor(){super(...arguments),this.handles={},this.overflowContinuous=2,this.topLine=new CollidableLine,this.bottomLine=new CollidableLine,this.background=new import_ag_charts_community66._ModuleSupport.Path({zIndex:-1}),this.anchor={x:0,y:0},this.updateBackground=WithBackgroundScene.updateBackground.bind(this)}update(t,e){const{locked:i,visible:o}=t,s=convertLine(t,e),a=convertLine(t.bottom,e);if(s==null||a==null){this.visible=!1;return}else this.visible=o??!0;const r=this.extendLine(s,t,e),n=this.extendLine(a,t,e);this.updateLines(t,r,n,e,s,a),this.updateHandles(t,s,a),this.updateText(t,s,a),this.updateBackground(t,r,n,e),this.updateAnchor(s,a);for(const l of Object.values(this.handles))l.toggleLocked(i??!1)}toggleHandles(t){const{handles:e}=this;if(typeof t=="boolean"){for(const[i,o]of Object.entries(e))o.visible=t,o.toggleHovered(this.activeHandle===i);return}for(const[i,o]of Object.entries(t)){const s=e[i];s.visible=o??!0,s.toggleHovered(this.activeHandle===i)}}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}stopDragging(){const{activeHandle:t,handles:e}=this;t!=null&&e[t].toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(t,e){const{handles:i,topLine:o,bottomLine:s,text:a}=this;this.activeHandle=void 0;for(const[r,n]of Object.entries(i))if(n.containsPoint(t,e))return this.activeHandle=r,!0;return o.containsPoint(t,e)||s.containsPoint(t,e)||!!a?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.topLine.containsPoint(t,e)||this.bottomLine.containsPoint(t,e))return"line";for(const[i,o]of Object.entries(this.handles))if(o.containsPoint(t,e))return"handle"}updateAnchor(t,e){const{x:i,y:o}=import_ag_charts_community66._ModuleSupport.Transformable.toCanvasPoint(this.topLine,(t.x1+t.x2)/2,Math.min(t.y1,t.y2,e.y1,e.y2));this.anchor.x=i,this.anchor.y=o}},{Vec2:Vec210,Vec4:Vec46}=import_ag_charts_community67._ModuleSupport,DisjointChannelScene=class extends ChannelScene{constructor(){super(),this.type="disjoint-channel",this.handles={topLeft:new DivariantHandle,topRight:new DivariantHandle,bottomLeft:new DivariantHandle,bottomRight:new UnivariantHandle},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return AnnotationScene.isCheck(t,"disjoint-channel")}dragHandle(t,e,i,o){const{activeHandle:s,handles:a}=this;if(s==null)return;const{offset:r}=a[s].drag(e);a[s].toggleDragging(!0),s==="bottomRight"&&(r.x=0);let n=[],l=[],c=o;switch(s){case"topLeft":n=["topLeft"],l=["bottomLeft"];break;case"bottomLeft":n=["bottomLeft"],l=["topLeft"];break;case"topRight":n=["topRight"],l=["bottomRight"];break;case"bottomRight":n=["bottomLeft","bottomRight"],c=!1;break}const h=convertLine(t,i),u=convertLine(t.bottom,i);if(!h||!u)return;const p={topLeft:Vec46.start(h),topRight:Vec46.end(h),bottomLeft:Vec46.start(u),bottomRight:Vec46.end(u)},d={vectors:{topLeft:p.topRight,bottomLeft:p.bottomRight,topRight:p.topLeft,bottomRight:p.bottomLeft},angle:t.snapToAngle},g=translate(p,r,i,{overflowContinuous:this.overflowContinuous,translateVectors:n,invertYVectors:l,snap:c?d:void 0});t.start.x=g.topLeft.x,t.start.y=g.topLeft.y,t.end.x=g.topRight.x,t.end.y=g.topRight.y,t.startHeight=g.topLeft.y-g.bottomLeft.y,t.endHeight=g.topRight.y-g.bottomRight.y}getTranslatePointsVectors(t,e){const{bottomLeft:i,bottomRight:o,topLeft:s,topRight:a}=this.handles,r=i.getBBox().y-s.getBBox().y,n=o.getBBox().y-a.getBBox().y,l=Vec210.add(t,Vec210.from(0,r)),c=Vec210.add(e,Vec210.from(0,n));return{start:t,end:e,bottomStart:l,bottomEnd:c}}updateLines(t,e,i){const{topLine:o,bottomLine:s}=this,{lineDashOffset:a,stroke:r,strokeOpacity:n,strokeWidth:l}=t,c={lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:a,stroke:r,strokeOpacity:n,strokeWidth:l};o.setProperties({...e,...c}),s.setProperties({...i,...c})}updateHandles(t,e,i){const{handles:{topLeft:o,topRight:s,bottomLeft:a,bottomRight:r}}=this,n={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};o.update({...n,...Vec46.start(e)}),s.update({...n,...Vec46.end(e)}),a.update({...n,...Vec46.start(i)}),r.update({...n,...Vec210.sub(Vec46.end(i),Vec210.from(r.handle.width/2,r.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(CollidableText,this.text,!!t.text.label),updateChannelText(!1,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,o){const s=e.x1>e.x2,a=e.y1>e.y2,r=a?o.y2:o.y1,n=a?o.y1:o.y2,l=Vec210.from(e);return t.extendEnd&&e.y2===n&&l.push(Vec210.from(s?o.x1:o.x2,a?o.y1:o.y2)),t.extendEnd&&i.y2===r&&l.push(Vec210.from(s?o.x1:o.x2,a?o.y2:o.y1)),l.push(...Vec210.from(i).reverse()),t.extendStart&&i.y1===n&&l.push(Vec210.from(s?o.x2:o.x1,a?o.y1:o.y2)),t.extendStart&&e.y1===r&&l.push(Vec210.from(s?o.x2:o.x1,a?o.y2:o.y1)),l}},import_ag_charts_community68=require("ag-charts-community"),import_ag_charts_core30=require("ag-charts-core"),{StateMachine:StateMachine6,StateMachineProperty:StateMachineProperty6,Debug:Debug6}=import_ag_charts_community68._ModuleSupport,DisjointChannelStateMachine=class extends StateMachine6{constructor(t){const e=({point:l})=>{const c=new DisjointChannelProperties;c.set({start:l,end:l,startHeight:0,endHeight:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topRight:!1,bottomLeft:!1,bottomRight:!1})},o=({offset:l,context:c})=>{const{datum:h,snapping:u}=this;h&&(h.set({end:snapPoint(l,c,u,h.start,h.snapToAngle)}),t.update())},s=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},a=({point:l})=>{const{datum:c,node:h}=this,u=getGroupingValue(c?.end.y),p=getGroupingValue(c?.start.y),{y:d}=l;if(c==null||!(0,import_ag_charts_core30.isNumber)(p)||!(0,import_ag_charts_core30.isNumber)(u)||!(0,import_ag_charts_core30.isNumber)(d))return;const g=u-(d??0),f=(p-u)*2+g,y={x:c?.start.x,y:p-f},m={x:c?.end.x,y:l.y};h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint(y,{overflowContinuous:!0})||!t.validatePoint(m,{overflowContinuous:!0}))&&(c.set({startHeight:f,endHeight:g}),t.update())},r=({point:l})=>{const{datum:c,node:h}=this,u=getGroupingValue(c?.end.y),p=getGroupingValue(c?.start.y),{y:d}=l;if(c==null||!(0,import_ag_charts_core30.isNumber)(p)||!(0,import_ag_charts_core30.isNumber)(u)||!(0,import_ag_charts_core30.isNumber)(d))return;const g=u-(d??0),f=(p-u)*2+g,y={x:c.start.x,y:p-g},m={x:c.end.x,y:l.y};h?.toggleHandles(!0),!(!t.validatePoint(y,{overflowContinuous:!0})||!t.validatePoint(m,{overflowContinuous:!0}))&&(c.set({startHeight:f,endHeight:g}),t.recordAction("Create disjoint-channel annotation"),t.showAnnotationOptions(),t.update())},n=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:StateMachine6.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,drag:o,click:{target:"height",action:s},dragEnd:{target:"height",action:s},reset:{target:StateMachine6.parent,action:n},cancel:{target:StateMachine6.parent,action:n}},height:{hover:a,click:{target:StateMachine6.parent,action:r},drag:{target:StateMachine6.parent,action:r},reset:{target:StateMachine6.parent,action:n},cancel:{target:StateMachine6.parent,action:n}}}),this.debug=Debug6.create(!0,"annotations"),this.snapping=!1}};__decorateClass([StateMachineProperty6()],DisjointChannelStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty6()],DisjointChannelStateMachine.prototype,"node",2),__decorateClass([StateMachineProperty6()],DisjointChannelStateMachine.prototype,"snapping",2);var disjointChannelConfig={type:"disjoint-channel",datum:DisjointChannelProperties,scene:DisjointChannelScene,isDatum:DisjointChannelProperties.is,translate:(t,e,i,o)=>{DisjointChannelProperties.is(e)&&DisjointChannelScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(DisjointChannelProperties.is(e)&&DisjointChannelProperties.is(i)&&DisjointChannelScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{DisjointChannelProperties.is(e)&&DisjointChannelScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new DisjointChannelStateMachine({...t,create:e("disjoint-channel")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community70=require("ag-charts-community"),import_ag_charts_core31=require("ag-charts-core"),import_ag_charts_community69=require("ag-charts-community"),FIBONACCI_RETRACEMENT_RATIOS=[0,23.6,38.2,50,61.8,78.6,100],FIBONACCI_EXTENSION_RATIOS=[161.8,261.8,361.8,423.6],FIBONACCI_RATIOS=[...FIBONACCI_RETRACEMENT_RATIOS,...FIBONACCI_EXTENSION_RATIOS],FIBONACCI_RATIOS_MAP={10:FIBONACCI_RATIOS,6:FIBONACCI_RETRACEMENT_RATIOS,4:FIBONACCI_RETRACEMENT_RATIOS.filter(t=>t!==78.6&&t!==23.6)},FIBONACCI_RANGE_LABEL_PADDING=10;function getFibonacciCoords(t,e){const{x2:i,y1:o,y2:s}=t,a=o-s;return e==null?{x1:i,x2:i,y1:s-a,y2:s}:{x1:e.x1,x2:e.x2,y1:e.y2-a,y2:e.y2}}function createFibonacciRangesData({x1:t,y1:e,x2:i,y2:o},s,a,r,n=10){const l=e-o,c=a?-1:1;let h=r;const u=[];return FIBONACCI_RATIOS_MAP[n].forEach((p,d)=>{const g=r+l*(p/100)*c,f=s.yAxis.scaleInvert(g);u.push({id:d,x1:t,x2:i,y1:h,y2:g,tag:p==100?0:1,label:{x1:Math.min(t,i)-FIBONACCI_RANGE_LABEL_PADDING,x2:i,y1:g,y2:g,text:`${(p/100).toFixed(3)} (${f.toFixed(2)})`}}),h=g}),u}var{Vec2:Vec211,Vec4:Vec47}=import_ag_charts_community69._ModuleSupport,FibonacciScene=class extends AnnotationScene{constructor(){super(),this.trendLine=new CollidableLine,this.rangeFillsGroup=new import_ag_charts_community69._ModuleSupport.Group({name:`${this.id}-range-fills`}),this.rangeFillsGroupSelection=import_ag_charts_community69._ModuleSupport.Selection.select(this.rangeFillsGroup,import_ag_charts_community69._ModuleSupport.Range),this.rangeStrokesGroup=new import_ag_charts_community69._ModuleSupport.Group({name:`${this.id}-range-strokes`}),this.rangeStrokesGroupSelection=import_ag_charts_community69._ModuleSupport.Selection.select(this.rangeStrokesGroup,CollidableLine),this.labelsGroup=new import_ag_charts_community69._ModuleSupport.Group({name:`${this.id}-ranges-labels`}),this.labelsGroupSelection=import_ag_charts_community69._ModuleSupport.Selection.select(this.labelsGroup,CollidableText),this.anchor={x:0,y:0,position:"above"},this.append([this.trendLine,this.rangeFillsGroup,this.rangeStrokesGroup,this.labelsGroup])}update(t,e){let i=convertLine(t,e);if(i==null){this.visible=!1;return}if(i=Vec47.round(i),this.visible=t.visible??!0,!this.visible)return;this.updateLine(t,i,this.trendLine),this.updateHandles(t,i),this.updateAnchor(t,i,e);const{reverse:o}=t,s=this.extendLine(i,t,e),a=o?s.y1:s.y2,r=o?s.y2:s.y1,n=createFibonacciRangesData(s,e,t.reverse,a,t.bands);this.updateRanges(t,n,e);const l={...s,y1:r,y2:r};this.updateText(t,l)}extendLine({x1:t,y1:e,x2:i,y2:o},s,a){const r={x1:t,y1:e,x2:i,y2:o};if(!s.extendStart&&!s.extendEnd)return r;const{x:n,width:l}=a.xAxis.bounds;return s.extendEnd&&(r[t>i?"x1":"x2"]=n+l),s.extendStart&&(r[t>i?"x2":"x1"]=n),r}updateLine(t,e,i){if(!e||!i)return;const{lineDashOffset:o,strokeWidth:s,strokeOpacity:a,stroke:r}=t;i.setProperties({...e,lineCap:t.getLineCap(),lineDash:[3,4],lineDashOffset:o,strokeWidth:s,strokeOpacity:a,fillOpacity:0,stroke:r})}updateRangeStrokes(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:o,strokes:s,rangeStroke:a,isMultiColor:r}=t;this.rangeStrokesGroupSelection.each((n,{x1:l,x2:c,y2:h,tag:u},p)=>{const d=h,g=r?s[p%s.length]:a;n.setProperties({x1:l,x2:c,y1:d,y2:d,stroke:g,strokeOpacity:o,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,tag:u})})}updateRanges(t,e,i){const o=s=>s.id;this.rangeFillsGroupSelection.update(e,void 0,o),this.rangeStrokesGroupSelection.update(e,void 0,o),this.labelsGroupSelection.update(e,void 0,o),this.updateRangeFills(t),this.updateRangeStrokes(t),this.updateRangeLabels(t,i)}updateRangeFills(t){const{lineDashOffset:e,strokeWidth:i,strokeOpacity:o,strokes:s,rangeStroke:a,showFill:r,isMultiColor:n}=t;this.rangeFillsGroupSelection.each((l,{x1:c,x2:h,y1:u,y2:p},d)=>{const g=n?s[d%s.length]:a;if(!r){l.visible=!1;return}l.setProperties({x1:c,x2:h,y1:u,y2:p,startLine:!1,endLine:!1,isRange:!0,stroke:g,strokeOpacity:o,fill:g,fillOpacity:(o??1)*.15,strokeWidth:i,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,visible:!0})})}updateRangeLabels(t,{xAxis:e}){const{rangeStrokesGroupSelection:i}=this,{strokes:o,strokeWidth:s,rangeStroke:a,isMultiColor:r,label:{fontFamily:n,fontSize:l,fontStyle:c,fontWeight:h,color:u}}=t,p={fontFamily:n,fontSize:l,fontStyle:c,fontWeight:h},d=this.checkWithinBounds(e,p,this.labelsGroupSelection.at(0));this.labelsGroupSelection.each((g,f,y)=>{const m=u??(r?o[y%o.length]:a),b=i.at(y);if(!b)return;const{text:x,...S}=f.label;if(d)g.setProperties({...p,text:x,x:S.x1,y:S.y1,textBaseline:"middle",textAlign:"end",fill:m}),updateLineText(g.id,b,S);else{const v={...p,label:x,position:"center",alignment:"left",color:m};updateLineText(g.id,b,S,v,g,x,s)}})}checkWithinBounds(t,e,i){if(!i)return!1;const{text:o,...s}=i.datum.label;i.setProperties({...e,text:o,x:s.x1,y:s.y1,textBaseline:"middle",textAlign:"end"});const{x:a}=i.getBBox();return a>=t.bounds.x&&a<=t.bounds.x+t.bounds.width}updateText(t,e){const i=this.rangeStrokesGroupSelection.selectByTag(0)[0];if(!i)return;const{text:o,strokeWidth:s}=t;this.text=this.updateNode(CollidableText,this.text,!!o.label),updateLineText(i.id,i,e,o,this.text,o.label,s)}updateAnchor(t,e,i,o){const s=Vec47.topCenter(e);Vec211.apply(this.anchor,import_ag_charts_community69._ModuleSupport.Transformable.toCanvasPoint(this.trendLine,s.x,s.y))}containsPoint(t,e){const{trendLine:i,rangeStrokesGroupSelection:o,text:s}=this;let a=!1;return o.each(r=>a||(a=r.isPointInPath(t,e))),a||i.isPointInPath(t,e)||!!s?.containsPoint(t,e)}getNodeAtCoords(t,e){if(this.text?.containsPoint(t,e))return"text";if(this.trendLine.isPointInPath(t,e))return"line"}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}drag(t,e,i,o){t.locked||(this.activeHandle?this.dragHandle(t,e,i,o):this.dragAll(t,e,i))}getAnchor(){return this.anchor}getCursor(){return"pointer"}},{Vec2:Vec212,Vec4:Vec48}=import_ag_charts_community70._ModuleSupport,FibonacciRetracementTrendBasedScene=class extends FibonacciScene{constructor(){super(),this.type="fibonacci-retracement-trend-based",this.endRetracementLine=new CollidableLine,this.start=new DivariantHandle,this.end=new DivariantHandle,this.endRetracement=new DivariantHandle,this.append([this.endRetracementLine,this.start,this.end,this.endRetracement])}static is(t){return AnnotationScene.isCheck(t,"fibonacci-retracement-trend-based")}update(t,e){let{coords1:i,coords2:o}=this.getCoords(t,e);if(i==null||o==null){this.visible=!1;return}if(i=Vec48.round(i),o=Vec48.round(o),this.visible=t.visible??!0,!this.visible)return;(t.endRetracement.x==null||t.endRetracement.y==null)&&(o=void 0),this.updateLine(t,i,this.trendLine),this.updateLine(t,o,this.endRetracementLine),this.updateHandles(t,i,o),this.updateAnchor(t,o??i,e);const{reverse:s,bands:a}=t,r=getFibonacciCoords(i,o),n=this.extendLine(r,t,e),l=n.y2,c=n.y1,h=o?createFibonacciRangesData(n,e,s,l,a):[];this.updateRanges(t,h,e);const u={...n,y1:c,y2:c};this.updateText(t,u)}containsPoint(t,e){const{start:i,end:o,endRetracement:s,endRetracementLine:a}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):o.containsPoint(t,e)?(this.activeHandle="end",!0):s.containsPoint(t,e)?(this.activeHandle="endRetracement",!0):a.isPointInPath(t,e)||super.containsPoint(t,e)}getNodeAtCoords(t,e){return this.start.containsPoint(t,e)||this.end.containsPoint(t,e)||this.endRetracement.containsPoint(t,e)?"handle":this.endRetracementLine.isPointInPath(t,e)?"line":super.getNodeAtCoords(t,e)}dragStart(t,e,i){this.dragState={offset:e,...getDragStartState({start:t.start,end:t.end,endRetracement:t.endRetracement},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1),this.endRetracement.toggleDragging(!1)}dragAll(t,e,i){const{dragState:o}=this;o&&this.translatePoints({datum:t,start:o.start,end:o.end,endRetracement:o.endRetracement,translation:Vec212.sub(e,o.offset),context:i})}dragHandle(t,e,i,o){const{activeHandle:s,dragState:a}=this;if(!s||!a)return;this[s].toggleDragging(!0);const r=o?this.snapToAngle(t,e,i):invertCoords(this[s].drag(e).point,i);!r||!validateDatumPoint(i,r)||(t[s].x=r.x,t[s].y=r.y)}snapToAngle(t,e,i){const{activeHandle:o}=this,s=["start","end","endRetracement"];if(!o)return;const a=(s.indexOf(o)+1)%s.length,r=s[a];this[o].toggleDragging(!0);const n=convertPoint(t[r],i);return invertCoords(snapToAngle(e,n,t.snapToAngle),i)}translatePoints({datum:t,start:e,end:i,endRetracement:o,translation:s,context:a}){const r=translate({start:e,end:i,endRetracement:o},s,a,{overflowContinuous:2});t.start.x=r.start.x,t.end.x=r.end.x,t.endRetracement.x=r.endRetracement.x,t.start.y=r.start.y,t.end.y=r.end.y,t.endRetracement.y=r.endRetracement.y}translate(t,e,i){this.translatePoints({datum:t,start:convertPoint(t.start,i),end:convertPoint(t.end,i),endRetracement:convertPoint(t.endRetracement,i),translation:e,context:i})}copy(t,e,i){const{coords1:o,coords2:s}=this.getCoords(t,i);if(!o||!s)return;const a=this.computeBBoxWithoutHandles();return this.translatePoints({datum:e,start:Vec48.start(o),end:Vec48.end(o),endRetracement:Vec48.end(s),translation:{x:-a.width/2,y:-a.height/2},context:i}),e}getCoords(t,e){return{coords1:convertLine(t,e),coords2:convertLine({start:t.end,end:t.endRetracement},e)}}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t,this.endRetracement.visible=t;else for(const[e,i]of(0,import_ag_charts_core31.entries)(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end"),this.endRetracement.toggleHovered(this.activeHandle==="endRetracement")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t),this.endRetracement.toggleActive(t)}updateHandles(t,e,i,o){this.start.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"end",o)}),i&&this.endRetracement.update({...this.getHandleStyles(t),...this.getHandleCoords(t,i,"endRetracement",o)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1),this.endRetracement.toggleLocked(t.locked??!1)}getHandleCoords(t,e,i,o){return i==="start"?Vec48.start(e):Vec48.end(e)}},import_ag_charts_community71=require("ag-charts-community"),{StateMachine:StateMachine7,StateMachineProperty:StateMachineProperty7,Debug:Debug7}=import_ag_charts_community71._ModuleSupport,FibonacciRetracementTrendBasedStateMachine=class extends StateMachine7{constructor(t){const e=({point:c})=>{const h=this.createDatum();h.set({start:c,end:c}),t.create(h)},i=()=>{const{node:c}=this;c?.toggleActive(!0),c?.toggleHandles({start:!0,end:!1,endRetracement:!1})},o=({offset:c,context:h})=>{const{datum:u,snapping:p}=this;u&&(u.set({end:snapPoint(c,h,p,u.start,u.snapToAngle)}),t.update())},s=()=>{const{datum:c}=this;c&&(c.endRetracement.x=c.end.x,c.endRetracement.y=c.end.y,this.node?.toggleHandles({end:!0}),t.update())},a=({offset:c,context:h})=>{const{datum:u,snapping:p}=this;u&&(u.set({endRetracement:snapPoint(c,h,p,u.end,u.snapToAngle)}),t.update())},r=()=>{this.node?.toggleHandles({endRetracement:!0}),t.update()},n=()=>t.delete(),l=()=>{t.showAnnotationOptions(),t.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:StateMachine7.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,click:{target:"endRetracement",action:s},drag:o,dragEnd:{target:"endRetracement",action:s},reset:{target:StateMachine7.parent,action:n},cancel:{target:StateMachine7.parent,action:n},onExit:l},endRetracement:{hover:a,click:{target:StateMachine7.parent,action:r},drag:{target:StateMachine7.parent,action:r},reset:{target:StateMachine7.parent,action:n},cancel:{target:StateMachine7.parent,action:n}}}),this.debug=Debug7.create(!0,"annotations"),this.snapping=!1}createDatum(){return new FibonacciRetracementTrendBasedProperties}};__decorateClass([StateMachineProperty7()],FibonacciRetracementTrendBasedStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty7()],FibonacciRetracementTrendBasedStateMachine.prototype,"node",2),__decorateClass([StateMachineProperty7()],FibonacciRetracementTrendBasedStateMachine.prototype,"snapping",2);var fibonacciRetracementTrendBasedConfig={type:"fibonacci-retracement-trend-based",datum:FibonacciRetracementTrendBasedProperties,scene:FibonacciRetracementTrendBasedScene,isDatum:FibonacciRetracementTrendBasedProperties.is,translate:(t,e,i,o)=>{FibonacciRetracementTrendBasedProperties.is(e)&&FibonacciRetracementTrendBasedScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(FibonacciRetracementTrendBasedProperties.is(e)&&FibonacciRetracementTrendBasedProperties.is(i)&&FibonacciRetracementTrendBasedScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{FibonacciRetracementTrendBasedProperties.is(e)&&FibonacciRetracementTrendBasedScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new FibonacciRetracementTrendBasedStateMachine({...t,create:e("fibonacci-retracement-trend-based")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community72=require("ag-charts-community"),import_ag_charts_core32=require("ag-charts-core"),{Vec2:Vec213,Vec4:Vec49}=import_ag_charts_community72._ModuleSupport,FibonacciRetracementScene=class extends FibonacciScene{constructor(){super(),this.type="fibonacci-retracement",this.start=new DivariantHandle,this.end=new DivariantHandle,this.append([this.start,this.end])}static is(t){return AnnotationScene.isCheck(t,"fibonacci-retracement")}containsPoint(t,e){const{start:i,end:o}=this;return this.activeHandle=void 0,i.containsPoint(t,e)?(this.activeHandle="start",!0):o.containsPoint(t,e)?(this.activeHandle="end",!0):super.containsPoint(t,e)}getNodeAtCoords(t,e){return this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":super.getNodeAtCoords(t,e)}dragStart(t,e,i){this.dragState={offset:e,...getDragStartState({start:t.start,end:t.end},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}dragAll(t,e,i){const{dragState:o}=this;o&&this.translatePoints({datum:t,start:o.start,end:o.end,translation:Vec213.sub(e,o.offset),context:i})}dragHandle(t,e,i,o){const{activeHandle:s,dragState:a}=this;if(!s||!a)return;this[s].toggleDragging(!0);const r=o?this.snapToAngle(t,e,i):invertCoords(this[s].drag(e).point,i);!r||!validateDatumPoint(i,r)||(t[s].x=r.x,t[s].y=r.y)}snapToAngle(t,e,i){const{activeHandle:o}=this,a=["start","end"].find(n=>n!==o);if(!o||!a)return;this[o].toggleDragging(!0);const r=convertPoint(t[a],i);return invertCoords(snapToAngle(e,r,t.snapToAngle),i)}translatePoints({datum:t,start:e,end:i,translation:o,context:s}){const a=translate({start:e,end:i},o,s,{overflowContinuous:1});t.start.x=a.start.x,t.end.x=a.end.x,t.start.y=a.start.y,t.end.y=a.end.y}translate(t,e,i){this.translatePoints({datum:t,start:convertPoint(t.start,i),end:convertPoint(t.end,i),translation:e,context:i})}copy(t,e,i){const o=convertLine(t,i);if(!o)return;const s=this.computeBBoxWithoutHandles();return this.translatePoints({datum:e,start:{x:o.x1,y:o.y1},end:{x:o.x2,y:o.y2},translation:{x:-s.width/2,y:-s.height/2},context:i}),e}toggleHandles(t){if(typeof t=="boolean")this.start.visible=t,this.end.visible=t;else for(const[e,i]of(0,import_ag_charts_core32.entries)(t))this[e].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}updateHandles(t,e,i,o){this.start.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"start")}),this.end.update({...this.getHandleStyles(t),...this.getHandleCoords(t,e,"end",o)}),this.start.toggleLocked(t.locked??!1),this.end.toggleLocked(t.locked??!1)}getHandleCoords(t,e,i,o){return i==="start"?Vec49.start(e):Vec49.end(e)}},import_ag_charts_community73=require("ag-charts-community"),{StateMachine:StateMachine8,StateMachineProperty:StateMachineProperty8,Debug:Debug8}=import_ag_charts_community73._ModuleSupport,LineTypeStateMachine=class extends StateMachine8{constructor(t){const e=({point:n})=>{const l=this.createDatum();l.set({start:n,end:n}),t.create(l)},i=()=>{const{node:n}=this;n?.toggleActive(!0),n?.toggleHandles({start:!0,end:!1})},o=({offset:n,context:l})=>{const{datum:c,snapping:h}=this;c&&(c.set({end:snapPoint(n,l,h,c.start,c.snapToAngle)}),t.update())},s=()=>{this.node?.toggleHandles({end:!0}),t.update()},a=()=>t.delete(),r=()=>{t.showAnnotationOptions(),t.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:StateMachine8.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,click:{target:StateMachine8.parent,action:s},drag:o,dragEnd:{target:StateMachine8.parent,action:s},reset:{target:StateMachine8.parent,action:a},cancel:{target:StateMachine8.parent,action:a},onExit:r}}),this.debug=Debug8.create(!0,"annotations"),this.snapping=!1}};__decorateClass([StateMachineProperty8()],LineTypeStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty8()],LineTypeStateMachine.prototype,"node",2),__decorateClass([StateMachineProperty8()],LineTypeStateMachine.prototype,"snapping",2);var ArrowStateMachine=class extends LineTypeStateMachine{createDatum(){return new ArrowProperties}},LineStateMachine=class extends LineTypeStateMachine{createDatum(){return new LineProperties}},FibonacciRetracementStateMachine=class extends LineTypeStateMachine{createDatum(){return new FibonacciRetracementProperties}},fibonacciRetracementConfig={type:"fibonacci-retracement",datum:FibonacciRetracementProperties,scene:FibonacciRetracementScene,isDatum:FibonacciRetracementProperties.is,translate:(t,e,i,o)=>{FibonacciRetracementProperties.is(e)&&FibonacciRetracementScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(FibonacciRetracementProperties.is(e)&&FibonacciRetracementProperties.is(i)&&FibonacciRetracementScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{FibonacciRetracementProperties.is(e)&&FibonacciRetracementScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new FibonacciRetracementStateMachine({...t,create:e("fibonacci-retracement")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community75=require("ag-charts-community"),import_ag_charts_community74=require("ag-charts-community"),{Vec2:Vec214}=import_ag_charts_community74._ModuleSupport,CapScene=class extends import_ag_charts_community74._ModuleSupport.Group{},ArrowCapScene=class extends CapScene{constructor(){super(),this.type="arrow",this.path=new import_ag_charts_community74._ModuleSupport.Path,this.armLength=6,this.append([this.path])}update(t){const{path:e}=this,{x:i,y:o,angle:s,...a}=t,r=Vec214.from(i,o),n=3*Math.PI/4,l=this.armLength+(t.strokeWidth??0)*2,c=Vec214.rotate(Vec214.from(0,l),s+n,r),h=Vec214.rotate(Vec214.from(l,0),s-n,r);e.setProperties(a),e.fillOpacity=0,e.path.clear(),e.path.moveTo(c.x,c.y),e.path.lineTo(r.x,r.y),e.path.lineTo(h.x,h.y)}},{Vec2:Vec215,Vec4:Vec410}=import_ag_charts_community75._ModuleSupport,LineScene=class extends StartEndScene{constructor(){super(),this.type="line",this.line=new CollidableLine,this.append([this.line,this.start,this.end])}static is(t){return AnnotationScene.isCheck(t,"line")}update(t,e){let i=convertLine(t,e);if(i==null){this.visible=!1;return}i=Vec410.round(i),this.visible=t.visible??!0,this.visible&&(this.updateLine(t,i,e),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateAnchor(t,i,e))}updateLine(t,e,i){const{line:o}=this,{lineDashOffset:s,stroke:a,strokeWidth:r,strokeOpacity:n}=t,l=this.extendLine(e,t,i);o.setProperties({...l,lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:s,stroke:a,strokeWidth:r,strokeOpacity:n,fillOpacity:0})}updateText(t,e){this.text=this.updateNode(CollidableText,this.text,!!t.text.label),updateLineText(this.line.id,this.line,e,t.text,this.text,t.text.label,t.strokeWidth)}updateCaps(t,e){if(!t.startCap&&this.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),!t.endCap&&this.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),!t.startCap&&!t.endCap)return;const{stroke:i,strokeWidth:o,strokeOpacity:s}=t,[a,r]=Vec215.from(e),n=Vec215.angle(Vec215.sub(r,a));t.startCap&&(this.startCap&&this.startCap.type!==t.startCap&&(this.removeChild(this.startCap),this.startCap=void 0),this.startCap==null&&(this.startCap=new ArrowCapScene,this.append([this.startCap])),this.startCap.update({x:a.x,y:a.y,angle:n-Math.PI,stroke:i,strokeWidth:o,strokeOpacity:s})),t.endCap&&(this.endCap&&this.endCap.type!==t.endCap&&(this.removeChild(this.endCap),this.endCap=void 0),this.endCap==null&&(this.endCap=new ArrowCapScene,this.append([this.endCap])),this.endCap.update({x:r.x,y:r.y,angle:n,stroke:i,strokeWidth:o,strokeOpacity:s}))}updateAnchor(t,e,i,o){const s=Vec410.topCenter(e);Vec215.apply(this.anchor,import_ag_charts_community75._ModuleSupport.Transformable.toCanvasPoint(this.line,s.x,s.y))}containsPoint(t,e){const{line:i,text:o}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||!!o?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.line.isPointInPath(t,e)?"line":super.getNodeAtCoords(t,e)}getHandleCoords(t,e,i,o){const{startCap:s,endCap:a}=this;let[r,n]=Vec215.from(e);const l=Vec215.angle(Vec215.sub(n,r));return s&&(r=Vec215.rotate(Vec215.from(0,-DivariantHandle.HANDLE_SIZE/2),l,r)),a&&(n=Vec215.rotate(Vec215.from(0,DivariantHandle.HANDLE_SIZE/2),l,n)),i==="start"?r:n}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}},lineConfig={type:"line",datum:LineProperties,scene:LineScene,isDatum:LineProperties.is,translate:(t,e,i,o)=>{LineProperties.is(e)&&LineScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(LineProperties.is(e)&&LineProperties.is(i)&&LineScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{LineProperties.is(e)&&LineScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new LineStateMachine({...t,create:e("line")}),dragState:t=>new DragStateMachine(t)},arrowConfig={type:"arrow",datum:ArrowProperties,scene:LineScene,isDatum:ArrowProperties.is,translate:(t,e,i,o)=>{ArrowProperties.is(e)&&LineScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ArrowProperties.is(e)&&ArrowProperties.is(i)&&LineScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ArrowProperties.is(e)&&LineScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new ArrowStateMachine({...t,create:e("arrow")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community78=require("ag-charts-community"),import_ag_charts_core33=require("ag-charts-core"),import_ag_charts_community77=require("ag-charts-community"),import_ag_charts_community76=require("ag-charts-community");function layoutScenesRow(t,e=0,i=0){let o=e;for(const s of t)if(Array.isArray(s)){for(const a of s)layoutSetX(a,o);o+=import_ag_charts_community76._ModuleSupport.Group.computeChildrenBBox(s).width+i}else layoutSetX(s,o),o+=s.getBBox().width+i}function layoutScenesColumn(t,e=0,i=0){let o=e;for(const s of t)if(Array.isArray(s)){for(const a of s)layoutSetY(a,o);o+=import_ag_charts_community76._ModuleSupport.Group.computeChildrenBBox(s).height+i}else layoutSetY(s,o),o+=s.getBBox().height+i}function layoutSetX(t,e){"x1"in t?(t.x2=e+(t.x2-t.x1),t.x1=e):t.x=e}function layoutSetY(t,e){"y1"in t?(t.y2=e+(t.y2-t.y1),t.y1=e):t.y=e}function layoutAddX(t,e){"x1"in t?(t.x1+=e,t.x2+=e):t.x+=e}function layoutAddY(t,e){"y1"in t?(t.y1+=e,t.y2+=e):t.y+=e}var{Vec4:Vec411}=import_ag_charts_community77._ModuleSupport,MeasurerStatisticsScene=class extends import_ag_charts_community77._ModuleSupport.Group{constructor(){super(),this.name="MeasurerStatisticsScene",this.background=new import_ag_charts_community77._ModuleSupport.Rect,this.dateRangeBarsText=new import_ag_charts_community77._ModuleSupport.Text,this.dateRangeDivider=new import_ag_charts_community77._ModuleSupport.Line,this.dateRangeValueText=new import_ag_charts_community77._ModuleSupport.Text,this.priceRangeValueText=new import_ag_charts_community77._ModuleSupport.Text,this.priceRangeDivider=new import_ag_charts_community77._ModuleSupport.Line,this.priceRangePercentageText=new import_ag_charts_community77._ModuleSupport.Text,this.volumeText=new import_ag_charts_community77._ModuleSupport.Text,this.volumeFormatter=new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}),this.append([this.background,this.dateRangeBarsText,this.dateRangeDivider,this.dateRangeValueText,this.priceRangeValueText,this.priceRangeDivider,this.priceRangePercentageText,this.volumeText])}update(t,e,i,o,s,a,r){this.verticalDirection=a;const n=this.updateStatistics(t,e,i,r),l=import_ag_charts_community77._ModuleSupport.Group.computeChildrenBBox(n.flat()),c=10;l.grow(c),this.updateBackground(t,l,c),this.reposition(n,c,s),this.checkVisibility(t,s,o)}checkVisibility(t,e,i){const o=Vec411.from(new import_ag_charts_community77._ModuleSupport.BBox(0,0,e.seriesRect.width,e.seriesRect.height));Vec411.collides(i,o)?this.visible=t.visible??!0:this.visible=!1}updateStatistics(t,e,i,o){const{dateRangeBarsText:s,dateRangeDivider:a,dateRangeValueText:r,priceRangeValueText:n,priceRangeDivider:l,priceRangePercentageText:c,volumeText:h}=this,u=8,p=6,d=t.statistics.fontSize+3,g=-2,f=this.getTextStyles(t),y={...this.getDividerStyles(t),x1:0,y1:0,x2:0,y2:d},m=[s,a,r],b=[n,l,c],x=[];return e.priceRange&&(n.setProperties({...f,text:this.formatPriceRangeValue(e.priceRange.value,o)}),l.setProperties(y),c.setProperties({...f,text:this.formatPriceRangePercentage(e.priceRange.percentage,o)}),layoutScenesRow(b,i.x,u),x.push(b)),e.dateRange&&(s.setProperties({...f,text:this.formatDateRangeBars(e.dateRange.bars,o)}),a.setProperties(y),r.setProperties({...f,text:this.formatDateRangeValue(e.dateRange.value)}),layoutScenesRow(m,i.x,u),x.push(m)),e.volume!=null?(h.setProperties({...f,x:i.x,text:this.formatVolume(e.volume,o),visible:!0}),x.push(h)):h.visible=!1,layoutScenesColumn(x,i.y,p),l.y1+=g,l.y2+=g,a.y1+=g,a.y2+=g,x}updateBackground(t,e,i){const o=this.getBackgroundStyles(t);this.background.setProperties({...o,...e,x:e.x-e.width/2+i,y:e.y})}reposition(t,e,i){const{width:o,height:s}=i.seriesRect,a=Vec411.from(this.background.getBBox());let r=0;a.x1<0&&(r=-a.x1),a.x2>o&&(r=o-a.x2);const n=Math.min(e,s-a.y2);for(const l of t)if(Array.isArray(l)){const c=import_ag_charts_community77._ModuleSupport.Group.computeChildrenBBox(l).width;for(const h of l)layoutAddX(h,r-c/2),layoutAddY(h,n)}else layoutAddX(l,r-l.getBBox().width/2),layoutAddY(l,n);this.background.x+=r,this.background.y+=n}getTextStyles(t){return{fill:t.statistics.color,fontFamily:t.statistics.fontFamily,fontSize:t.statistics.fontSize,fontStyle:t.statistics.fontStyle,fontWeight:t.statistics.fontWeight,textBaseline:"top"}}getDividerStyles(t){return{stroke:t.statistics.divider.stroke,strokeOpacity:t.statistics.divider.strokeOpacity,strokeWidth:t.statistics.divider.strokeWidth}}getBackgroundStyles(t){return{fill:t.statistics.fill,stroke:t.statistics.stroke,strokeOpacity:t.statistics.strokeOpacity,strokeWidth:t.statistics.strokeWidth,cornerRadius:4}}formatDateRangeBars(t,e){return e?.t("measurerDateRangeBars",{value:t})??`${t}`}formatDateRangeValue(t){const e=[],i=t>=0?"":"-";t=Math.abs(t);const o=1e3*60,s=o*60,a=s*24,r=Math.floor(t/o),n=Math.floor(t/s),l=Math.floor(t/a),c=n%(a/s),h=r%(s/o);return l>=1&&e.push(`${l}d`),n>=1&&(t<a||c!==0)&&e.push(`${c}h`),(t<s||h!==0)&&e.push(`${h}m`),e[0]=`${i}${e[0]}`,e.join(" ")}formatPriceRangeValue(t,e){return e?.t("measurerPriceRangeValue",{value:Number(t.toFixed(2))})??`${t}`}formatPriceRangePercentage(t,e){return e?.t("measurerPriceRangePercent",{value:t})??`${t}`}formatVolume(t,e){const i=isNaN(t)?"":this.volumeFormatter.format(t);return e?.t("measurerVolume",{value:i})??i}},QuickMeasurerStatisticsScene=class extends MeasurerStatisticsScene{getDirectionStyles(t){return this.verticalDirection==="down"?t.down.statistics:t.up.statistics}getTextStyles(t){const e=this.getDirectionStyles(t);return{...super.getTextStyles(t),fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight}}getDividerStyles(t){const e=this.getDirectionStyles(t);return{stroke:e.divider.stroke,strokeOpacity:e.divider.strokeOpacity,strokeWidth:e.divider.strokeWidth}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{...super.getBackgroundStyles(t),fill:e.fill,stroke:e.stroke,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth}}},{Vec2:Vec216,Vec4:Vec412}=import_ag_charts_community78._ModuleSupport,MeasurerScene=class extends StartEndScene{constructor(){super(),this.type="measurer",this.horizontalLine=new CollidableLine,this.verticalLine=new CollidableLine,this.horizontalStartLine=new CollidableLine,this.horizontalEndLine=new CollidableLine,this.verticalStartLine=new CollidableLine,this.verticalEndLine=new CollidableLine,this.horizontalEndCap=new ArrowCapScene,this.verticalEndCap=new ArrowCapScene,this.background=new import_ag_charts_community78._ModuleSupport.Path({zIndex:-1}),this.updateBackground=WithBackgroundScene.updateBackground.bind(this),this.statistics=this.createStatisticsScene(),this.statistics.zIndex=1,this.append([this.background,this.verticalStartLine,this.verticalEndLine,this.horizontalStartLine,this.horizontalEndLine,this.horizontalLine,this.verticalLine,this.horizontalEndCap,this.verticalEndCap,this.start,this.end,this.statistics])}static is(t){return AnnotationScene.isCheck(t,"measurer")}createStatisticsScene(){return new MeasurerStatisticsScene}update(t,e){const i=convertLine(t,e);if(i==null){this.visible=!1;return}if(this.visible=t.visible??!0,!this.visible)return;const o=this.extendPerpendicular(i,t,e),s={...o,y2:o.y1},a={...o,y1:o.y2};this.verticalDirection=i.y1<i.y2?"down":"up",this.updateVisibilities(t),this.updateLines(t,i),this.updateHandles(t,i),this.updateText(t,i),this.updateCaps(t,i),this.updateBoundingLines(t,o),this.updateBackground(t,s,a,e),this.updateStatistics(t,i,e),this.updateAnchor(t,i,e)}extendPerpendicular(t,e,i){const o={x1:Math.min(t.x1,t.x2),x2:Math.max(t.x1,t.x2),y1:Math.min(t.y1,t.y2),y2:Math.max(t.y1,t.y2)},[s,a]=Vec216.from(i.yAxis.bounds);return DateRangeProperties.is(e)?(e.extendAbove&&(o.y1=s.y),e.extendBelow&&(o.y2=a.y)):PriceRangeProperties.is(e)&&(e.extendLeft&&(o.x1=s.x),e.extendRight&&(o.x2=a.x)),o}updateVisibilities(t){const{horizontalStartLine:e,horizontalEndLine:i,horizontalEndCap:o,verticalStartLine:s,verticalEndLine:a,verticalEndCap:r}=this,{direction:n}=t;s.visible=n!=="vertical",a.visible=n!=="vertical",o.visible=n!=="vertical",e.visible=n!=="horizontal",i.visible=n!=="horizontal",r.visible=n!=="horizontal"}updateLines(t,e){const{horizontalLine:i,verticalLine:o}=this,{direction:s}=t,{x1:a,y1:r,x2:n,y2:l}=e,c=Vec216.round(Vec412.center(e),0),h=this.getLineStyles(t);s!=="vertical"&&i.setProperties({...h,x1:a,x2:n,y1:c.y,y2:c.y}),s!=="horizontal"&&o.setProperties({...h,x1:c.x,x2:c.x,y1:r,y2:l})}updateText(t,e){const{direction:i}=t,o=Vec216.round(Vec412.center(e),0);let s;const a={...e};i==="vertical"?(s=this.verticalLine,a.x1=o.x,a.x2=o.x):(s=this.horizontalLine,a.y1=o.y,a.y2=o.y),this.text=this.updateNode(CollidableText,this.text,!!t.text.label);const{id:r}=s,n=updateLineText(r,s,a,t.text,this.text,t.text.label,t.strokeWidth);let l;if(i==="both"&&n&&this.text){const c=Vec412.from(this.text.getBBox()),{offset:h}=n.numbers;c.x1<=o.x+h.x&&c.x2>=o.x-h.x&&(l={x:o.x,y:n.clipMask.y,radius:this.text.getBBox().height/2+Vec216.length(h)})}this.verticalLine.setClipMask(r,l)}updateCaps(t,e){const{horizontalEndCap:i,verticalEndCap:o}=this,{direction:s}=t,{x1:a,y1:r,x2:n,y2:l}=e,c=Vec216.round(Vec412.center(e),0),{stroke:h,strokeWidth:u,strokeOpacity:p}=this.getLineStyles(t),d={stroke:h,strokeWidth:u,strokeOpacity:p};if(s!=="vertical"){const g=a<=n?0:Math.PI;let f=n;s==="horizontal"&&(f+=a<=n?-2:2),i.update({...d,x:f,y:c.y,angle:g})}if(s!=="horizontal"){const g=r<=l?Math.PI/2:Math.PI/-2;let f=l;s==="vertical"&&(f+=r<=l?-2:2),o.update({...d,x:c.x,y:f,angle:g})}}updateBoundingLines(t,e){const{verticalStartLine:i,verticalEndLine:o,horizontalStartLine:s,horizontalEndLine:a}=this,{direction:r}=t,{x1:n,y1:l,x2:c,y2:h}=e,u=this.getLineStyles(t);r==="horizontal"&&(i.setProperties({...u,x1:n,y1:l,x2:n,y2:h}),o.setProperties({...u,x1:c,y1:l,x2:c,y2:h})),r==="vertical"&&(s.setProperties({...u,x1:n,y1:l,x2:c,y2:l}),a.setProperties({...u,x1:n,y1:h,x2:c,y2:h}))}updateStatistics(t,e,i){const o=Vec216.add(Vec412.bottomCenter(e),Vec216.from(0,10)),s={volume:this.getVolume(t)};t.hasPriceRange&&(s.priceRange={percentage:this.getPriceRangePercentage(t),value:this.getPriceRangeValue(t)}),t.hasDateRange&&(s.dateRange={bars:this.getDateRangeBars(e,i),value:this.getDateRangeValue(t)}),this.statistics.update(t,s,o,e,i,this.verticalDirection,t.localeManager)}updateAnchor(t,e,i,o){const s=Vec412.topCenter(e);Vec216.apply(this.anchor,import_ag_charts_community78._ModuleSupport.Transformable.toCanvasPoint(this.horizontalLine,s.x,s.y))}getBackgroundPoints(t,e,i,o){const[s,a]=Vec216.from(e),[r,n]=Vec216.from(i);return[s,a,n,r]}getLineStyles(t){const{lineDashOffset:e,stroke:i,strokeWidth:o,strokeOpacity:s}=t;return{lineCap:t.getLineCap(),lineDash:t.getLineDash(),lineDashOffset:e,stroke:i,strokeWidth:o,strokeOpacity:s,fillOpacity:0}}getBackgroundStyles(t){const{background:e}=t;return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}containsPoint(t,e){const{horizontalLine:i,text:o,verticalLine:s,horizontalStartLine:a,horizontalEndLine:r,verticalStartLine:n,verticalEndLine:l}=this;return super.containsPoint(t,e)||i.isPointInPath(t,e)||s.isPointInPath(t,e)||a.visible&&a.isPointInPath(t,e)||r.visible&&r.isPointInPath(t,e)||n.visible&&n.isPointInPath(t,e)||l.visible&&l.isPointInPath(t,e)||!!o?.containsPoint(t,e)}getNodeAtCoords(t,e){return this.text?.containsPoint(t,e)?"text":this.start.containsPoint(t,e)||this.end.containsPoint(t,e)?"handle":"line"}getDateRangeBars(t,e){const{step:i}=e.xAxis.scale,o=t.x1<=t.x2?1:-1;return i?Math.round(Vec412.width(t)/i)*o:0}getDateRangeValue(t){const e=getGroupingValue(t.start.x),i=getGroupingValue(t.end.x);if(!(0,import_ag_charts_core33.isDate)(e)||!(0,import_ag_charts_core33.isDate)(i))throw new Error("Can not create a date range measurement of non-date x-axis.");return i.getTime()-e.getTime()}getPriceRangePercentage(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const e=getGroupingValue(t.end.y),i=getGroupingValue(t.start.y);if(!(0,import_ag_charts_core33.isNumber)(e)||!(0,import_ag_charts_core33.isNumber)(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return(e-i)/i}getPriceRangeValue(t){if(t.start.y==null||t.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const e=getGroupingValue(t.end.y),i=getGroupingValue(t.start.y);if(!(0,import_ag_charts_core33.isNumber)(e)||!(0,import_ag_charts_core33.isNumber)(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return e-i}getVolume(t){return t.getVolume(t.start.x,t.end.x)}},QuickMeasurerScene=class extends MeasurerScene{constructor(){super(...arguments),this.type="quick-measurer"}static is(t){return AnnotationScene.isCheck(t,"quick-measurer")}createStatisticsScene(){return new QuickMeasurerStatisticsScene}getDirectionStyles(t){return this.verticalDirection==="down"?t.down:t.up}getLineStyles(t){const e=this.getDirectionStyles(t);return{...super.getLineStyles(t),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity}}getBackgroundStyles(t){const e=this.getDirectionStyles(t);return{fill:e.fill,fillOpacity:e.fillOpacity}}getHandleStyles(t){const e=this.getDirectionStyles(t);return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth}}},import_ag_charts_community79=require("ag-charts-community"),{StateMachine:StateMachine9,StateMachineProperty:StateMachineProperty9,Debug:Debug9}=import_ag_charts_community79._ModuleSupport,MeasurerTypeStateMachine=class extends StateMachine9{constructor(t){const e=({point:r})=>{const n=this.createDatum();n.set({start:r,end:r}),t.create(n)},i=({point:r})=>{const{datum:n,node:l}=this;n?.set({end:r}),l?.toggleActive(!0),l?.toggleHandles({end:!1}),t.update()},o=()=>{this.node?.toggleHandles({end:!0})},s=()=>t.delete(),a=()=>{t.showAnnotationOptions(),!isEphemeralType(this.datum)&&t.recordAction(`Create ${this.node?.type} annotation`)};super("start",{start:{reset:StateMachine9.parent,click:{target:"end",action:e},drag:{target:"end",action:e}},end:{hover:i,drag:i,click:{target:StateMachine9.parent,action:o},dragEnd:{target:StateMachine9.parent,action:o},reset:{target:StateMachine9.parent,action:s},cancel:{target:StateMachine9.parent,action:s},onExit:a}}),this.debug=Debug9.create(!0,"annotations")}};__decorateClass([StateMachineProperty9()],MeasurerTypeStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty9()],MeasurerTypeStateMachine.prototype,"node",2);var DateRangeStateMachine=class extends MeasurerTypeStateMachine{createDatum(){return new DateRangeProperties}},PriceRangeStateMachine=class extends MeasurerTypeStateMachine{createDatum(){return new PriceRangeProperties}},DatePriceRangeStateMachine=class extends MeasurerTypeStateMachine{createDatum(){return new DatePriceRangeProperties}},QuickDatePriceRangeStateMachine=class extends MeasurerTypeStateMachine{createDatum(){return new QuickDatePriceRangeProperties}},dateRangeConfig={type:"date-range",datum:DateRangeProperties,scene:MeasurerScene,isDatum:DateRangeProperties.is,translate:(t,e,i,o)=>{DateRangeProperties.is(e)&&MeasurerScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(DateRangeProperties.is(e)&&DateRangeProperties.is(i)&&MeasurerScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{DateRangeProperties.is(e)&&MeasurerScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new DateRangeStateMachine({...t,create:e("date-range")}),dragState:t=>new DragStateMachine(t)},priceRangeConfig={type:"price-range",datum:PriceRangeProperties,scene:MeasurerScene,isDatum:PriceRangeProperties.is,translate:(t,e,i,o)=>{PriceRangeProperties.is(e)&&MeasurerScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(PriceRangeProperties.is(e)&&PriceRangeProperties.is(i)&&MeasurerScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{PriceRangeProperties.is(e)&&MeasurerScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new PriceRangeStateMachine({...t,create:e("date-range")}),dragState:t=>new DragStateMachine(t)},datePriceRangeConfig={type:"date-price-range",datum:DatePriceRangeProperties,scene:MeasurerScene,isDatum:DatePriceRangeProperties.is,translate:(t,e,i,o)=>{DatePriceRangeProperties.is(e)&&MeasurerScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(DatePriceRangeProperties.is(e)&&DatePriceRangeProperties.is(i)&&MeasurerScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{DatePriceRangeProperties.is(e)&&MeasurerScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new DatePriceRangeStateMachine({...t,create:e("date-range")}),dragState:t=>new DragStateMachine(t)},quickDatePriceRangeConfig={type:"quick-date-price-range",datum:QuickDatePriceRangeProperties,scene:QuickMeasurerScene,isDatum:QuickDatePriceRangeProperties.is,translate:(t,e,i,o)=>{QuickDatePriceRangeProperties.is(e)&&QuickMeasurerScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(QuickDatePriceRangeProperties.is(e)&&QuickDatePriceRangeProperties.is(i)&&QuickMeasurerScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{QuickDatePriceRangeProperties.is(e)&&QuickMeasurerScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new QuickDatePriceRangeStateMachine({...t,create:e("quick-date-price-range")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community80=require("ag-charts-community"),import_ag_charts_core34=require("ag-charts-core"),{ZIndexMap:ZIndexMap3,TextWrapper:TextWrapper3}=import_ag_charts_community80._ModuleSupport,NoteScene=class extends TextualPointScene{constructor(){super(),this.type="note",this.shape=new import_ag_charts_community80._ModuleSupport.Rect,this.iconBackground=new import_ag_charts_community80._ModuleSupport.SvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new import_ag_charts_community80._ModuleSupport.SvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new import_ag_charts_community80._ModuleSupport.DropShadow,this.append([this.shape,this.label,this.iconBackground,this.iconLines,this.handle])}static is(t){return AnnotationScene.isCheck(t,"note")}update(t,e){this.updateIcon(t,e),super.update(t,e)}getTextBBox(t,e,i){const o=super.getTextBBox(t,e,i);o.x-=t.width/2,o.x=(0,import_ag_charts_core34.clamp)(0,o.x,i.seriesRect.width-t.width);const s=t.getPadding().top,a=o.y-LABEL_OFFSET-s*2,r=o.y+DivariantHandle.HANDLE_SIZE+s*2;return a-o.height-TOOLBAR_OFFSET<0?(o.y=r,t.position="top"):(o.y=a+s,t.position="bottom"),o}updateLabel(t,e){const i=t.visible===!1?!1:this.label.visible;super.updateLabel(t,e),this.label.visible=i,this.label.text=TextWrapper3.wrapText(t.text,{font:{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},avoidOrphans:!1,textAlign:t.textAlign,textBaseline:"hanging",textWrap:"always",maxWidth:200})}updateShape(t,e){const{shape:i}=this;i.fill=t.background.fill,i.fillOpacity=t.background.fillOpacity??1,i.stroke=t.background.stroke,i.strokeOpacity=t.background.strokeOpacity??1,i.strokeWidth=t.background.strokeWidth??1,i.cornerRadius=4;const o=t.getPadding().top,s=t.position==="top";i.x=e.x-o,i.width=t.width+o*2,i.height=e.height+o*2,i.y=e.y+(s?0:-e.height)-o}updateIcon(t,e){const{active:i,iconBackground:o,iconLines:s}=this,{x:a,y:r}=convertPoint(t,e);o.x=a-ICON_WIDTH/2,o.y=r-ICON_HEIGHT,s.x=o.x,s.y=o.y,o.fill=t.fill,o.fillOpacity=t.fillOpacity??1,o.stroke=t.stroke,o.strokeOpacity=t.strokeOpacity??1,o.strokeWidth=t.strokeWidth??1,s.fill=t.stroke,i?o.fillShadow.color=t.fill??"rgba(0, 0, 0, 0.22)":o.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(t,e,i){const o=t.getPadding().top,s=t.position==="top",a=s?1:-1;return{x:e.x+i.seriesRect.x+t.width/2,y:e.y+i.seriesRect.y+a*(e.height+o),position:s?"below":"above"}}getLabelCoords(t,e){const i=t.position==="top",o=t.getPadding().top+t.fontSize*ANNOTATION_TEXT_LINE_HEIGHT/2;return{x:e.x,y:e.y+(i?o/2:0)}}getTextBaseline(t){return t.position==="top"?"middle":t.position}getHandleCoords(t,e,i){return{x:e.x,y:e.y+DivariantHandle.HANDLE_SIZE/2+4}}getHandleStyles(t){return{fill:t.handle.fill,stroke:t.handle.stroke??t.fill,strokeOpacity:t.handle.strokeOpacity,strokeWidth:t.handle.strokeWidth}}toggleHovered(t){super.toggleHovered(t),this.label.visible=t,this.shape.visible=t,this.zIndex=t?ZIndexMap3.CHART_ANNOTATION_FOCUSED:ZIndexMap3.CHART_ANNOTATION}toggleActive(t){super.toggleActive(t),this.label.visible=t,this.shape.visible=t,this.active=t}containsPoint(t,e){return this.shape.visible&&this.shape.containsPoint(t,e)||this.iconBackground.containsPoint(t,e)?!0:super.containsPoint(t,e)}},NoteStateMachine=class extends TextualPointStateMachine{createDatum(){return new NoteProperties}},noteConfig={type:"note",datum:NoteProperties,scene:NoteScene,isDatum:NoteProperties.is,translate:(t,e,i,o)=>{NoteProperties.is(e)&&NoteScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(NoteProperties.is(e)&&NoteProperties.is(i)&&NoteScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{NoteProperties.is(e)&&NoteScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new NoteStateMachine({...t,create:e("note")}),dragState:t=>new DragStateMachine(t)},import_ag_charts_community81=require("ag-charts-community"),{Vec2:Vec217,Vec4:Vec413}=import_ag_charts_community81._ModuleSupport,ParallelChannelScene=class extends ChannelScene{constructor(){super(),this.type="parallel-channel",this.handles={topLeft:new DivariantHandle,topMiddle:new UnivariantHandle,topRight:new DivariantHandle,bottomLeft:new DivariantHandle,bottomMiddle:new UnivariantHandle,bottomRight:new DivariantHandle},this.middleLine=new CollidableLine,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return AnnotationScene.isCheck(t,"parallel-channel")}dragHandle(t,e,i,o){const{activeHandle:s,handles:a}=this;if(s==null)return;const{offset:r}=a[s].drag(e);a[s].toggleDragging(!0),(s==="topMiddle"||s==="bottomMiddle")&&(r.x=0);let n=[],l=o;switch(s){case"topLeft":case"bottomLeft":n=["topLeft","bottomLeft"];break;case"topMiddle":n=["topLeft","topRight"],r.y-=UnivariantHandle.HANDLE_SIZE/2,l=!1;break;case"topRight":case"bottomRight":n=["topRight","bottomRight"];break;case"bottomMiddle":n=["bottomLeft","bottomRight"],r.y-=UnivariantHandle.HANDLE_SIZE/2,l=!1;break}const c=convertLine(t,i),h=convertLine(t.bottom,i);if(!c||!h)return;const u={topLeft:Vec413.start(c),topRight:Vec413.end(c),bottomLeft:Vec413.start(h),bottomRight:Vec413.end(h)},p={vectors:{topLeft:u.topRight,bottomLeft:u.bottomRight,topRight:u.topLeft,bottomRight:u.bottomLeft},angle:t.snapToAngle},d=translate(u,r,i,{overflowContinuous:this.overflowContinuous,translateVectors:n,snap:l?p:void 0});t.start.x=d.topLeft.x,t.start.y=d.topLeft.y,t.end.x=d.topRight.x,t.end.y=d.topRight.y,t.height=d.topLeft.y-d.bottomLeft.y}getTranslatePointsVectors(t,e){const{bottomLeft:i,topLeft:o}=this.handles,s=i.getBBox().y-o.getBBox().y,a=Vec217.add(t,Vec217.from(0,s)),r=Vec217.add(e,Vec217.from(0,s));return{start:t,end:e,bottomStart:a,bottomEnd:r}}containsPoint(t,e){return super.containsPoint(t,e)||this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)}getNodeAtCoords(t,e){return this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(t,e)?"line":super.getNodeAtCoords(t,e)}updateLines(t,e,i,o,s,a){const{topLine:r,middleLine:n,bottomLine:l}=this,{lineDashOffset:c,stroke:h,strokeOpacity:u,strokeWidth:p}=t,d=t.getLineDash(),g={lineCap:t.getLineCap(),lineDash:d,lineDashOffset:c,stroke:h,strokeOpacity:u,strokeWidth:p};r.setProperties({...e,...g}),l.setProperties({...i,...g});const f=this.extendLine({x1:s.x1,y1:a.y1+(s.y1-a.y1)/2,x2:s.x2,y2:a.y2+(s.y2-a.y2)/2},t,o);n.setProperties({...f,lineDash:t.middle.lineDash??d,lineDashOffset:t.middle.lineDashOffset??c,stroke:t.middle.stroke??h,strokeOpacity:t.middle.strokeOpacity??u,strokeWidth:t.middle.strokeWidth??p,visible:t.middle.visible??!0})}updateHandles(t,e,i){const{handles:{topLeft:o,topMiddle:s,topRight:a,bottomLeft:r,bottomMiddle:n,bottomRight:l}}=this,c={fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth};o.update({...c,...Vec413.start(e)}),a.update({...c,...Vec413.end(e)}),r.update({...c,...Vec413.start(i)}),l.update({...c,...Vec413.end(i)}),s.update({...c,...Vec217.sub(Vec413.center(e),Vec217.from(s.handle.width/2,s.handle.height/2))}),n.update({...c,...Vec217.sub(Vec413.center(i),Vec217.from(n.handle.width/2,n.handle.height/2))})}updateText(t,e,i){this.text=this.updateNode(CollidableText,this.text,!!t.text.label),updateChannelText(!0,e,i,t.text,t.strokeWidth,this.text,t.text.label)}getBackgroundPoints(t,e,i,o){const s=e.x1>e.x2,a=e.y1>e.y2,r=e.x1!==i.x1&&e.y1!==i.y1,n=e.x2!==i.x2&&e.y2!==i.y2,l=Vec217.from(e);return t.extendEnd&&n&&l.push(Vec217.from(s?o.x1:o.x2,a?o.y1:o.y2)),l.push(...Vec217.from(i).reverse()),t.extendStart&&r&&l.push(Vec217.from(s?o.x2:o.x1,a?o.y2:o.y1)),l}},import_ag_charts_community82=require("ag-charts-community"),import_ag_charts_core35=require("ag-charts-core"),{StateMachine:StateMachine10,StateMachineProperty:StateMachineProperty10,Debug:Debug10}=import_ag_charts_community82._ModuleSupport,ParallelChannelStateMachine=class extends StateMachine10{constructor(t){const e=({point:l})=>{const c=new ParallelChannelProperties;c.set({start:l,end:l,height:0}),t.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})},o=({offset:l,context:c})=>{const{datum:h,snapping:u}=this;h&&(h.set({end:snapPoint(l,c,u,h.start,h.snapToAngle)}),t.update())},s=()=>{this.node?.toggleHandles({topRight:!0}),t.update()},a=({point:l})=>{const{datum:c,node:h}=this,u=getGroupingValue(c?.end.y),p=getGroupingValue(c?.start.y),{y:d}=l;if(c==null||!(0,import_ag_charts_core35.isNumber)(p)||!(0,import_ag_charts_core35.isNumber)(u)||!(0,import_ag_charts_core35.isNumber)(d))return;const g=u-(d??0),f=p-g;h?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!t.validatePoint({x:c.start.x,y:f},{overflowContinuous:!0})||!t.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:g}),t.update())},r=({point:l})=>{const{datum:c,node:h}=this,u=getGroupingValue(c?.end.y),p=getGroupingValue(c?.start.y),{y:d}=l;if(c==null||!(0,import_ag_charts_core35.isNumber)(p)||!(0,import_ag_charts_core35.isNumber)(u)||!(0,import_ag_charts_core35.isNumber)(d))return;const g=u-(d??0),f=p-g;h?.toggleHandles(!0),!(!t.validatePoint({x:c.start.x,y:f},{overflowContinuous:!0})||!t.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:g}),t.recordAction("Create parallel-channel annotation"),t.showAnnotationOptions(),t.update())},n=()=>t.delete();super("start",{start:{click:{target:"waiting-first-render",action:e},drag:{target:"waiting-first-render",action:e},reset:StateMachine10.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:o,drag:o,click:{target:"height",action:s},dragEnd:{target:"height",action:s},reset:{target:StateMachine10.parent,action:n},cancel:{target:StateMachine10.parent,action:n}},height:{hover:a,click:{target:StateMachine10.parent,action:r},drag:{target:StateMachine10.parent,action:r},reset:{target:StateMachine10.parent,action:n},cancel:{target:StateMachine10.parent,action:n}}}),this.debug=Debug10.create(!0,"annotations"),this.snapping=!1}};__decorateClass([StateMachineProperty10()],ParallelChannelStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty10()],ParallelChannelStateMachine.prototype,"node",2),__decorateClass([StateMachineProperty10()],ParallelChannelStateMachine.prototype,"snapping",2);var parallelChannelConfig={type:"parallel-channel",datum:ParallelChannelProperties,scene:ParallelChannelScene,isDatum:ParallelChannelProperties.is,translate:(t,e,i,o)=>{ParallelChannelProperties.is(e)&&ParallelChannelScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(ParallelChannelProperties.is(e)&&ParallelChannelProperties.is(i)&&ParallelChannelScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{ParallelChannelProperties.is(e)&&ParallelChannelScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new ParallelChannelStateMachine({...t,create:e("parallel-channel")}),dragState:t=>new DragStateMachine(t)},TextScene=class extends TextualPointScene{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(t){return AnnotationScene.isCheck(t,"text")}getHandleCoords(t,e){const i=DivariantHandle.HANDLE_SIZE/2;return{x:e.x+i,y:e.y+2+i}}},TextStateMachine=class extends TextualPointStateMachine{createDatum(){return new TextProperties}},textConfig={type:"text",datum:TextProperties,scene:TextScene,isDatum:TextProperties.is,translate:(t,e,i,o)=>{TextProperties.is(e)&&TextScene.is(t)&&t.translate(e,i,o)},copy:(t,e,i,o)=>{if(TextProperties.is(e)&&TextProperties.is(i)&&TextScene.is(t))return t.copy(e,i,o)},update:(t,e,i)=>{TextProperties.is(e)&&TextScene.is(t)&&t.update(e,i)},createState:(t,{createDatum:e})=>new TextStateMachine({...t,create:e("text")}),dragState:t=>new DragStateMachine(t)},annotationConfigs={[lineConfig.type]:lineConfig,[horizontalLineConfig.type]:horizontalLineConfig,[verticalLineConfig.type]:verticalLineConfig,[parallelChannelConfig.type]:parallelChannelConfig,[disjointChannelConfig.type]:disjointChannelConfig,[fibonacciRetracementConfig.type]:fibonacciRetracementConfig,[fibonacciRetracementTrendBasedConfig.type]:fibonacciRetracementTrendBasedConfig,[calloutConfig.type]:calloutConfig,[commentConfig.type]:commentConfig,[noteConfig.type]:noteConfig,[textConfig.type]:textConfig,[arrowConfig.type]:arrowConfig,[arrowUpConfig.type]:arrowUpConfig,[arrowDownConfig.type]:arrowDownConfig,[dateRangeConfig.type]:dateRangeConfig,[priceRangeConfig.type]:priceRangeConfig,[datePriceRangeConfig.type]:datePriceRangeConfig,[quickDatePriceRangeConfig.type]:quickDatePriceRangeConfig};function getTypedDatum(t){for(const{isDatum:e}of Object.values(annotationConfigs))if(e(t))return t}var import_ag_charts_community83=require("ag-charts-community"),{ActionOnSet,ParallelStateMachine,StateMachine:StateMachine11,StateMachineProperty:StateMachineProperty11,Debug:Debug11}=import_ag_charts_community83._ModuleSupport,AnnotationsStateMachine=class extends ParallelStateMachine{constructor(t){super(new SnappingStateMachine(e=>{this.snapping=e}),new UpdateMachine(()=>{this.node=this.active==null?void 0:t.node(this.active)}),new AnnotationsMainStateMachine(t,e=>{this.active=e,this.datum=this.active==null?void 0:t.datum(this.active),this.node=this.active==null?void 0:t.node(this.active)})),this.snapping=!1}getActive(){return this.active}isActive(t){return t===this.active}};__decorateClass([StateMachineProperty11()],AnnotationsStateMachine.prototype,"snapping",2),__decorateClass([StateMachineProperty11()],AnnotationsStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty11()],AnnotationsStateMachine.prototype,"node",2);var SnappingStateMachine=class extends StateMachine11{constructor(t){super("idle",{idle:{hover:({shiftKey:e})=>t(e),keyDown:({shiftKey:e})=>t(e),keyUp:({shiftKey:e})=>t(e),click:({shiftKey:e})=>t(e),drag:({shiftKey:e})=>t(e)},dragging:{},translating:{},"text-input":{}})}},UpdateMachine=class extends StateMachine11{constructor(t){super("idle",{idle:{onEnter:t,render:t},dragging:{onEnter:t,render:t},translating:{onEnter:t,render:t},"text-input":{render:t}})}},AnnotationsMainStateMachine=class extends StateMachine11{constructor(t,e){const i=x=>S=>{t.create(x,S),this.active=t.selectLast()},o=()=>{this.active!=null&&t.delete(this.active),this.active=void 0,t.select()},s={createDatum:i},a={...t,delete:o,showTextInput:()=>{this.active!=null&&t.showTextInput(this.active)},deselect:()=>{const x=this.active;this.active=void 0,this.hovered=void 0,t.select(this.active,x)},showAnnotationOptions:()=>{this.active!=null&&t.showAnnotationOptions(this.active)}},r=Object.fromEntries(Object.entries(annotationConfigs).map(([x,S])=>[x,S.createState(a,s)])),n=Object.fromEntries(Object.entries(annotationConfigs).map(([x,S])=>[x,S.dragState(t,s)])),l=({colorPickerType:x,colorOpacity:S,color:v,opacity:T,isMultiColor:D})=>{this.datum&&(x==="text-color"&&t.updateTextInputColor(v),setColor(this.datum,x,S,v,T,D),t.update())},c=x=>{const{datum:S,node:v}=this;!S||!v||(isTextType(S)?(S.fontSize=x,t.updateTextInputFontSize(x)):hasLineText(S)&&(S.text.fontSize=x),t.update())},h=x=>{const{datum:S,node:v}=this;!S||!v||!hasLineStyle(S)||(setLineStyle(S,x),t.update())},u=x=>{const{node:S}=this;!S||!("setTextInputBBox"in S)||(S.setTextInputBBox(x),t.update())},p=({textInputValue:x,bbox:S})=>{const{datum:v}=this;if(S!=null&&x!=null&&x.length>0){if(!isTextType(v))return;const T=wrapText(v,x,S.width);v.set({text:T}),t.update(),t.recordAction(`Change ${v.type} annotation text`)}else t.delete(this.active),t.recordAction(`Delete ${v?.type} annotation`)},d=()=>{t.updateTextInputBBox(void 0)},g=()=>this.active!=null,f=()=>this.copied!=null,y=()=>{const{active:x,datum:S}=this;return x==null||!S?!1:hasLineText(S)&&!S.locked},m=()=>this.active!=null&&!isEphemeralType(this.datum),b=()=>this.hovered!=null;super("idle",{idle:{onEnter:()=>{t.select(this.active,this.active),this.hoverCoords&&(this.hovered=t.hoverAtCoords(this.hoverCoords,this.active,this.hovered))},hover:({offset:x})=>{this.hovered=t.hoverAtCoords(x,this.active,this.hovered),this.hoverCoords=x},translate:{guard:g,target:"translating",action:({translation:x})=>{t.startInteracting(),t.translate(this.active,x),t.update()}},copy:{guard:m,action:()=>{this.copied=t.copy(this.active)}},cut:{guard:m,action:()=>{this.copied=t.copy(this.active),o()}},paste:{guard:f,action:()=>{t.paste(this.copied)}},selectLast:()=>{const x=this.active;this.active=t.selectLast(),t.select(this.active,x)},click:[{guard:()=>{const{active:x,hovered:S,datum:v}=this;return x==null||S!==x||!v?!1:isTextType(v)&&!v.locked},target:"text-input"},{action:()=>{const x=this.active;this.active=this.hovered,t.select(this.active,x)}}],dblclick:{guard:y,action:({offset:x})=>{const S=t.getNodeAtCoords(x,this.active)==="text"?"text":"line";t.showAnnotationSettings(this.active,void 0,S)}},dragStart:[{guard:b,target:"dragging",action:()=>{const x=this.active;this.active=this.hovered,t.select(this.active,x),t.startInteracting()}},{action:()=>{const x=this.active;this.active=this.hovered,t.select(this.active,x)}}],color:{guard:g,action:l},fontSize:{guard:g,action:c},lineProps:{guard:g,action:x=>{const S=getTypedDatum(this.datum);S?.set(x),t.update(),t.recordAction(`Change ${S?.type} ${Object.entries(x).map(([v,T])=>`${v} to ${T}`).join(", ")}`)}},lineStyle:{guard:g,action:h},lineText:{guard:g,action:x=>{const S=getTypedDatum(this.datum);hasLineText(S)&&(isChannelType(S)&&x.position==="center"&&(x.position="inside"),S.text.set(x),t.update())}},updateTextInputBBox:{guard:g,action:u},toolbarPressSettings:{guard:y,action:x=>{t.showAnnotationSettings(this.active,x)}},reset:()=>{this.active!=null&&this.node?.toggleActive(!1),this.hovered=void 0,this.active=void 0,t.select(this.active,this.active),t.resetToIdle()},delete:()=>{this.active!=null&&(t.delete(this.active),!isEphemeralType(this.datum)&&t.recordAction(`Delete ${this.datum?.type} annotation`))},deleteAll:()=>{t.deleteAll()},...r},dragging:{onEnter:(x,S)=>{if(this.active==null)return;const v=t.getAnnotationType(this.active);v&&(this.transitionRoot(v),this.transitionRoot("dragStart",S))},...n},translating:{onEnter:()=>{},translate:{guard:g,target:"translating",action:({translation:x})=>{t.startInteracting(),t.translate(this.active,x),t.update()}},translateEnd:{guard:g,target:"idle"},onExit:()=>{t.stopInteracting(),t.update(),t.recordAction("Translate annotation")}},"text-input":{onEnter:()=>{if(this.active==null)return;const x=getTypedDatum(this.datum);!x||!("getTextInputCoords"in x)||(t.startInteracting(),t.showTextInput(this.active),x.visible=!1,t.update())},updateTextInputBBox:{guard:g,action:u},resize:{target:"idle",action:p},click:{target:"idle",action:p},drag:{target:"idle",action:p},textInput:[{guard:guardCancelAndExit,target:"idle",action:d},{guard:guardSaveAndExit,target:"idle",action:p}],color:{guard:g,action:l},fontSize:{guard:g,action:c},cancel:{target:"idle",action:d},onExit:()=>{t.stopInteracting(),t.hideTextInput();const x=this.active;if(this.active=this.hovered=void 0,t.select(this.active,x),x==null)return;const S=t.datum(x),v=t.node(x);!S||!v||(S.visible=!0)}}}),this.setActive=e,this.debug=Debug11.create(!0,"annotations"),this.snapping=!1}};__decorateClass([ActionOnSet({changeValue(t){this.setActive(t)}}),StateMachineProperty11()],AnnotationsMainStateMachine.prototype,"active",2),__decorateClass([StateMachineProperty11()],AnnotationsMainStateMachine.prototype,"hovered",2),__decorateClass([StateMachineProperty11()],AnnotationsMainStateMachine.prototype,"hoverCoords",2),__decorateClass([StateMachineProperty11()],AnnotationsMainStateMachine.prototype,"copied",2),__decorateClass([StateMachineProperty11()],AnnotationsMainStateMachine.prototype,"snapping",2),__decorateClass([StateMachineProperty11()],AnnotationsMainStateMachine.prototype,"datum",2),__decorateClass([StateMachineProperty11()],AnnotationsMainStateMachine.prototype,"node",2);var import_ag_charts_community84=require("ag-charts-community"),{ARRAY:ARRAY3,BOOLEAN:BOOLEAN9,UNION:UNION6,POSITIVE_NUMBER:POSITIVE_NUMBER5,ActionOnSet:ActionOnSet2,LayoutElement,Menu:Menu2,PropertiesArray:PropertiesArray2,ToolbarButtonProperties:ToolbarButtonProperties2,TempValidate:TempValidate30,ChartAxisDirection:ChartAxisDirection8}=import_ag_charts_community84._ModuleSupport,AnnotationsToolbarButtonProperties=class extends ToolbarButtonProperties2{};__decorateClass([TempValidate30(UNION6(["line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","clear"]))],AnnotationsToolbarButtonProperties.prototype,"value",2);var AnnotationsToolbar=class extends import_ag_charts_community84._ModuleSupport.BaseProperties{constructor(t){super(),this.ctx=t,this.enabled=!0,this.padding=20,this.buttons=new PropertiesArray2(AnnotationsToolbarButtonProperties),this.events=new import_ag_charts_community84._ModuleSupport.Listeners,this.annotationMenu=new Menu2(this.ctx,"annotations"),this.destroyFns=[],this.toolbar=t.sharedToolbar.getSharedToolbar("annotations");const e=this.onKeyDown.bind(this);this.toolbar.addListener("keydown",e),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onToolbarButtonPress.bind(this)),t.layoutManager.registerElement(LayoutElement.ToolbarLeft,this.onLayoutStart.bind(this)),()=>{this.toolbar.removeListener("keydown",e),this.toolbar.destroy()})}destroy(){for(const t of this.destroyFns)t()}addListener(t,e){return this.events.addListener(t,e)}toggleVisibility(t){this.toolbar.setHidden(!t)}toggleClearButtonEnabled(t){const e=this.buttons.findIndex(i=>i.value==="clear");this.toolbar.toggleButtonEnabledByIndex(e,t)}resetButtonIcons(){for(const[t,e]of this.buttons.entries())switch(e.value){case"line-menu":this.updateButtonByIndex(t,{icon:"trend-line-drawing",value:"line-menu"});break;case"fibonacci-menu":this.updateButtonByIndex(t,{icon:"fibonacci-retracement-drawing",value:"fibonacci-menu"});break;case"text-menu":this.updateButtonByIndex(t,{icon:"text-annotation",value:"text-menu"});break;case"shape-menu":this.updateButtonByIndex(t,{icon:"arrow-drawing",value:"shape-menu"});break;case"measurer-menu":this.updateButtonByIndex(t,{icon:"measurer-drawing",value:"measurer-menu"});break}}hideOverlays(){this.annotationMenu.hide()}clearActiveButton(){this.toolbar.clearActiveButton()}dispatch(t,e){this.events.dispatch(t,e)}onLayoutStart(t){this.enabled&&(this.toolbar.updateButtons(this.buttons),this.toolbar.layout(t.layoutBox,this.padding))}refreshButtonsEnabled(t){for(const[e,i]of this.buttons.entries())i&&this.toolbar.toggleButtonEnabledByIndex(e,t)}onToolbarButtonPress({event:t,button:e,buttonBounds:i}){const o=this.ctx.axisManager.getAxisContext(ChartAxisDirection8.Y)[0].scale;switch(e.value){case"clear":this.dispatch("pressed-clear");break;case"line-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsLineAnnotations",LINE_ANNOTATION_ITEMS.filter(s=>s.visible?s.visible(o):!0));break;case"fibonacci-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsFibonacciAnnotations",FIBONACCI_ANNOTATION_ITEMS);break;case"text-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsTextAnnotations",TEXT_ANNOTATION_ITEMS);break;case"shape-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsShapeAnnotations",SHAPE_ANNOTATION_ITEMS);break;case"measurer-menu":this.onToolbarButtonPressShowMenu(t,i,e.value,"toolbarAnnotationsMeasurerAnnotations",MEASURER_ANNOTATION_ITEMS);break}}onToolbarButtonPressShowMenu(t,e,i,o,s){this.dispatch("pressed-show-menu");const a=this.buttons.findIndex(r=>r.value===i);this.toolbar.toggleActiveButtonByIndex(a),this.annotationMenu.setAnchor({x:e.x+e.width+6,y:e.y}),this.annotationMenu.show({items:s,ariaLabel:this.ctx.localeManager.t(o),class:"ag-charts-annotations__toolbar-menu",sourceEvent:t.sourceEvent,onPress:this.onButtonPressMenuCreateAnnotation.bind(this,i)})}onButtonPressMenuCreateAnnotation(t,e){const i=this.buttons.findIndex(o=>o.value===t);this.updateButtonByIndex(i,{icon:e.icon}),this.dispatch("pressed-create-annotation",{annotation:e.value}),this.annotationMenu.hide()}onKeyDown({sourceEvent:t}){t.key==="Escape"&&this.dispatch("cancel-create-annotation")}updateButtonByIndex(t,e){const i=this.buttons.at(t);i&&(i.set({...i.toJson(),...e,value:e.value??i.value}),this.toolbar.updateButtonByIndex(t,{...i.toJson()}))}};__decorateClass([TempValidate30(BOOLEAN9),ActionOnSet2({changeValue(t){this.toolbar?.setHidden(!t)}})],AnnotationsToolbar.prototype,"enabled",2),__decorateClass([TempValidate30(POSITIVE_NUMBER5)],AnnotationsToolbar.prototype,"padding",2),__decorateClass([TempValidate30(ARRAY3)],AnnotationsToolbar.prototype,"buttons",2);var import_ag_charts_community85=require("ag-charts-community"),{BaseModuleInstance,InteractionState,TempValidate:TempValidate31,BOOLEAN:BOOLEAN10,ChartAxisDirection:ChartAxisDirection9,getIconClassNames}=import_ag_charts_community85._ModuleSupport,DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS="ag-charts-annotations__axis-button",AxisButton=class extends BaseModuleInstance{constructor(t,e,i,o){super(),this.ctx=t,this.axisCtx=e,this.onButtonClick=i,this.seriesRect=o,this.enabled=!0,this.snap=!1,this.padding=0,this.button=this.setup(),this.toggleVisibility(!1),this.updateButtonElement(),this.snap=!!e.scale.bandwidth,t.domManager.addEventListener("focusin",({target:s})=>{const a=s instanceof HTMLElement?s:void 0;!(a&&t.domManager.contains(a,"series-area"))&&a!==this.button.getElement()&&this.hide()}),this.destroyFns.push(t.widgets.seriesWidget.addListener("drag-move",s=>this.onMouseDrag(s)),t.widgets.seriesWidget.addListener("mousemove",s=>this.onMouseMove(s)),t.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseLeave()),t.widgets.seriesDragInterpreter.addListener("click",s=>this.onClick(s)),t.chartEventManager.addListener("series-focus-change",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.hide()),t.zoomManager.addListener("zoom-change",()=>this.hide()),()=>this.destroyElements(),()=>this.button.destroy())}update(t,e){this.seriesRect=t,this.padding=e}setup(){const t=new import_ag_charts_community85._Widget.ButtonWidget;return t.addClass(DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS),t.setTabIndex(-1),t.setAriaLabel(this.ctx.localeManager.t("ariaLabelAddHorizontalLine")),this.ctx.widgets.seriesWidget.getElement().appendChild(t.getElement()),t}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS)}onMouseMove(t){this.ctx.interactionManager.isState(InteractionState.Clickable)&&this.show(t)}onMouseDrag(t){this.ctx.interactionManager.isState(InteractionState.AnnotationsMoveable)&&this.show(t)}onMouseLeave(){this.ctx.interactionManager.isState(InteractionState.Clickable)&&this.hide()}onClick(t){this.ctx.interactionManager.isState(InteractionState.Clickable)&&t.device==="touch"&&this.show(t)}show(t){const{sourceEvent:e,currentX:i,currentY:o}=t;if(!(this.enabled&&this.ctx.widgets.seriesWidget.getElement().contains(e.target))){this.hide();return}this.toggleVisibility(!0);const s=this.getButtonCoordinates({x:i,y:o});this.coords={x:s.x+this.button.clientWidth/2,y:s.y+this.button.clientHeight/2},this.updatePosition(s)}hide(){this.toggleVisibility(!1)}onKeyPress(){this.snap&&this.ctx.interactionManager.isState(InteractionState.Default)||this.hide()}getButtonCoordinates({x:t,y:e}){const{axisCtx:{direction:i,position:o},seriesRect:s,snap:a,axisCtx:r,padding:n}=this,{clientWidth:l,clientHeight:c}=this.button,[h,u]=[0,s.height],[p,d]=[0,s.width];if(a&&(t=convert(invert(t-s.x,r),r)+s.x,e=convert(invert(e-s.y,r),r)+s.y),i===ChartAxisDirection9.X){const f=c-Math.max(0,n-5);t=t-l/2,e=o==="top"?h-c+f:u-f}else{const f=l-Math.max(0,n-9);t=o==="left"?p-l+f:d-f,e=e-c/2}return{x:t,y:e}}toggleVisibility(t){const{button:e}=this;if(e==null)return;const i=this.enabled&&t;this.toggleClass("-hidden",!i)}toggleClass(t,e){this.button.toggleClass(`${DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS}-${t}`,e)}updatePosition({x:t,y:e}){this.button.getElement().style.transform=`translate(${Math.round(t)}px, ${Math.round(e)}px)`}updateButtonElement(){const{button:t}=this;t.addListener("click",()=>this.onButtonClick(this.coords)),t.addListener("touchend",()=>this.onButtonClick(this.coords)),t.addListener("drag-start",()=>{}),t.setInnerHTML(`<span class="${getIconClassNames("zoom-in")} ${DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS}-icon"></span>`)}};__decorateClass([TempValidate31(BOOLEAN10)],AxisButton.prototype,"enabled",2);var import_ag_charts_community87=require("ag-charts-community"),import_ag_charts_community86=require("ag-charts-community"),import_ag_charts_core36=require("ag-charts-core"),{Color:Color5,DraggablePopover,NativeWidget,Vec2:Vec218,createButton,createCheckbox,createElementId,createSelect,createTextArea,initRovingTabIndex,getIconClassNames:getIconClassNames2,mapValues,setAttribute,setAttributes}=import_ag_charts_community86._ModuleSupport,_Dialog=class xt extends DraggablePopover{constructor(e,i){super(e,i),this.dragHandleDraggingClass="ag-charts-dialog__drag-handle--dragging",this.colorPicker=new ColorPicker(this.ctx,{detached:!0}),this.destroyFns.push(e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)))}showWithChildren(e,i){const o=super.showWithChildren(e,i);return o.classList.add("ag-charts-dialog"),o.setAttribute("role","dialog"),o.addEventListener("mousedown",s=>{s.target.classList?.contains("ag-charts-dialog__color-picker-button")||this.colorPicker.hide()}),o.addEventListener("keydown",this.onKeyDown.bind(this)),(0,import_ag_charts_core36.getWindow)().requestAnimationFrame(()=>this.reposition()),this.colorPicker.attachTo(this),o}updatePosition(e){super.updatePosition(e);const{anchor:i,fallbackAnchor:o}=this.getColorPickerAnchors()??{};i&&this.colorPicker.setAnchor(i,o)}createTabs(e,i,o){const s=(0,import_ag_charts_core36.createElement)("div","ag-charts-dialog__tabs"),a=mapValues(o,()=>createElementId("ag-charts-dialog__tab")),r=mapValues(o,()=>createElementId("ag-charts-dialog__tab-panel"));for(const[d,g]of(0,import_ag_charts_core36.entries)(o))setAttributes(g.panel,{id:r[d],role:"tabpanel","aria-labelledby":a[d]});const n=d=>{for(const[g,f]of(0,import_ag_charts_core36.entries)(o))f.panel.classList.toggle("ag-charts-dialog__tab-panel--active",g===d),h[g].classList.toggle("ag-charts-dialog__tab-button--active",g===d),setAttribute(h[g],"aria-selected",g===d),g===d&&f.onShow?.()},l=new NativeWidget((0,import_ag_charts_core36.createElement)("div","ag-charts-dialog__header"));l.addListener("drag-start",d=>{const{sourceEvent:g}=d;g.target instanceof Element&&g.target.classList.contains("ag-charts-dialog__header")&&this.onDragStart(d)}),l.addListener("drag-move",d=>this.onDragMove(d)),l.addListener("drag-end",()=>this.onDragEnd());const c=new DragHandleWidget;this.setDragHandle(c);const h=mapValues(o,(d,g)=>createButton({label:this.ctx.localeManager.t(d.label),onPress:()=>n(g)},{id:a[g],class:"ag-charts-dialog__tab-button",role:"tab","aria-controls":r[g]})),u=(0,import_ag_charts_core36.createElement)("div","ag-charts-dialog__tab-list");setAttributes(u,{role:"tablist","aria-label":this.ctx.localeManager.t(e)}),u.append(...Object.values(h));const p=this.createHeaderCloseButton();return l.getElement().append(c.getElement(),u,p),s.append(l.getElement(),...Object.values(o).map(d=>d.panel)),n(i),initRovingTabIndex({orientation:"horizontal",buttons:Object.values(h)}),{tabs:s,initialFocus:h[i]}}createTabPanel(){return(0,import_ag_charts_core36.createElement)("div","ag-charts-dialog__tab-panel")}createInputGroupLine(){return(0,import_ag_charts_core36.createElement)("div","ag-charts-dialog__input-group-line")}createRadioGroup({label:e,options:i,value:o,onChange:s}){const a=this.createInputGroup(e);setAttributes(a,{role:"radiogroup",tabindex:-1,"aria-label":this.ctx.localeManager.t(e)});const r="ag-charts-dialog__button--active",n=[];for(const l of i){const{icon:c,altText:h}=l,u=this.ctx.localeManager.t(h),p=createButton({icon:c,altText:u,onPress:()=>{for(const d of Array.from(a.children))d.classList.remove(r),d.ariaChecked="false";p.classList.add(r),p.ariaChecked="true",s(l.value)}},{"aria-checked":l.value===o,class:"ag-charts-dialog__button",role:"radio",title:u});l.value===o&&p.classList.add(r),a.appendChild(p),n.push(p)}return initRovingTabIndex({orientation:"horizontal",buttons:n}),a}createSelect({altText:e,label:i,options:o,value:s,onChange:a}){const r=this.createInputGroup(i),n=this.ctx.localeManager.t(e),l=createSelect({value:s,options:o,onChange:a},{class:"ag-charts-dialog__select","aria-label":n,title:n});return r.append(l),r}createTextArea({placeholder:e,value:i,onChange:o}){const s=e?this.ctx.localeManager.t(e):void 0;return createTextArea({value:i,onChange:o},{placeholder:s})}createCheckbox({label:e,checked:i,onChange:o}){const s=`ag-charts__${e}`,a=this.createInputGroup(e,{for:s}),r=createCheckbox({checked:i,onChange:o},{class:"ag-charts-dialog__checkbox",role:"switch",id:s});return a.append(r),a}createColorPicker({color:e,opacity:i,label:o,altText:s,onChange:a,onChangeHide:r,isMultiColor:n,hasMultiColorOption:l}){const c=this.createInputGroup(o),h=this.ctx.localeManager.t(s),u=createButton({label:h,onPress:p=>{const{anchor:d,fallbackAnchor:g}=this.getColorPickerAnchors(u)??{};this.colorPicker.show({anchor:d,fallbackAnchor:g,color:e,opacity:i,isMultiColor:n,hasMultiColorOption:l,sourceEvent:p,onChange:(f,y,m,b)=>{u.style.setProperty("--color",f),u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color",b),a(f,y,m,b)},onChangeHide:r})}},{"aria-label":h,tabindex:0,class:"ag-charts-dialog__color-picker-button",title:h});if(n)u.classList.toggle("ag-charts-dialog__color-picker-button--multi-color");else if(e){const p=Color5.fromString(e),d=new Color5(p.r,p.g,p.b,i);u.style.setProperty("--color",d.toHexString())}return c.append(u),this.hideFns.push(()=>{this.colorPicker.hide()}),c}createHeaderCloseButton(){return createButton({icon:"close",altText:this.ctx.localeManager.t("iconAltTextClose"),onPress:()=>this.hide()},{class:"ag-charts-dialog__close-button"})}createInputGroup(e,i){const o=(0,import_ag_charts_core36.createElement)("div","ag-charts-dialog__input-group"),s=(0,import_ag_charts_core36.createElement)("label","ag-charts-dialog__input-group-label");return s.innerText=this.ctx.localeManager.t(e),i?.for&&s.setAttribute("for",i.for),o.appendChild(s),o}onLayoutComplete(e){this.seriesRect=e.series.paddedRect,this.reposition()}onKeyDown(e){e.altKey||e.ctrlKey||e.metaKey||e.isComposing||e.key!=="Escape"||this.hide()}reposition(){const{seriesRect:e,ctx:i}=this,o=i.domManager.getBoundingClientRect(),s=this.getPopoverElement();if(!e||!s)return;const a=Vec218.from(0,e.y),r=Vec218.from(o.width,e.height),n=Vec218.from(s),l=Vec218.from(.5,1);let c;if(e.width>1e3){const h=Vec218.sub(Vec218.add(a,Vec218.multiply(r,l)),Vec218.multiply(n,l));c=Vec218.sub(h,Vec218.from(0,xt.offset))}else{const h=Vec218.sub(Vec218.add(a,r),n);c=Vec218.sub(h,xt.offset)}this.updatePosition(c)}getColorPickerAnchors(e){if(e&&(this.colorPickerAnchorElement=e),!this.colorPickerAnchorElement)return;const i=this.colorPickerAnchorElement.getBoundingClientRect(),o=this.ctx.domManager.getBoundingClientRect(),s=Vec218.sub(Vec218.from(i.x,i.y),Vec218.from(o.left,o.top)),a=Vec218.add(s,Vec218.from(0,i.height+5)),r=Vec218.sub(s,Vec218.from(0,5));return{anchor:a,fallbackAnchor:r}}};_Dialog.offset=60;var Dialog=_Dialog,DragHandleWidget=class extends NativeWidget{constructor(){super((0,import_ag_charts_core36.createElement)("div","ag-charts-dialog__drag-handle"));const t=new NativeWidget((0,import_ag_charts_core36.createElement)("span",getIconClassNames2("drag-handle")));t.setAriaHidden(!0),this.addChild(t)}},{Listeners:Listeners2,focusCursorAtEnd:focusCursorAtEnd2}=import_ag_charts_community87._ModuleSupport,AnnotationSettingsDialog=class extends Dialog{constructor(t){super(t,"settings"),this.events=new Listeners2,this.hideFns.push(()=>this.events.dispatch("hidden"))}addListener(t,e){return this.events.addListener(t,e)}show(t,e){const i=this.createLinearLineTab(t,e),o=this.createLinearTextTab(t,e);let s="dialogHeaderLine";isChannelType(t)?s="dialogHeaderChannel":isFibonacciType(t)?s="dialogHeaderFibonacciRange":t.type==="date-range"?s="dialogHeaderDateRange":t.type==="price-range"?s="dialogHeaderPriceRange":t.type==="date-price-range"&&(s="dialogHeaderDatePriceRange");const{tabs:a,initialFocus:r}=this.createTabs("ariaLabelSettingsTabBar",e.initialSelectedTab,{line:{label:s,panel:i},text:{label:"dialogHeaderText",panel:o.panel,onShow:o.onShow}});e.initialFocus=r,this.showWithChildren([a],e).classList.add("ag-charts-dialog--annotation-settings")}createLinearLineTab(t,e){const i=this.createTabPanel(),o=this.createInputGroupLine(),s=this.createInputGroupLine(),a="isMultiColor"in t,r=this.createColorPickerInput("line-color",t.getDefaultColor("line-color"),t.getDefaultOpacity("line-color"),a?t.isMultiColor:!1,a,e.onChangeLineColor,e.onChangeHideLineColor),n=this.createStrokeWidthSelect(t.strokeWidth??2,e.onChangeLineStyleWidth),l=this.createLineStyleRadioGroup(t.lineStyle??"solid",e.onChangeLineStyleType);if(o.append(r),"background"in t){const c=this.createColorPickerInput("fill-color",t.getDefaultColor("fill-color"),t.getDefaultOpacity("fill-color"),!1,!1,e.onChangeFillColor,e.onChangeHideFillColor);o.append(c),s.append(n)}else"showFill"in t?(o.append(this.createCheckbox({label:"dialogInputShowFill",checked:t.showFill??!0,onChange:c=>e.onChangeLine({showFill:c})})),s.append(n)):o.append(n);return s.append(l),i.append(o,s),"bands"in t&&i.append(this.createFibonacciRatioSelect(t.bands??10,c=>e.onChangeLine({bands:c}))),"extendStart"in t&&"extendEnd"in t&&i.append(this.createCheckbox({label:isChannelType(t)?"dialogInputExtendChannelStart":"dialogInputExtendLineStart",checked:t.extendStart??!1,onChange:c=>e.onChangeLine({extendStart:c})}),this.createCheckbox({label:isChannelType(t)?"dialogInputExtendChannelEnd":"dialogInputExtendLineEnd",checked:t.extendEnd??!1,onChange:c=>e.onChangeLine({extendEnd:c})})),"extendAbove"in t&&"extendBelow"in t&&i.append(this.createCheckbox({label:"dialogInputExtendAbove",checked:t.extendAbove??!1,onChange:c=>e.onChangeLine({extendAbove:c})}),this.createCheckbox({label:"dialogInputExtendBelow",checked:t.extendBelow??!1,onChange:c=>e.onChangeLine({extendBelow:c})})),"extendLeft"in t&&"extendRight"in t&&i.append(this.createCheckbox({label:"dialogInputExtendLeft",checked:t.extendLeft??!1,onChange:c=>e.onChangeLine({extendLeft:c})}),this.createCheckbox({label:"dialogInputExtendRight",checked:t.extendRight??!1,onChange:c=>e.onChangeLine({extendRight:c})})),"reverse"in t&&"showFill"in t&&i.append(this.createCheckbox({label:"dialogInputReverse",checked:t.reverse??!1,onChange:c=>e.onChangeLine({reverse:c})})),i}createLinearTextTab(t,e){const i=this.createTabPanel(),o=this.createTextArea({placeholder:"inputTextareaPlaceholder",value:t.text.label,onChange:h=>e.onChangeText({label:h})}),s=this.createFontSizeSelect(t.text.fontSize,e.onChangeTextFontSize),a=this.createColorPickerInput("text-color",t.text.color,1,!1,!1,e.onChangeTextColor,e.onChangeHideTextColor),r=t.text.position==="inside"?"center":t.text.position,n=this.createPositionRadioGroup(r??"top",h=>e.onChangeText({position:h})),l=this.createAlignmentRadioGroup(t.text.alignment??"center",h=>e.onChangeText({alignment:h})),c=this.createInputGroupLine();return c.append(s,a,n,l),i.append(o,c),{panel:i,onShow:()=>focusCursorAtEnd2(o)}}createColorPickerInput(t,e,i,o,s,a,r){const n=t==="fill-color"?"dialogInputFillColorPicker":"dialogInputColorPicker",l=t==="fill-color"?"dialogInputFillColorPickerAltText":"dialogInputColorPickerAltText";return this.createColorPicker({label:n,altText:l,color:e,opacity:i,isMultiColor:o,hasMultiColorOption:s,onChange:a,onChangeHide:r})}createStrokeWidthSelect(t,e){return this.createSelect({label:"dialogInputStrokeWidth",altText:"dialogInputStrokeWidthAltText",options:LINE_STROKE_WIDTH_ITEMS.map(({label:i,value:o})=>({label:i,value:`${o}`})),value:String(t),onChange:i=>e(Number(i))})}createFibonacciRatioSelect(t,e){return this.createSelect({label:"dialogInputFibonacciBands",altText:"dialogInputFibonacciBandsAltText",options:FIBONACCI_RATIO_ITEMS.map(({label:i,value:o})=>({label:i,value:`${o}`})),value:String(t),onChange:i=>e(Number(i))})}createLineStyleRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputLineStyle",options:[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],value:t,onChange:e})}createFontSizeSelect(t,e){return this.createSelect({label:"dialogInputFontSize",altText:"dialogInputFontSizeAltText",options:TEXT_SIZE_ITEMS.map(({label:i,value:o})=>({label:i,value:String(o)})),value:String(t),onChange:i=>e(Number(i))})}createPositionRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputPosition",options:[{icon:"position-top",altText:"iconAltTextPositionTop",value:"top"},{icon:"position-center",altText:"iconAltTextPositionCenter",value:"center"},{icon:"position-bottom",altText:"iconAltTextPositionBottom",value:"bottom"}],value:t,onChange:e})}createAlignmentRadioGroup(t,e){return this.createRadioGroup({label:"dialogInputAlign",options:[{icon:"align-left",altText:"iconAltTextAlignLeft",value:"left"},{icon:"align-center",altText:"iconAltTextAlignCenter",value:"center"},{icon:"align-right",altText:"iconAltTextAlignRight",value:"right"}],value:t,onChange:e})}};function calculateAxisLabelPadding(t){return t.gridPadding+t.seriesAreaPadding+t.tickSize+t.label.spacing}function updateAnnotation(t,e,i){for(const{update:o}of Object.values(annotationConfigs))o(t,e,i)}var{BOOLEAN:BOOLEAN11,OBJECT:OBJECT14,ChartUpdateType,InteractionState:InteractionState2,ObserveChanges:ObserveChanges2,PropertiesArray:PropertiesArray3,TempValidate:TempValidate32,ChartAxisDirection:ChartAxisDirection10,Vec2:Vec219,keyProperty,valueProperty,Selection:Selection2,BBox:BBox3}=import_ag_charts_community88._ModuleSupport,_Annotations=class Dt extends import_ag_charts_community88._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.toolbar=new AnnotationsToolbar(this.ctx),this.optionsToolbar=new AnnotationOptionsToolbar(this.ctx,()=>{const i=this.state.getActive();if(i!=null)return getTypedDatum(this.annotationData.at(i))}),this.axesButtons=new AxesButtons,this.snap=!1,this.data=void 0,this.xKey=void 0,this.volumeKey=void 0,this.annotationData=new PropertiesArray3(Dt.createAnnotationDatum),this.defaults=new AnnotationDefaults,this.container=new import_ag_charts_community88._ModuleSupport.Group({name:"static-annotations"}),this.annotations=new Selection2(this.container,this.createAnnotationScene.bind(this)),this.settingsDialog=new AnnotationSettingsDialog(this.ctx),this.textInput=new TextInput(this.ctx),this.isRestoringAnnotations=!0,this.postUpdateFns=[],this.state=this.setupStateMachine(),this.setupListeners(),this.setupDOM(),this.ctx.historyManager.addMementoOriginator(e.annotationManager),this.ctx.historyManager.addMementoOriginator(this.defaults),this.textInput.setKeyDownHandler(this.onTextInput.bind(this))}setupStateMachine(){const{ctx:e}=this;return new AnnotationsStateMachine({resetToIdle:()=>{e.domManager.updateCursor("annotations"),this.popAnnotationState(InteractionState2.Annotations),this.hideOverlays(),this.optionsToolbar.hide(),this.deleteEphemeralAnnotations(),this.update()},hoverAtCoords:(i,o,s)=>{let a;return this.annotations.each((r,n,l)=>{const c=r.containsPoint(i.x,i.y);c&&(a??(a=l)),r.toggleHovered(c||o===l)}),a!=null?e.tooltipManager.suppressTooltip("annotations"):this.isAnnotationState()||e.tooltipManager.unsuppressTooltip("annotations"),this.ctx.domManager.updateCursor("annotations",a==null?void 0:this.annotations.at(a)?.getCursor()),a!==s&&this.update(),a},getNodeAtCoords:(i,o)=>{const s=this.annotations.at(o);if(s)return s.getNodeAtCoords(i.x,i.y)},translate:(i,o)=>{const s=this.annotations.at(i),a=getTypedDatum(this.annotationData.at(i));if(!(!s||!a))return this.translateNode(s,a,o)},copy:i=>{const o=this.annotations.at(i),s=getTypedDatum(this.annotationData.at(i));if(!(!o||!s))return this.createAnnotationDatumCopy(o,s)},paste:i=>{this.createAnnotation(i.type,i,!1),this.postUpdateFns.push(()=>{this.state.transitionAsync("selectLast"),this.state.transitionAsync("copy")})},select:(i,o)=>{const{annotations:s,optionsToolbar:a,toolbar:r}=this;this.hideOverlays(),r.clearActiveButton(),r.resetButtonIcons();const n=i!=null?s.at(i):null,l=o!=null?s.at(o):null;l===n&&n!=null||(l?.toggleActive(!1),a.hide(),n?(this.pushAnnotationState(InteractionState2.AnnotationsSelected),n.toggleActive(!0),a.updateButtons(this.annotationData.at(i)),this.postUpdateFns.push(()=>{a.show(),a.setAnchorScene(n)})):(this.popAnnotationState(InteractionState2.AnnotationsSelected),this.popAnnotationState(InteractionState2.Annotations)),this.deleteEphemeralAnnotations(),this.update())},selectLast:()=>(this.pushAnnotationState(InteractionState2.AnnotationsSelected),this.annotationData.length-1),startInteracting:()=>{this.pushAnnotationState(InteractionState2.Annotations)},stopInteracting:()=>{this.popAnnotationState(InteractionState2.Annotations)},create:(i,o)=>{this.createAnnotation(i,o)},delete:i=>{this.annotationData.splice(i,1)},deleteAll:()=>{this.annotationData.splice(0,this.annotationData.length)},validatePoint:(i,o)=>{const s=this.getAnnotationContext();return s?validateDatumPoint(s,i,o):!0},getAnnotationType:i=>stringToAnnotationType(this.annotationData[i].type),datum:i=>this.annotationData.at(i),node:i=>this.annotations.at(i),recordAction:i=>{this.recordActionAfterNextUpdate(i)},update:()=>{this.postUpdateFns.push(()=>{const i=this.state.getActive(),o=i!=null?this.annotations.at(i):null;o!=null&&this.optionsToolbar.setAnchorScene(o)}),this.update()},showTextInput:i=>{const o=getTypedDatum(this.annotationData.at(i));if(!this.annotations.at(i)||!o||!("getTextInputCoords"in o)||!("getTextPosition"in o))return;const a={color:o.color,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,placeholderColor:o.getPlaceholderColor()},r=this.getAnnotationContext(),n=c=>Vec219.add(o.getTextInputCoords(r,c),Vec219.required(this.seriesRect)),l=()=>o.getTextPosition();this.textInput.show({styles:a,layout:{getTextInputCoords:n,getTextPosition:l,alignment:o.alignment,textAlign:o.textAlign,width:o.width},text:o.text,placeholderText:o.placeholderText,onChange:(c,h)=>{this.state.transition("updateTextInputBBox",h)}}),this.ctx.domManager.updateCursor("annotations")},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:i=>{this.textInput.updateColor(i)},updateTextInputFontSize:i=>{const o=this.textInput.updateFontSize(i);this.state.transition("updateTextInputBBox",o)},updateTextInputBBox:i=>{this.state.transition("updateTextInputBBox",i)},showAnnotationOptions:i=>{const o=this.annotations.at(i);!o||isEphemeralType(this.annotationData.at(i))||(this.optionsToolbar.updateButtons(this.annotationData.at(i)),this.optionsToolbar.show(),this.optionsToolbar.setAnchorScene(o))},showAnnotationSettings:(i,o,s="line")=>{const a=this.annotationData.at(i);if(!isLineType(a)&&!isChannelType(a)&&!isMeasurerType(a)||isEphemeralType(a))return;const r=c=>(h,u,p,d)=>{this.setColorAndDefault(a.type,c,h,u,p,d),this.optionsToolbar.updateColorPickerColor(c,u,p,d)},n=c=>()=>{this.recordActionAfterNextUpdate(`Change ${a.type} ${c} to ${a.getDefaultColor(c)}`,["annotations","defaults"]),this.update()},l={initialSelectedTab:s,ariaLabel:this.ctx.localeManager.t("ariaLabelAnnotationSettingsDialog"),sourceEvent:o,onChangeLine:c=>{this.state.transition("lineProps",c),c.bands!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"bands",c.bands),c.reverse!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"reverse",c.reverse),c.showFill!=null&&this.defaults.setDefaultFibonacciOptions(a.type,"showFill",c.showFill)},onChangeText:c=>{this.state.transition("lineText",c),c.alignment&&this.defaults.setDefaultLineTextAlignment(a.type,c.alignment),c.position&&this.defaults.setDefaultLineTextPosition(a.type,c.position),this.recordActionAfterNextUpdate(`Change ${a.type} text ${Object.keys(c).map(h=>`${h} to ${c[h]}`).join(", ")}`)},onChangeFillColor:r("fill-color"),onChangeHideFillColor:n("fill-color"),onChangeLineColor:r("line-color"),onChangeHideLineColor:n("line-color"),onChangeLineStyleType:c=>{this.setLineStyleTypeAndDefault(a.type,c),this.optionsToolbar.updateLineStyleType(LINE_STYLE_TYPE_ITEMS.find(h=>h.value===c)??LINE_STYLE_TYPE_ITEMS[0])},onChangeLineStyleWidth:c=>{this.setLineStyleWidthAndDefault(a.type,c),this.optionsToolbar.updateStrokeWidth({strokeWidth:c,value:c,label:String(c)})},onChangeTextColor:r("text-color"),onChangeHideTextColor:n("text-color"),onChangeTextFontSize:c=>{this.setFontSizeAndDefault(a.type,c)}};this.settingsDialog.show(a,l)}})}setupListeners(){const{ctx:e,optionsToolbar:i,settingsDialog:o,toolbar:s}=this,{seriesWidget:a,seriesDragInterpreter:r,chartWidget:n}=e.widgets;this.destroyFns.push(r.addListener("click",this.hoverTouchPreHandler.bind(this)),r.addListener("drag-start",this.hoverTouchPreHandler.bind(this)),r.addListener("drag-move",this.dragMoveTouchPreHandler.bind(this)),r.addListener("mousemove",this.onHover.bind(this)),r.addListener("click",this.onClick.bind(this)),r.addListener("dblclick",this.onDoubleClick.bind(this)),r.addListener("drag-start",this.onDragStart.bind(this)),r.addListener("drag-move",this.onDrag.bind(this)),r.addListener("drag-end",this.onDragEnd.bind(this)),a.addListener("keydown",this.onKeyDown.bind(this)),a.addListener("keyup",this.onKeyUp.bind(this)),n.addListener("click",this.onCancel.bind(this)),e.annotationManager.addListener("restore-annotations",this.onRestoreAnnotations.bind(this)),e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),e.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),e.zoomManager.addListener("zoom-change",()=>this.onResize()),e.domManager.addListener("resize",()=>this.onResize()),s.addListener("cancel-create-annotation",()=>{this.cancel(),this.reset(),this.update()}),s.addListener("pressed-create-annotation",({annotation:l})=>{this.cancel(),this.pushAnnotationState(InteractionState2.Annotations),this.state.transition(l),this.update()}),s.addListener("pressed-clear",()=>{this.clear(),this.recordActionAfterNextUpdate("Clear all")}),s.addListener("pressed-show-menu",()=>{this.cancel(),this.reset()}),s.addListener("pressed-unrelated",()=>{this.reset()}),i.addListener("pressed-delete",()=>{this.cancel(),this.delete(),this.reset()}),i.addListener("pressed-settings",({sourceEvent:l})=>{this.state.transition("toolbarPressSettings",l)}),i.addListener("pressed-lock",()=>{this.update()}),i.addListener("hid-overlays",()=>{this.settingsDialog.hide()}),i.addListener("saved-color",({type:l,colorPickerType:c,color:h})=>{this.recordActionAfterNextUpdate(`Change ${l} ${c} to ${h}`,["annotations","defaults"])}),i.addListener("updated-color",({type:l,colorPickerType:c,colorOpacity:h,color:u,opacity:p,isMultiColor:d})=>{this.setColorAndDefault(l,c,h,u,p,d)}),i.addListener("updated-font-size",({type:l,fontSize:c})=>{this.setFontSizeAndDefault(l,c)}),i.addListener("updated-line-style",({type:l,lineStyleType:c})=>{this.setLineStyleTypeAndDefault(l,c)}),i.addListener("updated-line-width",({type:l,strokeWidth:c})=>{this.setLineStyleWidthAndDefault(l,c)}),o.addListener("hidden",()=>{this.optionsToolbar.clearActiveButton()}))}setupDOM(){const{ctx:e,toolbar:i}=this;this.destroyFns.push(e.annotationManager.attachNode(this.container),()=>e.domManager.removeStyles(DEFAULT_ANNOTATION_AXIS_BUTTON_CLASS),()=>i.destroy())}async processData(e){if(!this.enabled||this.data==null||this.xKey==null||this.volumeKey==null)return;const i=[keyProperty(this.xKey,void 0,{id:"date"}),valueProperty(this.volumeKey,"number",{id:"volume"})],{dataModel:o,processedData:s}=await e.request("annotations",this.data,{props:i});this.dataModel=o,this.processedData=s}createAnnotationScene(e){if(e.type in annotationConfigs)return new annotationConfigs[e.type].scene;throw new Error(`AG Charts - Cannot create annotation scene of type [${e.type}], expected one of [${Object.keys(annotationConfigs)}], ignoring.`)}static createAnnotationDatum(e){if(e.type in annotationConfigs)return new annotationConfigs[e.type].datum().set(e);throw new Error(`AG Charts - Cannot create annotation datum of unknown type [${e.type}], expected one of [${Object.keys(annotationConfigs)}], ignoring.`)}createAnnotation(e,i,o=!0){if(this.annotationData.push(i),o){const s=this.ctx.annotationManager.getAnnotationTypeStyles(e);s&&i.set(s),this.defaults.applyDefaults(i)}this.injectDatumDependencies(i),this.update()}injectDatumDependencies(e){"setLocaleManager"in e&&e.setLocaleManager(this.ctx.localeManager),"getVolume"in e&&(e.getVolume=this.getDatumRangeVolume.bind(this))}getDatumRangeVolume(e,i){const{dataModel:o,processedData:s}=this;let a=getGroupingValue(e),r=getGroupingValue(i);if(!(0,import_ag_charts_core37.isValidDate)(a)||!(0,import_ag_charts_core37.isValidDate)(r)||!o||!s||this.volumeKey==null)return;a>r&&([a,r]=[r,a]);const n=o.resolveKeysById({id:"annotations"},"date",s),l=o.resolveColumnById({id:"annotations"},"volume",s);let c=0;for(let h=0;h<s.input.count;h++){const u=n[h];(0,import_ag_charts_core37.isValidDate)(u)&&u>=a&&u<=r&&(c+=l[h])}return c}translateNode(e,i,o){const s=this.getAnnotationConfig(i),a=this.getAnnotationContext();a&&s.translate(e,i,o,a)}createAnnotationDatumCopy(e,i){const o=this.getAnnotationConfig(i),s=new o.datum;s.set(i.toJson());const a=this.getAnnotationContext();if(a)return o.copy(e,i,s,a)}getAnnotationConfig(e){if(e.type in annotationConfigs)return annotationConfigs[e.type];throw new Error(`AG Charts - Cannot get annotation config of unknown type [${e.type}], expected one of [${Object.keys(annotationConfigs)}], ignoring.`)}onRestoreAnnotations(e){this.enabled&&(this.clear(),this.annotationData.set(e.annotations),this.isRestoringAnnotations=!0,this.postUpdateFns.push(()=>{this.ctx.annotationManager.fireChangedEvent()}),this.update())}onLayoutComplete(e){const i=e.series.paddedRect;this.seriesRect=i,this.container.setClipRect(i);for(const o of e.axes??[])o.direction===import_ag_charts_community88._ModuleSupport.ChartAxisDirection.X?this.xAxis=this.getAxis(o,i,this.xAxis?.button):this.yAxis=this.getAxis(o,i,this.yAxis?.button);this.showAnnotations()?this.animateAnnotations({from:0,to:1,phase:"trailing"}):this.animateAnnotations({from:1,to:0,phase:"remove"})}showAnnotations(){if(!this.yAxis||!this.xAxis)return!1;const e=this.ctx.chartService.series.some(s=>s.hasData),o=this.yAxis.context.seriesIds().some(s=>this.ctx.chartService.series.find(r=>r.id===s)?.visible);return e&&o}animateAnnotations({from:e,to:i,phase:o}){const{annotations:s}=this;this.ctx.animationManager?.animate({from:e,to:i,id:"chart-annotations",phase:o,groupId:"opacity",onUpdate(a){s.each(r=>{r.opacity=a,"setAxisLabelOpacity"in r&&r.setAxisLabelOpacity(a)})},onStop(){s.each(a=>{a.opacity=i,"setAxisLabelOpacity"in a&&a.setAxisLabelOpacity(i)})}})}onPreRender(){this.updateAnnotations(),this.state.transition("render")}getAxis(e,i,o){const s=this.ctx.axisManager.getAxisContext(e.direction)[0],{position:a="bottom",direction:r}=s,n=e.gridPadding+e.seriesAreaPadding,l=new BBox3(0,0,i.width,i.height).grow(n,a),c=s.direction===ChartAxisDirection10.X?"vertical":"horizontal",{axesButtons:h,snap:u}=this;if(this.enabled&&h.enabled&&(h.axes==="xy"||h.axes===r)){o??(o=new AxisButton(this.ctx,{...s,snapToGroup:u},g=>this.onAxisButtonClick(g,c),i));const d=calculateAxisLabelPadding(e);o.update(i,d)}else o?.destroy(),o=void 0;return{layout:e,context:s,bounds:l,button:o}}recordActionAfterNextUpdate(e,i=["annotations"]){const{defaults:o,ctx:{annotationManager:s,historyManager:a}}=this,r=i.map(n=>n==="defaults"?o:s);this.postUpdateFns.push(()=>{a.record(e,...r),s.fireChangedEvent()})}setColorAndDefault(e,i,o,s,a,r){this.state.transition("color",{colorPickerType:i,colorOpacity:o,color:s,opacity:a,isMultiColor:r}),this.defaults.setDefaultColor(e,i,o,s,a,r)}setFontSizeAndDefault(e,i){this.state.transition("fontSize",i),this.defaults.setDefaultFontSize(e,i),this.recordActionAfterNextUpdate(`Change ${e} font size to ${i}`,["annotations","defaults"])}setLineStyleTypeAndDefault(e,i){this.state.transition("lineStyle",{type:i}),this.defaults.setDefaultLineStyleType(e,i),this.recordActionAfterNextUpdate(`Change ${e} line style to ${i}`,["annotations","defaults"])}setLineStyleWidthAndDefault(e,i){this.state.transition("lineStyle",{strokeWidth:i}),this.defaults.setDefaultLineStyleWidth(e,i),this.recordActionAfterNextUpdate(`Change ${e} stroke width to ${i}`,["annotations","defaults"])}updateAnnotations(){const{annotationData:e,annotations:i,seriesRect:o,ctx:{annotationManager:s}}=this,a=this.getAnnotationContext();if(!o||!a)return;s.updateData(e.toJson().filter(n=>!isEphemeralType(n)));const r=this.showAnnotations();this.toolbar.refreshButtonsEnabled(r),this.toolbar.toggleClearButtonEnabled(e.length>0&&r),i.update(e??[],void 0,n=>n.id).each((n,l)=>{if(!r||!this.validateDatum(l)){n.visible=!1,"setAxisLabelVisible"in n&&n.setAxisLabelVisible(!1);return}"setAxisLabelVisible"in n&&n.setAxisLabelVisible(!0),this.injectDatumDependencies(l),updateAnnotation(n,l,a)}),this.postUpdateFns.forEach(n=>n()),this.postUpdateFns=[],this.isRestoringAnnotations=!1}validateDatum(e){if(!this.isRestoringAnnotations)return!0;const i=this.getAnnotationContext(),o=`Annotation [${e.type}] `;return i?e.isValidWithContext(i,o):!0}getAnnotationContext(){const{seriesRect:e,xAxis:i,yAxis:o,snap:s}=this;if(e&&i&&o)return{seriesRect:e,xAxis:{...i.context,bounds:i.bounds,labelPadding:calculateAxisLabelPadding(i.layout),snapToGroup:s},yAxis:{...o.context,bounds:o.bounds,labelPadding:calculateAxisLabelPadding(i.layout),snapToGroup:s}}}onHover(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=e.sourceEvent.shiftKey,a=Vec219.from(e),r=invertCoords(a,o);i.transition("hover",{offset:a,point:r,shiftKey:s,context:o})}onClick(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const s=e.sourceEvent.shiftKey,a=invertCoords(Vec219.from(e),o),r=this.textInput.getValue(),n=this.textInput.getBBox();i.transition("click",{point:a,shiftKey:s,textInputValue:r,bbox:n})}onDoubleClick(e){const{state:i}=this;if(!this.getAnnotationContext())return;const s=Vec219.from(e);i.transition("dblclick",{offset:s})}onAxisButtonClick(e,i){this.cancel(),this.reset();const o=this.getAnnotationContext();if(!this.annotationData||!o)return;const{state:s}=this;this.pushAnnotationState(InteractionState2.Annotations);const a=i==="horizontal";if(s.transition(a?"horizontal-line":"vertical-line"),this.optionsToolbar.hide(),!e)return;const r=invertCoords(e,o);validateDatumPoint(o,r)&&(s.transition("click",{point:r,shiftKey:!1}),this.update())}onResize(){const e=this.textInput.getValue(),i=this.textInput.getBBox();this.state.transition("resize",{textInputValue:e,bbox:i})}hoverTouchPreHandler(e){e.device==="touch"&&this.onHover(e)}dragMoveTouchPreHandler(e){e.device==="touch"&&this.ctx.interactionManager.isState(InteractionState2.AnnotationsSelected)&&e.sourceEvent.preventDefault()}onDragStart(e){if(!this.ctx.interactionManager.isState(InteractionState2.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const o=Vec219.from(e),s=invertCoords(o,i),a=this.textInput.getValue(),r=this.textInput.getBBox();this.state.transition("dragStart",{context:i,offset:o,point:s,textInputValue:a,bbox:r})}onDrag(e){if(!this.ctx.interactionManager.isState(InteractionState2.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const o=Vec219.from(e),s=invertCoords(o,i),a=e.sourceEvent.shiftKey,r=this.textInput.getValue(),n=this.textInput.getBBox();this.state.transition("drag",{context:i,offset:o,point:s,shiftKey:a,textInputValue:r,bbox:n})}onDragEnd(){this.state.transition("dragEnd")}onCancel(e){const{sourceEvent:i}=e??{};i?.currentTarget===i?.target&&(this.cancel(),this.reset())}onDelete(){this.textInput.isVisible()||(this.cancel(),this.delete(),this.reset(),this.update())}onTextInput(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const{key:s,shiftKey:a}=e,r=this.textInput.getValue(),n=this.textInput.getBBox();i.transition("textInput",{key:s,shiftKey:a,textInputValue:r,bbox:n,context:o})}onKeyDown(e){const{state:i}=this,o=this.getAnnotationContext();if(!o)return;const{sourceEvent:s}=e,{shiftKey:a,ctrlKey:r,metaKey:n}=s,l=r||n,c=r||a;i.transition("keyDown",{shiftKey:a,context:o});const h={x:0,y:0},u=Math.max(o?.xAxis.scale.bandwidth??0,c?10:1),p=Math.max(o?.yAxis.scale.bandwidth??0,c?10:1);switch(s.key){case"ArrowDown":h.y=p;break;case"ArrowUp":h.y=-p;break;case"ArrowLeft":h.x=-u;break;case"ArrowRight":h.x=u;break;case"Escape":this.onCancel();return;case"Backspace":case"Delete":this.onDelete();return}if((h.x||h.y)&&(i.transition("translate",{translation:h}),s.stopPropagation(),s.preventDefault()),!!l)switch(s.key){case"c":i.transition("copy");return;case"x":i.transition("cut"),this.recordActionAfterNextUpdate("Cut annotation");return;case"v":i.transition("paste"),this.recordActionAfterNextUpdate("Paste annotation");return}}onKeyUp(e){const{shiftKey:i}=e.sourceEvent,o=this.getAnnotationContext();o&&(this.state.transition("keyUp",{shiftKey:i,context:o}),this.state.transition("translateEnd"))}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}deleteEphemeralAnnotations(){for(const[e,i]of this.annotationData.entries())isEphemeralType(i)&&this.annotationData.splice(e,1)}hideOverlays(){this.settingsDialog.hide(),this.toolbar.hideOverlays(),this.optionsToolbar.hideOverlays()}pushAnnotationState(e){this.ctx.interactionManager.pushState(e),this.ctx.tooltipManager.suppressTooltip("annotations")}popAnnotationState(e){this.ctx.interactionManager.popState(e),this.ctx.tooltipManager.unsuppressTooltip("annotations")}isAnnotationState(){return this.ctx.interactionManager.isState(InteractionState2.Annotations)||this.ctx.interactionManager.isState(InteractionState2.AnnotationsSelected)}update(e=ChartUpdateType.PRE_SCENE_RENDER){this.ctx.updateService.update(e)}};__decorateClass([ObserveChanges2((t,e,i)=>{const{ctx:{annotationManager:o,stateManager:s}}=t;e!==i&&(t.toolbar?.toggleVisibility(!!e),i===!1&&e===!0?s.restoreState(o):e===!1&&t.clear())}),TempValidate32(BOOLEAN11)],_Annotations.prototype,"enabled",2),__decorateClass([TempValidate32(OBJECT14)],_Annotations.prototype,"toolbar",2),__decorateClass([TempValidate32(OBJECT14)],_Annotations.prototype,"optionsToolbar",2),__decorateClass([TempValidate32(OBJECT14)],_Annotations.prototype,"axesButtons",2),__decorateClass([TempValidate32(BOOLEAN11)],_Annotations.prototype,"snap",2);var Annotations=_Annotations,import_ag_charts_community89=require("ag-charts-community"),{FONT_SIZE_RATIO,ThemeSymbols}=import_ag_charts_community89._ModuleSupport,stroke={stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:2},handle={fill:ThemeSymbols.DEFAULT_ANNOTATION_HANDLE_FILL,strokeOpacity:1,strokeWidth:2},font={color:{$ref:"backgroundColor"},fontSize:{$rem:[FONT_SIZE_RATIO.LARGE]},fontFamily:{$ref:"fontFamily"}},axisLabel={...font,enabled:!0,fill:{$ref:"foregroundColor"},fontSize:{$ref:"fontSize"}},text={...font,textAlign:"left"},lineText={...font,position:"top",alignment:"center",color:{$ref:"textColor"}},channelText={...font,position:"top",alignment:"center",color:{$ref:"textColor"}},measurerStatistics={...font,fontSize:{$ref:"fontSize"},color:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_COLOR,fill:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_FILL,stroke:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_STROKE,strokeWidth:1,divider:{stroke:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE,strokeWidth:1,strokeOpacity:.5}},measurer={...stroke,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...handle},text:{...lineText},statistics:{...measurerStatistics}},toolbar={buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}],padding:{$ref:"padding"}},optionsToolbar={buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color"},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color"},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color"},{tooltip:"toolbarAnnotationsTextSize",value:"text-size"},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width"},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type"},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings"},{icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},annotationsTheme={enabled:!1,line:{...stroke,handle:{...handle},text:{...lineText}},"horizontal-line":{...stroke,handle:{...handle},axisLabel:{...axisLabel},text:{...lineText}},"vertical-line":{...stroke,handle:{...handle},axisLabel:{...axisLabel},text:{...lineText}},"disjoint-channel":{...stroke,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...handle},text:{...channelText}},"parallel-channel":{...stroke,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...handle},text:{...channelText}},"fibonacci-retracement":{...stroke,strokes:ThemeSymbols.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...handle},text:{...lineText,position:"center"},label:{...font,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},"fibonacci-retracement-trend-based":{...stroke,strokes:ThemeSymbols.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...handle},text:{...lineText,position:"center"},label:{...font,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},callout:{...stroke,...text,color:{$ref:"textColor"},handle:{...handle},fill:{$ref:"foregroundColor"},fillOpacity:.075},comment:{...text,fontWeight:700,handle:{...handle},fill:{$ref:"foregroundColor"}},note:{...text,color:ThemeSymbols.DEFAULT_TEXTBOX_COLOR,fill:ThemeSymbols.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...handle},background:{fill:ThemeSymbols.DEFAULT_TEXTBOX_FILL,stroke:ThemeSymbols.DEFAULT_TEXTBOX_STROKE,strokeWidth:1}},text:{...text,color:{$ref:"textColor"},handle:{...handle}},arrow:{...stroke,handle:{...handle},text:{...lineText}},"arrow-up":{fill:ThemeSymbols.PALETTE_UP_FILL,handle:{...handle,stroke:{$ref:"foregroundColor"}}},"arrow-down":{fill:ThemeSymbols.PALETTE_DOWN_FILL,handle:{...handle,stroke:{$ref:"foregroundColor"}}},"date-range":{...measurer},"price-range":{...measurer},"date-price-range":{...measurer},"quick-date-price-range":{up:{...stroke,fill:ThemeSymbols.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2,handle:{...handle},statistics:{...measurerStatistics,color:"#fff",fill:ThemeSymbols.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...stroke,stroke:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE,fill:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,fillOpacity:.2,handle:{...handle,stroke:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE},statistics:{...measurerStatistics,color:"#fff",fill:ThemeSymbols.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{},toolbar,optionsToolbar},AnnotationsModule={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Annotations(t),themeTemplate:{annotations:annotationsTheme}},import_ag_charts_community91=require("ag-charts-community"),import_ag_charts_community90=require("ag-charts-community"),import_ag_charts_core38=require("ag-charts-core"),{BaseProperties:BaseProperties12,ObserveChanges:ObserveChanges3,ProxyProperty,TempValidate:TempValidate33,NUMBER:NUMBER9,POSITIVE_NUMBER:POSITIVE_NUMBER6,RATIO:RATIO5,calculatePlacement}=import_ag_charts_community90._ModuleSupport,Image=class extends BaseProperties12{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),this.onLoad?.())},this.imageElement=(0,import_ag_charts_core38.createElement)("img"),this.imageElement.onload=this.onImageLoad,this.node=new import_ag_charts_community90._ModuleSupport.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e;const i={width:t,height:e},o=calculatePlacement(this.imageElement.width,this.imageElement.height,i,this);return this.node.setProperties(this.complete?{visible:!0,opacity:this.opacity,...o}:{visible:!1}),o}};__decorateClass([TempValidate33(NUMBER9,{optional:!0})],Image.prototype,"top",2),__decorateClass([TempValidate33(NUMBER9,{optional:!0})],Image.prototype,"right",2),__decorateClass([TempValidate33(NUMBER9,{optional:!0})],Image.prototype,"bottom",2),__decorateClass([TempValidate33(NUMBER9,{optional:!0})],Image.prototype,"left",2),__decorateClass([TempValidate33(POSITIVE_NUMBER6,{optional:!0})],Image.prototype,"width",2),__decorateClass([TempValidate33(POSITIVE_NUMBER6,{optional:!0})],Image.prototype,"height",2),__decorateClass([TempValidate33(RATIO5)],Image.prototype,"opacity",2),__decorateClass([ProxyProperty("imageElement.src"),ObserveChanges3(t=>t.loadedSynchronously=t.complete)],Image.prototype,"url",2);var{ActionOnSet:ActionOnSet3,OBJECT:OBJECT15,TempValidate:TempValidate34}=import_ag_charts_community91._ModuleSupport,Background2=class extends import_ag_charts_community91._ModuleSupport.Background{constructor(){super(...arguments),this.image=new Image}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.ctx.updateService.update(import_ag_charts_community91._ModuleSupport.ChartUpdateType.SCENE_RENDER)}};__decorateClass([TempValidate34(OBJECT15,{optional:!0}),ActionOnSet3({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],Background2.prototype,"image",2);var BackgroundModule={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Background2(t)},import_ag_charts_community93=require("ag-charts-community"),import_ag_charts_community92=require("ag-charts-community"),import_ag_charts_core39=require("ag-charts-core"),{BOOLEAN:BOOLEAN12,ActionOnSet:ActionOnSet4,LayoutElement:LayoutElement2,Menu:Menu3,TempValidate:TempValidate35}=import_ag_charts_community92._ModuleSupport,menuItems=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],ChartToolbar=class extends import_ag_charts_community92._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.menu=new Menu3(this.ctx,"chart-toolbar"),this.toolbar=t.sharedToolbar.getSharedToolbar("chartToolbar"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPressed.bind(this)),t.layoutManager.registerElement(LayoutElement2.ToolbarLeft,this.onLayoutStart.bind(this)),()=>this.toolbar.destroy())}onLayoutStart(t){this.enabled&&(this.updateButton(),this.toolbar.layout(t.layoutBox))}onButtonPressed({event:t,buttonBounds:e}){this.menu.setAnchor({x:e.x+e.width+6,y:e.y}),this.menu.show({items:menuItems,menuItemRole:"menuitemradio",ariaLabel:this.ctx.localeManager.t("toolbarSeriesTypeDropdown"),class:"ag-charts-chart-toolbar__menu",value:this.getChartType(),sourceEvent:t.sourceEvent,onPress:i=>{this.setChartType(i.value),this.hidePopover()},onHide:()=>{this.toolbar.clearActiveButton()}}),this.toolbar.toggleActiveButtonByIndex(0)}updateButton(){const t=this.getChartType(),e=menuItems.find(i=>i.value===t)?.icon;e!=null&&this.toolbar.updateButtons([{icon:e,tooltip:"toolbarSeriesTypeDropdown"}])}hidePopover(){this.toolbar.clearActiveButton(),this.menu.hide()}setChartType(t){const e={chartType:t};this.ctx.chartService.publicApi?.updateDelta(e).catch(i=>import_ag_charts_core39.Logger.error(i))}getChartType(){const t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return t==null||!menuItems.some(e=>e.value===t)?"candlestick":t}};__decorateClass([TempValidate35(BOOLEAN12),ActionOnSet4({changeValue(t){this.toolbar?.setHidden(!t)}})],ChartToolbar.prototype,"enabled",2);var ChartToolbarModule={type:"root",optionsKey:"chartToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new ChartToolbar(t)},import_ag_charts_community95=require("ag-charts-community"),import_ag_charts_community94=require("ag-charts-community"),import_ag_charts_core40=require("ag-charts-core"),DEFAULT_CONTEXT_MENU_CLASS="ag-charts-context-menu",DEFAULT_CONTEXT_MENU_DARK_CLASS="ag-charts-dark-context-menu",{BOOLEAN:BOOLEAN13,TempValidate:TempValidate36,initMenuKeyNav,makeAccessibleClickListener,ContextMenuRegistry}=import_ag_charts_community94._ModuleSupport,moduleId2="context-menu";function getChildrenOfType(t,e){const{children:i}=t??{};if(!i)return[];const o=[];for(const s of Array.from(i))s instanceof e&&o.push(s);return o}var ContextMenu=class extends import_ag_charts_community94._ModuleSupport.BaseModuleInstance{constructor(t){if(super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.extraSeriesAreaActions=[],this.extraLegendItemActions=[],this.pickedNode=void 0,this.showEvent=void 0,this.x=0,this.y=0,this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.groups={default:[],extra:[],extraSeriesArea:[],extraNode:[],extraLegendItem:[]},this.element=t.domManager.addChild("canvas-overlay",moduleId2),this.element.classList.add(DEFAULT_CONTEXT_MENU_CLASS),this.element.addEventListener("contextmenu",e=>e.preventDefault()),this.destroyFns.push(()=>this.element.parentNode?.removeChild(this.element)),this.doClose(),this.destroyFns.push(t.domManager.addListener("hidden",()=>this.hide())),typeof MutationObserver<"u"){const e=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});e.observe(this.element,{childList:!0}),this.mutationObserver=e,this.destroyFns.push(()=>e.disconnect())}this.destroyFns.push(this.registry.registerDefaultAction({id:"download",type:"all",label:"contextMenuDownload",action:()=>{const e=t.chartService.title;let i="image";e?.enabled&&e?.text!==void 0&&(i=e.text.replace(/\.+/,"")),this.ctx.chartService.publicApi?.download({fileName:i}).catch(o=>{import_ag_charts_core40.Logger.error("Unable to download chart",o)})}})),this.destroyFns.push(this.registry.addListener(e=>this.onContext(e)))}onContext(t){if(!this.enabled)return;t.sourceEvent.preventDefault(),this.showEvent=t.sourceEvent,this.x=t.x,this.y=t.y,this.groups.default=this.registry.filterActions(t.type);for(const n of this.groups.default)n.id==null||n.toggleEnabledOnShow==null||(n.toggleEnabledOnShow(t)?this.registry.enableAction(n.id):this.registry.disableAction(n.id));this.pickedNode=void 0,this.pickedLegendItem=void 0,this.groups.extra=this.extraActions.map(({label:n,action:l})=>({type:"all",label:n,action:l})),this.groups.extraSeriesArea=[],this.groups.extraNode=[],ContextMenuRegistry.check("series-area",t)&&(this.pickedNode=t.context.pickedNode,this.groups.extraSeriesArea=this.extraSeriesAreaActions.map(({label:n,action:l})=>({type:"series-area",label:n,action:l})),this.pickedNode&&(this.groups.extraNode=this.extraNodeActions.map(({label:n,action:l})=>({type:"node",label:n,action:l})))),this.groups.extraLegendItem=[],ContextMenuRegistry.check("legend",t)&&(this.pickedLegendItem=t.context.legendItem,this.pickedLegendItem&&(this.groups.extraLegendItem=this.extraLegendItemActions.map(({label:n,action:l})=>({type:"legend",label:n,action:l}))));const{default:e,extra:i,extraSeriesArea:o,extraNode:s,extraLegendItem:a}=this.groups;[e,i,o,s,a].reduce((n,l)=>l.length+n,0)!==0&&this.show(t.sourceEvent)}show(t){this.interactionManager.pushState(import_ag_charts_community94._ModuleSupport.InteractionState.ContextMenu),this.element.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme);const e=this.renderMenu();this.menuCloser?.close(),this.menuElement?this.element.replaceChild(e,this.menuElement):this.element.appendChild(e),this.menuElement=e,this.element.style.display="block";const i=t.pointerType==="touch"?!1:void 0,o=getChildrenOfType(e,HTMLButtonElement);this.menuCloser=initMenuKeyNav({menu:e,buttons:o,orientation:"vertical",sourceEvent:t,overrideFocusVisible:i,autoCloseOnBlur:!0,closeCallback:()=>this.doClose()}),t.pointerType==="touch"&&this.ctx.chartService.overrideFocusVisible(!1)}hide(){this.menuCloser?.close()}doClose(){this.interactionManager.popState(import_ag_charts_community94._ModuleSupport.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0,this.menuCloser=void 0),this.element.style.display="none"}renderMenu(){const t=(0,import_ag_charts_core40.createElement)("div");return t.classList.add(`${DEFAULT_CONTEXT_MENU_CLASS}__menu`),t.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme),t.role="menu",this.appendMenuGroup(t,this.groups.default,!1),this.appendMenuGroup(t,this.groups.extra),this.appendMenuGroup(t,this.groups.extraSeriesArea),this.pickedNode&&this.appendMenuGroup(t,this.groups.extraNode),this.pickedLegendItem&&this.appendMenuGroup(t,this.groups.extraLegendItem),t}appendMenuGroup(t,e,i=!0){e.length!==0&&(i&&t.appendChild(this.createDividerElement()),e.forEach(o=>{const s=this.renderItem(o);s&&t.appendChild(s)}))}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=(0,import_ag_charts_core40.createElement)("div");return t.classList.add(`${DEFAULT_CONTEXT_MENU_CLASS}__divider`),t.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme),t.role="separator",t}createActionElement({id:t,label:e,type:i,action:o}){const s=!!(t&&this.registry.isDisabled(t));return this.createButtonElement(i,e,o,s)}createButtonOnClick(t,e){return ContextMenuRegistry.checkCallback("legend",t,e)?i=>{if(this.pickedLegendItem){const{seriesId:o,itemId:s}=this.pickedLegendItem;e({type:"contextmenu",seriesId:o,itemId:s,event:i}),this.hide()}}:ContextMenuRegistry.checkCallback("series-area",t,e)?()=>{e({type:"seriesContextMenuAction",event:this.showEvent}),this.hide()}:ContextMenuRegistry.checkCallback("node",t,e)?()=>{const{pickedNode:i,showEvent:o}=this,s=i?.series.createNodeContextMenuActionEvent(o,i);s?e(s):import_ag_charts_core40.Logger.error("series node not found"),this.hide()}:()=>{e({type:"contextMenuEvent",event:this.showEvent}),this.hide()}}createButtonElement(t,e,i,o){const s=(0,import_ag_charts_core40.createElement)("button");return s.classList.add(`${DEFAULT_CONTEXT_MENU_CLASS}__item`),s.classList.toggle(DEFAULT_CONTEXT_MENU_DARK_CLASS,this.darkTheme),s.ariaDisabled=o.toString(),s.textContent=this.ctx.localeManager.t(e),s.role="menuitem",s.onclick=makeAccessibleClickListener(s,this.createButtonOnClick(t,i)),s.addEventListener("mouseover",()=>s.focus({preventScroll:!0})),s}reposition(){let{x:t,y:e}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:o,offsetHeight:s}=this.element;t=(0,import_ag_charts_core40.clamp)(0,t,i.width-o),e=(0,import_ag_charts_core40.clamp)(0,e,i.height-s),this.element.style.left=`${t}px`,this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){super.destroy(),this.mutationObserver?.disconnect(),this.ctx.domManager.removeStyles(moduleId2),this.ctx.domManager.removeChild("canvas-overlay",moduleId2)}};__decorateClass([TempValidate36(BOOLEAN13)],ContextMenu.prototype,"enabled",2),__decorateClass([TempValidate36(BOOLEAN13)],ContextMenu.prototype,"darkTheme",2);var ContextMenuModule={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsKey:"contextMenu",moduleFactory:t=>new ContextMenu(t),themeTemplate:{contextMenu:{enabled:!0,darkTheme:import_ag_charts_community95._ModuleSupport.ThemeSymbols.IS_DARK_THEME}}},import_ag_charts_community98=require("ag-charts-community"),import_ag_charts_community97=require("ag-charts-community"),import_ag_charts_core41=require("ag-charts-core"),import_ag_charts_community96=require("ag-charts-community"),{BaseProperties:BaseProperties13,BOOLEAN:BOOLEAN14,FUNCTION:FUNCTION2,NUMBER:NUMBER10,STRING:STRING19,TempValidate:TempValidate37,createId:createId2,setAttribute:setAttribute2}=import_ag_charts_community96._ModuleSupport,DEFAULT_LABEL_CLASS="ag-charts-crosshair-label",CrosshairLabelProperties=class extends import_ag_charts_community96._ModuleSupport.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};__decorateClass([TempValidate37(BOOLEAN14)],CrosshairLabelProperties.prototype,"enabled",2),__decorateClass([TempValidate37(NUMBER10)],CrosshairLabelProperties.prototype,"xOffset",2),__decorateClass([TempValidate37(NUMBER10)],CrosshairLabelProperties.prototype,"yOffset",2),__decorateClass([TempValidate37(STRING19,{optional:!0})],CrosshairLabelProperties.prototype,"format",2),__decorateClass([TempValidate37(FUNCTION2,{optional:!0})],CrosshairLabelProperties.prototype,"renderer",2);var CrosshairLabel=class extends BaseProperties13{constructor(t,e,i){super(),this.domManager=t,this.id=createId2(this),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=t.addChild("canvas-overlay",`crosshair-label-${this.id}`),this.element.classList.add(DEFAULT_LABEL_CLASS),setAttribute2(this.element,"aria-hidden",!0),this.element.setAttribute("data-key",e),this.element.setAttribute("data-axis-id",i)}show(t){const{element:e}=this,i=t.x+this.xOffset,o=t.y+this.yOffset;e.style.top=`${Math.round(o)}px`,e.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}getBBox(){const{element:t}=this;return new import_ag_charts_community96._ModuleSupport.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}toggle(t){this.element.classList.toggle("ag-charts-crosshair-label--hidden",!t)}destroy(){this.domManager.removeChild("canvas-overlay",`crosshair-label-${this.id}`)}toLabelHtml(t,e){if(typeof t=="string")return t;e=e??{};const{text:i=e.text??"",color:o=e.color,backgroundColor:s=e.backgroundColor,opacity:a=e.opacity??1}=t;return`<div class="ag-charts-crosshair-label-content" style="${`opacity: ${a}; background-color: ${s?.toLowerCase()}; color: ${o}`}">
                    <span>${i}</span>
                </div>`}};__decorateClass([TempValidate37(BOOLEAN14)],CrosshairLabel.prototype,"enabled",2),__decorateClass([TempValidate37(NUMBER10)],CrosshairLabel.prototype,"xOffset",2),__decorateClass([TempValidate37(NUMBER10)],CrosshairLabel.prototype,"yOffset",2),__decorateClass([TempValidate37(STRING19,{optional:!0})],CrosshairLabel.prototype,"format",2),__decorateClass([TempValidate37(FUNCTION2,{optional:!0})],CrosshairLabel.prototype,"renderer",2);var{Group:Group5,TranslatableGroup,Line:Line3,BBox:BBox4,createId:createId3,POSITIVE_NUMBER:POSITIVE_NUMBER7,RATIO:RATIO6,BOOLEAN:BOOLEAN15,COLOR_STRING:COLOR_STRING4,LINE_DASH:LINE_DASH3,OBJECT:OBJECT16,InteractionState:InteractionState3,TempValidate:TempValidate38,ZIndexMap:ZIndexMap4,formatNumber,ChartAxisDirection:ChartAxisDirection11}=import_ag_charts_community97._ModuleSupport,Crosshair=class extends import_ag_charts_community97._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.id=createId3(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new CrosshairLabelProperties,this.seriesRect=new BBox4(0,0,0,0),this.bounds=new BBox4(0,0,0,0),this.crosshairGroup=new TranslatableGroup({name:"crosshairs",zIndex:ZIndexMap4.SERIES_CROSSHAIR}),this.lineGroup=this.crosshairGroup.appendChild(new Group5({name:`${this.id}-crosshair-lines`,zIndex:ZIndexMap4.SERIES_CROSSHAIR})),this.lineGroupSelection=import_ag_charts_community97._ModuleSupport.Selection.select(this.lineGroup,Line3,!1),this.activeHighlight=void 0,this.axisCtx=t.parent,this.labels={},this.hideCrosshairs(),t.domManager.addEventListener("focusin",({target:e})=>{const i=e instanceof HTMLElement&&t.domManager.contains(e,"series-area");this.crosshairGroup.visible&&!i&&(this.hideCrosshairs(),this.ctx.updateService.update(import_ag_charts_community97._ModuleSupport.ChartUpdateType.PERFORM_LAYOUT))}),this.destroyFns.push(t.scene.attachNode(this.crosshairGroup),t.widgets.seriesWidget.addListener("mousemove",e=>this.onMouseHoverLike(e)),t.widgets.seriesWidget.addListener("drag-move",e=>this.onMouseHoverLike(e)),t.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseOut()),t.widgets.seriesDragInterpreter.addListener("click",e=>this.onClick(e)),t.chartEventManager.addListener("series-focus-change",()=>this.onKeyPress()),t.zoomManager.addListener("zoom-pan-start",()=>this.onMouseOut()),t.zoomManager.addListener("zoom-change",()=>this.onMouseOut()),t.highlightManager.addListener("highlight-change",e=>this.onHighlightChange(e)),t.layoutManager.addListener("layout:complete",e=>this.layout(e)),()=>Object.values(this.labels).forEach(e=>e.destroy()))}layout({series:{rect:t,visible:e},axes:i}){if(!e||!i||!this.enabled)return;this.seriesRect=t;const{position:o="left",axisId:s}=this.axisCtx,a=i.find(c=>c.id===s);if(!a)return;this.axisLayout=a,this.bounds=t.clone().grow(a.gridPadding+a.seriesAreaPadding,o);const{crosshairGroup:r,bounds:n}=this;r.translationX=Math.round(n.x),r.translationY=Math.round(n.y);const l=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(l),this.updateLines(),this.updateLabels(l)}updateSelections(t){this.lineGroupSelection.update(t,e=>e.append(new Line3),e=>e)}updateLabels(t){const{labels:e,ctx:i}=this;for(const o of t)this.label.enabled&&(e[o]??(e[o]=new CrosshairLabel(i.domManager,o,this.axisCtx.axisId))),e[o]&&this.updateLabel(e[o]);this.labelFormatter=this.axisCtx.scaleValueFormatter(this.label.format)}updateLabel(t){const{enabled:e,xOffset:i,yOffset:o,format:s,renderer:a}=this.label;t.enabled=e,t.xOffset=i,t.yOffset=o,t.format=s,t.renderer=a}updateLines(){const{lineGroupSelection:t,bounds:e,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:r,axisLayout:n}=this;if(!n)return;const l=this.isVertical();t.each(c=>{c.stroke=i,c.strokeWidth=o,c.strokeOpacity=s,c.lineDash=a,c.lineDashOffset=r,c.y1=0,c.y2=l?e.height:0,c.x1=0,c.x2=l?0:e.width})}isVertical(){return this.axisCtx.direction===ChartAxisDirection11.X}isHover(t){return t.type==="mousemove"||t.type==="click"||t.device==="touch"&&this.ctx.chartService.touch.dragAction==="hover"}formatValue(t){const{labelFormatter:e,axisLayout:i,ctx:{callbackCache:o}}=this;if(e){const s=o.call(this.axisCtx,e,t);if(s!=null)return s}if(typeof t=="number"){const s=(i?.label.fractionDigits??0)+((0,import_ag_charts_core41.isInteger)(t)?0:1);return formatNumber(t,s)}return String(t??"")}onClick(t){t.device==="touch"&&this.onMouseHoverLike(t)}onMouseHoverLike(t){if(!this.enabled||this.snap)return;const e=this.isHover(t)?InteractionState3.Clickable:InteractionState3.AnnotationsMoveable;this.ctx.interactionManager.isState(e)&&(this.updatePositions(this.getData(t)),this.crosshairGroup.visible=!0,this.ctx.updateService.update(import_ag_charts_community97._ModuleSupport.ChartUpdateType.SCENE_RENDER))}onMouseOut(){this.ctx.interactionManager.isState(InteractionState3.Clickable)&&(this.hideCrosshairs(),this.ctx.updateService.update(import_ag_charts_community97._ModuleSupport.ChartUpdateType.SCENE_RENDER))}onKeyPress(){this.enabled&&!this.snap&&this.ctx.interactionManager.isState(InteractionState3.Default)&&this.hideCrosshairs()}onHighlightChange(t){if(!this.enabled)return;const{crosshairGroup:e,axisCtx:i}=this,{datum:o,series:s}=t.currentHighlight??{},a=o&&(s?.axes.x?.id===i.axisId||s?.axes.y?.id===i.axisId);if(this.activeHighlight=a?t.currentHighlight:void 0,!this.activeHighlight)this.hideCrosshairs();else if(this.snap){const r=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(r),e.visible=!0}}isInRange(t){return this.axisCtx.inRange(t)}updatePositions(t){const{seriesRect:e,lineGroupSelection:i}=this;i.each((o,s)=>{const a=t[s];if(!a){o.visible=!1,this.hideLabel(s);return}o.visible=!0;const{value:r,position:n}=a;let l=0,c=0;this.isVertical()?(l=n,o.x=Math.round(l)):(c=n,o.y=Math.round(c)),this.label.enabled?this.showLabel(l+e.x,c+e.y,r,s):this.hideLabel(s)})}getData(t){const{axisCtx:e}=this,i="pointer",{datum:o,xKey:s="",yKey:a=""}=this.activeHighlight??{},{currentX:r,currentY:n}=t,l=this.isVertical(),c=l?r:n;let h=o?.[l?s:a]??"";return e.continuous&&(h=e.scaleInvert(c)),{[i]:{position:c,value:h}}}getActiveHighlightData(t){const{axisCtx:e}=this,{datum:i,series:o,xKey:s="",aggregatedValue:a,cumulativeValue:r,midPoint:n}=t,l=o.getKeyProperties(e.direction),c=(e.scale.bandwidth??0)/2,h=o.axes[e.direction]?.id===e.axisId,u=l.indexOf("yKey")>-1&&h,p=l.indexOf("xKey")>-1&&h,d=a??r;if(u&&d!==void 0){const f=e.scale.convert(d)+c;return this.isInRange(f)?{yKey:{value:d,position:f}}:{}}if(p){const f=(this.isVertical()?n?.x:n?.y)??0,y=e.continuous?e.scaleInvert(f):i[s];return this.isInRange(f)?{xKey:{value:y,position:f}}:{}}const g={};return l.forEach(f=>{const y=o.properties[f],m=i[y],b=e.scale.convert(m)+c;this.isInRange(b)&&(g[f]={value:m,position:b})}),g}getLabelHtml(t,e){const i=this.axisLayout?.label?.fractionDigits??0,o={text:this.formatValue(t)};return this.label.renderer?e.toLabelHtml(this.label.renderer({value:t,fractionDigits:i}),o):e.toLabelHtml(o)}showLabel(t,e,i,o){if(!this.axisLayout)return;const{bounds:s}=this,a=this.labels[o],r=this.getLabelHtml(i,a);a.setLabelHtml(r);const{width:n,height:l}=a.getBBox(),c=this.axisCtx.position;let h=this.axisLayout.label.spacing+this.axisLayout.tickSize;this.axisCtx.direction===ChartAxisDirection11.X?(h-=4,a.show({x:t-n/2,y:c==="bottom"?s.y+s.height+h:s.y-l-h})):(h-=8,a.show({x:c==="right"?s.x+s.width+h:s.x-n-h,y:e-l/2}))}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const t of Object.keys(this.labels))this.hideLabel(t)}hideLabel(t){this.labels[t]?.toggle(!1)}};__decorateClass([TempValidate38(BOOLEAN15)],Crosshair.prototype,"enabled",2),__decorateClass([TempValidate38(COLOR_STRING4,{optional:!0})],Crosshair.prototype,"stroke",2),__decorateClass([TempValidate38(LINE_DASH3,{optional:!0})],Crosshair.prototype,"lineDash",2),__decorateClass([TempValidate38(POSITIVE_NUMBER7)],Crosshair.prototype,"lineDashOffset",2),__decorateClass([TempValidate38(POSITIVE_NUMBER7)],Crosshair.prototype,"strokeWidth",2),__decorateClass([TempValidate38(RATIO6)],Crosshair.prototype,"strokeOpacity",2),__decorateClass([TempValidate38(BOOLEAN15)],Crosshair.prototype,"snap",2),__decorateClass([TempValidate38(OBJECT16)],Crosshair.prototype,"label",2);var CrosshairModule={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],moduleFactory:t=>new Crosshair(t),themeTemplate:{crosshair:{snap:!0,stroke:{$ref:"subtleTextColor"},strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},import_ag_charts_community99=require("ag-charts-community"),{BOOLEAN:BOOLEAN16,FUNCTION:FUNCTION3,ActionOnSet:ActionOnSet5,TempValidate:TempValidate39}=import_ag_charts_community99._ModuleSupport,DataSource=class extends import_ag_charts_community99._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&e!=null?this.dataService.updateCallback(e):this.dataService.clearCallback())}};__decorateClass([ActionOnSet5({newValue(t){this.updateCallback(t,this.getData)}}),TempValidate39(BOOLEAN16)],DataSource.prototype,"enabled",2),__decorateClass([ActionOnSet5({newValue(t){this.updateCallback(this.enabled,t)}}),TempValidate39(FUNCTION3)],DataSource.prototype,"getData",2),__decorateClass([ActionOnSet5({newValue(t){this.dataService.requestThrottle=t}})],DataSource.prototype,"requestThrottle",2),__decorateClass([ActionOnSet5({newValue(t){this.dataService.dispatchThrottle=t}})],DataSource.prototype,"updateThrottle",2),__decorateClass([ActionOnSet5({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],DataSource.prototype,"updateDuringInteraction",2);var DataSourceModule={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new DataSource(t),themeTemplate:{dataSource:{enabled:!1}}},import_ag_charts_community104=require("ag-charts-community"),import_ag_charts_community102=require("ag-charts-community"),import_ag_charts_core42=require("ag-charts-core"),import_ag_charts_community100=require("ag-charts-community"),{nearestSquaredInContainer,partialAssign,mergeDefaults,BBox:BBox5}=import_ag_charts_community100._ModuleSupport,HierarchicalBBox=class{constructor(t){this.components=t,this.union=BBox5.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}},ErrorBarNode=class extends import_ag_charts_community100._ModuleSupport.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new import_ag_charts_community100._ModuleSupport.Path,this.capsPath=new import_ag_charts_community100._ModuleSupport.Path,this.bboxes=new HierarchicalBBox([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:o}=t,{lengthRatioMultiplier:s,lengthMax:a}=e,r=o??i*s;return Math.min(r,a)}getItemStylerParams(t,e,i){const{datum:o}=this;if(o==null||t.itemStyler==null)return;const{xLowerKey:s,xUpperKey:a,yLowerKey:r,yUpperKey:n}=t;return{...e,datum:o.datum,seriesId:o.datum.seriesId,xKey:o.xKey,yKey:o.yKey,xLowerKey:s,xUpperKey:a,yLowerKey:r,yUpperKey:n,highlighted:i}}formatStyles(t,e,i,o){let{cap:s,...a}=t;const r=this.getItemStylerParams(e,t,o);if(r!=null&&e.itemStyler!=null){const n=i.callWithContext(e.itemStyler,r);a=mergeDefaults(n,a),s=mergeDefaults(n?.cap,n,s)}return{whiskerStyle:a,capsStyle:s}}applyStyling(t,e){partialAssign(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i,o){if(this.datum===void 0)return;const{whiskerStyle:s,capsStyle:a}=this.formatStyles(t,e,i,o),{xBar:r,yBar:n,capDefaults:l}=this.datum,c=this.whiskerPath;this.applyStyling(c,s),c.path.clear(!0),n!==void 0&&(c.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),c.path.lineTo(n.upperPoint.x,n.upperPoint.y)),r!==void 0&&(c.path.moveTo(r.lowerPoint.x,r.lowerPoint.y),c.path.lineTo(r.upperPoint.x,r.upperPoint.y)),c.path.closePath(),this.capLength=this.calculateCapLength(a??{},l);const h=this.capLength/2,u=this.capsPath;this.applyStyling(u,a),u.path.clear(!0),n!==void 0&&(u.path.moveTo(n.lowerPoint.x-h,n.lowerPoint.y),u.path.lineTo(n.lowerPoint.x+h,n.lowerPoint.y),u.path.moveTo(n.upperPoint.x-h,n.upperPoint.y),u.path.lineTo(n.upperPoint.x+h,n.upperPoint.y)),r!==void 0&&(u.path.moveTo(r.lowerPoint.x,r.lowerPoint.y-h),u.path.lineTo(r.lowerPoint.x,r.lowerPoint.y+h),u.path.moveTo(r.upperPoint.x,r.upperPoint.y-h),u.path.lineTo(r.upperPoint.x,r.upperPoint.y+h)),u.path.closePath()}updateBBoxes(){const{capLength:t,whiskerPath:e,capsPath:i}=this,{yBar:o,xBar:s}=this.datum??{},a=t/2,r=[];if(o!==void 0){const n=o.lowerPoint.y-o.upperPoint.y;r.push(new BBox5(o.lowerPoint.x,o.upperPoint.y,e.strokeWidth,n),new BBox5(o.lowerPoint.x-a,o.lowerPoint.y,t,i.strokeWidth),new BBox5(o.upperPoint.x-a,o.upperPoint.y,t,i.strokeWidth))}if(s!==void 0){const n=s.upperPoint.x-s.lowerPoint.x;r.push(new BBox5(s.lowerPoint.x,s.upperPoint.y,n,e.strokeWidth),new BBox5(s.lowerPoint.x,s.lowerPoint.y-a,i.strokeWidth,t),new BBox5(s.upperPoint.x,s.upperPoint.y-a,i.strokeWidth,t))}this.bboxes.components=r,this.bboxes.union=BBox5.merge(r)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e,i){const{bboxes:o}=this;if(o.union.distanceSquared(t,e)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:s}=BBox5.nearestBox(t,e,o.components);return{nearest:this,distanceSquared:s}}},ErrorBarGroup=class extends import_ag_charts_community100._ModuleSupport.Group{nearestSquared(t,e){const{nearest:i,distanceSquared:o}=nearestSquaredInContainer(t,e,{children:this.children()});if(i!==void 0&&!isNaN(o))return{datum:i.datum,distanceSquared:o}}},import_ag_charts_community101=require("ag-charts-community"),{BaseProperties:BaseProperties14,TempValidate:TempValidate40,BOOLEAN:BOOLEAN17,COLOR_STRING:COLOR_STRING5,FUNCTION:FUNCTION4,LINE_DASH:LINE_DASH4,NUMBER:NUMBER11,OBJECT:OBJECT17,POSITIVE_NUMBER:POSITIVE_NUMBER8,RATIO:RATIO7,STRING:STRING20}=import_ag_charts_community101._ModuleSupport,ErrorBarCap=class extends BaseProperties14{};__decorateClass([TempValidate40(BOOLEAN17,{optional:!0})],ErrorBarCap.prototype,"visible",2),__decorateClass([TempValidate40(COLOR_STRING5,{optional:!0})],ErrorBarCap.prototype,"stroke",2),__decorateClass([TempValidate40(POSITIVE_NUMBER8,{optional:!0})],ErrorBarCap.prototype,"strokeWidth",2),__decorateClass([TempValidate40(RATIO7,{optional:!0})],ErrorBarCap.prototype,"strokeOpacity",2),__decorateClass([TempValidate40(LINE_DASH4,{optional:!0})],ErrorBarCap.prototype,"lineDash",2),__decorateClass([TempValidate40(POSITIVE_NUMBER8,{optional:!0})],ErrorBarCap.prototype,"lineDashOffset",2),__decorateClass([TempValidate40(NUMBER11,{optional:!0})],ErrorBarCap.prototype,"length",2),__decorateClass([TempValidate40(RATIO7,{optional:!0})],ErrorBarCap.prototype,"lengthRatio",2);var ErrorBarProperties=class extends BaseProperties14{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new ErrorBarCap}};__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"yLowerKey",2),__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"yLowerName",2),__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"yUpperKey",2),__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"yUpperName",2),__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"xLowerKey",2),__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"xLowerName",2),__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"xUpperKey",2),__decorateClass([TempValidate40(STRING20,{optional:!0})],ErrorBarProperties.prototype,"xUpperName",2),__decorateClass([TempValidate40(BOOLEAN17,{optional:!0})],ErrorBarProperties.prototype,"visible",2),__decorateClass([TempValidate40(COLOR_STRING5,{optional:!0})],ErrorBarProperties.prototype,"stroke",2),__decorateClass([TempValidate40(POSITIVE_NUMBER8,{optional:!0})],ErrorBarProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate40(RATIO7,{optional:!0})],ErrorBarProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate40(LINE_DASH4,{optional:!0})],ErrorBarProperties.prototype,"lineDash",2),__decorateClass([TempValidate40(POSITIVE_NUMBER8,{optional:!0})],ErrorBarProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate40(FUNCTION4,{optional:!0})],ErrorBarProperties.prototype,"itemStyler",2),__decorateClass([TempValidate40(OBJECT17)],ErrorBarProperties.prototype,"cap",2);var{fixNumericExtent,groupAccumulativeValueProperty,mergeDefaults:mergeDefaults2,valueProperty:valueProperty2,ChartAxisDirection:ChartAxisDirection12}=import_ag_charts_community102._ModuleSupport;function toErrorBoundCartesianSeries(t){for(const e of import_ag_charts_community102.AgErrorBarSupportedSeriesTypes)if(e===t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${import_ag_charts_community102.AgErrorBarSupportedSeriesTypes.join(", ")}`)}var ErrorBars=class ft extends import_ag_charts_community102._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.properties=new ErrorBarProperties;const i=toErrorBoundCartesianSeries(e),{annotationGroup:o,annotationSelections:s}=i;this.cartesianSeries=i,this.groupNode=new ErrorBarGroup({name:`${o.id}-errorBars`}),o.appendChild(this.groupNode),this.selection=import_ag_charts_community102._ModuleSupport.Selection.select(this.groupNode,()=>this.errorBarFactory()),s.add(this.selection),i.addEventListener("seriesVisibilityChange",a=>this.onToggleSeriesItem(a)),this.destroyFns.push(i.addListener("data-processed",a=>this.onDataProcessed(a)),i.addListener("data-update",a=>this.onDataUpdate(a)),e.highlightManager.addListener("highlight-change",a=>this.onHighlightChange(a)),()=>o.removeChild(this.groupNode),()=>s.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties;return(0,import_ag_charts_core42.isDefined)(e)&&(0,import_ag_charts_core42.isDefined)(i)||(0,import_ag_charts_core42.isDefined)(o)&&(0,import_ag_charts_core42.isDefined)(s)}isStacked(){const e=this.cartesianSeries.seriesGrouping?.stackCount;return e==null?!1:e>0}getUnstackPropertyDefinition(e){const i=[],{xLowerKey:o,xUpperKey:s,yLowerKey:a,yUpperKey:r,xErrorsID:n,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:h}=e;return a!=null&&r!=null&&i.push(valueProperty2(a,h,{id:`${l}-lower`}),valueProperty2(r,h,{id:`${l}-upper`})),o!=null&&s!=null&&i.push(valueProperty2(o,c,{id:`${n}-lower`}),valueProperty2(s,c,{id:`${n}-upper`})),i}getStackPropertyDefinition(e){const i=[],{cartesianSeries:o}=this,{xLowerKey:s,xUpperKey:a,yLowerKey:r,yUpperKey:n,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{xScaleType:h,yScaleType:u}=e,p=o.seriesGrouping?.groupIndex??o.id,d={invalidValue:null,missingValue:0,separateNegative:!0,...o.visible?{}:{forceValue:0}},g=(y,m,b,x)=>groupAccumulativeValueProperty(y,"normal","current",{id:`${m}-${b}`,groupId:`errorGroup-${p}-${b}`,...d},x),f=(y,m,b,x)=>{i.push(...g(y,b,"lower",x),...g(m,b,"upper",x))};return r!=null&&n!=null&&f(r,n,c,u),s!=null&&a!=null&&f(s,a,l,h),i}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:i,xUpperKey:o,xErrorsID:s,yLowerKey:a,yUpperKey:r,yErrorsID:n}=this.getMaybeFlippedKeys();if(e===ChartAxisDirection12.X?(0,import_ag_charts_core42.isDefined)(i)&&(0,import_ag_charts_core42.isDefined)(o):(0,import_ag_charts_core42.isDefined)(a)&&(0,import_ag_charts_core42.isDefined)(r)){const{dataModel:c,processedData:h,cartesianSeries:u}=this;if(c!=null&&h!=null){const p={x:s,y:n}[e],d=c.getDomain(u,`${p}-lower`,"value",h),g=c.getDomain(u,`${p}-upper`,"value",h),f=[Math.min(...d,...g),Math.max(...d,...g)];return fixNumericExtent(f)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,(0,import_ag_charts_core42.isDefined)(e.dataModel)&&(0,import_ag_charts_core42.isDefined)(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){return this.hasErrorBars()?this.cartesianSeries.contextNodeData?.nodeData:void 0}createNodeData(){const e=this.getNodeData(),i=this.cartesianSeries.axes[ChartAxisDirection12.X]?.scale,o=this.cartesianSeries.axes[ChartAxisDirection12.Y]?.scale;if(!(!i||!o||!e))for(let s=0;s<e.length;s++){const{midPoint:a,xLower:r,xUpper:n,yLower:l,yUpper:c}=this.getDatum(e,s);if(a!=null){let h,u;(0,import_ag_charts_core42.isDefined)(r)&&(0,import_ag_charts_core42.isDefined)(n)&&(h={lowerPoint:{x:this.convert(i,r),y:a.y},upperPoint:{x:this.convert(i,n),y:a.y}}),(0,import_ag_charts_core42.isDefined)(l)&&(0,import_ag_charts_core42.isDefined)(c)&&(u={lowerPoint:{x:a.x,y:this.convert(o,l)},upperPoint:{x:a.x,y:this.convert(o,c)}}),e[s].xBar=h,e[s].yBar=u}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties,[a,r]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,o]=[o,e],[i,s]=[s,i],[a,r]=[r,a]),{xLowerKey:e,xUpperKey:i,xErrorsID:a,yLowerKey:o,yUpperKey:s,yErrorsID:r}}static getDatumKey(e,i,o){if(i==null)return;const s=e.datum[i];if(s!=null){if(typeof s!="number"){import_ag_charts_core42.Logger.warnOnce(`Found [${i}] error value of type ${typeof s}. Expected number type`);return}return s+o}}getDatum(e,i){const{xLowerKey:o,xUpperKey:s,yLowerKey:a,yUpperKey:r}=this.getMaybeFlippedKeys(),n=e[i],l=n.cumulativeValue==null||!this.isStacked()?0:n.cumulativeValue-n.yValue,[c,h]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:n.midPoint,xLower:ft.getDatumKey(n,o,c),xUpper:ft.getDatumKey(n,s,c),yLower:ft.getDatumKey(n,a,h),yUpper:ft.getDatumKey(n,r,h)}}convert(e,i){const o=(e.bandwidth??0)/2;return e.convert(i)+o}update(){const e=this.getNodeData();e!=null&&(this.selection.update(e),this.selection.each((i,o,s)=>this.updateNode(i,o,s)))}updateNode(e,i,o){e.datum=i,e.update(this.getDefaultStyle(),this.properties,this.cartesianSeries,!1),e.updateBBoxes()}pickNodeExact(e){const{x:i,y:o}=e,s=this.groupNode.pickNode(i,o);if(s!=null)return{datum:s.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s,xLowerName:a=e,xUpperName:r=i,yLowerName:n=o,yUpperName:l=s}=this.properties;return{xLowerKey:e,xLowerName:a,xUpperKey:i,xUpperName:r,yLowerKey:o,yLowerName:n,yUpperKey:s,yUpperName:l}}onToggleSeriesItem(e){this.groupNode.visible=e.visible}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:mergeDefaults2(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,i,o){const s=this.getNodeData();if(s!=null){for(let a=0;a<s.length;a++)if(e===s[a]){this.selection.at(a)?.update(i,this.properties,this.cartesianSeries,o);break}}}onHighlightChange(e){const{previousHighlight:i,currentHighlight:o}=e;o?.series===this.cartesianSeries&&this.restyleHighlightChange(o,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new ErrorBarNode}getWhiskerProperties(){const{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:a,lineDashOffset:r}=this.properties;return{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:a,lineDashOffset:r}}},import_ag_charts_community103=require("ag-charts-community"),ERROR_BARS_THEME={series:{errorBar:{visible:!0,stroke:{$ref:"foregroundColor"},strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},ErrorBarsModule={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:import_ag_charts_community104.AgErrorBarSupportedSeriesTypes,moduleFactory:t=>new ErrorBars(t),themeTemplate:ERROR_BARS_THEME},import_ag_charts_community105=require("ag-charts-community"),{ZIndexMap:ZIndexMap5,ActionOnSet:ActionOnSet6,TempValidate:TempValidate41,ProxyPropertyOnWrite:ProxyPropertyOnWrite2,OBJECT:OBJECT18,RATIO:RATIO8,COLOR_STRING:COLOR_STRING6}=import_ag_charts_community105._ModuleSupport,Foreground=class extends import_ag_charts_community105._ModuleSupport.Background{constructor(){super(...arguments),this.image=new Image,this.fill="transparent",this.fillOpacity=void 0}createNode(){return new import_ag_charts_community105._ModuleSupport.Group({name:"foreground",zIndex:ZIndexMap5.FOREGROUND})}onLayoutComplete(t){super.onLayoutComplete(t);const{width:e,height:i}=t.chart;let o={x:0,y:0,width:e,height:i};this.image&&(o=this.image.performLayout(e,i)),this.text&&this.updateTextNode(o)}onImageLoad(){this.ctx.updateService.update(import_ag_charts_community105._ModuleSupport.ChartUpdateType.SCENE_RENDER)}updateTextNode(t){const{textNode:e}=this;e.fontWeight="bold",e.fontFamily="Impact, sans-serif",e.fontSize=19,e.opacity=.7,e.fill="#9b9b9b",e.textBaseline="top";const i=this.textNode.getBBox(),o=10;e.x=t.x+t.width/2-i.width/2,e.y=t.y+t.height+o}};__decorateClass([TempValidate41(OBJECT18,{optional:!0}),ActionOnSet6({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],Foreground.prototype,"image",2),__decorateClass([TempValidate41(COLOR_STRING6,{optional:!0}),ProxyPropertyOnWrite2("rectNode","fill")],Foreground.prototype,"fill",2),__decorateClass([TempValidate41(RATIO8,{optional:!0}),ProxyPropertyOnWrite2("rectNode","fillOpacity")],Foreground.prototype,"fillOpacity",2);var ForegroundModule={type:"root",optionsKey:"foreground",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new Foreground(t)},import_ag_charts_community114=require("ag-charts-community"),import_ag_charts_community112=require("ag-charts-community"),import_ag_charts_core45=require("ag-charts-core"),import_ag_charts_community107=require("ag-charts-community"),import_ag_charts_core43=require("ag-charts-core"),import_ag_charts_community106=require("ag-charts-community"),{TranslatableGroup:TranslatableGroup2,ScenePathChangeDetection}=import_ag_charts_community106._ModuleSupport,MiniChartGroup=class extends TranslatableGroup2{constructor(){super(...arguments),this.inset=0,this.cornerRadius=0}applyClip(t,e){const{cornerRadius:i,inset:o}=this,{x:s,y:a,width:r,height:n}=e;t.beginPath(),t.roundRect(s+o,a+o,r-2*o,n-2*o,i),t.clip()}};__decorateClass([ScenePathChangeDetection()],MiniChartGroup.prototype,"inset",2),__decorateClass([ScenePathChangeDetection()],MiniChartGroup.prototype,"cornerRadius",2);var{TempValidate:TempValidate42,BOOLEAN:BOOLEAN18,POSITIVE_NUMBER:POSITIVE_NUMBER9,ZIndexMap:ZIndexMap6,ActionOnSet:ActionOnSet7,CategoryAxis,TextUtils:TextUtils2,Padding,Group:Group6,BBox:BBox6,ProxyProperty:ProxyProperty2}=import_ag_charts_community107._ModuleSupport,MiniChartPadding=class{constructor(){this.top=0,this.bottom=0}};__decorateClass([TempValidate42(POSITIVE_NUMBER9)],MiniChartPadding.prototype,"top",2),__decorateClass([TempValidate42(POSITIVE_NUMBER9)],MiniChartPadding.prototype,"bottom",2);var MiniChart=class extends import_ag_charts_community107._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.padding=new MiniChartPadding,this.root=new Group6({name:"root"}),this.seriesRoot=this.root.appendChild(new MiniChartGroup({name:"Series-root",zIndex:ZIndexMap6.SERIES_LAYER,renderToOffscreenCanvas:!0})),this.axisGridGroup=this.root.appendChild(new Group6({name:"Axes-Grids",zIndex:ZIndexMap6.AXIS_GRID})),this.axisGroup=this.root.appendChild(new Group6({name:"Axes-Grids",zIndex:ZIndexMap6.AXIS_GRID})),this.axisLabelGroup=this.root.appendChild(new Group6({name:"Axes-Labels",zIndex:ZIndexMap6.SERIES_LABEL})),this.axisCrosslineRangeGroup=this.root.appendChild(new Group6({name:"Axes-Crosslines-Range",zIndex:ZIndexMap6.SERIES_CROSSLINE_RANGE})),this.axisCrosslineLineGroup=this.root.appendChild(new Group6({name:"Axes-Crosslines-Line",zIndex:ZIndexMap6.SERIES_CROSSLINE_LINE})),this.axisCrosslineLabelGroup=this.root.appendChild(new Group6({name:"Axes-Crosslines-Label",zIndex:ZIndexMap6.SERIES_LABEL})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){const i=e?.filter(o=>!t.includes(o))??[];this.destroySeries(i);for(const o of t){if(e?.includes(o))continue;o.attachSeries(this.seriesRoot,this.seriesRoot,void 0);const s=this;o.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return s.seriesRect}},o.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled")}}destroySeries(t){t?.forEach(e=>{e.destroy(),e.detachSeries(this.seriesRoot,this.seriesRoot,void 0),e.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{const i=e.direction;(t[i]??(t[i]=[])).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const o=t[i];if(!o){import_ag_charts_core43.Logger.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const s=e.getKeys(i),a=this.findMatchingAxis(o,s);if(!a){import_ag_charts_core43.Logger.warnOnce(`no matching axis for direction [${i}] and keys [${s}]; check series and axes configuration.`);return}e.axes[i]=a})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e){for(const o of e)if(i.keys.includes(o))return i}}}updateData(t){this.series.forEach(e=>e.setChartData(t)),this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready",this.series.forEach(e=>e.resetAnimation("disabled"))})}async processData(t){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),await Promise.all(this.series.map(e=>(e.resetDatumCallbackCache(),e.processData(t))));for(const e of this.axes)e.processData()}computeAxisPadding(){const t=new Padding;return this.enabled&&this.axes.forEach(({position:e,thickness:i,line:o,label:s})=>{if(e==null)return;let a;i?a=i:a=(o.enabled?o.width:0)+(s.enabled?TextUtils2.getLineHeight(s.fontSize??0)+s.spacing:0),t[e]=Math.ceil(a)}),t}async layout(t,e){const{padding:i}=this,o=this.seriesRect!=null,s=new BBox6(0,0,t,e-(i.top+i.bottom));this.seriesRect=s,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectCanvasSpace(new BBox6(0,-i.top,t,e)),this.axes.forEach(a=>{const{position:r="left"}=a;switch(r){case"top":case"bottom":a.range=[0,s.width],a.gridLength=s.height;break;case"right":case"left":{const n=a instanceof CategoryAxis;a.range=n?[0,s.height]:[s.height,0],a.gridLength=s.width;break}}a.gridPadding=0,a.translation.x=0,a.translation.y=0,r==="right"?a.translation.x=t:r==="bottom"&&(a.translation.y=e),o||a.resetAnimation("initial"),a.calculateLayout(),a.update()}),await Promise.all(this.series.map(a=>a.update({seriesRect:s})))}};__decorateClass([TempValidate42(BOOLEAN18)],MiniChart.prototype,"enabled",2),__decorateClass([ProxyProperty2(["seriesRoot","inset"])],MiniChart.prototype,"inset",2),__decorateClass([ProxyProperty2(["seriesRoot","cornerRadius"])],MiniChart.prototype,"cornerRadius",2),__decorateClass([ActionOnSet7({changeValue(t,e=[]){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const o of e)t.includes(o)||(o.detachAxis(i),o.destroy());for(const o of t)e?.includes(o)||o.attachAxis(i)}})],MiniChart.prototype,"axes",2),__decorateClass([ActionOnSet7({changeValue(t,e){this.onSeriesChange(t,e)}})],MiniChart.prototype,"series",2);var import_ag_charts_community108=require("ag-charts-community"),import_ag_charts_core44=require("ag-charts-core"),{SliderWidget}=import_ag_charts_community108._ModuleSupport,NavigatorDOMProxy=class{constructor(t,e){this.ctx=t,this.sliderHandlers=e,this._min=0,this._max=1,this.minRange=.001,this.dragStartX=0,this.ctx=t,this.toolbar=t.proxyInteractionService.createProxyContainer({type:"toolbar",domManagerId:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],orientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.sliders=[t.proxyInteractionService.createProxyElement({type:"slider",domIndex:1,ariaLabel:{id:"ariaLabelNavigatorMinimum"},parent:this.toolbar,cursor:"ew-resize"}),t.proxyInteractionService.createProxyElement({type:"slider",domIndex:-1/0,ariaLabel:{id:"ariaLabelNavigatorRange"},parent:this.toolbar,cursor:"grab"}),t.proxyInteractionService.createProxyElement({type:"slider",domIndex:2,ariaLabel:{id:"ariaLabelNavigatorMaximum"},parent:this.toolbar,cursor:"ew-resize"})];for(const[i,o]of["min","pan","max"].entries()){const s=this.sliders[i];s.step=SliderWidget.STEP_HUNDRETH,s.keyboardStep=SliderWidget.STEP_ONE,s.orientation="horizontal",s.setPreventsDefault(!1),s.addListener("drag-start",a=>this.onDragStart(i,a,o)),s.addListener("drag-move",a=>this.onDrag(s,a,o)),s.addListener("drag-end",()=>this.updateSliderRatios()),s.addListener("contextmenu",a=>this.onContextMenu(s,a))}this.sliders[0].addListener("change",()=>this.onMinSliderChange()),this.sliders[1].addListener("change",()=>this.onPanSliderChange()),this.sliders[2].addListener("change",()=>this.onMaxSliderChange()),this.updateSliderRatios(),this.updateVisibility(!1)}destroy(){this.toolbar.destroy()}updateVisibility(t){this.toolbar.setHidden(!t)}updateZoom(){const{_min:t,_max:e}=this;if(!(t==null||e==null))return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e}})}updateBounds(t){this.toolbar.setBounds(t)}updateSliderBounds(t,e){this.sliders[t].setBounds(e)}updateMinMax(t,e){this._min=t,this._max=e,this.updateSliderRatios()}updateSliderRatios(){let{_min:t,_max:e}=this;t=Math.round(t*100)/100,e=Math.round(e*100)/100;const i=this.ctx.localeManager.t("ariaValuePanRange",{min:t,max:e});this.sliders[0].setValueRatio(t),this.sliders[1].setValueRatio(t,{ariaValueText:i}),this.sliders[2].setValueRatio(e)}toCanvasOffsets(t){return{offsetX:this.dragStartX+t.originDeltaX}}moveToFront(t){if(t===1)return;const e=this.sliders[t],i=this.sliders[2-t];this.toolbar.moveChild(i,e.domIndex-1)}onDragStart(t,e,i){const o=this.sliders[t],s=this.toolbar.cssLeft(),a=o.cssLeft();this.dragStartX=s+a+e.offsetX,this.moveToFront(t),e.device==="touch"&&e.sourceEvent.preventDefault(),this.sliderHandlers.onDragStart(i,this.toCanvasOffsets(e))}onDrag(t,e,i){e.device==="touch"&&e.sourceEvent.preventDefault(),this.sliderHandlers.onDrag(i,this.toCanvasOffsets(e))}onContextMenu(t,{sourceEvent:e,offsetX:i,offsetY:o}){const{x:s,y:a}=this.toolbar.getBounds(),{x:r,y:n}=t.getBounds(),l=i+s+r,c=o+a+n;this.ctx.contextMenuRegistry.dispatchContext("all",{sourceEvent:e,canvasX:l,canvasY:c},{})}onPanSliderChange(){const t=this.sliders[1].getValueRatio(),e=this._max-this._min;this._min=(0,import_ag_charts_core44.clamp)(0,t,1-e),this._max=this._min+e,this.updateZoom()}onMinSliderChange(){this._min=this.sliders[0].clampValueRatio(0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(){this._max=this.sliders[2].clampValueRatio(this._min+this.minRange,1),this.updateZoom()}},import_ag_charts_community109=require("ag-charts-community"),{TempValidate:TempValidate43,ScenePathChangeDetection:ScenePathChangeDetection2,POSITIVE_NUMBER:POSITIVE_NUMBER10,BOOLEAN:BOOLEAN19,BBox:BBox7,ExtendedPath2D}=import_ag_charts_community109._ModuleSupport,RangeHandle=class extends import_ag_charts_community109._ModuleSupport.Path{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.cornerRadius=4,this.grip=!0,this.gripPath=new ExtendedPath2D}setCenter(t,e){this.dirtyPath=!0,(this.centerX!==t||this.centerY!==e)&&(this.centerX=t,this.centerY=e,this.markDirty("center"))}static align(t,e,i,o,s,a,r,n,l){const c=t.align(i+s*r)+l,h=c+t.align(i+s*r,s*(n-r))-2*l,u=t.align(o+a/2);t.setCenter(c,u),e.setCenter(h,u)}computeBBox(){const{centerX:t,centerY:e,width:i,height:o}=this,s=t-i/2,a=e-o/2;return new BBox7(s,a,i,o)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}updatePath(){const{centerX:t,centerY:e,path:i,gripPath:o,strokeWidth:s,cornerRadius:a,grip:r}=this,n=s/2,l=this.layerManager?.canvas?.pixelRatio??1;i.clear(),o.clear();const c=Math.floor(this.width/2*l)/l,h=Math.floor(this.height/2*l)/l;i.roundRect(t-c+n,e-h+n,2*(c-n),2*(h-n),a);const u=3;if(r)for(let p=-.5;p<=.5;p+=1)for(let d=-1;d<=1;d+=1)o.arc(t+p*u,e+d*u,1,0,2*Math.PI),o.closePath()}renderFill(t,e){const{stroke:i}=this;super.renderFill(t,e),t.fillStyle=typeof i=="string"?i:"black",t.fill(this.gripPath.getPath2D())}};RangeHandle.className="RangeHandle",__decorateClass([TempValidate43(POSITIVE_NUMBER10),ScenePathChangeDetection2()],RangeHandle.prototype,"width",2),__decorateClass([TempValidate43(POSITIVE_NUMBER10),ScenePathChangeDetection2()],RangeHandle.prototype,"height",2),__decorateClass([TempValidate43(POSITIVE_NUMBER10),ScenePathChangeDetection2()],RangeHandle.prototype,"cornerRadius",2),__decorateClass([TempValidate43(BOOLEAN19),ScenePathChangeDetection2()],RangeHandle.prototype,"grip",2);var import_ag_charts_community110=require("ag-charts-community"),{Path:Path6,BBox:BBox8,ExtendedPath2D:ExtendedPath2D2,clippedRoundRect,POSITIVE_NUMBER:POSITIVE_NUMBER11,TempValidate:TempValidate44,ScenePathChangeDetection:ScenePathChangeDetection3}=import_ag_charts_community110._ModuleSupport,RangeMask=class extends Path6{constructor(){super(...arguments),this.cornerRadius=4,this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1,this.visiblePath=new ExtendedPath2D2}layout(t,e,i,o,s,a){s=isNaN(s)?this.min:s,a=isNaN(a)?this.max:a,(t!==this.x||e!==this.y||i!==this.width||this.height!==o||s!==this.min||a!==this.max)&&(this.x=t,this.y=e,this.width=i,this.height=o,this.min=s,this.max=a,this.dirtyPath=!0,this.markDirty("RangeMask.layout"))}computeBBox(){const{x:t,y:e,width:i,height:o}=this;return new BBox8(t,e,i,o)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:o,min:s,max:a}=this,r=t+i*s,n=t+i*a;return new BBox8(r,e,n-r,o)}updatePath(){const{path:t,visiblePath:e,x:i,y:o,width:s,height:a,min:r,max:n,strokeWidth:l,cornerRadius:c}=this,h=l/2;t.clear(),e.clear();const u=this.align(i)+h,p=this.align(o)+h,d=this.align(i,s)-2*h,g=this.align(o,a)-2*h,f=this.align(i+s*r)+h,y=f+this.align(i+s*r,s*(n-r))-2*h,m={topLeft:c,topRight:c,bottomRight:c,bottomLeft:c};clippedRoundRect(t,u,p,d,g,m,new BBox8(u,p,f-u,g)),clippedRoundRect(t,u,p,d,g,m,new BBox8(y,p,d+u-y,g)),y-f>1&&clippedRoundRect(e,u,p,d,g,m,new BBox8(f,p,y-f,g))}renderStroke(t,e){super.renderStroke(t,e),super.renderStroke(t,this.visiblePath.getPath2D())}};RangeMask.className="RangeMask",__decorateClass([TempValidate44(POSITIVE_NUMBER11),ScenePathChangeDetection3()],RangeMask.prototype,"cornerRadius",2);var import_ag_charts_community111=require("ag-charts-community"),RangeSelector=class extends import_ag_charts_community111._ModuleSupport.Group{constructor(t){super({name:"rangeSelectorGroup",zIndex:import_ag_charts_community111._ModuleSupport.ZIndexMap.NAVIGATOR}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new import_ag_charts_community111._ModuleSupport.TranslatableGroup({name:"navigator-background",zIndex:1})),this.append(t)}layout(t,e,i,o,s,a){this.x=t,this.y=e,this.width=i,this.height=o,this.lOffset=s,this.rOffset=a,this.background.translationX=t,this.background.translationY=e,this.markDirty("RangeSelector")}updateBackground(t,e){t!=null&&this.background.removeChild(t),e!=null&&this.background.appendChild(e),this.markDirty("RangeSelector")}computeBBox(){const{x:t,y:e,width:i,height:o,lOffset:s,rOffset:a}=this;return new import_ag_charts_community111._ModuleSupport.BBox(t-s,e,i+(s+a),o)}},{BaseModuleInstance:BaseModuleInstance2,ObserveChanges:ObserveChanges4,TempValidate:TempValidate45,BOOLEAN:BOOLEAN20,POSITIVE_NUMBER:POSITIVE_NUMBER12}=import_ag_charts_community112._ModuleSupport,Navigator=class extends BaseModuleInstance2{constructor(t){super(),this.ctx=t,this.enabled=!1,this.mask=new RangeMask,this.minHandle=new RangeHandle,this.maxHandle=new RangeHandle,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(e,i)=>({x:e,y:i})},this.height=30,this.cornerRadius=0,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new RangeSelector([this.mask,this.minHandle,this.maxHandle]),this.destroyFns.push(t.scene.attachNode(this.rangeSelector),this.ctx.localeManager.addListener("locale-changed",()=>this.updateZoom()),this.ctx.layoutManager.registerElement(import_ag_charts_community112._ModuleSupport.LayoutElement.Navigator,e=>this.onLayoutStart(e)),this.ctx.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.zoomManager.addListener("zoom-change",e=>this.onZoomChange(e))),this.domProxy=new NavigatorDOMProxy(t,this),this.updateGroupVisibility(),this.miniChart=new MiniChart(t)}updateBackground(t,e){this.rangeSelector?.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;this.rangeSelector==null||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,this.domProxy.updateVisibility(t),t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(t){if(this.enabled){const{layoutBox:e}=t,i=this.height+this.spacing;e.shrink(i,"bottom"),this.y=e.y+e.height+this.spacing}else this.y=0;if(this.enabled&&this.miniChart){const{top:e,bottom:i}=this.miniChart.computeAxisPadding();t.layoutBox.shrink(e+i,"bottom"),this.y-=i,this.miniChart.inset=this.mask.strokeWidth/2,this.miniChart.cornerRadius=this.mask.cornerRadius}}onLayoutComplete(t){const{x:e,width:i}=t.series.rect,{y:o,height:s}=this;if(this.domProxy.updateVisibility(this.enabled),this.enabled){const{_min:a,_max:r}=this.domProxy;this.layoutNodes(e,o,i,s,a,r),this.domProxy.updateBounds({x:e,y:o,width:i,height:s})}this.x=e,this.width=i,this.miniChart?.layout(i,s).catch(a=>import_ag_charts_core45.Logger.error(a))}canDrag(){return this.enabled&&this.ctx.interactionManager.isState(import_ag_charts_community112._ModuleSupport.InteractionState.ZoomDraggable)}onDragStart(t,{offsetX:e}){this.canDrag()&&(t==="pan"&&(this.panStart=(e-this.x)/this.width-this.domProxy._min),this.ctx.zoomManager.fireZoomPanStartEvent("navigator"))}onDrag(t,{offsetX:e}){if(!this.canDrag())return;const{panStart:i,x:o,width:s}=this,{minRange:a}=this.domProxy;let{_min:r,_max:n}=this.domProxy;const l=(e-o)/s;if(t==="min")r=(0,import_ag_charts_core45.clamp)(0,l,n-a);else if(t==="max")n=(0,import_ag_charts_core45.clamp)(r+a,l,1);else if(t==="pan"&&i!=null){const c=n-r;r=(0,import_ag_charts_core45.clamp)(0,l-i,1-c),n=r+c}this.domProxy._min=r,this.domProxy._max=n,this.updateZoom()}onZoomChange(t){const{x:e}=t;if(!e)return;const{x:i,y:o,width:s,height:a}=this,{min:r,max:n}=e;this.domProxy.updateMinMax(r,n),this.layoutNodes(i,o,s,a,r,n)}layoutNodes(t,e,i,o,s,a){const{rangeSelector:r,mask:n,minHandle:l,maxHandle:c}=this;n.layout(t,e,i,o,s,a),r.layout(t,e,i,o,l.width/2,c.width/2),RangeHandle.align(l,c,t,e,i,o,s,a,n.strokeWidth/2),s+(a-s)/2<.5?(l.zIndex=3,c.zIndex=4):(l.zIndex=4,c.zIndex=3),[l,this.maskVisibleRange,c].forEach((h,u)=>{const p=h.getBBox(),d={x:p.x-t,y:p.y-e,height:p.height,width:p.width};this.domProxy.updateSliderBounds(u,d)})}updateZoom(){this.enabled&&this.domProxy.updateZoom()}updateData(t){return this.miniChart?.updateData(t)}async processData(t){if(this.miniChart)return this.miniChart?.processData(t)}};__decorateClass([ObserveChanges4((t,e,i)=>{t.updateBackground(i?.root,e?.root)})],Navigator.prototype,"miniChart",2),__decorateClass([TempValidate45(BOOLEAN20),ObserveChanges4((t,e)=>{t.ctx.zoomManager.setNavigatorEnabled(!!e),t.updateGroupVisibility()})],Navigator.prototype,"enabled",2),__decorateClass([TempValidate45(POSITIVE_NUMBER12)],Navigator.prototype,"height",2),__decorateClass([TempValidate45(POSITIVE_NUMBER12),ObserveChanges4((t,e)=>{t.mask.cornerRadius=e})],Navigator.prototype,"cornerRadius",2),__decorateClass([TempValidate45(POSITIVE_NUMBER12)],Navigator.prototype,"spacing",2);var import_ag_charts_community113=require("ag-charts-community"),NAVIGATOR_THEME={enabled:!1,height:18,cornerRadius:4,mask:{fill:{$ref:"foregroundColor"},fillOpacity:.1,stroke:{$ref:"borderColor"},strokeWidth:1},minHandle:{fill:{$ref:"backgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},maxHandle:{fill:{$ref:"backgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},miniChart:{enabled:!1,label:{color:{$ref:"textColor"},fontSize:{$rem:[import_ag_charts_community113._ModuleSupport.FONT_SIZE_RATIO.SMALLER]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:5},padding:{top:0,bottom:0}}},NavigatorModule={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Navigator(t),removable:!1,themeTemplate:{navigator:NAVIGATOR_THEME}},import_ag_charts_community116=require("ag-charts-community"),import_ag_charts_community115=require("ag-charts-community"),{AND:AND4,ARRAY:ARRAY4,FUNCTION:FUNCTION5,NUMBER:NUMBER12,OR:OR3,ToolbarButtonProperties:ToolbarButtonProperties3,TempValidate:TempValidate46}=import_ag_charts_community115._ModuleSupport,RangesButtonProperties=class extends ToolbarButtonProperties3{};__decorateClass([TempValidate46(OR3(NUMBER12,AND4(ARRAY4,ARRAY4.restrict({length:2})),FUNCTION5))],RangesButtonProperties.prototype,"value",2);var{BOOLEAN:BOOLEAN21,OBJECT:OBJECT19,ChartAxisDirection:ChartAxisDirection13,LayoutElement:LayoutElement3,PropertiesArray:PropertiesArray4,Toolbar,TempValidate:TempValidate47}=import_ag_charts_community116._ModuleSupport,Ranges=class extends import_ag_charts_community116._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.buttons=new PropertiesArray4(RangesButtonProperties),this.verticalSpacing=10,this.container=t.domManager.addChild("canvas-overlay","range-buttons"),this.container.role="presentation",this.toolbar=new Toolbar(this.ctx.localeManager),this.toolbar.addClass("ag-charts-range-buttons"),this.container.append(this.toolbar.getElement()),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),t.layoutManager.registerElement(LayoutElement3.ToolbarBottom,this.onLayoutStart.bind(this)),t.zoomManager.addListener("zoom-change",this.onZoomChanged.bind(this)),this.teardown.bind(this))}teardown(){this.container.removeChild(this.toolbar.getElement()),this.toolbar.destroy()}onLayoutStart(t){const{buttons:e,ctx:i,enabled:o,toolbar:s,verticalSpacing:a}=this,{layoutBox:r}=t;if(!o||!i.zoomManager.isZoomEnabled()){s.setHidden(!0);return}s.setHidden(!1),s.updateButtons(e);const n=s.getBounds().height;s.setBounds({x:r.x,y:r.y+r.height-n,width:r.width,height:n}),r.shrink({bottom:n+a})}onZoomChanged(){this.toolbar.clearActiveButton()}onButtonPress({button:{index:t}}){const{zoomManager:e}=this.ctx,i=this.buttons.at(t);if(!i)return;const{value:o}=i;typeof o=="number"?e.extendToEnd("zoom-buttons",ChartAxisDirection13.X,o):Array.isArray(o)?e.updateWith("zoom-buttons",ChartAxisDirection13.X,()=>o):typeof o=="function"&&e.updateWith("zoom-buttons",ChartAxisDirection13.X,o),this.toolbar.toggleActiveButtonByIndex(t)}};__decorateClass([TempValidate47(BOOLEAN21)],Ranges.prototype,"enabled",2),__decorateClass([TempValidate47(OBJECT19)],Ranges.prototype,"buttons",2);var DAY=1e3*60*60*24,MONTH=DAY*30,YEAR=DAY*365,RangesModule={type:"root",optionsKey:"ranges",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new Ranges(t),themeTemplate:{ranges:{enabled:!1,buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:MONTH},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*MONTH},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*MONTH},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:YEAR},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(t,e)=>[t,e]}]}}},import_ag_charts_community118=require("ag-charts-community"),import_ag_charts_community117=require("ag-charts-community"),_SharedToolbar=class yt extends import_ag_charts_community117._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.activeSections=new Set,this.sectionButtons={annotations:[],chartToolbar:[]},this.container=this.ctx.domManager.addChild("canvas-overlay","shared-toolbar"),this.container.role="presentation"}getSharedToolbar(e){return this.sharedToolbar||this.createSharedToolbar(),this.toolbarWithSection(e)}createSharedToolbar(){this.sharedToolbar=new import_ag_charts_community117._ModuleSupport.Toolbar(this.ctx.localeManager,"vertical"),this.sharedToolbar.addClass("ag-charts-shared-toolbar"),this.container.append(this.sharedToolbar.getElement()),this.destroyFns.push(()=>{this.sharedToolbar&&(this.container.removeChild(this.sharedToolbar.getElement()),this.sharedToolbar.destroy(),this.sharedToolbar=void 0)})}toolbarWithSection(e){const i=this.sharedToolbar,o={layout:(s,a)=>{if(this.firstLayoutSection!=null&&this.firstLayoutSection!==e&&this.activeSections.has(this.firstLayoutSection))return;this.firstLayoutSection=e;const r=i.getBounds().width;i.setBounds({x:s.x,y:s.y,width:r}),s.shrink({left:r+i.horizontalSpacing+(a??0)})},addToolbarListener:(s,a)=>i.addToolbarListener(s,r=>{const n=this.getSectionIndex(e,r.button.index);if(n<0)return;const l={...r,button:this.sectionButtons[e][n]};a(l)}),updateButtons:s=>{this.sectionButtons[e]=s;const a=yt.SECTION_ORDER.flatMap(r=>this.sectionButtons[r]);i.updateButtons(a)},updateButtonByIndex:(s,a)=>{i.updateButtonByIndex(this.getIndex(e,s),a)},toggleActiveButtonByIndex:s=>{i.toggleActiveButtonByIndex(this.getIndex(e,s))},toggleButtonEnabledByIndex:(s,a)=>{i.toggleButtonEnabledByIndex(this.getIndex(e,s),a)},setHidden:s=>{s?this.activeSections.delete(e):this.activeSections.add(e);let a=0;for(const r of yt.SECTION_ORDER){if(r!==e){a+=this.sectionButtons[r].length;continue}for(const n of this.sectionButtons[e].keys())i.setButtonHiddenByIndex(a+n,s)}},destroy:()=>{o.setHidden(!0),this.activeSections.size===0&&this.destroy()},clearActiveButton:i.clearActiveButton.bind(i),addListener:i.addListener.bind(i),removeListener:i.removeListener.bind(i)};return o.setHidden(!1),o}getIndex(e,i){let o=0;for(const s of yt.SECTION_ORDER){if(s===e)return o+i;o+=this.sectionButtons[s].length}return-1}getSectionIndex(e,i){let o=0;for(const s of yt.SECTION_ORDER){if(s===e)return i>=o+this.sectionButtons[e].length?-1:i-o;o+=this.sectionButtons[s].length}return-1}};_SharedToolbar.SECTION_ORDER=["chartToolbar","annotations"];var SharedToolbar=_SharedToolbar,SharedToolbarModule={type:"context",contextKey:"sharedToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new SharedToolbar(t)},import_ag_charts_community120=require("ag-charts-community"),import_ag_charts_community119=require("ag-charts-community"),{CachedTextMeasurerPool:CachedTextMeasurerPool2,ZIndexMap:ZIndexMap7,LayoutElement:LayoutElement4,TempValidate:TempValidate48,BaseProperties:BaseProperties15,OBJECT:OBJECT20,BOOLEAN:BOOLEAN22,STRING:STRING21,COLOR_STRING:COLOR_STRING7,RATIO:RATIO9,valueProperty:valueProperty3,TextUtils:TextUtils3,Group:Group7,Label:Label2,Rect,Text}=import_ag_charts_community119._ModuleSupport,chartConfigurations={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,hlc:184,"high-low":800},itemIdMap={up:"positive",down:"negative"},neutralColorMap={hlc:"altNeutral"},StatusBarBackground=class extends BaseProperties15{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};__decorateClass([TempValidate48(COLOR_STRING7)],StatusBarBackground.prototype,"fill",2),__decorateClass([TempValidate48(RATIO9)],StatusBarBackground.prototype,"fillOpacity",2);var StatusBar=class extends import_ag_charts_community119._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new Label2,this.positive=new Label2,this.negative=new Label2,this.neutral=new Label2,this.altNeutral=new Label2,this.background=new StatusBarBackground,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.layer=new Group7({name:"StatusBar",zIndex:ZIndexMap7.STATUS_BAR}),this.labelGroup=this.layer.appendChild(new import_ag_charts_community119._ModuleSupport.TranslatableGroup),this.backgroundNode=this.labelGroup.appendChild(new Rect),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new Text),value:this.labelGroup.appendChild(new Text),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=t.highlightManager,this.labelGroup.visible=!1,this.destroyFns.push(t.scene.attachNode(this.layer),t.layoutManager.registerElement(LayoutElement4.Overlay,e=>this.startPerformLayout(e)),t.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)),t.highlightManager.addListener("highlight-change",()=>this.updateHighlight()))}async processData(t){if(!this.enabled||this.data==null)return;const e=[];for(const s of this.labels){const{id:a,key:r}=s,n=this[r];n==null?s.domain=void 0:e.push(valueProperty3(n,"number",{id:a}))}if(e.length===0)return;const{processedData:i,dataModel:o}=await t.request(this.id,this.data,{props:e});for(const s of this.labels){const{id:a,key:r}=s;this[r]!=null&&(s.domain=o.getDomain(this,a,"value",i))}}startPerformLayout(t){if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return;const{layoutBox:e}=t,i=4,o=12,s=0,a=8;this.labelGroup.translationY=e.y+s;const r=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),n=TextUtils3.getLineHeight(r),l=chartConfigurations[this.getChartType()]??0;let c=0,h,u="alphabetic";if(this.layoutStyle==="block")e.shrink(s+n+a,"top"),h=r+(n-r)/2;else{const{title:p}=this.ctx.chartService;if(u="top",h=s+p.padding,p.enabled){const d=p.node.getBBox();c=d.x+d.width+o}else c=p.padding}for(const{label:p,configuration:d,title:g,value:f,domain:y,formatter:m}of this.labels){if(y==null||!(l&d)){g.visible=!1,f.visible=!1;continue}const b=Math.max(CachedTextMeasurerPool2.measureText(m.format(y[0]),{font:this.positive.getFont(),textBaseline:u,textAlign:"left"}).width,CachedTextMeasurerPool2.measureText(m.format(y[1]),{font:this.positive.getFont(),textBaseline:u,textAlign:"left"}).width,CachedTextMeasurerPool2.measureText(m.format(y[0]),{font:this.negative.getFont(),textBaseline:u,textAlign:"left"}).width,CachedTextMeasurerPool2.measureText(m.format(y[1]),{font:this.negative.getFont(),textBaseline:u,textAlign:"left"}).width);g.visible=!0,f.visible=!0;const x=CachedTextMeasurerPool2.measureText(p,{font:this.title.getFont(),textBaseline:u,textAlign:"left"});g.setFont(this.title),g.fill=this.title.color,g.text=p,g.textBaseline=u,g.y=h,g.x=c,c+=x.width+i,f.textBaseline=u,f.y=h,f.x=c,c+=b+o}this.backgroundNode.x=0,this.backgroundNode.y=0,this.backgroundNode.width=c-o,this.backgroundNode.height=n+s+a,this.backgroundNode.fill=this.background.fill,this.backgroundNode.fillOpacity=this.background.fillOpacity}onLayoutComplete(t){this.labelGroup.translationX=t.series.rect.x,this.updateHighlight()}updateHighlight(){if(!this.enabled)return;const t=this.highlightManager.getActiveHighlight(),e=t?.datum??this.data?.at(-1);if(e==null){this.labelGroup.visible=!1;return}this.labelGroup.visible=!0;const i=t?.itemId;let o=i!=null?itemIdMap[i]:void 0;o==null&&this.openKey!=null&&this.closeKey!=null&&(e[this.openKey]<e[this.closeKey]?o="positive":o="negative");for(const{domain:s,value:a,key:r,formatter:n,style:l}of this.labels){if(s==null)continue;let c=l??o??"neutral";c==="neutral"&&(c=neutralColorMap[this.getChartType()]??c);const h=this[r],u=h!=null?e?.[h]:void 0;a.setFont(this[c]),a.fill=this[c].color,a.text=typeof u=="number"?n.format(u):""}}getChartType(){let t=this.ctx.chartService.publicApi?.getOptions()?.chartType;return(t==null||chartConfigurations[t]==null)&&(t="candlestick"),t}};__decorateClass([TempValidate48(BOOLEAN22)],StatusBar.prototype,"enabled",2),__decorateClass([TempValidate48(STRING21,{optional:!0})],StatusBar.prototype,"openKey",2),__decorateClass([TempValidate48(STRING21,{optional:!0})],StatusBar.prototype,"highKey",2),__decorateClass([TempValidate48(STRING21,{optional:!0})],StatusBar.prototype,"lowKey",2),__decorateClass([TempValidate48(STRING21,{optional:!0})],StatusBar.prototype,"closeKey",2),__decorateClass([TempValidate48(STRING21,{optional:!0})],StatusBar.prototype,"volumeKey",2),__decorateClass([TempValidate48(OBJECT20)],StatusBar.prototype,"title",2),__decorateClass([TempValidate48(OBJECT20)],StatusBar.prototype,"positive",2),__decorateClass([TempValidate48(OBJECT20)],StatusBar.prototype,"negative",2),__decorateClass([TempValidate48(OBJECT20)],StatusBar.prototype,"neutral",2),__decorateClass([TempValidate48(OBJECT20)],StatusBar.prototype,"altNeutral",2),__decorateClass([TempValidate48(OBJECT20)],StatusBar.prototype,"background",2),__decorateClass([TempValidate48(STRING21)],StatusBar.prototype,"layoutStyle",2);var StatusBarModule={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new StatusBar(t),themeTemplate:{statusBar:{enabled:!1,layoutStyle:import_ag_charts_community120._ModuleSupport.ThemeSymbols.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:{$ref:"textColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},positive:{color:import_ag_charts_community120._ModuleSupport.ThemeSymbols.PALETTE_UP_STROKE,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},negative:{color:import_ag_charts_community120._ModuleSupport.ThemeSymbols.PALETTE_DOWN_STROKE,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},neutral:{color:import_ag_charts_community120._ModuleSupport.ThemeSymbols.PALETTE_NEUTRAL_STROKE,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},background:{fill:{$ref:"backgroundColor"},fillOpacity:.5},altNeutral:{color:"gray",fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}}}}},import_ag_charts_community121=require("ag-charts-community"),import_ag_charts_core46=require("ag-charts-core"),{BOOLEAN:BOOLEAN23,STRING:STRING22,UNION:UNION7,BaseProperties:BaseProperties16,CartesianAxis,ChartUpdateType:ChartUpdateType2,ObserveChanges:ObserveChanges5,TooltipManager,TempValidate:TempValidate49}=import_ag_charts_community121._ModuleSupport,ChartSync=class extends BaseProperties16{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateSiblings(t){const{syncManager:e}=this.moduleContext;for(const i of e.getGroupSiblings(t??this.groupId))this.updateChart(i)}updateChart(t,e=ChartUpdateType2.UPDATE_DATA){t.ctx.updateService.update(e,{skipSync:!0})}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync=e.addListener("zoom-change",()=>{for(const i of t.getGroupSiblings(this.groupId))i.modulesManager.getModule("sync")?.zoom&&i.ctx.zoomManager.updateZoom("sync",this.mergeZoom(i))})}enabledNodeInteractionSync(){const{highlightManager:t,syncManager:e}=this.moduleContext;this.disableNodeInteractionSync=t.addListener("highlight-change",i=>{for(const o of e.getGroupSiblings(this.groupId))if(o.modulesManager.getModule("sync")?.nodeInteraction){if(!i.currentHighlight?.datum){o.ctx.highlightManager.updateHighlight(o.id),o.ctx.tooltipManager.removeTooltip(o.id);continue}for(const s of o.axes){const a=this.axes==="xy"?"x":this.axes;if(!CartesianAxis.is(s)||s.direction!==a)continue;const r=o.series.map(n=>{const l=n.getKeys(s.direction);if(s.keys.length&&!s.keys.some(g=>l.includes(g)))return;const{nodeData:c}=n.contextNodeData;if(!c?.length)return;const h=c[0][`${s.direction}Key`];let u=i.currentHighlight.datum[h];const p=(0,import_ag_charts_core46.isDate)(u);p&&(u=u.getTime());const d=c.find(g=>{const f=g.datum[h];return p?f.getTime()===u:f===u});return d?{series:n,nodeDatum:d}:null}).filter(import_ag_charts_core46.isDefined);if(r.length<2&&r[0]?.nodeDatum!==o.ctx.highlightManager.getActiveHighlight()){const{series:n,nodeDatum:l}=r[0]??{};if(o.ctx.highlightManager.updateHighlight(o.id,l),l){const c=l.midPoint?.x??l.point?.x??0,h=l.midPoint?.y??l.point?.y??0,u=TooltipManager.makeTooltipMeta({type:"pointermove",canvasX:c,canvasY:h},n,l,void 0);o.ctx.tooltipManager.updateTooltip(o.id,u,o.getTooltipContent(n,l.datumIndex,l))}else o.ctx.tooltipManager.removeTooltip(o.id);this.updateChart(o,ChartUpdateType2.SERIES_UPDATE)}}}})}getSyncedDomain(t){if(!CartesianAxis.is(t)||this.axes!=="xy"&&this.axes!==t.direction)return;const{syncManager:e}=this.moduleContext,i=e.getGroup(this.groupId),[{axes:o}]=i,{direction:s,min:a,max:r,nice:n,reverse:l}=t;for(const c of o)if(s===c.direction&&(n!==c.nice||l!==c.reverse||a!==c.min&&((0,import_ag_charts_core46.isFiniteNumber)(a)||(0,import_ag_charts_core46.isFiniteNumber)(c.min))||r!==c.max&&((0,import_ag_charts_core46.isFiniteNumber)(r)||(0,import_ag_charts_core46.isFiniteNumber)(c.max)))){import_ag_charts_core46.Logger.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),this.enabled=!1;return}return(0,import_ag_charts_core46.unique)(i.flatMap(c=>c.series).filter(c=>{if(c.visible){const h=c.getKeys(t.direction);return t.keys.length?t.keys.some(u=>h.includes(u)):!0}}).flatMap(c=>c.getDomain(t.direction)))}mergeZoom(t){const{zoomManager:e}=this.moduleContext;if(this.axes==="xy")return e.getZoom();const i=t.ctx.zoomManager.getZoom()??{};return i[this.axes]=e.getZoom()?.[this.axes],i}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():this.disableNodeInteractionSync?.()}onZoomChange(){this.enabled&&this.zoom?this.enabledZoomSync():this.disableZoomSync?.()}destroy(){const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(),this.disableZoomSync?.()}};ChartSync.className="Sync",__decorateClass([TempValidate49(BOOLEAN23),ObserveChanges5(t=>t.onEnabledChange())],ChartSync.prototype,"enabled",2),__decorateClass([TempValidate49(STRING22,{optional:!0}),ObserveChanges5((t,e,i)=>t.onGroupIdChange(e,i))],ChartSync.prototype,"groupId",2),__decorateClass([TempValidate49(UNION7(["x","y","xy"],"an axis")),ObserveChanges5(t=>t.onAxesChange())],ChartSync.prototype,"axes",2),__decorateClass([TempValidate49(BOOLEAN23),ObserveChanges5(t=>t.onNodeInteractionChange())],ChartSync.prototype,"nodeInteraction",2),__decorateClass([TempValidate49(BOOLEAN23),ObserveChanges5(t=>t.onZoomChange())],ChartSync.prototype,"zoom",2);var SyncModule={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:t=>new ChartSync(t),themeTemplate:{sync:{enabled:!1}}},import_ag_charts_community131=require("ag-charts-community"),import_ag_charts_core52=require("ag-charts-core"),import_ag_charts_community122=require("ag-charts-community"),{COLOR_STRING:COLOR_STRING8,RATIO:RATIO10,TempValidate:TempValidate50}=import_ag_charts_community122._ModuleSupport,VALID_COLOR="#2196f3",INVALID_COLOR="#8a8a8a",ZoomRect=class extends import_ag_charts_community122._ModuleSupport.Rect{constructor(){super(...arguments),this.fill=VALID_COLOR,this.fillOpacity=.2,this.zIndex=import_ag_charts_community122._ModuleSupport.ZIndexMap.ZOOM_SELECTION}updateValid(){this.fill=VALID_COLOR}updateInvalid(){this.fill=INVALID_COLOR}};ZoomRect.className="ZoomRect",__decorateClass([TempValidate50(COLOR_STRING8)],ZoomRect.prototype,"fill",2),__decorateClass([TempValidate50(RATIO10)],ZoomRect.prototype,"fillOpacity",2);var import_ag_charts_community124=require("ag-charts-community"),import_ag_charts_community123=require("ag-charts-community"),import_ag_charts_core47=require("ag-charts-core"),{UNION:UNION8}=import_ag_charts_community123._ModuleSupport,UNIT={min:0,max:1},UNIT_SIZE=UNIT.max-UNIT.min,DEFAULT_ANCHOR_POINT_X="end",DEFAULT_ANCHOR_POINT_Y="middle",ANCHOR_POINT=UNION8(["pointer","start","middle","end"],"an anchor point"),constrain=(t,e=UNIT.min,i=UNIT.max)=>(0,import_ag_charts_core47.clamp)(e,t,i);function unitZoomState(){return{x:{...UNIT},y:{...UNIT}}}function dx(t){return t.x.max-t.x.min}function dy(t){return t.y.max-t.y.min}function isZoomRangeEqual(t,e,i=1e-10){return(0,import_ag_charts_core47.isNumberEqual)(t.min,e.min,i)&&(0,import_ag_charts_core47.isNumberEqual)(t.max,e.max,i)}function isZoomEqual(t,e,i){return isZoomRangeEqual(t.x,e.x,i)&&isZoomRangeEqual(t.y,e.y,i)}function definedZoomState(t){return{x:{min:t?.x?.min??UNIT.min,max:t?.x?.max??UNIT.max},y:{min:t?.y?.min??UNIT.min,max:t?.y?.max??UNIT.max}}}function pointToRatio(t,e,i){if(!t)return{x:0,y:0};const o=constrain(e-t.x,0,t.x+t.width),s=constrain(i-t.y,0,t.y+t.height),a=1/t.width*o,r=1-1/t.height*s;return{x:constrain(a),y:constrain(r)}}function translateZoom(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function scaleZoom(t,e,i){return{x:{min:t.x.min,max:t.x.min+dx(t)*e},y:{min:t.y.min,max:t.y.min+dy(t)*i}}}function scaleZoomCenter(t,e,i){const o=dx(t),s=dy(t),a=t.x.min+o/2,r=t.y.min+s/2;return{x:{min:a-o*e/2,max:a+o*e/2},y:{min:r-s*i/2,max:r+s*i/2}}}function scaleZoomAxisWithAnchor(t,e,i,o){const{min:s,max:a}=e,r=s+(a-s)/2,n=t.max-t.min;switch(i){case"start":return{min:s,max:e.min+n};case"end":return{min:e.max-n,max:a};case"middle":return{min:r-n/2,max:r+n/2};case"pointer":return scaleZoomAxisWithPoint(t,e,o??r);default:return{min:s,max:a}}}function scaleZoomAxisWithPoint(t,e,i){const o=t.max-t.min,s=e.max-e.min,a=i*(1-(s-o)),r=i-a,n=t.min+r,l=t.max+r;return{min:n,max:l}}function multiplyZoom(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}function constrainZoom(t){return{x:constrainAxis(t.x),y:constrainAxis(t.y)}}function constrainAxis(t){const e=t.max-t.min;let i=t.max>UNIT.max?UNIT.max-e:t.min,o=t.min<UNIT.min?e:t.max;return i=Math.max(UNIT.min,i),o=Math.min(UNIT.max,o),{min:i,max:o}}var ZoomAxisDragger=class{update(t,e,i,o,s,a){return this.oldZoom??(this.oldZoom=definedZoomState(e===import_ag_charts_community124._ModuleSupport.ChartAxisDirection.X?{...s,x:a}:{...s,y:a})),this.updateCoords(t.currentX,t.currentY),this.updateZoom(e,i,o)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:o,oldZoom:s}=this;let a=definedZoomState(s);if(!o||!s)return t===import_ag_charts_community124._ModuleSupport.ChartAxisDirection.X?a.x:a.y;const r=pointToRatio(i,o.x1,o.y1),n=pointToRatio(i,o.x2,o.y2);if(t===import_ag_charts_community124._ModuleSupport.ChartAxisDirection.X){const c=(n.x-r.x)*dx(s);return a.x.max+=c,a.x=scaleZoomAxisWithAnchor(a.x,s.x,e,r.x),a=constrainZoom(a),a.x}const l=(n.y-r.y)*dy(s);return a.y.max-=l,a.y=scaleZoomAxisWithAnchor(a.y,s.y,e,r.y),a=constrainZoom(a),a.y}},CONTEXT_ZOOM_ACTION_ID="zoom-action",CONTEXT_PAN_ACTION_ID="pan-action",ZoomContextMenu=class{constructor(t,e,i,o,s,a){this.contextMenuRegistry=t,this.zoomManager=e,this.getModuleProperties=i,this.getRect=o,this.updateZoom=s,this.isZoomValid=a}registerActions(t){if(!t)return;const{contextMenuRegistry:e}=this,i=e.registerDefaultAction({id:CONTEXT_ZOOM_ACTION_ID,type:"series-area",label:"contextMenuZoomToCursor",action:this.onZoomToHere.bind(this),toggleEnabledOnShow:s=>{const a=this.getRect();if(!a)return!0;const r=pointToRatio(a,s.x,s.y);return this.iterateFindNextZoomAtPoint(r)!=null}}),o=e.registerDefaultAction({id:CONTEXT_PAN_ACTION_ID,type:"series-area",label:"contextMenuPanToCursor",action:this.onPanToHere.bind(this),toggleEnabledOnShow:()=>!isZoomEqual(definedZoomState(this.zoomManager.getZoom()),unitZoomState())});return()=>{i(),o()}}computeOrigin(t){const e=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!e||!t?.target||!(t instanceof MouseEvent))return;const o={x:0,y:0,width:e.width,height:e.height};return pointToRatio(o,t.offsetX,t.offsetY)}onZoomToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const i=this.iterateFindNextZoomAtPoint(e);i!=null&&this.updateZoom(i)}onPanToHere({event:t}){const e=this.computeOrigin(t);if(!e)return;const i=definedZoomState(this.zoomManager.getZoom()),o=dx(i),s=dy(i),a=e.x*o,r=e.y*s,n=UNIT_SIZE/2;let l={x:{min:e.x-n,max:e.x+n},y:{min:e.y-n,max:e.y+n}};l=scaleZoomCenter(l,o,s),l=translateZoom(l,i.x.min-e.x+a,i.y.min-e.y+r),this.updateZoom(constrainZoom(l))}iterateFindNextZoomAtPoint(t){const{scrollingStep:e}=this.getModuleProperties();for(let i=e;i<=1-e;i+=e){const o=this.getNextZoomAtPoint(t,i);if(this.isZoomValid(o))return o}}getNextZoomAtPoint(t,e){const{isScalingX:i,isScalingY:o}=this.getModuleProperties(),s=definedZoomState(this.zoomManager.getZoom()),a=t.x*dx(s),r=t.y*dy(s),n=UNIT_SIZE/2;let l={x:{min:t.x-n,max:t.x+n},y:{min:t.y-n,max:t.y+n}};return l=scaleZoomCenter(l,i?dx(s)*e:UNIT_SIZE,o?dy(s)*e:UNIT_SIZE),l=translateZoom(l,s.x.min-t.x+a,s.y.min-t.y+r),constrainZoom(l)}},import_ag_charts_community125=require("ag-charts-community"),{BBoxValues,ChartAxisDirection:ChartAxisDirection14}=import_ag_charts_community125._ModuleSupport,ZoomDOMProxy=class{constructor(t){this.axesHandlers=t,this.axes=[]}destroy(){this.axes.forEach(t=>t.div.destroy())}update(t,e){if(this.axes.forEach(n=>n.div.setHidden(!t)),!t)return;const{X:i,Y:o}=import_ag_charts_community125._ModuleSupport.ChartAxisDirection,s=[...e.axisManager.getAxisContext(i),...e.axisManager.getAxisContext(o)],{removed:a,added:r}=this.diffAxisIds(s);a.length>0&&(this.axes=this.axes.filter(n=>a.includes(n.axisId)?(n.div.destroy(),!1):!0));for(const n of r){const{axisId:l,direction:c}=n;this.axes.push(this.initAxis(e,l,this.axesHandlers,c))}for(const n of this.axes){const c=s.find(h=>h.axisId===n.axisId).getCanvasBounds();n.div.setHidden(BBoxValues.isEmpty(c)),c!==void 0&&n.div.setBounds(c)}}toggleAxisDraggingCursor(t,e){for(const i of this.axes)i.direction===t&&i.div.setCursor(e?this.getCursor(t):void 0)}getCursor(t){return t===ChartAxisDirection14.X?"ew-resize":"ns-resize"}initAxis(t,e,i,o){const s="afterend",a=t.proxyInteractionService.createProxyElement({type:"region",domManagerId:e,where:s});return a.setCursor(this.getCursor(o)),a.addListener("drag-start",r=>{r.device==="touch"&&r.sourceEvent.preventDefault(),i.onDragStart(e,o)}),a.addListener("drag-move",r=>i.onDrag(r)),a.addListener("drag-end",i.onDragEnd),a.addListener("dblclick",()=>i.onDoubleClick(e,o)),{axisId:e,div:a,direction:o}}diffAxisIds(t){const e=this.axes.map(a=>a.axisId),i=t.map(a=>a.axisId),o=e.filter(a=>!i.includes(a)),s=t.filter(a=>!e.includes(a.axisId));return{removed:o,added:s}}},import_ag_charts_community126=require("ag-charts-community"),import_ag_charts_core48=require("ag-charts-core"),maxZoomCoords=16,decelerationValues={off:1,short:.01,long:.002},ZoomPanner=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){const{deceleration:t}=this;return Math.max(typeof t=="number"?t:decelerationValues[t]??1,1e-4)}addListener(t,e){return this.onUpdate=e,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(t){this.updateCoords(t.currentX,t.currentY);const{x1:e=0,y1:i=0,x2:o=0,y2:s=0}=this.coords??{};this.onUpdate?.({type:"update",deltaX:e-o,deltaY:i-s})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:t}=this;let e=0,i=0,o=0;if(t.length>0){const s=this.zoomCoordsHistoryIndex%maxZoomCoords;let a=s-1;a<0&&(a=t.length-1);let r=s;r>=t.length&&(r=0);const n=t[a],l=t[r];e=n.x-l.x,i=n.y-l.y,o=n.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,o>0&&this.decelerationValue<1){const s=e/o,a=i/o,r=Math.hypot(s,a),n=Math.atan2(a,s),l=performance.now();this.inertiaHandle=(0,import_ag_charts_core48.getWindow)().requestAnimationFrame(c=>{this.animateInertia(c,c,l,r,n)})}}recordCurrentZoomCoords(){const{coords:t,coordsHistory:e,zoomCoordsHistoryIndex:i}=this;if(!t)return;const{x2:o,y2:s}=t,a=Date.now();e[i%maxZoomCoords]={x:o,y:s,t:a},this.zoomCoordsHistoryIndex+=1}animateInertia(t,e,i,o,s){const a=1-this.decelerationValue,r=-o/Math.log(a),n=o*(a**(e-i)-1)/Math.log(a),l=o*(a**(t-i)-1)/Math.log(a);this.onUpdate?.({type:"update",deltaX:-Math.cos(s)*(l-n),deltaY:-Math.sin(s)*(l-n)}),!(l>=r-1)&&(this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,t,i,o,s)}))}updateCoords(t,e){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:t,y2:e}:this.coords={x1:t,y1:e,x2:t,y2:e}}translateZooms(t,e,i,o){const s=pointToRatio(t,t.x+Math.abs(i),t.y+t.height-Math.abs(o)),a=Math.sign(i)*s.x,r=-Math.sign(o)*s.y,n={};for(const[l,{direction:c,zoom:h}]of(0,import_ag_charts_core48.entries)(e)){if(h&&h.min===UNIT.min&&h.max===UNIT.max)continue;let u=definedZoomState({[c]:h});u=constrainZoom(translateZoom(u,a*dx(u),r*dy(u))),n[l]={direction:c,zoom:u[c]}}return n}},import_ag_charts_community127=require("ag-charts-community"),import_ag_charts_core49=require("ag-charts-core"),DELTA_SCALE=200,ZoomScrollPanner=class{update(t,e,i,o){const s=t.deltaX*e*DELTA_SCALE;return this.translateZooms(i,o,s)}translateZooms(t,e,i){const o={},s=pointToRatio(t,t.x+Math.abs(i),0),a=i<0?-s.x:s.x;for(const[r,{direction:n,zoom:l}]of(0,import_ag_charts_core49.entries)(e)){if(n!==import_ag_charts_community127._ModuleSupport.ChartAxisDirection.X)continue;let c=definedZoomState({x:l});c=constrainZoom(translateZoom(c,a*dx(c),0)),o[r]={direction:n,zoom:c.x}}return o}},import_ag_charts_community128=require("ag-charts-community"),import_ag_charts_core50=require("ag-charts-core"),ZoomScroller=class{updateAxes(t,e,i,o){const s=t.sourceEvent,a={},{anchorPointX:r,anchorPointY:n,isScalingX:l,isScalingY:c,scrollingStep:h}=e,u=pointToRatio(i,s.offsetX??s.clientX,s.offsetY??s.clientY);for(const[p,{direction:d,zoom:g}]of(0,import_ag_charts_core50.entries)(o)){if(g==null)continue;let f={...g};const y=h*t.deltaY*(g.max-g.min);if(d===import_ag_charts_community128._ModuleSupport.ChartAxisDirection.X&&l)f.max+=y,f=scaleZoomAxisWithAnchor(f,g,r,u.x);else if(d===import_ag_charts_community128._ModuleSupport.ChartAxisDirection.Y&&c)f.max+=y,f=scaleZoomAxisWithAnchor(f,g,n,u.y);else continue;a[p]={direction:d,zoom:constrainAxis(f)}}return a}update(t,e,i,o){const{anchorPointX:s,anchorPointY:a,isScalingX:r,isScalingY:n,scrollingStep:l}=e,c=t.offsetX+i.x,h=t.offsetY+i.y,u=pointToRatio(i,c,h),p=t.deltaY;let d=definedZoomState(o);return d.x.max+=r?l*p*dx(o):0,d.y.max+=n?l*p*dy(o):0,r&&(d.x=scaleZoomAxisWithAnchor(d.x,o.x,s,u.x)),n&&(d.y=scaleZoomAxisWithAnchor(d.y,o.y,a,u.y)),d=constrainZoom(d),d}updateDelta(t,e,i){const{anchorPointX:o,anchorPointY:s,isScalingX:a,isScalingY:r,scrollingStep:n}=e;let l=definedZoomState(i);return l.x.max+=a?n*-t*dx(i):0,l.y.max+=r?n*-t*dy(i):0,a&&(l.x=scaleZoomAxisWithAnchor(l.x,i.x,o)),r&&(l.y=scaleZoomAxisWithAnchor(l.y,i.y,s)),l=constrainZoom(l),l}},ZoomSelector=class{constructor(t,e,i){this.rect=t,this.getZoom=e,this.isZoomValid=i,this.rect.visible=!1}update(t,e,i){const o=t.currentX+(i?.x??0),s=t.currentY+(i?.y??0);this.rect.visible=!0,this.updateCoords(o,s,e,i),this.updateRect(i)}stop(t,e,i){let o=definedZoomState();if(!t||!e)return o;this.coords&&(o=this.createZoomFromCoords(e,i));const s=e.width/t.width,a=e.height/t.height;return o=constrainZoom(multiplyZoom(o,s,a)),this.reset(),o}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible&&this.rect.width>0&&this.rect.height>0}updateCoords(t,e,i,o){if(!this.coords){this.coords={x1:t,y1:e,x2:t,y2:e};return}const{coords:s}=this;if(s.x2=t,s.y2=e,!o)return;const{isScalingX:a,isScalingY:r,keepAspectRatio:n}=i,l=this.getNormalisedDimensions();if(n&&a&&r){const c=o.width/o.height;s.y2<s.y1?s.y2=Math.min(s.y1-l.width/c,s.y1):s.y2=Math.max(s.y1+l.width/c,s.y1)}a||(s.x1=o.x,s.x2=o.x+o.width),r||(s.y1=o.y,s.y2=o.y+o.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:o,height:s}=i;let{x:a,y:r}=i;a=Math.max(a,t.x),a-=Math.max(0,a+o-(t.x+t.width)),r=Math.max(r,t.y),r-=Math.max(0,r+s-(t.y+t.height)),e.x=a,e.y=r,e.width=o,e.height=s;const n=this.createZoomFromCoords(t,this.getZoom());this.isZoomValid(n)?e.updateValid():e.updateInvalid()}createZoomFromCoords(t,e){const i=definedZoomState(e),o=this.getNormalisedDimensions(),s=pointToRatio(t,o.x,o.y+o.height),a=o.width/t.width,r=o.height/t.height;let n=scaleZoom(i,a,r);const l=s.x*dx(i),c=s.y*dy(i);return n=translateZoom(n,l,c),n=constrainZoom(n),n}getNormalisedDimensions(){const{x1:t=0,y1:e=0,x2:i=0,y2:o=0}=this.coords??{},s=t<=i?t:i,a=e<=o?e:o,r=t<=i?i-t:t-i,n=e<=o?o-e:e-o;return{x:s,y:a,width:r,height:n}}},import_ag_charts_community129=require("ag-charts-community"),import_ag_charts_core51=require("ag-charts-core"),{ARRAY:ARRAY5,BOOLEAN:BOOLEAN24,STRING:STRING23,UNION:UNION9,ActionOnSet:ActionOnSet8,BaseProperties:BaseProperties17,ChartAxisDirection:ChartAxisDirection15,NativeWidget:NativeWidget2,PropertiesArray:PropertiesArray5,Toolbar:Toolbar2,ToolbarButtonProperties:ToolbarButtonProperties4,TempValidate:TempValidate51}=import_ag_charts_community129._ModuleSupport,ZoomButtonProperties=class extends ToolbarButtonProperties4{};__decorateClass([TempValidate51(UNION9(["reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"]))],ZoomButtonProperties.prototype,"value",2),__decorateClass([TempValidate51(STRING23)],ZoomButtonProperties.prototype,"section",2);var ZoomToolbar=class extends BaseProperties17{constructor(t,e,i,o,s,a,r){super(),this.ctx=t,this.getModuleProperties=e,this.getResetZoom=i,this.updateZoom=o,this.updateAxisZoom=s,this.resetZoom=a,this.isZoomValid=r,this.enabled=!1,this.buttons=new PropertiesArray5(ZoomButtonProperties),this.visible="hover",this.verticalSpacing=10,this.detectionRange=38,this.destroyFns=[],this.container=new NativeWidget2((0,import_ag_charts_core51.createElement)("div")),this.container.addClass("ag-charts-zoom-buttons"),t.domManager.addChild("canvas-overlay","zoom-buttons",this.container.getElement()),this.toolbar=new Toolbar2(t.localeManager),this.container.addChild(this.toolbar),this.toolbar.getElement().style.transform="translateY(54px)",this.toggleVisibility(this.visible==="always"),this.destroyFns.push(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("button-focused",this.onButtonFocus.bind(this)),t.widgets.containerWidget.addListener("mousemove",this.onHover.bind(this)),t.widgets.containerWidget.addListener("mouseleave",this.onLeave.bind(this)),t.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),this.teardown.bind(this))}destroy(){for(const t of this.destroyFns)t()}toggleVisibleZoomed(t){this.visible==="zoomed"&&this.toggleVisibility(!t)}teardown(){this.ctx.domManager.removeChild("canvas-overlay","zoom-buttons"),this.container.destroy()}onLayoutComplete(t){const{buttons:e,container:i}=this,{rect:o}=t.series;this.toolbar.updateButtons(e),this.toggleButtons();const s=i.getBounds().height;i.setBounds({y:o.y+o.height-s})}onHover(t){if(!this.enabled||this.visible!=="hover"||this.toolbar.isHidden())return;const{container:e,detectionRange:i,ctx:{scene:o}}=this,{currentY:s,sourceEvent:{target:a}}=t,r=e.getElement(),n=r.offsetTop-i,l=s>n&&s<o.canvas.element.offsetHeight||a===r;this.toggleVisibility(l)}onLeave(){this.visible==="hover"&&this.toggleVisibility(!1)}toggleVisibility(t,e=!1){const{container:i,toolbar:o,verticalSpacing:s}=this;o.toggleClass("ag-charts-zoom-buttons__toolbar--hidden",!t);const a=o.getElement();a.style.transitionDuration=e?"0s":"",a.style.transform=t?"translateY(0)":`translateY(${i.getBounds().height+s}px)`}toggleButtons(){const t=definedZoomState(this.ctx.zoomManager.getZoom());if(!(this.previousZoom&&isZoomEqual(this.previousZoom,t))){this.previousZoom=t;for(const[e,i]of this.buttons.entries()){let o=!0;switch(i?.value){case"pan-start":o=t.x.min>UNIT.min;break;case"pan-end":o=t.x.max<UNIT.max;break;case"pan-left":o=t.x.min>UNIT.min;break;case"pan-right":o=t.x.max<UNIT.max;break;case"zoom-out":o=!isZoomEqual(t,unitZoomState());break;case"zoom-in":o=this.isZoomValid(this.getNextZoomStateUnified("zoom-in",t,this.getModuleProperties()));break;case"reset":o=!isZoomEqual(t,this.getResetZoom());break}this.toolbar.toggleButtonEnabledByIndex(e,o)}}}onButtonPress({button:t}){if(!this.enabled||this.toolbar.isHidden())return;const e=this.getModuleProperties();if(e.independentAxes&&t.value!=="reset"){const i=this.ctx.zoomManager.getAxisZooms();for(const[o,{direction:s,zoom:a}]of(0,import_ag_charts_core51.entries)(i))a!=null&&this.onButtonPressAxis(t,e,o,s,a)}else this.onButtonPressUnified(t,e)}onButtonFocus(t){this.toggleVisibility(!0,!0)}onButtonPressAxis(t,e,i,o,s){const{isScalingX:a,isScalingY:r,scrollingStep:n}=e;let l={...s};const c=s.max-s.min;switch(t.value){case"pan-start":l.max=c,l.min=0;break;case"pan-end":l.min=l.max-c,l.max=UNIT.max;break;case"pan-left":l.min-=c*n,l.max-=c*n;break;case"pan-right":l.min+=c*n,l.max+=c*n;break;case"zoom-in":case"zoom-out":{const h=o===ChartAxisDirection15.X,u=h&&a||!h&&r;let p=t.value==="zoom-in"?1-n:1+n;u||(p=1);const d=h?this.getAnchorPointX(e):this.getAnchorPointY(e);l.max=l.min+(l.max-l.min)*p,l=scaleZoomAxisWithAnchor(l,s,d);break}}this.updateAxisZoom(i,o,constrainAxis(l))}onButtonPressUnified(t,e){const{scrollingStep:i}=e,o=definedZoomState(this.ctx.zoomManager.getZoom());let s=definedZoomState(o);switch(t.value){case"reset":this.resetZoom();return;case"pan-start":s.x.max=dx(s),s.x.min=0;break;case"pan-end":s.x.min=UNIT.max-dx(s),s.x.max=UNIT.max;break;case"pan-left":s=translateZoom(s,-dx(s)*i,0);break;case"pan-right":s=translateZoom(s,dx(s)*i,0);break;case"zoom-in":case"zoom-out":{s=this.getNextZoomStateUnified(t.value,o,e);break}}this.updateZoom(constrainZoom(s))}getNextZoomStateUnified(t,e,i){const{isScalingX:o,isScalingY:s,scrollingStep:a}=i,r=t==="zoom-in"?1-a:1+a,n=scaleZoom(e,o?r:1,s?r:1);return n.x=scaleZoomAxisWithAnchor(n.x,e.x,this.getAnchorPointX(i)),n.y=scaleZoomAxisWithAnchor(n.y,e.y,this.getAnchorPointY(i)),n}getAnchorPointX(t){const e=this.anchorPointX??t.anchorPointX;return e==="pointer"?DEFAULT_ANCHOR_POINT_X:e}getAnchorPointY(t){const e=this.anchorPointY??t.anchorPointY;return e==="pointer"?DEFAULT_ANCHOR_POINT_Y:e}};__decorateClass([TempValidate51(BOOLEAN24),ActionOnSet8({changeValue(t){this.toolbar?.setHidden(!t)}})],ZoomToolbar.prototype,"enabled",2),__decorateClass([TempValidate51(ARRAY5)],ZoomToolbar.prototype,"buttons",2),__decorateClass([TempValidate51(UNION9(["always","zoomed","hover"])),ActionOnSet8({changeValue(t,e){e!=null&&this.toggleVisibility(t==="always")}})],ZoomToolbar.prototype,"visible",2),__decorateClass([TempValidate51(ANCHOR_POINT)],ZoomToolbar.prototype,"anchorPointX",2),__decorateClass([TempValidate51(ANCHOR_POINT)],ZoomToolbar.prototype,"anchorPointY",2);var import_ag_charts_community130=require("ag-charts-community"),N=1e6;function clientToNormal({min:t,max:e},i,o,s){return s===0?0:N*((i-o)/s*(e-t)+t)}function solveTwoUnknowns(t,e,i,o,s,a){[t,e]=[Math.min(t,e),Math.max(t,e)],[i,o]=[Math.min(i,o),Math.max(i,o)];const r=N*(i-s)/a,n=N*(o-s)/a,l=(i-s)/(o-s),c=(t-l*e)/(N-r+l*(n-N)),h=(e+(n-N)*c)/n;return{min:c,max:h}}function isRangeOverlapping(t,e,i,o){e===0&&(e=30),o===0&&(o=30);const s=t-e,a=t+e,r=i-o,n=i+o;return!(a<r||n<s)}var ZoomTwoFingers=class{constructor(){this.touchStart={origins:[{identifier:0,normalX:NaN,normalY:NaN},{identifier:0,normalX:NaN,normalY:NaN}]},this.initialZoom={x:{min:0,max:1},y:{min:0,max:1}},this.previous={a1:NaN,a2:NaN,b1:NaN,b2:NaN}}start(t,e,i){if(t.sourceEvent.targetTouches.length!==2)return!1;t.sourceEvent.preventDefault();const o=Array.from(t.sourceEvent.targetTouches),{x:s,y:a,width:r,height:n}=e.getBoundingClientRect();this.initialZoom.x.min=i.x?.min??0,this.initialZoom.x.max=i.x?.max??1,this.initialZoom.y.min=i.y?.min??0,this.initialZoom.y.max=i.y?.max??1,this.touchStart.origins.forEach(g=>g.identifier=0),this.previous.a1=NaN,this.previous.a2=NaN,this.previous.b1=NaN,this.previous.b2=NaN;for(const g of[0,1]){const f=o[g].clientX,y=a+n-o[g].clientY;this.touchStart.origins[g].identifier=o[g].identifier,this.touchStart.origins[g].normalX=clientToNormal(this.initialZoom.x,f,s,r),this.touchStart.origins[g].normalY=clientToNormal(this.initialZoom.y,y,a,n)}const[l,c]=o,[h,u]=this.touchStart.origins,p=isRangeOverlapping(l.clientX,l.radiusX,c.clientX,c.radiusX);return isRangeOverlapping(l.clientY,l.radiusY,c.clientY,c.radiusY)&&(h.normalY=u.normalY=(h.normalY+u.normalY)/2),p&&(h.normalX=u.normalX=(h.normalX+u.normalX)/2),!0}update(t,e){t.sourceEvent.preventDefault();const i=Array.from(t.sourceEvent.targetTouches),{x:o,y:s,width:a,height:r}=e.getBoundingClientRect(),{origins:n}=this.touchStart,l=[0,1].map(m=>i.find(b=>b.identifier===n[m].identifier)),c=n[0].normalX,h=n[1].normalX,u=l[0].clientX,p=l[1].clientX,d=n[0].normalY,g=n[1].normalY,f=s+r-l[0].clientY,y=s+r-l[1].clientY;return this.twitchTolerantZoomPan4(c,h,u,p,d,g,f,y,o,s,a,r)}end(t){const e=Array.from(t.sourceEvent.targetTouches).map(i=>i.identifier);return!e.includes(this.touchStart.origins[0].identifier)||!e.includes(this.touchStart.origins[1].identifier)}twitchTolerantZoomPan4(t,e,i,o,s,a,r,n,l,c,h,u){const{initialZoom:p,previous:d}=this,g=twitchTolerantZoomPan2(t,e,i,o,d,"a1","a2",l,h,p.x),f=twitchTolerantZoomPan2(s,a,r,n,d,"b1","b2",c,u,p.y);return{x:g,y:f}}};function twitchTolerantZoomPan2(t,e,i,o,s,a,r,n,l,c){if(t!=e){const h=s[a],u=s[r];return Math.abs(i-h)+Math.abs(o-u)<=1?(i=h,o=u):(s[a]=i,s[r]=o),solveTwoUnknowns(t,e,i,o,n,l)}else{const h=clientToNormal(c,i,n,l),u=clientToNormal(c,o,n,l),p=(h+u)/2,d=(t-p)/N;return{min:c.min+d,max:c.max+d}}}var{BOOLEAN:BOOLEAN25,NUMBER:NUMBER13,POSITIVE_NUMBER:POSITIVE_NUMBER13,RATIO:RATIO11,UNION:UNION10,OBJECT:OBJECT21,OR:OR4,ActionOnSet:ActionOnSet9,ChartAxisDirection:ChartAxisDirection16,ChartUpdateType:ChartUpdateType3,Deprecated,TempValidate:TempValidate52,InteractionState:InteractionState4,ProxyProperty:ProxyProperty3}=import_ag_charts_community131._ModuleSupport,round=t=>(0,import_ag_charts_core52.roundTo)(t,10),CURSOR_ID="zoom-cursor",TOOLTIP_ID="zoom-tooltip",ZoomAutoScaling=class extends import_ag_charts_community131._ModuleSupport.BaseProperties{constructor(t){super(),this.onChange=t,this.enabled=!1,this.padding=0}};__decorateClass([TempValidate52(BOOLEAN25),ActionOnSet9({changeValue(t){this.onChange({enabled:t,padding:this.padding})}})],ZoomAutoScaling.prototype,"enabled",2),__decorateClass([TempValidate52(RATIO11),ActionOnSet9({changeValue(t){this.onChange({enabled:this.enabled,padding:t})}})],ZoomAutoScaling.prototype,"padding",2);var Zoom=class extends import_ag_charts_community131._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.enableTwoFingerZoom=!0,this.panKey="alt",this.axes="x",this.scrollingStep=UNIT_SIZE/10,this.keepAspectRatio=!1,this.minVisibleItems=2,this.anchorPointX=DEFAULT_ANCHOR_POINT_X,this.anchorPointY=DEFAULT_ANCHOR_POINT_Y,this.autoScaling=new ZoomAutoScaling(i=>{this.ctx.zoomManager.setAutoScaleYAxis(i.enabled,i.padding)}),this.buttons=new ZoomToolbar(this.ctx,this.getModuleProperties.bind(this),this.getResetZoom.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this),this.resetZoom.bind(this),this.isZoomValid.bind(this)),this.axisDragger=new ZoomAxisDragger,this.panner=new ZoomPanner,this.scroller=new ZoomScroller,this.scrollPanner=new ZoomScrollPanner,this.twoFingers=new ZoomTwoFingers,this.deceleration="short",this.dragState=0,this.isState=i=>this.ctx.interactionManager.isState(i),this.destroyContextMenuActions=void 0,this.isFirstWheelEvent=!0,this.debouncedWheelReset=(0,import_ag_charts_core52.debounce)(()=>{this.isFirstWheelEvent=!0},100);const e=new ZoomRect;this.selector=new ZoomSelector(e,this.getZoom.bind(this),this.isZoomValid.bind(this)),this.contextMenu=new ZoomContextMenu(t.contextMenuRegistry,t.zoomManager,this.getModuleProperties.bind(this),()=>this.paddedRect,this.updateZoom.bind(this),this.isZoomValid.bind(this)),this.domProxy=new ZoomDOMProxy({onDragStart:(i,o)=>this.onAxisDragStart(i,o),onDrag:i=>{this.onDragMove({...i,currentX:i.offsetX,currentY:i.offsetY})},onDragEnd:()=>this.onDragEnd(),onDoubleClick:(i,o)=>{this.hoveredAxis={id:i,direction:o},this.onDoubleClick(),this.hoveredAxis=void 0}}),this.destroyFns.push(t.scene.attachNode(e),t.chartEventManager.addListener("series-keynav-zoom",i=>this.onNavZoom(i)),t.widgets.seriesDragInterpreter.addListener("dblclick",i=>this.onDoubleClick(i)),t.widgets.seriesDragInterpreter.addListener("drag-move",i=>this.onDragMove(i)),t.widgets.seriesDragInterpreter.addListener("drag-start",i=>this.onDragStart(i)),t.widgets.seriesDragInterpreter.addListener("drag-end",()=>this.onDragEnd()),t.widgets.seriesWidget.addListener("wheel",i=>this.onWheel(i)),t.widgets.seriesWidget.addListener("touchstart",(i,o)=>this.onTouchStart(i,o)),t.widgets.seriesWidget.addListener("touchmove",(i,o)=>this.onTouchMove(i,o)),t.widgets.seriesWidget.addListener("touchend",i=>this.onTouchEnd(i)),t.widgets.seriesWidget.addListener("touchcancel",i=>this.onTouchEnd(i)),t.updateService.addListener("process-data",i=>this.onProcessData(i)),t.layoutManager.addListener("layout:complete",i=>this.onLayoutComplete(i)),t.zoomManager.addListener("zoom-change",i=>this.onZoomChange(i)),t.zoomManager.addListener("zoom-pan-start",i=>this.onZoomPanStart(i)),this.panner.addListener("update",i=>this.onPanUpdate(i)),()=>this.teardown())}teardown(){this.ctx.zoomManager.setZoomModuleEnabled(!1),this.buttons.destroy(),this.destroyContextMenuActions?.()}onEnabledChange(t){this.ctx.zoomManager.setZoomModuleEnabled(t),this.contextMenu&&(this.destroyContextMenuActions?.(),this.destroyContextMenuActions=this.contextMenu.registerActions(t))}isIgnoredTouch(t){if(t?.device!=="touch")return!1;if(this.ctx.chartService.touch.dragAction!=="drag")return!0;if(this.enableSelecting)return!1;if(!this.enablePanning)return!0;const{x:e,y:i}=this.getZoom();return e.min===0&&e.max===1&&i.min===0&&i.max===1}onDoubleClick(t){const{enabled:e,enableDoubleClickToReset:i,hoveredAxis:o,ctx:{zoomManager:s}}=this;!e||!i||!this.isState(InteractionState4.ZoomClickable)||(o?s.resetAxisZoom("zoom",o.id):t?.preventZoomDblClick||this.resetZoom())}onDragStart(t){const{enabled:e,enableAxisDragging:i,enablePanning:o,enableSelecting:s,hoveredAxis:a,ctx:{domManager:r,zoomManager:n}}=this;if(!e||!this.hoveredAxis&&(!this.isState(InteractionState4.ZoomDraggable)||this.dragState!==0||this.isIgnoredTouch(t)))return;this.panner.stopInteractions();let l=0;if(i&&a)l=1;else if(t!=null){const c=this.isPanningKeyPressed(t.sourceEvent);o&&(!s||c)?(r.updateCursor(CURSOR_ID,"grabbing"),l=2,this.panner.start()):s&&!c&&(l=3)}(this.dragState=l)!==0&&n.fireZoomPanStartEvent("zoom")}onDragMove(t){const{anchorPointX:e,anchorPointY:i,axisDragger:o,dragState:s,enabled:a,paddedRect:r,panner:n,selector:l,seriesRect:c,shouldFlipXY:h,hoveredAxis:u,ctx:{interactionManager:p,tooltipManager:d,updateService:g,zoomManager:f}}=this;if(!a||!r||!c||!u&&(!this.isState(InteractionState4.ZoomDraggable)||this.isIgnoredTouch(t)))return;p.pushState(import_ag_charts_community131._ModuleSupport.InteractionState.ZoomDrag),t.device==="touch"&&t.sourceEvent.preventDefault();const y=this.getZoom();switch(s){case 1:{if(!u)break;const{id:m,direction:b}=u;let x=b===ChartAxisDirection16.X?e:i;h&&(x=b===ChartAxisDirection16.X?i:e);const S=f.getAxisZoom(m),v=o.update(t,b,x,c,y,S);f.setAxisManuallyAdjusted("zoom",m),this.updateAxisZoom(m,b,v);break}case 2:n.update(t);break;case 3:l.update(t,this.getModuleProperties(),r);break;case 0:return}d.updateTooltip(TOOLTIP_ID),g.update(ChartUpdateType3.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){const{axisDragger:t,dragState:e,enabled:i,panner:o,selector:s,ctx:{domManager:a,interactionManager:r,tooltipManager:n}}=this;if(r.popState(import_ag_charts_community131._ModuleSupport.InteractionState.ZoomDrag),!(!i||e===0)){switch(e){case 1:this.hoveredAxis=void 0,t.stop();break;case 2:o.stop();break;case 3:{if(!s.didUpdate())break;const l=this.getZoom(),c=s.stop(this.seriesRect,this.paddedRect,l);this.updateZoom(c);break}}this.dragState=0,a.updateCursor(CURSOR_ID),n.removeTooltip(TOOLTIP_ID)}}onNavZoom(t){const{enabled:e,enableScrolling:i,scroller:o}=this;!this.ctx.interactionManager.isState(import_ag_charts_community131._ModuleSupport.InteractionState.Default)||!e||!i||(t.widgetEvent.sourceEvent.preventDefault(),this.updateZoom(o.updateDelta(t.delta,this.getModuleProperties(),this.getZoom())))}onWheel(t){const{enabled:e,enablePanning:i,enableScrolling:o,paddedRect:s}=this;if(!e||!o||!s||!this.isState(InteractionState4.ZoomWheelable))return;const{deltaX:a,deltaY:r}=t.sourceEvent,n=a!=null&&r!=null&&Math.abs(a)>Math.abs(r);i&&n?this.onWheelPanning(t):this.onWheelScrolling(t)}onWheelPanning(t){const{scrollingStep:e,scrollPanner:i,seriesRect:o,ctx:{zoomManager:s}}=this;if(!o)return;t.sourceEvent.preventDefault();const a=i.update(t,e,o,s.getAxisZooms());for(const[r,{direction:n,zoom:l}]of(0,import_ag_charts_core52.entries)(a))this.updateAxisZoom(r,n,l)}onWheelScrolling(t){const{enableAxisDragging:e,enableIndependentAxes:i,hoveredAxis:o,scroller:s,seriesRect:a,ctx:{zoomManager:r}}=this;if(!a)return;const n=this.getZoom();let l=t.deltaY>0&&this.isMaxZoom(n);const c=e&&o!=null;let h=this.isScalingX(),u=this.isScalingY();c&&(h=o.direction===import_ag_charts_community131._ModuleSupport.ChartAxisDirection.X,u=!h);const p=this.getModuleProperties({isScalingX:h,isScalingY:u});let d=!0;if(i===!0){const g=s.updateAxes(t,p,a,r.getAxisZooms());for(const[f,{direction:y,zoom:m}]of(0,import_ag_charts_core52.entries)(g))c&&o.id!==f||d&&(d=this.updateAxisZoom(f,y,m))}else{const g=s.update(t,p,a,this.getZoom());d=this.updateUnifiedZoom(g)}l||(l=t.deltaY<0&&!d),(!this.isFirstWheelEvent||!l)&&t.sourceEvent.preventDefault(),this.isFirstWheelEvent=!1,this.debouncedWheelReset()}onAxisDragStart(t,e){this.hoveredAxis={id:t,direction:e},this.onDragStart(void 0)}onTouchStart(t,e){!this.enableTwoFingerZoom||this.dragState!==0||this.twoFingers.start(t,e,this.getZoom())&&(this.dragState=4)}onTouchMove(t,e){if(!this.enableTwoFingerZoom||this.dragState!==4)return;const i=this.twoFingers.update(t,e);this.updateZoom(constrainZoom(i))}onTouchEnd(t){!this.enableTwoFingerZoom||this.dragState!==4||(t.sourceEvent.preventDefault(),this.twoFingers.end(t)&&(this.dragState=0))}onProcessData(t){this.shouldFlipXY=t.series.shouldFlipXY}onLayoutComplete(t){this.domProxy.update(this.enableAxisDragging,this.ctx),this.enabled&&(this.seriesRect=t.series.rect,this.paddedRect=t.series.paddedRect,this.enableAxisDragging&&this.toggleAxisDraggingCursors())}onZoomChange(t){t.callerId!=="zoom"&&this.panner.stopInteractions();const e=this.getZoom();this.buttons.toggleVisibleZoomed(this.isMaxZoom(e))}onZoomPanStart(t){t.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(t){const{panner:e,seriesRect:i,ctx:{tooltipManager:o,zoomManager:s}}=this;if(!i)return;const a=e.translateZooms(i,s.getAxisZooms(),t.deltaX,t.deltaY);for(const[r,{direction:n,zoom:l}]of(0,import_ag_charts_core52.entries)(a))this.updateAxisZoom(r,n,l);o.updateTooltip(TOOLTIP_ID)}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMaxZoom(t){return isZoomEqual(t,unitZoomState())}isZoomValid(t){const{minVisibleItems:e,minVisibleItemsX:i,minVisibleItemsY:o,ctx:{zoomManager:s}}=this;if(e===0)return!0;const a=this.getZoom(),r=round(dx(t))<round(dx(a)),n=round(dy(t))<round(dy(a));return!r&&!n?!0:i!=null&&r?s.isVisibleItemsCountAtLeast(t,i):o!=null&&n?s.isVisibleItemsCountAtLeast(t,o):s.isVisibleItemsCountAtLeast(t,e)}isAxisZoomValid(t,e){const{minVisibleItems:i,minVisibleItemsX:o,minVisibleItemsY:s,ctx:{zoomManager:a}}=this,r=this.getZoom(),n=e.max-e.min,l=r[t].max-r[t].min,c={...r,[t]:e},h=t===ChartAxisDirection16.X?o:s;return n>=l||a.isVisibleItemsCountAtLeast(c,h??i)}resetZoom(){this.ctx.zoomManager.resetZoom("zoom")}updateZoom(t){this.enableIndependentAxes?this.updatePrimaryAxisZooms(t):this.updateUnifiedZoom(t)}updateUnifiedZoom(t){return this.isZoomValid(t)?(this.ctx.zoomManager.updateZoom("zoom",t),!0):(this.ctx.updateService.update(ChartUpdateType3.SCENE_RENDER,{skipAnimations:!0}),!1)}updatePrimaryAxisZooms(t){this.updatePrimaryAxisZoom(t,ChartAxisDirection16.X),this.updatePrimaryAxisZoom(t,ChartAxisDirection16.Y)}updatePrimaryAxisZoom(t,e){const i=this.ctx.zoomManager.getPrimaryAxisId(e);i!=null&&this.updateAxisZoom(i,e,t[e])}updateAxisZoom(t,e,i){const{enableIndependentAxes:o,ctx:{zoomManager:s}}=this;if(!i)return!1;const a=this.getZoom();return o!==!0?(a[e]=i,this.updateUnifiedZoom(a)):this.isAxisZoomValid(e,i)?(s.updateAxisZoom("zoom",t,i),!0):!1}toggleAxisDraggingCursors(){const{anchorPointX:t,anchorPointY:e,domProxy:i}=this,o=this.getZoom();let s=dx(o)!==UNIT_SIZE,a=dy(o)!==UNIT_SIZE;if(!s){const r=scaleZoom(o,.999,1);r.x=scaleZoomAxisWithAnchor(r.x,o.x,t),s=this.isZoomValid(r)}if(!a){const r=scaleZoom(o,1,.999);r.y=scaleZoomAxisWithAnchor(r.y,o.y,e),a=this.isZoomValid(r)}i.toggleAxisDraggingCursor(ChartAxisDirection16.X,s),i.toggleAxisDraggingCursor(ChartAxisDirection16.Y,a)}getZoom(){return definedZoomState(this.ctx.zoomManager.getZoom())}getResetZoom(){return definedZoomState(this.ctx.zoomManager.getRestoredZoom())}getModuleProperties(t){return{anchorPointX:t?.anchorPointX??this.getAnchorPointX(),anchorPointY:t?.anchorPointY??this.getAnchorPointY(),enabled:t?.enabled??this.enabled,independentAxes:t?.independentAxes??this.enableIndependentAxes===!0,isScalingX:t?.isScalingX??this.isScalingX(),isScalingY:t?.isScalingY??this.isScalingY(),keepAspectRatio:t?.keepAspectRatio??this.keepAspectRatio,scrollingStep:t?.scrollingStep??this.scrollingStep}}};__decorateClass([ActionOnSet9({newValue(t){this.onEnabledChange(t)}}),TempValidate52(BOOLEAN25)],Zoom.prototype,"enabled",2),__decorateClass([TempValidate52(BOOLEAN25)],Zoom.prototype,"enableAxisDragging",2),__decorateClass([TempValidate52(BOOLEAN25)],Zoom.prototype,"enableDoubleClickToReset",2),__decorateClass([ActionOnSet9({changeValue(t){this.ctx.zoomManager.setIndependentAxes(!!t)}}),TempValidate52(BOOLEAN25,{optional:!0})],Zoom.prototype,"enableIndependentAxes",2),__decorateClass([TempValidate52(BOOLEAN25)],Zoom.prototype,"enablePanning",2),__decorateClass([TempValidate52(BOOLEAN25)],Zoom.prototype,"enableScrolling",2),__decorateClass([TempValidate52(BOOLEAN25)],Zoom.prototype,"enableSelecting",2),__decorateClass([TempValidate52(BOOLEAN25)],Zoom.prototype,"enableTwoFingerZoom",2),__decorateClass([TempValidate52(UNION10(["alt","ctrl","meta","shift"],"a pan key"))],Zoom.prototype,"panKey",2),__decorateClass([TempValidate52(UNION10(["x","y","xy"],"an axis"))],Zoom.prototype,"axes",2),__decorateClass([TempValidate52(RATIO11)],Zoom.prototype,"scrollingStep",2),__decorateClass([TempValidate52(BOOLEAN25)],Zoom.prototype,"keepAspectRatio",2),__decorateClass([TempValidate52(POSITIVE_NUMBER13)],Zoom.prototype,"minVisibleItems",2),__decorateClass([Deprecated("Use [minVisibleItems] instead."),TempValidate52(NUMBER13.restrict({min:1}))],Zoom.prototype,"minVisibleItemsX",2),__decorateClass([Deprecated("Use [minVisibleItems] instead."),TempValidate52(NUMBER13.restrict({min:1}))],Zoom.prototype,"minVisibleItemsY",2),__decorateClass([TempValidate52(ANCHOR_POINT)],Zoom.prototype,"anchorPointX",2),__decorateClass([TempValidate52(ANCHOR_POINT)],Zoom.prototype,"anchorPointY",2),__decorateClass([TempValidate52(OBJECT21)],Zoom.prototype,"autoScaling",2),__decorateClass([TempValidate52(OBJECT21)],Zoom.prototype,"buttons",2),__decorateClass([ProxyProperty3("panner.deceleration"),TempValidate52(OR4(RATIO11,UNION10(["off","short","long"],"a deceleration")))],Zoom.prototype,"deceleration",2);var buttons={enabled:!0,visible:"hover",buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out",section:"scale"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in",section:"scale"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left",section:"pan"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right",section:"pan"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset",section:"reset"}]},ZoomModule={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],moduleFactory:t=>new Zoom(t),themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons,enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,enableTwoFingerZoom:!0,deceleration:"short",minVisibleItems:2,panKey:"alt",scrollingStep:.1,autoScaling:{enabled:!1,padding:.05}}}},import_ag_charts_community133=require("ag-charts-community"),import_ag_charts_community132=require("ag-charts-community"),{BOOLEAN:BOOLEAN26,OBJECT:OBJECT22,POSITION,POSITIVE_NUMBER:POSITIVE_NUMBER14,BaseProperties:BaseProperties18,AxisTicks,ZIndexMap:ZIndexMap8,ProxyProperty:ProxyProperty4,TempValidate:TempValidate53,LayoutElement:LayoutElement5,createId:createId4,Group:Group8,Rect:Rect2,Marker,TranslatableGroup:TranslatableGroup3,BBox:BBox9}=import_ag_charts_community132._ModuleSupport,GradientBar=class extends BaseProperties18{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};__decorateClass([TempValidate53(POSITIVE_NUMBER14)],GradientBar.prototype,"thickness",2),__decorateClass([TempValidate53(POSITIVE_NUMBER14)],GradientBar.prototype,"preferredLength",2);var GradientLegendScale=class{constructor(t){this.axisTicks=t}};__decorateClass([ProxyProperty4("axisTicks.label")],GradientLegendScale.prototype,"label",2),__decorateClass([ProxyProperty4("axisTicks.interval")],GradientLegendScale.prototype,"interval",2),__decorateClass([ProxyProperty4("axisTicks.padding")],GradientLegendScale.prototype,"padding",2);var GradientLegend=class{constructor(t){this.ctx=t,this.id=createId4(this),this.legendGroup=new TranslatableGroup3({name:"legend",zIndex:ZIndexMap8.LEGEND}),this.gradientRect=new Rect2,this.arrow=new Marker({shape:"triangle"}),this.ticksGroup=new Group8({name:"legend-axis-group"}),this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new GradientBar,this.spacing=20,this.data=[],this.highlightManager=t.highlightManager,this.axisTicks=new AxisTicks,this.axisTicks.attachAxis(this.ticksGroup),this.scale=new GradientLegendScale(this.axisTicks),this.legendGroup.append([this.gradientRect,this.arrow,this.ticksGroup]),this.destroyFns.push(t.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange()),t.layoutManager.registerElement(LayoutElement5.Legend,e=>this.onStartLayout(e)),()=>this.legendGroup.remove())}isVertical(){return this.position==="right"||this.position==="left"}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.appendChild(this.legendGroup)}onStartLayout(t){const[e]=this.data;if(!this.enabled||!e?.enabled||e.legendType!=="gradient"){this.legendGroup.visible=!1;return}const{colorRange:i}=this.normalizeColorArrays(e);this.updateGradientRect(t.layoutBox,i);const o=this.updateAxis(e)??new BBox9(0,0,0,0),{left:s,top:a}=this.getMeasurements(t.layoutBox,o);this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=s,this.legendGroup.translationY=a}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const[o,s]=e,a=i.length;return e=i.map((r,n)=>n===0?o:n===a-1?s:o+(s-o)*n/(a-1)),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{gradientRect:i}=this,{preferredLength:o,thickness:s}=this.gradient;let a;this.isVertical()?(a=0,i.width=s,i.height=Math.min(t.height,o)):(a=90,i.width=Math.min(t.width,o),i.height=s),i.fill={type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:e.map((r,n)=>({stop:n/(e.length-1),color:r})),rotation:a}}updateAxis(t){const{axisTicks:e}=this,i=this.isVertical(),o=this.reverseOrder!==i;return e.position=this.position,e.translationX=i?this.gradient.thickness:0,e.translationY=i?0:this.gradient.thickness,e.scale.domain=o?t.colorDomain.slice().reverse():t.colorDomain,e.scale.range=i?[0,this.gradientRect.height]:[0,this.gradientRect.width],e.calculateLayout()}updateArrow(){const t=this.highlightManager.getActiveHighlight(),{arrow:e}=this;if(t?.colorValue==null){e.visible=!1;return}const{scale:i,label:o}=this.axisTicks,s=o.fontSize??0,a=i.convert(t.colorValue);let{x:r,y:n}=this.gradientRect,l=Math.PI;this.isVertical()?(r-=s/2,n+=a,l/=2):(r+=a,n-=s/2),e.visible=!0,e.fill=o.color,e.rotation=l,e.size=s,e.translationX=r,e.translationY=n}getMeasurements(t,e){let{x:i,y:o}=t,{width:s,height:a}=this.gradientRect;switch(this.isVertical()?s+=e.width+5:a+=e.height+5,this.position){case"left":o+=t.height/2-a/2,t.shrink(s+this.spacing,"left");break;case"right":i+=t.width-s,o+=t.height/2-a/2,t.shrink(s+this.spacing,"right");break;case"top":i+=t.width/2-s/2,t.shrink(a+this.spacing,"top");break;case"bottom":i+=t.width/2-s/2,o+=t.height-a,t.shrink(a+this.spacing,"bottom")}return{top:o,left:i}}onChartHoverChange(){this.enabled&&this.updateArrow()}};GradientLegend.className="GradientLegend",__decorateClass([TempValidate53(BOOLEAN26)],GradientLegend.prototype,"enabled",2),__decorateClass([TempValidate53(POSITION)],GradientLegend.prototype,"position",2),__decorateClass([TempValidate53(BOOLEAN26)],GradientLegend.prototype,"reverseOrder",2),__decorateClass([TempValidate53(OBJECT22)],GradientLegend.prototype,"gradient",2),__decorateClass([TempValidate53(POSITIVE_NUMBER14)],GradientLegend.prototype,"spacing",2);var GradientLegendModule={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient",moduleFactory:t=>new GradientLegend(t),themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}},interval:{minSpacing:15}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1},removable:"standalone-only"},import_ag_charts_community134=require("ag-charts-community"),import_ag_charts_core53=require("ag-charts-core");function injectWatermark(t,e){const i=t.addChild("canvas-overlay","watermark"),o=(0,import_ag_charts_core53.createElement)("span");o.innerText=e,i.addEventListener("animationend",()=>{t.removeChild("canvas-overlay","watermark"),t.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(o)}var import_ag_charts_community295=require("ag-charts-community"),import_ag_charts_community135=require("ag-charts-community"),import_ag_charts_core54=require("ag-charts-core"),{cartesianAxisLabelOptionsDefs,cartesianAxisOptionsDefs,cartesianAxisCrosshairOptions,continuousAxisOptions,commonAxisLabelOptionsDefs,commonAxisOptionsDefs,commonCrossLineOptionsDefs,commonCrossLineLabelOptionsDefs,numberFormatValidator}=import_ag_charts_community135._ModuleSupport,ordinalTimeAxisOptionsDefs={...cartesianAxisOptionsDefs,type:(0,import_ag_charts_core54.required)((0,import_ag_charts_core54.constant)("ordinal-time")),paddingInner:import_ag_charts_core54.ratio,paddingOuter:import_ag_charts_core54.ratio,groupPaddingInner:import_ag_charts_core54.ratio,label:{...cartesianAxisLabelOptionsDefs,format:import_ag_charts_core54.string},interval:continuousAxisOptions((0,import_ag_charts_core54.or)(import_ag_charts_core54.number,import_ag_charts_core54.date),!0).interval,crosshair:cartesianAxisCrosshairOptions(!0)},angleNumberAxisOptionsDefs={...commonAxisOptionsDefs,...continuousAxisOptions(import_ag_charts_core54.number),type:(0,import_ag_charts_core54.required)((0,import_ag_charts_core54.constant)("angle-number")),crossLines:(0,import_ag_charts_core54.arrayOfDefs)(commonCrossLineOptionsDefs),startAngle:import_ag_charts_core54.number,endAngle:import_ag_charts_core54.number,label:{...commonAxisLabelOptionsDefs,orientation:(0,import_ag_charts_core54.union)("fixed","parallel","perpendicular"),format:numberFormatValidator}},invalidOptionsFromIntegratedCharts={innerRadiusRatio:import_ag_charts_core54.ratio},angleCategoryAxisOptionsDefs={...commonAxisOptionsDefs,...invalidOptionsFromIntegratedCharts,type:(0,import_ag_charts_core54.required)((0,import_ag_charts_core54.constant)("angle-category")),shape:(0,import_ag_charts_core54.union)("polygon","circle"),crossLines:(0,import_ag_charts_core54.arrayOfDefs)(commonCrossLineOptionsDefs),startAngle:import_ag_charts_core54.number,endAngle:import_ag_charts_core54.number,paddingInner:import_ag_charts_core54.ratio,groupPaddingInner:import_ag_charts_core54.ratio,label:{...commonAxisLabelOptionsDefs,orientation:(0,import_ag_charts_core54.union)("fixed","parallel","perpendicular")}},radiusNumberAxisOptionsDefs={...commonAxisOptionsDefs,...continuousAxisOptions(import_ag_charts_core54.number),type:(0,import_ag_charts_core54.required)((0,import_ag_charts_core54.constant)("radius-number")),shape:(0,import_ag_charts_core54.union)("polygon","circle"),positionAngle:import_ag_charts_core54.number,innerRadiusRatio:import_ag_charts_core54.ratio,crossLines:(0,import_ag_charts_core54.arrayOfDefs)({...commonCrossLineOptionsDefs,label:{...commonCrossLineLabelOptionsDefs,positionAngle:import_ag_charts_core54.number}},"cross-line options"),title:{enabled:import_ag_charts_core54.boolean,text:import_ag_charts_core54.string,spacing:import_ag_charts_core54.positiveNumber,formatter:import_ag_charts_core54.callback,...import_ag_charts_core54.fontOptionsDef},label:{...commonAxisLabelOptionsDefs,format:numberFormatValidator}},radiusCategoryAxisOptionsDefs={...commonAxisOptionsDefs,type:(0,import_ag_charts_core54.required)((0,import_ag_charts_core54.constant)("radius-category")),positionAngle:import_ag_charts_core54.number,innerRadiusRatio:import_ag_charts_core54.ratio,paddingInner:import_ag_charts_core54.ratio,paddingOuter:import_ag_charts_core54.ratio,groupPaddingInner:import_ag_charts_core54.ratio,label:commonAxisLabelOptionsDefs,crossLines:(0,import_ag_charts_core54.arrayOfDefs)({...commonCrossLineOptionsDefs,label:{...commonCrossLineLabelOptionsDefs,positionAngle:import_ag_charts_core54.number}},"cross-line options"),title:{enabled:import_ag_charts_core54.boolean,text:import_ag_charts_core54.string,spacing:import_ag_charts_core54.positiveNumber,formatter:import_ag_charts_core54.callback,...import_ag_charts_core54.fontOptionsDef}},OrdinalTimeAxisModule2={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:ordinalTimeAxisOptionsDefs,create:t=>new OrdinalTimeAxis(t)},AngleNumberAxisModule2={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:angleNumberAxisOptionsDefs,create:t=>new AngleNumberAxis(t)},AngleCategoryAxisModule2={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:angleCategoryAxisOptionsDefs,create:t=>new AngleCategoryAxis(t)},RadiusNumberAxisModule2={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:radiusNumberAxisOptionsDefs,create:t=>new RadiusNumberAxis(t)},RadiusCategoryAxisModule2={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:radiusCategoryAxisOptionsDefs,create:t=>new RadiusCategoryAxis(t)},import_ag_charts_community137=require("ag-charts-community"),import_ag_charts_community136=require("ag-charts-community"),{Chart,TempValidate:TempValidate54,ARRAY:ARRAY6}=import_ag_charts_community136._ModuleSupport;function isFlowProportion(t){return t.type==="sankey"||t.type==="chord"}var FlowProportionChart=class extends Chart{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const t=this.getOptions();this.nodes!==t.nodes&&(this.nodes=t.nodes);const{nodes:e}=this;this.series.forEach(i=>{isFlowProportion(i)&&i.setChartNodes(e)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s,e.visible=this.series.some(a=>a.visible);for(const a of[e,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:s,paddedRect:s}})}};FlowProportionChart.className="FlowProportionChart",FlowProportionChart.type="flow-proportion",__decorateClass([TempValidate54(ARRAY6,{optional:!0})],FlowProportionChart.prototype,"nodes",2);var{isAgFlowProportionChartOptions,flowProportionChartOptionsDefs}=import_ag_charts_community137._ModuleSupport,FlowProportionChartModule={type:"chart",name:"flow-proportion",enterprise:!0,options:flowProportionChartOptionsDefs,detect:isAgFlowProportionChartOptions,create(t,e){return new FlowProportionChart(t,e)}},import_ag_charts_community139=require("ag-charts-community"),import_ag_charts_community138=require("ag-charts-community"),{Chart:Chart2}=import_ag_charts_community138._ModuleSupport,GaugeChart=class extends Chart2{getChartType(){return"gauge"}performLayout(t){const{seriesRoot:e,annotationRoot:i,series:o,seriesArea:s}=this,{layoutBox:a}=t,r=a.clone();a.shrink(s.padding.toJson()),this.seriesRect=r.clone().translate(r.x-a.x,r.y-a.y),this.animationRect=a,e.visible=o.some(n=>n.visible);for(const n of[e,i])n.translationX=Math.floor(a.x),n.translationY=Math.floor(a.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:r,paddedRect:a}})}getAriaLabel(){const t=[],e=this.getCaptionText();e.length!==0&&t.push(e);for(const o of this.series)t.push(o.getCaptionText());const i=t.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};GaugeChart.className="GaugeChart",GaugeChart.type="gauge";var{isAgGaugeChartOptions,gaugeChartOptionsDefs}=import_ag_charts_community139._ModuleSupport,GaugeChartModule={type:"chart",name:"gauge",enterprise:!0,options:gaugeChartOptionsDefs,detect:isAgGaugeChartOptions,create(t,e){return new GaugeChart(t,e)}},import_ag_charts_community141=require("ag-charts-community"),import_ag_charts_community140=require("ag-charts-community"),{Chart:Chart3}=import_ag_charts_community140._ModuleSupport,HierarchyChart=class extends Chart3{getChartType(){return"hierarchy"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s;for(const a of[e,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);e.visible=this.series[0].visible,e.setClipRect(s.clone()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:s,paddedRect:s}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};HierarchyChart.className="HierarchyChart",HierarchyChart.type="hierarchy";var{isAgHierarchyChartOptions,hierarchyChartOptionsDefs}=import_ag_charts_community141._ModuleSupport,HierarchyChartModule={type:"chart",name:"hierarchy",enterprise:!0,options:hierarchyChartOptionsDefs,detect:isAgHierarchyChartOptions,create(t,e){return new HierarchyChart(t,e)}},import_ag_charts_community143=require("ag-charts-community"),import_ag_charts_community142=require("ag-charts-community"),{Chart:Chart4}=import_ag_charts_community142._ModuleSupport,StandaloneChart=class extends Chart4{getChartType(){return"standalone"}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s;for(const a of[e,i])a.translationX=Math.floor(o.x),a.translationY=Math.floor(o.y);e.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:s,paddedRect:o}})}getAriaLabel(){const t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};StandaloneChart.className="StandaloneChart",StandaloneChart.type="standalone";var{isAgStandaloneChartOptions,standaloneChartOptionsDefs}=import_ag_charts_community143._ModuleSupport,StandaloneChartModule={type:"chart",name:"standalone",enterprise:!0,options:standaloneChartOptionsDefs,detect:isAgStandaloneChartOptions,create(t,e){return new StandaloneChart(t,e)}},import_ag_charts_community146=require("ag-charts-community"),import_ag_charts_community145=require("ag-charts-community"),import_ag_charts_community144=require("ag-charts-community"),import_ag_charts_core55=require("ag-charts-core");function isValidCoordinate(t){return Array.isArray(t)&&t.length>=2&&t.every(import_ag_charts_core55.isFiniteNumber)}function isValidCoordinates(t){return Array.isArray(t)&&t.length>=2&&t.every(isValidCoordinate)}var delta=.001;function hasSameStartEndPoint(t){return Math.abs(t[0][0]-t[t.length-1][0])<delta&&Math.abs(t[0][1]-t[t.length-1][1])<delta}function isValidPolygon(t){return Array.isArray(t)&&t.every(isValidCoordinates)&&t.every(hasSameStartEndPoint)}function isValidGeometry(t){if(t===null)return!0;if(typeof t!="object"||t.type==null)return!1;const{type:e,coordinates:i}=t;switch(e){case"GeometryCollection":return Array.isArray(t.geometries)&&t.geometries.every(isValidGeometry);case"MultiPolygon":return Array.isArray(i)&&i.every(isValidPolygon);case"Polygon":return isValidPolygon(i);case"MultiLineString":return Array.isArray(i)&&i.every(isValidCoordinates);case"LineString":return isValidCoordinates(i);case"MultiPoint":return isValidCoordinates(i);case"Point":return isValidCoordinate(i)}}function isValidFeature(t){return t!==null&&typeof t=="object"&&t.type==="Feature"&&isValidGeometry(t.geometry)}function isValidFeatureCollection(t){return t!==null&&typeof t=="object"&&t.type==="FeatureCollection"&&Array.isArray(t.features)&&t.features.every(isValidFeature)}var GEOJSON_OBJECT=import_ag_charts_community144._ModuleSupport.predicateWithMessage(isValidFeatureCollection,"a GeoJSON object"),{Chart:Chart5,MercatorScale,NumberAxis,TempValidate:TempValidate55}=import_ag_charts_community145._ModuleSupport;function isTopologySeries(t){return t.type==="map-shape"||t.type==="map-line"||t.type==="map-marker"||t.type==="map-shape-background"||t.type==="map-line-background"}var TopologyChart=class extends Chart5{constructor(t,e){super(t,e),this.xAxis=new NumberAxis(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new NumberAxis(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const t=this.getOptions();this.topology!==t.topology&&(this.topology=t.topology);const{topology:e}=this;this.series.forEach(i=>{isTopologySeries(i)&&i.setChartTopology(e)})}performLayout(t){const{seriesRoot:e,annotationRoot:i}=this,{layoutBox:o}=t;o.shrink(this.seriesArea.padding.toJson());const s=o.clone();this.seriesRect=s,this.animationRect=s;const a=this.series.filter(isTopologySeries),r=a.reduce((c,h)=>{if(!h.visible)return c;const u=h.topologyBounds;return u==null?c:c==null?u:(c.merge(u),c)},void 0);let n;if(r!=null){const{lon0:c,lat0:h,lon1:u,lat1:p}=r,d=[[c,h],[u,p]],g=MercatorScale.bounds(d),{width:f,height:y}=s,m=Math.min(f/g.width,y/g.height),b=g.width*m,x=g.height*m,S=(f-b)/2,v=(y-x)/2,T=S,D=v,k=S+b,A=v+x,M=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),_=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),O=(k-T)/(M.max-M.min),C=T-O*M.min,I=(A-D)/(1-_.min-(1-_.max)),w=D-I*(1-_.max);n=new MercatorScale(d,[[C,w],[C+O,w+I]])}a.forEach(c=>{c.scale=n});const l=this.series.some(c=>c.visible);e.visible=l;for(const c of[e,i])c.translationX=Math.floor(s.x),c.translationY=Math.floor(s.y),c.setClipRect(s.clone());this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:l,rect:s,paddedRect:s}})}};TopologyChart.className="TopologyChart",TopologyChart.type="topology",__decorateClass([TempValidate55(GEOJSON_OBJECT,{optional:!0})],TopologyChart.prototype,"topology",2);var{isAgTopologyChartOptions,topologyChartOptionsDefs}=import_ag_charts_community146._ModuleSupport,TopologyChartModule={type:"chart",name:"topology",enterprise:!0,options:topologyChartOptionsDefs,detect:isAgTopologyChartOptions,create(t,e){return new TopologyChart(t,e)}},import_ag_charts_community147=require("ag-charts-community"),import_ag_charts_core56=require("ag-charts-core"),{toolbarButtonOptionsDefs}=import_ag_charts_community147._ModuleSupport,annotationOptionsDef={enabled:import_ag_charts_core56.boolean,axesButtons:{enabled:import_ag_charts_core56.boolean,axes:(0,import_ag_charts_core56.union)("x","y","xy")},toolbar:{enabled:import_ag_charts_core56.boolean,padding:import_ag_charts_core56.positiveNumber,buttons:(0,import_ag_charts_core56.arrayOfDefs)({...toolbarButtonOptionsDefs,value:(0,import_ag_charts_core56.union)("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:import_ag_charts_core56.boolean,buttons:(0,import_ag_charts_core56.arrayOf)((0,import_ag_charts_core56.or)((0,import_ag_charts_core56.optionsDefs)({...toolbarButtonOptionsDefs,value:(0,import_ag_charts_core56.union)("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings")}),(0,import_ag_charts_core56.optionsDefs)({...toolbarButtonOptionsDefs,value:(0,import_ag_charts_core56.union)("lock"),checkedOverrides:toolbarButtonOptionsDefs})))}};annotationOptionsDef.data=import_ag_charts_core56.array,annotationOptionsDef.xKey=import_ag_charts_core56.string,annotationOptionsDef.volumeKey=import_ag_charts_core56.string,annotationOptionsDef.snap=import_ag_charts_core56.boolean;var serializableDate=(0,import_ag_charts_core56.optionsDefs)({__type:(0,import_ag_charts_core56.required)((0,import_ag_charts_core56.constant)("date")),value:(0,import_ag_charts_core56.or)(import_ag_charts_core56.string,import_ag_charts_core56.number)},"a serializable date object"),xValue=(0,import_ag_charts_core56.or)(import_ag_charts_core56.string,import_ag_charts_core56.number,serializableDate),annotationValue=(0,import_ag_charts_core56.or)(xValue,(0,import_ag_charts_core56.optionsDefs)({value:xValue,groupPercentage:import_ag_charts_core56.number})),annotationAxisLabelOptionsDef={enabled:import_ag_charts_core56.boolean,cornerRadius:import_ag_charts_core56.positiveNumber,formatter:import_ag_charts_core56.callback,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef,...import_ag_charts_core56.lineDashOptionsDef},lineAnnotationTextOptionsDef={label:import_ag_charts_core56.string,position:(0,import_ag_charts_core56.union)("top","center","bottom"),alignment:(0,import_ag_charts_core56.union)("left","center","right"),...import_ag_charts_core56.fontOptionsDef},channelAnnotationTextOptionsDef={label:import_ag_charts_core56.string,position:(0,import_ag_charts_core56.union)("top","inside","bottom"),alignment:(0,import_ag_charts_core56.union)("left","center","right"),...import_ag_charts_core56.fontOptionsDef},annotationHandleOptionsDef={...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef,...import_ag_charts_core56.lineDashOptionsDef},annotationPointOptionsDef={x:annotationValue,y:import_ag_charts_core56.number},annotationLineOptionsDef={lineStyle:(0,import_ag_charts_core56.union)("solid","dashed","dotted"),...import_ag_charts_core56.lineDashOptionsDef},fibonacciAnnotationStylesOptionsDef={visible:import_ag_charts_core56.boolean,extendStart:import_ag_charts_core56.boolean,extendEnd:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,label:import_ag_charts_core56.fontOptionsDef,showFill:import_ag_charts_core56.boolean,isMultiColor:import_ag_charts_core56.boolean,strokes:(0,import_ag_charts_core56.arrayOf)(import_ag_charts_core56.color),rangeStroke:import_ag_charts_core56.color,bands:(0,import_ag_charts_core56.union)(4,6,10),...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},annotationInitialStateOptionsDef=(0,import_ag_charts_core56.typeUnion)({line:{visible:import_ag_charts_core56.boolean,extendStart:import_ag_charts_core56.boolean,extendEnd:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"horizontal-line":{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,value:annotationValue,axisLabel:annotationAxisLabelOptionsDef,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"vertical-line":{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,value:annotationValue,axisLabel:annotationAxisLabelOptionsDef,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"disjoint-channel":{visible:import_ag_charts_core56.boolean,extendStart:import_ag_charts_core56.boolean,extendEnd:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,startHeight:import_ag_charts_core56.positiveNumber,endHeight:import_ag_charts_core56.positiveNumber,text:channelAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,background:import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"parallel-channel":{visible:import_ag_charts_core56.boolean,extendStart:import_ag_charts_core56.boolean,extendEnd:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,height:import_ag_charts_core56.positiveNumber,text:channelAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,background:import_ag_charts_core56.fillOptionsDef,middle:{visible:import_ag_charts_core56.boolean,...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"fibonacci-retracement":{reverse:import_ag_charts_core56.boolean,start:annotationPointOptionsDef,end:annotationPointOptionsDef,...fibonacciAnnotationStylesOptionsDef},"fibonacci-retracement-trend-based":{reverse:import_ag_charts_core56.boolean,start:annotationPointOptionsDef,end:annotationPointOptionsDef,endRetracement:annotationPointOptionsDef,...fibonacciAnnotationStylesOptionsDef},callout:{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:import_ag_charts_core56.string,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef},comment:{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:import_ag_charts_core56.string,handle:annotationHandleOptionsDef,...annotationPointOptionsDef,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef},note:{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:import_ag_charts_core56.string,handle:annotationHandleOptionsDef,background:{...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef},...annotationPointOptionsDef,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef},text:{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:import_ag_charts_core56.string,handle:annotationHandleOptionsDef,...annotationPointOptionsDef,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef},arrow:{visible:import_ag_charts_core56.boolean,extendStart:import_ag_charts_core56.boolean,extendEnd:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"arrow-up":{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,handle:annotationHandleOptionsDef,...annotationPointOptionsDef,...import_ag_charts_core56.fillOptionsDef},"arrow-down":{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,handle:annotationHandleOptionsDef,...annotationPointOptionsDef,...import_ag_charts_core56.fillOptionsDef},"date-range":{visible:import_ag_charts_core56.boolean,extendAbove:import_ag_charts_core56.boolean,extendBelow:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,statistics:{divider:import_ag_charts_core56.strokeOptionsDef,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef},...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"price-range":{visible:import_ag_charts_core56.boolean,extendLeft:import_ag_charts_core56.boolean,extendRight:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,statistics:{divider:import_ag_charts_core56.strokeOptionsDef,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef},...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef},"date-price-range":{visible:import_ag_charts_core56.boolean,locked:import_ag_charts_core56.boolean,text:lineAnnotationTextOptionsDef,handle:annotationHandleOptionsDef,start:annotationPointOptionsDef,end:annotationPointOptionsDef,statistics:{divider:import_ag_charts_core56.strokeOptionsDef,...import_ag_charts_core56.fontOptionsDef,...import_ag_charts_core56.fillOptionsDef,...import_ag_charts_core56.strokeOptionsDef},...import_ag_charts_core56.strokeOptionsDef,...annotationLineOptionsDef}}),initialStateOptionsDef={chartType:(0,import_ag_charts_core56.union)("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:(0,import_ag_charts_core56.arrayOf)(annotationInitialStateOptionsDef),legend:(0,import_ag_charts_core56.arrayOfDefs)({visible:import_ag_charts_core56.boolean,seriesId:import_ag_charts_core56.string,itemId:import_ag_charts_core56.string,legendItemName:import_ag_charts_core56.string},"legend state array"),zoom:{rangeX:{start:(0,import_ag_charts_core56.or)(import_ag_charts_core56.number,serializableDate),end:(0,import_ag_charts_core56.or)(import_ag_charts_core56.number,serializableDate)},rangeY:{start:(0,import_ag_charts_core56.or)(import_ag_charts_core56.number,serializableDate),end:(0,import_ag_charts_core56.or)(import_ag_charts_core56.number,serializableDate)},ratioX:{start:import_ag_charts_core56.ratio,end:import_ag_charts_core56.ratio},ratioY:{start:import_ag_charts_core56.ratio,end:import_ag_charts_core56.ratio},autoScaledAxes:(0,import_ag_charts_core56.arrayOf)((0,import_ag_charts_core56.constant)("y"))}},import_ag_charts_community190=require("ag-charts-community"),import_ag_charts_core68=require("ag-charts-core"),import_ag_charts_community153=require("ag-charts-community"),import_ag_charts_community150=require("ag-charts-community");function prepareBoxPlotFromTo(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function resetBoxPlotSelectionsScalingCenterFn(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}var import_ag_charts_community148=require("ag-charts-community"),import_ag_charts_core57=require("ag-charts-core"),{ScalableGroup,Rect:Rect3,Line:Line4,BBox:BBox10,Selection:Selection3,applyShapeFillBBox}=import_ag_charts_community148._ModuleSupport,BoxPlotGroup=class extends ScalableGroup{constructor(){super(),this.append([new Rect3({tag:0}),new Rect3({tag:2}),new Rect3({tag:1}),new Line4({tag:3}),new Line4({tag:3}),new Line4({tag:4}),new Line4({tag:4})])}updateDatumStyles(t,e,i,o,s){const{bandwidth:a,scaledValues:{xValue:r,medianValue:n}}=t;let{minValue:l,q1Value:c,q3Value:h,maxValue:u}=t.scaledValues;(i&&!o||!i&&o)&&([u,h,c,l]=[l,c,h,u]);const p=(E,F,V,G)=>i?{y:E,x:F,width:G,height:V}:{x:E,y:F,width:V,height:G},d=(E,F,V)=>i?{y1:E,y2:F,x:V}:{x1:E,x2:F,y:V},g=(E,F,V)=>i?{x1:F,x2:V,y:E}:{x:E,y1:F,y2:V},f=(E,F,V,G)=>({x:E,y:F,width:V,height:G}=p(E,F,V,G),new BBox10(E,F,V,G)),{fill:y,fillOpacity:m,stroke:b,strokeWidth:x,strokeOpacity:S,lineDash:v,lineDashOffset:T,cornerRadius:D,cap:k,whisker:A}=e,M=Selection3.select(this,Rect3),[_]=M.selectByTag(0),[O]=M.selectByTag(2),[C]=M.selectByTag(1),I=M.selectByTag(3),w=M.selectByTag(4);A.strokeWidth>a&&(A.strokeWidth=a);const L=p(c,r,h-c,a);O.setProperties(L),_.setProperties(L),_.setProperties({cornerRadius:D});const P=Math.max(Math.round(n-x/2),c+x),z=Math.min(Math.round(n+x/2),h-x);C.setProperties(L),C.setProperties({visible:P<z,cornerRadius:D,clipBBox:f(P,r+x,z-P,Math.max(0,a-x*2))});const R=Math.floor(r+a*(1-k.lengthRatio)/2),B=Math.ceil(r+a*(1+k.lengthRatio)/2);w[0].setProperties(g(l,R,B)),w[1].setProperties(g(u,R,B)),I[0].setProperties(d(Math.round(l+A.strokeWidth/2),c,Math.floor(r+a/2))),I[1].setProperties(d(h,Math.round(u-A.strokeWidth/2),Math.floor(r+a/2))),applyShapeFillBBox(_,y,s),_.setProperties({fill:y,fillOpacity:m,strokeWidth:x*2,strokeOpacity:0}),C.setProperties({fill:b,fillOpacity:S,strokeWidth:0});for(const E of[...I,...w])E.setProperties(A);O.setProperties({stroke:b,strokeWidth:x,strokeOpacity:S,lineDash:v,lineDashOffset:T,cornerRadius:D,fillOpacity:0})}distanceSquared(t,e){const i=Selection3.selectByClass(this,Rect3,Line4);return import_ag_charts_community148._ModuleSupport.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(import_ag_charts_core57.Logger.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}},import_ag_charts_community149=require("ag-charts-community"),{BaseProperties:BaseProperties19,FillGradientDefaults,FillPatternDefaults,AbstractBarSeriesProperties,SeriesTooltip,TempValidate:TempValidate56,COLOR_STRING:COLOR_STRING9,FUNCTION:FUNCTION6,LINE_DASH:LINE_DASH5,OBJECT:OBJECT23,POSITIVE_NUMBER:POSITIVE_NUMBER15,RATIO:RATIO12,STRING:STRING24,mergeDefaults:mergeDefaults3,COLOR_GRADIENT,COLOR_PATTERN,OR:OR5}=import_ag_charts_community149._ModuleSupport,BoxPlotSeriesCap=class extends BaseProperties19{constructor(){super(...arguments),this.lengthRatio=.5}};__decorateClass([TempValidate56(RATIO12)],BoxPlotSeriesCap.prototype,"lengthRatio",2);var BoxPlotSeriesWhisker=class extends BaseProperties19{};__decorateClass([TempValidate56(COLOR_STRING9,{optional:!0})],BoxPlotSeriesWhisker.prototype,"stroke",2),__decorateClass([TempValidate56(POSITIVE_NUMBER15)],BoxPlotSeriesWhisker.prototype,"strokeWidth",2),__decorateClass([TempValidate56(RATIO12)],BoxPlotSeriesWhisker.prototype,"strokeOpacity",2),__decorateClass([TempValidate56(LINE_DASH5,{optional:!0})],BoxPlotSeriesWhisker.prototype,"lineDash",2),__decorateClass([TempValidate56(POSITIVE_NUMBER15)],BoxPlotSeriesWhisker.prototype,"lineDashOffset",2);var BoxPlotSeriesProperties=class extends AbstractBarSeriesProperties{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new FillGradientDefaults,this.fillPatternDefaults=new FillPatternDefaults,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new BoxPlotSeriesCap,this.whisker=new BoxPlotSeriesWhisker,this.tooltip=new SeriesTooltip}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}=this,a=super.toJson();return a.whisker=mergeDefaults3(a.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}),a}};__decorateClass([TempValidate56(STRING24)],BoxPlotSeriesProperties.prototype,"xKey",2),__decorateClass([TempValidate56(STRING24)],BoxPlotSeriesProperties.prototype,"minKey",2),__decorateClass([TempValidate56(STRING24)],BoxPlotSeriesProperties.prototype,"q1Key",2),__decorateClass([TempValidate56(STRING24)],BoxPlotSeriesProperties.prototype,"medianKey",2),__decorateClass([TempValidate56(STRING24)],BoxPlotSeriesProperties.prototype,"q3Key",2),__decorateClass([TempValidate56(STRING24)],BoxPlotSeriesProperties.prototype,"maxKey",2),__decorateClass([TempValidate56(STRING24,{optional:!0})],BoxPlotSeriesProperties.prototype,"xName",2),__decorateClass([TempValidate56(STRING24,{optional:!0})],BoxPlotSeriesProperties.prototype,"yName",2),__decorateClass([TempValidate56(STRING24,{optional:!0})],BoxPlotSeriesProperties.prototype,"minName",2),__decorateClass([TempValidate56(STRING24,{optional:!0})],BoxPlotSeriesProperties.prototype,"q1Name",2),__decorateClass([TempValidate56(STRING24,{optional:!0})],BoxPlotSeriesProperties.prototype,"medianName",2),__decorateClass([TempValidate56(STRING24,{optional:!0})],BoxPlotSeriesProperties.prototype,"q3Name",2),__decorateClass([TempValidate56(STRING24,{optional:!0})],BoxPlotSeriesProperties.prototype,"maxName",2),__decorateClass([TempValidate56(OR5(COLOR_GRADIENT,COLOR_PATTERN,COLOR_STRING9))],BoxPlotSeriesProperties.prototype,"fill",2),__decorateClass([TempValidate56(OBJECT23)],BoxPlotSeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate56(OBJECT23)],BoxPlotSeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate56(RATIO12)],BoxPlotSeriesProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate56(COLOR_STRING9)],BoxPlotSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate56(POSITIVE_NUMBER15)],BoxPlotSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate56(RATIO12)],BoxPlotSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate56(LINE_DASH5)],BoxPlotSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate56(POSITIVE_NUMBER15)],BoxPlotSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate56(POSITIVE_NUMBER15)],BoxPlotSeriesProperties.prototype,"cornerRadius",2),__decorateClass([TempValidate56(FUNCTION6,{optional:!0})],BoxPlotSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate56(OBJECT23)],BoxPlotSeriesProperties.prototype,"cap",2),__decorateClass([TempValidate56(OBJECT23)],BoxPlotSeriesProperties.prototype,"whisker",2),__decorateClass([TempValidate56(OBJECT23)],BoxPlotSeriesProperties.prototype,"tooltip",2);var{extractDecoratedProperties,fixNumericExtent:fixNumericExtent2,keyProperty:keyProperty2,mergeDefaults:mergeDefaults4,SeriesNodePickMode,SMALLEST_KEY_INTERVAL,valueProperty:valueProperty4,diff,animationValidation,computeBarFocusBounds,createDatumId,ContinuousScale:ContinuousScale4,ChartAxisDirection:ChartAxisDirection17,motion,isGradientFill,getShapeStyle}=import_ag_charts_community150._ModuleSupport,BoxPlotSeriesNodeEvent=class extends import_ag_charts_community150._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.minKey=o.properties.minKey,this.q1Key=o.properties.q1Key,this.medianKey=o.properties.medianKey,this.q3Key=o.properties.q3Key,this.maxKey=o.properties.maxKey}},BoxPlotSeries=class extends import_ag_charts_community150._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[SeriesNodePickMode.NEAREST_NODE,SeriesNodePickMode.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new BoxPlotSeriesProperties,this.NodeEvent=BoxPlotSeriesNodeEvent}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,minKey:i,q1Key:o,medianKey:s,q3Key:a,maxKey:r}=this.properties,n=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:h,xScaleType:u,yScaleType:p}=this.getScaleInformation({xScale:l,yScale:c}),d=[];n&&this.processedData&&d.push(diff(this.id,this.processedData)),n&&d.push(animationValidation());const{processedData:g}=await this.requestDataModel(t,this.data,{props:[keyProperty2(e,u,{id:"xValue"}),valueProperty4(i,p,{id:"minValue"}),valueProperty4(o,p,{id:"q1Value"}),valueProperty4(s,p,{id:"medianValue"}),valueProperty4(a,p,{id:"q3Value"}),valueProperty4(r,p,{id:"maxValue"}),...h?[SMALLEST_KEY_INTERVAL]:[],...d]});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];if(t!==this.getBarDirection()){const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[s];return a.type==="key"&&a.valueType==="category"?r:this.padBandExtent(r)}const o=this.domainForClippedRange(ChartAxisDirection17.Y,["minValue","maxValue"],"xValue",!0);return fixNumericExtent2(o)}getSeriesRange(t,e){return this.domainForVisibleRange(ChartAxisDirection17.Y,["maxValue","minValue"],"xValue",e,!0)}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&o&&s))return;const{xKey:a,fill:r,fillOpacity:n,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:p,cap:d,whisker:g}=this.properties,f=[],y=e.resolveKeysById(this,"xValue",i),m=e.resolveColumnById(this,"minValue",i),b=e.resolveColumnById(this,"q1Value",i),x=e.resolveColumnById(this,"medianValue",i),S=e.resolveColumnById(this,"q3Value",i),v=e.resolveColumnById(this,"maxValue",i),{barWidth:T,groupIndex:D}=this.updateGroupScale(o),k=ContinuousScale4.is(o.scale)?T*-.5:0,{groupScale:A}=this,M=this.isVertical(),_={itemId:a,nodeData:f,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&(i.dataSources.get(this.id)??[]).forEach((C,I)=>{const w=y[I];if(w==null)return;const L=m[I],P=b[I],z=x[I],R=S[I],B=v[I];if([L,P,z,R,B].some(j=>typeof j!="number")||L>P||P>z||z>R||R>B)return;const E={xValue:Math.round(o.scale.convert(w)),minValue:Math.round(s.scale.convert(L)),q1Value:Math.round(s.scale.convert(P)),medianValue:Math.round(s.scale.convert(z)),q3Value:Math.round(s.scale.convert(R)),maxValue:Math.round(s.scale.convert(B))};E.xValue+=Math.round(A.convert(String(D)))+k;const F=Math.round(T),V=Math.abs(E.q3Value-E.q1Value),G=E.xValue+F/2,W=Math.min(E.q3Value,E.q1Value)+V/2,H={x:M?G:W,y:M?W:G};let q;M?q={x:H.x-F/2,y:E.minValue,width:F,height:E.maxValue-E.minValue}:q={x:E.minValue,y:H.y-F/2,width:E.maxValue-E.minValue,height:F},f.push({series:this,itemId:w,datum:C,datumIndex:I,xKey:a,bandwidth:F,scaledValues:E,cap:d,whisker:g,fill:r,fillOpacity:n,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:p,midPoint:H,focusRect:q})}),_}legendItemSymbol(){const{fill:t,fillOpacity:e,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l}=this.properties;return{marker:getShapeStyle({fill:t,fillOpacity:e,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r},n,l)}}getLegendData(t){const{id:e,ctx:{legendManager:i},visible:o}=this,{xKey:s,yName:a,showInLegend:r,legendItemName:n}=this.properties;return!s||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:o&&i.getItemEnabled({seriesId:e,itemId:e}),label:{text:n??a??e},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!r}]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:r,yName:n,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:p,q3Name:d,minKey:g,minName:f,maxKey:y,maxName:m,legendItemName:b,tooltip:x}=s,S=this.getCategoryAxis(),v=this.getValueAxis();if(!i||!o||!S||!v)return;const T=o.dataSources.get(this.id)?.[t],D=i.resolveKeysById(this,"xValue",o)[t],k=i.resolveColumnById(this,"minValue",o)[t],A=i.resolveColumnById(this,"q1Value",o)[t],M=i.resolveColumnById(this,"medianValue",o)[t],_=i.resolveColumnById(this,"q3Value",o)[t],O=i.resolveColumnById(this,"maxValue",o)[t];if(D==null)return;const C=this.getItemBaseStyle(!1);return Object.assign(C,this.getItemStyleOverrides(String(t),T,C,!1)),x.formatTooltip(this.properties,{heading:S.formatDatum(D),title:b??n,symbol:this.legendItemSymbol(),data:[{label:f,fallbackLabel:g,value:v.formatDatum(k)},{label:u,fallbackLabel:h,value:v.formatDatum(A)},{label:c,fallbackLabel:l,value:v.formatDatum(M)},{label:d,fallbackLabel:p,value:v.formatDatum(_)},{label:m,fallbackLabel:y,value:v.formatDatum(O)}]},{seriesId:e,datum:T,title:n,xKey:a,xName:r,yName:n,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:p,q3Name:d,minKey:g,minName:f,maxKey:y,maxName:m,...C})}animateEmptyUpdateReady({datumSelection:t}){const e=this.isVertical(),{from:i,to:o}=prepareBoxPlotFromTo(e);motion.resetMotion([t],resetBoxPlotSelectionsScalingCenterFn(e)),motion.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],i,o,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,cap:o,whisker:s,fillGradientDefaults:a,fillPatternDefaults:r}=e,n=t?e.highlightStyle.item:void 0,l=this.getStrokeWidth(e.strokeWidth);return getShapeStyle({fill:n?.fill??e.fill,fillOpacity:n?.fillOpacity??e.fillOpacity,stroke:n?.stroke??e.stroke,strokeWidth:n?.strokeWidth??l,strokeOpacity:n?.strokeOpacity??e.strokeOpacity,lineDash:n?.lineDash??e.lineDash??[],lineDashOffset:n?.lineDashOffset??e.lineDashOffset,cornerRadius:i,cap:o,whisker:s},a,r)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{xKey:r,minKey:n,q1Key:l,medianKey:c,q3Key:h,maxKey:u,fillGradientDefaults:p,fillPatternDefaults:d,itemStyler:g}=a;if(g==null)return;const f=this.cachedDatumCallback(createDatumId(t,o?"highlight":"node"),()=>this.callWithContext(g,{seriesId:s,datum:e,xKey:r,minKey:n,q1Key:l,medianKey:c,q3Key:h,maxKey:u,highlighted:o,...i}));return getShapeStyle(f,p,d)}updateDatumNodes({datumSelection:t,isHighlight:e}){const i=this.isVertical(),o=this.getValueAxis()?.isReversed(),{highlightStyle:s}=this.properties;t.each((a,r)=>{let n=this.getFormattedStyles(r,e?"highlight":"node");e&&(n=mergeDefaults4(s.item,n));const{stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:p}=n;n.whisker=mergeDefaults4(n.whisker,{stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:u,lineDashOffset:p});const d=this.getShapeFillBBox();a.updateDatumStyles(r,n,i,o,d)})}updateLabelNodes(){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}nodeFactory(){return new BoxPlotGroup}getFormattedStyles(t,e){const{id:i,properties:o}=this,{xKey:s,minKey:a,q1Key:r,medianKey:n,q3Key:l,maxKey:c,itemStyler:h,cornerRadius:u,fillGradientDefaults:p,fillPatternDefaults:d}=o,{datum:g,stroke:f,strokeWidth:y,strokeOpacity:m,lineDash:b,lineDashOffset:x,cap:S,whisker:v}=t;let T,D=1;isGradientFill(t.fill)?T=t.fill:(T=t.fill,D=o.fillOpacity);let k=getShapeStyle({fill:T,fillOpacity:D,stroke:f,strokeWidth:y,strokeOpacity:m,lineDash:b,lineDashOffset:x,cornerRadius:u,cap:extractDecoratedProperties(S),whisker:extractDecoratedProperties(v)},p,d);if(h){const A=this.cachedDatumCallback(createDatumId(g.index,e),()=>this.callWithContext(h,{datum:g,seriesId:i,highlighted:e==="highlight",...k,xKey:s,minKey:a,q1Key:r,medianKey:n,q3Key:l,maxKey:c}));A&&(k=getShapeStyle(mergeDefaults4(A,k),p,d))}return k}computeFocusBounds({datumIndex:t}){return computeBarFocusBounds(this,this.contextNodeData?.nodeData[t].focusRect)}};BoxPlotSeries.className="BoxPlotSeries",BoxPlotSeries.type="box-plot";var import_ag_charts_community151=require("ag-charts-community"),import_ag_charts_core58=require("ag-charts-core"),{commonSeriesOptionsDefs,tooltipOptionsDefs}=import_ag_charts_community151._ModuleSupport,boxPlotSeriesOptionsDef={type:(0,import_ag_charts_core58.required)((0,import_ag_charts_core58.constant)("box-plot")),xKey:(0,import_ag_charts_core58.required)(import_ag_charts_core58.string),minKey:(0,import_ag_charts_core58.required)(import_ag_charts_core58.string),q1Key:(0,import_ag_charts_core58.required)(import_ag_charts_core58.string),medianKey:(0,import_ag_charts_core58.required)(import_ag_charts_core58.string),q3Key:(0,import_ag_charts_core58.required)(import_ag_charts_core58.string),maxKey:(0,import_ag_charts_core58.required)(import_ag_charts_core58.string),xName:import_ag_charts_core58.string,yName:import_ag_charts_core58.string,minName:import_ag_charts_core58.string,q1Name:import_ag_charts_core58.string,medianName:import_ag_charts_core58.string,q3Name:import_ag_charts_core58.string,maxName:import_ag_charts_core58.string,direction:(0,import_ag_charts_core58.union)("horizontal","vertical"),grouped:import_ag_charts_core58.boolean,legendItemName:import_ag_charts_core58.string,showInMiniChart:import_ag_charts_core58.boolean,cornerRadius:import_ag_charts_core58.positiveNumber,itemStyler:import_ag_charts_core58.callback,whisker:{...import_ag_charts_core58.strokeOptionsDef,...import_ag_charts_core58.lineDashOptionsDef},cap:{lengthRatio:import_ag_charts_core58.ratio},tooltip:tooltipOptionsDefs,...commonSeriesOptionsDefs,...import_ag_charts_core58.fillOptionsDef,...import_ag_charts_core58.strokeOptionsDef,...import_ag_charts_core58.lineDashOptionsDef},import_ag_charts_community152=require("ag-charts-community"),{CARTESIAN_AXIS_TYPE}=import_ag_charts_community152._ModuleSupport.ThemeConstants,BOX_PLOT_SERIES_THEME={series:{direction:"vertical",fill:{$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]}]},{$palette:"fill"},{$mix:[import_ag_charts_community152._ModuleSupport.SAFE_FILL_OPERATION,{$ref:"backgroundColor"},.7]}]},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community152._ModuleSupport.FILL_PATTERN_DEFAULTS,strokeWidth:2},axes:{[CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},BoxPlotModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:t=>new BoxPlotSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:import_ag_charts_community153._ModuleSupport.DIRECTION_SWAP_AXES,themeTemplate:BOX_PLOT_SERIES_THEME,groupable:!0},BoxPlotSeriesModule={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:boxPlotSeriesOptionsDef,create:t=>new BoxPlotSeries(t)},import_ag_charts_community163=require("ag-charts-community"),import_ag_charts_community160=require("ag-charts-community"),import_ag_charts_community155=require("ag-charts-community"),import_ag_charts_core59=require("ag-charts-core"),import_ag_charts_community154=require("ag-charts-community"),{findMinMax:findMinMax2}=import_ag_charts_community154._ModuleSupport,X_MIN=0,X_MAX=1,Y_MIN=2,Y_MAX=3,SPAN=4;function maxRangeFittingPoints(t,e=1){let i=Math.ceil(Math.log2(t.length/e))-1;return i=Math.min(Math.max(i,0),16),2**i|0}function aggregationDomain(t){return findMinMax2(t.map(e=>Number(e)))}function xRatioForDatumIndex(t,e,i){return(t.valueOf()-e)/(i-e)}function aggregationIndexForXRatio(t,e){return Math.min(Math.floor(t*e),e-1)*SPAN|0}function createAggregationIndices(t,e,i,o,s,a){const r=new Int32Array(a*SPAN).fill(-1),n=new Float64Array(a*SPAN).fill(NaN);for(let l=0;l<t.length;l+=1){const c=t[l],h=e[l],u=i[l];if(c==null||h==null||u==null)continue;const p=xRatioForDatumIndex(c,o,s),d=h.valueOf(),g=u.valueOf(),f=aggregationIndexForXRatio(p,a),y=r[f+X_MIN]===-1;(y||p<n[f+X_MIN])&&(r[f+X_MIN]=l,n[f+X_MIN]=p),(y||p>n[f+X_MAX])&&(r[f+X_MAX]=l,n[f+X_MAX]=p),(y||g<n[f+Y_MIN])&&(r[f+Y_MIN]=l,n[f+Y_MIN]=g),(y||d>n[f+Y_MAX])&&(r[f+Y_MAX]=l,n[f+Y_MAX]=d)}return{indexData:r,valueData:n}}function compactAggregationIndices(t,e,i,{inPlace:o=!1}={}){const s=i/2|0,a=o?t:new Int32Array(s*SPAN),r=o?e:new Float64Array(s*SPAN);for(let n=0;n<s;n+=1){const l=n*SPAN|0,c=l*2|0,h=c+SPAN|0,u=t[h+X_MIN]===-1,p=u||e[c+X_MIN]<e[h+X_MIN]?c:h;a[l+X_MIN]=t[p+X_MIN],r[l+X_MIN]=e[p+X_MIN];const d=u||e[c+X_MAX]>e[h+X_MAX]?c:h;a[l+X_MAX]=t[d+X_MAX],r[l+X_MAX]=e[d+X_MAX];const g=u||e[c+Y_MIN]<e[h+Y_MIN]?c:h;a[l+Y_MIN]=t[g+Y_MIN],r[l+Y_MIN]=e[g+Y_MIN];const f=u||e[c+Y_MAX]>e[h+Y_MAX]?c:h;a[l+Y_MAX]=t[f+Y_MAX],r[l+Y_MAX]=e[f+Y_MAX]}return{maxRange:s,indexData:a,valueData:r}}var AGGREGATION_THRESHOLD=1e3,OPEN=X_MIN,HIGH=Y_MAX,LOW=Y_MIN,CLOSE=X_MAX;function aggregateOhlcData(t,e,i,o){if(t.length<AGGREGATION_THRESHOLD)return;const[s,a]=aggregationDomain(o);let r=maxRangeFittingPoints(t),{indexData:n,valueData:l}=createAggregationIndices(t,e,i,s,a,r);const c=[{maxRange:r,indexData:n}];for(;r>64;)({indexData:n,valueData:l,maxRange:r}=compactAggregationIndices(n,l,r)),c.push({maxRange:r,indexData:n});return c.reverse(),c}var{fixNumericExtent:fixNumericExtent3,keyProperty:keyProperty3,createDatumId:createDatumId2,SeriesNodePickMode:SeriesNodePickMode2,ChartAxisDirection:ChartAxisDirection18,SMALLEST_KEY_INTERVAL:SMALLEST_KEY_INTERVAL2,valueProperty:valueProperty5,diff:diff2,animationValidation:animationValidation2,computeBarFocusBounds:computeBarFocusBounds2,visibleRangeIndices,ContinuousScale:ContinuousScale5,OrdinalTimeScale:OrdinalTimeScale2,BandScale,getShapeStyle:getShapeStyle2}=import_ag_charts_community155._ModuleSupport,OhlcSeriesNodeEvent=class extends import_ag_charts_community155._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.openKey=o.properties.openKey,this.closeKey=o.properties.closeKey,this.highKey=o.properties.highKey,this.lowKey=o.properties.lowKey}},OhlcSeriesBase=class extends import_ag_charts_community155._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[SeriesNodePickMode2.AXIS_ALIGNED,SeriesNodePickMode2.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=OhlcSeriesNodeEvent,this.dataAggregationFilters=void 0}async processData(t){if(!this.properties.isValid()||!this.visible)return;const{xKey:e,openKey:i,closeKey:o,highKey:s,lowKey:a}=this.properties,r=!this.ctx.animationManager.isSkipped(),n=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:h,yScaleType:u}=this.getScaleInformation({xScale:n,yScale:l}),p=[];r&&(this.processedData&&p.push(diff2(this.id,this.processedData)),p.push(animationValidation2())),i&&p.push(valueProperty5(i,u,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:d,processedData:g}=await this.requestDataModel(t,this.data,{props:[keyProperty3(e,h,{id:"xValue"}),valueProperty5(o,u,{id:"closeValue"}),valueProperty5(s,u,{id:"highValue"}),valueProperty5(a,u,{id:"lowValue"}),...c?[SMALLEST_KEY_INTERVAL2]:[],...p]});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(d,g),this.animationState.transition("updateData")}aggregateData(t,e){const i=this.axes[ChartAxisDirection18.X];if(i==null||!(ContinuousScale5.is(i.scale)||OrdinalTimeScale2.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"highValue",e),a=t.resolveColumnById(this,"lowValue",e),{index:r}=t.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[r];return aggregateOhlcData(o,s,a,n)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];if(t!==this.getBarDirection()){const{index:s,def:a}=i.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[s];return a.type==="key"&&a.valueType==="category"?r:this.padBandExtent(r)}const o=this.domainForClippedRange(ChartAxisDirection18.Y,["highValue","lowValue"],"xValue",!0);return fixNumericExtent3(o)}getSeriesRange(t,e){return this.domainForVisibleRange(ChartAxisDirection18.Y,["highValue","lowValue"],"xValue",e,!0)}getVisibleItems(t,e,i){return this.countVisibleItems("xValue",["highValue","lowValue"],t,e,i)}createNodeData(){const{visible:t,dataModel:e,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&o&&s))return;const a=[],{xKey:r,highKey:n,lowKey:l}=this.properties,c=i.dataSources.get(this.id)??[],h=e.resolveKeysById(this,"xValue",i),u=e.resolveColumnById(this,"openValue",i),p=e.resolveColumnById(this,"closeValue",i),d=e.resolveColumnById(this,"highValue",i),g=e.resolveColumnById(this,"lowValue",i),{groupScale:f}=this,{barWidth:y,groupIndex:m}=this.updateGroupScale(o),b=f.convert(String(m)),x=y>=1?y:f.rawBandwidth,S=BandScale.is(o.scale),v={itemId:r,nodeData:a,labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!t)return v;const T=(I,w,L,P,z,R,B,E)=>{const F=c[I],V=S?B/2:0,G=o.scale.convert(w)+b+V,W=s.scale.convert(L),H=s.scale.convert(P),q=s.scale.convert(z),j=s.scale.convert(R),$=P>L,X=$?"up":"down",Y=Math.min(q,j),U=Math.max(q,j)-Y,Z={x:G,y:Y+U/2};a.push({series:this,itemId:X,datum:F,datumIndex:I,xKey:r,xValue:w,openValue:L,closeValue:P,highValue:z,lowValue:R,midPoint:Z,aggregatedValue:P,isRising:$,centerX:G,width:B,y:Y,height:U,yOpen:W,yClose:H,crisp:E})},{dataAggregationFilters:D}=this,k=o.scale,[A,M]=k.range,_=M-A,O=I=>k.convert(h[I])+b,C=D?.find(I=>I.maxRange>_);if(C==null){let[I,w]=visibleRangeIndices(c.length,o.range,L=>{const P=O(L);return[P,P+x]});i.input.count<1e3&&(I=0,w=i.input.count);for(let L=I;L<w;L+=1){const P=h[L];if(P==null)continue;const z=u[L],R=p[L],B=d[L],E=g[L],F=E!=null&&E<=z&&E<=R,V=B!=null&&B>=z&&B>=R;if(!F){import_ag_charts_core59.Logger.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!V){import_ag_charts_core59.Logger.warnOnce(`invalid high value for key [${n}] in data element, high value cannot be lower than datum open or close values.`);continue}T(L,P,z,R,B,E,x,!0)}}else{const{maxRange:I,indexData:w}=C,[L,P]=visibleRangeIndices(I,o.range,z=>{const R=z*SPAN,B=w[R+OPEN],E=w[R+CLOSE];if(B!==-1)return[O(B),O(E)+x]});for(let z=L;z<P;z+=1){const R=z*SPAN,B=w[R+OPEN],E=w[R+CLOSE],F=w[R+HIGH],V=w[R+LOW];if(B===-1)continue;const G=(B+E)/2|0,W=h[G];if(W==null)continue;const H=u[B],q=p[E],j=d[F],$=g[V],X=Math.abs(O(E)-O(B))+x;T(G,W,H,q,j,$,X,!1)}}return v}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(t){const e=t.nodeData??[];return t.datumSelection.update(e)}updateLabelNodes(t){}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e)}getItemBaseStyle(t,e){const{properties:i}=this,o=i.item[t],s=e?i.highlightStyle.item:void 0,a={fill:s?.fill??o.fill,fillOpacity:s?.fillOpacity??o.fillOpacity,stroke:s?.stroke??o.stroke,strokeWidth:s?.strokeWidth??o.strokeWidth,strokeOpacity:s?.strokeOpacity??o.strokeOpacity,lineDash:s?.lineDash??o.lineDash,lineDashOffset:s?.lineDashOffset??o.lineDashOffset};return o.fillGradientDefaults&&o.fillPatternDefaults?getShapeStyle2(a,o.fillGradientDefaults,o.fillPatternDefaults):a}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:r}=this,n=r.item[i],{itemStyler:l}=r;if(l==null)return;const{xKey:c,openKey:h,closeKey:u,highKey:p,lowKey:d}=r,g=this.cachedDatumCallback(createDatumId2(t,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:a,datum:e,itemId:i,xKey:c,openKey:h,closeKey:u,highKey:p,lowKey:d,highlighted:s,...o}));return n.fillGradientDefaults&&n.fillPatternDefaults?getShapeStyle2(g,n.fillGradientDefaults,n.fillPatternDefaults):g}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:r,yName:n,openKey:l,openName:c,highKey:h,highName:u,lowKey:p,lowName:d,closeKey:g,closeName:f,legendItemName:y,tooltip:m}=s,b=this.getCategoryAxis(),x=this.getValueAxis();if(!i||!o||!b||!x)return;const S=o.dataSources.get(this.id)?.[t],v=i.resolveKeysById(this,"xValue",o)[t],T=i.resolveColumnById(this,"openValue",o)[t],D=i.resolveColumnById(this,"highValue",o)[t],k=i.resolveColumnById(this,"lowValue",o)[t],A=i.resolveColumnById(this,"closeValue",o)[t];if(v==null)return;const M=A>=T?"up":"down",_=this.properties.item[M],O=this.getItemBaseStyle(M,!1);Object.assign(O,this.getItemStyleOverrides(String(t),S,M,O,!1));let C={fill:_.fill??_.stroke,fillOpacity:_.fillOpacity??_.strokeOpacity??1,stroke:_.stroke,strokeWidth:_.strokeWidth??1,strokeOpacity:_.strokeOpacity??1,lineDash:_.lineDash??[0],lineDashOffset:_.lineDashOffset??0};return _.fillGradientDefaults&&_.fillPatternDefaults&&(C=getShapeStyle2(C,_.fillGradientDefaults,_.fillPatternDefaults)),m.formatTooltip(this.properties,{heading:b.formatDatum(v),title:y,symbol:{marker:C},data:[{label:c,fallbackLabel:l,value:x.formatDatum(T)},{label:u,fallbackLabel:h,value:x.formatDatum(D)},{label:d,fallbackLabel:p,value:x.formatDatum(k)},{label:f,fallbackLabel:g,value:x.formatDatum(A)}]},{seriesId:e,datum:S,title:n,itemId:M,xKey:a,xName:r,yName:n,openKey:l,openName:c,highKey:h,highName:u,lowKey:p,lowName:d,closeKey:g,closeName:f,...O})}getDatumId(t){return createDatumId2(t.xValue)}computeFocusBounds(t){const e=this.getNodeData()?.at(t.datumIndex);if(e==null)return;const{centerX:i,y:o,width:s,height:a}=e,r={x:i-s/2,y:o,width:s,height:a};return computeBarFocusBounds2(this,r)}},import_ag_charts_community157=require("ag-charts-community"),import_ag_charts_community156=require("ag-charts-community"),{Path:Path7,ScenePathChangeDetection:ScenePathChangeDetection4,BBox:BBox11}=import_ag_charts_community156._ModuleSupport,OhlcBaseNode=class extends Path7{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:t,y:e,width:i,height:o}=this;return new BBox11(t-i/2,e,i,o)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:t,width:e,height:i,crisp:o,strokeAlignment:s}=this;let{centerX:a,yOpen:r,yClose:n}=this,l=a-e/2,c=a+e/2,h=t,u=t+i;if(o&&e>1){a=this.align(a),r=this.align(r),n=this.align(n);const d=this.align(e/2);l=a-d,c=a+d,h=this.align(t),u=h+this.align(h,i)}const p=(h+u)/2;return a+=s,l+=s,c+=s,h-=s,u+=s,r+=r<p?s:-s,n+=n<p?s:-s,{centerX:a,x0:l,x1:c,y0:h,y1:u,yOpen:r,yClose:n}}executeStroke(t,e){const{width:i,strokeWidth:o}=this;i<o&&(t.lineWidth=i),super.executeStroke(t,e)}};__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"centerX",2),__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"y",2),__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"width",2),__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"height",2),__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"yOpen",2),__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"yClose",2),__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"crisp",2),__decorateClass([ScenePathChangeDetection4()],OhlcBaseNode.prototype,"strokeAlignment",2);var OhlcNode=class extends OhlcBaseNode{updatePath(){const{path:t}=this,{centerX:e,x0:i,x1:o,y0:s,y1:a,yOpen:r,yClose:n}=this.alignedCoordinates();t.clear(),t.moveTo(e,s),t.lineTo(e,a),Math.abs(o-i)>1&&(t.moveTo(i,r),t.lineTo(e,r),t.moveTo(e,n),t.lineTo(o,n))}},{ScenePathChangeDetection:ScenePathChangeDetection5,ExtendedPath2D:ExtendedPath2D3,BBox:BBox12}=import_ag_charts_community157._ModuleSupport,CandlestickNode=class extends OhlcBaseNode{constructor(){super(...arguments),this.wickPath=new ExtendedPath2D3,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}computeDefaultGradientFillBBox(){const{width:t,centerX:e,yOpen:i,yClose:o}=this,s=Math.min(i,o),r=Math.max(i,o)-s,n=e-t/2,l=e+t/2;return new BBox12(n,s,l-n,r)}updatePath(){const{path:t,stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,wickStroke:r,wickStrokeWidth:n,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:h,strokeAlignment:u}=this,{centerX:p,x0:d,x1:g,y0:f,y1:y,yOpen:m,yClose:b}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const S=r!=null&&r!==e||n!=null&&n!==i||l!=null&&l!==o||c!=null&&c!==s||h!=null&&h!==a?this.wickPath:t;if(Math.abs(g-d)<=3){S.moveTo(p,f),S.lineTo(p,y);return}const v=Math.min(m,b),T=Math.max(m,b);S.moveTo(p,f),S.lineTo(p,v+i/2),S.moveTo(p,y),S.lineTo(p,T-i/2);const D=u+i/2,k=T-v-2*D;if(k>0)t.rect(d+D,v+D,g-d-2*D,k);else{const A=(v+T)/2;t.moveTo(d,A),t.lineTo(g,A)}}drawPath(t){super.drawPath(t);const{wickPath:e}=this;if(e.isEmpty())return;const{stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:a,lineDashOffset:r,wickStroke:n=i,wickStrokeWidth:l=o,wickStrokeOpacity:c=s,wickLineDash:h=a,wickLineDashOffset:u=r}=this;l!==0&&(t.globalAlpha*=c,typeof n=="string"&&(t.strokeStyle=n),t.lineWidth=l,h!=null&&t.setLineDash(h),t.lineDashOffset=u,t.stroke(e.getPath2D()))}};__decorateClass([ScenePathChangeDetection5()],CandlestickNode.prototype,"wickStroke",2),__decorateClass([ScenePathChangeDetection5()],CandlestickNode.prototype,"wickStrokeWidth",2),__decorateClass([ScenePathChangeDetection5()],CandlestickNode.prototype,"wickStrokeOpacity",2),__decorateClass([ScenePathChangeDetection5()],CandlestickNode.prototype,"wickLineDash",2),__decorateClass([ScenePathChangeDetection5()],CandlestickNode.prototype,"wickLineDashOffset",2);var import_ag_charts_community159=require("ag-charts-community"),import_ag_charts_community158=require("ag-charts-community"),{BaseProperties:BaseProperties20,TempValidate:TempValidate57,AbstractBarSeriesProperties:AbstractBarSeriesProperties2,SeriesTooltip:SeriesTooltip2,STRING:STRING25,COLOR_STRING:COLOR_STRING10,FUNCTION:FUNCTION7,LINE_DASH:LINE_DASH6,OBJECT:OBJECT24,POSITIVE_NUMBER:POSITIVE_NUMBER16,RATIO:RATIO13}=import_ag_charts_community158._ModuleSupport,OhlcSeriesItem=class extends BaseProperties20{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate57(COLOR_STRING10)],OhlcSeriesItem.prototype,"stroke",2),__decorateClass([TempValidate57(POSITIVE_NUMBER16)],OhlcSeriesItem.prototype,"strokeWidth",2),__decorateClass([TempValidate57(RATIO13)],OhlcSeriesItem.prototype,"strokeOpacity",2),__decorateClass([TempValidate57(LINE_DASH6)],OhlcSeriesItem.prototype,"lineDash",2),__decorateClass([TempValidate57(POSITIVE_NUMBER16)],OhlcSeriesItem.prototype,"lineDashOffset",2);var OhlcSeriesItems=class extends BaseProperties20{constructor(){super(...arguments),this.up=new OhlcSeriesItem,this.down=new OhlcSeriesItem}};__decorateClass([TempValidate57(OBJECT24)],OhlcSeriesItems.prototype,"up",2),__decorateClass([TempValidate57(OBJECT24)],OhlcSeriesItems.prototype,"down",2);var OhlcSeriesBaseProperties=class extends AbstractBarSeriesProperties2{};__decorateClass([TempValidate57(STRING25)],OhlcSeriesBaseProperties.prototype,"xKey",2),__decorateClass([TempValidate57(STRING25)],OhlcSeriesBaseProperties.prototype,"openKey",2),__decorateClass([TempValidate57(STRING25)],OhlcSeriesBaseProperties.prototype,"closeKey",2),__decorateClass([TempValidate57(STRING25)],OhlcSeriesBaseProperties.prototype,"highKey",2),__decorateClass([TempValidate57(STRING25)],OhlcSeriesBaseProperties.prototype,"lowKey",2),__decorateClass([TempValidate57(STRING25,{optional:!0})],OhlcSeriesBaseProperties.prototype,"xName",2),__decorateClass([TempValidate57(STRING25,{optional:!0})],OhlcSeriesBaseProperties.prototype,"yName",2),__decorateClass([TempValidate57(STRING25,{optional:!0})],OhlcSeriesBaseProperties.prototype,"openName",2),__decorateClass([TempValidate57(STRING25,{optional:!0})],OhlcSeriesBaseProperties.prototype,"closeName",2),__decorateClass([TempValidate57(STRING25,{optional:!0})],OhlcSeriesBaseProperties.prototype,"highName",2),__decorateClass([TempValidate57(STRING25,{optional:!0})],OhlcSeriesBaseProperties.prototype,"lowName",2);var OhlcSeriesProperties=class extends OhlcSeriesBaseProperties{constructor(){super(...arguments),this.tooltip=new SeriesTooltip2,this.item=new OhlcSeriesItems}};__decorateClass([TempValidate57(OBJECT24)],OhlcSeriesProperties.prototype,"tooltip",2),__decorateClass([TempValidate57(OBJECT24)],OhlcSeriesProperties.prototype,"item",2),__decorateClass([TempValidate57(FUNCTION7,{optional:!0})],OhlcSeriesProperties.prototype,"itemStyler",2);var{FillGradientDefaults:FillGradientDefaults2,FillPatternDefaults:FillPatternDefaults2,BaseProperties:BaseProperties21,SeriesTooltip:SeriesTooltip3,TempValidate:TempValidate58,COLOR_STRING:COLOR_STRING11,FUNCTION:FUNCTION8,LINE_DASH:LINE_DASH7,OBJECT:OBJECT25,POSITIVE_NUMBER:POSITIVE_NUMBER17,RATIO:RATIO14,COLOR_GRADIENT:COLOR_GRADIENT2,COLOR_PATTERN:COLOR_PATTERN2,OR:OR6}=import_ag_charts_community159._ModuleSupport,CandlestickSeriesWick=class extends BaseProperties21{};__decorateClass([TempValidate58(COLOR_STRING11,{optional:!0})],CandlestickSeriesWick.prototype,"stroke",2),__decorateClass([TempValidate58(POSITIVE_NUMBER17)],CandlestickSeriesWick.prototype,"strokeWidth",2),__decorateClass([TempValidate58(RATIO14)],CandlestickSeriesWick.prototype,"strokeOpacity",2),__decorateClass([TempValidate58(LINE_DASH7,{optional:!0})],CandlestickSeriesWick.prototype,"lineDash",2),__decorateClass([TempValidate58(POSITIVE_NUMBER17)],CandlestickSeriesWick.prototype,"lineDashOffset",2);var CandlestickSeriesItem=class extends BaseProperties21{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new FillGradientDefaults2,this.fillPatternDefaults=new FillPatternDefaults2,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new CandlestickSeriesWick}};__decorateClass([TempValidate58(OR6(COLOR_GRADIENT2,COLOR_PATTERN2,COLOR_STRING11))],CandlestickSeriesItem.prototype,"fill",2),__decorateClass([TempValidate58(OBJECT25)],CandlestickSeriesItem.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate58(OBJECT25)],CandlestickSeriesItem.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate58(RATIO14)],CandlestickSeriesItem.prototype,"fillOpacity",2),__decorateClass([TempValidate58(COLOR_STRING11)],CandlestickSeriesItem.prototype,"stroke",2),__decorateClass([TempValidate58(POSITIVE_NUMBER17)],CandlestickSeriesItem.prototype,"strokeWidth",2),__decorateClass([TempValidate58(RATIO14)],CandlestickSeriesItem.prototype,"strokeOpacity",2),__decorateClass([TempValidate58(LINE_DASH7)],CandlestickSeriesItem.prototype,"lineDash",2),__decorateClass([TempValidate58(POSITIVE_NUMBER17)],CandlestickSeriesItem.prototype,"lineDashOffset",2),__decorateClass([TempValidate58(POSITIVE_NUMBER17)],CandlestickSeriesItem.prototype,"cornerRadius",2),__decorateClass([TempValidate58(OBJECT25)],CandlestickSeriesItem.prototype,"wick",2);var CandlestickSeriesItems=class extends BaseProperties21{constructor(){super(...arguments),this.up=new CandlestickSeriesItem,this.down=new CandlestickSeriesItem}};__decorateClass([TempValidate58(OBJECT25)],CandlestickSeriesItems.prototype,"up",2),__decorateClass([TempValidate58(OBJECT25)],CandlestickSeriesItems.prototype,"down",2);var CandlestickSeriesProperties=class extends OhlcSeriesBaseProperties{constructor(){super(...arguments),this.item=new CandlestickSeriesItems,this.tooltip=new SeriesTooltip3}};__decorateClass([TempValidate58(OBJECT25)],CandlestickSeriesProperties.prototype,"item",2),__decorateClass([TempValidate58(OBJECT25)],CandlestickSeriesProperties.prototype,"tooltip",2),__decorateClass([TempValidate58(FUNCTION8,{optional:!0})],CandlestickSeriesProperties.prototype,"itemStyler",2);var{createDatumId:createDatumId3,isGradientFill:isGradientFill2,isPatternFill,applyShapeFillBBox:applyShapeFillBBox2,getShapeFill,getShapeStyle:getShapeStyle3}=import_ag_charts_community160._ModuleSupport,CandlestickSeries=class extends OhlcSeriesBase{constructor(){super(...arguments),this.properties=new CandlestickSeriesProperties}nodeFactory(){return new CandlestickNode}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:o}=this,{xKey:s,highKey:a,lowKey:r,openKey:n,closeKey:l,item:c,itemStyler:h}=o,{up:u,down:p}=c,d=getShapeStyle3({fill:u.fill,fillOpacity:u.fillOpacity,stroke:u.stroke,strokeWidth:u.strokeWidth,strokeOpacity:u.strokeOpacity,lineDash:u.lineDash,lineDashOffset:u.lineDashOffset},u.fillGradientDefaults,u.fillPatternDefaults),g=getShapeStyle3({fill:p.fill,fillOpacity:p.fillOpacity,stroke:p.stroke,strokeWidth:p.strokeWidth,strokeOpacity:p.strokeOpacity,lineDash:p.lineDash,lineDashOffset:p.lineDashOffset},p.fillGradientDefaults,p.fillPatternDefaults),f=e?o.highlightStyle.item:void 0;t.each((y,m)=>{const{isRising:b,centerX:x,width:S,y:v,height:T,yOpen:D,yClose:k,crisp:A}=m;let M;if(h!=null){const{fill:w,fillOpacity:L,stroke:P,strokeWidth:z,strokeOpacity:R,lineDash:B,lineDashOffset:E}=b?d:g;M=getShapeStyle3(this.cachedDatumCallback(createDatumId3(this.getDatumId(m),e?"highlight":"node"),()=>this.callWithContext(h,{seriesId:i,itemId:m.itemId,xKey:s,highKey:a,lowKey:r,openKey:n,closeKey:l,datum:m.datum,fill:w,fillOpacity:L,strokeOpacity:R,stroke:P,strokeWidth:z,lineDash:B,lineDashOffset:E,highlighted:e})),b?u.fillGradientDefaults:p.fillGradientDefaults,b?u.fillPatternDefaults:p.fillPatternDefaults)}y.centerX=x,y.width=S,y.y=v,y.height=T,y.yOpen=D,y.yClose=k,y.crisp=A;const _=b?d:g,O=b?u.wick:p.wick,C=f?.fill??M?.fill??_.fill;applyShapeFillBBox2(y,C,this.getShapeFillBBox()),y.fill=f?.fill??M?.fill??_.fill,y.fillOpacity=f?.fillOpacity??M?.fillOpacity??_.fillOpacity,y.stroke=f?.stroke??M?.stroke??_.stroke,y.strokeWidth=f?.strokeWidth??M?.strokeWidth??_.strokeWidth,y.strokeOpacity=f?.strokeOpacity??M?.strokeOpacity??_.strokeOpacity,y.lineDash=f?.lineDash??M?.lineDash??_.lineDash,y.lineDashOffset=f?.lineDashOffset??M?.lineDashOffset??_.lineDashOffset;const I=M?.wick;y.wickStroke=f?.stroke??I?.stroke??O.stroke,y.wickStrokeWidth=f?.strokeWidth??I?.strokeWidth??O.strokeWidth,y.wickStrokeOpacity=f?.strokeOpacity??I?.strokeOpacity??O.strokeOpacity,y.wickLineDash=f?.lineDash??I?.lineDash??O.lineDash,y.wickLineDashOffset=f?.lineDashOffset??I?.lineDashOffset??O.lineDashOffset,y.strokeAlignment=(M?.strokeWidth??_.strokeWidth)/2})}legendItemSymbol(){const{up:t,down:e}=this.properties.item,i=getShapeFill(t.fill,t.fillGradientDefaults,t.fillPatternDefaults),o=isGradientFill2(i)?i.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:isPatternFill(i)?t.stroke:i,stop:0},{color:isPatternFill(i)?t.stroke:i,stop:.5}],s=getShapeFill(e.fill,e.fillGradientDefaults,e.fillPatternDefaults),a=isGradientFill2(s)?s.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:isPatternFill(s)?e.stroke:s,stop:.5}],r={type:"gradient",gradient:"linear",rotation:90,colorStops:[...o,...a],reverse:!1},n={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:t.stroke,stop:0},{color:t.stroke,stop:.5},{color:e.stroke,stop:.5}],reverse:!1};return{marker:{fill:r,fillOpacity:t.fillOpacity,stroke:n,strokeWidth:t.strokeWidth??1,strokeOpacity:t.strokeOpacity??1,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset}}}getLegendData(t){const{id:e,data:i,visible:o,ctx:{legendManager:s}}=this,{xKey:a,yName:r,showInLegend:n,legendItemName:l}=this.properties;return!i?.length||!a||t!=="category"?[]:[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:o&&s.getItemEnabled({seriesId:e,itemId:e}),label:{text:l??r??e},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!n}]}};CandlestickSeries.className="CandleStickSeries",CandlestickSeries.type="candlestick";var import_ag_charts_community161=require("ag-charts-community"),import_ag_charts_core60=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs2,tooltipOptionsDefs:tooltipOptionsDefs2}=import_ag_charts_community161._ModuleSupport,candlestickSeriesItemOptionsDef={cornerRadius:import_ag_charts_core60.positiveNumber,wick:{...import_ag_charts_core60.strokeOptionsDef,...import_ag_charts_core60.lineDashOptionsDef},...import_ag_charts_core60.fillOptionsDef,...import_ag_charts_core60.strokeOptionsDef,...import_ag_charts_core60.lineDashOptionsDef},candlestickSeriesOptionsDef={type:(0,import_ag_charts_core60.required)((0,import_ag_charts_core60.constant)("candlestick")),xKey:(0,import_ag_charts_core60.required)(import_ag_charts_core60.string),openKey:(0,import_ag_charts_core60.required)(import_ag_charts_core60.string),highKey:(0,import_ag_charts_core60.required)(import_ag_charts_core60.string),lowKey:(0,import_ag_charts_core60.required)(import_ag_charts_core60.string),closeKey:(0,import_ag_charts_core60.required)(import_ag_charts_core60.string),xName:import_ag_charts_core60.string,yName:import_ag_charts_core60.string,openName:import_ag_charts_core60.string,highName:import_ag_charts_core60.string,lowName:import_ag_charts_core60.string,closeName:import_ag_charts_core60.string,item:{up:candlestickSeriesItemOptionsDef,down:candlestickSeriesItemOptionsDef},itemStyler:import_ag_charts_core60.callback,showInMiniChart:import_ag_charts_core60.boolean,tooltip:tooltipOptionsDefs2,...commonSeriesOptionsDefs2};candlestickSeriesOptionsDef.pickOutsideVisibleMinorAxis=import_ag_charts_core60.boolean,candlestickSeriesOptionsDef.focusPriority=import_ag_charts_core60.number;var import_ag_charts_community162=require("ag-charts-community"),{CARTESIAN_AXIS_TYPE:CARTESIAN_AXIS_TYPE2}=import_ag_charts_community162._ModuleSupport.ThemeConstants;function itemTheme(t){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},t==="up"?"transparent":{$palette:"fill"},{$palette:`${t}.fill`}]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${t}.stroke`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${t}.fill`}]},{$isPattern:[{$palette:`${t}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${t}.fill`}]}]},[{$mix:[{$palette:`${t}.fill`},"black",.15]},{$mix:[{$palette:`${t}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community162._ModuleSupport.FILL_PATTERN_DEFAULTS}}var CANDLESTICK_SERIES_THEME={series:{item:{up:itemTheme("up"),down:itemTheme("down")},highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[CARTESIAN_AXIS_TYPE2.NUMBER]:{crosshair:{snap:!1}},[CARTESIAN_AXIS_TYPE2.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:CARTESIAN_AXIS_TYPE3,CARTESIAN_POSITION}=import_ag_charts_community163._ModuleSupport.ThemeConstants,CandlestickModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:t=>new CandlestickSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:CARTESIAN_AXIS_TYPE3.NUMBER,position:CARTESIAN_POSITION.LEFT},{type:CARTESIAN_AXIS_TYPE3.ORDINAL_TIME,position:CARTESIAN_POSITION.BOTTOM}],themeTemplate:CANDLESTICK_SERIES_THEME,groupable:!1},CandlestickSeriesModule={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:candlestickSeriesOptionsDef,create:t=>new CandlestickSeries(t)},import_ag_charts_community170=require("ag-charts-community"),import_ag_charts_community167=require("ag-charts-community"),import_ag_charts_core62=require("ag-charts-core"),import_ag_charts_community164=require("ag-charts-community"),import_ag_charts_core61=require("ag-charts-core"),{CachedTextMeasurerPool:CachedTextMeasurerPool3,TextUtils:TextUtils4,TextWrapper:TextWrapper4}=import_ag_charts_community164._ModuleSupport;function generateLabelSecondaryLabelFontSizeCandidates(t,e){const{fontSize:i,minimumFontSize:o=i}=t,{fontSize:s,minimumFontSize:a=s}=e,r=i-o,n=s-a;let l=t.fontSize,c=e.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:s}];for(;l>o||c>a;){const u=r>0?(l-o)/r:-1,p=n>0?(c-a)/n:-1;u>p?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function getLineHeight(t,e){return t.lineHeight!=null&&t.fontSize!=null?t.lineHeight*e/t.fontSize:TextUtils4.getLineHeight(e)}function formatStackedLabels(t,e,i,o,{padding:s},a){const{spacing:r=0}=e,n=2*s,l=2*s+r,c=(e.minimumFontSize??e.fontSize)+(o.minimumFontSize??o.fontSize);if(c>a(c+l,!1).height-l)return;const h=generateLabelSecondaryLabelFontSizeCandidates(e,o),u={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},p={fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight};let d,g;return(0,import_ag_charts_core61.findMaxValue)(0,h.length-1,f=>{const{labelFontSize:y,secondaryLabelFontSize:m}=h[f],b=f===0,x=getLineHeight(e,y),S=getLineHeight(o,m),v=a(x+S+l,b),T=v.width-n,D=v.height-l;if(x+S>D||((d==null||d.fontSize!==y)&&(u.fontSize=y,d=wrapLabel(e,t,T,D,u,e.wrapping,b?e.overflowStrategy:"hide")),d==null||d.width>T||d.height>D)||((g==null||g.fontSize!==m)&&(p.fontSize=m,g=wrapLabel(o,i,T,D,p,o.wrapping,b?o.overflowStrategy:"hide")),g==null))return;const k=d.height+g.height;if(!(g.width>T||k>D))return{width:Math.max(d.width,g.width),height:k+r,meta:v.meta,label:d,secondaryLabel:g}})}function formatSingleLabel(t,e,{padding:i},o){const s=2*i,a=Math.min(e.minimumFontSize??e.fontSize,e.fontSize),r={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return(0,import_ag_charts_core61.findMaxValue)(a,e.fontSize,n=>{const l=getLineHeight(e,n),c=n===a,h=o(l+s,c),u=h.width-s,p=h.height-s;if(l>p)return;r.fontSize=n;const d=TextWrapper4.wrapLines(t,{maxWidth:u,maxHeight:p,font:r,textWrap:e.wrapping,overflow:(c?e.overflowStrategy:void 0)??"hide"});if(!d.length)return;const g=clipLines(d,{lineHeight:l,font:r,maxWidth:u,maxHeight:p});if(g)return[{fontSize:n,lineHeight:l,...g},h.meta]})}function hasInvalidFontSize(t){return t?.minimumFontSize!=null&&t?.fontSize!=null&&t?.minimumFontSize>t?.fontSize}function formatLabels(t,e,i,o,s,a){const r=e.enabled?t:void 0,n=o.enabled?i:void 0;(hasInvalidFontSize(e)||hasInvalidFontSize(o))&&import_ag_charts_core61.Logger.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;r!=null&&n!=null&&(l=formatStackedLabels(r,e,n,o,s,a));let c;if(l==null&&r!=null&&(c=formatSingleLabel(r,e,s,a)),c!=null){const[u,p]=c;l={width:u.width,height:u.height,meta:p,label:u,secondaryLabel:void 0}}let h;if(l==null&&r==null&&n!=null&&(h=formatSingleLabel(n,o,s,a)),h!=null){const[u,p]=h;l={width:u.width,height:u.height,meta:p,label:void 0,secondaryLabel:u}}return l}function wrapLabel(t,e,i,o,s,a,r){const n=TextWrapper4.wrapLines(e,{maxWidth:i,maxHeight:o,font:s,textWrap:a,overflow:r});if(!n.length)return;const l=getLineHeight(t,s.fontSize),{width:c}=CachedTextMeasurerPool3.measureLines(n,{font:s});return{width:c,lineHeight:l,text:n.join(`
`),height:n.length*l,fontSize:s.fontSize}}function clipLines(t,{font:e,lineHeight:i=TextUtils4.defaultLineHeight,maxWidth:o,maxHeight:s=1/0}){let a=i*t.length;for(;a>s;){if(t.length===1)return;t.pop(),t[t.length-1]=TextWrapper4.appendEllipsis(t.at(-1)),a=i*t.length}const r=CachedTextMeasurerPool3.measureLines(t,{font:e});let n,l;if(r.width>o){const c=[];l=0;for(const h of r.lineMetrics){if(h.width>o){if(!c.length)return;break}c.push(h.text),l=Math.max(l,h.width)}n=TextWrapper4.appendEllipsis(c.join(`
`))}else n=t.join(`
`),l=r.width;return{text:n,width:l,height:a}}var import_ag_charts_community166=require("ag-charts-community"),import_ag_charts_community165=require("ag-charts-community"),{TempValidate:TempValidate59,NUMBER:NUMBER14,POSITIVE_NUMBER:POSITIVE_NUMBER18,TEXT_WRAP,OVERFLOW_STRATEGY}=import_ag_charts_community165._ModuleSupport,BaseAutoSizedLabel=class extends import_ag_charts_community165._ModuleSupport.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};__decorateClass([TempValidate59(TEXT_WRAP)],BaseAutoSizedLabel.prototype,"wrapping",2),__decorateClass([TempValidate59(OVERFLOW_STRATEGY)],BaseAutoSizedLabel.prototype,"overflowStrategy",2),__decorateClass([TempValidate59(POSITIVE_NUMBER18,{optional:!0})],BaseAutoSizedLabel.prototype,"lineHeight",2),__decorateClass([TempValidate59(POSITIVE_NUMBER18,{optional:!0})],BaseAutoSizedLabel.prototype,"minimumFontSize",2);var AutoSizedLabel=class extends BaseAutoSizedLabel{constructor(){super(...arguments),this.spacing=0}};__decorateClass([TempValidate59(NUMBER14)],AutoSizedLabel.prototype,"spacing",2);var AutoSizedSecondaryLabel=class extends BaseAutoSizedLabel{},{CartesianSeriesProperties,SeriesTooltip:SeriesTooltip4,TempValidate:TempValidate60,AND:AND5,ARRAY:ARRAY7,COLOR_STRING:COLOR_STRING12,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY3,FUNCTION:FUNCTION9,OBJECT:OBJECT26,POSITIVE_NUMBER:POSITIVE_NUMBER19,RATIO:RATIO15,STRING:STRING26,TEXT_ALIGN:TEXT_ALIGN2,VERTICAL_ALIGN}=import_ag_charts_community166._ModuleSupport,HeatmapSeriesProperties=class extends CartesianSeriesProperties{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new AutoSizedLabel,this.tooltip=new SeriesTooltip4}};__decorateClass([TempValidate60(STRING26,{optional:!0})],HeatmapSeriesProperties.prototype,"title",2),__decorateClass([TempValidate60(STRING26)],HeatmapSeriesProperties.prototype,"xKey",2),__decorateClass([TempValidate60(STRING26)],HeatmapSeriesProperties.prototype,"yKey",2),__decorateClass([TempValidate60(STRING26,{optional:!0})],HeatmapSeriesProperties.prototype,"colorKey",2),__decorateClass([TempValidate60(STRING26,{optional:!0})],HeatmapSeriesProperties.prototype,"xName",2),__decorateClass([TempValidate60(STRING26,{optional:!0})],HeatmapSeriesProperties.prototype,"yName",2),__decorateClass([TempValidate60(STRING26,{optional:!0})],HeatmapSeriesProperties.prototype,"colorName",2),__decorateClass([TempValidate60(AND5(COLOR_STRING_ARRAY3,ARRAY7.restrict({minLength:1})))],HeatmapSeriesProperties.prototype,"colorRange",2),__decorateClass([TempValidate60(COLOR_STRING12,{optional:!0})],HeatmapSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate60(RATIO15)],HeatmapSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate60(POSITIVE_NUMBER19,{optional:!0})],HeatmapSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate60(TEXT_ALIGN2)],HeatmapSeriesProperties.prototype,"textAlign",2),__decorateClass([TempValidate60(VERTICAL_ALIGN)],HeatmapSeriesProperties.prototype,"verticalAlign",2),__decorateClass([TempValidate60(POSITIVE_NUMBER19)],HeatmapSeriesProperties.prototype,"itemPadding",2),__decorateClass([TempValidate60(FUNCTION9,{optional:!0})],HeatmapSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate60(OBJECT26)],HeatmapSeriesProperties.prototype,"label",2),__decorateClass([TempValidate60(OBJECT26)],HeatmapSeriesProperties.prototype,"tooltip",2);var{SeriesNodePickMode:SeriesNodePickMode3,computeBarFocusBounds:computeBarFocusBounds3,getMissCount,valueProperty:valueProperty6,ChartAxisDirection:ChartAxisDirection19,DEFAULT_CARTESIAN_DIRECTION_KEYS,DEFAULT_CARTESIAN_DIRECTION_NAMES,createDatumId:createDatumId4,ColorScale,Rect:Rect4,PointerEvents,applyShapeStyle}=import_ag_charts_community167._ModuleSupport,HeatmapSeriesNodeEvent=class extends import_ag_charts_community167._ModuleSupport.CartesianSeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.colorKey=o.properties.colorKey}},textAlignFactors={left:-.5,center:0,right:-.5},verticalAlignFactors={top:-.5,middle:0,bottom:-.5},HeatmapSeries=class extends import_ag_charts_community167._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,directionKeys:DEFAULT_CARTESIAN_DIRECTION_KEYS,directionNames:DEFAULT_CARTESIAN_DIRECTION_NAMES,categoryKey:void 0,pickModes:[SeriesNodePickMode3.NEAREST_NODE,SeriesNodePickMode3.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new HeatmapSeriesProperties,this.NodeEvent=HeatmapSeriesNodeEvent,this.colorScale=new ColorScale}async processData(t){const e=this.axes[ChartAxisDirection19.X],i=this.axes[ChartAxisDirection19.Y];if(!e||!i||!this.properties.isValid()||!this.data?.length)return;const{xKey:o,yKey:s,colorRange:a,colorKey:r}=this.properties,n=this.axes[ChartAxisDirection19.X]?.scale,l=this.axes[ChartAxisDirection19.Y]?.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:n,yScale:l}),u=this.colorScale.type,{dataModel:p,processedData:d}=await this.requestDataModel(t,this.data,{props:[valueProperty6(o,c,{id:"xValue"}),valueProperty6(s,h,{id:"yValue"}),...r?[valueProperty6(r,u,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const g=p.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=d.domain.values[g],this.colorScale.range=a,this.colorScale.update()}}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=getMissCount(this,i.defs.values[o].missing);return!(s===0||s===a)}xCoordinateRange(t,e){const i=this.axes[ChartAxisDirection19.X].scale,o=e*(i.bandwidth??0)/2,s=i.convert(t)+o,a=e*(i.bandwidth??10);return[s,s+a]}yCoordinateRange(t,e){const i=this.axes[ChartAxisDirection19.Y].scale,o=e*(i.bandwidth??0)/2,s=i.convert(t[0])+o,a=e*(i.bandwidth??10);return[s,s+a]}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===ChartAxisDirection19.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,visible:e,axes:i,dataModel:o,processedData:s}=this,a=i[ChartAxisDirection19.X],r=i[ChartAxisDirection19.Y];if(!(t&&o&&s&&e&&a&&r))return;if(a.type!=="category"||r.type!=="category"){import_ag_charts_core62.Logger.warnOnce(`Heatmap series expected axes to have "category" type, but received "${a.type}" and "${r.type}" instead.`);return}const{xKey:n,xName:l,yKey:c,yName:h,colorKey:u,colorName:p,textAlign:d,verticalAlign:g,itemPadding:f,label:y}=this.properties,m=o.resolveColumnById(this,"xValue",s),b=o.resolveColumnById(this,"yValue",s),x=u?o.resolveColumnById(this,"colorValue",s):void 0,S=a.scale,v=r.scale,T=(S.bandwidth??0)/2,D=(v.bandwidth??0)/2,k=[],A=[],M=S.bandwidth??10,_=v.bandwidth??10,O=(M-2*f)*textAlignFactors[d],C=(_-2*f)*verticalAlignFactors[g],I=()=>({width:M,height:_,meta:null});return(s.dataSources.get(this.id)??[]).forEach((L,P)=>{const z=m[P],R=b[P],B=S.convert(z)+T,E=v.convert(R)+D,F=x?.[P],V=F==null?void 0:this.getLabelText(y,{value:F,datum:L,colorKey:u,colorName:p,xKey:n,yKey:c,xName:l,yName:h}),G=formatLabels(V,this.properties.label,void 0,this.properties.label,{padding:f},I),W={x:B,y:E,size:0};if(k.push({series:this,itemId:c,datumIndex:P,yKey:c,xKey:n,xValue:z,yValue:R,colorValue:F,datum:L,point:W,width:M,height:_,midPoint:{x:B,y:E},missing:x!=null&&F==null}),G?.label!=null){const{text:H,fontSize:q,lineHeight:j,height:$}=G.label,{fontStyle:X,fontFamily:Y,fontWeight:U,color:Z}=this.properties.label,J=W.x+O*(M-2*f),K=W.y+C*(_-2*f)-(G.height-$)*.5;A.push({series:this,itemId:c,datum:L,datumIndex:P,text:H,fontSize:q,lineHeight:j,fontStyle:X,fontFamily:Y,fontWeight:U,color:Z,textAlign:d,verticalAlign:g,x:J,y:K})}}),{itemId:this.properties.yKey??this.id,nodeData:k,labelData:A,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new Rect4}update(t){return this.ctx.animationManager.skipCurrentBatch(),super.update(t)}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{fill:i?.fill,fillOpacity:i?.fillOpacity??1,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity}}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:r}=this,{xKey:n,yKey:l,colorRange:c,itemStyler:h}=r,u=this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):c[0];let p=o.fill==null?{fill:u}:void 0;if(h!=null){p??(p={});const d=this.cachedDatumCallback(createDatumId4(t,s?"highlight":"node"),()=>this.callWithContext(h,{seriesId:a,datum:e,xKey:n,yKey:l,highlighted:s,...o,fill:u}));Object.assign(p,d)}return p}updateDatumNodes(t){const{isHighlight:e}=t,i=this.axes[ChartAxisDirection19.X],[o,s]=i?.visibleRange??[],r=!(o!==0||s!==1),n=this.getItemBaseStyle(e);t.datumSelection.each((l,c)=>{const{datumIndex:h,colorValue:u,datum:p,point:d,width:g,height:f}=c,y=this.getItemStyleOverrides(String(h),p,u,n,e);l.crisp=r,l.x=Math.floor(d.x-g/2),l.y=Math.floor(d.y-f/2),l.width=Math.ceil(g),l.height=Math.ceil(f),applyShapeStyle(l,n,y)})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t,{enabled:o}=this.properties.label,s=o?e:[];return i.update(s)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=PointerEvents.None})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a,colorScale:r}=this,{xKey:n,xName:l,yKey:c,yName:h,colorKey:u,colorName:p,colorRange:d,title:g,legendItemName:f,tooltip:y}=a,m=s[ChartAxisDirection19.X],b=s[ChartAxisDirection19.Y];if(!i||!o||!m||!b)return;const x=o.dataSources.get(this.id)?.[t],S=i.resolveColumnById(this,"xValue",o)[t],v=i.resolveColumnById(this,"yValue",o)[t],T=u!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",o)[t]:void 0;if(S==null)return;const D=[];let k;T==null?k=d[0]:(k=r.convert(T),D.push({label:p,fallbackLabel:u,value:String(T)})),D.push({label:l,fallbackLabel:n,value:m.formatDatum(S)},{label:h,fallbackLabel:c,value:b.formatDatum(v)});const A=this.getItemBaseStyle(!1);Object.assign(A,this.getItemStyleOverrides(String(t),x,T,A,!1)),A.fill!=null&&(k=A.fill);const M=k!=null?{marker:{shape:"square",fill:k,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}}:void 0;return y.formatTooltip(this.properties,{title:g??f,symbol:M,data:D},{seriesId:e,datum:x,title:g,xKey:n,xName:l,yKey:c,yName:h,colorKey:u,colorName:p,...A})}getLegendData(t){return t!=="gradient"||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:t}){const e=this.contextNodeData?.nodeData[t];if(e===void 0)return;const{width:i,height:o,midPoint:s}=e,a={x:s.x-i/2,y:s.y-o/2,width:i,height:o};return computeBarFocusBounds3(this,a)}};HeatmapSeries.className="HeatmapSeries",HeatmapSeries.type="heatmap";var import_ag_charts_community168=require("ag-charts-community"),import_ag_charts_core63=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs3,autoSizedLabelOptionsDefs,tooltipOptionsDefs:tooltipOptionsDefs3}=import_ag_charts_community168._ModuleSupport,heatmapSeriesOptionsDef={type:(0,import_ag_charts_core63.required)((0,import_ag_charts_core63.constant)("heatmap")),xKey:(0,import_ag_charts_core63.required)(import_ag_charts_core63.string),yKey:(0,import_ag_charts_core63.required)(import_ag_charts_core63.string),colorKey:import_ag_charts_core63.string,xName:import_ag_charts_core63.string,yName:import_ag_charts_core63.string,colorName:import_ag_charts_core63.string,colorRange:(0,import_ag_charts_core63.arrayOf)(import_ag_charts_core63.color),title:import_ag_charts_core63.string,textAlign:(0,import_ag_charts_core63.union)("left","center","right"),verticalAlign:(0,import_ag_charts_core63.union)("top","middle","bottom"),itemPadding:import_ag_charts_core63.positiveNumber,itemStyler:import_ag_charts_core63.callback,showInMiniChart:import_ag_charts_core63.boolean,label:autoSizedLabelOptionsDefs,tooltip:tooltipOptionsDefs3,...commonSeriesOptionsDefs3,...import_ag_charts_core63.strokeOptionsDef},import_ag_charts_community169=require("ag-charts-community"),HEATMAP_SERIES_THEME={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$path:["./0",{$palette:"stroke"},{$palette:"strokes"}]}]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},import_ag_charts_community169._ModuleSupport.SAFE_RANGE2_OPERATION]},label:{enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:CARTESIAN_AXIS_TYPE4,CARTESIAN_POSITION:CARTESIAN_POSITION2}}=import_ag_charts_community170._ModuleSupport,HeatmapModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:t=>new HeatmapSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:CARTESIAN_AXIS_TYPE4.CATEGORY,position:CARTESIAN_POSITION2.LEFT},{type:CARTESIAN_AXIS_TYPE4.CATEGORY,position:CARTESIAN_POSITION2.BOTTOM}],themeTemplate:HEATMAP_SERIES_THEME},HeatmapSeriesModule={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:heatmapSeriesOptionsDef,create:t=>new HeatmapSeries(t)},import_ag_charts_community173=require("ag-charts-community"),import_ag_charts_community171=require("ag-charts-community"),{createDatumId:createDatumId5}=import_ag_charts_community171._ModuleSupport,OhlcSeries=class extends OhlcSeriesBase{constructor(){super(...arguments),this.properties=new OhlcSeriesProperties}nodeFactory(){return new OhlcNode}updateDatumNodes({datumSelection:t,isHighlight:e}){const{id:i,properties:o}=this,{xKey:s,highKey:a,lowKey:r,openKey:n,closeKey:l,item:c,itemStyler:h}=o,{up:u,down:p}=c,{stroke:d,strokeWidth:g,strokeOpacity:f,lineDash:y,lineDashOffset:m}=u,{stroke:b,strokeWidth:x,strokeOpacity:S,lineDash:v,lineDashOffset:T}=p,D=e?o.highlightStyle.item:void 0;t.each((k,A)=>{const{isRising:M,centerX:_,width:O,y:C,height:I,yOpen:w,yClose:L,crisp:P}=A;let z;if(h!=null){const{stroke:R,strokeWidth:B,strokeOpacity:E,lineDash:F,lineDashOffset:V}=M?u:p;z=this.cachedDatumCallback(createDatumId5(this.getDatumId(A),e?"highlight":"node"),()=>this.callWithContext(h,{seriesId:i,itemId:A.itemId,xKey:s,highKey:a,lowKey:r,openKey:n,closeKey:l,datum:A.datum,strokeOpacity:E,stroke:R,strokeWidth:B,lineDash:F,lineDashOffset:V,highlighted:e}))}k.centerX=_,k.width=O,k.y=C,k.height=I,k.yOpen=w,k.yClose=L,k.crisp=P,k.stroke=D?.stroke??z?.stroke??(M?d:b),k.strokeWidth=D?.strokeWidth??z?.strokeWidth??(M?g:x),k.strokeOpacity=D?.strokeOpacity??z?.strokeOpacity??(M?f:S),k.lineDash=D?.lineDash??z?.lineDash??(M?y:v),k.lineDashOffset=D?.lineDashOffset??z?.lineDashOffset??(M?m:T),k.strokeAlignment=(z?.strokeWidth??(M?g:x))/2})}getLegendData(t){const{id:e,data:i,ctx:{legendManager:o},visible:s}=this,{xKey:a,yName:r,item:{up:n,down:l},showInLegend:c,legendItemName:h}=this.properties;if(!i?.length||!a||t!=="category")return[];const u={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:n.stroke,stop:0},{color:n.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:e,itemId:e,seriesId:e,enabled:s&&o.getItemEnabled({seriesId:e,itemId:e}),label:{text:h??r??e},symbol:{marker:{fill:u,fillOpacity:n.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:h,hideInLegend:!c}]}};OhlcSeries.className="ohlc",OhlcSeries.type="ohlc";var import_ag_charts_community172=require("ag-charts-community"),import_ag_charts_core64=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs4,tooltipOptionsDefs:tooltipOptionsDefs4}=import_ag_charts_community172._ModuleSupport,ohlcSeriesItemOptionsDef={...import_ag_charts_core64.strokeOptionsDef,...import_ag_charts_core64.lineDashOptionsDef},ohlcSeriesOptionsDef={type:(0,import_ag_charts_core64.required)((0,import_ag_charts_core64.constant)("ohlc")),xKey:(0,import_ag_charts_core64.required)(import_ag_charts_core64.string),openKey:(0,import_ag_charts_core64.required)(import_ag_charts_core64.string),highKey:(0,import_ag_charts_core64.required)(import_ag_charts_core64.string),lowKey:(0,import_ag_charts_core64.required)(import_ag_charts_core64.string),closeKey:(0,import_ag_charts_core64.required)(import_ag_charts_core64.string),xName:import_ag_charts_core64.string,yName:import_ag_charts_core64.string,openName:import_ag_charts_core64.string,highName:import_ag_charts_core64.string,lowName:import_ag_charts_core64.string,closeName:import_ag_charts_core64.string,showInMiniChart:import_ag_charts_core64.boolean,itemStyler:import_ag_charts_core64.callback,item:{up:ohlcSeriesItemOptionsDef,down:ohlcSeriesItemOptionsDef},tooltip:tooltipOptionsDefs4,...commonSeriesOptionsDefs4};ohlcSeriesOptionsDef.pickOutsideVisibleMinorAxis=import_ag_charts_core64.boolean,ohlcSeriesOptionsDef.focusPriority=import_ag_charts_core64.number;var{CARTESIAN_AXIS_TYPE:CARTESIAN_AXIS_TYPE5,CARTESIAN_POSITION:CARTESIAN_POSITION3}=import_ag_charts_community173._ModuleSupport.ThemeConstants,OhlcModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:t=>new OhlcSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:CARTESIAN_AXIS_TYPE5.NUMBER,position:CARTESIAN_POSITION3.LEFT},{type:CARTESIAN_AXIS_TYPE5.ORDINAL_TIME,position:CARTESIAN_POSITION3.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}}},axes:{[CARTESIAN_AXIS_TYPE5.NUMBER]:{crosshair:{snap:!1}},[CARTESIAN_AXIS_TYPE5.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},OhlcSeriesModule={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:ohlcSeriesOptionsDef,create:t=>new OhlcSeries(t)},import_ag_charts_community179=require("ag-charts-community"),import_ag_charts_community176=require("ag-charts-community"),AGGREGATION_THRESHOLD2=1e3;function aggregationContainsTopIndex(t,e,i,o,s,a){const r=t[a];if(r==null)return!1;const n=xRatioForDatumIndex(r,e,i),l=aggregationIndexForXRatio(n,s);return a===o[l+Y_MAX]}function aggregationContainsBottomIndex(t,e,i,o,s,a){const r=t[a];if(r==null)return!1;const n=xRatioForDatumIndex(r,e,i),l=aggregationIndexForXRatio(n,s);return a===o[l+Y_MIN]}function aggregateData(t,e,i,o){if(t.length<AGGREGATION_THRESHOLD2)return;const[s,a]=aggregationDomain(o);let r=maxRangeFittingPoints(t);const{indexData:n,valueData:l}=createAggregationIndices(t,e,i,s,a,r);let c=[],h=[];for(let p=0;p<t.length;p+=1)aggregationContainsTopIndex(t,s,a,n,r,p)&&c.push(p),aggregationContainsBottomIndex(t,s,a,n,r,p)&&h.push(p);const u=[{maxRange:r,topIndices:c,bottomIndices:h}];for(;r>64;)({maxRange:r}=compactAggregationIndices(n,l,r,{inPlace:!0})),c=c.filter(aggregationContainsTopIndex.bind(null,t,s,a,n,r)),h=h.filter(aggregationContainsBottomIndex.bind(null,t,s,a,n,r)),u.push({maxRange:r,topIndices:c,bottomIndices:h});return u.reverse(),u}var import_ag_charts_community174=require("ag-charts-community"),{CartesianSeriesProperties:CartesianSeriesProperties2,FillGradientDefaults:FillGradientDefaults3,FillPatternDefaults:FillPatternDefaults3,InterpolationProperties,SeriesMarker,SeriesTooltip:SeriesTooltip5,TempValidate:TempValidate61,BOOLEAN:BOOLEAN27,COLOR_STRING:COLOR_STRING13,LINE_DASH:LINE_DASH8,OBJECT:OBJECT27,PLACEMENT,POSITIVE_NUMBER:POSITIVE_NUMBER20,COLOR_GRADIENT:COLOR_GRADIENT3,COLOR_PATTERN:COLOR_PATTERN3,OR:OR7,RATIO:RATIO16,STRING:STRING27,DropShadow,Label:Label3}=import_ag_charts_community174._ModuleSupport,RangeAreaSeriesLabel=class extends Label3{constructor(){super(...arguments),this.placement="outside",this.padding=6}};__decorateClass([TempValidate61(PLACEMENT)],RangeAreaSeriesLabel.prototype,"placement",2),__decorateClass([TempValidate61(POSITIVE_NUMBER20)],RangeAreaSeriesLabel.prototype,"padding",2);var RangeAreaProperties=class extends CartesianSeriesProperties2{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new FillGradientDefaults3,this.fillPatternDefaults=new FillPatternDefaults3,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new InterpolationProperties,this.shadow=new DropShadow().set({enabled:!1}),this.marker=new SeriesMarker,this.label=new RangeAreaSeriesLabel,this.tooltip=new SeriesTooltip5,this.connectMissingData=!1}};__decorateClass([TempValidate61(STRING27)],RangeAreaProperties.prototype,"xKey",2),__decorateClass([TempValidate61(STRING27)],RangeAreaProperties.prototype,"yLowKey",2),__decorateClass([TempValidate61(STRING27)],RangeAreaProperties.prototype,"yHighKey",2),__decorateClass([TempValidate61(STRING27,{optional:!0})],RangeAreaProperties.prototype,"xName",2),__decorateClass([TempValidate61(STRING27,{optional:!0})],RangeAreaProperties.prototype,"yName",2),__decorateClass([TempValidate61(STRING27,{optional:!0})],RangeAreaProperties.prototype,"yLowName",2),__decorateClass([TempValidate61(STRING27,{optional:!0})],RangeAreaProperties.prototype,"yHighName",2),__decorateClass([TempValidate61(OR7(COLOR_GRADIENT3,COLOR_PATTERN3,COLOR_STRING13))],RangeAreaProperties.prototype,"fill",2),__decorateClass([TempValidate61(OBJECT27)],RangeAreaProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate61(OBJECT27)],RangeAreaProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate61(RATIO16)],RangeAreaProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate61(COLOR_STRING13)],RangeAreaProperties.prototype,"stroke",2),__decorateClass([TempValidate61(POSITIVE_NUMBER20)],RangeAreaProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate61(RATIO16)],RangeAreaProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate61(LINE_DASH8)],RangeAreaProperties.prototype,"lineDash",2),__decorateClass([TempValidate61(POSITIVE_NUMBER20)],RangeAreaProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate61(OBJECT27)],RangeAreaProperties.prototype,"interpolation",2),__decorateClass([TempValidate61(OBJECT27)],RangeAreaProperties.prototype,"shadow",2),__decorateClass([TempValidate61(OBJECT27)],RangeAreaProperties.prototype,"marker",2),__decorateClass([TempValidate61(OBJECT27)],RangeAreaProperties.prototype,"label",2),__decorateClass([TempValidate61(OBJECT27)],RangeAreaProperties.prototype,"tooltip",2),__decorateClass([TempValidate61(BOOLEAN27)],RangeAreaProperties.prototype,"connectMissingData",2);var import_ag_charts_community175=require("ag-charts-community"),{CollapseMode,isScaleValid,pairUpSpans,prepareAreaFillAnimationFns,plotInterpolatedLinePathStroke,prepareLinePathPropertyAnimation,areScalingEqual}=import_ag_charts_community175._ModuleSupport;function prepareRangeAreaPathStrokeAnimationFns(t,e,i,o){const s=(l,c)=>{plotInterpolatedLinePathStroke(l,c,e.removed),plotInterpolatedLinePathStroke(l,c,i.removed)},a=(l,c)=>{plotInterpolatedLinePathStroke(l,c,e.moved),plotInterpolatedLinePathStroke(l,c,i.moved)},r=(l,c)=>{plotInterpolatedLinePathStroke(l,c,e.added),plotInterpolatedLinePathStroke(l,c,i.added)},n=prepareLinePathPropertyAnimation(t,o);return{status:t,path:{addPhaseFn:r,updatePhaseFn:a,removePhaseFn:s},pathProperties:n}}function prepareRangeAreaPathAnimation(t,e,i){const o=t.scales.x?.type==="category",s=e.scales.x?.type==="category";if(o!==s||!isScaleValid(t.scales.x)||!isScaleValid(e.scales.x))return;let a="updated";e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added");const r=pairUpSpans({scales:t.scales,data:t.fillData.spans},{scales:e.scales,data:e.fillData.spans},CollapseMode.Split);if(r==null)return;const n=pairUpSpans({scales:t.scales,data:t.fillData.phantomSpans},{scales:e.scales,data:e.fillData.phantomSpans},CollapseMode.Split);if(n==null)return;const l=pairUpSpans({scales:t.scales,data:t.highStrokeData.spans},{scales:e.scales,data:e.highStrokeData.spans},CollapseMode.Split);if(l==null)return;const c=pairUpSpans({scales:t.scales,data:t.lowStrokeData.spans},{scales:e.scales,data:e.lowStrokeData.spans},CollapseMode.Split);if(c==null)return;const h="fade",u=prepareAreaFillAnimationFns(a,r,n,h),p=prepareRangeAreaPathStrokeAnimationFns(a,l,c,h),d=(i?.changed??!0)||!areScalingEqual(t.scales.x,e.scales.x)||!areScalingEqual(t.scales.y,e.scales.y)||a!=="updated";return{status:a,fill:u,stroke:p,hasMotion:d}}var{valueProperty:valueProperty7,keyProperty:keyProperty4,ChartAxisDirection:ChartAxisDirection20,mergeDefaults:mergeDefaults5,updateLabelNode,fixNumericExtent:fixNumericExtent4,buildResetPathFn,resetLabelFn,resetMarkerFn,resetMarkerPositionFn,pathSwipeInAnimation,resetMotion,markerSwipeScaleInAnimation,seriesLabelFadeInAnimation,animationValidation:animationValidation3,diff:diff3,updateClipPath,computeMarkerFocusBounds,plotAreaPathFill,plotLinePathStroke,interpolatePoints,pathFadeInAnimation,markerFadeInAnimation,fromToMotion,pathMotion,extent,createDatumId:createDatumId6,applyShapeFillBBox:applyShapeFillBBox3,PointerEvents:PointerEvents2,Group:Group9,BBox:BBox13,ContinuousScale:ContinuousScale6,OrdinalTimeScale:OrdinalTimeScale3,findMinMax:findMinMax3,getShapeStyle:getShapeStyle4,getShapeFill:getShapeFill2}=import_ag_charts_community176._ModuleSupport,RangeAreaSeriesNodeEvent=class extends import_ag_charts_community176._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},RangeAreaSeries=class extends import_ag_charts_community176._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:["fill","stroke"],pickModes:[import_ag_charts_community176._ModuleSupport.SeriesNodePickMode.AXIS_ALIGNED],directionKeys:{[ChartAxisDirection20.X]:["xKey"],[ChartAxisDirection20.Y]:["yLowKey","yHighKey"]},directionNames:{[ChartAxisDirection20.X]:["xName"],[ChartAxisDirection20.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:buildResetPathFn({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:resetLabelFn,marker:(e,i)=>({...resetMarkerFn(e),...resetMarkerPositionFn(e,i)})},clipFocusBox:!1}),this.properties=new RangeAreaProperties,this.NodeEvent=RangeAreaSeriesNodeEvent,this.dataAggregationFilters=void 0}async processData(t){if(!this.properties.isValid())return;const{xKey:e,yLowKey:i,yHighKey:o}=this.properties,s=this.axes[ChartAxisDirection20.X]?.scale,a=this.axes[ChartAxisDirection20.Y]?.scale,{xScaleType:r,yScaleType:n}=this.getScaleInformation({xScale:s,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(diff3(this.id,this.processedData)),c&&l.push(animationValidation3());const{dataModel:h,processedData:u}=await this.requestDataModel(t,this.data,{props:[keyProperty4(e,r,{id:"xValue"}),valueProperty7(i,n,{id:"yLowValue"}),valueProperty7(o,n,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(h,u),this.animationState.transition("updateData")}aggregateData(t,e){const i=this.axes[ChartAxisDirection20.X];if(i==null||!(ContinuousScale6.is(i.scale)||OrdinalTimeScale3.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"yHighValue",e),a=t.resolveColumnById(this,"yLowValue",e),{index:r}=t.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[r];return aggregateData(o,s,a,n)}xCoordinateRange(t){const e=this.axes[ChartAxisDirection20.X].scale.convert(t);return[e,e]}yCoordinateRange(t){const e=this.axes[ChartAxisDirection20.Y].scale.convert(t[0]);return[e,e]}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!(e&&i))return[];const{domain:{keys:[o]}}=e;if(t===ChartAxisDirection20.X){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s.def.valueType==="category"?o:fixNumericExtent4(extent(o))}else{const s=this.domainForClippedRange(ChartAxisDirection20.Y,["yHighValue","yLowValue"],"xValue",!0),a=findMinMax3(s);return fixNumericExtent4(a)}}getSeriesRange(t,e){return this.domainForVisibleRange(ChartAxisDirection20.Y,["yHighValue","yLowValue"],"xValue",e,!0)}createNodeData(){const{data:t,dataModel:e,processedData:i,axes:o}=this,s=o[ChartAxisDirection20.X],a=o[ChartAxisDirection20.Y];if(!(t&&s&&a&&e&&i))return;const r=s.scale,n=a.scale,{xKey:l,yLowKey:c,yHighKey:h,connectMissingData:u,marker:p,interpolation:d}=this.properties,g=i.dataSources.get(this.id)??[],f=(r.bandwidth??0)/2,y=e.resolveKeysById(this,"xValue",i),m=e.resolveColumnById(this,"yHighValue",i),b=e.resolveColumnById(this,"yLowValue",i),x=B=>r.convert(y[B])+f,S=[],v=[],T=[],D=(B,E,F)=>{const V=g[B],G=y[B];if(G==null)return;const W=T[T.length-1];if(Number.isFinite(E)&&Number.isFinite(F)){const H=(Z,J,K)=>{v.push({index:B,series:this,itemId:Z,datum:V,datumIndex:B,midPoint:{x:j,y:K},yHighValue:E,yLowValue:F,xValue:G,xKey:l,yLowKey:c,yHighKey:h,point:{x:j,y:K,size:Y},enabled:!0});const at=this.createLabelData({datumIndex:B,point:{x:j,y:K},value:J,yLowValue:F,yHighValue:E,itemId:Z,inverted:q,datum:V,series:this});S.push(at)},q=F>E,j=x(B),$=n.convert(E),X=n.convert(F),{size:Y}=p;H("high",E,$),H("low",F,X);const U={high:{point:{x:j,y:$},xDatum:G,yDatum:E},low:{point:{x:j,y:X},xDatum:G,yDatum:F}};Array.isArray(W)?W.push(U):W!=null?(W.skip+=1,T.push([U])):T.push([U])}else u||(Array.isArray(W)||W==null?T.push({skip:0}):W.skip+=1)},{dataAggregationFilters:k}=this,[A,M]=r.range,_=M-A,O=k?.find(B=>B.maxRange>_),C=O?.topIndices,I=O?.bottomIndices;let[w,L]=this.visibleRange("xValue",s.range,C);w=Math.max(w-1,0),L=Math.min(L+1,C?.length??y.length),i.input.count<1e3&&(w=0,L=i.input.count);for(let B=w;B<L;B+=1){const E=C?.[B]??B,F=I?.[B]??B;D(E,m[E],b[F])}const P=T.flatMap(B=>{if(!Array.isArray(B))return[];const E=B.map(F=>F.high);return interpolatePoints(E,d)}),z=T.flatMap(B=>{if(!Array.isArray(B))return[];const E=B.map(F=>F.low);return interpolatePoints(E,d)});return{itemId:`${c}-${h}`,labelData:S,nodeData:v,fillData:{itemId:"high",spans:P,phantomSpans:z},highStrokeData:{itemId:"high",spans:P},lowStrokeData:{itemId:"low",spans:z},scales:this.calculateScaling(),visible:this.visible}}createLabelData({datumIndex:t,point:e,value:i,itemId:o,inverted:s,datum:a,series:r}){const{xKey:n,yLowKey:l,yHighKey:c,xName:h,yName:u,yLowName:p,yHighName:d,label:g}=this.properties,{placement:f,padding:y=10}=g;let m=o;s&&(m=o==="low"?"high":"low");const b=f==="outside"&&m==="high"||f==="inside"&&m==="low"?-1:1;return{x:e.x,y:e.y+y*b,series:r,itemId:o,datum:a,datumIndex:t,text:this.getLabelText(g,{value:i,datum:a,itemId:o,xKey:n,yLowKey:l,yHighKey:c,xName:h,yLowName:p,yHighName:d,yName:u}),textAlign:"center",textBaseline:b===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(t){const{opacity:e,visible:i,animationEnabled:o}=t,[s,a]=t.paths,r=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:PointerEvents2.None,stroke:this.properties.stroke,strokeWidth:r,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i||o});const n=getShapeFill2(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults),l=this.getShapeFillBBox();applyShapeFillBBox3(s,n,l),s.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:PointerEvents2.None,fill:n,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:r,opacity:e,visible:i||o}),updateClipPath(this,a),updateClipPath(this,s)}updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(const i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(const i of t)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(t,e){const[i]=t;i.path.clear(),plotAreaPathFill(i,e.fillData),i.markDirty("RangeArea")}updateStrokePath(t,e){const[,i]=t;i.path.clear(),plotLinePathStroke(i,e.highStrokeData.spans),plotLinePathStroke(i,e.lowStrokeData.spans),i.markDirty("RangeArea")}updateMarkerSelection(t){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}getMarkerItemBaseStyle(t){const{properties:e}=this,{marker:i}=e,o=t?e.highlightStyle.item:void 0;return{shape:i.shape,size:i.size,fill:o?.fill??i.fill,fillOpacity:o?.fillOpacity??i.fillOpacity,stroke:o?.stroke??i.stroke,strokeWidth:o?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:o?.strokeOpacity??i.strokeOpacity,lineDash:o?.lineDash??i.lineDash,lineDashOffset:o?.lineDashOffset??i.lineDashOffset}}getMarkerItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{xKey:r,yHighKey:n,yLowKey:l,marker:c}=a,{itemStyler:h}=c;if(h!=null)return this.cachedDatumCallback(createDatumId6(t,o?"highlight":"node"),()=>this.callWithContext(h,{seriesId:s,datum:e,xKey:r,yHighKey:n,yLowKey:l,highlighted:o,...i}))}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i}=t,{xKey:o,yLowKey:s,yHighKey:a,marker:r,fill:n,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u}=this.properties,p=mergeDefaults5(i&&this.properties.highlightStyle.item,r.getStyle(),{fill:n,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:u}),d=this.getShapeFillBBox();e.each((g,f)=>{this.updateMarkerStyle(r,g,f.datum,f.point,{xKey:o,yHighKey:a,yLowKey:s},i,p,d)}),i||this.properties.marker.markClean()}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;return i.update(e,o=>{o.pointerEvents=PointerEvents2.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{updateLabelNode(e,this.properties.label,i)})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getTooltipContent(t,e){const{id:i,dataModel:o,processedData:s,axes:a,properties:r}=this,{xName:n,yName:l,yLowKey:c,yLowName:h,xKey:u,yHighKey:p,yHighName:d,tooltip:g}=r,f=a[ChartAxisDirection20.X],y=a[ChartAxisDirection20.Y];if(!o||!s||!f||!y)return;const m=s.dataSources.get(this.id)?.[t],b=o.resolveKeysById(this,"xValue",s)[t],x=o.resolveColumnById(this,"yHighValue",s)[t],S=o.resolveColumnById(this,"yLowValue",s)[t];if(b==null)return;const v=this.getMarkerItemBaseStyle(!1);Object.assign(v,this.getMarkerItemStyleOverrides(String(t),t,v,!1));const T=`${y.formatDatum(S)} - ${y.formatDatum(x)}`;return g.formatTooltip(this.properties,{heading:f.formatDatum(b),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:`${h??c} - ${d??p}`,value:T}]},{seriesId:i,datum:m,title:l,itemId:e?.itemId??"unknown",xName:n,yName:l,yLowKey:c,yLowName:h,xKey:u,yHighKey:p,yHighName:d,...v})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,marker:a}=this.properties;return{marker:getShapeStyle4({shape:a.shape,fill:a.fill??t,stroke:a.stroke??e,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},a.fillGradientDefaults,a.fillPatternDefaults),line:{stroke:e,strokeOpacity:o,strokeWidth:i,lineDash:s}}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yLowKey:o,yHighKey:s,yName:a,yLowName:r,yHighName:n,showInLegend:l}=this.properties,c=a??`${r??o} - ${n??s}`,h=`${o}-${s}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new Group9}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:o,paths:s}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(s,o),pathSwipeInAnimation(this,a,...s),resetMotion([e],resetMarkerPositionFn),markerSwipeScaleInAnimation(this,a,e),seriesLabelFadeInAnimation(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:o,contextData:s,paths:a,previousContextData:r}=t,[n,l]=a;if(n==null&&l==null)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);const c=()=>{this.resetPathAnimation(t),this.updateAreaPaths(a,s)},h=()=>{e.skipCurrentBatch(),c()};if(s==null||r==null){c(),markerFadeInAnimation(this,e,"added",i),pathFadeInAnimation(this,"fill_path_properties",e,"add",n),pathFadeInAnimation(this,"stroke_path_properties",e,"add",l),seriesLabelFadeInAnimation(this,"labels",e,o);return}const u=prepareRangeAreaPathAnimation(s,r,this.processedData?.reduced?.diff?.[this.id]);if(u===void 0){h();return}else if(u.status==="no-op")return;fromToMotion(this.id,"fill_path_properties",e,[n],u.fill.pathProperties),fromToMotion(this.id,"stroke_path_properties",e,[l],u.stroke.pathProperties),u.status==="added"?this.updateAreaPaths(a,s):u.status==="removed"?this.updateAreaPaths(a,r):(pathMotion(this.id,"fill_path_update",e,[n],u.fill.path),pathMotion(this.id,"stroke_path_update",e,[l],u.stroke.path)),u.hasMotion&&(markerFadeInAnimation(this,e,void 0,i),seriesLabelFadeInAnimation(this,"labels",e,o)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,s)})}getFormattedMarkerStyle(t){const{xKey:e,yLowKey:i,yHighKey:o}=this.properties;return this.getMarkerStyle(this.properties.marker,t.datum,{xKey:e,yLowKey:i,yHighKey:o},!0)}computeFocusBounds(t){const e=computeMarkerFocusBounds(this,t),i=computeMarkerFocusBounds(this,{...t,datumIndex:t.datumIndex+1});if(e&&i)return BBox13.merge([e,i])}isDatumEnabled(t,e){return e%2===0&&super.isDatumEnabled(t,e)}};RangeAreaSeries.className="RangeAreaSeries",RangeAreaSeries.type="range-area";var import_ag_charts_community177=require("ag-charts-community"),import_ag_charts_core65=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs5,interpolationValidator,markerOptionsDefs,seriesLabelOptionsDefs,shadowOptionsDefs,tooltipOptionsDefs:tooltipOptionsDefs5}=import_ag_charts_community177._ModuleSupport,rangeAreaSeriesOptionsDef={type:(0,import_ag_charts_core65.required)((0,import_ag_charts_core65.constant)("range-area")),xKey:(0,import_ag_charts_core65.required)(import_ag_charts_core65.string),yLowKey:(0,import_ag_charts_core65.required)(import_ag_charts_core65.string),yHighKey:(0,import_ag_charts_core65.required)(import_ag_charts_core65.string),xName:import_ag_charts_core65.string,yName:import_ag_charts_core65.string,yLowName:import_ag_charts_core65.string,yHighName:import_ag_charts_core65.string,showInMiniChart:import_ag_charts_core65.boolean,connectMissingData:import_ag_charts_core65.boolean,interpolation:interpolationValidator,label:{...seriesLabelOptionsDefs,padding:import_ag_charts_core65.positiveNumber,placement:(0,import_ag_charts_core65.union)("inside","outside")},marker:markerOptionsDefs,tooltip:tooltipOptionsDefs5,shadow:shadowOptionsDefs,...commonSeriesOptionsDefs5,...import_ag_charts_core65.fillOptionsDef,...import_ag_charts_core65.strokeOptionsDef,...import_ag_charts_core65.lineDashOptionsDef};rangeAreaSeriesOptionsDef.pickOutsideVisibleMinorAxis=import_ag_charts_core65.boolean,rangeAreaSeriesOptionsDef.focusPriority=import_ag_charts_core65.number;var import_ag_charts_community178=require("ag-charts-community"),RANGE_AREA_SERIES_THEME={series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community178._ModuleSupport.FILL_PATTERN_DEFAULTS,stroke:{$palette:"stroke"},fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:import_ag_charts_community178._ModuleSupport.FILL_PATTERN_DEFAULTS,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"}},axes:{[import_ag_charts_community178._ModuleSupport.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:CARTESIAN_AXIS_TYPE6,CARTESIAN_POSITION:CARTESIAN_POSITION4}}=import_ag_charts_community179._ModuleSupport,RangeAreaModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:t=>new RangeAreaSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:CARTESIAN_AXIS_TYPE6.NUMBER,position:CARTESIAN_POSITION4.LEFT},{type:CARTESIAN_AXIS_TYPE6.CATEGORY,position:CARTESIAN_POSITION4.BOTTOM}],themeTemplate:RANGE_AREA_SERIES_THEME},RangeAreaSeriesModule={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:rangeAreaSeriesOptionsDef,create:t=>new RangeAreaSeries(t)},import_ag_charts_community184=require("ag-charts-community"),import_ag_charts_community181=require("ag-charts-community"),AGGREGATION_THRESHOLD3=1e3,PRECISION=5;function aggregateRangeBarData(t,e,i,o){if(t.length<AGGREGATION_THRESHOLD3)return;const[s,a]=aggregationDomain(o);let r=maxRangeFittingPoints(t,PRECISION),{indexData:n,valueData:l}=createAggregationIndices(t,e,i,s,a,r);const c=[{maxRange:r,indexData:n}];for(;r>64;)({indexData:n,valueData:l,maxRange:r}=compactAggregationIndices(n,l,r)),c.push({maxRange:r,indexData:n});return c.reverse(),c}var import_ag_charts_community180=require("ag-charts-community"),{AbstractBarSeriesProperties:AbstractBarSeriesProperties3,FillGradientDefaults:FillGradientDefaults4,FillPatternDefaults:FillPatternDefaults4,SeriesTooltip:SeriesTooltip6,TempValidate:TempValidate62,COLOR_STRING:COLOR_STRING14,FUNCTION:FUNCTION10,LINE_DASH:LINE_DASH9,OBJECT:OBJECT28,PLACEMENT:PLACEMENT2,POSITIVE_NUMBER:POSITIVE_NUMBER21,RATIO:RATIO17,STRING:STRING28,BOOLEAN:BOOLEAN28,COLOR_GRADIENT:COLOR_GRADIENT4,COLOR_PATTERN:COLOR_PATTERN4,OR:OR8,DropShadow:DropShadow2,Label:Label4}=import_ag_charts_community180._ModuleSupport,RangeBarSeriesLabel=class extends Label4{constructor(){super(...arguments),this.placement="inside",this.padding=6}};__decorateClass([TempValidate62(PLACEMENT2)],RangeBarSeriesLabel.prototype,"placement",2),__decorateClass([TempValidate62(POSITIVE_NUMBER21)],RangeBarSeriesLabel.prototype,"padding",2);var RangeBarProperties=class extends AbstractBarSeriesProperties3{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new FillGradientDefaults4,this.fillPatternDefaults=new FillPatternDefaults4,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new DropShadow2().set({enabled:!1}),this.label=new RangeBarSeriesLabel,this.tooltip=new SeriesTooltip6,this.fastDataProcessing=!1}};__decorateClass([TempValidate62(STRING28)],RangeBarProperties.prototype,"xKey",2),__decorateClass([TempValidate62(STRING28)],RangeBarProperties.prototype,"yLowKey",2),__decorateClass([TempValidate62(STRING28)],RangeBarProperties.prototype,"yHighKey",2),__decorateClass([TempValidate62(STRING28,{optional:!0})],RangeBarProperties.prototype,"xName",2),__decorateClass([TempValidate62(STRING28,{optional:!0})],RangeBarProperties.prototype,"yName",2),__decorateClass([TempValidate62(STRING28,{optional:!0})],RangeBarProperties.prototype,"yLowName",2),__decorateClass([TempValidate62(STRING28,{optional:!0})],RangeBarProperties.prototype,"yHighName",2),__decorateClass([TempValidate62(OR8(COLOR_GRADIENT4,COLOR_PATTERN4,COLOR_STRING14))],RangeBarProperties.prototype,"fill",2),__decorateClass([TempValidate62(OBJECT28)],RangeBarProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate62(OBJECT28)],RangeBarProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate62(RATIO17)],RangeBarProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate62(COLOR_STRING14)],RangeBarProperties.prototype,"stroke",2),__decorateClass([TempValidate62(POSITIVE_NUMBER21)],RangeBarProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate62(RATIO17)],RangeBarProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate62(LINE_DASH9)],RangeBarProperties.prototype,"lineDash",2),__decorateClass([TempValidate62(POSITIVE_NUMBER21)],RangeBarProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate62(POSITIVE_NUMBER21)],RangeBarProperties.prototype,"cornerRadius",2),__decorateClass([TempValidate62(FUNCTION10,{optional:!0})],RangeBarProperties.prototype,"itemStyler",2),__decorateClass([TempValidate62(OBJECT28)],RangeBarProperties.prototype,"shadow",2),__decorateClass([TempValidate62(OBJECT28)],RangeBarProperties.prototype,"label",2),__decorateClass([TempValidate62(OBJECT28)],RangeBarProperties.prototype,"tooltip",2),__decorateClass([TempValidate62(BOOLEAN28)],RangeBarProperties.prototype,"fastDataProcessing",2);var{SeriesNodePickMode:SeriesNodePickMode4,valueProperty:valueProperty8,keyProperty:keyProperty5,ChartAxisDirection:ChartAxisDirection21,checkCrisp,updateLabelNode:updateLabelNode2,SMALLEST_KEY_INTERVAL:SMALLEST_KEY_INTERVAL3,LARGEST_KEY_INTERVAL,diff:diff4,prepareBarAnimationFunctions,midpointStartingBarPosition,resetBarSelectionsFn,fixNumericExtent:fixNumericExtent5,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation2,resetLabelFn:resetLabelFn2,animationValidation:animationValidation4,computeBarFocusBounds:computeBarFocusBounds4,visibleRangeIndices:visibleRangeIndices2,createDatumId:createDatumId7,ContinuousScale:ContinuousScale7,OrdinalTimeScale:OrdinalTimeScale4,Rect:Rect5,PointerEvents:PointerEvents3,motion:motion2,applyShapeStyle:applyShapeStyle2,findMinMax:findMinMax4,getShapeStyle:getShapeStyle5}=import_ag_charts_community181._ModuleSupport,RangeBarSeriesNodeEvent=class extends import_ag_charts_community181._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},RangeBarSeries=class extends import_ag_charts_community181._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[SeriesNodePickMode4.AXIS_ALIGNED,SeriesNodePickMode4.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:resetBarSelectionsFn,label:resetLabelFn2}}),this.properties=new RangeBarProperties,this.dataAggregationFilters=void 0,this.NodeEvent=RangeBarSeriesNodeEvent}async processData(t){if(!this.properties.isValid())return;const{xKey:e,yLowKey:i,yHighKey:o,fastDataProcessing:s}=this.properties,a=!s,r=this.getCategoryAxis()?.scale,n=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:n}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(diff4(this.id,this.processedData)),u.push(animationValidation4()));const p=this.visible?{}:{forceValue:0},{dataModel:d,processedData:g}=await this.requestDataModel(t,this.data,{props:[keyProperty5(e,c,{id:"xValue"}),valueProperty8(i,h,{id:"yLowValue",invalidValue:null,...p}),valueProperty8(o,h,{id:"yHighValue",invalidValue:null,...p}),...l?[SMALLEST_KEY_INTERVAL3,LARGEST_KEY_INTERVAL]:[],...u],groupByKeys:a});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.largestDataInterval=g.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(d,g),this.animationState.transition("updateData")}aggregateData(t,e){if(e.type!=="grouped")return;const i=this.axes[ChartAxisDirection21.X];if(i==null||!(ContinuousScale7.is(i.scale)||OrdinalTimeScale4.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"yHighValue",e),a=t.resolveColumnById(this,"yLowValue",e),{index:r}=t.resolveProcessedDataDefById(this,"xValue"),n=e.domain.keys[r];return aggregateRangeBarData(o,s,a,n)}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[o]}=e.domain;if(t===this.getCategoryDirection()){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s?.def.valueType==="category"?o:this.padBandExtent(o)}else{const s=this.domainForClippedRange(ChartAxisDirection21.Y,["yHighValue","yLowValue"],"xValue",!0),a=findMinMax4(s);return fixNumericExtent5(a)}}getSeriesRange(t,e){return this.domainForVisibleRange(ChartAxisDirection21.Y,["yHighValue","yLowValue"],"xValue",e,!0)}createNodeData(){const{data:t,dataModel:e,groupScale:i,processedData:o,visible:s}=this,a=this.getCategoryAxis(),r=this.getValueAxis();if(!(t&&a&&r&&e&&o?.dataSources))return;const n=a.scale,l=r.scale,c=this.getBarDirection()===ChartAxisDirection21.X,{xKey:h,yLowKey:u,yHighKey:p,strokeWidth:d}=this.properties,g=`${u}-${p}`,f={itemId:g,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!s)return f;const y=o.dataSources.get(this.id)??[],m=e.resolveKeysById(this,"xValue",o),b=e.resolveColumnById(this,"yLowValue",o),x=e.resolveColumnById(this,"yHighValue",o),{barWidth:S,groupIndex:v}=this.updateGroupScale(a),T=ContinuousScale7.is(n)?S*-.5:0,D=i.convert(String(v)),k=checkCrisp(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval),A=L=>Math.round(n.convert(m[L]))+D+T,M=(L,P,z,R,B,E,F)=>{const V=y[L],G=m[L];if(G==null)return;const W=b[L],H=x[L];if(!Number.isFinite(W?.valueOf())||!Number.isFinite(H?.valueOf()))return;const[q,j]=W<H?[W,H]:[H,W],$=Math.round(l.convert(E)),X=Math.round(l.convert(B)),Y=Math.max(d,Math.abs(X-$)),U={x:c?Math.min($,X):z,y:c?z:Math.min($,X),width:c?Y:R,height:c?R:Y},Z={x:U.x+U.width/2,y:U.y+U.height/2},J=this.createLabelData({datumIndex:L,rect:U,barAlongX:c,yLowValue:q,yHighValue:j,datum:V,series:this}),K={index:P,valueIndex:L,series:this,itemId:g,datum:V,datumIndex:L,xValue:G,yLowValue:W,yHighValue:H,yLowKey:u,yHighKey:p,xKey:h,x:U.x,y:U.y,width:U.width,height:U.height,midPoint:Z,crisp:F,labels:J};f.nodeData.push(K),f.labelData.push(...J)},{dataAggregationFilters:_}=this,[O,C]=n.range,I=C-O,w=_?.find(L=>L.maxRange>I);if(w!=null){const{maxRange:L,indexData:P}=w,[z,R]=visibleRangeIndices2(L,a.range,B=>{const E=B*SPAN,F=P[E+X_MIN],V=P[E+X_MAX];if(F===-1)return;const G=(F+V)/2|0;return[A(G),A(V)+S]});for(let B=z;B<R;B+=1){const E=B*SPAN,F=P[E+X_MIN],V=P[E+X_MAX],G=P[E+Y_MIN],W=P[E+Y_MAX];if(F===-1)continue;const H=(F+V)/2|0;if(m[H]==null)continue;const j=A(H),$=Math.abs(A(F)-A(V))+S,X=b[G],Y=x[W];M(H,0,j,$,X,Y,!1)}}else if(o.type==="ungrouped"){let[L,P]=visibleRangeIndices2(y.length,a.range,z=>[A(z),S]);o.input.count<1e3&&(L=0,P=o.input.count);for(let z=L;z<P;z+=1){const R=A(z),B=S,E=b[z],F=x[z];M(z,0,R,B,E,F,k)}}else for(const{datumIndex:L,groupIndex:P}of e.forEachGroupDatum(this,o)){const z=A(L),R=S,B=b[L],E=x[L];M(L,P,z,R,B,E,k)}return f}createLabelData({datumIndex:t,rect:e,barAlongX:i,yLowValue:o,yHighValue:s,datum:a,series:r}){const{xKey:n,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:p,yName:d,label:g}=this.properties,f={datum:a,xKey:n,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:p,yName:d},{placement:y,padding:m}=g,x=m*(y==="outside"?1:-1),S={datumIndex:t,x:e.x+(i?-x:e.width/2),y:e.y+(i?e.height/2:e.height+x),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(g,{itemId:"low",value:o,...f}),itemId:"low",datum:a,series:r},v={datumIndex:t,x:e.x+(i?e.width+x:e.width/2),y:e.y+(i?e.height/2:-x),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(g,{itemId:"high",value:s,...f}),itemId:"high",datum:a,series:r};return y==="outside"&&(S.textAlign=i?"right":"center",S.textBaseline=i?"middle":"top",v.textAlign=i?"left":"center",v.textBaseline=i?"middle":"bottom"),[S,v]}nodeFactory(){return new Rect5}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o,void 0,s=>this.getDatumId(s))}getItemBaseStyle(t){const{properties:e}=this,{cornerRadius:i,fillGradientDefaults:o,fillPatternDefaults:s}=e,a=t?e.highlightStyle.item:void 0;return getShapeStyle5({fill:a?.fill??e.fill,fillOpacity:a?.fillOpacity??e.fillOpacity,stroke:a?.stroke??e.stroke,strokeWidth:a?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:a?.strokeOpacity??e.strokeOpacity,lineDash:a?.lineDash??e.lineDash??[],lineDashOffset:a?.lineDashOffset??e.lineDashOffset,cornerRadius:i},o,s)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{xKey:r,yHighKey:n,yLowKey:l,itemStyler:c,fillGradientDefaults:h,fillPatternDefaults:u}=a;if(c==null)return;const p=this.cachedDatumCallback(createDatumId7(t,o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:s,datum:e,xKey:r,yHighKey:n,yLowKey:l,highlighted:o,...i}));return getShapeStyle5(p,h,u)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getCategoryDirection()===ChartAxisDirection21.X,s=this.getItemBaseStyle(i),a=this.getShapeFillBBox();e.each((r,n)=>{const l=this.getItemStyleOverrides(String(n.datumIndex),n.datum,s,i);applyShapeStyle2(r,s,l,a),r.cornerRadius=l?.cornerRadius??s.cornerRadius,r.visible=o?n.width>0:n.height>0,r.crisp=n.crisp})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=PointerEvents3.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{updateLabelNode2(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:r,yName:n,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,tooltip:p}=s,d=this.getCategoryAxis(),g=this.getValueAxis();if(!i||!o||!d||!g)return;const f=o.dataSources.get(this.id)?.[t],y=i.resolveKeysById(this,"xValue",o)[t],m=i.resolveColumnById(this,"yHighValue",o)[t],b=i.resolveColumnById(this,"yLowValue",o)[t];if(y==null)return;const x=this.getItemBaseStyle(!1);Object.assign(x,this.getItemStyleOverrides(String(t),f,x,!1));const S=`${g.formatDatum(b)} - ${g.formatDatum(m)}`;return p.formatTooltip(this.properties,{heading:d.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:n,fallbackLabel:`${h??l} - ${u??c}`,value:S}]},{seriesId:e,datum:f,title:n,xKey:a,xName:r,yName:n,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,...x})}legendItemSymbol(){const{fill:t,stroke:e,strokeWidth:i,fillOpacity:o,strokeOpacity:s,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l}=this.properties;return{marker:getShapeStyle5({fill:t,stroke:e,fillOpacity:o,strokeOpacity:s,strokeWidth:i,lineDash:a,lineDashOffset:r},n,l)}}getLegendData(t){if(t!=="category")return[];const{id:e,visible:i}=this,{yName:o,yLowName:s,yHighName:a,yLowKey:r,yHighKey:n,showInLegend:l}=this.properties,c=o??`${s??r} - ${a??n}`,h=`${r}-${n}`;return[{legendType:"category",id:e,itemId:h,seriesId:e,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=prepareBarAnimationFunctions(midpointStartingBarPosition(this.isVertical(),"normal"));motion2.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i),seriesLabelFadeInAnimation2(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){const{datumSelection:e,labelSelection:i,previousContextData:o}=t,{processedData:s}=this,a=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=o==null?"fade":"normal",n=prepareBarAnimationFunctions(midpointStartingBarPosition(this.isVertical(),r));motion2.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],n,(l,c)=>this.getDatumId(c),a),seriesLabelFadeInAnimation2(this,"labels",this.ctx.animationManager,i)}getDatumId(t){return`${t.xValue}-${t.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return computeBarFocusBounds4(this,this.contextNodeData?.nodeData[t])}};RangeBarSeries.className="RangeBarSeries",RangeBarSeries.type="range-bar";var import_ag_charts_community182=require("ag-charts-community"),import_ag_charts_core66=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs6,seriesLabelOptionsDefs:seriesLabelOptionsDefs2,shadowOptionsDefs:shadowOptionsDefs2,tooltipOptionsDefs:tooltipOptionsDefs6}=import_ag_charts_community182._ModuleSupport,rangeBarSeriesOptionsDef={type:(0,import_ag_charts_core66.required)((0,import_ag_charts_core66.constant)("range-bar")),xKey:(0,import_ag_charts_core66.required)(import_ag_charts_core66.string),yLowKey:(0,import_ag_charts_core66.required)(import_ag_charts_core66.string),yHighKey:(0,import_ag_charts_core66.required)(import_ag_charts_core66.string),xName:import_ag_charts_core66.string,yName:import_ag_charts_core66.string,yLowName:import_ag_charts_core66.string,yHighName:import_ag_charts_core66.string,direction:(0,import_ag_charts_core66.union)("horizontal","vertical"),showInMiniChart:import_ag_charts_core66.boolean,cornerRadius:import_ag_charts_core66.positiveNumber,itemStyler:import_ag_charts_core66.callback,label:{...seriesLabelOptionsDefs2,padding:import_ag_charts_core66.positiveNumber,placement:(0,import_ag_charts_core66.union)("inside","outside")},tooltip:tooltipOptionsDefs6,shadow:shadowOptionsDefs2,...commonSeriesOptionsDefs6,...import_ag_charts_core66.fillOptionsDef,...import_ag_charts_core66.strokeOptionsDef,...import_ag_charts_core66.lineDashOptionsDef};rangeBarSeriesOptionsDef.pickOutsideVisibleMinorAxis=import_ag_charts_core66.boolean,rangeBarSeriesOptionsDef.fastDataProcessing=import_ag_charts_core66.boolean,rangeBarSeriesOptionsDef.focusPriority=import_ag_charts_core66.number;var import_ag_charts_community183=require("ag-charts-community"),RANGE_BAR_SERIES_THEME={series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community183._ModuleSupport.FILL_PATTERN_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},placement:"inside"}},axes:{[import_ag_charts_community183._ModuleSupport.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},RangeBarModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:t=>new RangeBarSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:import_ag_charts_community184._ModuleSupport.DIRECTION_SWAP_AXES,themeTemplate:RANGE_BAR_SERIES_THEME,groupable:!0},RangeBarSeriesModule={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:rangeBarSeriesOptionsDef,create:t=>new RangeBarSeries(t)},import_ag_charts_community189=require("ag-charts-community"),import_ag_charts_community186=require("ag-charts-community"),import_ag_charts_community185=require("ag-charts-community"),{AbstractBarSeriesProperties:AbstractBarSeriesProperties4,BaseProperties:BaseProperties22,FillGradientDefaults:FillGradientDefaults5,FillPatternDefaults:FillPatternDefaults5,PropertiesArray:PropertiesArray6,SeriesTooltip:SeriesTooltip7,TempValidate:TempValidate63,BOOLEAN:BOOLEAN29,COLOR_STRING:COLOR_STRING15,COLOR_PATTERN:COLOR_PATTERN5,FUNCTION:FUNCTION11,LINE_DASH:LINE_DASH10,NUMBER:NUMBER15,OBJECT:OBJECT29,OBJECT_ARRAY,POSITIVE_NUMBER:POSITIVE_NUMBER22,OR:OR9,COLOR_GRADIENT:COLOR_GRADIENT5,RATIO:RATIO18,STRING:STRING29,UNION:UNION11,DropShadow:DropShadow3,Label:Label5}=import_ag_charts_community185._ModuleSupport,WaterfallSeriesTotal=class extends BaseProperties22{};__decorateClass([TempValidate63(UNION11(["subtotal","total"],"a total type"))],WaterfallSeriesTotal.prototype,"totalType",2),__decorateClass([TempValidate63(NUMBER15)],WaterfallSeriesTotal.prototype,"index",2),__decorateClass([TempValidate63(STRING29)],WaterfallSeriesTotal.prototype,"axisLabel",2);var WaterfallSeriesItemTooltip=class extends BaseProperties22{};__decorateClass([TempValidate63(FUNCTION11,{optional:!0})],WaterfallSeriesItemTooltip.prototype,"renderer",2);var WaterfallSeriesLabel=class extends Label5{constructor(){super(...arguments),this.placement="outside-end",this.padding=6}};__decorateClass([TempValidate63(UNION11(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],WaterfallSeriesLabel.prototype,"placement",2),__decorateClass([TempValidate63(POSITIVE_NUMBER22)],WaterfallSeriesLabel.prototype,"padding",2);var WaterfallSeriesItem=class extends BaseProperties22{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new FillGradientDefaults5,this.fillPatternDefaults=new FillPatternDefaults5,this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new DropShadow3().set({enabled:!1}),this.label=new WaterfallSeriesLabel,this.tooltip=new WaterfallSeriesItemTooltip}};__decorateClass([TempValidate63(STRING29,{optional:!0})],WaterfallSeriesItem.prototype,"name",2),__decorateClass([TempValidate63(OR9(COLOR_GRADIENT5,COLOR_STRING15,COLOR_PATTERN5))],WaterfallSeriesItem.prototype,"fill",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItem.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItem.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate63(COLOR_STRING15)],WaterfallSeriesItem.prototype,"stroke",2),__decorateClass([TempValidate63(RATIO18)],WaterfallSeriesItem.prototype,"fillOpacity",2),__decorateClass([TempValidate63(RATIO18)],WaterfallSeriesItem.prototype,"strokeOpacity",2),__decorateClass([TempValidate63(LINE_DASH10)],WaterfallSeriesItem.prototype,"lineDash",2),__decorateClass([TempValidate63(POSITIVE_NUMBER22)],WaterfallSeriesItem.prototype,"lineDashOffset",2),__decorateClass([TempValidate63(POSITIVE_NUMBER22)],WaterfallSeriesItem.prototype,"strokeWidth",2),__decorateClass([TempValidate63(POSITIVE_NUMBER22)],WaterfallSeriesItem.prototype,"cornerRadius",2),__decorateClass([TempValidate63(FUNCTION11,{optional:!0})],WaterfallSeriesItem.prototype,"itemStyler",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItem.prototype,"shadow",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItem.prototype,"label",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItem.prototype,"tooltip",2);var WaterfallSeriesConnectorLine=class extends BaseProperties22{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};__decorateClass([TempValidate63(BOOLEAN29)],WaterfallSeriesConnectorLine.prototype,"enabled",2),__decorateClass([TempValidate63(COLOR_STRING15)],WaterfallSeriesConnectorLine.prototype,"stroke",2),__decorateClass([TempValidate63(RATIO18)],WaterfallSeriesConnectorLine.prototype,"strokeOpacity",2),__decorateClass([TempValidate63(LINE_DASH10)],WaterfallSeriesConnectorLine.prototype,"lineDash",2),__decorateClass([TempValidate63(POSITIVE_NUMBER22)],WaterfallSeriesConnectorLine.prototype,"lineDashOffset",2),__decorateClass([TempValidate63(POSITIVE_NUMBER22)],WaterfallSeriesConnectorLine.prototype,"strokeWidth",2);var WaterfallSeriesItems=class extends BaseProperties22{constructor(){super(...arguments),this.positive=new WaterfallSeriesItem,this.negative=new WaterfallSeriesItem,this.total=new WaterfallSeriesItem}};__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItems.prototype,"positive",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItems.prototype,"negative",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesItems.prototype,"total",2);var WaterfallSeriesProperties=class extends AbstractBarSeriesProperties4{constructor(){super(...arguments),this.item=new WaterfallSeriesItems,this.totals=new PropertiesArray6(WaterfallSeriesTotal),this.line=new WaterfallSeriesConnectorLine,this.tooltip=new SeriesTooltip7}};__decorateClass([TempValidate63(STRING29)],WaterfallSeriesProperties.prototype,"xKey",2),__decorateClass([TempValidate63(STRING29)],WaterfallSeriesProperties.prototype,"yKey",2),__decorateClass([TempValidate63(STRING29,{optional:!0})],WaterfallSeriesProperties.prototype,"xName",2),__decorateClass([TempValidate63(STRING29,{optional:!0})],WaterfallSeriesProperties.prototype,"yName",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesProperties.prototype,"item",2),__decorateClass([TempValidate63(OBJECT_ARRAY)],WaterfallSeriesProperties.prototype,"totals",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesProperties.prototype,"line",2),__decorateClass([TempValidate63(OBJECT29)],WaterfallSeriesProperties.prototype,"tooltip",2);var{adjustLabelPlacement,SeriesNodePickMode:SeriesNodePickMode5,fixNumericExtent:fixNumericExtent6,valueProperty:valueProperty9,keyProperty:keyProperty6,accumulativeValueProperty,trailingAccumulatedValueProperty,ChartAxisDirection:ChartAxisDirection22,createDatumId:createDatumId8,checkCrisp:checkCrisp2,updateLabelNode:updateLabelNode3,prepareBarAnimationFunctions:prepareBarAnimationFunctions2,collapsedStartingBarPosition,resetBarSelectionsFn:resetBarSelectionsFn2,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation3,resetLabelFn:resetLabelFn3,animationValidation:animationValidation5,DEFAULT_CARTESIAN_DIRECTION_KEYS:DEFAULT_CARTESIAN_DIRECTION_KEYS2,DEFAULT_CARTESIAN_DIRECTION_NAMES:DEFAULT_CARTESIAN_DIRECTION_NAMES2,computeBarFocusBounds:computeBarFocusBounds5,isContinuous,Rect:Rect6,motion:motion3,applyShapeStyle:applyShapeStyle3,getShapeStyle:getShapeStyle6}=import_ag_charts_community186._ModuleSupport,WaterfallSeries=class extends import_ag_charts_community186._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:DEFAULT_CARTESIAN_DIRECTION_KEYS2,directionNames:DEFAULT_CARTESIAN_DIRECTION_NAMES2,categoryKey:void 0,pickModes:[SeriesNodePickMode5.NEAREST_NODE,SeriesNodePickMode5.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:resetBarSelectionsFn2,label:resetLabelFn3}}),this.properties=new WaterfallSeriesProperties,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(t){const{xKey:e,yKey:i,totals:o}=this.properties,{data:s=[]}=this;if(!this.properties.isValid()||!this.visible)return;const a=b=>isContinuous(b)&&Number(b)>=0,r=b=>isContinuous(b)&&Number(b)>=0,n=b=>b==="total"||b==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],h=o.reduce((b,x)=>{const S=b.get(x.index);return S?S.push(x):b.set(x.index,[x]),b},new Map);s.forEach((b,x)=>{c.push(b),h.get(x)?.forEach(S=>c.push({...S.toJson(),[e]:S.axisLabel}))});const u=[];this.ctx.animationManager.isSkipped()||u.push(animationValidation5());const p=this.getCategoryAxis()?.scale,d=this.getValueAxis()?.scale,{isContinuousX:g,xScaleType:f,yScaleType:y}=this.getScaleInformation({xScale:p,yScale:d}),{processedData:m}=await this.requestDataModel(t,c,{props:[keyProperty6(e,f,{id:"xValue"}),accumulativeValueProperty(i,y,{...l,id:"yCurrent"}),accumulativeValueProperty(i,y,{...l,missingValue:0,id:"yCurrentTotal"}),accumulativeValueProperty(i,y,{...l,id:"yCurrentPositive",validation:a}),accumulativeValueProperty(i,y,{...l,id:"yCurrentNegative",validation:r}),trailingAccumulatedValueProperty(i,y,{...l,id:"yPrevious"}),valueProperty9(i,y,{id:"yRaw"}),valueProperty9("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:n}),...g?[import_ag_charts_community186._ModuleSupport.SMALLEST_KEY_INTERVAL,import_ag_charts_community186._ModuleSupport.LARGEST_KEY_INTERVAL]:[],...u]});this.smallestDataInterval=m.reduced?.smallestKeyInterval,this.largestDataInterval=m.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i}=this;if(!e||!i)return[];const{keys:[o],values:s}=e.domain;if(t===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue");if(a?.def.type==="key"&&a?.def.valueType==="category")return o;const r=t===ChartAxisDirection22.Y,n=this.getCategoryAxis().isReversed();return this.padBandExtent(o,n!==r)}else{const a=i.resolveProcessedDataIndexById(this,"yCurrent"),r=s[a],n=[Math.min(0,r[0]),Math.max(0,r[1])];return fixNumericExtent6(n)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{data:t,dataModel:e,processedData:i}=this,o=this.getCategoryAxis(),s=this.getValueAxis();if(!t||!o||!s||!e||!i)return;const{line:a}=this.properties,r=o.scale,n=s.scale,l=this.getBarDirection()===ChartAxisDirection22.X,c=this.getBandwidth(o)??10,h=o.isReversed(),u=s.isReversed();if(i.type!=="ungrouped")return;const p={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return p;const d=[],g=e.resolveKeysById(this,"xValue",i),f=e.resolveColumnById(this,"yRaw",i),y=e.resolveColumnById(this,"totalTypeValue",i),m=e.resolveColumnById(this,"yCurrent",i),b=e.resolveColumnById(this,"yPrevious",i),x=e.resolveColumnById(this,"yCurrentTotal",i),S=checkCrisp2(o?.scale,o?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function v(I,w,L){return I||w?{cumulativeValue:x[L],trailingValue:w?D:0}:{cumulativeValue:m[L],trailingValue:b[L]}}function T(I,w,L,P,z){return I?P:w?(P??0)-(z??0):L}let D=0;const{xKey:k,yKey:A,xName:M,yName:_}=this.properties;(i.dataSources.get(this.id)??[]).forEach((I,w)=>{const L=y[w],P=this.isSubtotal(L),z=this.isTotal(L),R=z||P,B=g[w];if(B==null)return;const E=Math.round(r.convert(B)),F=f[w],{cumulativeValue:V,trailingValue:G}=v(z,P,w);R&&(D=V??0);const W=Math.round(n.convert(V)),H=Math.round(n.convert(G)),q=T(z,P,F,V,G),j=(q??0)>=0,$=this.getSeriesItemType(j,L),{strokeWidth:X,label:Y}=this.getItemConfig($),U=j?W:H,Z=j?H:W,J=Math.max(X,Math.abs(Z-U)),K={x:l?Math.min(U,Z):E,y:l?E:Math.min(U,Z),width:l?J:c,height:l?c:J},at={x:K.x+K.width/2,y:K.y+K.height/2},rt=R?W:H,tt=Math.floor(a.strokeWidth)%2/2,it=h?W:rt,Q=h?rt:W;let et,ot;l?(et={x:it+tt,y:K.y},ot={x:Q+tt,y:K.y+K.height}):(et={x:K.x,y:it+tt},ot={x:K.x+K.width,y:Q+tt});const lt={x:h?ot.x:et.x,y:h?ot.y:et.y,x2:h?et.x:ot.x,y2:h?et.y:ot.y,size:0};d.push(lt);const ct=$==="subtotal"?"total":$,ht=this.getLabelText(Y,{itemId:ct,value:q,datum:I,xKey:k,yKey:A,xName:M,yName:_}),dt={index:w,series:this,itemId:$,datum:I,datumIndex:w,cumulativeValue:V??0,xValue:B,yValue:q,yKey:A,xKey:k,x:K.x,y:K.y,width:K.width,height:K.height,midPoint:at,crisp:S,label:{text:ht,...adjustLabelPlacement({isUpward:(q??-1)>=0!==u,isVertical:!l,placement:Y.placement,padding:Y.padding,rect:K})}};p.nodeData.push(dt),p.labelData.push(dt)});const C=this.properties.line.enabled;return m!=null&&C&&(p.pointData=d),p}updateSeriesItemTypes(){const{dataModel:t,seriesItemTypes:e,processedData:i}=this;if(!t||!i)return;e.clear();const o=t.resolveProcessedDataIndexById(this,"yCurrentPositive"),s=t.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=t.resolveProcessedDataIndexById(this,"totalTypeValue"),r=i.domain.values[o]??[],n=i.domain.values[s]??[];r.length>0&&e.add("positive"),n.length>0&&e.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&e.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new Rect6}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)}getItemStyle(t,e,i,o){const{id:s,properties:a}=this,r=a.item[i==="subtotal"?"total":i],n=o?a.highlightStyle.item:void 0,{itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:h}=r,{xKey:u,yKey:p}=a,d=getShapeStyle6({fill:n?.fill??r.fill,fillOpacity:n?.fillOpacity??r.fillOpacity,stroke:n?.stroke??r.stroke,strokeWidth:n?.strokeWidth??r.strokeWidth,strokeOpacity:n?.strokeOpacity??r.strokeOpacity,lineDash:n?.lineDash??r.lineDash??[],lineDashOffset:n?.lineDashOffset??r.lineDashOffset,cornerRadius:r.cornerRadius},c,h);if(l!=null){let g=this.cachedDatumCallback(createDatumId8(t,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:s,itemId:i,datum:e,xKey:u,yKey:p,highlighted:o,...d}));g=getShapeStyle6(g,c,h),Object.assign(d,g)}return d}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getCategoryDirection()===ChartAxisDirection22.X,s=this.getShapeFillBBox();e.each((a,r)=>{const n=r.itemId,l=this.getItemStyle(String(r.datumIndex),r.datum,n,i);applyShapeStyle3(a,l,void 0,s),a.visible=o?r.width>0:r.height>0,a.crisp=r.crisp})}updateLabelSelection(t){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const o=e.filter(s=>{const{label:a}=this.getItemConfig(s.itemId);return a.enabled});return i.update(o)}updateLabelNodes(t){t.labelSelection.each((e,i)=>{updateLabelNode3(e,this.getItemConfig(i.itemId).label,i.label)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{xKey:a,xName:r,yKey:n,yName:l,tooltip:c}=s,h=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!o||!h||!u)return;const p=o.dataSources.get(this.id)?.[t],d=i.resolveKeysById(this,"xValue",o)[t],g=i.resolveColumnById(this,"yRaw",o)[t],f=i.resolveColumnById(this,"yCurrentTotal",o),y=i.resolveColumnById(this,"totalTypeValue",o);if(d==null)return;const m=y[t],b=(g??0)>=0,x=this.getSeriesItemType(b,m);let S;if(this.isTotal(m))S=f[t];else if(this.isSubtotal(m)){S=f[t];for(let T=t-1;T>=0;T-=1)if(this.isSubtotal(y[T])){S=S-f[T];break}}else S=g;const v=this.getItemStyle(String(t),p,x,!1);return c.formatTooltip(this.properties,{heading:h.formatDatum(d),symbol:this.legendItemSymbol(x),data:[{label:l,fallbackLabel:n,value:u.formatDatum(S)}]},{seriesId:e,datum:p,title:l,itemId:x,xKey:a,xName:r,yKey:n,yName:l,...v})}legendItemSymbol(t){const{fill:e,stroke:i,fillOpacity:o,strokeOpacity:s,strokeWidth:a,lineDash:r,lineDashOffset:n,fillGradientDefaults:l,fillPatternDefaults:c}=this.getItemConfig(t);return{marker:getShapeStyle6({fill:e,stroke:i,fillOpacity:o,strokeOpacity:s,strokeWidth:a,lineDash:r,lineDashOffset:n},l,c)}}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,o=[],s=r=>r.charAt(0).toUpperCase()+r.substring(1),{showInLegend:a}=this.properties;return i.forEach(r=>{const{name:n}=this.getItemConfig(r);o.push({legendType:"category",id:e,itemId:r,seriesId:e,enabled:!0,label:{text:n??s(r)},symbol:this.legendItemSymbol(r),hideInLegend:!a,isFixed:!0})}),o}toggleSeriesItem(){}animateEmptyUpdateReady(t){const{datumSelection:e,labelSelection:i,contextData:o}=t,s=prepareBarAnimationFunctions2(collapsedStartingBarPosition(this.isVertical(),this.axes,"normal"));motion3.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],s),seriesLabelFadeInAnimation3(this,"labels",this.ctx.animationManager,i);const{pointData:a}=o;a&&(this.isVertical()?this.animateConnectorLinesVertical(t):this.animateConnectorLinesHorizontal(t))}animateConnectorLinesHorizontal(t){const{pointData:e=[]}=t.contextData,[i]=t.paths,{path:o}=i;this.updateLineNode(i);const s=this.getValueAxis(),a=s?.isReversed(),r=a?(h,u)=>h<u:(h,u)=>h>u,n=s?.scale.convert(0),l=e.reduce((h,u)=>(r(u.x,h)&&(h=u.x),h),a?1/0:0),c=(h,u,p,d,g)=>(h-u)/(p-u)*(g-d)+d;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:l,ease:import_ag_charts_community186._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(h){o.clear(!0),e.forEach((u,p)=>{const d=c(h,n,l,n,u.x),g=c(h,n,l,n,u.x2);p!==0&&o.lineTo(d,u.y),o.moveTo(g,u.y2)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(t)})}animateConnectorLinesVertical(t){const{pointData:e=[]}=t.contextData,[i]=t.paths,{path:o}=i;this.updateLineNode(i);const s=this.getValueAxis(),a=s?.isReversed(),r=a?(h,u)=>h>u:(h,u)=>h<u,n=s?.scale.convert(0),l=e.reduce((h,u)=>(r(u.y,h)&&(h=u.y),h),a?0:1/0),c=(h,u,p,d,g)=>(h-u)/(p-u)*(g-d)+d;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:l,ease:import_ag_charts_community186._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(h){o.clear(!0),e.forEach((u,p)=>{const d=c(h,n,l,n,u.y),g=c(h,n,l,n,u.y2);p!==0&&o.lineTo(u.x,d),o.moveTo(u.x2,g)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(t)})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){this.resetConnectorLinesPath({contextData:t.contextData,paths:t.paths})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e;this.updateLineNode(i);const{path:o}=i;o.clear(!0);const{pointData:s}=t;s&&(s.forEach((a,r)=>{r!==0&&o.lineTo(a.x,a.y),o.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:a}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:o,lineDash:s,lineDashOffset:a,lineJoin:"round",pointerEvents:import_ag_charts_community186._ModuleSupport.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t}){return computeBarFocusBounds5(this,this.contextNodeData?.nodeData[t])}};WaterfallSeries.className="WaterfallSeries",WaterfallSeries.type="waterfall";var import_ag_charts_community187=require("ag-charts-community"),import_ag_charts_core67=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs7,seriesLabelOptionsDefs:seriesLabelOptionsDefs3,shadowOptionsDefs:shadowOptionsDefs3,tooltipOptionsDefs:tooltipOptionsDefs7}=import_ag_charts_community187._ModuleSupport,waterfallSeriesItemOptionsDef={name:import_ag_charts_core67.string,cornerRadius:import_ag_charts_core67.positiveNumber,itemStyler:import_ag_charts_core67.callback,label:{...seriesLabelOptionsDefs3,padding:import_ag_charts_core67.positiveNumber,placement:(0,import_ag_charts_core67.union)("inside-start","inside-center","inside-end","outside-start","outside-end")},tooltip:tooltipOptionsDefs7,shadow:shadowOptionsDefs3,...import_ag_charts_core67.fillOptionsDef,...import_ag_charts_core67.strokeOptionsDef,...import_ag_charts_core67.lineDashOptionsDef},waterfallSeriesOptionsDef={type:(0,import_ag_charts_core67.required)((0,import_ag_charts_core67.constant)("waterfall")),xKey:(0,import_ag_charts_core67.required)(import_ag_charts_core67.string),yKey:(0,import_ag_charts_core67.required)(import_ag_charts_core67.string),xName:import_ag_charts_core67.string,yName:import_ag_charts_core67.string,direction:(0,import_ag_charts_core67.union)("horizontal","vertical"),totals:(0,import_ag_charts_core67.arrayOfDefs)({totalType:(0,import_ag_charts_core67.required)((0,import_ag_charts_core67.union)("total","subtotal")),index:(0,import_ag_charts_core67.required)(import_ag_charts_core67.positiveNumber),axisLabel:(0,import_ag_charts_core67.required)(import_ag_charts_core67.string)},"a total definition options array"),showInMiniChart:import_ag_charts_core67.boolean,item:{positive:waterfallSeriesItemOptionsDef,negative:waterfallSeriesItemOptionsDef,total:waterfallSeriesItemOptionsDef},line:{enabled:import_ag_charts_core67.boolean,...import_ag_charts_core67.strokeOptionsDef,...import_ag_charts_core67.lineDashOptionsDef},tooltip:tooltipOptionsDefs7,...commonSeriesOptionsDefs7},import_ag_charts_community188=require("ag-charts-community");function itemTheme2(t,e){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`./${e}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${t}.fill`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:[{$palette:`${t}.fill`}]},{$isPattern:[{$palette:`${t}.fill`}]}]},{$map:[{$path:["./color",void 0,{$value:"$1"}]},{$path:["./colorStops",void 0,{$palette:`${t}.fill`}]}]},[{$mix:[{$palette:`${t}.fill`},"black",.15]},{$mix:[{$palette:`${t}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community188._ModuleSupport.FILL_PATTERN_DEFAULTS,stroke:{$palette:`${t}.stroke`},strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end"}}}var WATERFALL_SERIES_THEME={series:{item:{positive:itemTheme2("altUp",0),negative:itemTheme2("altDown",1),total:itemTheme2("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},WaterfallModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:t=>new WaterfallSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:import_ag_charts_community189._ModuleSupport.DIRECTION_SWAP_AXES,themeTemplate:WATERFALL_SERIES_THEME},WaterfallSeriesModule={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:waterfallSeriesOptionsDef,create:t=>new WaterfallSeries(t)},{NewAreaSeriesModule,NewBarSeriesModule,NewBubbleSeriesModule,NewHistogramSeriesModule,NewLineSeriesModule,NewScatterSeriesModule,numberFormatValidator:numberFormatValidator2,without}=import_ag_charts_community190._ModuleSupport,navigatorHandleOptionsDef={width:import_ag_charts_core68.positiveNumber,height:import_ag_charts_core68.positiveNumber,grip:import_ag_charts_core68.boolean,fill:import_ag_charts_core68.color,stroke:import_ag_charts_core68.color,strokeWidth:import_ag_charts_core68.positiveNumber,cornerRadius:import_ag_charts_core68.positiveNumber},commonIgnoredMiniChartProperties=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],navigatorOptionsDef={enabled:import_ag_charts_core68.boolean,height:import_ag_charts_core68.positiveNumber,spacing:import_ag_charts_core68.positiveNumber,cornerRadius:import_ag_charts_core68.number,mask:{fill:import_ag_charts_core68.color,fillOpacity:import_ag_charts_core68.ratio,stroke:import_ag_charts_core68.color,strokeWidth:import_ag_charts_core68.positiveNumber},minHandle:navigatorHandleOptionsDef,maxHandle:navigatorHandleOptionsDef,miniChart:{enabled:import_ag_charts_core68.boolean,padding:{top:import_ag_charts_core68.positiveNumber,bottom:import_ag_charts_core68.positiveNumber},label:{enabled:import_ag_charts_core68.boolean,avoidCollisions:import_ag_charts_core68.boolean,spacing:import_ag_charts_core68.positiveNumber,format:numberFormatValidator2,formatter:import_ag_charts_core68.callback,interval:{minSpacing:import_ag_charts_core68.positiveNumber,maxSpacing:import_ag_charts_core68.positiveNumber,values:import_ag_charts_core68.array,step:import_ag_charts_core68.number},...import_ag_charts_core68.fontOptionsDef},series:(0,import_ag_charts_core68.arrayOf)((0,import_ag_charts_core68.typeUnion)({area:without(NewAreaSeriesModule.options,commonIgnoredMiniChartProperties),bar:without(NewBarSeriesModule.options,[...commonIgnoredMiniChartProperties,"errorBar","label","legendItemName","direction"]),"box-plot":without(BoxPlotSeriesModule.options,[...commonIgnoredMiniChartProperties,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"]),bubble:without(NewBubbleSeriesModule.options,[...commonIgnoredMiniChartProperties,"title","label","labelKey","labelName","sizeName"]),candlestick:without(CandlestickSeriesModule.options,commonIgnoredMiniChartProperties),heatmap:without(HeatmapSeriesModule.options,[...commonIgnoredMiniChartProperties,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"]),histogram:without(NewHistogramSeriesModule.options,[...commonIgnoredMiniChartProperties,"label"]),line:without(NewLineSeriesModule.options,[...commonIgnoredMiniChartProperties,"errorBar","title","label"]),ohlc:without(OhlcSeriesModule.options,commonIgnoredMiniChartProperties),"range-area":without(RangeAreaSeriesModule.options,[...commonIgnoredMiniChartProperties,"label","yLowName","yHighName"]),"range-bar":without(RangeBarSeriesModule.options,[...commonIgnoredMiniChartProperties,"direction","label","yLowName","yHighName"]),scatter:without(NewScatterSeriesModule.options,[...commonIgnoredMiniChartProperties,"errorBar","title","label","labelKey","labelName"]),waterfall:without(WaterfallSeriesModule.options,[...commonIgnoredMiniChartProperties,"direction"])}))}},AnnotationsModule2={type:"plugin",name:"annotations",chartType:"cartesian",options:annotationOptionsDef,create(){return null}},NavigatorModule2={type:"plugin",name:"navigator",chartType:"cartesian",options:navigatorOptionsDef,create(){return null}},InitialStateModule={type:"plugin",name:"initialState",options:initialStateOptionsDef,create(){return null}},import_ag_charts_community196=require("ag-charts-community"),import_ag_charts_community194=require("ag-charts-community"),import_ag_charts_core70=require("ag-charts-core"),import_ag_charts_community191=require("ag-charts-community"),import_ag_charts_core69=require("ag-charts-core");function computeNodeGraph(t,e,i){i||(e=removeCircularLinks(e));const o=new Map;for(const a of t)o.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let s=0;return o.forEach((a,r)=>{s=Math.max(s,computePathLength(o,e,a,r,-1,[])+computePathLength(o,e,a,r,1,[])+1)}),{links:e,nodeGraph:o,maxPathLength:s}}function findCircularLinks(t,e,i,o){const s=o.indexOf(e);if(s!==-1){for(let r=s;r<o.length;r+=1)i.add(o[r]);return}o.push(e);const{toNode:a}=e;for(const r of t)r.fromNode===a&&findCircularLinks(t,r,i,o);o.pop()}function removeCircularLinks(t){const e=new Set;for(const i of t)findCircularLinks(t,i,e,[]);return e.size!==0&&import_ag_charts_core69.Logger.warnOnce("Some links formed circular references. These will be removed from the output."),e.size===0?t:t.filter(i=>!e.has(i))}function computePathLength(t,e,i,o,s,a){if(a.includes(o))return 1/0;let r=s===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(r===-1){r=0;const n=s===-1?i.linksBefore:i.linksAfter;for(const l of e){const{fromNode:c,toNode:h}=l,u=s===-1?h.id:c.id,p=s===-1?c.id:h.id,d=o===u?t.get(p):void 0;d!=null&&(n.push({node:d,link:l}),a?.push(o),r=Math.max(r,computePathLength(t,e,d,p,s,a)+1),a?.pop())}s===-1?i.maxPathLengthBefore=r:i.maxPathLengthAfter=r}return r}var{Series,DataController,keyProperty:keyProperty7,valueProperty:valueProperty10,Selection:Selection4,Group:Group10,TransformableText}=import_ag_charts_community191._ModuleSupport,FlowProportionSeriesNodeEvent=class extends import_ag_charts_community191._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o);const{datumIndex:s}=i,a=o.contextNodeData?.nodeData.find(r=>r.datumIndex.type===s.type&&r.datumIndex.index===s.index);this.size=a?.size,this.label=a?.type===1?a?.label:void 0}},FlowProportionSeries=class extends Series{constructor(){super(...arguments),this.NodeEvent=FlowProportionSeriesNodeEvent,this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Group10({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Group10({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Group10({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Group10({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Group10({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Group10({name:"nodeGroup"})),this.labelSelection=Selection4.select(this.labelGroup,TransformableText),this.linkSelection=Selection4.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Selection4.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Selection4.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Selection4.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Selection4.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Selection4.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes??this._chartNodes}setChartNodes(t){this._chartNodes=t,this.nodes===t&&(this.nodeDataRefresh=!0)}async processData(t){const{data:e,nodes:i}=this;if(e==null||!this.properties.isValid())return;const{fromKey:o,toKey:s,sizeKey:a,idKey:r,labelKey:n}=this.properties,l=new DataController("standalone",t.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[keyProperty7(r,void 0,{id:"idValue",includeProperty:!1}),...n!=null?[valueProperty10(n,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,h=t.request(this.id,e,{props:[valueProperty10(o,void 0,{id:"fromValue",includeProperty:!1}),valueProperty10(s,void 0,{id:"toValue",includeProperty:!1}),...a!=null?[valueProperty10(a,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[u,p]=await Promise.all([c,h]);this.nodesDataModel=u?.dataModel,this.nodesProcessedData=u?.processedData,this.linksDataModel=p?.dataModel,this.linksProcessedData=p?.processedData;const d=new Map;if(u==null){const g=p.dataModel.resolveColumnById(this,"fromValue",p.processedData),f=p.dataModel.resolveColumnById(this,"toValue",p.processedData),y=m=>{const b=d.size;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:b},type:1,index:b,linksBefore:[],linksAfter:[],id:m,size:0,label:m}};p.processedData.dataSources.get(this.id)?.forEach((m,b)=>{const x=g[b],S=f[b];x==null||S==null||(d.has(x)||d.set(x,y(x)),d.has(S)||d.set(S,y(S)))})}else{const g=u.dataModel.resolveColumnById(this,"idValue",u.processedData),f=n!=null?u.dataModel.resolveColumnById(this,"labelValue",u.processedData):void 0;u.processedData.dataSources.get(this.id)?.forEach((y,m)=>{const b=g[m],x=f?.[m];d.set(b,{series:this,itemId:void 0,datum:y,datumIndex:{type:1,index:m},type:1,index:m,linksBefore:[],linksAfter:[],id:b,size:0,label:x})})}this.processedNodes=d}getNodeGraph(t,e,{includeCircularReferences:i}){const{linksDataModel:o,linksProcessedData:s}=this;if(o==null||s==null){const{links:g,nodeGraph:f,maxPathLength:y}=computeNodeGraph(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:f,links:g,maxPathLength:y}}const{sizeKey:a}=this.properties,r=o.resolveColumnById(this,"fromValue",s),n=o.resolveColumnById(this,"toValue",s),l=a!=null?o.resolveColumnById(this,"sizeValue",s):void 0,c=new Map;this.processedNodes.forEach(g=>{const f=t(g);c.set(g.id,f)});const h=[];s.dataSources.get(this.id)?.forEach((g,f)=>{const y=r[f],m=n[f],b=l!=null?l[f]:1,x=c.get(y),S=c.get(m);if(b<=0||x==null||S==null)return;const v=e({series:this,itemId:void 0,datum:g,datumIndex:{type:0,index:f},type:0,index:f,fromNode:x,toNode:S,size:b});h.push(v)});const{links:u,nodeGraph:p,maxPathLength:d}=computeNodeGraph(c.values(),h,i);return p.forEach(g=>{g.datum.linksBefore=g.linksBefore.map(f=>f.link),g.datum.linksAfter=g.linksAfter.map(f=>f.link)}),this.nodeCount=p.size,this.linkCount=u.length,{nodeGraph:p,links:u,maxPathLength:d}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(t){const{seriesRect:e}=t,i={seriesRectWidth:e?.width??0,seriesRectHeight:e?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const o=this.contextNodeData?.nodeData??[],s=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:h}=a;a=h!=null?o.find(u=>u.type===1&&u.id===h):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlightStyle.series.dimOpacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:s,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:o.filter(h=>h.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:o.filter(h=>h.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let r,n,l,c;a?.type===1?(r=o.filter(h=>h.type===0&&(h.toNode===a||h.fromNode===a)),n=r.map(h=>h.fromNode===a?h.toNode:h.fromNode),n.push(a),l=[],c=[a]):a?.type===0?(r=[a],n=[a.fromNode,a.toNode],l=[a],c=[]):(r=[],n=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:r,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:n,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(t){}getSeriesDomain(t){return[]}getSeriesRange(t,e){return[NaN,NaN]}legendItemSymbol(t,e,i={}){const{fills:o,strokes:s}=this.properties,{fill:a=o[e%o.length],fillOpacity:r=1,stroke:n=s[e%s.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:h=[0],lineDashOffset:u=0}=i;return{marker:{fill:a,fillOpacity:r,stroke:n,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}}}getLegendData(t){if(t!=="category")return[];const{showInLegend:e}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:o},s)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:o??i},symbol:this.legendItemSymbol(1,s),hideInLegend:!e,isFixed:!0}))}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.linkSelection.each((s,a)=>{const r=s.containsPoint(t,e)?0:1/0;r<i&&(i=r,o=a)}),this.nodeSelection.each((s,a)=>{const r=s.distanceSquared(t,e);r<i&&(i=r,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}getDatumAriaText(t,e){if(t.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:t.index+1,count:this.linkCount,from:t.fromNode.id,to:t.toNode.id,size:t.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(t.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:t.index+1,count:this.nodeCount,description:e})}pickFocus(t){const{datumIndexDelta:e,otherIndexDelta:i}=t,o=this.contextNodeData?.nodeData[t.datumIndex-t.datumIndexDelta];let s=o;if(i!==0||e===0)return;if(o?.type===0){const n=Array.from(this.linkSelection,h=>h.datum),c=n.indexOf(o)+e;if(c>=0&&c<n.length)s=n[c];else if(c>0)s=n[n.length-1];else{const h=Array.from(this.nodeSelection,u=>u.datum);s=h[h.length-1]}}else if(o?.type===1){const n=Array.from(this.nodeSelection,h=>h.datum),c=n.indexOf(o)+e;c>=0&&c<n.length?s=n[c]:c<0?s=n[0]:s=Array.from(this.linkSelection,u=>u.datum)[0]}if(s==null)return;const a=s.type===1?Array.from(this.nodeSelection).find(n=>n.datum===s):Array.from(this.linkSelection).find(n=>n.datum===s);if(a==null)return;const r=this.computeFocusBounds(a.node);if(r!=null)return{datum:a.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(a.datum)??0,otherIndex:0,bounds:r,clipFocusBox:!0}}getCategoryValue(t){}datumIndexForCategoryValue(t){}},import_ag_charts_community192=require("ag-charts-community"),{BBox:BBox14,Path:Path8,ScenePathChangeDetection:ScenePathChangeDetection6}=import_ag_charts_community192._ModuleSupport;function bezierControlPoints({radius:t,startAngle:e,endAngle:i,tension:o}){const s=t*Math.cos(e),a=t*Math.sin(e),r=t*Math.cos(i),n=t*Math.sin(i),l=s*o,c=a*o,h=r*o,u=n*o;return{x:[s,l,h,r],y:[a,c,u,n]}}var ChordLink=class extends Path8{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}computeBBox(){const{centerX:t,centerY:e,radius:i,startAngle1:o,endAngle1:s,startAngle2:a,endAngle2:r,tension:n}=this,l=bezierControlPoints({radius:i,startAngle:o,endAngle:r,tension:n}),c=bezierControlPoints({radius:i,startAngle:a,endAngle:s,tension:n}),h=Math.min(...l.x,...c.x),u=Math.max(...l.x,...c.x)-h,p=Math.min(...l.y,...c.y),d=Math.max(...l.y,...c.y)-p;return new BBox14(t+h,e+p,u,d)}isPointInPath(t,e){return super.isPointInPath(t,e)&&this.getBBox().containsPoint(t,e)}tensionedCurveTo(t,e,i,o,s,a,r,n){const{path:l,tension:c}=this,h=1-c;l.cubicCurveTo((i-t)*h+t,(o-e)*h+e,(s-r)*h+r,(a-n)*h+n,r,n)}updatePath(){const{path:t,centerX:e,centerY:i,radius:o}=this;let{startAngle1:s,endAngle1:a,startAngle2:r,endAngle2:n}=this;s>r&&([s,r]=[r,s],[a,n]=[n,a]),t.clear();const l=e+o*Math.cos(s),c=i+o*Math.sin(s);t.moveTo(l,c),this.tensionedCurveTo(l,c,e,i,e,i,e+o*Math.cos(n),i+o*Math.sin(n)),t.arc(e,i,o,n,r,!0),this.tensionedCurveTo(e+o*Math.cos(r),i+o*Math.sin(r),e,i,e,i,e+o*Math.cos(a),i+o*Math.sin(a)),t.arc(e,i,o,a,s,!0),t.closePath()}};__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"centerX",2),__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"centerY",2),__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"radius",2),__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"startAngle1",2),__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"endAngle1",2),__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"startAngle2",2),__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"endAngle2",2),__decorateClass([ScenePathChangeDetection6()],ChordLink.prototype,"tension",2);var import_ag_charts_community193=require("ag-charts-community"),{FillGradientDefaults:FillGradientDefaults6,FillPatternDefaults:FillPatternDefaults6,BaseProperties:BaseProperties23,SeriesTooltip:SeriesTooltip8,SeriesProperties,ARRAY:ARRAY8,ARRAY_OF,COLOR_STRING:COLOR_STRING16,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY4,FUNCTION:FUNCTION12,LINE_DASH:LINE_DASH11,OBJECT:OBJECT30,POSITIVE_NUMBER:POSITIVE_NUMBER23,RATIO:RATIO19,STRING:STRING30,OR:OR10,COLOR_GRADIENT:COLOR_GRADIENT6,TempValidate:TempValidate64,COLOR_PATTERN:COLOR_PATTERN6,Label:Label6}=import_ag_charts_community193._ModuleSupport,ChordSeriesLabelProperties=class extends Label6{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesLabelProperties.prototype,"spacing",2),__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesLabelProperties.prototype,"maxWidth",2);var ChordSeriesLinkProperties=class extends BaseProperties23{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};__decorateClass([TempValidate64(OR10(COLOR_GRADIENT6,COLOR_STRING16,COLOR_PATTERN6),{optional:!0})],ChordSeriesLinkProperties.prototype,"fill",2),__decorateClass([TempValidate64(RATIO19)],ChordSeriesLinkProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate64(COLOR_STRING16,{optional:!0})],ChordSeriesLinkProperties.prototype,"stroke",2),__decorateClass([TempValidate64(RATIO19)],ChordSeriesLinkProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesLinkProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate64(LINE_DASH11)],ChordSeriesLinkProperties.prototype,"lineDash",2),__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesLinkProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate64(RATIO19)],ChordSeriesLinkProperties.prototype,"tension",2),__decorateClass([TempValidate64(FUNCTION12,{optional:!0})],ChordSeriesLinkProperties.prototype,"itemStyler",2);var ChordSeriesNodeProperties=class extends BaseProperties23{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesNodeProperties.prototype,"spacing",2),__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesNodeProperties.prototype,"width",2),__decorateClass([TempValidate64(OR10(COLOR_GRADIENT6,COLOR_STRING16,COLOR_PATTERN6),{optional:!0})],ChordSeriesNodeProperties.prototype,"fill",2),__decorateClass([TempValidate64(RATIO19)],ChordSeriesNodeProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate64(COLOR_STRING16,{optional:!0})],ChordSeriesNodeProperties.prototype,"stroke",2),__decorateClass([TempValidate64(RATIO19)],ChordSeriesNodeProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesNodeProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate64(LINE_DASH11)],ChordSeriesNodeProperties.prototype,"lineDash",2),__decorateClass([TempValidate64(POSITIVE_NUMBER23)],ChordSeriesNodeProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate64(FUNCTION12,{optional:!0})],ChordSeriesNodeProperties.prototype,"itemStyler",2);var ChordSeriesProperties=class extends SeriesProperties{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new FillGradientDefaults6,this.fillPatternDefaults=new FillPatternDefaults6,this.fills=[],this.strokes=[],this.label=new ChordSeriesLabelProperties,this.link=new ChordSeriesLinkProperties,this.node=new ChordSeriesNodeProperties,this.tooltip=new SeriesTooltip8}};__decorateClass([TempValidate64(STRING30)],ChordSeriesProperties.prototype,"fromKey",2),__decorateClass([TempValidate64(STRING30)],ChordSeriesProperties.prototype,"toKey",2),__decorateClass([TempValidate64(STRING30)],ChordSeriesProperties.prototype,"idKey",2),__decorateClass([TempValidate64(STRING30,{optional:!0})],ChordSeriesProperties.prototype,"idName",2),__decorateClass([TempValidate64(STRING30,{optional:!0})],ChordSeriesProperties.prototype,"labelKey",2),__decorateClass([TempValidate64(STRING30,{optional:!0})],ChordSeriesProperties.prototype,"labelName",2),__decorateClass([TempValidate64(STRING30,{optional:!0})],ChordSeriesProperties.prototype,"sizeKey",2),__decorateClass([TempValidate64(STRING30,{optional:!0})],ChordSeriesProperties.prototype,"sizeName",2),__decorateClass([TempValidate64(ARRAY8,{optional:!0})],ChordSeriesProperties.prototype,"nodes",2),__decorateClass([TempValidate64(OBJECT30)],ChordSeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate64(OBJECT30)],ChordSeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate64(ARRAY_OF(OR10(COLOR_GRADIENT6,COLOR_STRING16,COLOR_PATTERN6)))],ChordSeriesProperties.prototype,"fills",2),__decorateClass([TempValidate64(COLOR_STRING_ARRAY4)],ChordSeriesProperties.prototype,"strokes",2),__decorateClass([TempValidate64(OBJECT30)],ChordSeriesProperties.prototype,"label",2),__decorateClass([TempValidate64(OBJECT30)],ChordSeriesProperties.prototype,"link",2),__decorateClass([TempValidate64(OBJECT30)],ChordSeriesProperties.prototype,"node",2),__decorateClass([TempValidate64(OBJECT30)],ChordSeriesProperties.prototype,"tooltip",2);var{SeriesNodePickMode:SeriesNodePickMode6,CachedTextMeasurerPool:CachedTextMeasurerPool4,TextWrapper:TextWrapper5,TextUtils:TextUtils5,createDatumId:createDatumId9,angleBetween:angleBetween2,normalizeAngle360:normalizeAngle3605,isBetweenAngles,Sector:Sector3,evaluateBezier,applyShapeStyle:applyShapeStyle4,getShapeStyle:getShapeStyle7,BBox:BBox15}=import_ag_charts_community194._ModuleSupport,nodeMidAngle=t=>t.startAngle+angleBetween2(t.startAngle,t.endAngle)/2,ChordSeries=class extends FlowProportionSeries{constructor(t){super({moduleCtx:t,pickModes:[SeriesNodePickMode6.NEAREST_NODE,SeriesNodePickMode6.EXACT_SHAPE_MATCH]}),this.properties=new ChordSeriesProperties}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new ChordLink}nodeFactory(){return new Sector3}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:o,toKey:s,sizeKey:a,label:{spacing:r,maxWidth:n,fontSize:l},node:{width:c,spacing:h}}=this.properties,u=e/2,p=i/2;let d=[];const{nodeGraph:g,links:f}=this.getNodeGraph(C=>({...C,centerX:u,centerY:p,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),C=>({...C,centerX:u,centerY:p,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let y=0;g.forEach(({datum:C,linksBefore:I,linksAfter:w},L)=>{const P=I.reduce((z,{link:R})=>z+R.size,0)+w.reduce((z,{link:R})=>z+R.size,0);if(P===0)g.delete(L);else{C.size=P,y+=C.size;const z=this.getLabelText(this.properties.label,{datum:C.datum,value:C.label,fromKey:o,toKey:s,sizeKey:a,size:C.size});C.label=String(z)}});let m=0;if(this.isLabelEnabled()){const C=this.properties.label.getFont();let I=0;g.forEach(({datum:w})=>{const{id:L,label:P}=w;if(P==null)return;const z=TextWrapper5.wrapText(P,{maxWidth:n,font:this.properties.label,textWrap:"never"}),{width:R}=CachedTextMeasurerPool4.measureText(z,{font:C,textAlign:"left",textBaseline:"middle"});I=Math.max(R,I),d.push({id:L,text:z,centerX:u,centerY:p,angle:NaN,radius:NaN})}),m=I+r}const b=g.size;let x=Math.min(e,i)/2-c-m,S=h/x;if(m!==0&&(b*S>=1.5*Math.PI||x<=0)&&(d=[],x=Math.min(e,i)/2-c,S=h/x),b*S>=2*Math.PI||x<=0){import_ag_charts_core70.Logger.warnOnce("There was insufficient space to display the Chord Series.");return}const v=x,T=x+c,D=Math.max((2*Math.PI-b*S)/y,0);let k=0;g.forEach(({datum:C})=>{C.innerRadius=v,C.outerRadius=T,C.startAngle=k,C.endAngle=k+C.size*D,k=C.endAngle+S;const I=(C.innerRadius+C.outerRadius)/2,w=nodeMidAngle(C);C.midPoint={x:C.centerX+I*Math.cos(w),y:C.centerY+I*Math.sin(w)}});const A=[];g.forEach(({datum:C,linksBefore:I,linksAfter:w})=>{const L=nodeMidAngle(C),P=[...I.map(R=>({link:R.link,distance:angleBetween2(nodeMidAngle(R.node.datum),L),after:!1})),...w.map(R=>({link:R.link,distance:angleBetween2(nodeMidAngle(R.node.datum),L),after:!0}))];let z=C.startAngle;P.toSorted((R,B)=>R.distance-B.distance).forEach(({link:R,after:B})=>{const E=R.size*D;B?(R.startAngle1=z,R.endAngle1=z+E):(R.startAngle2=z,R.endAngle2=z+E),z+=R.size*D}),A.push(C)});const{tension:M}=this.properties.link;f.forEach(C=>{C.radius=x;const I=bezierControlPoints({radius:x,startAngle:C.startAngle1,endAngle:C.endAngle2,tension:M}),w=bezierControlPoints({radius:x,startAngle:C.startAngle2,endAngle:C.endAngle1,tension:M}),L=evaluateBezier(...I.x,.5),P=evaluateBezier(...I.y,.5),z=evaluateBezier(...w.x,.5),R=evaluateBezier(...w.y,.5);C.midPoint={x:C.centerX+(L+z)/2,y:C.centerY+(P+R)/2},A.push(C)}),d.forEach(C=>{const I=g.get(C.id)?.datum;I!=null&&(C.radius=T+r,C.angle=normalizeAngle3605(I.startAngle+angleBetween2(I.startAngle,I.endAngle)/2))}),d.sort((C,I)=>C.angle-I.angle);let _=1/0,O=-1/0;return d=d.filter(C=>{const I=TextUtils5.getLineHeight(l),w=Math.atan2(I/2,C.radius),L=C.angle-w,P=C.angle+w;return isBetweenAngles(_,L,P)||isBetweenAngles(O,L,P)?!1:(_=Math.min(L,_),O=Math.max(P,O),!0)}),{itemId:t,nodeData:A,labelData:d}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:r}=this.properties.label;e.each((n,{text:l,centerX:c,centerY:h,radius:u,angle:p})=>{n.visible=!0,n.translationX=c+u*Math.cos(p),n.translationY=h+u*Math.sin(p),n.text=l,n.fill=i,n.fontStyle=o,n.fontWeight=s,n.fontSize=a,n.fontFamily=r,n.textBaseline="middle",Math.cos(p)>=0?(n.textAlign="left",n.rotation=p):(n.textAlign="right",n.rotation=p-Math.PI)})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId9([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:r,lineDashOffset:n}=e.node,l=t?e.highlightStyle.item:void 0;return getShapeStyle7({fill:l?.fill??i,fillOpacity:l?.fillOpacity??o,stroke:l?.stroke??s,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.node.strokeWidth),lineDash:l?.lineDash??r,lineDashOffset:l?.lineDashOffset??n},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getNodeStyleOverrides(t,e,i,o,s,a,r){const{id:n,properties:l}=this,{fills:c,strokes:h}=l,{itemStyler:u}=l.node,p=a.fill??c[i%c.length],d=a.stroke??h[i%h.length];let g;if(r||(g??(g={}),g.fill=p,g.stroke=d),u!=null){const f=this.cachedDatumCallback(createDatumId9(t,"node",r?"highlight":"node"),()=>{const{fillOpacity:y=1,strokeOpacity:m=1,strokeWidth:b=0,lineDash:x=[],lineDashOffset:S=0}=a;return this.callWithContext(u,{seriesId:n,datum:e,highlighted:r,label:s,size:o,fill:p,fillOpacity:y,stroke:d,strokeOpacity:m,strokeWidth:b,lineDash:x,lineDashOffset:S})});g??(g={}),Object.assign(g,f)}return getShapeStyle7(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseNodeStyle(i),s=this.getShapeFillBBox();e.each((a,r)=>{const{datumIndex:n,size:l,label:c}=r,h=this.getNodeStyleOverrides(String(n.index),r.datum,n.index,l,c,o,i);applyShapeStyle4(a,o,h,s),a.centerX=r.centerX,a.centerY=r.centerY,a.innerRadius=r.innerRadius,a.outerRadius=r.outerRadius,a.startAngle=r.startAngle,a.endAngle=r.endAngle,a.inset=a.strokeWidth/2})}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId9([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:r,lineDashOffset:n,tension:l}=e.link,c=t?e.highlightStyle.item:void 0;return getShapeStyle7({fill:c?.fill??i,fillOpacity:c?.fillOpacity??o,stroke:c?.stroke??s,strokeOpacity:c?.strokeOpacity??a,strokeWidth:c?.strokeWidth??this.getStrokeWidth(e.link.strokeWidth),lineDash:c?.lineDash??r,lineDashOffset:c?.lineDashOffset??n,tension:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getLinkStyleOverrides(t,e,i,o,s){const{id:a,properties:r}=this,{fills:n,strokes:l}=r,{itemStyler:c}=r.link,h=o.fill??n[i%n.length],u=o.stroke??l[i%l.length];let p;if(s||(p??(p={}),p.fill=h,p.stroke=u),c!=null){const d=this.cachedDatumCallback(createDatumId9(t,"link",s?"highlight":"node"),()=>{const{fillOpacity:g=1,strokeOpacity:f=1,strokeWidth:y=0,lineDash:m=[],lineDashOffset:b=0,tension:x}=o;return this.callWithContext(c,{seriesId:a,datum:e,highlighted:s,tension:x,fill:h,fillOpacity:g,stroke:u,strokeOpacity:f,strokeWidth:y,lineDash:m,lineDashOffset:b})});p??(p={}),Object.assign(p,d)}return getShapeStyle7(p,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseLinkStyle(i),s=this.getShapeFillBBox();e.each((a,r)=>{const{datumIndex:n}=r,l=r.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(n.index),r.datum,l.index,o,i);a.centerX=r.centerX,a.centerY=r.centerY,a.radius=r.radius,a.startAngle1=r.startAngle1,a.endAngle1=r.endAngle1,a.startAngle2=r.startAngle2,a.endAngle2=r.endAngle2,applyShapeStyle4(a,o,c,s),a.tension=c?.tension??o.tension})}getShapeFillBBox(){const t=this._nodeDataDependencies?.seriesRectWidth??0,e=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(t,e),o=(t-i)/2,s=(e-i)/2,a=new BBox15(o,s,t,e);return{series:a,axis:a}}getTooltipContent(t){const{id:e,linksProcessedData:i,nodesProcessedData:o,properties:s}=this,{fromKey:a,toKey:r,sizeKey:n,sizeName:l,tooltip:c}=s,h=this.contextNodeData?.nodeData.find(y=>y.datumIndex.type===t.type&&y.datumIndex.index===t.index);if(h==null)return;const u=h.type===0?h.fromNode.index:h.index,p=h.type===0?`${h.fromNode.label} - ${h.toNode.label}`:h.label,d=t.type===0?i?.dataSources.get(this.id)?.[t.index]:o?.dataSources.get(this.id)?.[t.index],g=h.size;let f;if(h.type===0){const y=h.fromNode.datumIndex,m=this.getBaseLinkStyle(!1);Object.assign(m,this.getLinkStyleOverrides(String(t.index),d,y.index,m,!1)),f=m}else{const y=h.label,m=this.getBaseNodeStyle(!1);Object.assign(m,this.getNodeStyleOverrides(String(t.index),d,t.index,g,y,m,!1)),f=m}return c.formatTooltip(this.properties,{title:p,symbol:this.legendItemSymbol(h.type,u,f),data:n!=null?[{label:l,fallbackLabel:n,value:String(g)}]:[]},{seriesId:e,datum:d,title:p,fromKey:a,toKey:r,sizeKey:n,sizeName:l,size:g,...f})}computeFocusBounds(t){return t}};ChordSeries.className="ChordSeries",ChordSeries.type="chord";var import_ag_charts_community195=require("ag-charts-community"),import_ag_charts_core71=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs8,seriesLabelOptionsDefs:seriesLabelOptionsDefs4,tooltipOptionsDefs:tooltipOptionsDefs8}=import_ag_charts_community195._ModuleSupport,chordSeriesOptionsDef={type:(0,import_ag_charts_core71.required)((0,import_ag_charts_core71.constant)("chord")),fromKey:(0,import_ag_charts_core71.required)(import_ag_charts_core71.string),toKey:(0,import_ag_charts_core71.required)(import_ag_charts_core71.string),sizeKey:import_ag_charts_core71.string,sizeName:import_ag_charts_core71.string,fills:(0,import_ag_charts_core71.arrayOf)(import_ag_charts_core71.colorUnion),strokes:(0,import_ag_charts_core71.arrayOf)(import_ag_charts_core71.color),label:{spacing:import_ag_charts_core71.positiveNumber,maxWidth:import_ag_charts_core71.positiveNumber,...seriesLabelOptionsDefs4},link:{tension:import_ag_charts_core71.ratio,itemStyler:import_ag_charts_core71.callback,...import_ag_charts_core71.fillOptionsDef,...import_ag_charts_core71.strokeOptionsDef,...import_ag_charts_core71.lineDashOptionsDef},node:{width:import_ag_charts_core71.positiveNumber,spacing:import_ag_charts_core71.positiveNumber,itemStyler:import_ag_charts_core71.callback,...import_ag_charts_core71.fillOptionsDef,...import_ag_charts_core71.strokeOptionsDef,...import_ag_charts_core71.lineDashOptionsDef},tooltip:tooltipOptionsDefs8,...commonSeriesOptionsDefs8};chordSeriesOptionsDef.fillGradientDefaults=import_ag_charts_core71.fillGradientDefaults,chordSeriesOptionsDef.fillPatternDefaults=import_ag_charts_core71.fillPatternDefaults;var ChordModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},moduleFactory:t=>new ChordSeries(t),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community196._ModuleSupport.FILL_PATTERN_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},ChordSeriesModule={type:"series",name:"chord",chartType:"flow-proportion",enterprise:!0,options:chordSeriesOptionsDef,create:t=>new ChordSeries(t)},import_ag_charts_community205=require("ag-charts-community"),import_ag_charts_community197=require("ag-charts-community"),{ThemeConstants:{CARTESIAN_AXIS_TYPE:CARTESIAN_AXIS_TYPE7,CARTESIAN_POSITION:CARTESIAN_POSITION5},ThemeSymbols:{DEFAULT_SHADOW_COLOUR}}=import_ag_charts_community197._ModuleSupport,FUNNEL_SERIES_AXES={$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},[{type:CARTESIAN_AXIS_TYPE7.NUMBER,position:CARTESIAN_POSITION5.LEFT},{type:CARTESIAN_AXIS_TYPE7.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"before"]},CARTESIAN_POSITION5.TOP,CARTESIAN_POSITION5.BOTTOM]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}}],[{type:CARTESIAN_AXIS_TYPE7.CATEGORY,position:{$if:[{$eq:[{$path:["/stageLabel/placement",void 0]},"after"]},CARTESIAN_POSITION5.RIGHT,CARTESIAN_POSITION5.LEFT]},label:{$omit:[["placement"],{$path:["/stageLabel",void 0]}]}},{type:CARTESIAN_AXIS_TYPE7.NUMBER,position:CARTESIAN_POSITION5.BOTTOM}]]},FUNNEL_SERIES_THEME={series:{direction:"vertical",strokeWidth:0,spacingRatio:.25,fills:[{$palette:"fill"}],strokes:[{$palette:"stroke"}],fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community197._ModuleSupport.FILL_PATTERN_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:0},shadow:{enabled:!1,color:DEFAULT_SHADOW_COLOUR,xOffset:3,yOffset:3,blur:5}},axes:{[CARTESIAN_AXIS_TYPE7.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[CARTESIAN_AXIS_TYPE7.CATEGORY]:{line:{enabled:!1}}}},import_ag_charts_community202=require("ag-charts-community"),import_ag_charts_community200=require("ag-charts-community"),import_ag_charts_community198=require("ag-charts-community"),{lineDistanceSquared,BBox:BBox16,Path:Path9,ScenePathChangeDetection:ScenePathChangeDetection7}=import_ag_charts_community198._ModuleSupport,delta2=1e-6;function pointsEq([t,e],[i,o]){return Math.abs(t-i)<=delta2&&Math.abs(e-o)<=delta2}var FunnelConnector=class extends Path9{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:t,y0:e,x1:i,y1:o,x2:s,y2:a,x3:r,y3:n}=this;return{x:(t+i+s+r)/4,y:(e+o+a+n)/4}}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;const{x0:i,y0:o,x1:s,y1:a,x2:r,y2:n,x3:l,y3:c}=this;return Math.min(lineDistanceSquared(t,e,i,o,s,a,1/0),lineDistanceSquared(t,e,s,a,r,n,1/0),lineDistanceSquared(t,e,r,n,l,c,1/0),lineDistanceSquared(t,e,l,c,i,o,1/0))}computeBBox(){const{x0:t,y0:e,x1:i,y1:o,x2:s,y2:a,x3:r,y3:n}=this,l=Math.min(t,i,s,r),c=Math.max(t,i,s,r)-l,h=Math.min(e,o,a,n),u=Math.max(e,o,a,n)-h;return new BBox16(l,h,c,u)}updatePath(){const{path:t,x0:e,y0:i,x1:o,y1:s,x2:a,y2:r,x3:n,y3:l}=this,c=[[e,i],[o,s],[a,r],[n,l]];t.clear();let h,u;c.forEach(p=>{if(h!=null&&pointsEq(h,p)||u!=null&&pointsEq(u,p))return;const[d,g]=p;h==null?t.moveTo(d,g):t.lineTo(d,g),h??(h=p),u=p}),t.closePath()}};__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"x0",2),__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"y0",2),__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"x1",2),__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"y1",2),__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"x2",2),__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"y2",2),__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"x3",2),__decorateClass([ScenePathChangeDetection7()],FunnelConnector.prototype,"y3",2);var import_ag_charts_community199=require("ag-charts-community"),{NODE_UPDATE_STATE_TO_PHASE_MAPPING}=import_ag_charts_community199._ModuleSupport;function connectorStartingPosition(t,e,i,o){const{x0:s,y0:a,x1:r,y1:n,x2:l,y2:c,x3:h,y3:u,opacity:p}=t;return i?{x0:(s+h)/2,y0:(a+u)/2,x1:(r+l)/2,y1:(n+c)/2,x2:(r+l)/2,y2:(n+c)/2,x3:(s+h)/2,y3:(a+u)/2,opacity:p}:{x0:(s+r)/2,y0:(a+n)/2,x1:(s+r)/2,y1:(a+n)/2,x2:(l+h)/2,y2:(c+u)/2,x3:(l+h)/2,y3:(c+u)/2,opacity:p}}function prepareConnectorAnimationFunctions(t,e){const i=a=>a==null;return{fromFn:(a,r,n)=>{n==="updated"&&i(r)?n="removed":n==="updated"&&i(a.previousDatum)&&(n="added");let l;n==="added"&&a.previousDatum==null&&e==="fade"?l={...resetConnectorSelectionsFn(a,r),opacity:0}:n==="unknown"||n==="added"?l=connectorStartingPosition(r,a.previousDatum,t,e):l={x0:a.x0,y0:a.y0,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,x3:a.x3,y3:a.y3,opacity:a.opacity};const c=NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{...l,phase:c}},toFn:(a,r,n)=>{let l;return n==="removed"&&a.datum==null&&e==="fade"?l={...resetConnectorSelectionsFn(a,r),opacity:0}:n==="removed"||i(r)?l=connectorStartingPosition(r,a.previousDatum,t,e):l=resetConnectorSelectionsFn(a,r),l}}}function resetConnectorSelectionsFn(t,e){const{x0:i,y0:o,x1:s,y1:a,x2:r,y2:n,x3:l,y3:c,opacity:h}=e;return{x0:i,y0:o,x1:s,y1:a,x2:r,y2:n,x3:l,y3:c,opacity:h}}var{SeriesNodePickMode:SeriesNodePickMode7,SeriesZIndexMap,valueProperty:valueProperty11,keyProperty:keyProperty8,ChartAxisDirection:ChartAxisDirection23,updateLabelNode:updateLabelNode4,SMALLEST_KEY_INTERVAL:SMALLEST_KEY_INTERVAL4,LARGEST_KEY_INTERVAL:LARGEST_KEY_INTERVAL2,diff:diff5,fixNumericExtent:fixNumericExtent7,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation4,resetMotion:resetMotion2,resetLabelFn:resetLabelFn4,animationValidation:animationValidation6,computeBarFocusBounds:computeBarFocusBounds6,ContinuousScale:ContinuousScale8,Group:Group11,Selection:Selection5,PointerEvents:PointerEvents4,motion:motion4,checkCrisp:checkCrisp3,createDatumId:createDatumId10,applyShapeFillBBox:applyShapeFillBBox4,getShapeStyle:getShapeStyle8,getShapeFill:getShapeFill3}=import_ag_charts_community200._ModuleSupport,FunnelSeriesNodeEvent=class extends import_ag_charts_community200._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.stageKey,this.yKey=o.properties.valueKey}},BaseFunnelSeries=class extends import_ag_charts_community200._ModuleSupport.AbstractBarSeries{constructor({moduleCtx:t,animationResetFns:e}){super({moduleCtx:t,pickModes:[SeriesNodePickMode7.AXIS_ALIGNED,SeriesNodePickMode7.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["stageKey"],y:["valueKey"]},directionNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:e.datum,label:resetLabelFn4}}),this.NodeEvent=FunnelSeriesNodeEvent,this.connectorNodeGroup=this.contentGroup.appendChild(new Group11({name:`${this.id}-series-connectorNodes`,zIndex:SeriesZIndexMap.BACKGROUND})),this.connectorSelection=Selection5.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=PointerEvents4.None}get pickModeAxis(){return"main-category"}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.connectorNodeGroup.zIndex=[SeriesZIndexMap.BACKGROUND,t],!0):!1}isVertical(){return!super.isVertical()}connectionFactory(){return new FunnelConnector}async processData(t){if(!this.properties.isValid())return;const{stageKey:e,valueKey:i}=this.properties,{visible:o,id:s}=this,a=(g,f,y)=>o&&this.ctx.legendManager.getItemEnabled({seriesId:s,itemId:y}),r=this.getCategoryAxis()?.scale,n=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:n}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(diff5(this.id,this.processedData)),u.push(animationValidation6()));const p=this.visible?{}:{forceValue:0},{processedData:d}=await this.requestDataModel(t,this.data,{props:[keyProperty8(e,c,{id:"xValue"}),valueProperty11(i,h,{id:"yValue",...p,validation:a,invalidValue:0}),...l?[SMALLEST_KEY_INTERVAL4,LARGEST_KEY_INTERVAL2]:[],...u],groupByKeys:!1});this.smallestDataInterval=d.reduced?.smallestKeyInterval,this.largestDataInterval=d.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){const{processedData:e,dataModel:i,id:o,ctx:{legendManager:s}}=this;if(!e||!i)return[];const{keys:[a]}=e.domain;if(t===this.getCategoryDirection()){const r=i.resolveProcessedDataDefById(this,"xValue");return r?.def.type==="key"&&r?.def.valueType==="category"?this.hasData?a.filter((n,l)=>s.getItemEnabled({seriesId:o,itemId:l})):[]:this.padBandExtent(a)}else{const r=this.domainForClippedRange(ChartAxisDirection23.Y,["yValue"],"xValue",!0),n=Math.max(...r),l=[-n,n];return fixNumericExtent7(l)}}getSeriesRange(t,e){return[NaN,NaN]}createNodeData(){const{hasData:t,data:e,dataModel:i,groupScale:o,processedData:s,id:a,ctx:{legendManager:r}}=this,n=this.getCategoryAxis(),l=this.getValueAxis();if(!(t&&e&&n&&l&&i&&s?.type==="ungrouped"))return;const c=n.scale,h=l.scale,u=this.getBarDirection()===ChartAxisDirection23.X,{stageKey:p,valueKey:d}=this.properties,{strokeWidth:g}=this.barStyle(),f=`${d}`,y={itemId:f,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),visible:this.visible},m=this.visible;if(!m)return y;const b=i.resolveKeysById(this,"xValue",s),x=i.resolveColumnById(this,"yValue",s),{barWidth:S,groupIndex:v}=this.updateGroupScale(n),T=ContinuousScale8.is(c)?S*-.5:0,D=checkCrisp3(n?.scale,n?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let k;return(s.dataSources.get(this.id)??[]).forEach((M,_)=>{const O=m&&r.getItemEnabled({seriesId:a,itemId:_}),C=b[_];if(C==null)return;const I=Math.round(c.convert(C))+o.convert(String(v))+T,w=x[_],L=Math.round(h.convert(-w)),P=Math.round(h.convert(w)),z=Math.max(g,Math.abs(P-L)),R={x:u?Math.min(P,L):I,y:u?I:Math.min(P,L),width:u?z:S,height:u?S:z},B={x:R.x+R.width/2,y:R.y+R.height/2},E=this.createLabelData({datumIndex:_,rect:R,barAlongX:u,yDatum:w,datum:M,visible:O}),F={index:_,series:this,itemId:f,datum:M,datumIndex:_,xValue:C,yValue:w,xKey:p,yKey:d,x:R.x,y:R.y,width:R.width,height:R.height,midPoint:B,strokeWidth:g,crisp:D,label:E,visible:O};if(y.nodeData.push(F),E!=null&&y.labelData.push(E),k!=null){const V=k.rect,G=k.nodeDatum,W=k.datumIndex;u?y.connectorData.push({datum:G,datumIndex:W,x0:V.x,y0:V.y+V.height,x1:V.x+V.width,y1:V.y+V.height,x2:R.x+R.width,y2:R.y,x3:R.x,y3:R.y,opacity:1}):y.connectorData.push({datum:G,datumIndex:W,x0:V.x+V.width,y0:V.y,x1:R.x,y1:R.y,x2:R.x,y2:R.y+R.height,x3:V.x+V.width,y3:V.y+V.height,opacity:1})}O&&(k={itemId:f,rect:R,nodeDatum:F,datumIndex:_})}),y}updateNodes(t,e,i){super.updateNodes(t,e,i);const{connectorSelection:o}=this,s=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:o,connectorData:s}),this.updateConnectorNodes({connectorSelection:o})}updateDatumSelection(t){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o,void 0,s=>this.getDatumId(s))}updateConnectorSelection(t){const{connectorData:e,connectorSelection:i}=t;return i.update(this.connectorEnabled()?e:[],void 0,o=>this.getDatumId(o.datum))}updateConnectorNodes(t){const{fills:e,strokes:i,fillGradientDefaults:o,fillPatternDefaults:s}=this.properties,{fill:a,fillOpacity:r,stroke:n,strokeOpacity:l,strokeWidth:c,lineDash:h,lineDashOffset:u}=this.connectorStyle(),p=this.getShapeFillBBox();t.connectorSelection.each((d,g)=>{const{datumIndex:f}=g;d.setProperties(resetConnectorSelectionsFn(d,g));const y=getShapeFill3(a??e[f%e.length],o,s);d.fill=y,applyShapeFillBBox4(d,y,p),d.fillOpacity=r,d.stroke=n??i[f%i.length],d.strokeOpacity=l,d.strokeWidth=c,d.lineDash=h,d.lineDashOffset=u})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=PointerEvents4.None})}updateLabelNodes(t){t.labelSelection.each((e,i)=>{updateLabelNode4(e,this.properties.label,i)})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{stageKey:a,valueKey:r,tooltip:n}=s,l=this.getCategoryAxis(),c=this.getValueAxis();if(!i||!o||!l||!c)return;const h=o.dataSources.get(this.id)?.[t],u=i.resolveKeysById(this,"xValue",o)[t],p=i.resolveColumnById(this,"yValue",o)[t];if(u!=null)return n.formatTooltip(this.properties,{symbol:this.legendItemSymbol(t),data:[{label:l.formatDatum(u),value:c.formatDatum(p)}]},{seriesId:e,datum:h,title:a,stageKey:a,valueKey:r,...this.tooltipStyle(h,t)})}resetAllAnimation(t){super.resetAllAnimation(t),resetMotion2([this.connectorSelection],resetConnectorSelectionsFn)}animateEmptyUpdateReady({labelSelection:t}){const{connectorSelection:e}=this,i=this.isVertical(),s=prepareConnectorAnimationFunctions(i,"normal");motion4.fromToMotion(this.id,"connectors",this.ctx.animationManager,[e],s),seriesLabelFadeInAnimation4(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(t){const{labelSelection:e}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id),seriesLabelFadeInAnimation4(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return createDatumId10(t.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t}){return computeBarFocusBounds6(this,this.contextNodeData?.nodeData[t])}legendItemSymbol(t){const{strokeWidth:e,fillOpacity:i,strokeOpacity:o,lineDash:s,lineDashOffset:a,fillGradientDefaults:r,fillPatternDefaults:n}=this.barStyle(),{fills:l,strokes:c}=this.properties,h=l[t%l.length]??"black",u=c[t%c.length]??"black";return{marker:getShapeStyle8({fill:h,fillOpacity:i,stroke:u,strokeWidth:e,strokeOpacity:o,lineDash:s,lineDashOffset:a},r,n)}}getLegendData(t){const{id:e,processedData:i,dataModel:o,ctx:{legendManager:s},visible:a}=this;if(!o||!i||t!=="category"||!this.properties.isValid())return[];const{showInLegend:r}=this.properties,n=o.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)??[]).map((l,c)=>{const h=n[c];if(h!=null)return{legendType:"category",id:e,datum:l,itemId:c,seriesId:e,enabled:a&&s.getItemEnabled({seriesId:e,itemId:c}),label:{text:String(h)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!r}}).filter(l=>l!=null)}},import_ag_charts_community201=require("ag-charts-community"),{FillGradientDefaults:FillGradientDefaults7,FillPatternDefaults:FillPatternDefaults7,Label:Label7,AbstractBarSeriesProperties:AbstractBarSeriesProperties5,SeriesTooltip:SeriesTooltip9,AxisLabel:AxisLabel2,TempValidate:TempValidate65,UNION:UNION12,OR:OR11,ARRAY_OF:ARRAY_OF2,COLOR_GRADIENT:COLOR_GRADIENT7,COLOR_STRING:COLOR_STRING17,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY5,COLOR_PATTERN:COLOR_PATTERN7,LINE_DASH:LINE_DASH12,OBJECT:OBJECT31,POSITIVE_NUMBER:POSITIVE_NUMBER24,RATIO:RATIO20,STRING:STRING31}=import_ag_charts_community201._ModuleSupport,ConeFunnelSeriesLabel=class extends Label7{constructor(){super(...arguments),this.spacing=0}};__decorateClass([TempValidate65(UNION12(["before","middle","after"],"a placement"))],ConeFunnelSeriesLabel.prototype,"placement",2),__decorateClass([TempValidate65(POSITIVE_NUMBER24)],ConeFunnelSeriesLabel.prototype,"spacing",2);var ConeFunnelSeriesStageLabel=class extends AxisLabel2{};__decorateClass([TempValidate65(UNION12(["before","after"],"a placement"))],ConeFunnelSeriesStageLabel.prototype,"placement",2);var ConeFunnelProperties=class extends AbstractBarSeriesProperties5{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new FillGradientDefaults7,this.fillPatternDefaults=new FillPatternDefaults7,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new ConeFunnelSeriesLabel,this.stageLabel=new ConeFunnelSeriesStageLabel,this.tooltip=new SeriesTooltip9}};__decorateClass([TempValidate65(STRING31)],ConeFunnelProperties.prototype,"stageKey",2),__decorateClass([TempValidate65(STRING31)],ConeFunnelProperties.prototype,"valueKey",2),__decorateClass([TempValidate65(ARRAY_OF2(OR11(COLOR_GRADIENT7,COLOR_PATTERN7,COLOR_STRING17)))],ConeFunnelProperties.prototype,"fills",2),__decorateClass([TempValidate65(OBJECT31)],ConeFunnelProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate65(OBJECT31)],ConeFunnelProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate65(RATIO20)],ConeFunnelProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate65(COLOR_STRING_ARRAY5)],ConeFunnelProperties.prototype,"strokes",2),__decorateClass([TempValidate65(POSITIVE_NUMBER24)],ConeFunnelProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate65(RATIO20)],ConeFunnelProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate65(LINE_DASH12)],ConeFunnelProperties.prototype,"lineDash",2),__decorateClass([TempValidate65(POSITIVE_NUMBER24)],ConeFunnelProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate65(OBJECT31)],ConeFunnelProperties.prototype,"label",2),__decorateClass([TempValidate65(OBJECT31)],ConeFunnelProperties.prototype,"stageLabel",2),__decorateClass([TempValidate65(OBJECT31)],ConeFunnelProperties.prototype,"tooltip",2);function resetLineSelectionsFn(t,{x:e,y:i,width:o,height:s,opacity:a}){return{x1:e,y1:i,x2:e+o,y2:i+s,opacity:a}}var{formatValue,Line:Line5}=import_ag_charts_community202._ModuleSupport,ConeFunnelSeries=class extends BaseFunnelSeries{constructor(t){super({moduleCtx:t,animationResetFns:{datum:resetLineSelectionsFn}}),this.properties=new ConeFunnelProperties}get hasData(){const{id:t,ctx:{legendManager:e}}=this,i=this.data?.reduce((o,s,a)=>o+(e.getItemEnabled({seriesId:t,itemId:a})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults}}connectorStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:r}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:r}}nodeFactory(){return new Line5}createLabelData({datumIndex:t,rect:e,barAlongX:i,yDatum:o,datum:s,visible:a}){const{stageKey:r,valueKey:n,label:l}=this.properties,{spacing:c,placement:h}=l;let u,p,d,g;if(i)switch(u=e.x+e.width/2,d="center",h){case"before":p=e.y-c,g="bottom";break;case"after":p=e.y+e.height+c,g="top";break;default:p=e.y+e.height/2,g="middle"}else switch(p=e.y+e.height/2,g="middle",h){case"before":u=e.x-c,d="right";break;case"after":u=e.x+e.width+c,d="left";break;default:u=e.x+e.width/2,d="center"}return{x:u,y:p,textAlign:d,textBaseline:g,text:this.getLabelText(l,{itemId:n,value:o,datum:s,stageKey:r,valueKey:n},f=>formatValue(f,0)),itemId:n,datum:s,datumIndex:t,series:this,visible:a}}updateDatumNodes(t){const e=t.isHighlight?this.properties.highlightStyle.item:void 0;t.datumSelection.each((i,o)=>{i.setProperties(resetLineSelectionsFn(i,o)),i.stroke=e?.stroke,i.strokeWidth=e?.strokeWidth??0,i.strokeOpacity=e?.strokeOpacity??1,i.lineDash=e?.lineDash,i.lineDashOffset=e?.lineDashOffset??0})}tooltipStyle(t,e){const{fills:i,strokes:o}=this.properties,s=i[e%i.length]??"black",a=o[e%o.length]??"black",{fillOpacity:r,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:h}=this.barStyle();return{fill:s,fillOpacity:r,stroke:a,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:h}}};ConeFunnelSeries.className="ConeFunnelSeries",ConeFunnelSeries.type="cone-funnel";var import_ag_charts_community203=require("ag-charts-community"),import_ag_charts_core72=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs9,seriesLabelOptionsDefs:seriesLabelOptionsDefs5,tooltipOptionsDefs:tooltipOptionsDefs9,without:without2}=import_ag_charts_community203._ModuleSupport,coneFunnelSeriesOptionsDef={type:(0,import_ag_charts_core72.required)((0,import_ag_charts_core72.constant)("cone-funnel")),stageKey:(0,import_ag_charts_core72.required)(import_ag_charts_core72.string),valueKey:(0,import_ag_charts_core72.required)(import_ag_charts_core72.string),direction:(0,import_ag_charts_core72.union)("horizontal","vertical"),fills:(0,import_ag_charts_core72.arrayOf)(import_ag_charts_core72.colorUnion),strokes:(0,import_ag_charts_core72.arrayOf)(import_ag_charts_core72.color),showInMiniChart:import_ag_charts_core72.boolean,label:{spacing:import_ag_charts_core72.positiveNumber,placement:(0,import_ag_charts_core72.union)("before","middle","after"),...seriesLabelOptionsDefs5},stageLabel:{rotation:import_ag_charts_core72.number,spacing:import_ag_charts_core72.positiveNumber,minSpacing:import_ag_charts_core72.positiveNumber,placement:(0,import_ag_charts_core72.union)("before","after"),avoidCollisions:import_ag_charts_core72.boolean,itemStyler:import_ag_charts_core72.callback,format:import_ag_charts_core72.string,...seriesLabelOptionsDefs5},tooltip:tooltipOptionsDefs9,...commonSeriesOptionsDefs9,...without2(import_ag_charts_core72.fillOptionsDef,["fill"]),...without2(import_ag_charts_core72.strokeOptionsDef,["stroke"]),...import_ag_charts_core72.lineDashOptionsDef},import_ag_charts_community204=require("ag-charts-community"),{ThemeConstants:{CARTESIAN_AXIS_TYPE:CARTESIAN_AXIS_TYPE8}}=import_ag_charts_community204._ModuleSupport,CONE_FUNNEL_SERIES_THEME={series:{direction:"vertical",fills:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},import_ag_charts_community204._ModuleSupport.SAFE_RANGE2_OPERATION]},strokes:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},import_ag_charts_community204._ModuleSupport.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community204._ModuleSupport.FILL_PATTERN_DEFAULTS,strokeWidth:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4}},seriesArea:{padding:{top:20,bottom:20}},axes:{[CARTESIAN_AXIS_TYPE8.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1,formatter(t){return Math.abs(t.value).toFixed(t.fractionDigits??0)}}},[CARTESIAN_AXIS_TYPE8.CATEGORY]:{line:{enabled:!1}}}},ConeFunnelModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"cone-funnel",moduleFactory:t=>new ConeFunnelSeries(t),solo:!0,tooltipDefaults:{range:"nearest"},defaultAxes:FUNNEL_SERIES_AXES,themeTemplate:CONE_FUNNEL_SERIES_THEME},ConeFunnelSeriesModule={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:coneFunnelSeriesOptionsDef,create:t=>new ConeFunnelSeries(t)},import_ag_charts_community209=require("ag-charts-community"),import_ag_charts_community207=require("ag-charts-community"),import_ag_charts_community206=require("ag-charts-community"),{FillGradientDefaults:FillGradientDefaults8,FillPatternDefaults:FillPatternDefaults8,Label:Label8,DropShadow:DropShadow4,AbstractBarSeriesProperties:AbstractBarSeriesProperties6,BaseProperties:BaseProperties24,SeriesTooltip:SeriesTooltip10,AxisLabel:AxisLabel3,TempValidate:TempValidate66,UNION:UNION13,BOOLEAN:BOOLEAN30,ARRAY_OF:ARRAY_OF3,OR:OR12,COLOR_GRADIENT:COLOR_GRADIENT8,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY6,COLOR_PATTERN:COLOR_PATTERN8,COLOR_STRING:COLOR_STRING18,FUNCTION:FUNCTION13,LINE_DASH:LINE_DASH13,OBJECT:OBJECT32,POSITIVE_NUMBER:POSITIVE_NUMBER25,RATIO:RATIO21,STRING:STRING32}=import_ag_charts_community206._ModuleSupport,FunnelSeriesLabel=class extends Label8{},FunnelSeriesStageLabel=class extends AxisLabel3{};__decorateClass([TempValidate66(UNION13(["before","after"],"a placement"))],FunnelSeriesStageLabel.prototype,"placement",2);var FunnelDropOff=class extends BaseProperties24{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate66(BOOLEAN30)],FunnelDropOff.prototype,"enabled",2),__decorateClass([TempValidate66(OR12(COLOR_GRADIENT8,COLOR_STRING18,COLOR_PATTERN8),{optional:!0})],FunnelDropOff.prototype,"fill",2),__decorateClass([TempValidate66(RATIO21)],FunnelDropOff.prototype,"fillOpacity",2),__decorateClass([TempValidate66(COLOR_STRING18,{optional:!0})],FunnelDropOff.prototype,"stroke",2),__decorateClass([TempValidate66(POSITIVE_NUMBER25)],FunnelDropOff.prototype,"strokeWidth",2),__decorateClass([TempValidate66(RATIO21)],FunnelDropOff.prototype,"strokeOpacity",2),__decorateClass([TempValidate66(LINE_DASH13)],FunnelDropOff.prototype,"lineDash",2),__decorateClass([TempValidate66(POSITIVE_NUMBER25)],FunnelDropOff.prototype,"lineDashOffset",2);var FunnelProperties=class extends AbstractBarSeriesProperties6{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new FillGradientDefaults8,this.fillPatternDefaults=new FillPatternDefaults8,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new FunnelDropOff,this.shadow=new DropShadow4().set({enabled:!1}),this.label=new FunnelSeriesLabel,this.stageLabel=new FunnelSeriesStageLabel,this.tooltip=new SeriesTooltip10}};__decorateClass([TempValidate66(STRING32)],FunnelProperties.prototype,"stageKey",2),__decorateClass([TempValidate66(STRING32)],FunnelProperties.prototype,"valueKey",2),__decorateClass([TempValidate66(ARRAY_OF3(OR12(COLOR_GRADIENT8,COLOR_PATTERN8,COLOR_STRING18)))],FunnelProperties.prototype,"fills",2),__decorateClass([TempValidate66(OBJECT32)],FunnelProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate66(OBJECT32)],FunnelProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate66(RATIO21)],FunnelProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate66(COLOR_STRING_ARRAY6)],FunnelProperties.prototype,"strokes",2),__decorateClass([TempValidate66(POSITIVE_NUMBER25)],FunnelProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate66(RATIO21)],FunnelProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate66(LINE_DASH13)],FunnelProperties.prototype,"lineDash",2),__decorateClass([TempValidate66(POSITIVE_NUMBER25)],FunnelProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate66(RATIO21)],FunnelProperties.prototype,"spacingRatio",2),__decorateClass([TempValidate66(FUNCTION13,{optional:!0})],FunnelProperties.prototype,"itemStyler",2),__decorateClass([TempValidate66(OBJECT32)],FunnelProperties.prototype,"dropOff",2),__decorateClass([TempValidate66(OBJECT32)],FunnelProperties.prototype,"shadow",2),__decorateClass([TempValidate66(OBJECT32)],FunnelProperties.prototype,"label",2),__decorateClass([TempValidate66(OBJECT32)],FunnelProperties.prototype,"stageLabel",2),__decorateClass([TempValidate66(OBJECT32)],FunnelProperties.prototype,"tooltip",2);var{ChartAxisDirection:ChartAxisDirection24,resetBarSelectionsFn:resetBarSelectionsFn3,prepareBarAnimationFunctions:prepareBarAnimationFunctions3,midpointStartingBarPosition:midpointStartingBarPosition2,createDatumId:createDatumId11,formatValue:formatValue2,Rect:Rect7,motion:motion5,applyShapeStyle:applyShapeStyle5,getShapeStyle:getShapeStyle9}=import_ag_charts_community207._ModuleSupport,FunnelSeries=class extends BaseFunnelSeries{constructor(t){super({moduleCtx:t,animationResetFns:{datum:resetBarSelectionsFn3}}),this.properties=new FunnelProperties}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:r}=this.properties;return{fillOpacity:t,strokeOpacity:e,strokeWidth:i,lineDash:o,lineDashOffset:s,fillGradientDefaults:a,fillPatternDefaults:r}}connectorStyle(){const{fill:t,fillOpacity:e,stroke:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r}=this.properties.dropOff;return{fill:t,fillOpacity:e,stroke:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults}}nodeFactory(){return new Rect7}createLabelData({datumIndex:t,rect:e,yDatum:i,datum:o,visible:s}){const{valueKey:a,stageKey:r,label:n}=this.properties;return{x:e.x+e.width/2,y:e.y+e.height/2,textAlign:"center",textBaseline:"middle",text:this.getLabelText(n,{itemId:r,value:i,datum:o,valueKey:a,stageKey:r},l=>formatValue2(l,0)),itemId:r,datum:o,datumIndex:t,series:this,visible:s}}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return getShapeStyle9({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},e.fillGradientDefaults,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:r}=this,{stageKey:n,valueKey:l,fills:c,strokes:h,itemStyler:u}=r,p=o.fill??c[i%c.length]??"black",d=o.stroke??h[i%h.length]??"black",g={};if(s||(g.fill=p,g.stroke=d),u!=null){const f=this.cachedDatumCallback(createDatumId11(t,s?"highlight":"node"),()=>{const{fillOpacity:y,strokeOpacity:m,strokeWidth:b,lineDash:x,lineDashOffset:S}=o;return this.callWithContext(u,{seriesId:a,datum:e,highlighted:s,stageKey:n,valueKey:l,fill:p,fillOpacity:y,stroke:d,strokeOpacity:m,strokeWidth:b,lineDash:x,lineDashOffset:S})});Object.assign(g,f)}return getShapeStyle9(g,r.fillGradientDefaults,r.fillPatternDefaults)}updateDatumNodes(t){const{shadow:e}=this.properties,{datumSelection:i,isHighlight:o}=t,s=this.getCategoryDirection()===ChartAxisDirection24.X,a=this.getItemBaseStyle(o),r=this.getShapeFillBBox();i.each((n,l)=>{const{datumIndex:c}=l,h=this.getItemStyleOverrides(String(l.datumIndex),l.datum,c,a,o);applyShapeStyle5(n,a,h,r),n.visible=s?l.width>0:l.height>0,n.crisp=l.crisp,n.fillShadow=e})}tooltipStyle(t,e){const i=this.getItemBaseStyle(!1);return Object.assign(i,this.getItemStyleOverrides(String(e),t,e,i,!1)),i}animateEmptyUpdateReady(t){super.animateEmptyUpdateReady(t);const{datumSelection:e}=t,i=this.isVertical(),s=prepareBarAnimationFunctions3(midpointStartingBarPosition2(i,"normal"));motion5.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],s)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t);const{datumSelection:e}=t,{processedData:i}=this,o=i?.reduced?.diff?.[this.id],s=prepareBarAnimationFunctions3(midpointStartingBarPosition2(this.isVertical(),"fade"));motion5.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],s,(a,r)=>r.xValue,o)}};FunnelSeries.className="FunnelSeries",FunnelSeries.type="funnel";var import_ag_charts_community208=require("ag-charts-community"),import_ag_charts_core73=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs10,seriesLabelOptionsDefs:seriesLabelOptionsDefs6,shadowOptionsDefs:shadowOptionsDefs4,tooltipOptionsDefs:tooltipOptionsDefs10,without:without3}=import_ag_charts_community208._ModuleSupport,funnelSeriesOptionsDef={type:(0,import_ag_charts_core73.required)((0,import_ag_charts_core73.constant)("funnel")),stageKey:(0,import_ag_charts_core73.required)(import_ag_charts_core73.string),valueKey:(0,import_ag_charts_core73.required)(import_ag_charts_core73.string),direction:(0,import_ag_charts_core73.union)("horizontal","vertical"),fills:(0,import_ag_charts_core73.arrayOf)(import_ag_charts_core73.colorUnion),strokes:(0,import_ag_charts_core73.arrayOf)(import_ag_charts_core73.color),showInMiniChart:import_ag_charts_core73.boolean,itemStyler:import_ag_charts_core73.callback,spacingRatio:import_ag_charts_core73.ratio,crisp:import_ag_charts_core73.boolean,dropOff:{enabled:import_ag_charts_core73.boolean,...import_ag_charts_core73.fillOptionsDef,...import_ag_charts_core73.strokeOptionsDef,...import_ag_charts_core73.lineDashOptionsDef},stageLabel:{rotation:import_ag_charts_core73.number,spacing:import_ag_charts_core73.positiveNumber,minSpacing:import_ag_charts_core73.positiveNumber,placement:(0,import_ag_charts_core73.union)("before","after"),avoidCollisions:import_ag_charts_core73.boolean,itemStyler:import_ag_charts_core73.callback,format:import_ag_charts_core73.string,...seriesLabelOptionsDefs6},label:seriesLabelOptionsDefs6,tooltip:tooltipOptionsDefs10,shadow:shadowOptionsDefs4,...commonSeriesOptionsDefs10,...without3(import_ag_charts_core73.fillOptionsDef,["fill"]),...without3(import_ag_charts_core73.strokeOptionsDef,["stroke"]),...import_ag_charts_core73.lineDashOptionsDef},FunnelModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"funnel",moduleFactory:t=>new FunnelSeries(t),solo:!0,tooltipDefaults:{range:"exact"},defaultAxes:FUNNEL_SERIES_AXES,themeTemplate:FUNNEL_SERIES_THEME},FunnelSeriesModule={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:funnelSeriesOptionsDef,create:t=>new FunnelSeries(t)},import_ag_charts_community218=require("ag-charts-community"),import_ag_charts_community216=require("ag-charts-community"),DatumUnion=class{*[Symbol.iterator](){const{node:t,datum:e}=this;t&&e&&(yield{node:t,datum:e})}nodes(){return this.node?[this.node]:[]}update(t,e,i,o){const s=t.nodes();if(s.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,e.appendChild(this.node));const a=s[0],r=s.toReversed().find(n=>n.datum.datum.value>n.datum.datum.segmentStart)??s[s.length-1];this.node.datum=this.datum=a.datum,o(this.node,a,r)}}},fadeInFns={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function formatLabel(t,e){if(t==null)return"";const{min:i,max:o}=e,s=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,a=o!==0?Math.ceil(Math.log10(Math.abs(o))):0,r=Math.max(2-Math.max(s,a),0);return t.toFixed(r)}function getLabelText(t,e,i){if(e.text!=null)return e.text;const o=i??e.value,s=e?.formatter?.({seriesId:t.id,datum:void 0,value:o});if(s!=null)return String(s)}var import_ag_charts_community210=require("ag-charts-community");function lineMarker({path:t,x:e,y:i,size:o}){t.moveTo(e,i-o/2),t.lineTo(e,i+o/2)}var import_ag_charts_community211=require("ag-charts-community"),import_ag_charts_core74=require("ag-charts-core");function pickGaugeNearestDatum(t,e){const i=(0,import_ag_charts_core74.iterate)(t.datumUnion.nodes(),t.targetSelection.nodes());return t.pickNodeNearestDistantObject(e,i)}function pickGaugeFocus(t,e){const i=[{data:t.contextNodeData?.nodeData,selection:t.datumUnion},{data:t.contextNodeData?.targetData,selection:t.targetSelection}].filter(l=>l.data&&l.data.length>0),o=(0,import_ag_charts_core74.clamp)(0,e.otherIndex+e.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:s,selection:a}=i[o];if(s==null||s.length===0)return;const r=(0,import_ag_charts_core74.clamp)(0,e.datumIndex,s.length-1),n=s[r];for(const l of a)if(l.datum===n)return{bounds:l.node,clipFocusBox:!0,datum:n,datumIndex:r,otherIndex:o}}var import_ag_charts_community214=require("ag-charts-community"),import_ag_charts_community212=require("ag-charts-community"),{MARKER_SHAPE,UNION:UNION14,OR:OR13}=import_ag_charts_community212._ModuleSupport,FILL_MODE=UNION14(["continuous","discrete"],"a fill mode"),TARGET_MARKER_SHAPE=OR13(MARKER_SHAPE,UNION14(["line"],"a marker shape")),CORNER_MODE=UNION14(["container","item"],"a corner mode"),import_ag_charts_community213=require("ag-charts-community"),import_ag_charts_core75=require("ag-charts-core"),{BaseProperties:BaseProperties25,TempValidate:TempValidate67,OBJECT:OBJECT33,BOOLEAN:BOOLEAN31,NUMBER:NUMBER16,NUMBER_ARRAY}=import_ag_charts_community213._ModuleSupport,GaugeSegmentationIntervalProperties=class extends BaseProperties25{getSegments(t,e){const{values:i,step:o,count:s}=this,a=Math.min(...t.domain),r=Math.max(...t.domain);let n;if(i!=null){const l=i.filter(c=>c>a&&c<r).sort((c,h)=>c-h);n=[a,...l,r]}else if(o!=null){const l=[];for(let c=a;c<r;c+=o)l.push(c);l.push(r),n=l}else if(s!=null){const l=s+1;n=Array.from({length:l+1},(c,h)=>h/l*(r-a)+a)}else{const l=t.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.filter(c=>c>a&&c<r);n=l!=null?[a,...l,r]:void 0}return n!=null&&n.length>e&&(import_ag_charts_core75.Logger.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),n=void 0),n??(n=[a,r]),n}};__decorateClass([TempValidate67(NUMBER_ARRAY,{optional:!0})],GaugeSegmentationIntervalProperties.prototype,"values",2),__decorateClass([TempValidate67(NUMBER16,{optional:!0})],GaugeSegmentationIntervalProperties.prototype,"step",2),__decorateClass([TempValidate67(NUMBER16,{optional:!0})],GaugeSegmentationIntervalProperties.prototype,"count",2);var GaugeSegmentationProperties=class extends BaseProperties25{constructor(){super(...arguments),this.enabled=!1,this.interval=new GaugeSegmentationIntervalProperties,this.spacing=0}};__decorateClass([TempValidate67(BOOLEAN31)],GaugeSegmentationProperties.prototype,"enabled",2),__decorateClass([TempValidate67(OBJECT33)],GaugeSegmentationProperties.prototype,"interval",2),__decorateClass([TempValidate67(NUMBER16)],GaugeSegmentationProperties.prototype,"spacing",2);var{BaseProperties:BaseProperties26,SeriesTooltip:SeriesTooltip11,SeriesProperties:SeriesProperties2,PropertiesArray:PropertiesArray7,TempValidate:TempValidate68,BOOLEAN:BOOLEAN32,COLOR_STRING:COLOR_STRING19,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY7,FUNCTION:FUNCTION14,LINE_DASH:LINE_DASH14,NUMBER:NUMBER17,OBJECT_ARRAY:OBJECT_ARRAY2,OBJECT:OBJECT34,POSITIVE_NUMBER:POSITIVE_NUMBER26,RATIO:RATIO22,STRING:STRING33,NUMBER_ARRAY:NUMBER_ARRAY2,UNION:UNION15,AND:AND6,LESS_THAN:LESS_THAN3,GREATER_THAN:GREATER_THAN3,Label:Label9,AxisLabel:AxisLabel4}=import_ag_charts_community214._ModuleSupport,TARGET_PLACEMENT=UNION15(["before","after","middle"],"a placement"),LABEL_PLACEMENT=UNION15(["inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end"],"an placement"),DIRECTION=UNION15(["horizontal","vertical"],"an orientation"),PLACEMENT3=UNION15(["before","after"],"a placement"),LinearGaugeDefaultTargetLabelProperties=class extends Label9{};__decorateClass([TempValidate68(NUMBER17,{optional:!0})],LinearGaugeDefaultTargetLabelProperties.prototype,"spacing",2);var LinearGaugeTargetProperties=class extends BaseProperties26{constructor(){super(...arguments),this.value=0,this.label=new LinearGaugeDefaultTargetLabelProperties}};__decorateClass([TempValidate68(STRING33,{optional:!0})],LinearGaugeTargetProperties.prototype,"text",2),__decorateClass([TempValidate68(NUMBER17)],LinearGaugeTargetProperties.prototype,"value",2),__decorateClass([TempValidate68(TARGET_MARKER_SHAPE,{optional:!0})],LinearGaugeTargetProperties.prototype,"shape",2),__decorateClass([TempValidate68(TARGET_PLACEMENT,{optional:!0})],LinearGaugeTargetProperties.prototype,"placement",2),__decorateClass([TempValidate68(NUMBER17,{optional:!0})],LinearGaugeTargetProperties.prototype,"spacing",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26,{optional:!0})],LinearGaugeTargetProperties.prototype,"size",2),__decorateClass([TempValidate68(NUMBER17,{optional:!0})],LinearGaugeTargetProperties.prototype,"rotation",2),__decorateClass([TempValidate68(COLOR_STRING19,{optional:!0})],LinearGaugeTargetProperties.prototype,"fill",2),__decorateClass([TempValidate68(RATIO22,{optional:!0})],LinearGaugeTargetProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate68(COLOR_STRING19,{optional:!0})],LinearGaugeTargetProperties.prototype,"stroke",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26,{optional:!0})],LinearGaugeTargetProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate68(RATIO22,{optional:!0})],LinearGaugeTargetProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate68(LINE_DASH14,{optional:!0})],LinearGaugeTargetProperties.prototype,"lineDash",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26,{optional:!0})],LinearGaugeTargetProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeTargetProperties.prototype,"label",2);var LinearGaugeBarProperties=class extends BaseProperties26{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new PropertiesArray7(import_ag_charts_community214._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate68(BOOLEAN32)],LinearGaugeBarProperties.prototype,"enabled",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26,{optional:!0})],LinearGaugeBarProperties.prototype,"thickness",2),__decorateClass([TempValidate68(RATIO22)],LinearGaugeBarProperties.prototype,"thicknessRatio",2),__decorateClass([TempValidate68(OBJECT_ARRAY2)],LinearGaugeBarProperties.prototype,"fills",2),__decorateClass([TempValidate68(FILL_MODE)],LinearGaugeBarProperties.prototype,"fillMode",2),__decorateClass([TempValidate68(COLOR_STRING19,{optional:!0})],LinearGaugeBarProperties.prototype,"fill",2),__decorateClass([TempValidate68(RATIO22)],LinearGaugeBarProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate68(COLOR_STRING19)],LinearGaugeBarProperties.prototype,"stroke",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26)],LinearGaugeBarProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate68(RATIO22)],LinearGaugeBarProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate68(LINE_DASH14)],LinearGaugeBarProperties.prototype,"lineDash",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26)],LinearGaugeBarProperties.prototype,"lineDashOffset",2);var LinearGaugeScaleIntervalProperties=class extends BaseProperties26{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};__decorateClass([TempValidate68(NUMBER_ARRAY2,{optional:!0})],LinearGaugeScaleIntervalProperties.prototype,"values",2),__decorateClass([TempValidate68(NUMBER17,{optional:!0})],LinearGaugeScaleIntervalProperties.prototype,"step",2),__decorateClass([TempValidate68(NUMBER17)],LinearGaugeScaleIntervalProperties.prototype,"minSpacing",2),__decorateClass([TempValidate68(NUMBER17)],LinearGaugeScaleIntervalProperties.prototype,"maxSpacing",2);var LinearGaugeScaleLabelProperties=class extends AxisLabel4{constructor(){super(...arguments),this.placement=void 0}};__decorateClass([TempValidate68(PLACEMENT3,{optional:!0})],LinearGaugeScaleLabelProperties.prototype,"placement",2);var LinearGaugeScaleProperties=class extends BaseProperties26{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new PropertiesArray7(import_ag_charts_community214._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new LinearGaugeScaleIntervalProperties,this.label=new LinearGaugeScaleLabelProperties}};__decorateClass([TempValidate68(AND6(NUMBER17,LESS_THAN3("max")))],LinearGaugeScaleProperties.prototype,"min",2),__decorateClass([TempValidate68(AND6(NUMBER17,GREATER_THAN3("min")))],LinearGaugeScaleProperties.prototype,"max",2),__decorateClass([TempValidate68(OBJECT_ARRAY2)],LinearGaugeScaleProperties.prototype,"fills",2),__decorateClass([TempValidate68(FILL_MODE)],LinearGaugeScaleProperties.prototype,"fillMode",2),__decorateClass([TempValidate68(COLOR_STRING19,{optional:!0})],LinearGaugeScaleProperties.prototype,"fill",2),__decorateClass([TempValidate68(RATIO22)],LinearGaugeScaleProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate68(COLOR_STRING19)],LinearGaugeScaleProperties.prototype,"stroke",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26)],LinearGaugeScaleProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate68(RATIO22)],LinearGaugeScaleProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate68(LINE_DASH14)],LinearGaugeScaleProperties.prototype,"lineDash",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26)],LinearGaugeScaleProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate68(COLOR_STRING19)],LinearGaugeScaleProperties.prototype,"defaultFill",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeScaleProperties.prototype,"interval",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeScaleProperties.prototype,"label",2);var LinearGaugeLabelProperties=class extends AutoSizedLabel{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};__decorateClass([TempValidate68(STRING33,{optional:!0})],LinearGaugeLabelProperties.prototype,"text",2),__decorateClass([TempValidate68(LABEL_PLACEMENT)],LinearGaugeLabelProperties.prototype,"placement",2),__decorateClass([TempValidate68(BOOLEAN32)],LinearGaugeLabelProperties.prototype,"avoidCollisions",2);var LinearGaugeSeriesProperties=class extends SeriesProperties2{constructor(){super(...arguments),this.value=0,this.segmentation=new GaugeSegmentationProperties,this.defaultColorRange=[],this.targets=new PropertiesArray7(LinearGaugeTargetProperties),this.defaultTarget=new LinearGaugeTargetProperties,this.defaultScale=new LinearGaugeScaleProperties,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new LinearGaugeScaleProperties,this.bar=new LinearGaugeBarProperties,this.label=new LinearGaugeLabelProperties,this.tooltip=new SeriesTooltip11}};__decorateClass([TempValidate68(NUMBER17)],LinearGaugeSeriesProperties.prototype,"value",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeSeriesProperties.prototype,"segmentation",2),__decorateClass([TempValidate68(COLOR_STRING_ARRAY7)],LinearGaugeSeriesProperties.prototype,"defaultColorRange",2),__decorateClass([TempValidate68(OBJECT_ARRAY2)],LinearGaugeSeriesProperties.prototype,"targets",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeSeriesProperties.prototype,"defaultTarget",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeSeriesProperties.prototype,"defaultScale",2),__decorateClass([TempValidate68(DIRECTION)],LinearGaugeSeriesProperties.prototype,"direction",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26)],LinearGaugeSeriesProperties.prototype,"thickness",2),__decorateClass([TempValidate68(POSITIVE_NUMBER26)],LinearGaugeSeriesProperties.prototype,"cornerRadius",2),__decorateClass([TempValidate68(CORNER_MODE)],LinearGaugeSeriesProperties.prototype,"cornerMode",2),__decorateClass([TempValidate68(NUMBER17)],LinearGaugeSeriesProperties.prototype,"margin",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeSeriesProperties.prototype,"scale",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeSeriesProperties.prototype,"bar",2),__decorateClass([TempValidate68(FUNCTION14,{optional:!0})],LinearGaugeSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeSeriesProperties.prototype,"label",2),__decorateClass([TempValidate68(OBJECT34)],LinearGaugeSeriesProperties.prototype,"tooltip",2);var import_ag_charts_community215=require("ag-charts-community"),{CachedTextMeasurerPool:CachedTextMeasurerPool5,BBox:BBox17}=import_ag_charts_community215._ModuleSupport;function datumRect(t){const{x0:e,y0:i,x1:o,y1:s,horizontalInset:a,verticalInset:r}=t,n=Math.min(e,o)+a,l=Math.min(i,s)+r,c=Math.max(Math.abs(o-e)-2*a,0),h=Math.max(Math.abs(s-i)-2*r,0);return{x:n,y:l,width:c,height:h}}function clipBBoxVisibility(t,e){if(e==null)return!0;const i=datumRect(t),o=1e-6,s=i.x+o,a=i.y+o,r=i.x+i.width-o,n=i.y+i.height-o,l=e.x,c=e.x+e.width,h=e.y,u=e.y+e.height;return Math.max(s,l)<=Math.min(r,c)&&Math.max(a,h)<=Math.min(n,u)}function hasClipBBox(t){const{clipX0:e,clipX1:i,clipY0:o,clipY1:s}=t;return e!=null&&i!=null||o!=null&&s!=null}function computeClipBBox(t){if(!hasClipBBox(t))return;const{x0:e,y0:i,x1:o,y1:s}=t,{x:a,y:r,width:n,height:l}=datumRect(t);let{clipX0:c,clipX1:h,clipY0:u,clipY1:p}=t;(c==null||h==null)&&(c=e,h=o),(u==null||p==null)&&(u=i,p=s);const d=Math.min(c,h),g=Math.min(u,p),f=Math.abs(h-c),y=Math.abs(p-u);return c=Math.max(a,d),u=Math.max(r,g),h=Math.min(a+n,d+f),p=Math.min(r+l,g+y),new BBox17(Math.min(c,h),Math.min(u,p),Math.abs(h-c),Math.abs(p-u))}function prepareLinearGaugeSeriesAnimationFunctions(t,e){const i=t?"initial":"update";return{node:{fromFn(s,a){const r=s.previousDatum;let{x0:n,y0:l,x1:c,y1:h,clipX0:u,clipY0:p,clipX1:d,clipY1:g}=r??a;const{horizontalInset:f,verticalInset:y}=a,m=r!=null&&hasClipBBox(r),b=hasClipBBox(a);return m&&b||(!m&&b?({x0:n,y0:l,x1:c,y1:h,clipX0:u,clipY0:p,clipX1:d,clipY1:g}=a,t&&(e?d=a.clipX0:g=a.clipY0)):m&&!b?({x0:n,y0:l,x1:c,y1:h}=a,u=void 0,p=void 0,d=void 0,g=void 0):t&&(e?c=n:h=l)),{x0:n,y0:l,x1:c,y1:h,clipX0:u,clipY0:p,clipX1:d,clipY1:g,horizontalInset:f,verticalInset:y,phase:i}},toFn(s,a){const{x0:r,y0:n,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:p,clipY1:d,horizontalInset:g,verticalInset:f}=a;return{x0:r,y0:n,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:p,clipY1:d,horizontalInset:g,verticalInset:f}},applyFn(s,a){s.setProperties(resetLinearGaugeSeriesResetRectFunction(s,a))}}}}function resetLinearGaugeSeriesResetRectFunction(t,e){const{x:i,y:o,width:s,height:a}=datumRect(e),r=computeClipBBox(e),n=clipBBoxVisibility(e,r);return{x:i,y:o,width:s,height:a,clipBBox:r,visible:n}}var horizontalTextAligns={Before:"right",Center:"center",After:"left"},verticalTextBaselines={Before:"top",Center:"middle",After:"bottom"},horizontalAlignFactors={Before:-1,Center:-.5,After:0},verticalAlignFactors2={Before:0,Center:-.5,After:-1};function formatLinearGaugeLabels(t,e,i,o,s){const{seriesRect:a,gaugeRect:r,barRect:n}=o,{padding:l,horizontal:c}=i;e.each((h,u)=>{const p=getLabelText(t,u,s?.label);let d,g;u.placement==="outside-start"?c?(d=r.x,g=a.height):(d=a.width,g=a.height-(r.y+r.height)):u.placement==="outside-end"?c?(d=a.width-(r.x+r.width),g=a.height):(d=a.width,g=r.y):u.avoidCollisions&&(d=r.width,g=r.height);let f;if(p==null)return;if(d!=null&&g!=null)f=formatSingleLabel(p,u,{padding:l},()=>({width:d,height:g,meta:null}))?.[0];else{const I={fontSize:u.fontSize,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontFamily:u.fontFamily,lineHeight:u.lineHeight},{width:w,height:L}=CachedTextMeasurerPool5.measureText(p,{font:I});f={text:p,fontSize:u.fontSize,lineHeight:getLineHeight(u,u.fontSize),width:w,height:L}}if(f==null){h.visible=!1;return}const y=c?r.x:r.y+r.height,m=c?r.x+r.width:r.y,b=c?n.x:n.y+n.height,x=c?n.x+n.width:n.y,S=u.spacing*(c?1:-1);let v,T,D,k;switch(u.placement){case"outside-start":v=-1/0,T=1/0,D=y-S,k="Before";break;case"outside-end":v=-1/0,T=1/0,D=m+S,k="After";break;case"inside-start":v=y,T=x,D=y+S,k="After";break;case"inside-end":v=x,T=m,D=m-S,k="Before";break;case"inside-center":v=y,T=m,D=(y+m)/2,k="Center";break;case"bar-inside":v=b,T=x,D=(b+x)/2,k="Center";break;case"bar-inside-end":v=b,T=x,D=x-S,k="Before";break;case"bar-outside-end":v=x,T=m,D=x+S,k="After";break;case"bar-end":v=-1/0,T=1/0,D=x,k="Center";break}const A=c?D:r.x+r.width/2,M=c?r.y+r.height/2:D;let _,O;c?(_=A+horizontalAlignFactors[k]*f.width,O=_+f.width):(_=M+verticalAlignFactors2[k]*f.height,O=_+f.height);const C=Math.min(_,O)>=Math.min(v,T)&&Math.max(_,O)<=Math.max(v,T);if(u.avoidCollisions&&!C){h.visible=!1;return}h.visible=!0,h.text=f.text,h.fontSize=f.fontSize,h.lineHeight=f.lineHeight,h.textAlign=c?horizontalTextAligns[k]:"center",h.textBaseline=c?"middle":verticalTextBaselines[k],h.x=A,h.y=M})}var{fromToMotion:fromToMotion2,resetMotion:resetMotion3,SeriesNodePickMode:SeriesNodePickMode8,StateMachine:StateMachine12,createDatumId:createDatumId12,CachedTextMeasurerPool:CachedTextMeasurerPool6,toRadians:toRadians5,BBox:BBox18,Group:Group12,PointerEvents:PointerEvents5,Selection:Selection6,Rect:Rect8,Text:Text2,TransformableText:TransformableText2,Marker:Marker2,LinearScale:LinearScale3,AxisTickGenerator:AxisTickGenerator2,NiceMode,easing,getColorStops,findRangeExtent}=import_ag_charts_community216._ModuleSupport,horizontalTargetPlacementRotation={before:180,middle:0,after:0},verticalTargetPlacementRotation={before:90,middle:0,after:-90},LinearGaugeAxis=class{constructor(t){this.gauge=t}get defaultTickMinSpacing(){return 0}get range(){return this.gauge.range}get reverse(){return!1}get scale(){return this.gauge.scale}get label(){return this.gauge.properties.scale.label}get interval(){return this.gauge.properties.scale.interval}formatTick(t,e,i,o,s){const{label:a}=this;return a.formatter?.({value:t,index:e,domain:i,boundSeries:void 0})??(a.format!=null?s?.(t):void 0)??this.gauge.formatLabel(t)}inRange(){return!0}},LinearGaugeSeries=class extends import_ag_charts_community216._ModuleSupport.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[SeriesNodePickMode8.EXACT_SHAPE_MATCH,SeriesNodePickMode8.NEAREST_NODE]}),this.properties=new LinearGaugeSeriesProperties,this.seriesRect=BBox18.NaN,this.gaugeRect=BBox18.NaN,this.scale=new LinearScale3,this.axis=new LinearGaugeAxis(this),this.tickGenerator=new AxisTickGenerator2(this.axis),this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new Group12({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Group12({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Group12({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Group12({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Group12({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Group12({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Group12({name:"tickGroup"})),this.scaleSelection=Selection6.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=Selection6.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=Selection6.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=Selection6.select(this.itemTargetLabelGroup,Text2),this.labelSelection=Selection6.select(this.itemLabelGroup,Text2),this.highlightTargetSelection=Selection6.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=Selection6.select(this.tickGroup,TransformableText2),this.datumUnion=new DatumUnion,this.animationState=new StateMachine12("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=PointerEvents5.None,this.tickGroup.pointerEvents=PointerEvents5.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const t=new Rect8;return t.crisp=!0,t}markerFactory(){return new Marker2}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){return formatLabel(t,this.properties.scale)}createLinearGradient(t,e,i){const{properties:o,horizontal:s}=this,{defaultColorRange:a}=o;return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:getColorStops(e,a,t.domain,i),rotation:s?90:0}}getShapeFillBBox(){const{properties:t,originX:e,originY:i,horizontal:o,scale:s}=this,{thickness:a}=t,r=findRangeExtent(s.range);return new BBox18(e,i,o?r:a,o?a:r)}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:o=e.text,value:s=e.value??0,shape:a=e.shape??"triangle",rotation:r=e.rotation??0,strokeWidth:n=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:u=e.fill??"black",fillOpacity:p=e.fillOpacity??1,stroke:d=e.stroke??"black",strokeOpacity:g=e.strokeOpacity??1,lineDash:f=e.lineDash??[0],lineDashOffset:y=e.lineDashOffset??0}=i,{enabled:m=e.label.enabled,color:b=e.label.color??"black",fontStyle:x=e.label.fontStyle??"normal",fontWeight:S=e.label.fontWeight??"normal",fontSize:v=e.label.fontSize,fontFamily:T=e.label.fontFamily,spacing:D=e.label.spacing??0}=i.label;return{text:o,value:s,shape:a,placement:l,spacing:c,size:h,rotation:r,fill:u,fillOpacity:p,stroke:d,strokeWidth:n,strokeOpacity:g,lineDash:f,lineDashOffset:y,label:{enabled:m,color:b,fontStyle:x,fontWeight:S,fontSize:v,fontFamily:T,spacing:D}}})}getTargetPoint(t){const{properties:e,originX:i,originY:o,horizontal:s,scale:a,gaugeRect:r}=this,{thickness:n}=e,{value:l,placement:c,spacing:h,size:u}=t,p=a.convert(l);let d;switch(c){case"before":d=-(h+u/2);break;case"after":d=n+h+u/2;break;default:d=n/2;break}return{x:i+r.x+(s?p:d),y:o+r.y+(s?d:p)}}getTargetLabel(t){const{size:e,placement:i,label:o}=t,{spacing:s,color:a,fontStyle:r,fontWeight:n,fontSize:l,fontFamily:c}=o,h=void 0,u=e/2+s;let p,d,g=0,f=0;return this.horizontal?(p="center",i==="after"?(d="top",f=u):(d="bottom",f=-u)):(d="middle",i==="before"?(p="right",g=-u):(p="left",g=u)),{offsetX:g,offsetY:f,fill:a,textAlign:p,textBaseline:d,fontStyle:r,fontWeight:n,fontSize:l,fontFamily:c,lineHeight:h}}labelDatum(t,e){const{placement:i,avoidCollisions:o,spacing:s,text:a,color:r,fontSize:n,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:p,wrapping:d,overflowStrategy:g,formatter:f=y=>this.formatLabel(y.value)}=t;return{placement:i,avoidCollisions:o,spacing:s,text:a,value:e,fill:r,fontSize:n,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:p,wrapping:d,overflowStrategy:g,formatter:f}}verticalLabelInset(){const{properties:t}=this,{label:e}=t,i=e.text?.split(`
`),o=getLineHeight(e,e.fontSize)*(i?.length??1);return e.spacing+o}horizontalLabelInset(){const{scale:t,properties:e}=this,{scale:i,label:o}=e,s=o.text?.split(`
`),a=o.getFont(),r=i.interval.values??t.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5}),l=(s??r.map(c=>getLabelText(this,this.labelDatum(o,c))??"")).reduce((c,h)=>{const{width:u}=CachedTextMeasurerPool6.measureText(h,{font:a});return Math.max(c,u)},0);return o.spacing+l}createNodeData(){const{id:t,properties:e,horizontal:i,scale:o,seriesRect:s}=this;if(!e.isValid())return;const{value:a,segmentation:r,thickness:n,cornerRadius:l,cornerMode:c,bar:h,scale:u,label:p}=e;o.domain=[u.min,u.max],o.range=i?[0,s.width]:[s.height,0];let d,g;i?(g=1,d=Math.PI/2):u.label.placement==="before"?(g=1,d=0):(g=-1,d=0);const f=d-Math.PI/2;let y,m,b,x;i?(y=0,m=s.width,b=(s.height-n)/2,x=b+n,p.placement==="outside-start"?y+=this.horizontalLabelInset():p.placement==="outside-end"&&(m-=this.horizontalLabelInset())):(y=(s.width-n)/2,m=y+n,x=0,b=s.height,p.placement==="outside-start"?b-=this.verticalLabelInset():p.placement==="outside-end"&&(x+=this.verticalLabelInset())),this.gaugeRect=new BBox18(Math.min(y,m),Math.min(b,x),Math.abs(m-y),Math.abs(x-b));const S=0,v=0;o.domain=[u.min,u.max],o.range=i?[y,m]:[b,x];const{ticks:T}=this.tickGenerator.generateTicks({domain:o.domain,primaryTickCount:void 0,visibleRange:[0,1],niceMode:NiceMode.Off,labelX:0,parallelFlipRotation:d,regularFlipRotation:f,sideFlag:g}).tickData,D=!1,k=this.getTargets(),A=[],M=[],_=[],O=[],[C,I]=o.range,w=Math.abs(I-C),L=i?o.convert(a):m,P=i?x:o.convert(a),z=r.enabled?r.spacing/2:0,R=i?z:0,B=i?0:z,E=Math.min(h.thickness??Math.round(h.thicknessRatio*n),n),F=-(n-E)/2,V=i?0:F,G=i?F:0,W=c==="item",H=Math.ceil(w);let q=r.enabled?r.interval.getSegments(o,H):void 0;const j=h.fill??this.createLinearGradient(o,h.fills,h.fillMode),$=u.fill??(h.enabled&&u.fills.length===0?u.defaultFill:void 0)??this.createLinearGradient(o,u.fills,u.fillMode);if(q==null&&W){const Y=Math.min(...o.domain),U=Math.max(...o.domain),Z={value:a,segmentStart:Y,segmentEnd:U};if(h.enabled){const it=Math.min(l,E/2,w/2)*(D?-1:1),Q=i?it:0,et=i?0:it;A.push({series:this,itemId:"value",datum:Z,datumIndex:{type:0},type:0,x0:S+y-Q-V,y0:v+b-et-G,x1:S+L+Q+V,y1:v+P+et+G,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:j,horizontalInset:R,verticalInset:B})}const K=Math.min(l,n/2,w/2)*(D?-1:1),at=i?K:0,rt=i?0:K;O.push({series:this,itemId:"scale",datum:Z,datumIndex:{type:0},type:0,x0:S+y-at,y0:v+b-rt,x1:S+m+at,y1:v+x+rt,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:$,horizontalInset:R,verticalInset:B})}else{q??(q=o.domain);const Y=S+y-V,U=v+b-G,Z=S+L+V,J=v+P+G;for(let K=0;K<q.length-1;K+=1){const at=q[K+0],rt=q[K+1],tt={value:a,segmentStart:at,segmentEnd:rt},it=K===0,Q=K===q.length-2,et=o.convert(at),ot=o.convert(rt),lt=W||it?l:0,ct=W||Q?l:0,ht=i?lt:ct,dt=ct,ut=i?ct:lt,pt=lt;h.enabled&&A.push({series:this,itemId:`value-${K}`,datum:tt,datumIndex:{type:0},type:0,x0:S+(i?et:y),y0:v+(i?b:et),x1:S+(i?ot:m),y1:v+(i?x:ot),clipX0:Y,clipY0:U,clipX1:Z,clipY1:J,topLeftCornerRadius:ht,topRightCornerRadius:dt,bottomRightCornerRadius:ut,bottomLeftCornerRadius:pt,fill:j,horizontalInset:R,verticalInset:B}),O.push({series:this,itemId:`scale-${K}`,datum:tt,datumIndex:{type:0},type:0,x0:S+(i?et:y),y0:v+(i?b:et),x1:S+(i?ot:m),y1:v+(i?x:ot),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:ht,topRightCornerRadius:dt,bottomRightCornerRadius:ut,bottomLeftCornerRadius:pt,fill:$,horizontalInset:R,verticalInset:B})}}p.enabled&&_.push(this.labelDatum(p,a));const X=i?horizontalTargetPlacementRotation:verticalTargetPlacementRotation;for(let Y=0;Y<k.length;Y+=1){const U=k[Y],{value:Z,text:J,shape:K,size:at,fill:rt,fillOpacity:tt,stroke:it,strokeWidth:Q,strokeOpacity:et,lineDash:ot,lineDashOffset:lt}=U,ct=this.getTargetPoint(U),ht=toRadians5(U.rotation+X[U.placement]);M.push({series:this,itemId:`target-${Y}`,midPoint:ct,datum:{value:Z},datumIndex:{type:1,index:Y},type:1,value:Z,text:J,x:ct.x,y:ct.y,shape:K,size:at,rotation:ht,fill:rt,fillOpacity:tt,stroke:it,strokeOpacity:et,strokeWidth:Q,lineDash:ot,lineDashOffset:lt,label:this.getTargetLabel(U)})}return{itemId:t,nodeData:A,tickData:T,targetData:M,labelData:_,scaleData:O}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,targetSelection:o,targetLabelSelection:s,scaleSelection:a,highlightTargetSelection:r,tickSelection:n}=this;this.seriesRect=t??BBox18.NaN;const l=this.checkResize(t);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],h=this.contextNodeData?.labelData??[],u=this.contextNodeData?.targetData??[],p=this.contextNodeData?.scaleData??[],d=this.contextNodeData?.tickData??[],g=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:p,scaleSelection:a}),this.updateScaleNodes({scaleSelection:a}),this.targetSelection=this.updateTargetSelection({targetData:u,targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:u,targetLabelSelection:s}),this.updateTargetLabelNodes({targetLabelSelection:s}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:h,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:g!=null?[g]:[],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:d,tickSelection:n}),this.updateTickNodes({tickSelection:n}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId12(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:o}=this,{bar:s}=o,{fillOpacity:a,stroke:r,strokeOpacity:n,lineDash:l,lineDashOffset:c}=s,h=this.getStrokeWidth(s.strokeWidth),u=i.animationManager.isSkipped(),p=this.getShapeFillBBox();e.each((d,g)=>{const{topLeftCornerRadius:f,topRightCornerRadius:y,bottomRightCornerRadius:m,bottomLeftCornerRadius:b,fill:x}=g;d.fill=x,d.fillBBox=p,d.fillOpacity=a,d.stroke=r,d.strokeOpacity=n,d.strokeWidth=h,d.lineDash=l,d.lineDashOffset=c,d.topLeftCornerRadius=f,d.topRightCornerRadius=y,d.bottomRightCornerRadius=m,d.bottomLeftCornerRadius=b,d.pointerEvents=this.properties.bar.enabled?import_ag_charts_community216._ModuleSupport.PointerEvents.All:import_ag_charts_community216._ModuleSupport.PointerEvents.None,(u||d.previousDatum==null)&&d.setProperties(resetLinearGaugeSeriesResetRectFunction(d,g))}),this.datumUnion.update(e,this.itemGroup,import_ag_charts_community216._ModuleSupport.Rect,(d,g,f)=>{d.pointerEvents=import_ag_charts_community216._ModuleSupport.PointerEvents.None,d.clipBBox??(d.clipBBox=new BBox18(NaN,NaN,NaN,NaN)),d.x=g.x,d.y=g.y,d.clipBBox.x=g.clipBBox?.x??g.x,d.clipBBox.y=g.clipBBox?.y??g.y,this.horizontal?(d.height=d.clipBBox.height=f.height,d.width=f===g?f.width:f.x+f.width,d.clipBBox.width=d.width-(f.width-(f.clipBBox?.width??f.width)),d.topLeftCornerRadius=g.topLeftCornerRadius,d.bottomLeftCornerRadius=g.bottomLeftCornerRadius,d.topRightCornerRadius=f.topRightCornerRadius,d.bottomRightCornerRadius=f.bottomRightCornerRadius):(d.width=d.clipBBox.width=f.width,d.height=f===g?f.height:f.x+f.height,d.clipBBox.height=d.height-(f.height-(f.clipBBox?.height??f.height)),d.topLeftCornerRadius=g.topLeftCornerRadius,d.topRightCornerRadius=g.topRightCornerRadius,d.bottomLeftCornerRadius=f.bottomLeftCornerRadius,d.bottomRightCornerRadius=f.bottomRightCornerRadius)})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>createDatumId12(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i}=this.properties,{fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:r,lineDash:n,lineDashOffset:l}=i,c=this.getShapeFillBBox();e.each((h,u)=>{const{topLeftCornerRadius:p,topRightCornerRadius:d,bottomRightCornerRadius:g,bottomLeftCornerRadius:f,fill:y}=u;h.fill=y,h.fillBBox=c,h.fillOpacity=o,h.stroke=s,h.strokeOpacity=a,h.strokeWidth=r,h.lineDash=n,h.lineDashOffset=l,h.topLeftCornerRadius=p,h.topRightCornerRadius=d,h.bottomRightCornerRadius=g,h.bottomLeftCornerRadius=f,h.setProperties(resetLinearGaugeSeriesResetRectFunction(h,u))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,o=i?this.properties.highlightStyle.item:void 0;e.each((s,a)=>{const{x:r,y:n,shape:l,size:c,rotation:h,fill:u,fillOpacity:p,stroke:d,strokeOpacity:g,strokeWidth:f,lineDash:y,lineDashOffset:m}=a;s.size=c,s.shape=l==="line"?lineMarker:l,s.fill=o?.fill??u,s.fillOpacity=o?.fillOpacity??p,s.stroke=o?.stroke??d,s.strokeOpacity=o?.strokeOpacity??g,s.strokeWidth=o?.strokeWidth??f,s.lineDash=o?.lineDash??y,s.lineDashOffset=o?.lineDashOffset??m,s.translationX=r,s.translationY=n,s.rotation=h})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,o)=>{const{x:s,y:a,text:r}=o,{offsetX:n,offsetY:l,fill:c,fontStyle:h,fontWeight:u,fontSize:p,fontFamily:d,textAlign:g,textBaseline:f}=o.label;i.visible=!0,i.x=s+n,i.y=a+l,i.text=r,i.fill=c,i.fontStyle=h,i.fontWeight=u,i.fontSize=p,i.fontFamily=d,i.textAlign=g,i.textBaseline=f})}updateTickSelection(t){return t.tickSelection.update(t.tickData,void 0,e=>e.tickId)}updateTickNodes(t){const{gaugeRect:e,properties:i}=this,o=i.defaultScale,{enabled:s,color:a,fontFamily:r=o.label.fontFamily,fontSize:n=o.label.fontSize,fontStyle:l,fontWeight:c=o.label.fontWeight,spacing:h}=i.scale.label;let{placement:u}=i.scale.label;const p=toRadians5(i.scale.label.rotation??0);let d,g,f,y;this.horizontal?(u??(u="after"),d="center",g=u==="before"?"bottom":"top",y=this.originY+e.y+(u==="before"?-h:e.height+h)):(u??(u="before"),d=u==="before"?"end":"start",g="middle",f=this.originX+e.x+(u==="before"?-h:e.width+h)),t.tickSelection.each((m,b)=>{if(!s){m.visible=!1;return}const x=f??b.translationY,S=y??b.translationY;m.visible=!0,m.text=b.tickLabel,m.fill=a,m.fontFamily=r,m.fontSize=n,m.fontStyle=l,m.fontWeight=c,m.textBaseline=g,m.textAlign=d,m.x=x,m.y=S,m.rotationCenterX=x,m.rotationCenterY=S,m.rotation=p})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>"primary")}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((o,s)=>{o.fill=s.fill,o.fontStyle=s.fontStyle,o.fontWeight=s.fontWeight,o.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){const{labelSelection:e,horizontal:i,scale:o,seriesRect:s,gaugeRect:a}=this,{x:r,y:n,width:l,height:c}=a,h=t?.label??this.properties.value;let u;if(i){const g=o.convert(h);u=new BBox18(r,n,g-r,c)}else{const g=o.convert(h);u=new BBox18(r,g,l,c-g)}const p={seriesRect:s,gaugeRect:a,barRect:u},{margin:d}=this.properties;formatLinearGaugeLabels(this,e,{padding:d,horizontal:i},p,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),resetMotion3([this.datumSelection],resetLinearGaugeSeriesResetRectFunction),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i=0,o=0;if(this.labelSelection.each((s,a)=>{s.opacity=1,i=s.previousDatum?.value??t.from??a.value,o=a.value}),!this.labelsHaveExplicitText())if(i===o)this.formatLabelText({label:o});else{const s=`${this.id}_labels`;e.animate({id:s,groupId:"label",from:{label:i},to:{label:o},phase:t.phase??"update",ease:easing.easeOut,onUpdate:a=>this.formatLabelText(a)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=prepareLinearGaugeSeriesAnimationFunctions(!0,this.horizontal);fromToMotion2(this.id,"node",t,[this.datumSelection],e,(i,o)=>o.itemId),fromToMotion2(this.id,"label",t,[this.labelSelection],fadeInFns,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e}=prepareLinearGaugeSeriesAnimationFunctions(!1,this.horizontal);fromToMotion2(this.id,"node",t,[this.datumSelection],e,(i,o)=>o.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:o}=i;if(!i.isValid())return;let s,a;if(t.type===0?(s=i.value,a=i.label.text):{value:s,text:a}=i.targets[t.index],s!=null)return o.formatTooltip(this.properties,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(s)}]},{seriesId:e,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(t){return pickGaugeNearestDatum(this,t)}pickFocus(t){return pickGaugeFocus(this,t)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(t){}datumIndexForCategoryValue(t){}};LinearGaugeSeries.className="LinearGaugeSeries",LinearGaugeSeries.type="linear-gauge";var import_ag_charts_community217=require("ag-charts-community"),import_ag_charts_core76=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs11,autoSizedLabelOptionsDefs:autoSizedLabelOptionsDefs2,seriesLabelOptionsDefs:seriesLabelOptionsDefs7,tooltipOptionsDefs:tooltipOptionsDefs11,numberFormatValidator:numberFormatValidator3}=import_ag_charts_community217._ModuleSupport,fillsOptionsDef={fills:import_ag_charts_core76.gradientColorStops,fillMode:(0,import_ag_charts_core76.union)("continuous","discrete")},linearGaugeTargetOptionsDef={value:(0,import_ag_charts_core76.required)(import_ag_charts_core76.number),text:import_ag_charts_core76.string,shape:(0,import_ag_charts_core76.or)((0,import_ag_charts_core76.union)("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),import_ag_charts_core76.callback),placement:(0,import_ag_charts_core76.union)("before","after","middle"),spacing:import_ag_charts_core76.positiveNumber,size:import_ag_charts_core76.positiveNumber,rotation:import_ag_charts_core76.number,...import_ag_charts_core76.fillOptionsDef,...import_ag_charts_core76.strokeOptionsDef,...import_ag_charts_core76.lineDashOptionsDef},linearGaugeSeriesOptionsDef={type:(0,import_ag_charts_core76.required)((0,import_ag_charts_core76.constant)("linear-gauge")),value:(0,import_ag_charts_core76.required)(import_ag_charts_core76.number),direction:(0,import_ag_charts_core76.union)("horizontal","vertical"),cornerMode:(0,import_ag_charts_core76.union)("container","item"),cornerRadius:import_ag_charts_core76.positiveNumber,thickness:import_ag_charts_core76.positiveNumber,scale:{min:(0,import_ag_charts_core76.and)(import_ag_charts_core76.number,(0,import_ag_charts_core76.lessThan)("max")),max:(0,import_ag_charts_core76.and)(import_ag_charts_core76.number,(0,import_ag_charts_core76.greaterThan)("min")),label:{enabled:import_ag_charts_core76.boolean,formatter:import_ag_charts_core76.callback,rotation:import_ag_charts_core76.number,spacing:import_ag_charts_core76.positiveNumber,minSpacing:import_ag_charts_core76.positiveNumber,placement:(0,import_ag_charts_core76.union)("before","after"),avoidCollisions:import_ag_charts_core76.boolean,format:numberFormatValidator3,...import_ag_charts_core76.fontOptionsDef},interval:{values:(0,import_ag_charts_core76.arrayOf)(import_ag_charts_core76.number),step:import_ag_charts_core76.number},...fillsOptionsDef,...import_ag_charts_core76.fillOptionsDef,...import_ag_charts_core76.strokeOptionsDef,...import_ag_charts_core76.lineDashOptionsDef},targets:(0,import_ag_charts_core76.arrayOfDefs)(linearGaugeTargetOptionsDef,"target options array"),segmentation:{enabled:import_ag_charts_core76.boolean,spacing:import_ag_charts_core76.positiveNumber,interval:{values:(0,import_ag_charts_core76.arrayOf)(import_ag_charts_core76.number),step:import_ag_charts_core76.number,count:import_ag_charts_core76.number}},bar:{enabled:import_ag_charts_core76.boolean,thickness:import_ag_charts_core76.positiveNumber,thicknessRatio:import_ag_charts_core76.ratio,...fillsOptionsDef,...import_ag_charts_core76.fillOptionsDef,...import_ag_charts_core76.strokeOptionsDef,...import_ag_charts_core76.lineDashOptionsDef},label:{...autoSizedLabelOptionsDefs2,text:import_ag_charts_core76.string,spacing:import_ag_charts_core76.positiveNumber,avoidCollisions:import_ag_charts_core76.boolean,placement:(0,import_ag_charts_core76.union)("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:tooltipOptionsDefs11,...commonSeriesOptionsDefs11};linearGaugeSeriesOptionsDef.margin=import_ag_charts_core76.number,linearGaugeSeriesOptionsDef.defaultColorRange=(0,import_ag_charts_core76.arrayOf)(import_ag_charts_core76.color),linearGaugeSeriesOptionsDef.defaultTarget={...linearGaugeTargetOptionsDef,value:import_ag_charts_core76.number,label:{...seriesLabelOptionsDefs7,spacing:import_ag_charts_core76.number}},linearGaugeSeriesOptionsDef.defaultScale=linearGaugeSeriesOptionsDef.scale,linearGaugeSeriesOptionsDef.scale.defaultFill=import_ag_charts_core76.color;var LinearGaugeModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"linear-gauge",moduleFactory:t=>new LinearGaugeSeries(t),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},import_ag_charts_community218._ModuleSupport.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",import_ag_charts_community218._ModuleSupport.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{spacing:11}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[2]},minimumFontSize:12,spacing:18,color:{$ref:"backgroundColor"}},margin:4}}},LinearGaugeSeriesModule={type:"series",name:"linear-gauge",chartType:"gauge",enterprise:!0,options:linearGaugeSeriesOptionsDef,create:t=>new LinearGaugeSeries(t)},import_ag_charts_community225=require("ag-charts-community"),MAP_THEME_DEFAULTS={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1}},import_ag_charts_community223=require("ag-charts-community"),import_ag_charts_core77=require("ag-charts-core"),import_ag_charts_community220=require("ag-charts-community"),delta3=1e-9;function lineSegmentDistanceToPointSquared(t,e,i,o){const[s,a]=t,[r,n]=e,l=r-s,c=n-a,h=l*l+c*c;let u,p;if(Math.abs(h)<delta3)u=s,p=a;else{let f=((i-s)*l+(o-a)*c)/h;f=Math.max(0,Math.min(1,f)),u=s+f*(r-s),p=a+f*(n-a)}const d=i-u,g=o-p;return d*d+g*g}function lineStringDistance(t,e,i){let o=1/0,s=t[t.length-1];for(const a of t)o=Math.min(o,lineSegmentDistanceToPointSquared(s,a,e,i)),s=a;return Math.sqrt(o)}function lineStringLength(t){let[e,i]=t[0],o=0;for(let s=1;s<t.length;s+=1){const[a,r]=t[s],n=Math.hypot(a-e,r-i);o+=n,e=a,i=r}return o}function lineStringCenter(t){if(t.length===0)return;const e=lineStringLength(t)/2;let[i,o]=t[0],s=0;for(let a=1;a<t.length;a+=1){const[r,n]=t[a],l=Math.hypot(r-i,n-o),c=s+l;if(c>e){const h=(e-s)/l,u=[i+(r-i)*h,o+(n-o)*h],p=Math.atan2(n-o,r-i);return{point:u,angle:p}}s=c,i=r,o=n}}var import_ag_charts_community219=require("ag-charts-community"),{LonLatBBox}=import_ag_charts_community219._ModuleSupport;function extendBbox(t,e,i,o,s){return t==null?t=new LonLatBBox(e,i,o,s):(t.lon0=Math.min(t.lon0,e),t.lat0=Math.min(t.lat0,i),t.lon1=Math.max(t.lon1,o),t.lat1=Math.max(t.lat1,s)),t}function polygonBbox(t,e){return t.forEach(i=>{const[o,s]=i;e=extendBbox(e,o,s,o,s)}),e}function polygonCentroid(t){if(t.length===0)return;let e=0,i=0,o=0,[s,a]=t[t.length-1];for(const[r,n]of t){const l=s*n-r*a;o+=l,e+=(s+r)*l,i+=(a+n)*l,s=r,a=n}return o*=3,[e/o,i/o]}function polygonDistance(t,e,i){let o=!1,s=1/0;for(const a of t){let r=a[a.length-1],[n,l]=r;for(const c of a){const[h,u]=c;u>i!=l>i&&e<(n-h)*(i-u)/(l-u)+h&&(o=!o),s=Math.min(s,lineSegmentDistanceToPointSquared(r,c,e,i)),r=c,n=h,l=u}}return(o?-1:1)*Math.sqrt(s)}var{Path:Path10,ExtendedPath2D:ExtendedPath2D4,BBox:BBox19,ScenePathChangeDetection:ScenePathChangeDetection8}=import_ag_charts_community220._ModuleSupport,GeoGeometry=class extends Path10{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new ExtendedPath2D4}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:t}=this;this.strokePath.clear(),this.path.clear(),this.bbox=t!=null?this.drawGeometry(t,void 0):void 0}drawPath(t){super.drawPath(t),this.renderStroke(t,this.strokePath.getPath2D())}containsPoint(t,e){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(t,e)?!1:this.geometryDistance(i,t,e)<=0}distanceSquared(t,e){const{projectedGeometry:i}=this;if(i==null)return 1/0;const o=this.geometryDistance(i,t,e);return o>0?o*o:0}geometryDistance(t,e,i){const{renderMode:o,strokeWidth:s}=this,a=(o&1)!==0,r=(o&2)!==0,n=Math.max(s/2,1)+1;switch(t.type){case"GeometryCollection":return t.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,e,i)),1/0);case"MultiPolygon":return a?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(polygonDistance(c,e,i),0)),1/0):1/0;case"Polygon":return a?Math.max(polygonDistance(t.coordinates,e,i),0):1/0;case"MultiLineString":return r?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(lineStringDistance(c,e,i)-n,0)),1/0):1/0;case"LineString":return r?Math.max(lineStringDistance(t.coordinates,e,i)-n,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(t,e){const{renderMode:i,path:o,strokePath:s}=this,a=(i&1)!==0,r=(i&2)!==0;switch(t.type){case"GeometryCollection":t.geometries.forEach(n=>{e=this.drawGeometry(n,e)});break;case"MultiPolygon":a&&t.coordinates.forEach(n=>{e=this.drawPolygon(o,n,e)});break;case"Polygon":a&&(e=this.drawPolygon(o,t.coordinates,e));break;case"LineString":r&&(e=this.drawLineString(s,t.coordinates,e,!1));break;case"MultiLineString":r&&t.coordinates.forEach(n=>{e=this.drawLineString(s,n,e,!1)});break;case"Point":case"MultiPoint":break}return e}drawPolygon(t,e,i){if(e.length<1)return i;i=this.drawLineString(t,e[0],i,!0);for(let o=1;o<e.length;o+=1){const s=e[o];this.drawLineString(t,s,void 0,!0)}return i}drawLineString(t,e,i,o){if(e.length<2)return i;const s=o?e.length-1:e.length;for(let a=0;a<s;a+=1){const[r,n]=e[a];if(a===0?t.moveTo(r,n):t.lineTo(r,n),i==null)i=new BBox19(r,n,0,0);else{const{x:l,y:c}=i,h=l+i.width,u=c+i.height;i.x=Math.min(l,r),i.y=Math.min(c,n),i.width=Math.max(h,r)-i.x,i.height=Math.max(u,n)-i.y}}return o&&t.closePath(),i}};__decorateClass([ScenePathChangeDetection8()],GeoGeometry.prototype,"projectedGeometry",2),__decorateClass([ScenePathChangeDetection8()],GeoGeometry.prototype,"renderMode",2);function geometryBbox(t,e){if(t.bbox!=null){const[i,o,s,a]=t.bbox;return e=extendBbox(e,i,o,s,a),e}switch(t.type){case"GeometryCollection":t.geometries.forEach(i=>{e=geometryBbox(i,e)});break;case"MultiPolygon":t.coordinates.forEach(i=>{i.length>0&&(e=polygonBbox(i[0],e))});break;case"Polygon":t.coordinates.length>0&&(e=polygonBbox(t.coordinates[0],e));break;case"MultiLineString":t.coordinates.forEach(i=>{e=polygonBbox(i,e)});break;case"LineString":e=polygonBbox(t.coordinates,e);break;case"MultiPoint":t.coordinates.forEach(i=>{const[o,s]=i;e=extendBbox(e,o,s,o,s)});break;case"Point":{const[i,o]=t.coordinates;e=extendBbox(e,i,o,i,o);break}}return e}function largestPolygon(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(o=>{const s=largestPolygon(o);if(s==null)return;const a=polygonBbox(s[0],void 0);if(a==null)return;const r=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(e==null||r>e)&&(e=r,i=s)}),i}case"MultiPolygon":{let e,i;return t.coordinates.forEach(o=>{const s=polygonBbox(o[0],void 0);if(s==null)return;const a=Math.abs(s.lat1-s.lat0)*Math.abs(s.lon1-s.lon0);(e==null||a>e)&&(e=a,i=o)}),i}case"Polygon":return t.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function largestLineString(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.forEach(o=>{const s=largestLineString(o);if(s==null)return;const a=lineStringLength(s);a!=null&&(e==null||a>e)&&(e=a,i=s)}),i}case"MultiLineString":{let e=0,i;return t.coordinates.forEach(o=>{const s=lineStringLength(o);s>e&&(e=s,i=o)}),i}case"LineString":return t.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function containsType(t,e){if(t==null)return!1;switch(t.type){case"GeometryCollection":return t.geometries.some(i=>containsType(i,e));case"MultiPolygon":case"Polygon":return(e&1)!==0;case"MultiLineString":case"LineString":return(e&2)!==0;case"MultiPoint":case"Point":return(e&4)!==0}}function projectGeometry(t,e){switch(t.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(i=>projectGeometry(i,e))};case"Polygon":return{type:"Polygon",coordinates:projectPolygon(t.coordinates,e)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:projectMultiPolygon(t.coordinates,e)};case"MultiLineString":return{type:"MultiLineString",coordinates:projectPolygon(t.coordinates,e)};case"LineString":return{type:"LineString",coordinates:projectLineString(t.coordinates,e)};case"MultiPoint":return{type:"MultiPoint",coordinates:projectLineString(t.coordinates,e)};case"Point":return{type:"Point",coordinates:e.convert(t.coordinates)}}}function projectMultiPolygon(t,e){return t.map(i=>projectPolygon(i,e))}function projectPolygon(t,e){return t.map(i=>projectLineString(i,e))}function projectLineString(t,e){return t.map(i=>e.convert(i))}function prepareMapMarkerAnimationFunctions(){return{fromFn:(i,o,s)=>s==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,o,s)=>s==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function findFocusedGeoGeometry(t,e){const i=t.contextNodeData?.nodeData[e.datumIndex];if(i!==void 0){for(const o of t.datumSelection.nodes())if(o.datum===i)return o}}var import_ag_charts_community221=require("ag-charts-community"),TopologySeriesProperties=class extends import_ag_charts_community221._ModuleSupport.SeriesProperties{},TopologySeries=class extends import_ag_charts_community221._ModuleSupport.DataModelSeries{addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}},import_ag_charts_community222=require("ag-charts-community"),{AND:AND7,ARRAY:ARRAY9,COLOR_STRING:COLOR_STRING20,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY8,FUNCTION:FUNCTION15,LINE_DASH:LINE_DASH15,NUMBER_ARRAY:NUMBER_ARRAY3,OBJECT:OBJECT35,POSITIVE_NUMBER:POSITIVE_NUMBER27,RATIO:RATIO23,STRING:STRING34,TempValidate:TempValidate69,SeriesProperties:SeriesProperties3,SeriesTooltip:SeriesTooltip12,Label:Label10}=import_ag_charts_community222._ModuleSupport,MapLineSeriesProperties=class extends SeriesProperties3{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new Label10,this.tooltip=new SeriesTooltip12}};__decorateClass([TempValidate69(GEOJSON_OBJECT,{optional:!0})],MapLineSeriesProperties.prototype,"topology",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"title",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"legendItemName",2),__decorateClass([TempValidate69(STRING34)],MapLineSeriesProperties.prototype,"idKey",2),__decorateClass([TempValidate69(STRING34)],MapLineSeriesProperties.prototype,"topologyIdKey",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"idName",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"labelKey",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"labelName",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"sizeKey",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"sizeName",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"colorKey",2),__decorateClass([TempValidate69(STRING34,{optional:!0})],MapLineSeriesProperties.prototype,"colorName",2),__decorateClass([TempValidate69(NUMBER_ARRAY3,{optional:!0})],MapLineSeriesProperties.prototype,"sizeDomain",2),__decorateClass([TempValidate69(AND7(COLOR_STRING_ARRAY8,ARRAY9.restrict({minLength:1})),{optional:!0})],MapLineSeriesProperties.prototype,"colorRange",2),__decorateClass([TempValidate69(POSITIVE_NUMBER27,{optional:!0})],MapLineSeriesProperties.prototype,"maxStrokeWidth",2),__decorateClass([TempValidate69(COLOR_STRING20)],MapLineSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate69(RATIO23)],MapLineSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate69(POSITIVE_NUMBER27)],MapLineSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate69(LINE_DASH15)],MapLineSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate69(POSITIVE_NUMBER27)],MapLineSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate69(FUNCTION15,{optional:!0})],MapLineSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate69(OBJECT35)],MapLineSeriesProperties.prototype,"label",2),__decorateClass([TempValidate69(OBJECT35)],MapLineSeriesProperties.prototype,"tooltip",2);var{getMissCount:getMissCount2,createDatumId:createDatumId13,SeriesNodePickMode:SeriesNodePickMode9,valueProperty:valueProperty12,CachedTextMeasurerPool:CachedTextMeasurerPool7,ColorScale:ColorScale2,LinearScale:LinearScale4,Selection:Selection7,Text:Text3,Transformable:Transformable2}=import_ag_charts_community223._ModuleSupport,MapLineSeries=class extends TopologySeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[SeriesNodePickMode9.EXACT_SHAPE_MATCH,SeriesNodePickMode9.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new MapLineSeriesProperties,this._chartTopology=void 0,this.colorScale=new ColorScale2,this.sizeScale=new LinearScale4,this.datumSelection=Selection7.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=Selection7.select(this.labelGroup,Text3),this.highlightDatumSelection=Selection7.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new GeoGeometry;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:r,sizeKey:n,colorKey:l,labelKey:c,sizeDomain:h,colorRange:u}=this.properties,p=new Map;i?.features.forEach(x=>{const S=x.properties?.[a];S==null||!containsType(x.geometry,2)||p.set(S,x)});const d=this.sizeScale.type,g=this.colorScale.type,f=this.scale?.type,{dataModel:y,processedData:m}=await this.requestDataModel(t,e,{props:[valueProperty12(r,f,{id:"idValue",includeProperty:!1}),valueProperty12(r,f,{id:"featureValue",includeProperty:!1,processor:()=>x=>p.get(x)}),...c!=null?[valueProperty12(c,"band",{id:"labelValue"})]:[],...n!=null?[valueProperty12(n,d,{id:"sizeValue"})]:[],...l!=null?[valueProperty12(l,g,{id:"colorValue"})]:[]]}),b=y.resolveColumnById(this,"featureValue",m);if(this.topologyBounds=b.reduce((x,S)=>{const v=S?.geometry;return v==null?x:geometryBbox(v,x)},void 0),n!=null){const x=y.resolveProcessedDataIndexById(this,"sizeValue"),S=m.domain.values[x]??[];o.domain=h??S}if(u!=null&&this.isColorScaleValid()){const x=y.resolveProcessedDataIndexById(this,"colorValue");s.domain=m.domain.values[x],s.range=u,s.update()}i==null&&import_ag_charts_core77.Logger.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=getMissCount2(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(t,e,i,o){if(e==null||i==null)return;const s=largestLineString(i);if(s==null)return;const{idKey:a,idName:r,sizeKey:n,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:p,label:d}=this.properties,g=this.getLabelText(d,{value:e,datum:t,idKey:a,idName:r,sizeKey:n,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:p});if(g==null)return;const f=CachedTextMeasurerPool7.measureText(String(g),{font:o}),y=lineStringCenter(s);if(y==null)return;const[m,b]=y.point,{width:x,height:S}=f;return{point:{x:m,y:b,size:0},label:{width:x,height:S,text:g},anchor:void 0,placement:void 0}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:o,properties:s,scale:a}=this,{idKey:r,sizeKey:n,colorKey:l,labelKey:c,label:h}=s;if(e==null||i==null)return;const u=e.resolveColumnById(this,"idValue",i),p=e.resolveColumnById(this,"featureValue",i),d=c!=null?e.resolveColumnById(this,"labelValue",i):void 0,g=n!=null?e.resolveColumnById(this,"sizeValue",i):void 0,f=l!=null?e.resolveColumnById(this,"colorValue",i):void 0,y=s.maxStrokeWidth??s.strokeWidth;o.range=[Math.min(s.strokeWidth,y),y];const m=h.getFont(),b=new Map;i.dataSources.get(this.id)?.forEach((k,A)=>{const M=u[A],_=p[A]?.geometry??void 0,O=_!=null&&a!=null?projectGeometry(_,a):void 0;M!=null&&O!=null&&b.set(M,O)});const x=[],S=[],v=[];(i.dataSources.get(this.id)??[]).forEach((k,A)=>{const M=u[A],_=f?.[A],O=g?.[A],C=d?.[A],I=b.get(M);I==null&&v.push(M);const w=this.getLabelDatum(k,C,I,m);w!=null&&S.push(w),x.push({series:this,itemId:r,datum:k,datumIndex:A,idValue:M,labelValue:C,colorValue:_,sizeValue:O,projectedGeometry:I})});const D=10;if(v.length>D){const k=v.length-D;v.length=D,v.push(`(+${k} more)`)}return v.length>0&&import_ag_charts_core77.Logger.warnOnce("some data items do not have matches in the provided topology",v),{itemId:t,nodeData:x,labelData:S}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,highlightDatumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let i=this.ctx.highlightManager?.getActiveHighlight();i!=null&&(i.series!==this||i.datum==null)&&(i=void 0);const o=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId13(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return{stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset}}getItemStyleOverrides(t,e,i,o,s,a){const{id:r,properties:n,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:u}=n;let p;if(!a&&i!=null&&(p??(p={}),p.stroke=this.isColorScaleValid()?l.convert(i):h?.[0]??n.stroke),o!=null&&(p??(p={}),p.strokeWidth=c.convert(o,!0)),u!=null){const d=this.cachedDatumCallback(createDatumId13(t,a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:e,highlighted:a,...s,...p}));p??(p={}),Object.assign(p,d)}return p}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getItemBaseStyle(i);e.each((s,a)=>{const{datum:r,datumIndex:n,colorValue:l,sizeValue:c,projectedGeometry:h}=a;if(h==null){s.visible=!1,s.projectedGeometry=void 0;return}const u=this.getItemStyleOverrides(String(n),r,l,c,o,i);s.visible=!0,s.projectedGeometry=h,s.stroke=u?.stroke??o.stroke,s.strokeWidth=u?.strokeWidth??o.strokeWidth,s.strokeOpacity=u?.strokeOpacity??o.strokeOpacity,s.lineDash=u?.lineDash??o.lineDash,s.lineDashOffset=u?.lineDashOffset??o.lineDashOffset})}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=import_ag_charts_community223._ModuleSupport.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:r}=this.properties.label;e.each((n,{x:l,y:c,width:h,height:u,text:p})=>{n.visible=!0,n.x=l+h/2,n.y=c+u/2,n.text=p,n.fill=i,n.fontStyle=o,n.fontWeight=s,n.fontSize=a,n.fontFamily=r,n.textAlign="center",n.textBaseline="middle"})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const r=s.distanceSquared(t,e);r<i&&(i=r,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,o=i!=null?largestLineString(i):void 0,s=o!=null?lineStringCenter(o)?.point:void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:o}=this,{strokeWidth:s,strokeOpacity:a,lineDash:r}=o;let{stroke:n}=o;if(t!=null&&this.isColorScaleValid()){const c=e.resolveColumnById(this,"colorValue",i)[t];n=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:n,strokeWidth:s,strokeOpacity:a,lineDash:r}}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:r,idKey:n,idName:l,colorKey:c,colorName:h,colorRange:u,showInLegend:p}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const d=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,colorName:h,colorRange:u,colorDomain:d}]}else return t==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:r??a??l??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!p}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{idKey:a,idName:r,colorKey:n,colorName:l,sizeKey:c,sizeName:h,labelKey:u,labelName:p,title:d,legendItemName:g,tooltip:f}=s;if(!i||!o)return;const y=o.dataSources.get(this.id)?.[t],m=i.resolveColumnById(this,"idValue",o),b=[],x=c!=null?i.resolveColumnById(this,"sizeValue",o)[t]:void 0,S=n!=null?i.resolveColumnById(this,"colorValue",o)[t]:void 0;if(c!=null&&b.push({label:h,fallbackLabel:c,value:String(x)}),n!=null&&b.push({label:l,fallbackLabel:n,value:String(S)}),u!=null&&u!==a){const T=i.resolveColumnById(this,"labelValue",o)[t];b.push({label:p,fallbackLabel:u,value:T})}const v=this.getItemBaseStyle(!1);return Object.assign(v,this.getItemStyleOverrides(String(t),t,S,x,v,!1)),f.formatTooltip(this.properties,{heading:m[t],title:d??g,symbol:this.legendItemSymbol(t),data:b},{seriesId:e,datum:y,title:d,idKey:a,idName:r,colorKey:n,colorName:l,sizeKey:c,sizeName:h,labelKey:u,labelName:p,...v})}computeFocusBounds(t){const e=findFocusedGeoGeometry(this,t);return e?Transformable2.toCanvas(this.contentGroup,e.getBBox()):void 0}};MapLineSeries.className="MapLineSeries",MapLineSeries.type="map-line";var import_ag_charts_community224=require("ag-charts-community"),import_ag_charts_core78=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs12,seriesLabelOptionsDefs:seriesLabelOptionsDefs8,tooltipOptionsDefs:tooltipOptionsDefs12}=import_ag_charts_community224._ModuleSupport,mapLineSeriesOptionsDef={type:(0,import_ag_charts_core78.required)((0,import_ag_charts_core78.constant)("map-line")),idKey:(0,import_ag_charts_core78.required)(import_ag_charts_core78.string),sizeKey:import_ag_charts_core78.string,colorKey:import_ag_charts_core78.string,labelKey:import_ag_charts_core78.string,idName:import_ag_charts_core78.string,sizeName:import_ag_charts_core78.string,colorName:import_ag_charts_core78.string,labelName:import_ag_charts_core78.string,topology:import_ag_charts_core78.object,topologyIdKey:import_ag_charts_core78.string,legendItemName:import_ag_charts_core78.string,maxStrokeWidth:import_ag_charts_core78.positiveNumber,title:import_ag_charts_core78.string,itemStyler:import_ag_charts_core78.callback,sizeDomain:(0,import_ag_charts_core78.arrayOf)(import_ag_charts_core78.positiveNumber),label:seriesLabelOptionsDefs8,tooltip:tooltipOptionsDefs12,...commonSeriesOptionsDefs12,...import_ag_charts_core78.strokeOptionsDef,...import_ag_charts_core78.lineDashOptionsDef,highlightStyle:{...commonSeriesOptionsDefs12.highlightStyle,...import_ag_charts_core78.strokeOptionsDef}};mapLineSeriesOptionsDef.colorRange=(0,import_ag_charts_core78.and)((0,import_ag_charts_core78.arrayOf)(import_ag_charts_core78.color),(0,import_ag_charts_core78.arrayLength)(1));var MapLineModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:t=>new MapLineSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{stroke:import_ag_charts_community225._ModuleSupport.SAFE_STROKE_FILL_OPERATION,colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},import_ag_charts_community225._ModuleSupport.SAFE_RANGE2_OPERATION]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},MapLineSeriesModule={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:mapLineSeriesOptionsDef,create:t=>new MapLineSeries(t)},import_ag_charts_community229=require("ag-charts-community"),import_ag_charts_community227=require("ag-charts-community"),import_ag_charts_core79=require("ag-charts-core"),import_ag_charts_community226=require("ag-charts-community"),{COLOR_STRING:COLOR_STRING21,LINE_DASH:LINE_DASH16,OBJECT:OBJECT36,POSITIVE_NUMBER:POSITIVE_NUMBER28,RATIO:RATIO24,TempValidate:TempValidate70,SeriesProperties:SeriesProperties4,SeriesTooltip:SeriesTooltip13}=import_ag_charts_community226._ModuleSupport,MapLineBackgroundSeriesProperties=class extends SeriesProperties4{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new SeriesTooltip13}};__decorateClass([TempValidate70(GEOJSON_OBJECT,{optional:!0})],MapLineBackgroundSeriesProperties.prototype,"topology",2),__decorateClass([TempValidate70(COLOR_STRING21)],MapLineBackgroundSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate70(RATIO24)],MapLineBackgroundSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate70(POSITIVE_NUMBER28)],MapLineBackgroundSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate70(LINE_DASH16)],MapLineBackgroundSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate70(POSITIVE_NUMBER28)],MapLineBackgroundSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate70(OBJECT36)],MapLineBackgroundSeriesProperties.prototype,"tooltip",2);var{createDatumId:createDatumId14,SeriesNodePickMode:SeriesNodePickMode10,Group:Group13,Selection:Selection8,PointerEvents:PointerEvents6}=import_ag_charts_community227._ModuleSupport,MapLineBackgroundSeries=class extends TopologySeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[SeriesNodePickMode10.EXACT_SHAPE_MATCH]}),this.properties=new MapLineBackgroundSeriesProperties,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Group13({name:"itemGroup"})),this.datumSelection=Selection8.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new GeoGeometry;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t.pointerEvents=PointerEvents6.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:geometryBbox(o,e)},void 0),t==null&&import_ag_charts_core79.Logger.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((a,r)=>{const{geometry:n}=a,l=n!=null&&i!=null?projectGeometry(n,i):void 0;l!=null&&o.push({series:this,itemId:r,datum:a,datumIndex:0,index:r,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId14(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{stroke:o,strokeOpacity:s,lineDash:a,lineDashOffset:r}=e,n=this.getStrokeWidth(e.strokeWidth);i.each((l,c)=>{const{projectedGeometry:h}=c;if(h==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=h,l.stroke=o,l.strokeWidth=n,l.strokeOpacity=s,l.lineDash=a,l.lineDashOffset=r})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}computeFocusBounds(t){}};MapLineBackgroundSeries.className="MapLineBackgroundSeries",MapLineBackgroundSeries.type="map-line-background";var import_ag_charts_community228=require("ag-charts-community"),import_ag_charts_core80=require("ag-charts-core"),mapLineBackgroundSeriesOptionsDef={type:(0,import_ag_charts_core80.required)((0,import_ag_charts_core80.constant)("map-line-background")),topology:import_ag_charts_core80.object,...import_ag_charts_core80.strokeOptionsDef,...import_ag_charts_core80.lineDashOptionsDef},MapLineBackgroundModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:t=>new MapLineBackgroundSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{stroke:{$path:["./1",{$palette:"stroke"},{$palette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},MapLineBackgroundSeriesModule={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:mapLineBackgroundSeriesOptionsDef,create:t=>new MapLineBackgroundSeries(t)},import_ag_charts_community234=require("ag-charts-community"),import_ag_charts_core83=require("ag-charts-core"),import_ag_charts_community232=require("ag-charts-community"),import_ag_charts_core81=require("ag-charts-core"),insertManySorted=(t,e,i)=>{let o=t,s=o;for(const a of e)if(o==null||i(o.value,a)>0)o={value:a,next:o},s=o;else{for(s=s;s.next!=null&&i(s.next.value,a)<=0;)s=s.next;s.next={value:a,next:s.next}}return o};function polygonPointSearch(t,e,i){const o=polygonBbox(t[0],void 0);if(o==null)return;const s=(o.lon0+o.lon1)/2,a=(o.lat0+o.lat1)/2,r=Math.abs(o.lon1-o.lon0),n=Math.abs(o.lat1-o.lat0),l=polygonCentroid(t[0]),[c,h]=l,u=-polygonDistance(t,c,h);let p;const d=(v,T)=>{const k=Math.max(T-u,0);return v-.5*k},g=(v,T,D)=>{const{distance:k,maxDistance:A}=i(t,v,T,D),M=Math.hypot(c-v,h-T),_=Math.min(Math.max(c,v-D/2),v+D/2),O=Math.min(Math.max(h,T-D/2),T+D/2),C=Math.hypot(c-_,h-O),I=d(k,M),w=d(A,C);return{distance:k,maxDistance:A,value:I,maxValue:w,x:v,y:T,stride:D}},f=(v,T,D,k)=>{const A=g(T,D,k);A.maxDistance>=0&&v.push(A)},y=Math.min(r,n)/2;let m={value:g(s,a,y),next:null};for(;m!=null;){const v=m.value,{distance:T,value:D,maxValue:k,x:A,y:M,stride:_}=v;if(m=m.next,T>0&&(p==null||D>p.value)&&(p=v),p!=null&&k-p.value<=e)continue;const O=_/2,C=[];f(C,A-O,M-O,O),f(C,A+O,M-O,O),f(C,A-O,M+O,O),f(C,A+O,M+O,O),C.sort(labelPlacementCmp),m=insertManySorted(m,C,labelPlacementCmp)}if(p==null)return;const{distance:b,x,y:S}=p;return{x,y:S,distance:b}}var labelPlacementCmp=(t,e)=>e.maxValue-t.maxValue;function polygonMarkerCenter(t,e){const i=polygonPointSearch(t,e,(a,r,n,l)=>{const c=-polygonDistance(a,r,n),h=c+l*Math.SQRT2;return{distance:c,maxDistance:h}});if(i==null)return;const{x:o,y:s}=i;return[o,s]}function markerPositions(t,e){let i;switch(t.type){case"GeometryCollection":return t.geometries.flatMap(o=>markerPositions(o,e));case"MultiPoint":return t.coordinates;case"Point":return[t.coordinates];case"MultiPolygon":{const o=largestPolygon(t);i=o!=null?polygonMarkerCenter(o,e):void 0;break}case"Polygon":{const o=t.coordinates;i=o!=null?polygonMarkerCenter(o,e):void 0;break}case"MultiLineString":{const o=largestLineString(t);i=o!=null?lineStringCenter(o)?.point:void 0;break}case"LineString":{const o=t.coordinates;i=lineStringCenter(o)?.point;break}}return i!=null?[i]:[]}var import_ag_charts_community230=require("ag-charts-community"),{BBox:BBox20}=import_ag_charts_community230._ModuleSupport;function getTopologyShapeFillBBox(t){if(!t)return;const{range:e}=t,i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=new BBox20(0,0,i,o);return{series:s,axis:s}}var import_ag_charts_community231=require("ag-charts-community"),{FillGradientDefaults:FillGradientDefaults9,FillPatternDefaults:FillPatternDefaults9,AND:AND8,ARRAY:ARRAY10,COLOR_STRING:COLOR_STRING22,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY9,FUNCTION:FUNCTION16,NUMBER_ARRAY:NUMBER_ARRAY4,OBJECT:OBJECT37,OR:OR14,COLOR_GRADIENT:COLOR_GRADIENT9,COLOR_PATTERN:COLOR_PATTERN9,POSITIVE_NUMBER:POSITIVE_NUMBER29,RATIO:RATIO25,STRING:STRING35,MARKER_SHAPE:MARKER_SHAPE2,LINE_DASH:LINE_DASH17,TempValidate:TempValidate71,SeriesProperties:SeriesProperties5,SeriesTooltip:SeriesTooltip14,Label:Label11}=import_ag_charts_community231._ModuleSupport,MapMarkerSeriesLabel=class extends Label11{constructor(){super(...arguments),this.placement="bottom"}};__decorateClass([TempValidate71(STRING35)],MapMarkerSeriesLabel.prototype,"placement",2);var MapMarkerSeriesProperties=class extends SeriesProperties5{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillGradientDefaults=new FillGradientDefaults9,this.fillPatternDefaults=new FillPatternDefaults9,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new MapMarkerSeriesLabel,this.tooltip=new SeriesTooltip14}};__decorateClass([TempValidate71(GEOJSON_OBJECT,{optional:!0})],MapMarkerSeriesProperties.prototype,"topology",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"title",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"legendItemName",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"idKey",2),__decorateClass([TempValidate71(STRING35)],MapMarkerSeriesProperties.prototype,"topologyIdKey",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"idName",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"latitudeKey",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"latitudeName",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"longitudeKey",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"longitudeName",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"labelKey",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"labelName",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"sizeKey",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"sizeName",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"colorKey",2),__decorateClass([TempValidate71(STRING35,{optional:!0})],MapMarkerSeriesProperties.prototype,"colorName",2),__decorateClass([TempValidate71(AND8(COLOR_STRING_ARRAY9,ARRAY10.restrict({minLength:1})),{optional:!0})],MapMarkerSeriesProperties.prototype,"colorRange",2),__decorateClass([TempValidate71(MARKER_SHAPE2)],MapMarkerSeriesProperties.prototype,"shape",2),__decorateClass([TempValidate71(POSITIVE_NUMBER29)],MapMarkerSeriesProperties.prototype,"size",2),__decorateClass([TempValidate71(POSITIVE_NUMBER29,{optional:!0})],MapMarkerSeriesProperties.prototype,"maxSize",2),__decorateClass([TempValidate71(NUMBER_ARRAY4,{optional:!0})],MapMarkerSeriesProperties.prototype,"sizeDomain",2),__decorateClass([TempValidate71(OR14(COLOR_GRADIENT9,COLOR_PATTERN9,COLOR_STRING22))],MapMarkerSeriesProperties.prototype,"fill",2),__decorateClass([TempValidate71(OBJECT37)],MapMarkerSeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate71(OBJECT37)],MapMarkerSeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate71(RATIO25)],MapMarkerSeriesProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate71(COLOR_STRING22)],MapMarkerSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate71(POSITIVE_NUMBER29)],MapMarkerSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate71(RATIO25)],MapMarkerSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate71(LINE_DASH17)],MapMarkerSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate71(POSITIVE_NUMBER29)],MapMarkerSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate71(FUNCTION16,{optional:!0})],MapMarkerSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate71(OBJECT37)],MapMarkerSeriesProperties.prototype,"label",2),__decorateClass([TempValidate71(OBJECT37)],MapMarkerSeriesProperties.prototype,"tooltip",2);var{CachedTextMeasurerPool:CachedTextMeasurerPool8,fromToMotion:fromToMotion3,StateMachine:StateMachine13,getMissCount:getMissCount3,createDatumId:createDatumId15,SeriesNodePickMode:SeriesNodePickMode11,valueProperty:valueProperty13,computeMarkerFocusBounds:computeMarkerFocusBounds2,ColorScale:ColorScale3,LinearScale:LinearScale5,Group:Group14,Selection:Selection9,Text:Text4,Marker:Marker3,applyShapeStyle:applyShapeStyle6,getShapeStyle:getShapeStyle10}=import_ag_charts_community232._ModuleSupport,MapMarkerSeries=class extends TopologySeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[SeriesNodePickMode11.EXACT_SHAPE_MATCH,SeriesNodePickMode11.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new MapMarkerSeriesProperties,this._chartTopology=void 0,this.colorScale=new ColorScale3,this.sizeScale=new LinearScale5,this.markerGroup=this.contentGroup.appendChild(new Group14({name:"markerGroup"})),this.labelSelection=Selection9.select(this.labelGroup,Text4,!1),this.markerSelection=Selection9.select(this.markerGroup,Marker3,!1),this.highlightMarkerSelection=Selection9.select(this.highlightNode,Marker3),this.animationState=new StateMachine13("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const t=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||t)}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[3,t],this.highlightGroup.zIndex=[4,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,sizeScale:o,colorScale:s}=this,{topologyIdKey:a,idKey:r,latitudeKey:n,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,sizeDomain:p,colorRange:d}=this.properties,g=new Map;i?.features.forEach(k=>{const A=k.properties?.[a];A!=null&&g.set(A,k)});const f=this.sizeScale.type,y=this.colorScale.type,m=this.scale?.type,b=n!=null&&l!=null,{dataModel:x,processedData:S}=await this.requestDataModel(t,e,{props:[...r!=null?[valueProperty13(r,m,{id:"idValue",includeProperty:!1}),valueProperty13(r,m,{id:"featureValue",includeProperty:!1,processor:()=>k=>g.get(k)})]:[],...b?[valueProperty13(n,m,{id:"latValue"}),valueProperty13(l,m,{id:"lonValue"})]:[],...u?[valueProperty13(u,"band",{id:"labelValue"})]:[],...c?[valueProperty13(c,f,{id:"sizeValue"})]:[],...h?[valueProperty13(h,y,{id:"colorValue"})]:[]]}),v=r!=null?x.resolveColumnById(this,"featureValue",S):void 0,T=b?x.resolveColumnById(this,"latValue",S):void 0,D=b?x.resolveColumnById(this,"lonValue",S):void 0;if(this.topologyBounds=S.dataSources.get(this.id)?.reduce((k,A,M)=>{const O=v?.[M]?.geometry;if(O!=null&&(k=geometryBbox(O,k)),T!=null&&D!=null){const C=D[M],I=T[M];k=extendBbox(k,C,I,C,I)}return k},void 0),c!=null){const k=x.resolveProcessedDataIndexById(this,"sizeValue"),A=S.domain.values[k]??[];o.domain=p??A}if(d!=null&&this.isColorScaleValid()){const k=x.resolveProcessedDataIndexById(this,"colorValue");s.domain=S.domain.values[k],s.range=d,s.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=getMissCount3(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelDatum(t,e,i,o,s,a){if(e==null)return;const{idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:p,sizeName:d,colorKey:g,colorName:f,labelKey:y,labelName:m,label:b,shape:x}=this.properties,{placement:S}=b,v=this.getLabelText(b,{value:e,datum:t,idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:p,sizeName:d,colorKey:g,colorName:f,labelKey:y,labelName:m});if(v==null)return;const{width:T,height:D}=CachedTextMeasurerPool8.measureText(String(v),{font:a}),k=Marker3.anchor(x);return{point:{x:i,y:o,size:s},label:{width:T,height:D,text:v},anchor:k,placement:S}}createNodeData(){const{id:t,dataModel:e,processedData:i,sizeScale:o,properties:s,scale:a}=this,{idKey:r,latitudeKey:n,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,label:p}=s;if(e==null||i==null||a==null)return;const d=n!=null&&l!=null,g=r!=null?e.resolveColumnById(this,"idValue",i):void 0,f=r!=null?e.resolveColumnById(this,"featureValue",i):void 0,y=d?e.resolveColumnById(this,"latValue",i):void 0,m=d?e.resolveColumnById(this,"lonValue",i):void 0,b=u!=null?e.resolveColumnById(this,"labelValue",i):void 0,x=c!=null?e.resolveColumnById(this,"sizeValue",i):void 0,S=h!=null?e.resolveColumnById(this,"colorValue",i):void 0,v=s.maxSize??s.size;o.range=[Math.min(s.size,v),v];const T=p.getFont();let D;g!=null&&f!=null&&(D=new Map,i.dataSources.get(this.id)?.forEach((C,I)=>{const w=g[I],L=f[I]?.geometry??void 0,P=L!=null&&a!=null?projectGeometry(L,a):void 0;w!=null&&P!=null&&D.set(w,P)}));const k=[],A=[],M=[];(i.dataSources.get(this.id)??[]).forEach((C,I)=>{const w=g?.[I],L=m?.[I],P=y?.[I],z=S?.[I],R=x?.[I],B=b?.[I],E=R!=null?o.convert(R,!0):s.size,F=w!=null?D?.get(w):void 0;if(w!=null&&projectGeometry==null&&M.push(w),L!=null&&P!=null){const[V,G]=a.convert([L,P]),W=this.getLabelDatum(C,B,V,G,E,T);W&&A.push(W),k.push({series:this,itemId:n,datum:C,datumIndex:I,index:-1,idValue:w,lonValue:L,latValue:P,labelValue:B,sizeValue:R,colorValue:z,point:{x:V,y:G,size:E},midPoint:{x:V,y:G}})}else F!=null&&markerPositions(F,1).forEach(([V,G],W)=>{const H=this.getLabelDatum(C,B,V,G,E,T);H&&A.push(H),k.push({series:this,itemId:n,datum:C,datumIndex:I,index:W,idValue:w,lonValue:L,latValue:P,labelValue:B,sizeValue:R,colorValue:z,point:{x:V,y:G,size:E},midPoint:{x:V,y:G}})})});const O=10;if(M.length>O){const C=M.length-O;M.length=O,M.push(`(+${C} more)`)}return M.length>0&&import_ag_charts_core81.Logger.warnOnce("some data items do not have matches in the provided topology",M),{itemId:t,nodeData:k,labelData:A}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:t}){const e=this.checkResize(t),i=this.checkScaleChange(),{markerSelection:o,highlightMarkerSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const r=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:r,markerSelection:o}),this.updateMarkerNodes({markerSelection:o,isHighlight:!1,highlightedDatum:a}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:a!=null?[a]:[],markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!0,highlightedDatum:a}),(i||e)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(t){this.labelSelection=this.labelSelection.update(t,e=>{e.pointerEvents=import_ag_charts_community232._ModuleSupport.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:r}=this.properties.label;e.each((n,{x:l,y:c,width:h,height:u,text:p})=>{n.visible=!0,n.x=l+h/2,n.y=c+u/2,n.text=p,n.fill=i,n.fontStyle=o,n.fontWeight=s,n.fontSize=a,n.fontFamily=r,n.textAlign="center",n.textBaseline="middle"})}updateMarkerSelection(t){const{markerData:e,markerSelection:i}=t;return i.update(e,void 0,o=>createDatumId15([o.index,o.idValue,o.lonValue,o.latValue]))}getMarkerItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return getShapeStyle10({shape:e.shape,size:e.size,fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getMarkerItemStyleOverrides(t,e,i,o,s,a){const{id:r,properties:n,colorScale:l,sizeScale:c}=this,{colorRange:h,itemStyler:u}=n;let p;if(p??(p={}),!a&&i!=null&&(p.fill=this.isColorScaleValid()?l.convert(i):h?.[0]??n.fill),o!=null&&(p.size=c.convert(o,!0)),u!=null){const d=this.cachedDatumCallback(createDatumId15(t,a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:e,highlighted:a,...s,...p}));p??(p={}),Object.assign(p,d)}return p}updateMarkerNodes(t){const{markerSelection:e,isHighlight:i,highlightedDatum:o}=t,s=this.getMarkerItemBaseStyle(i),a=getTopologyShapeFillBBox(this.scale);e.each((r,n)=>{const{datumIndex:l,datum:c,point:h,colorValue:u,sizeValue:p}=n,d=this.getMarkerItemStyleOverrides(String(l),c,u,p,s,i);r.shape=d?.shape??s.shape,r.size=d?.size??s.size,applyShapeStyle6(r,s,d,a),r.x=h.x,r.y=h.y,r.scalingCenterX=h.x,r.scalingCenterY=h.y,r.zIndex=!i&&o!=null&&c===o.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:t}=this.ctx,e=prepareMapMarkerAnimationFunctions();fromToMotion3(this.id,"markers",t,[this.markerSelection,this.highlightMarkerSelection],e)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(t){const{x:e,y:i}=t;let o=1/0,s;return this.contextNodeData?.nodeData.forEach(a=>{const{x:r,y:n,size:l}=a.point,c=Math.max(Math.abs(r-e)-l,0),h=Math.max(Math.abs(n-i)-l,0),u=c*c+h*h;u<o&&(o=u,s=a)}),s!=null?{datum:s,distance:Math.sqrt(o)}:void 0}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:o}=this,{shape:s,fillOpacity:a,stroke:r,strokeWidth:n,strokeOpacity:l,lineDash:c,lineDashOffset:h}=o;let{fill:u}=o;if(t!=null&&this.isColorScaleValid()){const d=e.resolveColumnById(this,"colorValue",i)[t];u=this.colorScale.convert(d)}return{marker:getShapeStyle10({shape:s,fill:u,fillOpacity:a,stroke:r,strokeWidth:n,strokeOpacity:l,lineDash:c,lineDashOffset:h},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:r,idName:n,idKey:l,colorKey:c,colorName:h,colorRange:u,showInLegend:p}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const d=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,colorName:h,colorRange:u,colorDomain:d}]}else return t==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:r??a??n??l??o},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!p}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{idKey:a,idName:r,latitudeKey:n,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:u,colorName:p,sizeKey:d,sizeName:g,labelKey:f,labelName:y,title:m,legendItemName:b,tooltip:x}=s;if(!i||!o)return;const S=o.dataSources.get(this.id)?.[t],v=d!=null?i.resolveColumnById(this,"sizeValue",o)[t]:void 0,T=u!=null?i.resolveColumnById(this,"colorValue",o)[t]:void 0,D=[];if(v!=null&&D.push({label:g,fallbackLabel:d,value:String(v)}),T!=null&&D.push({label:p,fallbackLabel:u,value:String(T)}),f!=null&&f!==a){const M=i.resolveColumnById(this,"labelValue",o)[t];D.push({label:y,fallbackLabel:f,value:M})}let k;if(a!=null)k=i.resolveColumnById(this,"idValue",o)[t];else if(n!=null&&c!=null){const M=i.resolveColumnById(this,"latValue",o)[t],_=i.resolveColumnById(this,"lonValue",o)[t];k=`${Math.abs(M).toFixed(4)}\xB0 ${M>=0?"N":"S"}, ${Math.abs(_).toFixed(4)}\xB0 ${_>=0?"W":"E"}`}const A=this.getMarkerItemBaseStyle(!1);return Object.assign(A,this.getMarkerItemStyleOverrides(String(t),t,T,v,A,!1)),x.formatTooltip(this.properties,{heading:k,title:m??b,symbol:this.legendItemSymbol(t),data:D},{seriesId:e,datum:S,title:m,idKey:a,idName:r,latitudeKey:n,latitudeName:l,longitudeKey:c,longitudeName:h,colorKey:u,colorName:p,sizeKey:d,sizeName:g,labelKey:f,labelName:y,...A})}getFormattedMarkerStyle(t){const{datumIndex:e,colorValue:i,sizeValue:o}=t,s=this.getMarkerItemBaseStyle(!1);return Object.assign(s,this.getMarkerItemStyleOverrides(String(e),e,i,o,s,!1)),{size:s.size}}computeFocusBounds(t){return computeMarkerFocusBounds2(this,t)}};MapMarkerSeries.className="MapMarkerSeries",MapMarkerSeries.type="map-marker";var import_ag_charts_community233=require("ag-charts-community"),import_ag_charts_core82=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs13,markerOptionsDefs:markerOptionsDefs2,seriesLabelOptionsDefs:seriesLabelOptionsDefs9,tooltipOptionsDefs:tooltipOptionsDefs13,without:without4}=import_ag_charts_community233._ModuleSupport,mapMarkerSeriesOptionsDef={type:(0,import_ag_charts_core82.required)((0,import_ag_charts_core82.constant)("map-marker")),idKey:import_ag_charts_core82.string,latitudeKey:import_ag_charts_core82.string,longitudeKey:import_ag_charts_core82.string,sizeKey:import_ag_charts_core82.string,colorKey:import_ag_charts_core82.string,labelKey:import_ag_charts_core82.string,idName:import_ag_charts_core82.string,latitudeName:import_ag_charts_core82.string,longitudeName:import_ag_charts_core82.string,sizeName:import_ag_charts_core82.string,colorName:import_ag_charts_core82.string,labelName:import_ag_charts_core82.string,topology:import_ag_charts_core82.object,topologyIdKey:import_ag_charts_core82.string,legendItemName:import_ag_charts_core82.string,colorRange:(0,import_ag_charts_core82.arrayOf)(import_ag_charts_core82.color),title:import_ag_charts_core82.string,maxSize:import_ag_charts_core82.positiveNumber,sizeDomain:(0,import_ag_charts_core82.arrayOf)(import_ag_charts_core82.positiveNumber),label:{placement:(0,import_ag_charts_core82.union)("top","bottom","left","right"),...seriesLabelOptionsDefs9},tooltip:tooltipOptionsDefs13,...commonSeriesOptionsDefs13,...without4(markerOptionsDefs2,["enabled"]),highlightStyle:{...commonSeriesOptionsDefs13.highlightStyle,...import_ag_charts_core82.fillOptionsDef,...import_ag_charts_core82.strokeOptionsDef}},MapMarkerModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:t=>new MapMarkerSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{shape:"circle",maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},import_ag_charts_community234._ModuleSupport.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:import_ag_charts_community234._ModuleSupport.FILL_PATTERN_DEFAULTS,fillOpacity:.5,label:{color:{$ref:"textColor"}}},tooltip:{range:"exact"}}},MapMarkerSeriesModule={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:mapMarkerSeriesOptionsDef,create:t=>new MapMarkerSeries(t),validate(t,e,i){const o=(0,import_ag_charts_core83.validate)(t,e,i);if(o.valid?.idKey==null&&(o.valid?.latitudeKey==null||o.valid?.longitudeKey==null)){const s=r=>i?`${i}.${r}`:r,a=`Either \`${s("idKey")}\` or both \`${s("latitudeKey")}\` and \`${s("longitudeKey")}\` are required.`;o.errors.push(new import_ag_charts_core83.ValidationError(a,i,!0))}return o}},import_ag_charts_community238=require("ag-charts-community"),import_ag_charts_community236=require("ag-charts-community"),import_ag_charts_core84=require("ag-charts-core");function preferredLabelCenter(t,{aspectRatio:e,precision:i}){const o=polygonPointSearch(t,i,(l,c,h,u)=>{const p=maxWidthOfRectConstrainedByCenterAndAspectRatioToPolygon(l,c,h,e),d=p+2*u*e,g=p*Math.SQRT2,f=d*Math.SQRT2;return{distance:g,maxDistance:f}});if(o==null)return;const{x:s,y:a,distance:r}=o,n=r/Math.SQRT2;return{x:s,y:a,maxWidth:n}}function maxWidthOfRectConstrainedByCenterAndAspectRatioToLineSegment(t,e,i,o,s){const[a,r]=t,[n,l]=e,c=1/s,h=n-a,u=l-r,[p,d]=r<=l?t:e,[g,f]=a<=n?t:e,[y,m]=r<=l?e:t,[b,x]=a<=n?e:t;let S=1/0;if(h!==0){const M=u/h;for(let _=0;_<=1;_+=1){const O=_===0?c:-c,C=(M*a-r-O*i+o)/(M-O);if(C>=g&&C<=b){const I=Math.abs(i-C)*2;S=Math.min(S,I)}}}else for(let M=0;M<=1;M+=1){const O=(M===0?c:-c)*(a-i)+o;if(O>=d&&O<=m){const I=Math.abs(o-O)*2*s;S=Math.min(S,I)}}const v=s,T=Math.abs((p-i)/(d-o)),D=Math.abs((y-i)/(m-o));if(m<o&&D<v){const _=Math.abs(o-m)*2*s;S=Math.min(S,_)}else if(d>o&&T<v){const _=Math.abs(o-d)*2*s;S=Math.min(S,_)}const k=Math.abs((f-o)/(g-i)),A=Math.abs((x-o)/(b-i));if(b<i&&A<c){const M=Math.abs(i-b)*2;S=Math.min(S,M)}else if(g>i&&k<c){const M=Math.abs(i-g)*2;S=Math.min(S,M)}return S}function maxWidthOfRectConstrainedByCenterAndAspectRatioToPolygon(t,e,i,o){let s=!1,a=1/0;for(const r of t){let n=r[r.length-1],[l,c]=n;for(const h of r){const[u,p]=h;p>i!=c>i&&e<(l-u)*(i-p)/(c-p)+u&&(s=!s);const d=maxWidthOfRectConstrainedByCenterAndAspectRatioToLineSegment(n,h,e,i,o);a=Math.min(a,d),n=h,l=u,c=p}}return(s?1:-1)*a}function applyX(t,e,i){i>=e&&(t.maxX=Math.min(t.maxX,i-e)),i<=e&&(t.minX=Math.max(t.minX,i-e))}function xExtentsOfRectConstrainedByCenterAndHeightToLineSegment(t,e,i,o,s,a){const r=s-a/2,n=s+a/2,[l,c]=e,[h,u]=i,p=h-l,d=u-c,[g,f]=l<=h?e:i,[y,m]=l<=h?i:e;if(p!==0){const b=d/p;for(let x=0;x<=1;x+=1){const v=((x===0?r:n)-c)/b+l;v>=g&&v<=y&&applyX(t,o,v)}}else Math.max(r,Math.min(c,u))<=Math.min(n,Math.max(c,u))&&applyX(t,o,l);return y<o&&m>=r&&m<=n?applyX(t,o,y):g>o&&f>=r&&f<=n&&applyX(t,o,g),t}function maxWidthInPolygonForRectOfHeight(t,e,i,o){const s={minX:-1/0,maxX:1/0};for(const n of t){let l=n[n.length-1];for(const c of n)xExtentsOfRectConstrainedByCenterAndHeightToLineSegment(s,l,c,e,i,o),l=c}const{minX:a,maxX:r}=s;return Number.isFinite(a)&&Number.isFinite(r)?{x:e+(a+r)/2,width:r-a}:{x:e,width:0}}var import_ag_charts_community235=require("ag-charts-community"),{AND:AND9,ARRAY:ARRAY11,COLOR_STRING:COLOR_STRING23,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY10,COLOR_GRADIENT:COLOR_GRADIENT10,COLOR_PATTERN:COLOR_PATTERN10,FUNCTION:FUNCTION17,LINE_DASH:LINE_DASH18,OR:OR15,OBJECT:OBJECT38,POSITIVE_NUMBER:POSITIVE_NUMBER30,RATIO:RATIO26,STRING:STRING36,TempValidate:TempValidate72,SeriesProperties:SeriesProperties6,SeriesTooltip:SeriesTooltip15,FillGradientDefaults:FillGradientDefaults10,FillPatternDefaults:FillPatternDefaults10}=import_ag_charts_community235._ModuleSupport,MapShapeSeriesProperties=class extends SeriesProperties6{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillGradientDefaults=new FillGradientDefaults10,this.fillPatternDefaults=new FillPatternDefaults10,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new AutoSizedSecondaryLabel,this.tooltip=new SeriesTooltip15}};__decorateClass([TempValidate72(GEOJSON_OBJECT,{optional:!0})],MapShapeSeriesProperties.prototype,"topology",2),__decorateClass([TempValidate72(STRING36,{optional:!0})],MapShapeSeriesProperties.prototype,"title",2),__decorateClass([TempValidate72(STRING36,{optional:!0})],MapShapeSeriesProperties.prototype,"legendItemName",2),__decorateClass([TempValidate72(STRING36)],MapShapeSeriesProperties.prototype,"idKey",2),__decorateClass([TempValidate72(STRING36,{optional:!0})],MapShapeSeriesProperties.prototype,"idName",2),__decorateClass([TempValidate72(STRING36)],MapShapeSeriesProperties.prototype,"topologyIdKey",2),__decorateClass([TempValidate72(STRING36,{optional:!0})],MapShapeSeriesProperties.prototype,"labelKey",2),__decorateClass([TempValidate72(STRING36,{optional:!0})],MapShapeSeriesProperties.prototype,"labelName",2),__decorateClass([TempValidate72(STRING36,{optional:!0})],MapShapeSeriesProperties.prototype,"colorKey",2),__decorateClass([TempValidate72(STRING36,{optional:!0})],MapShapeSeriesProperties.prototype,"colorName",2),__decorateClass([TempValidate72(AND9(COLOR_STRING_ARRAY10,ARRAY11.restrict({minLength:1})),{optional:!0})],MapShapeSeriesProperties.prototype,"colorRange",2),__decorateClass([TempValidate72(OR15(COLOR_GRADIENT10,COLOR_PATTERN10,COLOR_STRING23))],MapShapeSeriesProperties.prototype,"fill",2),__decorateClass([TempValidate72(OBJECT38)],MapShapeSeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate72(OBJECT38)],MapShapeSeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate72(RATIO26)],MapShapeSeriesProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate72(COLOR_STRING23)],MapShapeSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate72(RATIO26)],MapShapeSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate72(POSITIVE_NUMBER30)],MapShapeSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate72(LINE_DASH18)],MapShapeSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate72(POSITIVE_NUMBER30)],MapShapeSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate72(POSITIVE_NUMBER30)],MapShapeSeriesProperties.prototype,"padding",2),__decorateClass([TempValidate72(FUNCTION17,{optional:!0})],MapShapeSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate72(OBJECT38)],MapShapeSeriesProperties.prototype,"label",2),__decorateClass([TempValidate72(OBJECT38)],MapShapeSeriesProperties.prototype,"tooltip",2);var{getMissCount:getMissCount4,createDatumId:createDatumId16,SeriesNodePickMode:SeriesNodePickMode12,valueProperty:valueProperty14,CachedTextMeasurerPool:CachedTextMeasurerPool9,TextUtils:TextUtils6,ColorScale:ColorScale4,Group:Group15,Selection:Selection10,Text:Text5,PointerEvents:PointerEvents7,applyShapeStyle:applyShapeStyle7,getShapeStyle:getShapeStyle11}=import_ag_charts_community236._ModuleSupport,fixedScale=import_ag_charts_community236._ModuleSupport.MercatorScale.fixedScale(),MapShapeSeries=class extends TopologySeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[SeriesNodePickMode12.EXACT_SHAPE_MATCH,SeriesNodePickMode12.NEAREST_NODE]}),this.properties=new MapShapeSeriesProperties,this._chartTopology=void 0,this.colorScale=new ColorScale4,this.itemGroup=this.contentGroup.appendChild(new Group15({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Group15({name:"itemLabelGroup"})),this.datumSelection=Selection10.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Selection10.select(this.itemLabelGroup,Text5),this.highlightDatumSelection=Selection10.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=PointerEvents7.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[1,t],this.highlightGroup.zIndex=[2,t],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new GeoGeometry;return t.renderMode=1,t.lineJoin="round",t}async processData(t){if(this.data==null||!this.properties.isValid())return;const{data:e,topology:i,colorScale:o}=this,{topologyIdKey:s,idKey:a,colorKey:r,labelKey:n,colorRange:l}=this.properties,c=new Map;i?.features.forEach(f=>{const y=f.properties?.[s];y==null||!containsType(f.geometry,1)||c.set(y,f)});const h=this.colorScale.type,u=this.scale?.type,{dataModel:p,processedData:d}=await this.requestDataModel(t,e,{props:[valueProperty14(a,u,{id:"idValue",includeProperty:!1}),valueProperty14(a,u,{id:"featureValue",includeProperty:!1,processor:()=>f=>c.get(f)}),...n?[valueProperty14(n,"band",{id:"labelValue"})]:[],...r?[valueProperty14(r,h,{id:"colorValue"})]:[]]}),g=p.resolveColumnById(this,"featureValue",d);if(this.topologyBounds=g.reduce((f,y)=>{const m=y?.geometry;return m==null?f:geometryBbox(m,f)},void 0),l!=null&&this.isColorScaleValid()){const f=p.resolveProcessedDataIndexById(this,"colorValue");o.domain=d.domain.values[f],o.range=l,o.update()}i==null&&import_ag_charts_core84.Logger.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,a=getMissCount4(this,i.defs.values[o].missing);return!(s===0||s===a)}getLabelLayout(t,e,i,o,s){if(e==null||o==null)return;const{idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:h,padding:u,label:p}=this.properties,d=this.getLabelText(p,{value:e,datum:t,idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:h});if(d==null)return;const g=CachedTextMeasurerPool9.measureText(String(d),{font:i}),f=d.split(`
`).length,y=(g.width+2*u)/(f*TextUtils6.getLineHeight(p.fontSize)+2*u);if(s?.geometry===o&&s?.labelText===d&&s?.aspectRatio===y)return s;const m=projectGeometry(o,fixedScale),b=largestPolygon(m);if(b==null)return;const x=preferredLabelCenter(b,{aspectRatio:y,precision:.001});if(x==null)return;const{x:S,y:v,maxWidth:T}=x;return{geometry:o,labelText:d,aspectRatio:y,x:S,y:v,maxWidth:T,fixedPolygon:b}}getLabelDatum(t,e){const{scale:i}=this;if(i==null)return;const{padding:o,label:s}=this.properties,{labelText:a,aspectRatio:r,x:n,y:l,maxWidth:c,fixedPolygon:h}=t,u={width:Math.ceil(c*e),height:Math.ceil(c*e/r),meta:n},p=formatSingleLabel(a,s,{padding:o},(S,v)=>{if(!v)return u;const T=maxWidthInPolygonForRectOfHeight(h,n,l,S/e);return{width:T.width*e,height:S,meta:T.x}});if(p==null)return;const[{text:d,fontSize:g,lineHeight:f,width:y},m]=p;if(d===TextUtils6.EllipsisChar)return;const b=y<u.width?n:m,x=this.scale.convert(fixedScale.invert([b,l]));return{x:x[0],y:x[1],text:d,fontSize:g,lineHeight:f}}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:o,scale:s,previousLabelLayouts:a}=this,{idKey:r,colorKey:n,labelKey:l,label:c}=o;if(e==null||i==null)return;const h=s!=null?(s.range[1][0]-s.range[0][0])/s.bounds.width:NaN,u=e.resolveColumnById(this,"idValue",i),p=e.resolveColumnById(this,"featureValue",i),d=l!=null?e.resolveColumnById(this,"labelValue",i):void 0,g=n!=null?e.resolveColumnById(this,"colorValue",i):void 0,f=c.getFont(),y=new Map;this.previousLabelLayouts=y;const m=[],b=[],x=[];(i.dataSources.get(this.id)??[]).forEach((T,D)=>{const k=u[D],A=g?.[D],M=d?.[D],_=p[D]?.geometry??void 0;_==null&&x.push(k);const O=this.getLabelLayout(T,M,f,_,a?.get(k));O!=null&&y.set(k,O);const C=O!=null&&s!=null?this.getLabelDatum(O,h):void 0;C!=null&&b.push(C);const I=_!=null&&s!=null?projectGeometry(_,s):void 0;m.push({series:this,itemId:r,datum:T,datumIndex:D,idValue:k,colorValue:A,labelValue:M,projectedGeometry:I})});const v=10;if(x.length>v){const T=x.length-v;x.length=v,x.push(`(+${T} more)`)}return x.length>0&&import_ag_charts_core84.Logger.warnOnce("some data items do not have matches in the provided topology",x),{itemId:t,nodeData:m,labelData:b}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t,labelSelection:e,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let o=this.ctx.highlightManager?.getActiveHighlight();o!=null&&(o.series!==this||o.datum==null)&&(o=void 0);const s=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:s,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:e}),this.updateLabelNodes({labelSelection:e}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:o!=null?[o]:[],datumSelection:i}),this.updateDatumNodes({datumSelection:i,isHighlight:!0})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId16(e.idValue))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return getShapeStyle11({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:r,colorScale:n}=this,{colorRange:l,itemStyler:c}=r;let h;if(!s&&i!=null&&(h??(h={}),h.fill=this.isColorScaleValid()?n.convert(i):l?.[0]??r.fill),c!=null){const u=this.cachedDatumCallback(createDatumId16(t,s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:e,highlighted:s,...o,...h}));h??(h={}),Object.assign(h,u)}return getShapeStyle11(h,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getItemBaseStyle(i),s=getTopologyShapeFillBBox(this.scale);e.each((a,r)=>{const{datum:n,datumIndex:l,colorValue:c,projectedGeometry:h}=r;if(h==null){a.visible=!1,a.projectedGeometry=void 0;return}const u=this.getItemStyleOverrides(String(l),n,c,o,i);a.visible=!0,a.projectedGeometry=h,applyShapeStyle7(a,o,u,s)})}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontFamily:a}=this.properties.label;e.each((r,{x:n,y:l,text:c,fontSize:h,lineHeight:u})=>{r.visible=!0,r.x=n,r.y=l,r.text=c,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=h,r.lineHeight=u,r.fontFamily=a,r.textAlign="center",r.textBaseline="middle"})}resetAnimation(){}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const r=s.distanceSquared(t,e);r<i&&(i=r,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,o=i!=null?largestPolygon(i):void 0,s=o!=null?polygonMarkerCenter(o,2):void 0,a=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}legendItemSymbol(t){const{dataModel:e,processedData:i,properties:o}=this,{fillOpacity:s,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c}=o;let{fill:h}=o;if(t!=null&&this.isColorScaleValid()){const p=e.resolveColumnById(this,"colorValue",i)[t];h=this.colorScale.convert(p)}return{marker:getShapeStyle11({fill:h,fillOpacity:s,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}}getLegendData(t){const{processedData:e,dataModel:i}=this;if(e==null||i==null)return[];const{id:o,visible:s}=this,{title:a,legendItemName:r,idKey:n,idName:l,colorKey:c,colorName:h,colorRange:u,showInLegend:p}=this.properties;if(t==="gradient"&&c!=null&&u!=null){const d=e.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:o,colorName:h,colorRange:u,colorDomain:d}]}else return t==="category"?[{legendType:"category",id:o,itemId:o,seriesId:o,enabled:s,label:{text:r??a??l??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!p}]:[]}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:h,legendItemName:u,title:p,tooltip:d}=s;if(!i||!o)return;const g=o.dataSources.get(this.id)?.[t],f=i.resolveColumnById(this,"idValue",o)[t],y=n!=null?i.resolveColumnById(this,"colorValue",o)[t]:void 0,m=[];if(y!=null&&m.push({label:l,fallbackLabel:n,value:String(y)}),c!=null&&c!==a){const x=i.resolveColumnById(this,"labelValue",o)[t];m.push({label:h,fallbackLabel:c,value:x})}const b=this.getItemBaseStyle(!1);return Object.assign(b,this.getItemStyleOverrides(String(t),t,y,b,!1)),d.formatTooltip(this.properties,{heading:f,title:p??u,symbol:this.legendItemSymbol(t),data:m},{seriesId:e,datum:g,title:p,idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:h,...b})}computeFocusBounds(t){return findFocusedGeoGeometry(this,t)}};MapShapeSeries.className="MapShapeSeries",MapShapeSeries.type="map-shape";var import_ag_charts_community237=require("ag-charts-community"),import_ag_charts_core85=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs14,autoSizedLabelOptionsDefs:autoSizedLabelOptionsDefs3,tooltipOptionsDefs:tooltipOptionsDefs14}=import_ag_charts_community237._ModuleSupport,mapShapeSeriesOptionsDef={type:(0,import_ag_charts_core85.required)((0,import_ag_charts_core85.constant)("map-shape")),idKey:(0,import_ag_charts_core85.required)(import_ag_charts_core85.string),colorKey:import_ag_charts_core85.string,labelKey:import_ag_charts_core85.string,idName:import_ag_charts_core85.string,colorName:import_ag_charts_core85.string,labelName:import_ag_charts_core85.string,topology:import_ag_charts_core85.object,topologyIdKey:import_ag_charts_core85.string,legendItemName:import_ag_charts_core85.string,colorRange:(0,import_ag_charts_core85.arrayOf)(import_ag_charts_core85.color),padding:import_ag_charts_core85.positiveNumber,itemStyler:import_ag_charts_core85.callback,title:import_ag_charts_core85.string,label:autoSizedLabelOptionsDefs3,tooltip:tooltipOptionsDefs14,...commonSeriesOptionsDefs14,...import_ag_charts_core85.fillOptionsDef,...import_ag_charts_core85.strokeOptionsDef,...import_ag_charts_core85.lineDashOptionsDef,highlightStyle:{...commonSeriesOptionsDefs14.highlightStyle,...import_ag_charts_core85.fillOptionsDef,...import_ag_charts_core85.strokeOptionsDef}},MapShapeModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:t=>new MapShapeSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{fill:{$palette:"fill"},stroke:{$ref:"backgroundColor"},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},import_ag_charts_community238._ModuleSupport.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community238._ModuleSupport.FILL_PATTERN_DEFAULTS,fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:{$ref:"backgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"}},tooltip:{range:"exact"}}},MapShapeSeriesModule={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:mapShapeSeriesOptionsDef,create:t=>new MapShapeSeries(t)},import_ag_charts_community242=require("ag-charts-community"),import_ag_charts_community240=require("ag-charts-community"),import_ag_charts_core86=require("ag-charts-core"),import_ag_charts_community239=require("ag-charts-community"),{FillGradientDefaults:FillGradientDefaults11,FillPatternDefaults:FillPatternDefaults11,COLOR_STRING:COLOR_STRING24,COLOR_GRADIENT:COLOR_GRADIENT11,COLOR_PATTERN:COLOR_PATTERN11,OR:OR16,LINE_DASH:LINE_DASH19,OBJECT:OBJECT39,POSITIVE_NUMBER:POSITIVE_NUMBER31,RATIO:RATIO27,TempValidate:TempValidate73,SeriesProperties:SeriesProperties7,SeriesTooltip:SeriesTooltip16}=import_ag_charts_community239._ModuleSupport,MapShapeBackgroundSeriesProperties=class extends SeriesProperties7{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillGradientDefaults=new FillGradientDefaults11,this.fillPatternDefaults=new FillPatternDefaults11,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new SeriesTooltip16}};__decorateClass([TempValidate73(GEOJSON_OBJECT,{optional:!0})],MapShapeBackgroundSeriesProperties.prototype,"topology",2),__decorateClass([TempValidate73(OR16(COLOR_GRADIENT11,COLOR_PATTERN11,COLOR_STRING24))],MapShapeBackgroundSeriesProperties.prototype,"fill",2),__decorateClass([TempValidate73(OBJECT39)],MapShapeBackgroundSeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate73(OBJECT39)],MapShapeBackgroundSeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate73(RATIO27)],MapShapeBackgroundSeriesProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate73(COLOR_STRING24)],MapShapeBackgroundSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate73(RATIO27)],MapShapeBackgroundSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate73(POSITIVE_NUMBER31)],MapShapeBackgroundSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate73(LINE_DASH19)],MapShapeBackgroundSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate73(POSITIVE_NUMBER31)],MapShapeBackgroundSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate73(OBJECT39)],MapShapeBackgroundSeriesProperties.prototype,"tooltip",2);var{createDatumId:createDatumId17,SeriesNodePickMode:SeriesNodePickMode13,Selection:Selection11,Group:Group16,PointerEvents:PointerEvents8,getShapeStyle:getShapeStyle12}=import_ag_charts_community240._ModuleSupport,MapShapeBackgroundSeries=class extends TopologySeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,useLabelLayer:!0,pickModes:[SeriesNodePickMode13.EXACT_SHAPE_MATCH]}),this.properties=new MapShapeBackgroundSeriesProperties,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Group16({name:"itemGroup"})),this.datumSelection=Selection11.select(this.itemGroup,()=>this.nodeFactory())}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,t,0],this.highlightGroup.zIndex=[0,t,1],!0):!1}nodeFactory(){const t=new GeoGeometry;return t.renderMode=1,t.lineJoin="round",t.pointerEvents=PointerEvents8.None,t}processData(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:geometryBbox(o,e)},void 0),t==null&&import_ag_charts_core86.Logger.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((a,r)=>{const{geometry:n}=a,l=n!=null&&i!=null?projectGeometry(n,i):void 0;l!=null&&o.push({series:this,itemId:r,datum:a,datumIndex:0,index:r,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:e=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:t}),this.updateDatumNodes({datumSelection:t})}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId17(e.index))}updateDatumNodes(t){const{properties:e}=this,{datumSelection:i}=t,{fill:o,fillOpacity:s,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l}=e,c=this.getStrokeWidth(e.strokeWidth);i.each((h,u)=>{const{projectedGeometry:p}=u;if(p==null){h.visible=!1,h.projectedGeometry=void 0;return}h.visible=!0,h.projectedGeometry=p;const d=getShapeStyle12({fill:o,fillOpacity:s,stroke:a,strokeWidth:c,strokeOpacity:r,lineDash:n,lineDashOffset:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults);h.setProperties(d)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(t){}pickFocus(){}computeFocusBounds(t){}};MapShapeBackgroundSeries.className="MapShapeBackgroundSeries",MapShapeBackgroundSeries.type="map-shape-background";var import_ag_charts_community241=require("ag-charts-community"),import_ag_charts_core87=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs15}=import_ag_charts_community241._ModuleSupport,mapShapeBackgroundSeriesOptionsDef={type:(0,import_ag_charts_core87.required)((0,import_ag_charts_core87.constant)("map-shape-background")),topology:import_ag_charts_core87.object,...commonSeriesOptionsDefs15,...import_ag_charts_core87.fillOptionsDef,...import_ag_charts_core87.strokeOptionsDef,...import_ag_charts_core87.lineDashOptionsDef},MapShapeBackgroundModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:t=>new MapShapeBackgroundSeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{...MAP_THEME_DEFAULTS,series:{fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$ref:"backgroundColor"},strokeWidth:1,fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:[{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]},{$mix:[{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}],rotation:0,reverse:!1},fillPatternDefaults:{...import_ag_charts_community242._ModuleSupport.FILL_PATTERN_DEFAULTS,fill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]}}}}},MapShapeBackgroundSeriesModule={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:mapShapeBackgroundSeriesOptionsDef,create:t=>new MapShapeBackgroundSeries(t)},import_ag_charts_community250=require("ag-charts-community"),import_ag_charts_community247=require("ag-charts-community"),import_ag_charts_community243=require("ag-charts-community"),import_ag_charts_core88=require("ag-charts-core"),{ChartAxisDirection:ChartAxisDirection25,PolarAxis,diff:diff6,fixNumericExtent:fixNumericExtent8,groupAccumulativeValueProperty:groupAccumulativeValueProperty2,keyProperty:keyProperty9,normaliseGroupTo,resetLabelFn:resetLabelFn5,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation5,seriesLabelFadeOutAnimation,valueProperty:valueProperty15,animationValidation:animationValidation7,createDatumId:createDatumId18,SeriesNodePickMode:SeriesNodePickMode14,normalizeAngle360:normalizeAngle3606,CategoryScale:CategoryScale3,motion:motion6,applyShapeStyle:applyShapeStyle8,isGradientFill:isGradientFill3,getShapeStyle:getShapeStyle13}=import_ag_charts_community243._ModuleSupport,RadialColumnSeriesNodeEvent=class extends import_ag_charts_community243._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},RadialColumnSeriesBase=class extends import_ag_charts_community243._ModuleSupport.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,categoryKey:"angleValue",useLabelLayer:!0,canHaveAxes:!0,pickModes:[SeriesNodePickMode14.NEAREST_NODE,SeriesNodePickMode14.EXACT_SHAPE_MATCH],animationResetFns:{...e,label:resetLabelFn5}}),this.NodeEvent=RadialColumnSeriesNodeEvent,this.groupScale=new CategoryScale3,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===ChartAxisDirection25.X)return e.getDomain(this,"angleValue","key",i);{const o=e.getDomain(this,"radiusValue-end","value",i),s=Number.isFinite(o[1]-o[0])?[o[0]>0?0:o[0],o[1]<0?0:o[1]]:[];return fixNumericExtent8(s)}}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:o}=this.properties,s=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const a=this.getStackId(),r=`${a}-trailing`,n=[];(0,import_ag_charts_core88.isDefined)(o)&&n.push(normaliseGroupTo([a,r],Math.abs(o))),s&&this.processedData&&n.push(diff6(this.id,this.processedData)),s&&n.push(animationValidation7());const l=this.visible?{}:{forceValue:0},c=this.axes[ChartAxisDirection25.Y]?.scale.type,h=this.axes[ChartAxisDirection25.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[keyProperty9(e,h,{id:"angleValue"}),valueProperty15(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...groupAccumulativeValueProperty2(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},c),...groupAccumulativeValueProperty2(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},c),...n],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t!==o.r||e!==o.cx||i!==o.cy?(this.circleCache={r:t,cx:e,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[ChartAxisDirection25.Y]?.isReversed()}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[ChartAxisDirection25.Y];return t instanceof PolarAxis?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e,groupScale:i}=this;if(!e||!t||t.type!=="grouped"||!this.properties.isValid())return;const o=this.axes[ChartAxisDirection25.X],s=this.axes[ChartAxisDirection25.Y],a=o?.scale,r=s?.scale;if(!a||!r)return;const n=e.resolveKeysById(this,"angleValue",t),l=e.resolveColumnById(this,"radiusValue-start",t),c=e.resolveColumnById(this,"radiusValue-end",t),h=e.resolveColumnById(this,"radiusValue-raw",t),u=e.resolveProcessedDataIndexById(this,"radiusValue-range");let p=0,d=0;o instanceof AngleCategoryAxis&&(p=o.groupPaddingInner,d=o.paddingInner);const f=(a.bandwidth??0)*(1-d),{index:y,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:m}).map((L,P)=>String(P)),i.range=[-f/2,f/2],i.paddingInner=m>1?p:0;const b=this.isRadiusAxisReversed(),x=b?this.radius:this.getAxisInnerRadius(),S=b?this.getAxisInnerRadius():this.radius,v=S+x,{angleKey:T,radiusKey:D,angleName:k,radiusName:A,label:M}=this.properties,_=(L,P,z,R)=>{const B=this.getLabelText(M,{value:P,datum:L,angleKey:T,radiusKey:D,angleName:k,radiusName:A});if(B)return{x:z,y:R,text:B,textAlign:"center",textBaseline:"middle"}},O=[],C={itemId:D,nodeData:O,labelData:O};if(!this.visible)return C;const{dataSources:I}=t,w=I.get(this.id)??[];for(const{datumIndex:L,group:P}of e.forEachGroupDatum(this,t)){const z=w[L],R=n[L];if(R==null)return;const B=h[L],E=B>=0&&!Object.is(B,-0),F=l[L],V=c[L],G=P.aggregation[u][E?1:0]??0,W=E===b;if(F===void 0||V===void 0)return;let H,q;if(w.length===1)H=-.5*Math.PI,q=1.5*Math.PI;else{const tt=a.convert(R);H=normalizeAngle3606(tt+i.convert(String(y))),q=normalizeAngle3606(H+i.bandwidth)}const j=H+i.bandwidth/2,$=v-r.convert(F),X=v-r.convert(V),Y=($+X)/2,U=v-r.convert(0),Z=v-r.convert(G),J=Math.cos(j)*Y,K=Math.sin(j)*Y,at=this.properties.label.enabled?_(z,B,J,K):void 0,rt=this.getColumnWidth(H,q);O.push({series:this,datum:z,datumIndex:L,point:{x:J,y:K,size:0},midPoint:{x:J,y:K},label:at,angleValue:R,radiusValue:B,negative:W,innerRadius:$,outerRadius:X,stackInnerRadius:U,stackOuterRadius:Z,startAngle:H,endAngle:q,midAngle:j,axisInnerRadius:x,axisOuterRadius:S,columnWidth:rt,index:L})}return{itemId:D,nodeData:O,labelData:O}}getColumnWidth(t,e){return NaN}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return getShapeStyle13({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius},e.fillGradientDefaults,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{angleKey:r,radiusKey:n,itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:h}=a;if(l==null)return;const u=this.cachedDatumCallback(createDatumId18(t,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:s,datum:e,highlighted:o,angleKey:r,radiusKey:n,...i}));return getShapeStyle13(u,c,h)}updateSectorSelection(t,e){let i=[];if(e){const l=this.ctx.highlightManager?.getActiveHighlight();l?.datum&&l.series===this&&i.push(l)}else i=this.nodeData;const o=this.isRadiusAxisReversed(),s=o?this.radius:this.getAxisInnerRadius(),a=o?this.getAxisInnerRadius():this.radius,r=this.getShapeFillBBox(),n=this.getItemBaseStyle(e);t.update(i,void 0,l=>this.getDatumId(l)).each((l,c)=>{const{datum:h,datumIndex:u,midPoint:p}=c,d=this.getItemStyleOverrides(String(u),h,n,e),g=d?.fill??n.fill,y=isGradientFill3(g)&&g.bounds==="item"?{centerX:p?.x??0,centerY:p?.y??0}:{centerX:0,centerY:0,innerRadius:s,outerRadius:a};this.updateItemPath(l,c,e),applyShapeStyle8(l,n,d,r,y),l.cornerRadius=d?.cornerRadius??n.cornerRadius,l.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();motion6.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),seriesLabelFadeInAnimation5(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();motion6.fromToMotion(this.id,"datums",e,[t],i),seriesLabelFadeOutAnimation(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:h}=a,u=s[ChartAxisDirection25.X],p=s[ChartAxisDirection25.Y];if(!i||!o||!u||!p)return;const d=o.dataSources.get(this.id)?.[t],g=i.resolveKeysById(this,"angleValue",o)[t],f=i.resolveColumnById(this,"radiusValue-raw",o)[t];if(g==null)return;const y=this.getItemBaseStyle(!1);return Object.assign(y,this.getItemStyleOverrides(String(t),t,y,!1)),h.formatTooltip(this.properties,{heading:u.formatDatum(g),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:p.formatDatum(f)}]},{seriesId:e,datum:d,title:n,angleKey:r,angleName:n,radiusKey:l,radiusName:c,...y})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l}=this.properties,c=getShapeStyle13({fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r},n,l);return import_ag_charts_community243._ModuleSupport.isGradientFill(c.fill)&&(c.fill={...c.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:c}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,visible:i}=this,{radiusKey:o,radiusName:s,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:i,label:{text:s??o},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(t){return createDatumId18(t.angleValue)}computeLabelsBBox(){return null}},import_ag_charts_community244=require("ag-charts-community"),{SeriesProperties:SeriesProperties8,FillGradientDefaults:FillGradientDefaults12,FillPatternDefaults:FillPatternDefaults12,SeriesTooltip:SeriesTooltip17,TempValidate:TempValidate74,COLOR_STRING:COLOR_STRING25,NUMBER:NUMBER18,FUNCTION:FUNCTION18,LINE_DASH:LINE_DASH20,OBJECT:OBJECT40,POSITIVE_NUMBER:POSITIVE_NUMBER32,RATIO:RATIO28,STRING:STRING37,Label:Label12,OR:OR17,COLOR_GRADIENT:COLOR_GRADIENT12,COLOR_PATTERN:COLOR_PATTERN12}=import_ag_charts_community244._ModuleSupport,RadialColumnSeriesBaseProperties=class extends SeriesProperties8{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new FillGradientDefaults12,this.fillPatternDefaults=new FillPatternDefaults12,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Label12,this.tooltip=new SeriesTooltip17}};__decorateClass([TempValidate74(STRING37)],RadialColumnSeriesBaseProperties.prototype,"angleKey",2),__decorateClass([TempValidate74(STRING37,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"angleName",2),__decorateClass([TempValidate74(STRING37)],RadialColumnSeriesBaseProperties.prototype,"radiusKey",2),__decorateClass([TempValidate74(STRING37,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"radiusName",2),__decorateClass([TempValidate74(OR17(COLOR_GRADIENT12,COLOR_PATTERN12,COLOR_STRING25))],RadialColumnSeriesBaseProperties.prototype,"fill",2),__decorateClass([TempValidate74(OBJECT40)],RadialColumnSeriesBaseProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate74(OBJECT40)],RadialColumnSeriesBaseProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate74(RATIO28)],RadialColumnSeriesBaseProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate74(COLOR_STRING25)],RadialColumnSeriesBaseProperties.prototype,"stroke",2),__decorateClass([TempValidate74(POSITIVE_NUMBER32)],RadialColumnSeriesBaseProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate74(RATIO28)],RadialColumnSeriesBaseProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate74(LINE_DASH20)],RadialColumnSeriesBaseProperties.prototype,"lineDash",2),__decorateClass([TempValidate74(POSITIVE_NUMBER32)],RadialColumnSeriesBaseProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate74(POSITIVE_NUMBER32)],RadialColumnSeriesBaseProperties.prototype,"cornerRadius",2),__decorateClass([TempValidate74(FUNCTION18,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"itemStyler",2),__decorateClass([TempValidate74(NUMBER18)],RadialColumnSeriesBaseProperties.prototype,"rotation",2),__decorateClass([TempValidate74(STRING37,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"stackGroup",2),__decorateClass([TempValidate74(NUMBER18,{optional:!0})],RadialColumnSeriesBaseProperties.prototype,"normalizedTo",2),__decorateClass([TempValidate74(OBJECT40)],RadialColumnSeriesBaseProperties.prototype,"label",2),__decorateClass([TempValidate74(OBJECT40)],RadialColumnSeriesBaseProperties.prototype,"tooltip",2);var import_ag_charts_community246=require("ag-charts-community"),import_ag_charts_community245=require("ag-charts-community"),{motion:motion7}=import_ag_charts_community245._ModuleSupport;function createAngleMotionCalculator(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(r,n,l)=>{e.forEach(c=>{const h=t[c];let u=(l==="removed"||l==="updated"?r:n)[c],p=(l==="removed"?r:n)[c];isNaN(p)&&(p=r.previousDatum?.[c]??NaN);const d=u-p;Math.abs(d)>Math.PI&&(u-=Math.sign(d)*2*Math.PI),h.set(n,{from:u,to:p})})},o=(r,n)=>({startAngle:t.startAngle.get(r)[n],endAngle:t.endAngle.get(r)[n]});return{calculate:i,from:r=>o(r,"from"),to:r=>o(r,"to")}}function fixRadialColumnAnimationStatus(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function prepareRadialColumnAnimationFunctions(t){const e=createAngleMotionCalculator();return{toFn:(s,a,r)=>{const{startAngle:n,endAngle:l}=e.to(a);let c,h,u,p,d;return r==="removed"?(c=s.innerRadius,h=s.innerRadius,u=s.columnWidth,p=s.axisInnerRadius,d=s.axisOuterRadius):(c=isNaN(a.innerRadius)?t:a.innerRadius,h=isNaN(a.outerRadius)?t:a.outerRadius,u=isNaN(a.columnWidth)?s.columnWidth:a.columnWidth,p=a.axisInnerRadius,d=a.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:p,axisOuterRadius:d,startAngle:n,endAngle:l}},fromFn:(s,a,r)=>{r=fixRadialColumnAnimationStatus(s,a,r),e.calculate(s,a,r);const{startAngle:n,endAngle:l}=e.from(a);let c,h,u,p,d;r==="removed"||r==="updated"?(c=s.innerRadius,h=s.outerRadius,u=s.columnWidth,p=s.axisInnerRadius,d=s.axisOuterRadius):(c=t,h=t,u=a.columnWidth,p=a.axisInnerRadius,d=a.axisOuterRadius);const g=motion7.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:p,axisOuterRadius:d,startAngle:n,endAngle:l,phase:g}}}}function resetRadialColumnSelectionFn(t,{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:r,endAngle:n}){return{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:a,startAngle:r,endAngle:n}}var{SectorBox,motion:motion8}=import_ag_charts_community246._ModuleSupport;function getRadii(t){const{negative:e,innerRadius:i,outerRadius:o,stackInnerRadius:s,stackOuterRadius:a}=t;return{innerRadius:e?a:s,outerRadius:e?s:a,clipInnerRadius:e?o:i,clipOuterRadius:e?i:o}}function prepareNightingaleAnimationFunctions(t){const e=createAngleMotionCalculator();return{toFn:(s,a,r)=>{const{startAngle:n,endAngle:l}=e.to(a);let c,h,u;if(r==="removed")c=t,h=t,u=new SectorBox(n,l,c,h);else{let p,d;({innerRadius:c,outerRadius:h,clipInnerRadius:p,clipOuterRadius:d}=getRadii(a)),isNaN(c)&&(c=t),isNaN(h)&&(h=t),isNaN(p)&&(p=t),isNaN(d)&&(d=t),u=new SectorBox(n,l,p,d)}return{innerRadius:c,outerRadius:h,startAngle:n,endAngle:l,clipSector:u}},fromFn:(s,a,r)=>{r=fixRadialColumnAnimationStatus(s,a,r),e.calculate(s,a,r);const{startAngle:n,endAngle:l}=e.from(a);let c,h,u;r==="removed"||r==="updated"?(c=s.innerRadius,h=s.outerRadius,u=s.clipSector):(c=t,h=t),u??(u=new SectorBox(n,l,c,h));const p=motion8.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:h,startAngle:n,endAngle:l,clipSector:u,phase:p}}}}function resetNightingaleSelectionFn(t,e){const{startAngle:i,endAngle:o}=e,{innerRadius:s,outerRadius:a,clipInnerRadius:r,clipOuterRadius:n}=getRadii(e),l=new SectorBox(i,o,r,n);return{innerRadius:s,outerRadius:a,startAngle:i,endAngle:o,clipSector:l}}var{Sector:Sector4,SectorBox:SectorBox2,PolarZIndexMap}=import_ag_charts_community247._ModuleSupport,NightingaleSeries=class extends RadialColumnSeriesBase{constructor(t){super(t,{animationResetFns:{item:resetNightingaleSelectionFn}}),this.properties=new RadialColumnSeriesBaseProperties}setSeriesIndex(t){return super.setSeriesIndex(t)?(this.contentGroup.zIndex=[0,PolarZIndexMap.FOREGROUND,t],this.highlightGroup.zIndex=[0,PolarZIndexMap.HIGHLIGHT,t],this.labelGroup.zIndex=[0,PolarZIndexMap.LABEL,t],!0):!1}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new Sector4}updateItemPath(t,e,i){const{negative:o}=e;if(t.centerX=0,t.centerY=0,t.startOuterCornerRadius=o?0:this.properties.cornerRadius,t.endOuterCornerRadius=o?0:this.properties.cornerRadius,t.startInnerCornerRadius=o?this.properties.cornerRadius:0,t.endInnerCornerRadius=o?this.properties.cornerRadius:0,i){const{startAngle:s,endAngle:a}=e,{innerRadius:r,outerRadius:n,clipInnerRadius:l,clipOuterRadius:c}=getRadii(e);t.innerRadius=r,t.outerRadius=n,t.startAngle=s,t.endAngle=a,t.clipSector=new SectorBox2(s,a,l,c)}}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return prepareNightingaleAnimationFunctions(t)}};NightingaleSeries.className="NightingaleSeries",NightingaleSeries.type="nightingale";var import_ag_charts_community248=require("ag-charts-community"),import_ag_charts_core89=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs16,seriesLabelOptionsDefs:seriesLabelOptionsDefs10,tooltipOptionsDefs:tooltipOptionsDefs15}=import_ag_charts_community248._ModuleSupport,nightingaleSeriesOptionsDef={type:(0,import_ag_charts_core89.required)((0,import_ag_charts_core89.constant)("nightingale")),angleKey:(0,import_ag_charts_core89.required)(import_ag_charts_core89.string),radiusKey:(0,import_ag_charts_core89.required)(import_ag_charts_core89.string),angleName:import_ag_charts_core89.string,radiusName:import_ag_charts_core89.string,grouped:import_ag_charts_core89.boolean,stacked:import_ag_charts_core89.boolean,stackGroup:import_ag_charts_core89.string,normalizedTo:import_ag_charts_core89.number,cornerRadius:import_ag_charts_core89.positiveNumber,itemStyler:import_ag_charts_core89.callback,label:seriesLabelOptionsDefs10,tooltip:tooltipOptionsDefs15,...commonSeriesOptionsDefs16,...import_ag_charts_core89.fillOptionsDef,...import_ag_charts_core89.strokeOptionsDef,...import_ag_charts_core89.lineDashOptionsDef},import_ag_charts_community249=require("ag-charts-community"),{ThemeConstants:{POLAR_AXIS_TYPE,POLAR_AXIS_SHAPE}}=import_ag_charts_community249._ModuleSupport,axisShape={$path:["./shape",POLAR_AXIS_SHAPE.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},NIGHTINGALE_SERIES_THEME={series:{fill:{$palette:"fill"},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"backgroundColor"},{$palette:"stroke"}]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community249._ModuleSupport.FILL_PATTERN_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:axisShape,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:axisShape}}},{ThemeConstants:{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE2}}=import_ag_charts_community250._ModuleSupport,NightingaleModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:t=>new NightingaleSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:POLAR_AXIS_TYPE2.ANGLE_CATEGORY},{type:POLAR_AXIS_TYPE2.RADIUS_NUMBER}],themeTemplate:NIGHTINGALE_SERIES_THEME,stackable:!0,groupable:!0,stackedByDefault:!0},NightingaleSeriesModule={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:nightingaleSeriesOptionsDef,create:t=>new NightingaleSeries(t)},import_ag_charts_community255=require("ag-charts-community"),import_ag_charts_community252=require("ag-charts-community"),import_ag_charts_community251=require("ag-charts-community"),{SeriesProperties:SeriesProperties9,FillGradientDefaults:FillGradientDefaults13,FillPatternDefaults:FillPatternDefaults13,SeriesTooltip:SeriesTooltip18,TempValidate:TempValidate75,UNION:UNION16,OR:OR18,ARRAY_OF:ARRAY_OF4,COLOR_GRADIENT:COLOR_GRADIENT13,COLOR_STRING:COLOR_STRING26,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY11,FUNCTION:FUNCTION19,DIRECTION:DIRECTION2,BOOLEAN:BOOLEAN33,LINE_DASH:LINE_DASH21,OBJECT:OBJECT41,NUMBER:NUMBER19,POSITIVE_NUMBER:POSITIVE_NUMBER33,COLOR_PATTERN:COLOR_PATTERN13,RATIO:RATIO29,STRING:STRING38,Label:Label13,DropShadow:DropShadow5}=import_ag_charts_community251._ModuleSupport,PyramidSeriesLabel=class extends Label13{},PyramidSeriesStageLabel=class extends Label13{constructor(){super(...arguments),this.spacing=0}};__decorateClass([TempValidate75(NUMBER19)],PyramidSeriesStageLabel.prototype,"spacing",2),__decorateClass([TempValidate75(UNION16(["before","after"],"a placement"))],PyramidSeriesStageLabel.prototype,"placement",2);var PyramidProperties=class extends SeriesProperties9{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new FillGradientDefaults13,this.fillPatternDefaults=new FillPatternDefaults13,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new DropShadow5().set({enabled:!1}),this.label=new PyramidSeriesLabel,this.stageLabel=new PyramidSeriesStageLabel,this.tooltip=new SeriesTooltip18}};__decorateClass([TempValidate75(STRING38)],PyramidProperties.prototype,"stageKey",2),__decorateClass([TempValidate75(STRING38)],PyramidProperties.prototype,"valueKey",2),__decorateClass([TempValidate75(ARRAY_OF4(OR18(COLOR_GRADIENT13,COLOR_PATTERN13,COLOR_STRING26)))],PyramidProperties.prototype,"fills",2),__decorateClass([TempValidate75(OBJECT41)],PyramidProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate75(OBJECT41)],PyramidProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate75(RATIO29)],PyramidProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate75(COLOR_STRING_ARRAY11)],PyramidProperties.prototype,"strokes",2),__decorateClass([TempValidate75(POSITIVE_NUMBER33)],PyramidProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate75(RATIO29)],PyramidProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate75(LINE_DASH21)],PyramidProperties.prototype,"lineDash",2),__decorateClass([TempValidate75(POSITIVE_NUMBER33)],PyramidProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate75(DIRECTION2)],PyramidProperties.prototype,"direction",2),__decorateClass([TempValidate75(BOOLEAN33,{optional:!0})],PyramidProperties.prototype,"reverse",2),__decorateClass([TempValidate75(POSITIVE_NUMBER33)],PyramidProperties.prototype,"spacing",2),__decorateClass([TempValidate75(POSITIVE_NUMBER33,{optional:!0})],PyramidProperties.prototype,"aspectRatio",2),__decorateClass([TempValidate75(FUNCTION19,{optional:!0})],PyramidProperties.prototype,"itemStyler",2),__decorateClass([TempValidate75(OBJECT41)],PyramidProperties.prototype,"shadow",2),__decorateClass([TempValidate75(OBJECT41)],PyramidProperties.prototype,"label",2),__decorateClass([TempValidate75(OBJECT41)],PyramidProperties.prototype,"stageLabel",2),__decorateClass([TempValidate75(OBJECT41)],PyramidProperties.prototype,"tooltip",2);function applyPyramidDatum(t,{x:e,y:i,top:o,right:s,bottom:a,left:r}){t.x0=e-o/2,t.x1=e+o/2,t.x2=e+a/2,t.x3=e-a/2,t.y0=i-r/2,t.y1=i-s/2,t.y2=i+s/2,t.y3=i+r/2}function preparePyramidAnimationFunctions(t){return{fromFn:(s,a)=>{const{x:r,y:n}=a;let{top:l,right:c,bottom:h,left:u}=a;return t==="vertical"?(l=0,h=0):(u=0,c=0),{x:r,y:n,top:l,right:c,bottom:h,left:u}},toFn:(s,a)=>{const{x:r,y:n,top:l,right:c,bottom:h,left:u}=a;return{x:r,y:n,top:l,right:c,bottom:h,left:u}},applyFn:applyPyramidDatum}}var{StateMachine:StateMachine14,valueProperty:valueProperty16,SeriesNodePickMode:SeriesNodePickMode15,CachedTextMeasurerPool:CachedTextMeasurerPool10,TextUtils:TextUtils7,createDatumId:createDatumId19,BBox:BBox21,Group:Group17,Selection:Selection12,Text:Text6,PointerEvents:PointerEvents9,applyShapeStyle:applyShapeStyle9,fromToMotion:fromToMotion4,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation6,getShapeStyle:getShapeStyle14}=import_ag_charts_community252._ModuleSupport,PyramidSeries=class extends import_ag_charts_community252._ModuleSupport.DataModelSeries{constructor(t){super({moduleCtx:t,categoryKey:void 0,pickModes:[SeriesNodePickMode15.EXACT_SHAPE_MATCH,SeriesNodePickMode15.NEAREST_NODE]}),this.properties=new PyramidProperties,this.itemGroup=this.contentGroup.appendChild(new Group17({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Group17({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new Group17({name:"stageLabelGroup"})),this.datumSelection=Selection12.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Selection12.select(this.itemLabelGroup,Text6),this.stageLabelSelection=Selection12.select(this.stageLabelGroup,Text6),this.highlightDatumSelection=Selection12.select(this.highlightNode,()=>this.nodeFactory()),this.animationState=new StateMachine14("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=PointerEvents9.None,this.stageLabelGroup.pointerEvents=PointerEvents9.None}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}nodeFactory(){return new FunnelConnector}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}async processData(t){if(this.data==null||!this.properties.isValid())return;const{id:e,visible:i,ctx:{legendManager:o}}=this,{stageKey:s,valueKey:a}=this.properties,r="band",n="number",l=(h,u,p)=>i&&o.getItemEnabled({seriesId:e,itemId:p}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(t,this.data,{props:[valueProperty16(s,r,{id:"xValue"}),valueProperty16(a,n,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:t,dataModel:e,processedData:i,properties:o,visible:s,ctx:{legendManager:a}}=this,{stageKey:r,valueKey:n,direction:l,reverse:c=l==="horizontal",spacing:h,aspectRatio:u,label:p,stageLabel:d}=o;if(e==null||i==null)return;const g=l==="horizontal",f=e.resolveColumnById(this,"xValue",i),y=e.resolveColumnById(this,"yValue",i),m=CachedTextMeasurerPool10.getMeasurer({font:d.getFont()});let b,x;g?(b="center",x=d.placement==="before"?"bottom":"top"):(b=d.placement==="after"?"left":"right",x="middle");const S=d.enabled?[]:void 0;let v=0,T=0,D=0;const k=i.dataSources.get(this.id)??[];k.forEach((B,E)=>{const F=f[E],V=y[E],G=s&&a.getItemEnabled({seriesId:t,itemId:E});if(D+=V,S==null)return;const W=this.getLabelText(this.properties.stageLabel,{datum:B,value:F,stageKey:r,valueKey:n}),{width:H}=m.measureText(W),q=W.split(`
`).length*TextUtils7.getLineHeight(p.fontSize);v=Math.max(v,H),T=Math.max(T,q),S.push({x:NaN,y:NaN,text:W,textAlign:b,textBaseline:x,visible:G})});const A=this._nodeDataDependencies?.seriesRectWidth??0,M=this._nodeDataDependencies?.seriesRectHeight??0,_=h*(i.input.count-1);let O;if(g){const B=T+d.spacing;O=new BBox21(0,d.placement==="before"?B:0,A,M-B)}else{const B=v+d.spacing;O=new BBox21(d.placement==="after"?0:B,0,A-B,M)}if(u!=null&&u!==0){const B=l==="horizontal"?1/u:u,E=Math.min(O.width,O.height*B),F=E/B;O=new BBox21(O.x+(O.width-E)/2,O.y+(O.height-F)/2,E,F)}let C,I;g?I=d.placement==="before"?O.y-d.spacing:O.y+O.height+d.spacing:C=d.placement==="after"?O.x+O.width+d.spacing:O.x-d.spacing;const w=O.width-(g?_:0),L=O.height-(g?0:_);if(w<0||L<0)return;const P=[],z=[];let R=0;return k.forEach((B,E)=>{const F=f[E],V=y[E],G=s&&a.getItemEnabled({seriesId:t,itemId:E}),W=R+V,H=(R+W)/(2*D),q=(W-R)/D,j=g?w*H+h*E:w*.5,$=g?L*.5:L*H+h*E,X=O.x+j,Y=O.y+$;if(S!=null){const tt=S[E];tt.x=C??X,tt.y=I??Y}let U,Z,J,K;if(g){const tt=w*q;U=tt,J=tt;const it=(j+tt/2)*(L/O.width),Q=(j-tt/2)*(L/O.width);Z=c?O.height-it:it,K=c?O.height-Q:Q}else{const tt=L*q;Z=tt,K=tt;const it=($-tt/2)*(w/O.height),Q=($+tt/2)*(w/O.height);U=c?O.width-it:it,J=c?O.width-Q:Q}const at=this.getLabelText(p,{datum:B,value:V,stageKey:r,valueKey:n}),rt={x:X,y:Y,text:at,textAlign:"center",textBaseline:"middle",visible:G};z.push(rt),P.push({series:this,itemId:n,datum:B,datumIndex:E,index:E,xValue:F,yValue:V,x:X,y:Y,top:U,right:Z,bottom:J,left:K,label:rt,enabled:G,midPoint:{x:X,y:Y}}),R=W}),{itemId:t,nodeData:P,labelData:z,stageLabelData:S,bounds:O}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:t}){this.checkResize(t);const{datumSelection:e,labelSelection:i,stageLabelSelection:o,highlightDatumSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const r=this.contextNodeData?.nodeData??[],n=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:n,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:o}),this.updateLabelNodes({labelSelection:o,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:s}),this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData)}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return getShapeStyle14({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s){const{id:a,properties:r}=this,{fills:n,strokes:l,stageKey:c,valueKey:h,itemStyler:u}=r,p=o.fill??n[i%n.length],d=o.stroke??l[i%l.length],g={};if(s||(g.fill=p,g.stroke=d),u!=null){const f=this.cachedDatumCallback(createDatumId19(t,s?"highlight":"node"),()=>this.callWithContext(u,{seriesId:a,datum:e,stageKey:c,valueKey:h,highlighted:s,fill:p,stroke:d,...o}));Object.assign(g,f)}return getShapeStyle14(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateDatumNodes(t){const{datumSelection:e,isHighlight:i}=t,{properties:o}=this,{shadow:s}=o,a=this.getItemBaseStyle(i),r=this.contextNodeData?.bounds,n=r?{series:r,axis:r}:void 0;e.each((l,c)=>{const{datumIndex:h,datum:u}=c,p=this.getItemStyleOverrides(String(h),u,h,a,i);applyShapeStyle9(l,a,p,n),applyPyramidDatum(l,c),l.fillShadow=s})}updateLabelSelection(t){return t.labelSelection.update(this.properties.label.enabled?t.labelData:[])}updateStageLabelSelection(t){return t.stageLabelSelection.update(t.stageLabelData)}updateLabelNodes(t){const{labelSelection:e,labelProperties:i}=t,{color:o,fontSize:s,fontStyle:a,fontWeight:r,fontFamily:n}=i;e.each((l,{visible:c,x:h,y:u,text:p,textAlign:d,textBaseline:g})=>{l.visible=c,l.x=h,l.y=u,l.text=p,l.fill=o,l.fontStyle=a,l.fontWeight=r,l.fontSize=s,l.fontFamily=n,l.textAlign=d,l.textBaseline=g})}computeFocusBounds(t){const e=this.getNodeData()?.[t.datumIndex];if(e!==void 0){for(const i of this.datumSelection)if(i.datum===e)return i.node}}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,properties:s}=this,{stageKey:a,valueKey:r,tooltip:n}=s;if(!i||!o)return;const l=o.dataSources.get(this.id)?.[t],c=i.resolveColumnById(this,"xValue",o)[t],h=i.resolveColumnById(this,"yValue",o)[t];if(c==null)return;const u=this.getLabelText(this.properties.stageLabel,{datum:o.dataSources.get(this.id)?.[t],value:h,stageKey:a,valueKey:r}),p=this.getItemBaseStyle(!1);return Object.assign(p,this.getItemStyleOverrides(String(t),t,t,p,!1)),n.formatTooltip(this.properties,{symbol:this.legendItemSymbol(t),data:[{label:String(c),value:u}]},{seriesId:e,datum:l,title:void 0,stageKey:a,valueKey:r,...p})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,a)=>{const r=s.distanceSquared(t,e);r<i&&(i=r,o=a)}),o!=null?{datum:o,distance:Math.sqrt(i)}:void 0}legendItemSymbol(t){const{fills:e,strokes:i,strokeWidth:o,fillOpacity:s,strokeOpacity:a,lineDash:r,lineDashOffset:n}=this.properties,l=e[t%e.length]??"black",c=i[t%i.length]??"black";return{marker:getShapeStyle14({fill:l,fillOpacity:s,stroke:c,strokeWidth:o,strokeOpacity:a,lineDash:r,lineDashOffset:n},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}}getLegendData(t){const{processedData:e,dataModel:i,id:o,ctx:{legendManager:s},visible:a}=this;if(!i||!e||t!=="category"||!this.properties.isValid())return[];const{showInLegend:r}=this.properties,n=[],l=i.resolveColumnById(this,"xValue",e);return(e.dataSources.get(this.id)??[]).forEach((h,u)=>{const p=l[u];n.push({legendType:"category",id:o,itemId:u,seriesId:o,enabled:a&&s.getItemEnabled({seriesId:o,itemId:u}),label:{text:p},symbol:this.legendItemSymbol(u),hideInLegend:!r})}),n}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:t,labelSelection:e,properties:i}=this,o=preparePyramidAnimationFunctions(i.direction);fromToMotion4(this.id,"nodes",this.ctx.animationManager,[t],o),seriesLabelFadeInAnimation6(this,"labels",this.ctx.animationManager,e)}};PyramidSeries.className="PyramidSeries",PyramidSeries.type="pyramid";var import_ag_charts_community253=require("ag-charts-community"),import_ag_charts_core90=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs17,seriesLabelOptionsDefs:seriesLabelOptionsDefs11,shadowOptionsDefs:shadowOptionsDefs5,tooltipOptionsDefs:tooltipOptionsDefs16,without:without5}=import_ag_charts_community253._ModuleSupport,pyramidSeriesOptionsDef={type:(0,import_ag_charts_core90.required)((0,import_ag_charts_core90.constant)("pyramid")),stageKey:(0,import_ag_charts_core90.required)(import_ag_charts_core90.string),valueKey:(0,import_ag_charts_core90.required)(import_ag_charts_core90.string),direction:(0,import_ag_charts_core90.union)("horizontal","vertical"),aspectRatio:import_ag_charts_core90.positiveNumber,spacing:import_ag_charts_core90.positiveNumber,reverse:import_ag_charts_core90.boolean,itemStyler:import_ag_charts_core90.callback,fills:(0,import_ag_charts_core90.arrayOf)(import_ag_charts_core90.colorUnion),strokes:(0,import_ag_charts_core90.arrayOf)(import_ag_charts_core90.color),label:seriesLabelOptionsDefs11,stageLabel:{spacing:import_ag_charts_core90.positiveNumber,placement:(0,import_ag_charts_core90.union)("before","after"),...seriesLabelOptionsDefs11},tooltip:tooltipOptionsDefs16,shadow:shadowOptionsDefs5,...commonSeriesOptionsDefs17,...without5(import_ag_charts_core90.fillOptionsDef,["fill"]),...without5(import_ag_charts_core90.strokeOptionsDef,["stroke"]),...import_ag_charts_core90.lineDashOptionsDef},import_ag_charts_community254=require("ag-charts-community"),{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:DEFAULT_SHADOW_COLOUR2}}=import_ag_charts_community254._ModuleSupport,PYRAMID_SERIES_THEME={series:{direction:"vertical",strokeWidth:0,spacing:2,fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community254._ModuleSupport.FILL_PATTERN_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},stageLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:DEFAULT_SHADOW_COLOUR2,xOffset:3,yOffset:3,blur:5}}},PyramidModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"pyramid",moduleFactory:t=>new PyramidSeries(t),solo:!0,tooltipDefaults:{range:"exact"},themeTemplate:PYRAMID_SERIES_THEME},PyramidSeriesModule={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:pyramidSeriesOptionsDef,create:t=>new PyramidSeries(t)},import_ag_charts_community262=require("ag-charts-community"),import_ag_charts_community256=require("ag-charts-community"),{ThemeConstants:{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE3}}=import_ag_charts_community256._ModuleSupport,BASE_RADAR_SERIES_THEME={series:{stroke:{$palette:"stroke"},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:import_ag_charts_community256._ModuleSupport.FILL_PATTERN_DEFAULTS,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[POLAR_AXIS_TYPE3.ANGLE_CATEGORY]:{label:{spacing:10}}}},RADAR_LINE_SERIES_THEME=import_ag_charts_community256._ModuleSupport.mergeDefaults({series:{stroke:import_ag_charts_community256._ModuleSupport.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},BASE_RADAR_SERIES_THEME),RADAR_AREA_SERIES_THEME=import_ag_charts_community256._ModuleSupport.mergeDefaults({series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community256._ModuleSupport.FILL_PATTERN_DEFAULTS,fillOpacity:.8,strokeWidth:2,marker:{enabled:!1,fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:import_ag_charts_community256._ModuleSupport.FILL_PATTERN_DEFAULTS}}},BASE_RADAR_SERIES_THEME),import_ag_charts_community260=require("ag-charts-community"),import_ag_charts_community258=require("ag-charts-community"),import_ag_charts_core91=require("ag-charts-core"),import_ag_charts_community257=require("ag-charts-community"),{Label:Label14,SeriesMarker:SeriesMarker2,SeriesProperties:SeriesProperties10,SeriesTooltip:SeriesTooltip19,TempValidate:TempValidate76,BOOLEAN:BOOLEAN34,COLOR_STRING:COLOR_STRING27,NUMBER:NUMBER20,LINE_DASH:LINE_DASH22,OBJECT:OBJECT42,POSITIVE_NUMBER:POSITIVE_NUMBER34,RATIO:RATIO30,STRING:STRING39}=import_ag_charts_community257._ModuleSupport,RadarSeriesProperties=class extends SeriesProperties10{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new SeriesMarker2,this.label=new Label14,this.tooltip=new SeriesTooltip19,this.connectMissingData=!1}};__decorateClass([TempValidate76(STRING39)],RadarSeriesProperties.prototype,"angleKey",2),__decorateClass([TempValidate76(STRING39)],RadarSeriesProperties.prototype,"radiusKey",2),__decorateClass([TempValidate76(STRING39,{optional:!0})],RadarSeriesProperties.prototype,"angleName",2),__decorateClass([TempValidate76(STRING39,{optional:!0})],RadarSeriesProperties.prototype,"radiusName",2),__decorateClass([TempValidate76(COLOR_STRING27)],RadarSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate76(POSITIVE_NUMBER34)],RadarSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate76(RATIO30)],RadarSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate76(LINE_DASH22)],RadarSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate76(POSITIVE_NUMBER34)],RadarSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate76(NUMBER20)],RadarSeriesProperties.prototype,"rotation",2),__decorateClass([TempValidate76(OBJECT42)],RadarSeriesProperties.prototype,"marker",2),__decorateClass([TempValidate76(OBJECT42)],RadarSeriesProperties.prototype,"label",2),__decorateClass([TempValidate76(OBJECT42)],RadarSeriesProperties.prototype,"tooltip",2),__decorateClass([TempValidate76(BOOLEAN34)],RadarSeriesProperties.prototype,"connectMissingData",2);var{ChartAxisDirection:ChartAxisDirection26,PolarAxis:PolarAxis2,SeriesNodePickMode:SeriesNodePickMode16,valueProperty:valueProperty17,fixNumericExtent:fixNumericExtent9,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation7,markerFadeInAnimation:markerFadeInAnimation2,resetMarkerFn:resetMarkerFn2,animationValidation:animationValidation8,computeMarkerFocusBounds:computeMarkerFocusBounds3,extent:extent2,BBox:BBox22,Group:Group18,Path:Path11,PointerEvents:PointerEvents10,Selection:Selection13,Text:Text7,Marker:Marker4,mergeDefaults:mergeDefaults6,getShapeStyle:getShapeStyle15}=import_ag_charts_community258._ModuleSupport,RadarSeriesNodeEvent=class extends import_ag_charts_community258._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},RadarSeries=class extends import_ag_charts_community258._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,categoryKey:"angleValue",useLabelLayer:!0,pickModes:[SeriesNodePickMode16.NEAREST_NODE,SeriesNodePickMode16.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:resetMarkerFn2},clipFocusBox:!1}),this.properties=new RadarSeriesProperties,this.NodeEvent=RadarSeriesNodeEvent,this.lineGroup=this.contentGroup.appendChild(new Group18({name:"radar-line"})),this.lineSelection=Selection13.select(this.lineGroup,Path11),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new Marker4}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===ChartAxisDirection26.X)return e.getDomain(this,"angleValue","value",i);{const o=e.getDomain(this,"radiusValue","value",i),s=extent2(o.length===0?o:[0].concat(o));return fixNumericExtent9(s)}}async processData(t){if(!this.properties.isValid())return;const{angleKey:e,radiusKey:i}=this.properties,o=[];this.ctx.animationManager.isSkipped()||o.push(animationValidation8());const s=this.axes[ChartAxisDirection26.Y]?.scale.type,a=this.axes[ChartAxisDirection26.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[valueProperty17(e,a,{id:"angleValue"}),valueProperty17(i,s,{id:"radiusValue",invalidValue:void 0}),...o]}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[ChartAxisDirection26.Y];return t instanceof PolarAxis2?this.radius*t.innerRadiusRatio:0}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}createNodeData(){const{processedData:t,dataModel:e}=this;if(!t||!e||!this.properties.isValid())return;const{angleKey:i,radiusKey:o,angleName:s,radiusName:a,marker:r,label:n}=this.properties,l=this.axes[ChartAxisDirection26.X]?.scale,c=this.axes[ChartAxisDirection26.Y]?.scale;if(!l||!c)return;const h=e.resolveColumnById(this,"angleValue",t),u=e.resolveColumnById(this,"radiusValue",t),p=this.getAxisInnerRadius(),g=(t.dataSources.get(this.id)??[]).map((f,y)=>{const m=h[y],b=u[y],x=l.convert(m),S=this.radius+p-c.convert(b),v=Math.cos(x),T=Math.sin(x),D=v*S,k=T*S;let A;if(n.enabled){const M=this.getLabelText(n,{value:b,datum:f,angleKey:i,radiusKey:o,angleName:s,radiusName:a});if(M){let _="right";(0,import_ag_charts_core91.isNumberEqual)(v,0)?_="center":v>0&&(_="left");let O="bottom";(0,import_ag_charts_core91.isNumberEqual)(T,0)?O="middle":T>0&&(O="top"),A={x:D+v*r.size,y:k+T*r.size,text:M,textAlign:_,textBaseline:O}}}return{series:this,datum:f,datumIndex:y,index:y,point:{x:D,y:k,size:r.size},midPoint:{x:D,y:k},label:A,angleValue:m,radiusValue:b,missing:!(0,import_ag_charts_core91.isFiniteNumber)(x)||!(0,import_ag_charts_core91.isFiniteNumber)(S)}});return{itemId:o,nodeData:g,labelData:g}}update({seriesRect:t}){const e=this.checkResize(t),i=!this.ctx.animationManager.isSkipped(),{series:o}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&o===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Selection13.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){return t?.fill??this.properties.marker.fill}getDatumStylerProperties(t){const{id:e,properties:i}=this,{angleKey:o,radiusKey:s}=i;return{seriesId:e,datum:t,angleKey:o,radiusKey:s}}updateMarkers(t,e){const{visible:i}=this,{marker:o,stroke:s,strokeWidth:a,strokeOpacity:r,highlightStyle:n}=this.properties;let l=[];if(i&&o.shape&&o.enabled)if(e){const u=this.ctx.highlightManager?.getActiveHighlight();u?.datum&&(l=[u])}else l=this.nodeData;const c=mergeDefaults6(e&&n.item,o.getStyle(),{stroke:s,strokeWidth:a,strokeOpacity:r}),h=this.getShapeFillBBox();t.update(l).each((u,p)=>{this.updateMarkerStyle(o,u,p.datum,p.point,this.getDatumStylerProperties(p),e,c,h)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:h,marker:u}=a,p=s[ChartAxisDirection26.X],d=s[ChartAxisDirection26.Y];if(!i||!o||!p||!d)return;const g=o.dataSources.get(this.id)?.[t],f=i.resolveColumnById(this,"angleValue",o)[t],y=i.resolveColumnById(this,"radiusValue",o)[t];if(f==null)return;const m=this.getMarkerStyle(u,g,this.getDatumStylerProperties(g),!1);return h.formatTooltip(this.properties,{heading:p.formatDatum(f),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:d.formatDatum(y)}]},{seriesId:e,datum:g,title:n,angleKey:r,radiusKey:l,angleName:n,radiusName:c,...m})}legendItemSymbol(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,marker:s}=this.properties;return{marker:getShapeStyle15({shape:s.shape,enabled:s.enabled||e<=0,fill:this.getMarkerFill()??s.stroke??t??"rgba(0, 0, 0, 0)",stroke:s.stroke??t??"rgba(0, 0, 0, 0)",fillOpacity:s.fillOpacity,strokeOpacity:s.strokeOpacity,strokeWidth:s.strokeWidth,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset},s.fillGradientDefaults,s.fillPatternDefaults),line:{stroke:t,strokeOpacity:i,strokeWidth:e,lineDash:o}}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,ctx:{legendManager:i},visible:o}=this,{radiusKey:s,radiusName:a,showInLegend:r}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:o&&i.getItemEnabled({seriesId:e,itemId:s}),label:{text:a??s},symbol:this.legendItemSymbol(),hideInLegend:!r}]}pickNodeClosestDatum(t){const{nodeData:e,centerX:i,centerY:o}=this,{x:s,y:a}=t,r=this.radius;if(Math.sqrt((s-i)**2+(a-o)**2)>r+this.properties.marker.size)return;let l=1/0,c;for(const h of e){const{point:{x:u=NaN,y:p=NaN}={}}=h;if(isNaN(u)||isNaN(p))continue;const d=Math.sqrt((t.x-u-i)**2+(t.y-p-o)**2);d<l&&(l=d,c=h)}if(c){const h=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:h}}}computeLabelsBBox(){const{label:t}=this.properties;this.maybeRefreshNodeData();const e=[],i=new Text7;return this.nodeData.forEach(o=>{if(!t.enabled||!o.label)return;i.text=o.label.text,i.x=o.label.x,i.y=o.label.y,i.setFont(t),i.setAlign(o.label);const s=i.getBBox();e.push(s)}),e.length===0?null:BBox22.merge(e)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){const t=this.getLineNode();t&&(t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=PointerEvents10.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset)}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(t.length===0)return[];const o=this.axes[ChartAxisDirection26.Y],a=this.axes[ChartAxisDirection26.X]?.isReversed(),n=o?.isReversed()&&!a?[...t].reverse():t,l=[];let c=!1,h;return n.forEach((u,p)=>{let{x:d,y:g}=u.point;const f=isNaN(d)||isNaN(g);f||(h??(h=u)),f&&!i&&(d=0,g=0);const y=p===0||!e&&!i&&(f||c);l.push({x:d,y:g,moveTo:y}),c=f}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(t,e,i){const{path:o}=t;o.clear(!0);const s=this.getAxisInnerRadius(),a=this.axes[ChartAxisDirection26.Y],n=a?.isReversed()?this.radius+s-a?.scale.convert(0):s;e.forEach(l=>{const{x:c,y:h,arc:u,radius:p=0,startAngle:d=0,endAngle:g=0,moveTo:f}=l,y=Math.atan2(h,c),m=n*Math.cos(y),b=n*Math.sin(y),x=i,S=m*(1-x)+c*x,v=b*(1-x)+h*x;u?o.arc(c,h,p,d,g):f?o.moveTo(S,v):o.lineTo(S,v)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:o=>this.animatePaths(o),onStop:()=>this.animatePaths(1)}),markerFadeInAnimation2(this,i,"added",t),seriesLabelFadeInAnimation7(this,"labels",i,e)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear(!0);for(const{x:o,y:s,moveTo:a}of i)a?e.moveTo(o,s):e.lineTo(o,s);t.checkPathDirty()}}getFormattedMarkerStyle(t){const{angleKey:e,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,t.datum,{angleKey:e,radiusKey:i},!0)}computeFocusBounds(t){return computeMarkerFocusBounds3(this,t)}};RadarSeries.className="RadarSeries";var import_ag_charts_community259=require("ag-charts-community"),{FillGradientDefaults:FillGradientDefaults14,FillPatternDefaults:FillPatternDefaults14,RATIO:RATIO31,COLOR_STRING:COLOR_STRING28,TempValidate:TempValidate77,OR:OR19,COLOR_GRADIENT:COLOR_GRADIENT14,COLOR_PATTERN:COLOR_PATTERN14,OBJECT:OBJECT43}=import_ag_charts_community259._ModuleSupport,RadarAreaSeriesProperties=class extends RadarSeriesProperties{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new FillGradientDefaults14,this.fillPatternDefaults=new FillPatternDefaults14,this.fillOpacity=1}};__decorateClass([TempValidate77(OR19(COLOR_GRADIENT14,COLOR_PATTERN14,COLOR_STRING28))],RadarAreaSeriesProperties.prototype,"fill",2),__decorateClass([TempValidate77(OBJECT43)],RadarAreaSeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate77(OBJECT43)],RadarAreaSeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate77(RATIO31)],RadarAreaSeriesProperties.prototype,"fillOpacity",2);var{Group:Group19,Path:Path12,PointerEvents:PointerEvents11,Selection:Selection14,ChartAxisDirection:ChartAxisDirection27,applyShapeStyle:applyShapeStyle10,getShapeFill:getShapeFill4,getShapeStyle:getShapeStyle16}=import_ag_charts_community260._ModuleSupport,RadarAreaSeries=class extends RadarSeries{constructor(t){super(t),this.properties=new RadarAreaSeriesProperties,this.areaGroup=this.contentGroup.appendChild(new Group19({name:"radar-area"})),this.areaSelection=Selection14.select(this.areaGroup,Path12),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(t){return t?.fill??this.properties.marker.fill??this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode(),{fillOpacity:e,fill:i}=this.properties,o=getShapeStyle16({fill:i,fillOpacity:e},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults);applyShapeStyle10(t,o,void 0,this.getShapeFillBBox()),t.pointerEvents=PointerEvents11.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){const t=this.getLinePoints(),e=r=>{const n=this.axes[r];return n instanceof import_ag_charts_community260._ModuleSupport.PolarAxis?n:void 0},i=e(ChartAxisDirection27.Y),o=e(ChartAxisDirection27.X);if(!i?.isReversed())return t;const a=o?.getAxisLinePoints()?.points??[];return t.concat(...a)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints();t.fill=getShapeFill4(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults),t.fillOpacity=this.properties.fillOpacity,t.stroke=void 0,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.lineJoin=t.lineCap="round",e.clear(!0),i.forEach(({x:o,y:s,moveTo:a,arc:r,radius:n=0,startAngle:l=0,endAngle:c=0})=>{r?e.arc(o,s,n,l,c):a?e.moveTo(o,s):e.lineTo(o,s)}),e.closePath(),t.checkPathDirty()}}};RadarAreaSeries.className="RadarAreaSeries",RadarAreaSeries.type="radar-area";var import_ag_charts_community261=require("ag-charts-community"),import_ag_charts_core92=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs18,seriesLabelOptionsDefs:seriesLabelOptionsDefs12,markerOptionsDefs:markerOptionsDefs3,tooltipOptionsDefs:tooltipOptionsDefs17}=import_ag_charts_community261._ModuleSupport,radarAreaSeriesOptionsDef={type:(0,import_ag_charts_core92.required)((0,import_ag_charts_core92.constant)("radar-area")),angleKey:(0,import_ag_charts_core92.required)(import_ag_charts_core92.string),radiusKey:(0,import_ag_charts_core92.required)(import_ag_charts_core92.string),angleName:import_ag_charts_core92.string,radiusName:import_ag_charts_core92.string,connectMissingData:import_ag_charts_core92.boolean,marker:markerOptionsDefs3,label:seriesLabelOptionsDefs12,tooltip:tooltipOptionsDefs17,...commonSeriesOptionsDefs18,...import_ag_charts_core92.fillOptionsDef,...import_ag_charts_core92.strokeOptionsDef,...import_ag_charts_core92.lineDashOptionsDef},{ThemeConstants:{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE4}}=import_ag_charts_community262._ModuleSupport,RadarAreaModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:t=>new RadarAreaSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:POLAR_AXIS_TYPE4.ANGLE_CATEGORY},{type:POLAR_AXIS_TYPE4.RADIUS_NUMBER}],themeTemplate:RADAR_AREA_SERIES_THEME},RadarAreaSeriesModule={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:radarAreaSeriesOptionsDef,create:t=>new RadarAreaSeries(t)},import_ag_charts_community264=require("ag-charts-community"),RadarLineSeries=class extends RadarSeries{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};RadarLineSeries.className="RadarLineSeries",RadarLineSeries.type="radar-line";var import_ag_charts_community263=require("ag-charts-community"),import_ag_charts_core93=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs19,seriesLabelOptionsDefs:seriesLabelOptionsDefs13,markerOptionsDefs:markerOptionsDefs4,tooltipOptionsDefs:tooltipOptionsDefs18}=import_ag_charts_community263._ModuleSupport,radarLineSeriesOptionsDef={type:(0,import_ag_charts_core93.required)((0,import_ag_charts_core93.constant)("radar-line")),angleKey:(0,import_ag_charts_core93.required)(import_ag_charts_core93.string),radiusKey:(0,import_ag_charts_core93.required)(import_ag_charts_core93.string),angleName:import_ag_charts_core93.string,radiusName:import_ag_charts_core93.string,connectMissingData:import_ag_charts_core93.boolean,marker:markerOptionsDefs4,label:seriesLabelOptionsDefs13,tooltip:tooltipOptionsDefs18,...commonSeriesOptionsDefs19,...import_ag_charts_core93.strokeOptionsDef,...import_ag_charts_core93.lineDashOptionsDef},{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE5}=import_ag_charts_community264._ModuleSupport.ThemeConstants,RadarLineModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:t=>new RadarLineSeries(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:POLAR_AXIS_TYPE5.ANGLE_CATEGORY},{type:POLAR_AXIS_TYPE5.RADIUS_NUMBER}],themeTemplate:RADAR_LINE_SERIES_THEME},RadarLineSeriesModule={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:radarLineSeriesOptionsDef,create:t=>new RadarLineSeries(t)},import_ag_charts_community270=require("ag-charts-community"),import_ag_charts_community267=require("ag-charts-community"),import_ag_charts_core94=require("ag-charts-core"),import_ag_charts_community265=require("ag-charts-community"),{SeriesProperties:SeriesProperties11,FillGradientDefaults:FillGradientDefaults15,FillPatternDefaults:FillPatternDefaults15,SeriesTooltip:SeriesTooltip20,TempValidate:TempValidate78,COLOR_STRING:COLOR_STRING29,NUMBER:NUMBER21,FUNCTION:FUNCTION20,LINE_DASH:LINE_DASH23,OBJECT:OBJECT44,POSITIVE_NUMBER:POSITIVE_NUMBER35,RATIO:RATIO32,STRING:STRING40,Label:Label15,COLOR_GRADIENT:COLOR_GRADIENT15,COLOR_PATTERN:COLOR_PATTERN15,OR:OR20}=import_ag_charts_community265._ModuleSupport,RadialBarSeriesProperties=class extends SeriesProperties11{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new FillGradientDefaults15,this.fillPatternDefaults=new FillPatternDefaults15,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new Label15,this.tooltip=new SeriesTooltip20}};__decorateClass([TempValidate78(STRING40)],RadialBarSeriesProperties.prototype,"angleKey",2),__decorateClass([TempValidate78(STRING40)],RadialBarSeriesProperties.prototype,"radiusKey",2),__decorateClass([TempValidate78(STRING40,{optional:!0})],RadialBarSeriesProperties.prototype,"angleName",2),__decorateClass([TempValidate78(STRING40,{optional:!0})],RadialBarSeriesProperties.prototype,"radiusName",2),__decorateClass([TempValidate78(OR20(COLOR_GRADIENT15,COLOR_PATTERN15,COLOR_STRING29))],RadialBarSeriesProperties.prototype,"fill",2),__decorateClass([TempValidate78(OBJECT44)],RadialBarSeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate78(OBJECT44)],RadialBarSeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate78(RATIO32)],RadialBarSeriesProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate78(COLOR_STRING29)],RadialBarSeriesProperties.prototype,"stroke",2),__decorateClass([TempValidate78(POSITIVE_NUMBER35)],RadialBarSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate78(RATIO32)],RadialBarSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate78(LINE_DASH23)],RadialBarSeriesProperties.prototype,"lineDash",2),__decorateClass([TempValidate78(POSITIVE_NUMBER35)],RadialBarSeriesProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate78(POSITIVE_NUMBER35)],RadialBarSeriesProperties.prototype,"cornerRadius",2),__decorateClass([TempValidate78(FUNCTION20,{optional:!0})],RadialBarSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate78(NUMBER21)],RadialBarSeriesProperties.prototype,"rotation",2),__decorateClass([TempValidate78(STRING40,{optional:!0})],RadialBarSeriesProperties.prototype,"stackGroup",2),__decorateClass([TempValidate78(NUMBER21,{optional:!0})],RadialBarSeriesProperties.prototype,"normalizedTo",2),__decorateClass([TempValidate78(OBJECT44)],RadialBarSeriesProperties.prototype,"label",2),__decorateClass([TempValidate78(OBJECT44)],RadialBarSeriesProperties.prototype,"tooltip",2);var import_ag_charts_community266=require("ag-charts-community"),{SectorBox:SectorBox3,motion:motion9}=import_ag_charts_community266._ModuleSupport;function fixRadialBarAnimationStatus(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function prepareRadialBarSeriesAnimationFunctions(t){return{toFn:(o,s,a)=>{let r,n,l,c,h;return a==="removed"?(r=t,n=t,l=s.innerRadius,c=s.outerRadius,h=new SectorBox3(r,n,l,c)):(r=s.startAngle,n=s.endAngle,l=isNaN(s.innerRadius)?o.innerRadius:s.innerRadius,c=isNaN(s.outerRadius)?o.outerRadius:s.outerRadius,h=s.clipSector),{startAngle:r,endAngle:n,innerRadius:l,outerRadius:c,clipSector:h}},fromFn:(o,s,a)=>{a=fixRadialBarAnimationStatus(o,s,a);let r,n,l,c,h;a==="removed"||a==="updated"?(r=o.startAngle,n=o.endAngle,l=o.innerRadius,c=o.outerRadius,h=o.clipSector):(r=t,n=t,l=s.innerRadius,c=s.outerRadius),h??(h=new SectorBox3(r,n,l,c));const u=motion9.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:r,endAngle:n,innerRadius:l,outerRadius:c,clipSector:h,phase:u}}}}function resetRadialBarSelectionsFn(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clipSector:e.clipSector}}var{ChartAxisDirection:ChartAxisDirection28,PolarAxis:PolarAxis3,diff:diff7,groupAccumulativeValueProperty:groupAccumulativeValueProperty3,keyProperty:keyProperty10,normaliseGroupTo:normaliseGroupTo2,valueProperty:valueProperty18,fixNumericExtent:fixNumericExtent10,resetLabelFn:resetLabelFn6,seriesLabelFadeInAnimation:seriesLabelFadeInAnimation8,seriesLabelFadeOutAnimation:seriesLabelFadeOutAnimation2,animationValidation:animationValidation9,angleBetween:angleBetween3,createDatumId:createDatumId20,CategoryScale:CategoryScale4,Sector:Sector5,SectorBox:SectorBox4,motion:motion10,isGradientFill:isGradientFill4,applyShapeStyle:applyShapeStyle11,getShapeStyle:getShapeStyle17}=import_ag_charts_community267._ModuleSupport,RadialBarSeriesNodeEvent=class extends import_ag_charts_community267._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},RadialBarSeries=class extends import_ag_charts_community267._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,categoryKey:"radiusValue",useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:resetRadialBarSelectionsFn,label:resetLabelFn6}}),this.properties=new RadialBarSeriesProperties,this.NodeEvent=RadialBarSeriesNodeEvent,this.groupScale=new CategoryScale4,this.circleCache={r:0,cx:0,cy:0}}get defaultShapeStyle(){const t=this.axes[ChartAxisDirection28.X]?.scale;return{...this.properties.fillGradientDefaults.toJson(),rotation:import_ag_charts_community267._ModuleSupport.toDegrees(t.range[0])+90}}nodeFactory(){return new Sector5}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===ChartAxisDirection28.X){const o=e.getDomain(this,"angleValue-end","value",i),s=[o[0]>0?0:o[0],o[1]<0?0:o[1]];return fixNumericExtent10(s)}else return e.getDomain(this,"radiusValue","key",i)}async processData(t){const{angleKey:e,radiusKey:i,normalizedTo:o}=this.properties,s=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid())return;const a=this.getStackId(),r=`${a}-trailing`,n=[];(0,import_ag_charts_core94.isDefined)(o)&&n.push(normaliseGroupTo2([a,r],Math.abs(o))),s&&(this.processedData&&n.push(diff7(this.id,this.processedData)),n.push(animationValidation9()));const l=this.visible?{}:{forceValue:0},c=this.axes[ChartAxisDirection28.Y]?.scale.type,h=this.axes[ChartAxisDirection28.X]?.scale.type;await this.requestDataModel(t,this.data,{props:[keyProperty10(i,c,{id:"radiusValue"}),valueProperty18(e,h,{id:"angleValue-raw",invalidValue:null,...l}),...groupAccumulativeValueProperty3(e,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},h),...groupAccumulativeValueProperty3(e,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},h),...n],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:e=[]}=this.createNodeData()??{};this.nodeData=e,this.nodeDataRefresh=!1}getAxisInnerRadius(){const t=this.axes[ChartAxisDirection28.Y];return t instanceof PolarAxis3?this.radius*t.innerRadiusRatio:0}createNodeData(){const{processedData:t,dataModel:e}=this;if(!e||!t||t.type!=="grouped"||!this.properties.isValid())return;const i=this.axes[ChartAxisDirection28.X],o=this.axes[ChartAxisDirection28.Y],s=i?.scale,a=o?.scale;if(!s||!a)return;const r=e.resolveKeysById(this,"radiusValue",t),n=e.resolveColumnById(this,"angleValue-start",t),l=e.resolveColumnById(this,"angleValue-end",t),c=e.resolveColumnById(this,"angleValue-raw",t),h=e.resolveProcessedDataIndexById(this,"angleValue-range");let u=0;o instanceof RadiusCategoryAxis&&(u=o.groupPaddingInner);const{groupScale:p}=this,{index:d,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);p.domain=Array.from({length:g}).map((w,L)=>String(L)),p.range=[0,Math.abs(a.bandwidth??0)],p.paddingInner=g>1?u:0;const f=p.bandwidth>=1?p.bandwidth:p.rawBandwidth,y=i.isReversed(),m=o.isReversed(),b=m?this.radius:this.getAxisInnerRadius(),S=(m?this.getAxisInnerRadius():this.radius)+b,{angleKey:v,radiusKey:T,angleName:D,radiusName:k,label:A}=this.properties,M=(w,L,P,z)=>{const R=this.getLabelText(A,{value:L,datum:w,angleKey:v,radiusKey:T,angleName:D,radiusName:k});if(R)return{x:P,y:z,text:R,textAlign:"center",textBaseline:"middle"}},_=[],O={itemId:T,nodeData:_,labelData:_};if(!this.visible)return O;const{dataSources:C}=t,I=C.get(this.id)??[];for(const{datumIndex:w,group:L}of e.forEachGroupDatum(this,t)){const P=I[w],z=r[w];if(z==null)return;const R=c[w],B=n[w],E=l[w],F=R>=0&&!Object.is(R,-0),V=L.aggregation[h][F?1:0],G=F===y;let W=s.convert(B,!0),H=s.convert(E,!0),q=s.convert(0,!0),j=s.convert(V,!0);G&&([q,j]=[j,q],[W,H]=[H,W]);const X=S-a.convert(z)+p.convert(String(d)),Y=X+f,U=(X+Y)/2,Z=W+angleBetween3(W,H)/2,J=Math.cos(Z)*U,K=Math.sin(Z)*U,at=this.properties.label.enabled?M(P,R,J,K):void 0,rt=new SectorBox4(W,H,X,Y);_.push({series:this,datum:P,datumIndex:w,point:{x:J,y:K,size:0},midPoint:{x:J,y:K},label:at,angleValue:R,radiusValue:z,innerRadius:X,outerRadius:Y,startAngle:q,endAngle:j,clipSector:rt,reversed:G,index:w})}return O}update({seriesRect:t}){const e=this.checkResize(t);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle.item:void 0;return getShapeStyle17({fill:i?.fill??e.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke??e.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity,lineDash:i?.lineDash??e.lineDash,lineDashOffset:i?.lineDashOffset??e.lineDashOffset,cornerRadius:e.cornerRadius},this.defaultShapeStyle,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o){const{id:s,properties:a}=this,{angleKey:r,radiusKey:n,itemStyler:l}=a;let c;return l!=null&&(c=this.cachedDatumCallback(createDatumId20(t,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:s,datum:e,highlighted:o,angleKey:r,radiusKey:n,...i}))),getShapeStyle17(c,this.defaultShapeStyle,this.properties.fillPatternDefaults)}updateSectorSelection(t,e){let i=[];if(e){const a=this.ctx.highlightManager?.getActiveHighlight();a?.datum&&a.series===this&&i.push(a)}else i=this.nodeData;const o=this.getItemBaseStyle(e),s=this.getShapeFillBBox();t.update(i,void 0,a=>this.getDatumId(a)).each((a,r)=>{const{datum:n,datumIndex:l}=r,c=this.getItemStyleOverrides(String(l),n,o,e),h=c?.cornerRadius??o.cornerRadius,u=c?.fill??o.fill,p=import_ag_charts_community267._ModuleSupport.isGradientFill(u)&&u.bounds!=="item"?{centerX:0,centerY:0}:void 0;applyShapeStyle11(a,o,c,s,p),a.lineJoin="round",a.inset=a.stroke!=null?a.strokeWidth/2:0,a.startInnerCornerRadius=n.reversed?h:0,a.startOuterCornerRadius=n.reversed?h:0,a.endInnerCornerRadius=n.reversed?0:h,a.endOuterCornerRadius=n.reversed?0:h,e&&(a.startAngle=r.startAngle,a.endAngle=r.endAngle,a.clipSector=r.clipSector,a.innerRadius=r.innerRadius,a.outerRadius=r.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){const t=this.axes[ChartAxisDirection28.X]?.scale;let e=0;if(!t)return prepareRadialBarSeriesAnimationFunctions(e);const i=Math.min(t.domain[0],t.domain[1]),o=Math.max(t.domain[0],t.domain[1]);return i<=0&&o>=0&&(e=t.convert(0)),prepareRadialBarSeriesAnimationFunctions(e)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();motion10.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),seriesLabelFadeInAnimation8(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();motion10.fromToMotion(this.id,"datums",e,[t],i),seriesLabelFadeOutAnimation2(this,"labels",e,this.labelSelection)}getTooltipContent(t){const{id:e,dataModel:i,processedData:o,axes:s,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:h}=a,u=s[ChartAxisDirection28.X],p=s[ChartAxisDirection28.Y];if(!i||!o||!u||!p)return;const d=o.dataSources.get(this.id)?.[t],g=i.resolveKeysById(this,"radiusValue",o)[t],f=i.resolveColumnById(this,"angleValue-raw",o)[t];if(g==null)return;const y=this.getItemBaseStyle(!1);return Object.assign(y,this.getItemStyleOverrides(String(t),t,y,!1)),h.formatTooltip(this.properties,{heading:p.formatDatum(g),symbol:this.legendItemSymbol(),data:[{label:n,fallbackLabel:r,value:u.formatDatum(f)}]},{seriesId:e,datum:d,title:n,angleKey:r,angleName:n,radiusKey:l,radiusName:c,...y})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}legendItemSymbol(){const{fill:t,stroke:e,fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r,fillPatternDefaults:n}=this.properties,l=getShapeStyle17({fill:t??"rgba(0, 0, 0, 0)",stroke:e??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r},this.defaultShapeStyle,n);return isGradientFill4(l.fill)&&(l.fill={...l.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:l}}getLegendData(t){if(!this.properties.isValid()||t!=="category")return[];const{id:e,visible:i}=this,{angleKey:o,angleName:s,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:i,label:{text:s??o},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(t){return createDatumId20(t.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}};RadialBarSeries.className="RadialBarSeries",RadialBarSeries.type="radial-bar";var import_ag_charts_community268=require("ag-charts-community"),import_ag_charts_core95=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs20,seriesLabelOptionsDefs:seriesLabelOptionsDefs14,tooltipOptionsDefs:tooltipOptionsDefs19}=import_ag_charts_community268._ModuleSupport,radialBarSeriesOptionsDef={type:(0,import_ag_charts_core95.required)((0,import_ag_charts_core95.constant)("radial-bar")),angleKey:(0,import_ag_charts_core95.required)(import_ag_charts_core95.string),radiusKey:(0,import_ag_charts_core95.required)(import_ag_charts_core95.string),angleName:import_ag_charts_core95.string,radiusName:import_ag_charts_core95.string,grouped:import_ag_charts_core95.boolean,stacked:import_ag_charts_core95.boolean,stackGroup:import_ag_charts_core95.string,normalizedTo:import_ag_charts_core95.number,cornerRadius:import_ag_charts_core95.positiveNumber,itemStyler:import_ag_charts_core95.callback,label:seriesLabelOptionsDefs14,tooltip:tooltipOptionsDefs19,...commonSeriesOptionsDefs20,...import_ag_charts_core95.fillOptionsDef,...import_ag_charts_core95.strokeOptionsDef,...import_ag_charts_core95.lineDashOptionsDef},import_ag_charts_community269=require("ag-charts-community"),{ThemeConstants:{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE6}}=import_ag_charts_community269._ModuleSupport,RADIAL_BAR_SERIES_THEME={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"conic",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community269._ModuleSupport.FILL_PATTERN_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}}},axes:{[POLAR_AXIS_TYPE6.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE7}=import_ag_charts_community270._ModuleSupport.ThemeConstants,RadialBarModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:t=>new RadialBarSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:POLAR_AXIS_TYPE7.ANGLE_NUMBER},{type:POLAR_AXIS_TYPE7.RADIUS_CATEGORY}],themeTemplate:RADIAL_BAR_SERIES_THEME,stackable:!0,groupable:!0},RadialBarSeriesModule={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:radialBarSeriesOptionsDef,create:t=>new RadialBarSeries(t)},import_ag_charts_community275=require("ag-charts-community"),import_ag_charts_community272=require("ag-charts-community"),import_ag_charts_community271=require("ag-charts-community"),{TempValidate:TempValidate79,RATIO:RATIO33}=import_ag_charts_community271._ModuleSupport,RadialColumnSeriesProperties=class extends RadialColumnSeriesBaseProperties{};__decorateClass([TempValidate79(RATIO33,{optional:!0})],RadialColumnSeriesProperties.prototype,"columnWidthRatio",2),__decorateClass([TempValidate79(RATIO33,{optional:!0})],RadialColumnSeriesProperties.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:ChartAxisDirection29,PolarAxis:PolarAxis4,RadialColumnShape,getRadialColumnWidth}=import_ag_charts_community272._ModuleSupport,RadialColumnSeries=class extends RadialColumnSeriesBase{constructor(t){super(t,{animationResetFns:{item:resetRadialColumnSelectionFn}}),this.properties=new RadialColumnSeriesProperties}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new RadialColumnShape}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return prepareRadialColumnAnimationFunctions(t)}isRadiusAxisCircle(){const t=this.axes[ChartAxisDirection29.Y];return t instanceof PolarAxis4?t.shape==="circle":!1}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:o=.5}=this.properties;return getRadialColumnWidth(t,e,this.radius,i,o)}};RadialColumnSeries.className="RadialColumnSeries",RadialColumnSeries.type="radial-column";var import_ag_charts_community273=require("ag-charts-community"),import_ag_charts_core96=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs21,seriesLabelOptionsDefs:seriesLabelOptionsDefs15,tooltipOptionsDefs:tooltipOptionsDefs20}=import_ag_charts_community273._ModuleSupport,radialColumnSeriesOptionsDef={type:(0,import_ag_charts_core96.required)((0,import_ag_charts_core96.constant)("radial-column")),angleKey:(0,import_ag_charts_core96.required)(import_ag_charts_core96.string),radiusKey:(0,import_ag_charts_core96.required)(import_ag_charts_core96.string),angleName:import_ag_charts_core96.string,radiusName:import_ag_charts_core96.string,grouped:import_ag_charts_core96.boolean,stacked:import_ag_charts_core96.boolean,stackGroup:import_ag_charts_core96.string,normalizedTo:import_ag_charts_core96.number,cornerRadius:import_ag_charts_core96.positiveNumber,columnWidthRatio:import_ag_charts_core96.ratio,maxColumnWidthRatio:import_ag_charts_core96.ratio,itemStyler:import_ag_charts_core96.callback,label:seriesLabelOptionsDefs15,tooltip:tooltipOptionsDefs20,...commonSeriesOptionsDefs21,...import_ag_charts_core96.fillOptionsDef,...import_ag_charts_core96.strokeOptionsDef,...import_ag_charts_core96.lineDashOptionsDef},import_ag_charts_community274=require("ag-charts-community"),{ThemeConstants:{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE8,POLAR_AXIS_SHAPE:POLAR_AXIS_SHAPE2}}=import_ag_charts_community274._ModuleSupport,axisShape2={$path:["./shape",POLAR_AXIS_SHAPE2.CIRCLE,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]},RADIAL_COLUMN_SERIES_THEME={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community274._ModuleSupport.FILL_PATTERN_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}},axes:{[POLAR_AXIS_TYPE8.ANGLE_CATEGORY]:{shape:axisShape2,groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[POLAR_AXIS_TYPE8.RADIUS_NUMBER]:{shape:axisShape2,innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:POLAR_AXIS_TYPE9}=import_ag_charts_community275._ModuleSupport.ThemeConstants,RadialColumnModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:t=>new RadialColumnSeries(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:POLAR_AXIS_TYPE9.ANGLE_CATEGORY},{type:POLAR_AXIS_TYPE9.RADIUS_NUMBER}],themeTemplate:RADIAL_COLUMN_SERIES_THEME,stackable:!0,groupable:!0},RadialColumnSeriesModule={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:radialColumnSeriesOptionsDef,create:t=>new RadialColumnSeries(t)},import_ag_charts_community281=require("ag-charts-community"),import_ag_charts_community279=require("ag-charts-community"),import_ag_charts_core98=require("ag-charts-core"),import_ag_charts_community276=require("ag-charts-community"),{SvgPath,Rotatable,Translatable,Scalable}=import_ag_charts_community276._ModuleSupport,RadialGaugeNeedle=class extends Rotatable(Scalable(Translatable(SvgPath))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};RadialGaugeNeedle.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";var import_ag_charts_community277=require("ag-charts-community"),import_ag_charts_core97=require("ag-charts-core"),{BaseProperties:BaseProperties27,SeriesTooltip:SeriesTooltip21,SeriesProperties:SeriesProperties12,PropertiesArray:PropertiesArray8,AxisLabel:AxisLabel5,TempValidate:TempValidate80,BOOLEAN:BOOLEAN35,COLOR_STRING:COLOR_STRING30,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY12,FUNCTION:FUNCTION21,LINE_DASH:LINE_DASH24,NUMBER:NUMBER22,NUMBER_ARRAY:NUMBER_ARRAY5,OBJECT_ARRAY:OBJECT_ARRAY3,OBJECT:OBJECT45,POSITIVE_NUMBER:POSITIVE_NUMBER36,RATIO:RATIO34,STRING:STRING41,UNION:UNION17,AND:AND10,LESS_THAN:LESS_THAN4,GREATER_THAN:GREATER_THAN4,Label:Label16}=import_ag_charts_community277._ModuleSupport,TARGET_PLACEMENT2=UNION17(["inside","outside","middle"],"a placement"),RadialGaugeDefaultTargetLabelProperties=class extends Label16{};__decorateClass([TempValidate80(NUMBER22,{optional:!0})],RadialGaugeDefaultTargetLabelProperties.prototype,"spacing",2);var RadialGaugeTargetProperties=class extends BaseProperties27{constructor(){super(...arguments),this.label=new RadialGaugeDefaultTargetLabelProperties}};__decorateClass([TempValidate80(STRING41,{optional:!0})],RadialGaugeTargetProperties.prototype,"text",2),__decorateClass([TempValidate80(NUMBER22,{optional:!0})],RadialGaugeTargetProperties.prototype,"value",2),__decorateClass([TempValidate80(TARGET_MARKER_SHAPE,{optional:!0})],RadialGaugeTargetProperties.prototype,"shape",2),__decorateClass([TempValidate80(TARGET_PLACEMENT2,{optional:!0})],RadialGaugeTargetProperties.prototype,"placement",2),__decorateClass([TempValidate80(NUMBER22,{optional:!0})],RadialGaugeTargetProperties.prototype,"spacing",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36,{optional:!0})],RadialGaugeTargetProperties.prototype,"size",2),__decorateClass([TempValidate80(NUMBER22,{optional:!0})],RadialGaugeTargetProperties.prototype,"rotation",2),__decorateClass([TempValidate80(COLOR_STRING30,{optional:!0})],RadialGaugeTargetProperties.prototype,"fill",2),__decorateClass([TempValidate80(RATIO34,{optional:!0})],RadialGaugeTargetProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate80(COLOR_STRING30,{optional:!0})],RadialGaugeTargetProperties.prototype,"stroke",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36,{optional:!0})],RadialGaugeTargetProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate80(RATIO34,{optional:!0})],RadialGaugeTargetProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate80(LINE_DASH24,{optional:!0})],RadialGaugeTargetProperties.prototype,"lineDash",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36,{optional:!0})],RadialGaugeTargetProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeTargetProperties.prototype,"label",2);var RadialGaugeBarProperties=class extends BaseProperties27{constructor(){super(...arguments),this.enabled=!0,this.fills=new PropertiesArray8(import_ag_charts_community277._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate80(BOOLEAN35)],RadialGaugeBarProperties.prototype,"enabled",2),__decorateClass([TempValidate80(OBJECT_ARRAY3)],RadialGaugeBarProperties.prototype,"fills",2),__decorateClass([TempValidate80(FILL_MODE)],RadialGaugeBarProperties.prototype,"fillMode",2),__decorateClass([TempValidate80(COLOR_STRING30,{optional:!0})],RadialGaugeBarProperties.prototype,"fill",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeBarProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate80(COLOR_STRING30,{optional:!0})],RadialGaugeBarProperties.prototype,"stroke",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36,{optional:!0})],RadialGaugeBarProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeBarProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate80(LINE_DASH24)],RadialGaugeBarProperties.prototype,"lineDash",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36)],RadialGaugeBarProperties.prototype,"lineDashOffset",2);var RadialGaugeScaleIntervalProperties=class extends BaseProperties27{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};__decorateClass([TempValidate80(NUMBER_ARRAY5,{optional:!0})],RadialGaugeScaleIntervalProperties.prototype,"values",2),__decorateClass([TempValidate80(NUMBER22,{optional:!0})],RadialGaugeScaleIntervalProperties.prototype,"step",2),__decorateClass([TempValidate80(NUMBER22)],RadialGaugeScaleIntervalProperties.prototype,"minSpacing",2),__decorateClass([TempValidate80(NUMBER22)],RadialGaugeScaleIntervalProperties.prototype,"maxSpacing",2);var RadialGaugeScaleLabelProperties=class extends AxisLabel5{},RadialGaugeScaleProperties=class extends BaseProperties27{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new PropertiesArray8(import_ag_charts_community277._ModuleSupport.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new RadialGaugeScaleIntervalProperties,this.label=new RadialGaugeScaleLabelProperties}};__decorateClass([TempValidate80(AND10(NUMBER22,LESS_THAN4("max")))],RadialGaugeScaleProperties.prototype,"min",2),__decorateClass([TempValidate80(AND10(NUMBER22,GREATER_THAN4("min")))],RadialGaugeScaleProperties.prototype,"max",2),__decorateClass([TempValidate80(OBJECT_ARRAY3)],RadialGaugeScaleProperties.prototype,"fills",2),__decorateClass([TempValidate80(FILL_MODE)],RadialGaugeScaleProperties.prototype,"fillMode",2),__decorateClass([TempValidate80(COLOR_STRING30,{optional:!0})],RadialGaugeScaleProperties.prototype,"fill",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeScaleProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate80(COLOR_STRING30)],RadialGaugeScaleProperties.prototype,"stroke",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36)],RadialGaugeScaleProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeScaleProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate80(LINE_DASH24)],RadialGaugeScaleProperties.prototype,"lineDash",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36)],RadialGaugeScaleProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate80(COLOR_STRING30)],RadialGaugeScaleProperties.prototype,"defaultFill",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeScaleProperties.prototype,"interval",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeScaleProperties.prototype,"label",2);var RadialGaugeNeedleProperties=class extends BaseProperties27{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate80(BOOLEAN35)],RadialGaugeNeedleProperties.prototype,"enabled",2),__decorateClass([TempValidate80(RATIO34,{optional:!0})],RadialGaugeNeedleProperties.prototype,"radiusRatio",2),__decorateClass([TempValidate80(NUMBER22)],RadialGaugeNeedleProperties.prototype,"spacing",2),__decorateClass([TempValidate80(COLOR_STRING30)],RadialGaugeNeedleProperties.prototype,"fill",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeNeedleProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate80(COLOR_STRING30)],RadialGaugeNeedleProperties.prototype,"stroke",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36)],RadialGaugeNeedleProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeNeedleProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate80(LINE_DASH24)],RadialGaugeNeedleProperties.prototype,"lineDash",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36)],RadialGaugeNeedleProperties.prototype,"lineDashOffset",2);var RadialGaugeLabelProperties=class extends AutoSizedLabel{};__decorateClass([TempValidate80(STRING41,{optional:!0})],RadialGaugeLabelProperties.prototype,"text",2);var RadialGaugeSecondaryLabelProperties=class extends AutoSizedSecondaryLabel{};__decorateClass([TempValidate80(STRING41,{optional:!0})],RadialGaugeSecondaryLabelProperties.prototype,"text",2);var RadialGaugeSeriesProperties=class extends SeriesProperties12{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new GaugeSegmentationProperties,this.defaultColorRange=[],this.targets=new PropertiesArray8(RadialGaugeTargetProperties),this.defaultTarget=new RadialGaugeTargetProperties,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new RadialGaugeScaleProperties,this.bar=new RadialGaugeBarProperties,this.needle=new RadialGaugeNeedleProperties,this.label=new RadialGaugeLabelProperties,this.secondaryLabel=new RadialGaugeSecondaryLabelProperties,this.tooltip=new SeriesTooltip21}isValid(t){if(!super.isValid(t))return!1;const{outerRadius:e,innerRadius:i}=this;return e==null!=(i==null)?(import_ag_charts_core97.Logger.warnOnce("Either [innerRadius] and [outerRadius] must both be set, or neither can be set."),!1):!0}};__decorateClass([TempValidate80(NUMBER22)],RadialGaugeSeriesProperties.prototype,"value",2),__decorateClass([TempValidate80(NUMBER22)],RadialGaugeSeriesProperties.prototype,"startAngle",2),__decorateClass([TempValidate80(NUMBER22)],RadialGaugeSeriesProperties.prototype,"endAngle",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"segmentation",2),__decorateClass([TempValidate80(COLOR_STRING_ARRAY12)],RadialGaugeSeriesProperties.prototype,"defaultColorRange",2),__decorateClass([TempValidate80(OBJECT_ARRAY3)],RadialGaugeSeriesProperties.prototype,"targets",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"defaultTarget",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeSeriesProperties.prototype,"outerRadiusRatio",2),__decorateClass([TempValidate80(RATIO34)],RadialGaugeSeriesProperties.prototype,"innerRadiusRatio",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36,{optional:!0})],RadialGaugeSeriesProperties.prototype,"outerRadius",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36,{optional:!0})],RadialGaugeSeriesProperties.prototype,"innerRadius",2),__decorateClass([TempValidate80(POSITIVE_NUMBER36)],RadialGaugeSeriesProperties.prototype,"cornerRadius",2),__decorateClass([TempValidate80(CORNER_MODE)],RadialGaugeSeriesProperties.prototype,"cornerMode",2),__decorateClass([TempValidate80(NUMBER22)],RadialGaugeSeriesProperties.prototype,"spacing",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"scale",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"bar",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"needle",2),__decorateClass([TempValidate80(FUNCTION21,{optional:!0})],RadialGaugeSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"label",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"secondaryLabel",2),__decorateClass([TempValidate80(OBJECT45)],RadialGaugeSeriesProperties.prototype,"tooltip",2);var import_ag_charts_community278=require("ag-charts-community"),{SectorBox:SectorBox5}=import_ag_charts_community278._ModuleSupport;function computeClipSector(t){const{startAngle:e,endAngle:i,clipStartAngle:o,clipEndAngle:s,innerRadius:a,outerRadius:r}=t;if(!(o==null||s==null))return new SectorBox5(Math.max(o,e),Math.min(s,i),a,r)}function clipSectorVisibility(t,e,i){return Math.max(t,i.startAngle)<=Math.min(e,i.endAngle)}function hasClipSector(t){return t.clipStartAngle!=null&&t.clipEndAngle!=null}function datumClipSector(t,e){const{clipStartAngle:i,clipEndAngle:o,innerRadius:s,outerRadius:a}=t;return new SectorBox5(i,e?i:o,s,a)}function prepareRadialGaugeSeriesAnimationFunctions(t,e){const i=t?"initial":"update";return{node:{fromFn(a,r){const n=a.previousDatum;let{startAngle:l,endAngle:c}=n??r;const h=n!=null&&hasClipSector(n)?datumClipSector(n,t):void 0,u=hasClipSector(r)?datumClipSector(r,t):void 0;let p;return h!=null&&u!=null?p=h:h==null&&u!=null?(p=u,l=r.startAngle,c=r.endAngle):h!=null&&u==null?(p=void 0,l=r.startAngle,c=r.endAngle):t&&(c=l),{startAngle:l,endAngle:c,clipSector:p,phase:i}},toFn(a,r){const{startAngle:n,endAngle:l}=r;let c;return hasClipSector(r)&&(c=datumClipSector(r,!1)),{startAngle:n,endAngle:l,clipSector:c}},applyFn(a,r){const{startAngle:n,endAngle:l}=r;let{clipSector:c}=r;c!=null&&(c=new SectorBox5(Math.max(n,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const h=c==null||clipSectorVisibility(n,l,c);a.startAngle=n,a.endAngle=l,a.clipSector=c,a.visible=h}},needle:{fromFn(a){let{angle:r}=a.previousDatum??a.datum;return t&&(r=e),{rotation:r,phase:i}},toFn(a,r){const{angle:n}=r;return{rotation:n}}}}}function resetRadialGaugeSeriesResetSectorFunction(t,e){const{startAngle:i,endAngle:o}=e,s=computeClipSector(e),a=s==null||clipSectorVisibility(i,o,s);return{startAngle:i,endAngle:o,clipSector:s,visible:a}}function resetRadialGaugeSeriesResetNeedleFunction(t,e){const{angle:i}=e;return{rotation:i}}var verticalAlignFactors3={top:0,middle:.5,bottom:1};function formatRadialGaugeLabels(t,e,i,o,s){const{padding:a,textAlign:r,verticalAlign:n}=i;let l,c;if(e.each((S,v)=>{v.label==="primary"?l=v:v.label==="secondary"&&(c=v)}),l==null)return;const h=getLabelText(t,l,s?.label);if(h==null)return;const u=c!=null?getLabelText(t,c,s?.secondaryLabel):void 0,p={padding:a},d=r==="center"?2:1,g=n==="middle"?2:1,f=S=>({width:Math.sqrt(Math.max(o**2-(S/g)**2,0))*d,height:Math.min(S,g*o),meta:null});let y,m,b;if(c!=null&&u!=null){const S=formatStackedLabels(h,l,u,c,p,f);y=S?.label,m=S?.secondaryLabel,b=S?.height??0}else{const S=formatSingleLabel(h,l,p,f);y=S?.[0],m=void 0,b=S?.[0].height??0}const x=b*verticalAlignFactors3[n];e.each((S,v)=>{let T;if(v.label==="primary"?T=y:v.label==="secondary"&&(T=m),T==null){S.visible=!1;return}S.visible=!0,S.text=T.text,S.fontSize=T.fontSize,S.lineHeight=T.lineHeight,S.textAlign=r,S.textBaseline="middle";const D=v.label==="primary"?T.height/2:b-T.height/2;S.y=v.centerY+D-x,S.x=v.centerX})}var{fromToMotion:fromToMotion5,resetMotion:resetMotion4,CachedTextMeasurerPool:CachedTextMeasurerPool11,SeriesNodePickMode:SeriesNodePickMode17,StateMachine:StateMachine15,createDatumId:createDatumId21,normalizeAngle360:normalizeAngle3607,normalizeAngle360Inclusive:normalizeAngle360Inclusive2,isBetweenAngles:isBetweenAngles2,sectorBox,toDegrees,toRadians:toRadians6,BBox:BBox23,Group:Group20,PointerEvents:PointerEvents12,Selection:Selection15,Sector:Sector6,SectorBox:SectorBox6,Text:Text8,Marker:Marker5,getColorStops:getColorStops2}=import_ag_charts_community279._ModuleSupport,targetPlacementRotation={inside:90,middle:0,outside:-90},outsideLabelPlacements=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],insideLabelPlacements=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],RadialGaugeSeries=class extends import_ag_charts_community279._ModuleSupport.Series{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[SeriesNodePickMode17.EXACT_SHAPE_MATCH,SeriesNodePickMode17.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new RadialGaugeSeriesProperties,this.scale=new LinearAngleScale,this.scaleGroup=this.contentGroup.appendChild(new Group20({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Group20({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new Group20({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Group20({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Group20({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Group20({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Group20({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Group20({name:"tickGroup"})),this.scaleSelection=Selection15.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=Selection15.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=Selection15.select(this.itemNeedleGroup,RadialGaugeNeedle),this.targetSelection=Selection15.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=Selection15.select(this.itemTargetLabelGroup,Text8),this.labelSelection=Selection15.select(this.itemLabelGroup,Text8),this.highlightTargetSelection=Selection15.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=Selection15.select(this.tickGroup,import_ag_charts_community279._ModuleSupport.TransformableText),this.datumUnion=new DatumUnion,this.animationState=new StateMachine15("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=PointerEvents12.None,this.tickGroup.pointerEvents=PointerEvents12.None,this.itemNeedleGroup.pointerEvents=PointerEvents12.None,this.itemLabelGroup.pointerEvents=PointerEvents12.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new Sector6}markerFactory(){const t=new Marker5;return t.size=1,t}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(t){const{min:e,max:i}=this.properties.scale;return formatLabel(t,{min:e,max:i})}layoutScale(){const{scale:t,properties:e}=this,{seriesRectWidth:i,seriesRectHeight:o}=this.nodeDataDependencies,{scale:s,outerRadius:a}=this.properties,{min:r,max:n,label:l,interval:c}=s,h=toRadians6(e.startAngle-90),u=toRadians6(e.endAngle-90),d=normalizeAngle360Inclusive2(u-h)>Math.PI,g=d||isBetweenAngles2(1.5*Math.PI,h,u),f=d||isBetweenAngles2(0*Math.PI,h,u),y=d||isBetweenAngles2(.5*Math.PI,h,u),m=d||isBetweenAngles2(1*Math.PI,h,u);let b;m&&!f?b="right":!m&&f?b="left":b="center";let x;g&&!y?x="bottom":!g&&y?x="top":x="middle";const S=sectorBox({startAngle:h,endAngle:u,innerRadius:0,outerRadius:.5}),v=-(S.x+S.width/2)*2,T=-(S.y+S.height/2)*2,D=Math.min(i/S.width,o/S.height);t.domain=[r,n],t.range=[h,u],t.arcLength=D/2;const{maxSpacing:k,minSpacing:A}=c,{arcLength:M}=t,_=k?Math.floor(M/k):1,O=A?Math.floor(M/A):1/0,C=Math.floor(4/Math.PI*Math.abs(t.range[0]-t.range[1])),I=Math.max(_,Math.min(O,C)),w=c.values??t.ticks({nice:!1,interval:c.step,minTickCount:_,maxTickCount:O,tickCount:I}),L=w.reduce((W,H)=>Math.max(W,typeof H=="number"?(0,import_ag_charts_core98.countFractionDigits)(H):0),0),P=t.tickFormatter({domain:t.domain,ticks:w,fractionDigits:L,specifier:l.format}),z=l.getFont(),R=w.map((W,H)=>{const q=l.formatter?.({value:W,index:H,domain:t.domain,boundSeries:void 0})??P(W),{width:j,height:$}=CachedTextMeasurerPool11.measureText(q,{font:z});return{index:H,value:W,text:q,width:j,height:$}}),B=R.reduce((W,H)=>Math.max(W,H.width),0),E=R.reduce((W,H)=>Math.max(W,H.height),0),F=l.enabled?Math.max(B,E)+l.spacing:0,V=Math.max(.5*D-F,0),G=a??V;return this.centerX=i/2+v*G,this.centerY=o/2+T*G,this.radius=G,this.textAlign=b,this.verticalAlign=x,R}createConicGradient(t,e){const{scale:i}=this,{domain:o,range:s}=i,[a,r]=s,{defaultColorRange:n}=this.properties,l=normalizeAngle3607((a+r)/2+Math.PI),c=normalizeAngle360Inclusive2(r-a);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:getColorStops2(t,n,o,e).map(({color:u,stop:p})=>(p=Math.min(Math.max(p,0),1),p=(a+c*p-l)/(2*Math.PI),p=(p%1+1)%1,{stop:p,color:u})),rotation:toDegrees(l)+90}}getShapeFillBBox(){const{centerX:t,centerY:e,radius:i}=this;return new BBox23(t-i,e-i,2*i,2*i)}getTargets(){const{properties:t}=this,e=t.defaultTarget;return Array.from(t.targets).map(i=>{const{text:o=e.text,value:s=e.value??0,shape:a=e.shape??"triangle",rotation:r=e.rotation??0,strokeWidth:n=e.strokeWidth??0,placement:l=e.placement??"middle",spacing:c=e.spacing??0,size:h=e.size??0,fill:u=e.fill??"black",fillOpacity:p=e.fillOpacity??1,stroke:d=e.stroke??"black",strokeOpacity:g=e.strokeOpacity??1,lineDash:f=e.lineDash??[0],lineDashOffset:y=e.lineDashOffset??0}=i,{enabled:m=e.label.enabled,color:b=e.label.color??"black",fontStyle:x=e.label.fontStyle??"normal",fontWeight:S=e.label.fontWeight??"normal",fontSize:v=e.label.fontSize,fontFamily:T=e.label.fontFamily,spacing:D=e.label.spacing??0}=i.label;return{text:o,value:s,shape:a,placement:l,spacing:c,size:h,rotation:r,fill:u,fillOpacity:p,stroke:d,strokeWidth:n,strokeOpacity:g,lineDash:f,lineDashOffset:y,label:{enabled:m,color:b,fontStyle:x,fontWeight:S,fontSize:v,fontFamily:T,spacing:D}}})}getTargetRadius(t){const{radius:e,properties:i}=this,{innerRadiusRatio:o,outerRadiusRatio:s}=i,{placement:a,spacing:r,size:n}=t,l=e*s,c=e*o;switch(a){case"inside":return Math.max(c-r-n/2,0);case"outside":return l+r+n/2;default:return(c+l)/2}}getTargetLabel(t){const{scale:e}=this,{value:i,size:o,placement:s,label:a}=t,{spacing:r,color:n,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:u}=a,p=void 0,d=e.convert(i),g=normalizeAngle3607(d)/(Math.PI/2)|0,f=o/2+r;let y,m,b,x;switch(s){case"outside":({textAlign:y,textBaseline:m}=outsideLabelPlacements[g]),b=f*Math.cos(d),x=f*Math.sin(d);break;case"inside":({textAlign:y,textBaseline:m}=insideLabelPlacements[g]),b=-f*Math.cos(d),x=-f*Math.sin(d);break;default:y="center",m="bottom",b=0,x=-f;break}return{offsetX:b,offsetY:x,fill:n,textAlign:y,textBaseline:m,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:u,lineHeight:p}}createNodeData(){if(!this.properties.isValid())return;const t=this.layoutScale(),{id:e,scale:i,properties:o,radius:s,centerX:a,centerY:r}=this,{value:n,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:h,cornerRadius:u,cornerMode:p,needle:d,bar:g,scale:f,label:y,secondaryLabel:m}=o,{outerRadius:b=s*c,innerRadius:x=s*l}=o,S=this.getTargets(),v=[],T=[],D=[],k=[],A=[],M=p==="item",_=i.convert(i.domain[0]),O=i.convert(n),C=Math.ceil(normalizeAngle360Inclusive2(O-_)*s);let I=h.enabled?h.interval.getSegments(i,C):void 0;const w=g.enabled?g.fill??this.createConicGradient(g.fills,g.fillMode):"rgba(0,0,0,0)",L=f.fill??(g.enabled&&f.fills.length===0?f.defaultFill:void 0)??this.createConicGradient(f.fills,f.fillMode);if(I==null&&M){const P=Math.min(...i.domain),z=Math.max(...i.domain),R={value:n,segmentStart:P,segmentEnd:z},E=Math.min(u,(b-x)/2)/((x+b)/2);v.push({series:this,itemId:"value",datum:R,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:b,innerRadius:x,startAngle:_-E,endAngle:O+E,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:w}),A.push({series:this,itemId:"scale",datum:R,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:b,innerRadius:x,startAngle:i.range[0]-E,endAngle:i.range[1]+E,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:L})}else{I??(I=i.domain);for(let P=0;P<I.length-1;P++){const z=I[P],R=I[P+1],B={value:n,segmentStart:z,segmentEnd:R},E=P===0,F=P===I.length-2,V=i.convert(z),G=i.convert(R);v.push({series:this,itemId:`value-${P}`,datum:B,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:b,innerRadius:x,startAngle:V,endAngle:G,clipStartAngle:_,clipEndAngle:O,startCornerRadius:M||E?u:0,endCornerRadius:M||F?u:0,fill:w}),A.push({series:this,itemId:`scale-${P}`,datum:B,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:b,innerRadius:x,startAngle:V,endAngle:G,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:M||E?u:0,endCornerRadius:M||F?u:0,fill:L})}}if(!d.enabled&&y.enabled){const{text:P,color:z,fontSize:R,minimumFontSize:B,fontStyle:E,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W=H=>this.formatLabel(H.value)}=y;k.push({label:"primary",centerX:a,centerY:r,text:P,value:n,fill:z,fontSize:R,minimumFontSize:B,fontStyle:E,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W})}if(!d.enabled&&m.enabled){const{text:P,color:z,fontSize:R,minimumFontSize:B,fontStyle:E,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W}=m;k.push({label:"secondary",centerX:a,centerY:r,text:P,value:n,fill:z,fontSize:R,minimumFontSize:B,fontStyle:E,fontWeight:F,fontFamily:V,lineHeight:G,formatter:W})}if(d.enabled){let P=d.radiusRatio!=null?s*d.radiusRatio:x;P=Math.max(P-d.spacing,0);const z=i.convert(n);D.push({centerX:a,centerY:r,radius:P,angle:z,series:this})}for(let P=0;P<S.length;P+=1){const z=S[P],{value:R,text:B,size:E,shape:F,fill:V,fillOpacity:G,stroke:W,strokeWidth:H,strokeOpacity:q,lineDash:j,lineDashOffset:$}=z;if(R<Math.min(...i.domain)||R>Math.max(...i.domain))continue;const X=this.getTargetRadius(z),Y=i.convert(R),U=toRadians6(z.rotation+targetPlacementRotation[z.placement]);T.push({series:this,itemId:`target-${P}`,midPoint:{x:X*Math.cos(Y)+a,y:X*Math.sin(Y)+r},datum:{value:R},datumIndex:{type:1,index:P},type:1,value:R,text:B,centerX:a,centerY:r,shape:F,radius:X,angle:Y,rotation:U,size:E,fill:V,fillOpacity:G,stroke:W,strokeOpacity:q,strokeWidth:H,lineDash:j,lineDashOffset:$,label:this.getTargetLabel(z)})}return{itemId:e,nodeData:v,needleData:D,targetData:T,labelData:k,scaleData:A,tickData:t}}updateSelections(t){(this.nodeDataRefresh||t)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(t){if(t!=null&&t.series===this&&t.type===1)return t}update({seriesRect:t}){const{datumSelection:e,labelSelection:i,needleSelection:o,targetSelection:s,targetLabelSelection:a,scaleSelection:r,highlightTargetSelection:n,tickSelection:l}=this,c=this.checkResize(t);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const h=this.contextNodeData?.nodeData??[],u=this.contextNodeData?.labelData??[],p=this.contextNodeData?.needleData??[],d=this.contextNodeData?.targetData??[],g=this.contextNodeData?.scaleData??[],f=this.contextNodeData?.tickData??[],y=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:g,scaleSelection:r}),this.updateScaleNodes({scaleSelection:r}),this.needleSelection=this.updateNeedleSelection({needleData:p,needleSelection:o}),this.updateNeedleNodes({needleSelection:o}),this.targetSelection=this.updateTargetSelection({targetData:d,targetSelection:s}),this.updateTargetNodes({targetSelection:s,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:d,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:h,datumSelection:e}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:u,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:y!=null?[y]:[],targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:f,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId21(t.nodeData.length,e.itemId))}updateDatumNodes(t){const{datumSelection:e}=t,{ctx:i,properties:o}=this,{bar:s,segmentation:a}=o,r=a.spacing??0,{fillOpacity:n,stroke:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}=s,p=this.getStrokeWidth(s.strokeWidth),d=i.animationManager.isSkipped(),g=this.getShapeFillBBox();e.each((f,y)=>{const{centerX:m,centerY:b,innerRadius:x,outerRadius:S,startCornerRadius:v,endCornerRadius:T,fill:D}=y;f.centerX=m,f.centerY=b,f.innerRadius=x,f.outerRadius=S,f.pointerEvents=this.properties.bar.enabled?import_ag_charts_community279._ModuleSupport.PointerEvents.All:import_ag_charts_community279._ModuleSupport.PointerEvents.None,f.fill=D,f.fillBBox=g,f.fillOpacity=n,f.stroke=l,f.strokeOpacity=c,f.strokeWidth=p,f.lineDash=h,f.lineDashOffset=u,f.startOuterCornerRadius=v,f.startInnerCornerRadius=v,f.endOuterCornerRadius=T,f.endInnerCornerRadius=T,f.radialEdgeInset=(r+f.strokeWidth)/2,f.concentricEdgeInset=f.strokeWidth/2,(d||f.previousDatum==null)&&f.setProperties(resetRadialGaugeSeriesResetSectorFunction(f,y))}),this.datumUnion.update(e,this.itemGroup,import_ag_charts_community279._ModuleSupport.Sector,(f,y,m)=>{f.clipSector??(f.clipSector=new SectorBox6(NaN,NaN,NaN,NaN)),f.centerX=y.centerX,f.centerY=y.centerY,f.outerRadius=f.clipSector.outerRadius=y.outerRadius,f.innerRadius=f.clipSector.innerRadius=y.innerRadius,f.startAngle=f.clipSector.startAngle=y.startAngle,f.startInnerCornerRadius=y.startInnerCornerRadius,f.startOuterCornerRadius=y.startOuterCornerRadius,f.endAngle=m.endAngle,f.clipSector.endAngle=m.clipSector?.endAngle??m.endAngle,f.endInnerCornerRadius=m.endInnerCornerRadius,f.endOuterCornerRadius=m.endOuterCornerRadius,f.pointerEvents=import_ag_charts_community279._ModuleSupport.PointerEvents.None})}updateScaleSelection(t){return t.scaleSelection.update(t.scaleData,void 0,e=>createDatumId21(t.scaleData.length,e.itemId))}updateScaleNodes(t){const{scaleSelection:e}=t,{scale:i,segmentation:o}=this.properties,s=o.spacing??0,{fillOpacity:a,stroke:r,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:h}=i,u=this.getShapeFillBBox();e.each((p,d)=>{const{centerX:g,centerY:f,innerRadius:y,outerRadius:m,startCornerRadius:b,endCornerRadius:x,fill:S}=d;p.centerX=g,p.centerY=f,p.innerRadius=y,p.outerRadius=m,p.fill=S,p.fillBBox=u,p.fillOpacity=a,p.stroke=r,p.strokeOpacity=n,p.strokeWidth=l,p.lineDash=c,p.lineDashOffset=h,p.startOuterCornerRadius=b,p.startInnerCornerRadius=b,p.endOuterCornerRadius=x,p.endInnerCornerRadius=x,p.radialEdgeInset=(s+p.strokeWidth)/2,p.concentricEdgeInset=p.strokeWidth/2,p.setProperties(resetRadialGaugeSeriesResetSectorFunction(p,d))})}updateNeedleSelection(t){return t.needleSelection.update(t.needleData,void 0,()=>createDatumId21([]))}updateNeedleNodes(t){const{needleSelection:e}=t,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:r,lineDash:n,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();e.each((h,u)=>{const{centerX:p,centerY:d,radius:g}=u,f=g*2;h.d=RadialGaugeNeedle.defaultPathData,h.fill=i,h.fillOpacity=o,h.stroke=s,h.strokeOpacity=a,h.strokeWidth=r/f,h.lineDash=n.map(y=>y/f),h.lineDashOffset=l/f,h.translationX=p,h.translationY=d,h.scalingX=f,h.scalingY=f,c&&h.setProperties(resetRadialGaugeSeriesResetNeedleFunction(h,u))})}updateTargetSelection(t){return t.targetSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetNodes(t){const{targetSelection:e,isHighlight:i}=t,o=i?this.properties.highlightStyle.item:void 0;e.each((s,a)=>{const{centerX:r,centerY:n,angle:l,radius:c,shape:h,size:u,rotation:p,fill:d,fillOpacity:g,stroke:f,strokeOpacity:y,strokeWidth:m,lineDash:b,lineDashOffset:x}=a;s.shape=h==="line"?lineMarker:h,s.size=u,s.fill=o?.fill??d,s.fillOpacity=o?.fillOpacity??g,s.stroke=o?.stroke??f,s.strokeOpacity=o?.strokeOpacity??y,s.strokeWidth=o?.strokeWidth??m,s.lineDash=o?.lineDash??b,s.lineDashOffset=o?.lineDashOffset??x,s.translationX=r+c*Math.cos(l),s.translationY=n+c*Math.sin(l),s.rotation=l+p})}updateTargetLabelSelection(t){return t.targetLabelSelection.update(t.targetData,void 0,e=>e.itemId)}updateTargetLabelNodes(t){const{targetLabelSelection:e}=t;e.each((i,o)=>{const{centerX:s,centerY:a,radius:r,angle:n,text:l}=o,{offsetX:c,offsetY:h,fill:u,fontStyle:p,fontWeight:d,fontSize:g,fontFamily:f,textAlign:y,textBaseline:m}=o.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=s+r*Math.cos(n)+c,i.y=a+r*Math.sin(n)+h,i.text=l,i.fill=u,i.fontStyle=p,i.fontWeight=d,i.fontSize=g,i.fontFamily=f,i.textAlign=y,i.textBaseline=m})}updateLabelSelection(t){return t.labelSelection.update(t.labelData,void 0,e=>e.label)}updateLabelNodes(t){const{labelSelection:e}=t,i=this.ctx.animationManager.isSkipped();e.each((o,s)=>{o.fill=s.fill,o.fontStyle=s.fontStyle,o.fontWeight=s.fontWeight,o.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(t){return t.tickSelection.update(t.tickData,void 0,e=>e.index)}updateTickNodes(t){const{scale:e,radius:i,centerX:o,centerY:s,properties:a}=this,{enabled:r,color:n,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u,spacing:p}=a.scale.label,d=toRadians6(a.scale.label.rotation??0);t.tickSelection.each((g,f)=>{if(!r){g.visible=!1;return}g.visible=!0,g.text=f.text,g.fill=n,g.fontFamily=l,g.fontSize=c,g.fontStyle=h,g.fontWeight=u,g.textAlign="center",g.textBaseline="middle";const y=e.convert(f.value),{width:m,height:b}=f,x=Math.abs(i*Math.cos(y)),S=Math.abs(i*Math.sin(y)),v=Math.min(Math.max(Math.abs(i/Math.tan(y)),x-m/2),x+m/2),T=Math.min(Math.max(Math.abs(i*Math.tan(y)),S-b/2),S+b/2),D=Math.hypot(v,T),k=o+(D+p)*Math.cos(y),A=s+(D+p)*Math.sin(y);g.x=k,g.y=A,g.rotationCenterX=k,g.rotationCenterY=A,g.rotation=d})}labelsHaveExplicitText(){for(const{datum:t}of this.labelSelection)if(t.text==null)return!1;return!0}formatLabelText(t){const{labelSelection:e,radius:i,textAlign:o,verticalAlign:s}=this,{spacing:a,innerRadiusRatio:r}=this.properties;formatRadialGaugeLabels(this,e,{padding:a,textAlign:o,verticalAlign:s},i*r,t)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),resetMotion4([this.datumSelection],resetRadialGaugeSeriesResetSectorFunction),resetMotion4([this.needleSelection],resetRadialGaugeSeriesResetNeedleFunction),this.formatLabelText()}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}animateLabelText(t={}){const{animationManager:e}=this.ctx;let i,o,s,a;if(this.labelSelection.each((r,n)=>{r.opacity=1,n.label==="primary"?(i=r.previousDatum?.value??t.from??n.value,o=n.value):n.label==="secondary"&&(s=r.previousDatum?.value??t.from??n.value,a=n.value)}),!this.labelsHaveExplicitText())if(o==null||a==null)this.formatLabelText();else if(i===o&&s===a)this.formatLabelText({label:o,secondaryLabel:a});else{const r=`${this.id}_labels`;e.animate({id:r,groupId:"label",from:{label:i,secondaryLabel:s},to:{label:o,secondaryLabel:a},phase:t.phase??"update",onUpdate:n=>this.formatLabelText(n)})}}animateEmptyUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=prepareRadialGaugeSeriesAnimationFunctions(!0,this.scale.range[0]);fromToMotion5(this.id,"node",t,[this.datumSelection],e,(o,s)=>s.itemId),fromToMotion5(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),fromToMotion5(this.id,"label",t,[this.labelSelection],fadeInFns,(o,s)=>s.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:t}=this.ctx,{node:e,needle:i}=prepareRadialGaugeSeriesAnimationFunctions(!1,this.scale.range[0]);fromToMotion5(this.id,"node",t,[this.datumSelection],e,(o,s)=>s.itemId),fromToMotion5(this.id,"needle",t,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(t,e){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(t){const{id:e,properties:i}=this,{tooltip:o}=i;if(!i.isValid())return;let s,a;if(t.type===0?(s=i.value,a=i.label.text):{value:s,text:a}=i.targets[t.index],s!=null)return o.formatTooltip(this.properties,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(s)}]},{seriesId:e,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(t){return pickGaugeNearestDatum(this,t)}pickFocus(t){return pickGaugeFocus(this,t)}getCaptionText(){const{value:t}=this.properties,e=[];return e.push(this.formatLabel(t)),this.labelSelection.each((i,o)=>{const s=getLabelText(this,o);s!=null&&e.push(s)}),e.join(". ")}getCategoryValue(t){}datumIndexForCategoryValue(t){}};RadialGaugeSeries.className="RadialGaugeSeries",RadialGaugeSeries.type="radial-gauge";var import_ag_charts_community280=require("ag-charts-community"),import_ag_charts_core99=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs22,autoSizedLabelOptionsDefs:autoSizedLabelOptionsDefs4,seriesLabelOptionsDefs:seriesLabelOptionsDefs16,tooltipOptionsDefs:tooltipOptionsDefs21,numberFormatValidator:numberFormatValidator4}=import_ag_charts_community280._ModuleSupport,radialGaugeTargetOptionsDef={value:(0,import_ag_charts_core99.required)(import_ag_charts_core99.number),text:import_ag_charts_core99.string,shape:(0,import_ag_charts_core99.or)((0,import_ag_charts_core99.union)("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),import_ag_charts_core99.callback),placement:(0,import_ag_charts_core99.union)("inside","outside","middle"),spacing:import_ag_charts_core99.positiveNumber,size:import_ag_charts_core99.positiveNumber,rotation:import_ag_charts_core99.number,label:{...seriesLabelOptionsDefs16,spacing:import_ag_charts_core99.positiveNumber},...import_ag_charts_core99.fillOptionsDef,...import_ag_charts_core99.strokeOptionsDef,...import_ag_charts_core99.lineDashOptionsDef},radialGaugeSeriesOptionsDef={type:(0,import_ag_charts_core99.required)((0,import_ag_charts_core99.constant)("radial-gauge")),value:(0,import_ag_charts_core99.required)(import_ag_charts_core99.number),outerRadius:import_ag_charts_core99.positiveNumber,innerRadius:import_ag_charts_core99.positiveNumber,outerRadiusRatio:import_ag_charts_core99.ratio,innerRadiusRatio:import_ag_charts_core99.ratio,startAngle:import_ag_charts_core99.number,endAngle:import_ag_charts_core99.number,spacing:import_ag_charts_core99.positiveNumber,cornerMode:(0,import_ag_charts_core99.union)("container","item"),cornerRadius:import_ag_charts_core99.positiveNumber,scale:{min:(0,import_ag_charts_core99.and)(import_ag_charts_core99.number,(0,import_ag_charts_core99.lessThan)("max")),max:(0,import_ag_charts_core99.and)(import_ag_charts_core99.number,(0,import_ag_charts_core99.greaterThan)("min")),label:{enabled:import_ag_charts_core99.boolean,formatter:import_ag_charts_core99.callback,rotation:import_ag_charts_core99.number,spacing:import_ag_charts_core99.positiveNumber,minSpacing:import_ag_charts_core99.positiveNumber,avoidCollisions:import_ag_charts_core99.boolean,format:numberFormatValidator4,...import_ag_charts_core99.fontOptionsDef},interval:{values:(0,import_ag_charts_core99.arrayOf)(import_ag_charts_core99.number),step:import_ag_charts_core99.number},...fillsOptionsDef,...import_ag_charts_core99.fillOptionsDef,...import_ag_charts_core99.strokeOptionsDef,...import_ag_charts_core99.lineDashOptionsDef},targets:(0,import_ag_charts_core99.arrayOfDefs)(radialGaugeTargetOptionsDef,"target options array"),segmentation:{enabled:import_ag_charts_core99.boolean,spacing:import_ag_charts_core99.positiveNumber,interval:{values:(0,import_ag_charts_core99.arrayOf)(import_ag_charts_core99.number),step:import_ag_charts_core99.number,count:import_ag_charts_core99.number}},bar:{enabled:import_ag_charts_core99.boolean,...fillsOptionsDef,...import_ag_charts_core99.fillOptionsDef,...import_ag_charts_core99.strokeOptionsDef,...import_ag_charts_core99.lineDashOptionsDef},needle:{enabled:import_ag_charts_core99.boolean,spacing:import_ag_charts_core99.positiveNumber,radiusRatio:import_ag_charts_core99.ratio,...import_ag_charts_core99.fillOptionsDef,...import_ag_charts_core99.strokeOptionsDef,...import_ag_charts_core99.lineDashOptionsDef},label:{text:import_ag_charts_core99.string,spacing:import_ag_charts_core99.positiveNumber,...autoSizedLabelOptionsDefs4},secondaryLabel:{text:import_ag_charts_core99.string,...autoSizedLabelOptionsDefs4},tooltip:tooltipOptionsDefs21,...commonSeriesOptionsDefs22};radialGaugeSeriesOptionsDef.defaultColorRange=(0,import_ag_charts_core99.arrayOf)(import_ag_charts_core99.color),radialGaugeSeriesOptionsDef.defaultTarget={...radialGaugeTargetOptionsDef,value:import_ag_charts_core99.number,label:{...seriesLabelOptionsDefs16,spacing:import_ag_charts_core99.number}},radialGaugeSeriesOptionsDef.scale.defaultFill=import_ag_charts_core99.color;var{FONT_SIZE_RATIO:FONT_SIZE_RATIO2}=import_ag_charts_community281._ModuleSupport,RadialGaugeModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"radial-gauge",moduleFactory:t=>new RadialGaugeSeries(t),tooltipDefaults:{range:10},themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},import_ag_charts_community281._ModuleSupport.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["./1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["./2",import_ag_charts_community281._ModuleSupport.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:0},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[FONT_SIZE_RATIO2.LARGE]},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}}}}},RadialGaugeSeriesModule={type:"series",name:"radial-gauge",chartType:"gauge",enterprise:!0,options:radialGaugeSeriesOptionsDef,create:t=>new RadialGaugeSeries(t)},import_ag_charts_community286=require("ag-charts-community"),import_ag_charts_community284=require("ag-charts-community"),import_ag_charts_core100=require("ag-charts-core");function sortNodesByY(t){t.nodes.sort((e,i)=>Math.round((e.datum.y-i.datum.y)*100)/100||-(e.datum.size-i.datum.size))}function justifyNodesAcrossColumn({nodes:t,size:e},{seriesRectHeight:i,nodeSpacing:o,sizeScale:s}){const a=i*e*s;let r=(i-(a+o*(t.length-1)))/2;t.forEach(({datum:n})=>{const l=i*n.size*s;n.y=r,n.height=l,r+=l+o})}function separateNodesInColumn(t,e){const{nodes:i}=t,{seriesRectHeight:o,nodeSpacing:s}=e;sortNodesByY(t);let a=0,r=0;for(const{datum:c}of i){const h=Math.max(r-c.y,0);c.y+=h,a+=h,r=c.y+c.height+s}if(r-s<o)return a>0;let l=o;for(let c=i.length-1;c>=0;c-=1){const{datum:h}=i[c],u=h.y+h.height,p=Math.min(l-u,0);h.y+=p,a+=p,l=h.y-s}return!0}function hasCrossOver(t,e,i,o,s,a,r,n){const l=(i-t)/(o-e),c=(r-s)/(n-a),h=((a-e)*(l*c)+t*c-s*l)/(c-l);return t<i?h>t&&h<Math.min(i,r):h<t&&h>Math.max(i,r)}function removeColumnCrossoversInDirection(t,e){let i=!1;const o=t.nodes.filter(a=>e(a).length===1);let s=!0;for(let a=0;s&&a<o.length;a+=1){s=!1;for(let r=0;r<o.length-1;r+=1){const{datum:n}=o[r],l=e(o[r])[0].node.datum,{datum:c}=o[r+1],h=e(o[r+1])[0].node.datum;if(!(hasCrossOver(n.x,n.y,l.x,l.y,c.x,c.y,h.x,h.y)||hasCrossOver(n.x,n.y+n.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,h.x,h.y+h.height/2)||hasCrossOver(n.x,n.y+n.height,l.x,l.y+l.height,c.x,c.y+c.height,h.x,h.y+h.height)))continue;const p=o[r];o[r]=o[r+1],o[r+1]=p;const d=n.y;n.y=c.y+c.height-n.height,c.y=d,i=!0,s=!0}}return i}function removeColumnCrossovers(t){let e=!1;return sortNodesByY(t),e=removeColumnCrossoversInDirection(t,i=>i.linksBefore)||e,e=removeColumnCrossoversInDirection(t,i=>i.linksAfter)||e,e}function weightedNodeY(t){if(t.length===0)return;let e=0,i=0;for(const{node:{datum:o}}of t)e+=o.y*o.size,i+=o.size;return e/i}function layoutColumn(t,e,i,o){return t.nodes.forEach(({datum:s,linksBefore:a,linksAfter:r})=>{const n=o===1?a:r,l=o===1?r:a,c=weightedNodeY(n);if(c!=null){const h=l.length!==0?i:1;s.y=s.y+(c-s.y)*h}}),separateNodesInColumn(t,e)}function layoutColumnsForward(t,e,i){let o=!1;for(const s of t)o=layoutColumn(s,e,i,1)||o;return o}function layoutColumnsBackwards(t,e,i){let o=!1;for(let s=t.length-1;s>=0;s-=1)o=layoutColumn(t[s],e,i,-1)||o;return o}function removeColumnsCrossovers(t){let e=!1;for(let i=t.length-1;i>=0;i-=1)e=removeColumnCrossovers(t[i])||e;return e}function layoutColumns(t,e){t.forEach(o=>{justifyNodesAcrossColumn(o,e)});let i=!1;for(let o=0;o<6;o+=1){const s=layoutColumnsForward(t,e,1);i=layoutColumnsBackwards(t,e,.5);const a=removeColumnsCrossovers(t);if(!s&&!i&&!a)break}i&&(layoutColumnsForward(t,e,1),removeColumnsCrossovers(t))}var import_ag_charts_community282=require("ag-charts-community"),{BBox:BBox24,Path:Path13,ScenePathChangeDetection:ScenePathChangeDetection9,splitBezier}=import_ag_charts_community282._ModuleSupport;function offsetTrivialCubicBezier(t,e,i,o,s,a,r,n,l,c){let h,u;if(s!==i&&l!==r){const T=-(o-e)/(s-i),D=-(n-a)/(l-r);h=(r-i+T*e-D*a)/(T-D),u=T*(h-e)+i}else if(s===i&&l!==r)h=e,u=-(n-a)/(l-r)*(h-n)+l;else if(s!==i&&l===r)h=n,u=-(o-e)/(s-i)*(h-e)+i;else throw new Error("Offsetting flat bezier curve");const p=Math.hypot(i-u,e-h),d=(p+c)/p,g=Math.hypot(l-u,n-h),f=(g+c)/g,y=h+(o-h)*d,m=u+(s-u)*d,b=h+(a-h)*f,x=u+(r-u)*f,S=h+(n-h)*f,v=u+(l-u)*f;t.cubicCurveTo(y,m,b,x,S,v)}var SankeyLink=class extends Path13{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const t=Math.min(this.x1,this.x2),e=Math.max(this.x1,this.x2)-t,i=Math.min(this.y1,this.y2),o=Math.max(this.y1,this.y2)-i+this.height;return new BBox24(t,i,e,o)}updatePath(){const{path:t,inset:e}=this;t.clear();const i=this.x1+e,o=this.x2-e,s=this.y1+e,a=this.y2+e,r=this.height-2*e;if(r<0||i>o)return;const n=i,l=s+r/2,c=(i+o)/2,h=s+r/2,u=(i+o)/2,p=a+r/2,d=o,g=a+r/2;if(t.moveTo(n,l-r/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)t.cubicCurveTo(c,h-r/2,u,p-r/2,d,g-r/2),t.lineTo(d,g+r/2),t.cubicCurveTo(u,p+r/2,c,h+r/2,n,l+r/2);else{const[f,y]=splitBezier(n,l,c,h,u,p,d,g,.5),m=(a>s?1:-1)*r/2;offsetTrivialCubicBezier(t,f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y,m),offsetTrivialCubicBezier(t,y[0].x,y[0].y,y[1].x,y[1].y,y[2].x,y[2].y,y[3].x,y[3].y,-m),t.lineTo(d,g+r/2),offsetTrivialCubicBezier(t,y[3].x,y[3].y,y[2].x,y[2].y,y[1].x,y[1].y,y[0].x,y[0].y,m),offsetTrivialCubicBezier(t,f[3].x,f[3].y,f[2].x,f[2].y,f[1].x,f[1].y,f[0].x,f[0].y,-m)}t.closePath()}};__decorateClass([ScenePathChangeDetection9()],SankeyLink.prototype,"x1",2),__decorateClass([ScenePathChangeDetection9()],SankeyLink.prototype,"x2",2),__decorateClass([ScenePathChangeDetection9()],SankeyLink.prototype,"y1",2),__decorateClass([ScenePathChangeDetection9()],SankeyLink.prototype,"y2",2),__decorateClass([ScenePathChangeDetection9()],SankeyLink.prototype,"height",2),__decorateClass([ScenePathChangeDetection9()],SankeyLink.prototype,"inset",2);var import_ag_charts_community283=require("ag-charts-community"),{BaseProperties:BaseProperties28,FillGradientDefaults:FillGradientDefaults16,FillPatternDefaults:FillPatternDefaults16,SeriesTooltip:SeriesTooltip22,SeriesProperties:SeriesProperties13,ARRAY:ARRAY12,ARRAY_OF:ARRAY_OF5,COLOR_STRING:COLOR_STRING31,COLOR_STRING_ARRAY:COLOR_STRING_ARRAY13,FUNCTION:FUNCTION22,LINE_DASH:LINE_DASH25,OBJECT:OBJECT46,POSITIVE_NUMBER:POSITIVE_NUMBER37,OR:OR21,COLOR_GRADIENT:COLOR_GRADIENT16,COLOR_PATTERN:COLOR_PATTERN16,RATIO:RATIO35,STRING:STRING42,UNION:UNION18,TempValidate:TempValidate81,Label:Label17}=import_ag_charts_community283._ModuleSupport,ALIGNMENT=UNION18(["left","right","center","justify"],"a justification value"),SankeySeriesLabelProperties=class extends Label17{constructor(){super(...arguments),this.spacing=1}};__decorateClass([TempValidate81(POSITIVE_NUMBER37)],SankeySeriesLabelProperties.prototype,"spacing",2);var SankeySeriesLinkProperties=class extends BaseProperties28{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate81(OR21(COLOR_GRADIENT16,COLOR_STRING31),{optional:!0})],SankeySeriesLinkProperties.prototype,"fill",2),__decorateClass([TempValidate81(RATIO35)],SankeySeriesLinkProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate81(COLOR_STRING31,{optional:!0})],SankeySeriesLinkProperties.prototype,"stroke",2),__decorateClass([TempValidate81(RATIO35)],SankeySeriesLinkProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate81(POSITIVE_NUMBER37)],SankeySeriesLinkProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate81(LINE_DASH25)],SankeySeriesLinkProperties.prototype,"lineDash",2),__decorateClass([TempValidate81(POSITIVE_NUMBER37)],SankeySeriesLinkProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate81(FUNCTION22,{optional:!0})],SankeySeriesLinkProperties.prototype,"itemStyler",2);var SankeySeriesNodeProperties=class extends BaseProperties28{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};__decorateClass([TempValidate81(POSITIVE_NUMBER37)],SankeySeriesNodeProperties.prototype,"spacing",2),__decorateClass([TempValidate81(POSITIVE_NUMBER37)],SankeySeriesNodeProperties.prototype,"width",2),__decorateClass([TempValidate81(ALIGNMENT)],SankeySeriesNodeProperties.prototype,"alignment",2),__decorateClass([TempValidate81(OR21(COLOR_GRADIENT16,COLOR_STRING31),{optional:!0})],SankeySeriesNodeProperties.prototype,"fill",2),__decorateClass([TempValidate81(RATIO35)],SankeySeriesNodeProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate81(COLOR_STRING31,{optional:!0})],SankeySeriesNodeProperties.prototype,"stroke",2),__decorateClass([TempValidate81(RATIO35)],SankeySeriesNodeProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate81(POSITIVE_NUMBER37)],SankeySeriesNodeProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate81(LINE_DASH25)],SankeySeriesNodeProperties.prototype,"lineDash",2),__decorateClass([TempValidate81(POSITIVE_NUMBER37)],SankeySeriesNodeProperties.prototype,"lineDashOffset",2),__decorateClass([TempValidate81(FUNCTION22,{optional:!0})],SankeySeriesNodeProperties.prototype,"itemStyler",2);var SankeySeriesProperties=class extends SeriesProperties13{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new FillGradientDefaults16,this.fillPatternDefaults=new FillPatternDefaults16,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new SankeySeriesLabelProperties,this.link=new SankeySeriesLinkProperties,this.node=new SankeySeriesNodeProperties,this.tooltip=new SeriesTooltip22}};__decorateClass([TempValidate81(ARRAY12,{optional:!0})],SankeySeriesProperties.prototype,"nodes",2),__decorateClass([TempValidate81(STRING42)],SankeySeriesProperties.prototype,"fromKey",2),__decorateClass([TempValidate81(STRING42)],SankeySeriesProperties.prototype,"toKey",2),__decorateClass([TempValidate81(STRING42)],SankeySeriesProperties.prototype,"idKey",2),__decorateClass([TempValidate81(STRING42,{optional:!0})],SankeySeriesProperties.prototype,"idName",2),__decorateClass([TempValidate81(STRING42,{optional:!0})],SankeySeriesProperties.prototype,"labelKey",2),__decorateClass([TempValidate81(STRING42,{optional:!0})],SankeySeriesProperties.prototype,"labelName",2),__decorateClass([TempValidate81(STRING42,{optional:!0})],SankeySeriesProperties.prototype,"sizeKey",2),__decorateClass([TempValidate81(STRING42,{optional:!0})],SankeySeriesProperties.prototype,"sizeName",2),__decorateClass([TempValidate81(OBJECT46)],SankeySeriesProperties.prototype,"fillGradientDefaults",2),__decorateClass([TempValidate81(OBJECT46)],SankeySeriesProperties.prototype,"fillPatternDefaults",2),__decorateClass([TempValidate81(ARRAY_OF5(COLOR_STRING_ARRAY13))],SankeySeriesProperties.prototype,"defaultColorRange",2),__decorateClass([TempValidate81(ARRAY_OF5(COLOR_STRING31))],SankeySeriesProperties.prototype,"defaultPatternFills",2),__decorateClass([TempValidate81(ARRAY_OF5(OR21(COLOR_GRADIENT16,COLOR_STRING31,COLOR_PATTERN16)))],SankeySeriesProperties.prototype,"fills",2),__decorateClass([TempValidate81(COLOR_STRING_ARRAY13)],SankeySeriesProperties.prototype,"strokes",2),__decorateClass([TempValidate81(OBJECT46)],SankeySeriesProperties.prototype,"label",2),__decorateClass([TempValidate81(OBJECT46)],SankeySeriesProperties.prototype,"link",2),__decorateClass([TempValidate81(OBJECT46)],SankeySeriesProperties.prototype,"node",2),__decorateClass([TempValidate81(OBJECT46)],SankeySeriesProperties.prototype,"tooltip",2);var{Transformable:Transformable3,applyShapeStyle:applyShapeStyle12,SeriesNodePickMode:SeriesNodePickMode18,CachedTextMeasurerPool:CachedTextMeasurerPool12,TextWrapper:TextWrapper6,TextUtils:TextUtils8,createDatumId:createDatumId22,getShapeStyle:getShapeStyle18,Rect:Rect9,BBox:BBox25}=import_ag_charts_community284._ModuleSupport,SankeySeries=class extends FlowProportionSeries{constructor(t){super({moduleCtx:t,pickModes:[SeriesNodePickMode18.NEAREST_NODE,SeriesNodePickMode18.EXACT_SHAPE_MATCH]}),this.properties=new SankeySeriesProperties}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new SankeyLink}nodeFactory(){return new Rect9}createNodeData(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:o,toKey:s,sizeKey:a,label:{spacing:r},node:{spacing:n,width:l,alignment:c}}=this.properties,{nodeGraph:h,links:u,maxPathLength:p}=this.getNodeGraph(D=>({...D,x:NaN,y:NaN,width:l,height:NaN}),D=>({...D,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),d=h,g=this.isLabelEnabled()?(e-l)*(1-p/(p+1)):0,f=(e-l-2*g)/(p-1),y=[];for(let D=0;D<p;D+=1){const k=g+D*f;y.push({index:D,size:0,nodes:[],x:k})}d.forEach(D=>{const{datum:k,linksBefore:A,linksAfter:M,maxPathLengthBefore:_,maxPathLengthAfter:O}=D,C=Math.max(A.reduce((L,{link:P})=>L+P.size,0),M.reduce((L,{link:P})=>L+P.size,0));if(A.length===0&&M.length===0||C===0){D.columnIndex=-1;return}let I;switch(c){case"left":I=y[_];break;case"right":I=y[p-1-O];break;case"center":{if(A.length!==0)I=y[_];else if(M.length!==0){const L=M.reduce((P,z)=>Math.min(P,z.node.maxPathLengthBefore),p)-1;I=y[L]}else I=y[0];break}case"justify":{I=M.length===0?y[p-1]:y[_];break}}k.x=I.x,k.size=C;const w=this.getLabelText(this.properties.label,{datum:k.datum,value:k.label,fromKey:o,toKey:s,sizeKey:a,size:C});k.label=String(w),I.nodes.push(D),I.size+=C,D.columnIndex=I.index}),d.forEach(D=>{let k=1/0,A=0;D.linksAfter.forEach(M=>{const _=M.node,{columnIndex:O}=_;O<k?(k=O,A=_.datum.size):O===k&&(A=Math.max(A,_.datum.size))}),D.closestColumnIndex=k,D.maxSizeOfClosestNodesAfter=A});const m=y.reduce((D,{size:k,nodes:A})=>{const M=(1-(A.length-1)*(n/i))/k;return Math.min(D,M)},1/0);for(let D=y.length-1;D>=0;D-=1)y[D].nodes.sort((A,M)=>A.closestColumnIndex-M.closestColumnIndex||A.maxSizeOfClosestNodesAfter-M.maxSizeOfClosestNodesAfter||A.datum.size-M.datum.size);layoutColumns(y,{seriesRectHeight:i,nodeSpacing:n,sizeScale:m});let b=!1;if(d.forEach(({datum:D,linksBefore:k,linksAfter:A})=>{b||(b=D.height<0);const M=D.y+D.height,_=I=>I.sort((w,L)=>{const P=w.node.datum,z=L.node.datum,R=P.y+P.height,B=z.y+z.height,E=Math.atan2(P.y-D.y,Math.abs(P.x-D.x))-Math.atan2(z.y-D.y,Math.abs(z.x-D.x)),F=Math.atan2(R-M,Math.abs(P.x-D.x))-Math.atan2(B-M,Math.abs(z.x-D.x));return E+F});let O=D.y;_(k).forEach(({link:I})=>{I.y2=O,O+=I.size*i*m});let C=D.y;_(A).forEach(({link:I})=>{I.y1=C,C+=I.size*i*m})}),b){import_ag_charts_core100.Logger.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const x=[],S=[],{fontSize:v}=this.properties.label,T=this.properties.label.getFont();return y.forEach((D,k)=>{const A=k===0,M=k===y.length-1;let _=-1/0;D.nodes.sort((O,C)=>O.datum.y-C.datum.y),D.nodes.forEach(({datum:O})=>{if(O.midPoint={x:O.x+O.width/2,y:O.y+O.height/2},x.push(O),O.label==null)return;const C=A?O.x-r:O.x+O.width+r,I=O.y+O.height/2;let w;if(!A&&!M){const R=I-TextUtils8.getLineHeight(v),B=I+TextUtils8.getLineHeight(v);let E=e;d.forEach(({datum:V})=>{V.x>O.x&&Math.max(V.y,R)<=Math.min(V.y+V.height,B)&&(E=Math.min(E,V.x-r))});const F=E-O.x-2*r;w=TextWrapper6.wrapText(O.label,{maxWidth:F,maxHeight:O.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(w==null||w===""){const R=A||M?r:r*2;w=TextWrapper6.wrapText(O.label,{maxWidth:f-R,maxHeight:O.height,font:this.properties.label,textWrap:"never"})}if(w==="")return;const{height:L}=CachedTextMeasurerPool12.measureText(w,{font:T,textAlign:"left",textBaseline:"middle"}),P=I-L/2,z=I+L/2;P>=_&&(S.push({x:C,y:I,leading:A,text:w}),_=z)})}),u.forEach(D=>{const{fromNode:k,toNode:A,size:M}=D;D.height=i*M*m,D.x1=k.x+l,D.x2=A.x,D.midPoint={x:(D.x1+D.x2)/2,y:(D.y1+D.y2)/2+D.height/2},x.push(D)}),{itemId:t,nodeData:x,labelData:S}}updateLabelSelection(t){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)}updateLabelNodes(t){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:a,fontFamily:r}=this.properties.label;e.each((n,{x:l,y:c,leading:h,text:u})=>{n.visible=!0,n.x=l,n.y=c,n.text=u,n.fill=i,n.fontStyle=o,n.fontWeight=s,n.fontSize=a,n.fontFamily=r,n.textAlign=h?"right":"left",n.textBaseline="middle"})}updateNodeSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId22([e.type,e.id]))}getBaseNodeStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:r,lineDashOffset:n}=e.node,l=t?e.highlightStyle.item:void 0;return getShapeStyle18({fill:l?.fill??i,fillOpacity:l?.fillOpacity??o,stroke:l?.stroke??s,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.node.strokeWidth),lineDash:l?.lineDash??r,lineDashOffset:l?.lineDashOffset??n},e.fillGradientDefaults,e.fillPatternDefaults)}getNodeStyleOverrides(t,e,i,o,s,a,r){const{id:n,properties:l}=this,{fills:c,strokes:h,defaultColorRange:u,defaultPatternFills:p}=l,{itemStyler:d}=l.node,g=a.fill??c[i%c.length],f=a.stroke??h[i%h.length],y=u[i%u.length].map(x=>({color:x})),m=p[i%p.length];let b;if(r||(b??(b={}),b.fill=g,b.stroke=f),d!=null){const x=this.cachedDatumCallback(createDatumId22(t,"node",r?"highlight":"node"),()=>{const{fillOpacity:S=1,strokeOpacity:v=1,strokeWidth:T=0,lineDash:D=[],lineDashOffset:k=0}=a;return this.callWithContext(d,{seriesId:n,datum:e,highlighted:r,label:s,size:o,fill:g,fillOpacity:S,stroke:f,strokeOpacity:v,strokeWidth:T,lineDash:D,lineDashOffset:k})});b??(b={}),Object.assign(b,x)}return getShapeStyle18(b,{...this.properties.fillGradientDefaults.toJson(),colorStops:y},{...this.properties.fillPatternDefaults.toJson(),fill:m,stroke:m})}updateNodeNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseNodeStyle(i),s=this.getShapeFillBBox();e.each((a,r)=>{const{datumIndex:n,size:l,label:c}=r,h=this.getNodeStyleOverrides(String(n.index),r.datum,n.index,l,c,o,i);a.x=r.x,a.y=r.y,a.width=Math.max(r.width,0),a.height=Math.max(r.height,0),applyShapeStyle12(a,o,h,s)})}getShapeFillBBox(){const t=this._nodeDataDependencies?.seriesRectWidth??0,e=this._nodeDataDependencies?.seriesRectHeight??0,i=new BBox25(0,0,t,e);return{series:i,axis:i}}updateLinkSelection(t){return t.datumSelection.update(t.nodeData,void 0,e=>createDatumId22([e.type,e.index,e.fromNode.id,e.toNode.id]))}getBaseLinkStyle(t){const{properties:e}=this,{fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,lineDash:r,lineDashOffset:n}=e.link,l=t?e.highlightStyle.item:void 0;return getShapeStyle18({fill:l?.fill??i,fillOpacity:l?.fillOpacity??o,stroke:l?.stroke??s,strokeOpacity:l?.strokeOpacity??a,strokeWidth:l?.strokeWidth??this.getStrokeWidth(e.link.strokeWidth),lineDash:l?.lineDash??r,lineDashOffset:l?.lineDashOffset??n},e.fillGradientDefaults,e.fillPatternDefaults)}getLinkStyleOverrides(t,e,i,o,s){const{id:a,properties:r}=this,{fills:n,strokes:l,defaultColorRange:c,defaultPatternFills:h}=r,{itemStyler:u}=r.link,p=o.fill??n[i%n.length],d=o.stroke??l[i%l.length],g=c[i%c.length].map(m=>({color:m})),f=h[i%h.length];let y;if(s||(y??(y={}),y.fill=p,y.stroke=d),u!=null){const m=this.cachedDatumCallback(createDatumId22(t,"link",s?"highlight":"node"),()=>{const{fillOpacity:b=1,strokeOpacity:x=1,strokeWidth:S=0,lineDash:v=[],lineDashOffset:T=0}=o;return this.callWithContext(u,{seriesId:a,datum:e,highlighted:s,fill:p,fillOpacity:b,stroke:d,strokeOpacity:x,strokeWidth:S,lineDash:v,lineDashOffset:T})});y??(y={}),Object.assign(y,m)}return getShapeStyle18(y,{...this.properties.fillGradientDefaults.toJson(),colorStops:g},{...this.properties.fillPatternDefaults.toJson(),fill:f,stroke:f})}updateLinkNodes(t){const{datumSelection:e,isHighlight:i}=t,o=this.getBaseLinkStyle(i),s=this.getShapeFillBBox();e.each((a,r)=>{const{datumIndex:n}=r,l=r.fromNode.datumIndex,c=this.getLinkStyleOverrides(String(n.index),r.datum,l.index,o,i);a.x1=r.x1,a.y1=r.y1,a.x2=r.x2,a.y2=r.y2,a.height=r.height,applyShapeStyle12(a,o,c,s),a.inset=a.strokeWidth/2})}getTooltipContent(t){const{id:e,linksProcessedData:i,nodesProcessedData:o,properties:s}=this,{fromKey:a,toKey:r,sizeKey:n,sizeName:l,tooltip:c}=s,h=this.contextNodeData?.nodeData.find(y=>y.datumIndex.type===t.type&&y.datumIndex.index===t.index);if(h==null)return;const u=h.type===0?h.fromNode.index:h.index,p=h.type===0?`${h.fromNode.label} - ${h.toNode.label}`:h.label,d=t.type===0?i?.dataSources.get(this.id)?.[t.index]:o?.dataSources.get(this.id)?.[t.index],g=h.size;let f;if(h.type===0){const y=h.fromNode.datumIndex,m=this.getBaseLinkStyle(!1);Object.assign(m,this.getLinkStyleOverrides(String(t.index),d,y.index,m,!1)),f=m}else{const y=h.label,m=this.getBaseNodeStyle(!1);Object.assign(m,this.getNodeStyleOverrides(String(t.index),d,t.index,g,y,m,!1)),f=m}return c.formatTooltip(this.properties,{title:p,symbol:this.legendItemSymbol(h.type,u,f),data:n!=null?[{label:l,fallbackLabel:n,value:String(g)}]:[]},{seriesId:e,datum:d,title:p,fromKey:a,toKey:r,sizeKey:n,sizeName:l,size:g,...f})}computeFocusBounds(t){if(t instanceof Rect9){const{x:e,y:i,width:o,height:s}=t,a=new BBox25(e,i,o,s);return Transformable3.toCanvas(this.contentGroup,a)}return t}};SankeySeries.className="SankeySeries",SankeySeries.type="sankey";var import_ag_charts_community285=require("ag-charts-community"),import_ag_charts_core101=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs23,seriesLabelOptionsDefs:seriesLabelOptionsDefs17,tooltipOptionsDefs:tooltipOptionsDefs22}=import_ag_charts_community285._ModuleSupport,sankeySeriesOptionsDef={type:(0,import_ag_charts_core101.required)((0,import_ag_charts_core101.constant)("sankey")),fromKey:(0,import_ag_charts_core101.required)(import_ag_charts_core101.string),toKey:(0,import_ag_charts_core101.required)(import_ag_charts_core101.string),sizeKey:import_ag_charts_core101.string,sizeName:import_ag_charts_core101.string,fills:(0,import_ag_charts_core101.arrayOf)(import_ag_charts_core101.colorUnion),strokes:(0,import_ag_charts_core101.arrayOf)(import_ag_charts_core101.color),label:{...seriesLabelOptionsDefs17,spacing:import_ag_charts_core101.positiveNumber},link:{itemStyler:import_ag_charts_core101.callback,...import_ag_charts_core101.fillOptionsDef,...import_ag_charts_core101.strokeOptionsDef,...import_ag_charts_core101.lineDashOptionsDef},node:{width:import_ag_charts_core101.positiveNumber,spacing:import_ag_charts_core101.positiveNumber,alignment:(0,import_ag_charts_core101.union)("left","center","right","justify"),itemStyler:import_ag_charts_core101.callback,...import_ag_charts_core101.fillOptionsDef,...import_ag_charts_core101.strokeOptionsDef,...import_ag_charts_core101.lineDashOptionsDef},tooltip:tooltipOptionsDefs22,...commonSeriesOptionsDefs23};sankeySeriesOptionsDef.fillGradientDefaults=import_ag_charts_core101.fillGradientDefaults,sankeySeriesOptionsDef.fillPatternDefaults=import_ag_charts_core101.fillPatternDefaults,sankeySeriesOptionsDef.defaultColorRange=(0,import_ag_charts_core101.arrayOf)((0,import_ag_charts_core101.arrayOf)(import_ag_charts_core101.color)),sankeySeriesOptionsDef.defaultPatternFills=(0,import_ag_charts_core101.arrayOf)(import_ag_charts_core101.color);var SankeyModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:t=>new SankeySeries(t),tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community286._ModuleSupport.FILL_PATTERN_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:import_ag_charts_community286._ModuleSupport.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}}},SankeySeriesModule={type:"series",name:"sankey",chartType:"flow-proportion",enterprise:!0,options:sankeySeriesOptionsDef,create:t=>new SankeySeries(t)},import_ag_charts_community290=require("ag-charts-community"),import_ag_charts_community288=require("ag-charts-community"),import_ag_charts_community287=require("ag-charts-community"),{HierarchySeriesProperties,HighlightStyle,SeriesTooltip:SeriesTooltip23,TempValidate:TempValidate82,COLOR_STRING:COLOR_STRING32,FUNCTION:FUNCTION23,NUMBER:NUMBER23,OBJECT:OBJECT47,POSITIVE_NUMBER:POSITIVE_NUMBER38,RATIO:RATIO36,STRING:STRING43}=import_ag_charts_community287._ModuleSupport,SunburstSeriesTileHighlightStyle=class extends HighlightStyle{constructor(){super(...arguments),this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizedLabel}};__decorateClass([TempValidate82(STRING43,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"fill",2),__decorateClass([TempValidate82(RATIO36,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"fillOpacity",2),__decorateClass([TempValidate82(COLOR_STRING32,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"stroke",2),__decorateClass([TempValidate82(POSITIVE_NUMBER38,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"strokeWidth",2),__decorateClass([TempValidate82(RATIO36,{optional:!0})],SunburstSeriesTileHighlightStyle.prototype,"strokeOpacity",2),__decorateClass([TempValidate82(OBJECT47)],SunburstSeriesTileHighlightStyle.prototype,"label",2),__decorateClass([TempValidate82(OBJECT47)],SunburstSeriesTileHighlightStyle.prototype,"secondaryLabel",2);var SunburstSeriesProperties=class extends HierarchySeriesProperties{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new SunburstSeriesTileHighlightStyle,this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizedSecondaryLabel,this.tooltip=new SeriesTooltip23}};__decorateClass([TempValidate82(STRING43,{optional:!0})],SunburstSeriesProperties.prototype,"sizeName",2),__decorateClass([TempValidate82(STRING43,{optional:!0})],SunburstSeriesProperties.prototype,"labelKey",2),__decorateClass([TempValidate82(STRING43,{optional:!0})],SunburstSeriesProperties.prototype,"secondaryLabelKey",2),__decorateClass([TempValidate82(RATIO36)],SunburstSeriesProperties.prototype,"fillOpacity",2),__decorateClass([TempValidate82(POSITIVE_NUMBER38)],SunburstSeriesProperties.prototype,"strokeWidth",2),__decorateClass([TempValidate82(RATIO36)],SunburstSeriesProperties.prototype,"strokeOpacity",2),__decorateClass([TempValidate82(POSITIVE_NUMBER38)],SunburstSeriesProperties.prototype,"cornerRadius",2),__decorateClass([TempValidate82(NUMBER23,{optional:!0})],SunburstSeriesProperties.prototype,"sectorSpacing",2),__decorateClass([TempValidate82(NUMBER23,{optional:!0})],SunburstSeriesProperties.prototype,"padding",2),__decorateClass([TempValidate82(FUNCTION23,{optional:!0})],SunburstSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate82(OBJECT47)],SunburstSeriesProperties.prototype,"highlightStyle",2),__decorateClass([TempValidate82(OBJECT47)],SunburstSeriesProperties.prototype,"label",2),__decorateClass([TempValidate82(OBJECT47)],SunburstSeriesProperties.prototype,"secondaryLabel",2),__decorateClass([TempValidate82(OBJECT47)],SunburstSeriesProperties.prototype,"tooltip",2);var{fromToMotion:fromToMotion6,normalizeAngle360:normalizeAngle3608,createDatumId:createDatumId23,Sector:Sector7,Group:Group21,ScalableGroup:ScalableGroup2,Selection:Selection16,TransformableText:TransformableText3,BBox:BBox26,applyShapeStyle:applyShapeStyle13,getShapeStyle:getShapeStyle19}=import_ag_charts_community288._ModuleSupport,SunburstNode=class extends import_ag_charts_community288._ModuleSupport.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function setAngleData(t,e=0,i=2*Math.PI/t.sumSize){for(const o of t.children){const s=e+o.sumSize*i;o.startAngle=e,o.endAngle=s,setAngleData(o,e,i),e=s}}var SunburstSeries=class extends import_ag_charts_community288._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.NodeClass=SunburstNode,this.properties=new SunburstSeriesProperties,this.scalingGroup=this.contentGroup.appendChild(new ScalableGroup2),this.sectorGroup=this.scalingGroup.appendChild(new Group21),this.sectorLabelGroup=this.scalingGroup.appendChild(new Group21),this.highlightSectorGroup=this.scalingGroup.appendChild(new Group21),this.datumSelection=Selection16.select(this.sectorGroup,Sector7),this.labelSelection=Selection16.select(this.sectorLabelGroup,Group21),this.highlightSelection=Selection16.select(this.highlightSectorGroup,Sector7)}processData(){super.processData(),setAngleData(this.rootNode)}updateSelections(){const t=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(t!=null?[t]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(e==null||e.seriesRect==null)return;const o=Array.from(this.rootNode),s=a=>{a.append([new TransformableText3({tag:0}),new TransformableText3({tag:1})])};this.datumSelection.update(o,void 0,a=>this.getDatumId(a)),this.labelSelection.update(o,s,a=>this.getDatumId(a))}getItemBaseStyle(t){const{properties:e}=this,i=t?e.highlightStyle:void 0;return getShapeStyle19({fill:i?.fill,fillOpacity:i?.fillOpacity??e.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(e.strokeWidth),strokeOpacity:i?.strokeOpacity??e.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults)}getItemStyleOverrides(t,e,i,o,s,a){const{id:r,properties:n,colorScale:l}=this,{fills:c,strokes:h,itemStyler:u}=n,p=t[0],d=s.fill??c[p%c.length],g=s.stroke??h[p%h.length],f={};if(a||(f.fill=o!=null?l.convert(o):d,f.stroke=g),u!=null){const y=this.cachedDatumCallback(createDatumId23(t.join(":"),a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:e,depth:i,highlighted:a,fill:d,stroke:g,...s}));Object.assign(f,y)}return getShapeStyle19(f,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateNodes(){const{chart:t,data:e,maxDepth:i}=this;if(t==null||e==null)return;const{width:o,height:s}=t.seriesRect,{sectorSpacing:a=0,padding:r=0,cornerRadius:n,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:p,sizeKey:d,sizeName:g}=this.properties;this.contentGroup.translationX=o/2,this.contentGroup.translationY=s/2;const f=a*.5,y=Math.min(o,s)/2,m=y/(i+1),b=-Math.PI/2,x={series:new BBox26(-y,-y,2*y,2*y),axis:new BBox26(-y,-y,2*y,2*y)};this.rootNode?.walk(A=>{const{startAngle:M,endAngle:_}=A;if(A.depth!=null){const O=(M+_)/2+b,C=(A.depth+.5)*m;A.midPoint.x=Math.cos(O)*C,A.midPoint.y=Math.sin(O)*C}}),this.rootNode?.walk(A=>{const{datum:M,depth:_,startAngle:O,endAngle:C,parent:I,sumSize:w}=A;A.label=void 0,A.secondaryLabel=void 0,A.contentHeight=0;let L;if(M!=null&&_!=null&&u!=null){const Q=M[u];L=this.getLabelText(this.properties.label,{depth:_,datum:M,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:p,sizeKey:d,sizeName:g,value:Q})}L===""&&(L=void 0);let P;if(M!=null&&_!=null&&p!=null){const Q=M[p];P=this.getLabelText(this.properties.secondaryLabel,{depth:_,datum:M,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:p,sizeKey:d,sizeName:g,value:Q})}if(P===""&&(P=void 0),_==null)return;const z=_*m+f,R=(_+1)*m-f,B=z>f?f/z:f,E=R>f?f/R:f,F=O+B,G=C+B-F,W=O+E,q=C+E-W,j=Q=>{if(_===0&&I?.sumSize===w)return{width:2*Math.sqrt(R**2-(Q*.5)**2),height:Q,meta:0};const ot=Q,lt=2*Math.sqrt(R**2-(z+ot)**2),ct=G<Math.PI?2*z*Math.tan(G*.5):1/0,ht=Math.min(lt,ct),dt=Math.PI/4;let ut,pt;return _===0?(ut=Q,pt=Math.sqrt(R**2-(ut/2)**2)-Q/(2*Math.tan(q*.5))):normalizeAngle3608(G)<dt?(ut=2*z*Math.tan(G*.5),pt=Math.sqrt(R**2-(ut/2)**2)-z):(pt=0,ut=0),ht>=pt?{width:ht,height:ot,meta:1}:{width:pt,height:ut,meta:2}},$=formatLabels(L,this.properties.label,P,this.properties.secondaryLabel,{padding:r},j);if($==null)return;const{width:X,height:Y,meta:U,label:Z,secondaryLabel:J}=$,K=b+(O+C)/2,at=Math.sin(K)>=0,rt=Math.cos(K)>=0,tt=(at?3:12)&(rt?6:9);let it;switch(U){case 0:it=0;break;case 1:{const et=R-(m-Y)*.58,ot=Math.sqrt((R-r)**2-(X/2)**2);it=Math.min(et,ot);break}case 2:if(_===0){const Q=Y/(2*Math.tan(G*.5))+X*.5,et=Math.sqrt(R**2-(Y*.5)**2)-X*.5;it=(Q+et)*.5}else it=(z+R)*.5;break}if(Z!=null){const{fontStyle:Q="normal",fontFamily:et,fontWeight:ot="normal",color:lt="black"}=this.properties.label;A.label={...Z,fontStyle:Q,fontFamily:et,fontWeight:ot,color:lt,labelPlacement:U,circleQuarter:tt,radius:it,theta:K}}if(J!=null){const{fontStyle:Q="normal",fontFamily:et,fontWeight:ot="normal",color:lt="black"}=this.properties.secondaryLabel;A.secondaryLabel={...J,fontStyle:Q,fontFamily:et,fontWeight:ot,color:lt,labelPlacement:U,circleQuarter:tt,radius:it,theta:K}}A.contentHeight=$.height});const S=(A,M,_,O)=>{const{datum:C,datumIndex:I,depth:w,colorValue:L,startAngle:P,endAngle:z}=A;if(w==null){M.visible=!1;return}M.visible=!0;const R=this.getItemStyleOverrides(I,C,w,L,_,O),B=R.fill??_.fill,E=R.strokeWidth??_.strokeWidth,F=import_ag_charts_community288._ModuleSupport.isGradientFill(B)&&B.bounds!=="item"?x:void 0;applyShapeStyle13(M,_,R,F),M.centerX=0,M.centerY=0,M.innerRadius=w*m,M.outerRadius=(w+1)*m,M.startAngle=P+b,M.endAngle=z+b,M.inset=f+E*.5,M.cornerRadius=n},v=this.getItemBaseStyle(!1);this.datumSelection.each((A,M)=>{S(M,A,v,!1)});const T=this.getItemBaseStyle(!0);this.highlightSelection.each((A,M)=>{S(M,A,T,!0)});const D=(A,M,_,O)=>{const{depth:C,contentHeight:I}=A,w=_===0,L=w?A.label:A.secondaryLabel;if(C==null||L==null){M.visible=!1;return}const{labelPlacement:P,circleQuarter:z,radius:R,theta:B}=L;let E;switch(O&&(E=(w?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),M.text=L.text,M.fontSize=L.fontSize,M.lineHeight=L.lineHeight,M.fontStyle=L.fontStyle,M.fontFamily=L.fontFamily,M.fontWeight=L.fontWeight,M.fill=E??L.color,P){case 0:M.textAlign="center",M.textBaseline="top",M.translationX=0,M.translationY=(w?0:I-L.height)-I*.5,M.rotation=0;break;case 1:{const F=(z&3)!==0,V=w===!F?R:R-(I-L.height);M.textAlign="center",M.textBaseline=F?"bottom":"top",M.translationX=Math.cos(B)*V,M.translationY=Math.sin(B)*V,M.rotation=F?B-Math.PI*.5:B+Math.PI*.5;break}case 2:{const F=(z&6)!==0,V=w===!F?(I-L.height)*.5:(L.height-I)*.5;M.textAlign="center",M.textBaseline="middle",M.translationX=Math.cos(B)*R+Math.cos(B+Math.PI/2)*V,M.translationY=Math.sin(B)*R+Math.sin(B+Math.PI/2)*V,M.rotation=F?B:B+Math.PI;break}}M.visible=!0},k=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(TransformableText3).forEach(A=>{const M=A.closestDatum();D(M,A,A.tag,M===k)})}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,tooltip:h}=i,u=t.reduce((S,v)=>S?.children[v],this.rootNode);if(u==null)return;const{datum:p,depth:d}=u;if(p==null||d==null)return;const g=[],f=r!=null?p[r]:void 0;f!=null&&g.push({label:n,fallbackLabel:r,value:f});const y=l!=null?p[l]:void 0;y!=null&&g.push({label:c,fallbackLabel:l,value:y});const m=this.getItemBaseStyle(!1);Object.assign(m,this.getItemStyleOverrides(t,p,d,y,m,!1));const b=m.fill,x=getShapeStyle19({shape:"square",fill:b,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},i.fillGradientDefaults,i.fillPatternDefaults);return import_ag_charts_community288._ModuleSupport.isGradientFill(x.fill)&&(x.fill={...x.fill,gradient:"linear",rotation:0,reverse:!1}),h.formatTooltip(i,{title:o!=null?p[o]:void 0,symbol:{marker:x},data:g},{seriesId:e,datum:p,title:void 0,depth:d,labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,...m})}createNodeData(){}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.datumSelection.selectByClass(Sector7))}animateEmptyUpdateReady(){fromToMotion6(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(t){return t}};SunburstSeries.className="SunburstSeries",SunburstSeries.type="sunburst";var import_ag_charts_community289=require("ag-charts-community"),import_ag_charts_core102=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs24,autoSizedLabelOptionsDefs:autoSizedLabelOptionsDefs5,tooltipOptionsDefs:tooltipOptionsDefs23,without:without6}=import_ag_charts_community289._ModuleSupport,sunburstSeriesOptionsDef={type:(0,import_ag_charts_core102.required)((0,import_ag_charts_core102.constant)("sunburst")),labelKey:import_ag_charts_core102.string,secondaryLabelKey:import_ag_charts_core102.string,childrenKey:import_ag_charts_core102.string,sizeKey:import_ag_charts_core102.string,colorKey:import_ag_charts_core102.string,sizeName:import_ag_charts_core102.string,colorName:import_ag_charts_core102.string,fills:(0,import_ag_charts_core102.arrayOf)(import_ag_charts_core102.colorUnion),strokes:(0,import_ag_charts_core102.arrayOf)(import_ag_charts_core102.color),colorRange:(0,import_ag_charts_core102.arrayOf)(import_ag_charts_core102.color),sectorSpacing:import_ag_charts_core102.positiveNumber,cornerRadius:import_ag_charts_core102.positiveNumber,padding:import_ag_charts_core102.positiveNumber,itemStyler:import_ag_charts_core102.callback,label:{spacing:import_ag_charts_core102.positiveNumber,...autoSizedLabelOptionsDefs5},secondaryLabel:autoSizedLabelOptionsDefs5,tooltip:tooltipOptionsDefs23,...commonSeriesOptionsDefs24,...without6(import_ag_charts_core102.fillOptionsDef,["fill"]),...without6(import_ag_charts_core102.strokeOptionsDef,["stroke"]),highlightStyle:{label:{color:import_ag_charts_core102.color},secondaryLabel:{color:import_ag_charts_core102.color},...import_ag_charts_core102.fillOptionsDef,...import_ag_charts_core102.strokeOptionsDef}},{FONT_SIZE_RATIO:FONT_SIZE_RATIO3}=import_ag_charts_community290._ModuleSupport,SunburstModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:t=>new SunburstSeries(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:import_ag_charts_community290._ModuleSupport.FILL_PATTERN_DEFAULTS,label:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[FONT_SIZE_RATIO3.LARGE]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},9/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:[FONT_SIZE_RATIO3.SMALLEST]},minimumFontSize:{$round:[{$mul:[{$ref:"fontSize"},7/12]}]},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}}},SunburstSeriesModule={type:"series",name:"sunburst",chartType:"hierarchy",enterprise:!0,options:sunburstSeriesOptionsDef,create:t=>new SunburstSeries(t)},import_ag_charts_community294=require("ag-charts-community"),import_ag_charts_community292=require("ag-charts-community"),import_ag_charts_core103=require("ag-charts-core"),import_ag_charts_community291=require("ag-charts-community"),{BaseProperties:BaseProperties29,HierarchySeriesProperties:HierarchySeriesProperties2,HighlightStyle:HighlightStyle2,SeriesTooltip:SeriesTooltip24,TempValidate:TempValidate83,BOOLEAN:BOOLEAN36,COLOR_STRING:COLOR_STRING33,FUNCTION:FUNCTION24,NUMBER:NUMBER24,OBJECT:OBJECT48,POSITIVE_NUMBER:POSITIVE_NUMBER39,RATIO:RATIO37,STRING:STRING44,STRING_ARRAY,TEXT_ALIGN:TEXT_ALIGN3,VERTICAL_ALIGN:VERTICAL_ALIGN2,COLOR_GRADIENT:COLOR_GRADIENT17,COLOR_PATTERN:COLOR_PATTERN17,OR:OR22,Label:Label18}=import_ag_charts_community291._ModuleSupport,TreemapGroupLabel=class extends Label18{constructor(){super(...arguments),this.spacing=0}};__decorateClass([TempValidate83(NUMBER24)],TreemapGroupLabel.prototype,"spacing",2);var TreemapSeriesGroup=class extends BaseProperties29{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new TreemapGroupLabel}};__decorateClass([TempValidate83(OR22(COLOR_GRADIENT17,COLOR_STRING33,COLOR_PATTERN17),{optional:!0})],TreemapSeriesGroup.prototype,"fill",2),__decorateClass([TempValidate83(RATIO37)],TreemapSeriesGroup.prototype,"fillOpacity",2),__decorateClass([TempValidate83(COLOR_STRING33,{optional:!0})],TreemapSeriesGroup.prototype,"stroke",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39)],TreemapSeriesGroup.prototype,"strokeWidth",2),__decorateClass([TempValidate83(RATIO37)],TreemapSeriesGroup.prototype,"strokeOpacity",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39)],TreemapSeriesGroup.prototype,"cornerRadius",2),__decorateClass([TempValidate83(TEXT_ALIGN3)],TreemapSeriesGroup.prototype,"textAlign",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39)],TreemapSeriesGroup.prototype,"gap",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39)],TreemapSeriesGroup.prototype,"padding",2),__decorateClass([TempValidate83(BOOLEAN36)],TreemapSeriesGroup.prototype,"interactive",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesGroup.prototype,"label",2);var TreemapSeriesTile=class extends BaseProperties29{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizedSecondaryLabel}};__decorateClass([TempValidate83(OR22(COLOR_GRADIENT17,COLOR_STRING33,COLOR_PATTERN17),{optional:!0})],TreemapSeriesTile.prototype,"fill",2),__decorateClass([TempValidate83(RATIO37)],TreemapSeriesTile.prototype,"fillOpacity",2),__decorateClass([TempValidate83(COLOR_STRING33,{optional:!0})],TreemapSeriesTile.prototype,"stroke",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39,{optional:!0})],TreemapSeriesTile.prototype,"strokeWidth",2),__decorateClass([TempValidate83(RATIO37)],TreemapSeriesTile.prototype,"strokeOpacity",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39)],TreemapSeriesTile.prototype,"cornerRadius",2),__decorateClass([TempValidate83(TEXT_ALIGN3)],TreemapSeriesTile.prototype,"textAlign",2),__decorateClass([TempValidate83(VERTICAL_ALIGN2)],TreemapSeriesTile.prototype,"verticalAlign",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39)],TreemapSeriesTile.prototype,"gap",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39)],TreemapSeriesTile.prototype,"padding",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesTile.prototype,"label",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesTile.prototype,"secondaryLabel",2);var TreemapSeriesGroupHighlightStyle=class extends BaseProperties29{constructor(){super(...arguments),this.label=new AutoSizedLabel}};__decorateClass([TempValidate83(STRING44,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"fill",2),__decorateClass([TempValidate83(RATIO37,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"fillOpacity",2),__decorateClass([TempValidate83(COLOR_STRING33,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"stroke",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"strokeWidth",2),__decorateClass([TempValidate83(RATIO37,{optional:!0})],TreemapSeriesGroupHighlightStyle.prototype,"strokeOpacity",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesGroupHighlightStyle.prototype,"label",2);var TreemapSeriesTileHighlightStyle=class extends BaseProperties29{constructor(){super(...arguments),this.label=new AutoSizedLabel,this.secondaryLabel=new AutoSizedSecondaryLabel}};__decorateClass([TempValidate83(STRING44,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"fill",2),__decorateClass([TempValidate83(RATIO37,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"fillOpacity",2),__decorateClass([TempValidate83(COLOR_STRING33,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"stroke",2),__decorateClass([TempValidate83(POSITIVE_NUMBER39,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"strokeWidth",2),__decorateClass([TempValidate83(RATIO37,{optional:!0})],TreemapSeriesTileHighlightStyle.prototype,"strokeOpacity",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesTileHighlightStyle.prototype,"label",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesTileHighlightStyle.prototype,"secondaryLabel",2);var TreemapSeriesHighlightStyle=class extends HighlightStyle2{constructor(){super(...arguments),this.group=new TreemapSeriesGroupHighlightStyle,this.tile=new TreemapSeriesTileHighlightStyle}};__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesHighlightStyle.prototype,"group",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesHighlightStyle.prototype,"tile",2);var TreemapSeriesProperties=class extends HierarchySeriesProperties2{constructor(){super(...arguments),this.highlightStyle=new TreemapSeriesHighlightStyle,this.tooltip=new SeriesTooltip24,this.group=new TreemapSeriesGroup,this.tile=new TreemapSeriesTile,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};__decorateClass([TempValidate83(STRING44,{optional:!0})],TreemapSeriesProperties.prototype,"sizeName",2),__decorateClass([TempValidate83(STRING44,{optional:!0})],TreemapSeriesProperties.prototype,"labelKey",2),__decorateClass([TempValidate83(STRING44,{optional:!0})],TreemapSeriesProperties.prototype,"secondaryLabelKey",2),__decorateClass([TempValidate83(FUNCTION24,{optional:!0})],TreemapSeriesProperties.prototype,"itemStyler",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesProperties.prototype,"highlightStyle",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesProperties.prototype,"tooltip",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesProperties.prototype,"group",2),__decorateClass([TempValidate83(OBJECT48)],TreemapSeriesProperties.prototype,"tile",2),__decorateClass([TempValidate83(STRING_ARRAY)],TreemapSeriesProperties.prototype,"undocumentedGroupFills",2),__decorateClass([TempValidate83(STRING_ARRAY)],TreemapSeriesProperties.prototype,"undocumentedGroupStrokes",2);var{TextUtils:TextUtils9,TextWrapper:TextWrapper7,createDatumId:createDatumId24,Rect:Rect10,Group:Group22,BBox:BBox27,Selection:Selection17,Text:Text9,Transformable:Transformable4,applyShapeStyle:applyShapeStyle14,getShapeStyle:getShapeStyle20}=import_ag_charts_community292._ModuleSupport,TreemapNode=class extends import_ag_charts_community292._ModuleSupport.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}},tempText=new Text9;function getTextSize(t,e){const{fontStyle:i,fontWeight:o,fontSize:s,fontFamily:a}=e;tempText.setProperties({text:t,fontStyle:i,fontWeight:o,fontSize:s,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:r,height:n}=tempText.getBBox();return{width:r,height:n}}function nodeSize(t){return t.children.length>0?t.sumSize-t.sizeValue:t.sizeValue}var textAlignFactors2={left:0,center:.5,right:1},verticalAlignFactors4={top:0,middle:.5,bottom:1},DistantGroup=class extends import_ag_charts_community292._ModuleSupport.Group{distanceSquared(t,e){return this.getBBox().distanceSquared(t,e)}},TreemapSeries=class extends import_ag_charts_community292._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.NodeClass=TreemapNode,this.properties=new TreemapSeriesProperties,this.rectGroup=this.contentGroup.appendChild(new Group22),this.datumSelection=Selection17.select(this.rectGroup,Rect10),this.labelSelection=Selection17.select(this.labelGroup,Group22),this.highlightSelection=Selection17.select(this.rectGroup,Rect10)}groupTitleHeight(t,e){const{labelValue:i}=t,{label:o}=this.properties.group,s=3;if(i!=null){if(o.fontSize>e.width/s||o.fontSize>e.height/s)return;{const{height:a}=getTextSize(i,o);return Math.max(a,o.fontSize)}}}getNodePadding(t,e){if(t.parent==null)return{top:0,right:0,bottom:0,left:0};if(t.children.length===0){const{padding:r}=this.properties.tile;return{top:r,right:r,bottom:r,left:r}}const{label:{spacing:i},padding:o}=this.properties.group,s=this.groupTitleHeight(t,e),a=s!=null?s+i:0;return{top:o+a,right:o,bottom:o,left:o}}sortChildren({children:t}){const e=Array.from(t,(o,s)=>s).filter(o=>nodeSize(t[o])>0).sort((o,s)=>nodeSize(t[s])-nodeSize(t[o]));return{sortedChildrenIndices:e,childAt:o=>{const s=e[o];return t[s]}}}squarify(t,e){const{datum:i,children:o}=t;if(e.width<=0||e.height<=0){t.bbox=void 0,t.padding=void 0,t.midPoint.x=NaN,t.midPoint.y=NaN;return}const s=i!=null?this.getNodePadding(t,e):{top:0,right:0,bottom:0,left:0};t.parent==null?(t.bbox=void 0,t.padding=void 0,t.midPoint.x=NaN,t.midPoint.y=NaN):(t.bbox=e,t.padding=s,t.midPoint.x=e.x+e.width/2,t.midPoint.y=e.y);const{sortedChildrenIndices:a,childAt:r}=this.sortChildren(t),n=a.every(v=>o[v].children.length===0),l=1,c=e.width-s.left-s.right,h=e.height-s.top-s.bottom;if(c<=0||h<=0)return;const u=a.length;let p=0,d=0,g=1/0,f=a.reduce((v,T)=>v+nodeSize(o[T]),0);const y=new BBox27(e.x+s.left,e.y+s.top,c,h),m=y.clone();let b=0;for(;b<u;){const v=nodeSize(r(b)),T=nodeSize(r(d)),D=m.width<m.height;p+=v;const k=D?m.height:m.width,A=D?m.width:m.height,M=A*T/p;let _=k*p/f;const O=Math.max(M,_)/Math.min(M,_),C=Math.abs(l-O);if(C<g){g=C,b++;continue}p-=v,_=k*p/f;let I=D?m.x:m.y;for(let w=d;w<b;w++){const L=r(w),P=nodeSize(L),z=D?I:m.x,R=D?m.y:I,B=A*P/p,E=D?B:_,F=D?_:B,V=new BBox27(z,R,E,F);this.applyGap(y,V,n),this.squarify(L,V),f-=P,I+=B}D?(m.y+=_,m.height-=_):(m.x+=_,m.width-=_),d=b,p=0,g=1/0}const x=m.width<m.height;let S=x?m.x:m.y;for(let v=d;v<u;v++){const T=r(v),D=x?S:m.x,k=x?m.y:S,A=nodeSize(T)/f,M=m.width*(x?A:1),_=m.height*(x?1:A),O=new BBox27(D,k,M,_);this.applyGap(y,O,n),this.squarify(T,O),S+=x?M:_}}applyGap(t,e,i){const o=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,s=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=s(t),r=s(e);["top","right","bottom","left"].forEach(l=>{(0,import_ag_charts_core103.isNumberEqual)(a[l],r[l])||e.shrink(o,l)})}createNodeData(){}getGroupBaseStyle(t){const{properties:e}=this,{group:i}=e,o=t?e.highlightStyle.group:void 0;return getShapeStyle20({fill:o?.fill??i.fill,fillOpacity:o?.fillOpacity??i.fillOpacity,stroke:o?.stroke??i.stroke,strokeWidth:o?.strokeWidth??i.strokeWidth,strokeOpacity:o?.strokeOpacity??i.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults)}getGroupStyleOverrides(t,e,i,o,s){const{id:a,properties:r}=this,{undocumentedGroupFills:n,undocumentedGroupStrokes:l,itemStyler:c}=r,h=o.fill??n[Math.min(i??0,n.length)],u=o.stroke??l[Math.min(i??0,l.length)],p={};if(s||(p.fill=h,p.stroke=u),c!=null){const d=this.cachedDatumCallback(createDatumId24(t.join(":"),s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:e,depth:i,highlighted:s,fill:h,stroke:u,...o}));Object.assign(p,d)}return getShapeStyle20(p,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}getTileBaseStyle(t){const{properties:e}=this,{tile:i}=e,o=t?e.highlightStyle.tile:void 0;return getShapeStyle20({fill:o?.fill??i.fill,fillOpacity:o?.fillOpacity??i.fillOpacity,stroke:o?.stroke??i.stroke,strokeWidth:o?.strokeWidth??i.strokeWidth,strokeOpacity:o?.strokeOpacity??i.strokeOpacity},e.fillGradientDefaults,e.fillPatternDefaults)}getTileStyleOverrides(t,e,i,o,s,a){const{id:r,properties:n,colorScale:l}=this,{fills:c,strokes:h,itemStyler:u}=n,p=t[0],d=s.fill??c[p%c.length],g=s.stroke??h[p%h.length],f={};if(a||(f.fill=o!=null?l.convert(o):d,f.stroke=g),u!=null){const y=this.cachedDatumCallback(createDatumId24(t.join(":"),a?"highlight":"node"),()=>this.callWithContext(u,{seriesId:r,datum:e,depth:i,highlighted:a,fill:d,stroke:g,...s}));Object.assign(f,y)}return getShapeStyle20(f,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults)}updateSelections(){let t=this.ctx.highlightManager?.getActiveHighlight();if(t!=null&&!this.properties.group.interactive&&t.children.length!==0&&(t=void 0),this.highlightSelection.update(t!=null?[t]:[],void 0,s=>this.getDatumId(s)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:e}=this.chart??{};if(!e)return;const i=Array.from(this.rootNode),o=s=>{s.append([new Text9({tag:0}),new Text9({tag:1})])};this.datumSelection.update(i,void 0,s=>this.getDatumId(s)),this.labelSelection.update(i,o,s=>this.getDatumId(s))}updateNodes(){const{rootNode:t,data:e}=this,{childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,highlightStyle:c,tile:h,group:u}=this.properties,{seriesRect:p}=this.chart??{};if(!p||!e)return;this.rootNode?.walk(D=>{const{datum:k,depth:A,children:M}=D,_=M.length===0,O=_?h.label:u.label;let C;if(k!=null&&A!=null&&a!=null){const w=k[a];C=this.getLabelText(O,{depth:A,datum:k,childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,value:w})}C===""&&(C=void 0);let I;if(_&&k!=null&&A!=null&&r!=null){const w=k[r];I=this.getLabelText(h.secondaryLabel,{depth:A,datum:k,childrenKey:i,colorKey:o,colorName:s,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,value:w})}I===""&&(I=void 0),D.labelValue=C,D.secondaryLabelValue=I});const{width:d,height:g}=p;this.squarify(t,new BBox27(0,0,d,g)),this.rootNode?.walk(D=>{const{bbox:k,children:A,labelValue:M,secondaryLabelValue:_}=D;if(D.label=void 0,D.secondaryLabel=void 0,k!=null)if(A.length===0){const O={width:k.width,height:k.height,meta:null},C=formatLabels(M,this.properties.tile.label,_,this.properties.tile.secondaryLabel,{padding:h.padding},()=>O);if(C==null)return;const{height:I,label:w,secondaryLabel:L}=C,{textAlign:P,verticalAlign:z,padding:R}=h,B=textAlignFactors2[P]??.5,E=k.x+R+(k.width-2*R)*B,F=verticalAlignFactors4[z]??.5,V=k.y+R+I*.5+(k.height-2*R-I)*F;if(w!=null){const{fontStyle:G="normal",fontFamily:W,fontWeight:H="normal",color:q="black"}=this.properties.tile.label;D.label={text:w.text,fontSize:w.fontSize,lineHeight:w.lineHeight,fontStyle:G,fontFamily:W,fontWeight:H,color:q,textAlign:P,verticalAlign:"middle",x:E,y:V-(I-w.height)*.5}}if(L!=null){const{fontStyle:G="normal",fontFamily:W,fontWeight:H="normal",color:q="black"}=this.properties.tile.secondaryLabel;D.secondaryLabel={text:L.text,fontSize:L.fontSize,lineHeight:L.fontSize,fontStyle:G,fontFamily:W,fontWeight:H,color:q,textAlign:P,verticalAlign:"middle",x:E,y:V+(I-L.height)*.5}}}else{if(M==null)return;{const{padding:O,textAlign:C}=u,I=this.groupTitleHeight(D,k);if(I==null)return;const w=k.width-2*O,L=TextWrapper7.wrapText(M,{maxWidth:k.width-2*O,font:u.label,textWrap:"never"}),P=textAlignFactors2[C]??.5,{fontStyle:z="normal",fontFamily:R,fontWeight:B="normal",color:E="black"}=this.properties.group.label;D.label={text:L,fontSize:u.label.fontSize,lineHeight:TextUtils9.getLineHeight(u.label.fontSize),fontStyle:z,fontFamily:R,fontWeight:B,color:E,textAlign:C,verticalAlign:"middle",x:k.x+O+w*P,y:k.y+O+I*.5}}}});const f={series:new BBox27(0,0,d,g),axis:new BBox27(0,0,d,g)},y=(D,k,A,M,_)=>{const{bbox:O}=D;if(O==null){k.visible=!1;return}const{datum:C,depth:I=-1,datumIndex:w,colorValue:L}=D,P=D.children.length===0,z=P?M:A,R=P?this.getTileStyleOverrides(w,C,I,L,z,_):this.getGroupStyleOverrides(w,C,I,z,_);k.crisp=!0,applyShapeStyle14(k,z,R,f),k.cornerRadius=P?h.cornerRadius:u.cornerRadius,k.zIndex=[0,I,_?1:0];const B=D.parent?.children.every(V=>V.children.length===0),E=D.parent!=null?D.parent.bbox:void 0,F=D.parent!=null?D.parent.padding:void 0;B===!0&&E!=null&&F!=null?(k.clipBBox=O,k.x=E.x+F.left,k.y=E.y+F.top,k.width=E.width-(F.left+F.right),k.height=E.height-(F.top+F.bottom)):(k.clipBBox=void 0,k.x=O.x,k.y=O.y,k.width=O.width,k.height=O.height),k.visible=!0},m=this.getGroupBaseStyle(!1),b=this.getTileBaseStyle(!1);this.datumSelection.each((D,k)=>y(k,D,m,b,!1));const x=this.getGroupBaseStyle(!0),S=this.getTileBaseStyle(!0);this.highlightSelection.each((D,k)=>{y(k,D,x,S,!0)});const v=(D,k,A,M)=>{const _=D.children.length===0,O=A===0?D.label:D.secondaryLabel;if(O==null){k.visible=!1;return}let C;if(M){const{tile:I,group:w}=c;C=I.secondaryLabel.color,_?A===0&&(C=I.label.color):C=w.label.color}k.text=O.text,k.fontSize=O.fontSize,k.lineHeight=O.lineHeight,k.fontStyle=O.fontStyle,k.fontFamily=O.fontFamily,k.fontWeight=O.fontWeight,k.fill=C??O.color,k.textAlign=O.textAlign,k.textBaseline=O.verticalAlign,k.x=O.x,k.y=O.y,k.visible=!0,k.zIndex=1},T=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(Text9).forEach(D=>{const k=D.closestDatum();v(k,D,D.tag,k===T)})}pickNodesExactShape(t){const e=super.pickNodesExactShape(t);return e.sort((i,o)=>o.datumIndex.length-i.datumIndex.length),e}pickNodeClosestDatum(t){const e=this.pickNodesExactShape(t);return e.length!==0?{datum:e[0],distance:0}:this.pickNodeNearestDistantObject(t,this.datumSelection.nodes())}getTooltipContent(t){const{id:e,properties:i}=this,{labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,tooltip:h}=i,u=t.reduce((D,k)=>D?.children[k],this.rootNode);if(u==null)return;const{datum:p,depth:d,children:g}=u;if(p==null||d==null)return;const f=g.length===0,y=[],m=r!=null?p[r]:void 0;m!=null&&y.push({label:n,fallbackLabel:r,value:m});const b=l!=null?p[l]:void 0;b!=null&&y.push({label:c,fallbackLabel:l,value:b});let x;f?(x=this.getTileBaseStyle(!1),Object.assign(x,this.getTileStyleOverrides(t,p,d,b,x,!1))):(x=this.getGroupBaseStyle(!1),Object.assign(x,this.getGroupStyleOverrides(t,p,d,x,!1)));const S=x.fill,v=getShapeStyle20({shape:"square",fill:S,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults);import_ag_charts_community292._ModuleSupport.isGradientFill(v.fill)&&(v.fill={...v.fill,gradient:"linear",rotation:0,reverse:!1});const T=f?{marker:v}:void 0;return h.formatTooltip(this.properties,{title:o!=null?p[o]:void 0,symbol:T,data:y},{seriesId:e,datum:p,title:void 0,depth:d,labelKey:o,secondaryLabelKey:s,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,...x})}computeFocusBounds(t){return Transformable4.toCanvas(this.contentGroup,t.getBBox())}};TreemapSeries.className="TreemapSeries",TreemapSeries.type="treemap";var import_ag_charts_community293=require("ag-charts-community"),import_ag_charts_core104=require("ag-charts-core"),{commonSeriesOptionsDefs:commonSeriesOptionsDefs25,seriesLabelOptionsDefs:seriesLabelOptionsDefs18,tooltipOptionsDefs:tooltipOptionsDefs24}=import_ag_charts_community293._ModuleSupport,treemapSeriesOptionsDef={type:(0,import_ag_charts_core104.required)((0,import_ag_charts_core104.constant)("treemap")),labelKey:import_ag_charts_core104.string,secondaryLabelKey:import_ag_charts_core104.string,childrenKey:import_ag_charts_core104.string,sizeKey:import_ag_charts_core104.string,colorKey:import_ag_charts_core104.string,sizeName:import_ag_charts_core104.string,colorName:import_ag_charts_core104.string,fills:(0,import_ag_charts_core104.arrayOf)(import_ag_charts_core104.colorUnion),strokes:(0,import_ag_charts_core104.arrayOf)(import_ag_charts_core104.color),colorRange:(0,import_ag_charts_core104.arrayOf)(import_ag_charts_core104.color),itemStyler:import_ag_charts_core104.callback,group:{gap:import_ag_charts_core104.positiveNumber,padding:import_ag_charts_core104.positiveNumber,cornerRadius:import_ag_charts_core104.positiveNumber,textAlign:(0,import_ag_charts_core104.union)("left","center","right"),interactive:import_ag_charts_core104.boolean,label:{...seriesLabelOptionsDefs18,spacing:import_ag_charts_core104.positiveNumber},...import_ag_charts_core104.fillOptionsDef,...import_ag_charts_core104.strokeOptionsDef},tile:{gap:import_ag_charts_core104.positiveNumber,padding:import_ag_charts_core104.positiveNumber,cornerRadius:import_ag_charts_core104.positiveNumber,textAlign:(0,import_ag_charts_core104.union)("left","center","right"),verticalAlign:(0,import_ag_charts_core104.union)("top","middle","bottom"),label:{...seriesLabelOptionsDefs18,spacing:import_ag_charts_core104.positiveNumber,lineHeight:import_ag_charts_core104.positiveNumber,minimumFontSize:import_ag_charts_core104.positiveNumber,wrapping:(0,import_ag_charts_core104.union)("never","always","hyphenate","on-space"),overflowStrategy:(0,import_ag_charts_core104.union)("ellipsis","hide")},secondaryLabel:{...seriesLabelOptionsDefs18,lineHeight:import_ag_charts_core104.positiveNumber,minimumFontSize:import_ag_charts_core104.positiveNumber,wrapping:(0,import_ag_charts_core104.union)("never","always","hyphenate","on-space"),overflowStrategy:(0,import_ag_charts_core104.union)("ellipsis","hide")},...import_ag_charts_core104.fillOptionsDef,...import_ag_charts_core104.strokeOptionsDef},tooltip:tooltipOptionsDefs24,...commonSeriesOptionsDefs25,highlightStyle:{group:{label:{color:import_ag_charts_core104.color},...import_ag_charts_core104.fillOptionsDef,...import_ag_charts_core104.strokeOptionsDef},tile:{label:{color:import_ag_charts_core104.color},secondaryLabel:{color:import_ag_charts_core104.color},...import_ag_charts_core104.fillOptionsDef,...import_ag_charts_core104.strokeOptionsDef}}};treemapSeriesOptionsDef.fillGradientDefaults=import_ag_charts_core104.fillGradientDefaults,treemapSeriesOptionsDef.fillPatternDefaults=import_ag_charts_core104.fillPatternDefaults,treemapSeriesOptionsDef.undocumentedGroupFills=(0,import_ag_charts_core104.arrayOf)(import_ag_charts_core104.color),treemapSeriesOptionsDef.undocumentedGroupStrokes=(0,import_ag_charts_core104.arrayOf)(import_ag_charts_core104.color);var{FONT_SIZE_RATIO:FONT_SIZE_RATIO4}=import_ag_charts_community294._ModuleSupport,TreemapModule={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:t=>new TreemapSeries(t),tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:import_ag_charts_community294._ModuleSupport.FILL_PATTERN_DEFAULTS,undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.5]},minimumFontSize:{$rem:[FONT_SIZE_RATIO4.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:{$ref:"backgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:[FONT_SIZE_RATIO4.SMALLER]},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"backgroundColor"}},secondaryLabel:{color:{$ref:"backgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}}},TreemapSeriesModule={type:"series",name:"treemap",chartType:"hierarchy",enterprise:!0,options:treemapSeriesOptionsDef,create:t=>new TreemapSeries(t)},ModuleRegistry=import_ag_charts_community295._ModuleSupport.ModuleRegistry,AllCartesianEnterpriseModules=[OrdinalTimeAxisModule2,BoxPlotSeriesModule,CandlestickSeriesModule,ConeFunnelSeriesModule,FunnelSeriesModule,HeatmapSeriesModule,OhlcSeriesModule,RangeAreaSeriesModule,RangeBarSeriesModule,WaterfallSeriesModule],AllPolarEnterpriseModules=[AngleNumberAxisModule2,AngleCategoryAxisModule2,RadiusNumberAxisModule2,RadiusCategoryAxisModule2,NightingaleSeriesModule,RadarAreaSeriesModule,RadarLineSeriesModule,RadialBarSeriesModule,RadialColumnSeriesModule],AllFlowProportionEnterpriseModules=[FlowProportionChartModule,ChordSeriesModule,SankeySeriesModule],AllGaugeEnterpriseModules=[GaugeChartModule,LinearGaugeSeriesModule,RadialGaugeSeriesModule],AllHierarchyEnterpriseModules=[HierarchyChartModule,SunburstSeriesModule,TreemapSeriesModule],AllStandaloneEnterpriseModules=[StandaloneChartModule,PyramidSeriesModule],AllTopologyEnterpriseModules=[TopologyChartModule,MapLineSeriesModule,MapLineBackgroundSeriesModule,MapMarkerSeriesModule,MapShapeSeriesModule,MapShapeBackgroundSeriesModule],AllEnterpriseModules=[...AllCartesianEnterpriseModules,...AllPolarEnterpriseModules,...AllFlowProportionEnterpriseModules,...AllGaugeEnterpriseModules,...AllHierarchyEnterpriseModules,...AllStandaloneEnterpriseModules,...AllTopologyEnterpriseModules,AnnotationsModule2,NavigatorModule2,InitialStateModule],import_ag_charts_community298=require("ag-charts-community"),import_ag_charts_community297=require("ag-charts-community"),import_ag_charts_community296=require("ag-charts-community"),indexes={xMin:X_MIN,xMax:X_MAX,yMin:Y_MIN,yMax:Y_MAX,span:SPAN},AGGREGATION_THRESHOLD4=1e3,PRECISION2=5;function getIndices(t,e){return Array.from({length:t},(i,o)=>{const s=o*SPAN,a=e[s+X_MIN],r=e[s+X_MAX];return(a+r)/2|0})}function aggregateBarData(t,e,i){if(t.length<AGGREGATION_THRESHOLD4)return;const[o,s]=aggregationDomain(i);let a=maxRangeFittingPoints(t,PRECISION2),{indexData:r,valueData:n}=createAggregationIndices(t,e,e,o,s,a),l=getIndices(a,r);const c=[{maxRange:a,indexData:r,indices:l,indexes}];for(;a>64;)({indexData:r,valueData:n,maxRange:a}=compactAggregationIndices(r,n,a)),l=getIndices(a,r),c.push({maxRange:a,indexData:r,indices:l,indexes});return c.reverse(),c}var{ChartAxisDirection:ChartAxisDirection30,ContinuousScale:ContinuousScale9,OrdinalTimeScale:OrdinalTimeScale5}=import_ag_charts_community297._ModuleSupport,BarSeries=class extends import_ag_charts_community297._ModuleSupport.BarSeries{aggregateData(t,e){if(e?.type!=="ungrouped")return;const i=this.axes[ChartAxisDirection30.X];if(i==null||!(ContinuousScale9.is(i.scale)||OrdinalTimeScale5.is(i.scale)))return;const o=t.resolveKeysById(this,"xValue",e),s=t.resolveColumnById(this,"yValue-raw",e),{index:a}=t.resolveProcessedDataDefById(this,"xValue"),r=e.domain.keys[a];return aggregateBarData(o,s,r)}},{BarSeriesModule}=import_ag_charts_community298._ModuleSupport,BarModule={...BarSeriesModule,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new BarSeries(t)},import_ag_charts_community301=require("ag-charts-community"),import_ag_charts_community300=require("ag-charts-community"),import_ag_charts_community299=require("ag-charts-community"),AGGREGATION_THRESHOLD5=1e3,MAX_POINTS=10;function aggregationContainsIndex(t,e,i,o,s,a){const r=t[a];if(r==null)return!1;const n=xRatioForDatumIndex(r,e,i),l=aggregationIndexForXRatio(n,s);return a===o[l+X_MIN]||a===o[l+X_MAX]||a===o[l+Y_MIN]||a===o[l+Y_MAX]}function aggregateLineData(t,e,i){if(t.length<AGGREGATION_THRESHOLD5)return;const[o,s]=aggregationDomain(i);let a=maxRangeFittingPoints(t,MAX_POINTS);const{indexData:r,valueData:n}=createAggregationIndices(t,e,e,o,s,a);let l=[];for(let h=0;h<t.length;h+=1)aggregationContainsIndex(t,o,s,r,a,h)&&l.push(h);const c=[{maxRange:a,indices:l}];for(;l.length>MAX_POINTS&&a>64;)({maxRange:a}=compactAggregationIndices(r,n,a,{inPlace:!0})),l=l.filter(aggregationContainsIndex.bind(null,t,o,s,r,a)),c.push({maxRange:a,indices:l});return c.reverse(),c}var{ChartAxisDirection:ChartAxisDirection31,ContinuousScale:ContinuousScale10,OrdinalTimeScale:OrdinalTimeScale6}=import_ag_charts_community300._ModuleSupport,LineSeries=class extends import_ag_charts_community300._ModuleSupport.LineSeries{aggregateData(t,e){const i=this.axes[ChartAxisDirection31.X];if(i==null||!(ContinuousScale10.is(i.scale)||OrdinalTimeScale6.is(i.scale)))return;const o=t.resolveColumnById(this,"xValue",e),s=t.resolveColumnById(this,"yValueRaw",e),a=t.getDomain(this,"xValue","value",e);return aggregateLineData(o,s,a)}},{LineSeriesModule}=import_ag_charts_community301._ModuleSupport,LineModule={...LineSeriesModule,type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new LineSeries(t)},styles_default=`.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-dialog{display:flex;flex-direction:column;font-size:var(--ag-charts-chrome-font-size-large)}.ag-charts-dialog__tabs{display:flex;flex-direction:column}.ag-charts-dialog__header{border-bottom:1px solid var(--ag-charts-border-color);display:flex}.ag-charts-dialog__tab-list{display:flex;gap:calc(var(--ag-charts-spacing) * 2)}.ag-charts-dialog__drag-handle{align-items:center;color:inherit;cursor:grab;display:flex;padding:1px 6px;text-align:center}.ag-charts-dialog__drag-handle--dragging{cursor:grabbing}.ag-charts-dialog__tab-button{background:none;border:0;border-bottom:2px solid transparent;border-radius:0;color:var(--ag-charts-chrome-subtle-text-color);margin-bottom:-1px;padding:var(--input-padding) calc(var(--input-padding) / 2)}.ag-charts-dialog__tab-button:hover{background:none}.ag-charts-dialog__tab-button--active{border-color:var(--ag-charts-accent-color);color:inherit}.ag-charts-dialog__drag-handle+.ag-charts-dialog__tab-button{margin-left:calc(var(--ag-charts-spacing) * -2)}.ag-charts-button.ag-charts-dialog__close-button{background:none;border:0;margin-left:auto;padding:1px 6px}.ag-charts-dialog__close-button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-dialog__tab-panel{display:none;flex-direction:column;gap:calc(var(--ag-charts-spacing) * 4);margin:0 calc(var(--ag-charts-spacing) * 4);padding:calc(var(--ag-charts-spacing) * 4) 0}.ag-charts-dialog__tab-panel--active{display:flex}.ag-charts-dialog__input-group-line{display:flex;gap:16px 18px;flex-wrap:wrap}.ag-charts-dialog__input-group{align-items:center;display:flex;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-dialog__input-group-label{color:var(--ag-charts-chrome-subtle-text-color);margin-right:5px}.ag-charts-dialog__input-group-label[for]{cursor:pointer}.ag-charts-dialog__button{border-radius:0;margin-right:-1px}.ag-charts-dialog__button.ag-charts-dialog__button--active{background:var(--ag-charts-button-focus-background-color);border-color:var(--ag-charts-input-focus-border-color);color:var(--ag-charts-input-focus-text-color);z-index:var(--input-layer-active)}.ag-charts-dialog__button:first-child,.ag-charts-dialog__input-group-label+.ag-charts-dialog__button{border-bottom-left-radius:var(--ag-charts-input-border-radius);border-top-left-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__button:last-child{border-bottom-right-radius:var(--ag-charts-input-border-radius);border-top-right-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__color-picker-button{--color: #000;background:var(--color);border:none;color:transparent;height:26px;width:26px}.ag-charts-dialog__color-picker-button:hover{background:var(--color)}.ag-charts-dialog__color-picker-button--multi-color,.ag-charts-dialog__color-picker-button--multi-color:hover{background:linear-gradient(135deg,red 0%,#ff0 calc(100% * 1 / 6),#0f0 calc(100% * 2 / 6),#0ff 50%,#00f calc(100% * 4 / 6),#f0f calc(100% * 5 / 6),red 100%)}.ag-charts-color-picker{width:190px;padding:8px;--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>');--multi-color: linear-gradient( 135deg, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-color-picker__content{display:flex;flex-direction:column}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:calc(var(--ag-charts-border-radius) * 1.5);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-row{display:flex;gap:8px;align-items:center;margin-bottom:4px;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button{width:36px;margin-left:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);border:0;background:var(--multi-color);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button--hidden{display:none}.ag-charts-color-picker__multi-color-button--active{box-shadow:inset 0 0 0 1px #0003;outline-offset:1px;outline:2px solid #2196f3}.ag-charts-color-picker__hue-input{flex:1 0 0}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:var(--ag-charts-border-radius);overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-accent-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:calc(var(--ag-charts-border-radius) / 2);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-label--multi-color{background:var(--multi-color)}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__line-stroke-width-menu,.ag-charts-annotations__line-style-type-menu,.ag-charts-annotations__text-size-menu{border-top-left-radius:0;border-top-right-radius:0;.ag-charts-menu__row:first-child{border-radius:0}}.ag-charts-annotations__text-size-menu{--item-padding: 4px 8px;min-width:34px;text-align:center}.ag-charts-annotations__line-stroke-width-menu{--item-padding: 6px;column-gap:6px}.ag-charts-annotations__line-style-type-menu{--item-padding: 6px;column-gap:0}.ag-charts-annotations__stroke-width-button:before{background:var(--ag-charts-foreground-color);content:"";margin-right:var(--toolbar-button-padding);height:min(var(--stroke-width),20px);width:12px}.ag-charts-annotations__stroke-width-button[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-annotations__color-picker-button{--emblem: var(--color)}.ag-charts-annotations__color-picker-button--multi-color{--emblem: linear-gradient( to right, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-annotations__color-picker-button:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--emblem)}.ag-charts-annotations__color-picker-button[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-annotations__toolbar-menu{min-width:200px}.ag-charts-annotations__axis-button--hidden{display:none}.ag-charts-annotations__axis-button{background-color:var(--ag-charts-crosshair-label-background-color);border-radius:calc(var(--ag-charts-border-radius) / 2);border:none;box-sizing:border-box;color:var(--ag-charts-crosshair-label-text-color);cursor:pointer;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);left:0;line-height:16px;overflow:hidden;padding:0;position:absolute;top:0;user-select:none;white-space:nowrap;z-index:var(--ag-charts-layer-annotations)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-background-color)}.ag-charts-dialog--annotation-settings{min-height:233px;width:289px}.ag-charts-dialog--annotation-settings .ag-charts-textarea{height:calc(10px * 2 + var(--textarea-line-height) * 1em * 3 + 2px);overflow-y:auto;resize:vertical}.ag-charts-context-menu{background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);box-shadow:var(--ag-charts-shadow);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:calc(var(--ag-charts-chrome-font-size) * (13 / 12));font-weight:var(--ag-charts-chrome-font-weight);transition:transform .1s ease;white-space:nowrap;z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-context-menu__cover{position:fixed;left:0;top:0}.ag-charts-context-menu__menu{display:flex;flex-direction:column;padding:.5em 0}.ag-charts-context-menu__menu:focus{outline:none}.ag-charts-context-menu__item{background:none;border:none;box-sizing:border-box;color:inherit;font:inherit;padding:.5em 1em;text-align:left;-webkit-appearance:none;-moz-appearance:none}.ag-charts-context-menu__item:focus,.ag-charts-context-menu__item:active{background:var(--ag-charts-focus-color)}.ag-charts-context-menu__item[data-focus-visible-override=true]:focus,.ag-charts-context-menu__item:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-context-menu__item[data-focus-visible-override=false]{outline:inherit;box-shadow:inherit;z-index:inherit}.ag-charts-context-menu__item[aria-disabled=true]{border:none;opacity:.5;text-align:left}.ag-charts-context-menu__item[aria-disabled=true]:focus{background:inherit;cursor:inherit}.ag-charts-context-menu__divider{margin:5px 0;background:#babfc7;height:1px}.ag-charts-context-menu__divider.ag-charts-dark-context-menu{background:#2196f31a}.ag-charts-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-font-size);font-weight:var(--ag-charts-font-weight);overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-charts-crosshair-label-content{padding:0 8px;border-radius:calc(var(--ag-charts-border-radius) / 2);line-height:calc(var(--ag-charts-font-size) + 8px);background-color:var(--ag-charts-crosshair-label-background-color);color:var(--ag-charts-crosshair-label-text-color)}.ag-charts-crosshair-label--hidden{visibility:hidden!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{--placeholder-text-color: var(--ag-charts-input-placeholder-text-color);display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;outline:none;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--placeholder-text-color);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}.ag-charts-chart-toolbar__menu{min-width:200px}.ag-charts-range-buttons .ag-charts-toolbar__button{padding:var(--toolbar-button-padding) calc(var(--toolbar-button-padding) * 1.5)}.ag-charts-zoom-buttons{align-items:center;display:flex;height:44px;justify-content:center;overflow:hidden;padding-bottom:10px;pointer-events:none;width:100%;.ag-charts-toolbar{--toolbar-size: 24px;--toolbar-button-padding: 1px;display:flex;font-size:var(--ag-charts-chrome-font-size);height:var(--toolbar-size);justify-content:center;opacity:1;pointer-events:auto;transition:opacity .2s ease-in-out,transform .4s ease-in-out;.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__label{padding-left:var(--ag-charts-spacing);padding-right:var(--ag-charts-spacing)}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{padding-left:0}.ag-charts-toolbar__button--gap{margin-left:var(--toolbar-gap)}.ag-charts-zoom-buttons__toolbar--hidden{opacity:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out}}}.ag-charts-shared-toolbar{gap:var(--toolbar-gap);.ag-charts-toolbar__button{border-radius:var(--ag-charts-border-radius);margin:0}}
`;import_ag_charts_community302._ModuleSupport.ModuleRegistry.registerMany(AllEnterpriseModules);function setupEnterpriseModules(){import_ag_charts_community302._ModuleSupport.moduleRegistry.register(AngleCategoryAxisModule,AngleNumberAxisModule,AnimationModule,AnnotationsModule,BackgroundModule,BarModule,ForegroundModule,BoxPlotModule,CandlestickModule,ChordModule,ConeFunnelModule,FunnelModule,OhlcModule,ChartToolbarModule,ContextMenuModule,CrosshairModule,DataSourceModule,ErrorBarsModule,LinearGaugeModule,LineModule,MapLineModule,MapLineBackgroundModule,MapMarkerModule,MapShapeModule,MapShapeBackgroundModule,NavigatorModule,StatusBarModule,GradientLegendModule,HeatmapModule,NightingaleModule,OrdinalTimeAxisModule,RadarAreaModule,RadarLineModule,RadialBarModule,RadialColumnModule,RadiusCategoryAxisModule,RadialGaugeModule,RadiusNumberAxisModule,RangeBarModule,RangeAreaModule,RangesModule,PyramidModule,SankeyModule,SharedToolbarModule,SunburstModule,SyncModule,TreemapModule,WaterfallModule,ZoomModule),import_ag_charts_community302._ModuleSupport.enterpriseModule.isEnterprise=!0,import_ag_charts_community302._ModuleSupport.enterpriseModule.styles=styles_default,import_ag_charts_community302._ModuleSupport.enterpriseModule.licenseManager=t=>new LicenseManager(t.container?.ownerDocument??(typeof document>"u"?void 0:document)),import_ag_charts_community302._ModuleSupport.enterpriseModule.injectWatermark=injectWatermark}__reExport(main_exports,require("ag-charts-community"),module.exports),setupEnterpriseModules();var LicenseManager2={setLicenseKey(t){LicenseManager.setLicenseKey(t)}};function setupEnterpriseModules2(){setupEnterpriseModules(),(0,import_ag_charts_community303.setupCommunityModules)()}var AgChartsEnterpriseModule={VERSION:import_ag_charts_community303.VERSION,_Scene:import_ag_charts_community303._Scene,_Theme:import_ag_charts_community303._Theme,_Util:import_ag_charts_community303._Util,create:import_ag_charts_community303.AgCharts.create.bind(import_ag_charts_community303.AgCharts),createSparkline:import_ag_charts_community303.AgCharts.__createSparkline.bind(import_ag_charts_community303.AgCharts),setup:setupEnterpriseModules2,setGridContext:LicenseManager.setGridContext.bind(LicenseManager),setLicenseKey:LicenseManager.setLicenseKey.bind(LicenseManager),isEnterprise:!0};
